VERSION E05

PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:1    
        1        1        /*M*    VEX$ERROR - EDIT ROUTINE TO PRINT ERROR MESSAGES */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DMR,PLM=5,IND=3,CTI=3,SDI=3,MCL=10,CSI=0,ECI=0 */
        8        8        VEX$ERROR: PROC(ERR#,FLAGLEV) ALTRET;
        9        9        /**/
       10       10        /*F*   NAME:     VEX$ERROR
       11       11               PURPOSE:  TO REPORT ERROR MESSAGE TO THE USER     */
       12       12        /**/
       13       13        /*D*     NAME:     VEX$ERROR
       14       14                 PARAMETERS: ERR# - THE ERROR NUMBER FOR THE ERROR MESSAGE TO
       15       15                                BE REPORTED TO THE USER. IF ERR# IS ZERO THEN
       16       16                                THE ERROR NUMBER FROM THE LAST TCB FRAME IS USED.
       17       17                           FLAGLEV - THE NUMBER OF ASTERISKS TO PRECEDE THE
       18       18                                MESSAGE.
       19       19                 DESCRIPTION: VEX$ERROR USES THE M$ERRMSG SERVICE TO REPORT
       20       20                           MESSAGES TO THE USER. IT ALWAYS RETURNS TO THE CALLER. */
       21       21        /**/
       22       22        /**********************************************************************/
       23       23        /*   PARAMETERS   PARAMETERS   PARAMETERS   PARAMETERS   PARAMETERS   */
       24       24        /**********************************************************************/
       25       25    1   DCL ERR# UBIN(36);
       26       26    1   DCL FLAGLEV UBIN(36);
       27       27        /**/
       28       28        /*********************************************************************/
       29       29        /*   INCLUDE FILES   INCLUDE FILES   INCLUDE FILES   INCLUDE FILES   */
       30       30        /*********************************************************************/
       31       31        %PLIST;
       32       32        %INCLUDE CP_6;
       33      113        %B$TCB;
       34      116        %B$ALT;
       35      124        %INCLUDE VE_SUBS_C;
       36      318        %INCLUDE VE_PERR_C;
       37      535        %INCLUDE NK_VFC_C ;
PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:2    
       38      609        /**/
       39      610        /********************************************************************/
       40      611        /*   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   */
       41      612        /********************************************************************/
       42      613        %FPT_ERRMSG   (FPTN=ERRMSG_FPT,
       43      614                   STCLASS="STATIC SYMDEF",
       44      615                      CODE = ERR_CODE,
       45      616                      FIELD1 = SUB_BUF_1,
       46      617                      FIELD2 = SUB_BUF_2,
       47      618                      FIELD3 = SUB_BUF_3,
       48      619                      RESULTS = RESULTS_BUF,
       49      620                      INCLCODE = NO,
       50      621                      VFC = %VFC_TRANSITION1,
       51      622                      FILEACCT=VE_ERRMSGACCT,
       52      623                      OUTDCB1 = M$DO,
       53      624                      OUTDCB2 = M$ME) ;
       54      651
       55      652                 %VLP_ACCT(FPTN=VE_ERRMSGACCT,
       56      653                      STCLASS = "STATIC SYMDEF",
       57      654                      ACCT = '        ');
       58      667        /**/
       59      668        /***************************************************************************/
       60      669        /*   STATIC DATA   STATIC DATA   STATIC DATA   STATIC DATA   STATIC DATA   */
       61      670        /***************************************************************************/
       62      671    1   DCL ERR_BUF CHAR(120) ;
       63      672        %VLR_ERRMSG        (FPTN = RESULTS_BUF,
       64      673                           STCLASS = STATIC);
       65      695    1   DCL I UBIN WORD STATIC ;
       66      696        /**/
       67      697        /*****************************************************************/
       68      698        /*   AUTO DATA   AUTO DATA   AUTO DATA   AUTO DATA   AUTO DATA   */
       69      699        /*****************************************************************/
       70      700    1   DCL PRINT BIT(1) ;
       71      701        /**/
       72      702        /*****************************************************************/
       73      703        /*   SYMREFS   SYMREFS   SYMREFS   SYMREFS   SYMREFS   SYMREFS   */
       74      704        /*****************************************************************/
PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:3    
       75      705    1   DCL 1 ERR_CODE SYMREF,
       76      706    1          2 FCG_MID BIT(18) UNAL,
       77      707    1          2 MON BIT(1) UNAL,
       78      708    1          2 ERR# UBIN(14) UNAL,
       79      709    1          2 SEV UBIN(3) UNAL;
       80      710    1   DCL 1 SUB_BUF_1 SYMREF,
       81      711    1          2 COUNT UBIN(9) UNAL,
       82      712    1          2 TEXT CHAR(31) UNAL;
       83      713    1   DCL 1 SUB_BUF_2 SYMREF,
       84      714    1          2 COUNT UBIN(9) UNAL,
       85      715    1          2 TEXT CHAR(31) UNAL;
       86      716    1   DCL 1 SUB_BUF_3 SYMREF,
       87      717    1          2 COUNT UBIN(9) UNAL,
       88      718    1          2 TEXT CHAR(31) UNAL;
       89      719    1   DCL SEQ_TEXT_BUF CHAR(9) SYMREF;
       90      720    1   DCL LAST_KEY UBIN(36) SYMREF;
       91      721    1   DCL HI_SEQNUM UBIN(36) SYMREF;
       92      722    1   DCL FILE_TYP UBIN WORD SYMREF ;
       93      723    1   DCL M$FILE_NUM UBIN WORD SYMREF;
       94      724    1   DCL M$FILE2_NUM UBIN WORD SYMREF;
       95      725    1   DCL B$TCB$ PTR SYMREF;
       96      726        %INCLUDE VE_FLAGS_R ;
       97      777    1   DCL VEH$MORE_HELP ENTRY ;
       98      778    1   DCL VEH$ALL_HELP ENTRY ;
       99      779    1   DCL M$DO DCB;
      100      780    1   DCL M$ME DCB;
      101      781    1   DCL VEX$SEQNUM_TEXT ENTRY(2);
      102      782        /**/
      103      783        /*****************************************************************************/
      104      784        /*   PROCEDURE   PROCEDURE   PROCEDURE   PROCEDURE   PROCEDURE   PROCEDURE   */
      105      785        /*****************************************************************************/
      106      786    1        PRINT = '1'B ;
      107      787    1        GOTO BEGIN ;
      108      788
      109      789    1   VEX$ERROR_NO_PRINT: ENTRY(ERR#,FLAGLEV) ALTRET;
      110      790
      111      791    1        PRINT = '0'B ;
PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:4    
      112      792    1   BEGIN:
      113      793    1        FLAGS.HELP_MODE = '0'B ;
      114      794    2        IF (ERR# = E$E_EDITEOF OR ERR# = E$E_UNABLE2RR) THEN DO;
      115      795    2           CALL VEX$SEQNUM_TEXT(LAST_KEY,SUB_BUF_1) ;
      116      796    2           HI_SEQNUM = LAST_KEY;
      117      797    2           SUB_BUF_2.COUNT = 0 ;
      118      798    2           SUB_BUF_3.COUNT = 0 ;
      119      799    2           END;
      120      800    2        IF (ERR# = 0) THEN DO;
      121      801    2           ERR_CODE = B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR;
      122      802    2           ERRMSG_FPT.V.INCLCODE# = TRUE;
      123      803    2           END;
      124      804    2        ELSE DO;
      125      805    2           ERR_CODE.FCG_MID = '260505'O;
      126      806    2           ERR_CODE.MON = '0'B;
      127      807    2           ERR_CODE.ERR# = ERR#;
      128      808    2           ERRMSG_FPT.V.INCLCODE# = FALSE;
      129      809    2           END;
      130      810    1        ERR_CODE.SEV = 0;
      131      811    1        ERRMSG_FPT.V.SUBMESS# = TRUE;
      132      812        /**/
      133      813    2        IF (ERR# = E$E_SYNTAX) THEN DO ;
      134      814    2           I = SUB_BUF_1.COUNT ;
      135      815    2           CALL CHARBIN(I, SUBSTR(SUB_BUF_1.TEXT,0,I)) ;
      136      816    2           ERRMSG_FPT.V.POINTER# = I + 1 ;
      137      817    2           END ;                           /* THEN DO */
      138      818    1        ELSE ERRMSG_FPT.V.POINTER# = 0 ;
      139      819        /**/
      140      820    1        ERRMSG_FPT.V.FLAGLEV# = FLAGLEV;
      141      821        /**/
      142      822    1   CALL_ERRMSG:
      143      823    1        IF PRINT
      144      824    1        THEN
      145      825    2        DO ;
      146      826    2           IF (B$TCB$ -> B$TCB.ALT$ ~= ADDR(NIL))AND
      147      827    2              (ERR_CODE.FCG_MID ~= '260505'O) THEN
      148      828    2              ERRMSG_FPT.V.DCB# = B$TCB$ -> B$TCB.ALT$ -> B$ALT.DCB#;
PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:5    
      149      829    2           ELSE IF (ERR_CODE.ERR# ~= E$E_MRGDESTNOTKEY) AND
      150      830    2                 (ERR_CODE.ERR# ~= E$FILECREATED)
      151      831    2              THEN ERRMSG_FPT.V.DCB# = M$FILE_NUM;
      152      832    2              ELSE ERRMSG_FPT.V.DCB# = M$FILE2_NUM;
      153      833    2           ERRMSG_FPT.BUF_ = VECTOR (ERR_BUF) ;
      154      834    2           CALL M$ERRMSG(ERRMSG_FPT) ALTRET (ERROR_1);
      155      835    2           END ;                           /* Then Do */
      156      836    1        RETURN;
      157      837        /**/
      158      838    1   ERROR_1:
      159      839    1        ALTRETURN;
      160      840        /**/
      161      841    1   VEX$ERRNEXT: ENTRY ALTRET;
      162      842        /**/
      163      843    1        PRINT = '1'B ;
      164      844    2        IF (FLAGS.HELP_MODE) THEN DO ;
      165      845    2           CALL VEH$MORE_HELP ;
      166      846    2           RETURN ;
      167      847    2           END ;                           /* THEN DO */
      168      848    1        IF (ERR_CODE.SEV < 7) THEN ERR_CODE.SEV = ERR_CODE.SEV + 1;
      169      849    1        ELSE ALTRETURN;
      170      850        /**/
      171      851    1        ERRMSG_FPT.V.SUBMESS# = FALSE;
      172      852    1        ERRMSG_FPT.V.POINTER# = 0 ;
      173      853    1        GOTO CALL_ERRMSG;
      174      854        /**/
      175      855    1   VEX$ERRMAX: ENTRY ALTRET;
      176      856        /**/
      177      857    1        PRINT = '1'B ;
      178      858    2        IF (FLAGS.HELP_MODE) THEN DO ;
      179      859    2           CALL VEH$ALL_HELP ;
      180      860    2           RETURN ;
      181      861    2           END ;                           /* THEN DO */
      182      862    1        ERR_CODE.SEV = 7;
      183      863    1        ERRMSG_FPT.V.SUBMESS# = TRUE;
      184      864    1        GOTO CALL_ERRMSG;
      185      865        /**/
PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:6    
      186      866    1   END;                                    /* END VEX$ERROR                      */

PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:7    
--  Include file information  --

   VE_FLAGS_R.:E05TOU  cannot be made into a system file and is referenced.
   NK_VFC_C.:E05TOU  is referenced.
   VE_PERR_C.:E05TOU  is referenced.
   VE_SUBS_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure VEX$ERROR.

   Procedure VEX$ERROR requires 150 words for executable code.
   Procedure VEX$ERROR requires 38 words of local(AUTO) storage.

    No errors detected in file VEX$ERROR.:E05TSI    .

PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:8    

 Object Unit name= VEX$ERROR                                  File name= VEX$ERROR.:E05TOU
 UTS= JUL 30 '97 07:11:51.12 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none    33     41  VEX$ERROR
    2   DCB   even  none     0      0  M$DO
    3   DCB   even  none     0      0  M$ME
    4   Proc  even  none   150    226  VEX$ERROR
    5  RoData even  none     8     10  VEX$ERROR

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     4      0   yes    yes     yes      Std        2  VEX$ERROR
     4      5          yes     yes      Std        2  VEX$ERROR_NO_PRINT
     4    154          yes     yes      Std        0  VEX$ERRNEXT
     4    206          yes     yes      Std        0  VEX$ERRMAX

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    1      0  ERRMSG_FPT                         1     32  VE_ERRMSGACCT
PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:9    

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       2 VEX$SEQNUM_TEXT
         yes           Std       0 VEH$MORE_HELP
         yes           Std       0 VEH$ALL_HELP
                       nStd      0 X66_AUTO_2
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  ERR_CODE                              SUB_BUF_1
     SUB_BUF_2                             SUB_BUF_3                             LAST_KEY
     HI_SEQNUM                             M$FILE_NUM                            M$FILE2_NUM
     B$TCB$                                FLAGS                                 M$DO
     M$ME                                  B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:10   


        1        1        /*M*    VEX$ERROR - EDIT ROUTINE TO PRINT ERROR MESSAGES */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DMR,PLM=5,IND=3,CTI=3,SDI=3,MCL=10,CSI=0,ECI=0 */
        8        8        VEX$ERROR: PROC(ERR#,FLAGLEV) ALTRET;

      8  4 000000   000000 700200 xent  VEX$ERROR    TSX0  ! X66_AUTO_2
         4 000001   000046 000002                    ZERO    38,2

        9        9        /**/
       10       10        /*F*   NAME:     VEX$ERROR
       11       11               PURPOSE:  TO REPORT ERROR MESSAGE TO THE USER     */
       12       12        /**/
       13       13        /*D*     NAME:     VEX$ERROR
       14       14                 PARAMETERS: ERR# - THE ERROR NUMBER FOR THE ERROR MESSAGE TO
       15       15                                BE REPORTED TO THE USER. IF ERR# IS ZERO THEN
       16       16                                THE ERROR NUMBER FROM THE LAST TCB FRAME IS USED.
       17       17                           FLAGLEV - THE NUMBER OF ASTERISKS TO PRECEDE THE
       18       18                                MESSAGE.
       19       19                 DESCRIPTION: VEX$ERROR USES THE M$ERRMSG SERVICE TO REPORT
       20       20                           MESSAGES TO THE USER. IT ALWAYS RETURNS TO THE CALLER. */
       21       21        /**/
       22       22        /**********************************************************************/
       23       23        /*   PARAMETERS   PARAMETERS   PARAMETERS   PARAMETERS   PARAMETERS   */
       24       24        /**********************************************************************/
       25       25    1   DCL ERR# UBIN(36);
       26       26    1   DCL FLAGLEV UBIN(36);
       27       27        /**/
       28       28        /*********************************************************************/
       29       29        /*   INCLUDE FILES   INCLUDE FILES   INCLUDE FILES   INCLUDE FILES   */
       30       30        /*********************************************************************/
       31       31        %PLIST;
       32       32        %INCLUDE CP_6;
PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:11   
       33      113        %B$TCB;
       34      116        %B$ALT;
       35      124        %INCLUDE VE_SUBS_C;
       36      318        %INCLUDE VE_PERR_C;
       37      535        %INCLUDE NK_VFC_C ;
       38      609        /**/
       39      610        /********************************************************************/
       40      611        /*   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   FPTS   */
       41      612        /********************************************************************/
       42      613        %FPT_ERRMSG   (FPTN=ERRMSG_FPT,
       43      614                   STCLASS="STATIC SYMDEF",
       44      615                      CODE = ERR_CODE,
       45      616                      FIELD1 = SUB_BUF_1,
       46      617                      FIELD2 = SUB_BUF_2,
       47      618                      FIELD3 = SUB_BUF_3,
       48      619                      RESULTS = RESULTS_BUF,
       49      620                      INCLCODE = NO,
       50      621                      VFC = %VFC_TRANSITION1,
       51      622                      FILEACCT=VE_ERRMSGACCT,
       52      623                      OUTDCB1 = M$DO,
       53      624                      OUTDCB2 = M$ME) ;
       54      651
       55      652                 %VLP_ACCT(FPTN=VE_ERRMSGACCT,
       56      653                      STCLASS = "STATIC SYMDEF",
       57      654                      ACCT = '        ');
       58      667        /**/
       59      668        /***************************************************************************/
       60      669        /*   STATIC DATA   STATIC DATA   STATIC DATA   STATIC DATA   STATIC DATA   */
       61      670        /***************************************************************************/
       62      671    1   DCL ERR_BUF CHAR(120) ;
       63      672        %VLR_ERRMSG        (FPTN = RESULTS_BUF,
       64      673                           STCLASS = STATIC);
       65      695    1   DCL I UBIN WORD STATIC ;
       66      696        /**/
       67      697        /*****************************************************************/
       68      698        /*   AUTO DATA   AUTO DATA   AUTO DATA   AUTO DATA   AUTO DATA   */
       69      699        /*****************************************************************/
PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:12   
       70      700    1   DCL PRINT BIT(1) ;
       71      701        /**/
       72      702        /*****************************************************************/
       73      703        /*   SYMREFS   SYMREFS   SYMREFS   SYMREFS   SYMREFS   SYMREFS   */
       74      704        /*****************************************************************/
       75      705    1   DCL 1 ERR_CODE SYMREF,
       76      706    1          2 FCG_MID BIT(18) UNAL,
       77      707    1          2 MON BIT(1) UNAL,
       78      708    1          2 ERR# UBIN(14) UNAL,
       79      709    1          2 SEV UBIN(3) UNAL;
       80      710    1   DCL 1 SUB_BUF_1 SYMREF,
       81      711    1          2 COUNT UBIN(9) UNAL,
       82      712    1          2 TEXT CHAR(31) UNAL;
       83      713    1   DCL 1 SUB_BUF_2 SYMREF,
       84      714    1          2 COUNT UBIN(9) UNAL,
       85      715    1          2 TEXT CHAR(31) UNAL;
       86      716    1   DCL 1 SUB_BUF_3 SYMREF,
       87      717    1          2 COUNT UBIN(9) UNAL,
       88      718    1          2 TEXT CHAR(31) UNAL;
       89      719    1   DCL SEQ_TEXT_BUF CHAR(9) SYMREF;
       90      720    1   DCL LAST_KEY UBIN(36) SYMREF;
       91      721    1   DCL HI_SEQNUM UBIN(36) SYMREF;
       92      722    1   DCL FILE_TYP UBIN WORD SYMREF ;
       93      723    1   DCL M$FILE_NUM UBIN WORD SYMREF;
       94      724    1   DCL M$FILE2_NUM UBIN WORD SYMREF;
       95      725    1   DCL B$TCB$ PTR SYMREF;
       96      726        %INCLUDE VE_FLAGS_R ;
       97      777    1   DCL VEH$MORE_HELP ENTRY ;
       98      778    1   DCL VEH$ALL_HELP ENTRY ;
       99      779    1   DCL M$DO DCB;
      100      780    1   DCL M$ME DCB;
      101      781    1   DCL VEX$SEQNUM_TEXT ENTRY(2);
      102      782        /**/
      103      783        /*****************************************************************************/
      104      784        /*   PROCEDURE   PROCEDURE   PROCEDURE   PROCEDURE   PROCEDURE   PROCEDURE   */
      105      785        /*****************************************************************************/
      106      786    1        PRINT = '1'B ;
PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:13   

    786  4 000002   400000 236003                    LDQ     -131072,DU
         4 000003   200043 756100                    STQ     PRINT,,AUTO

      107      787    1        GOTO BEGIN ;

    787  4 000004   000010 710000 4                  TRA     BEGIN

      108      788
      109      789    1   VEX$ERROR_NO_PRINT: ENTRY(ERR#,FLAGLEV) ALTRET;

    789  4 000005   000000 700200 xent  VEX$ERROR_N* TSX0  ! X66_AUTO_2
         4 000006   000046 000002                    ZERO    38,2

      110      790
      111      791    1        PRINT = '0'B ;

    791  4 000007   200043 450100                    STZ     PRINT,,AUTO

      112      792    1   BEGIN:
      113      793    1        FLAGS.HELP_MODE = '0'B ;

    793  4 000010   000000 236000 5     BEGIN        LDQ     0
         4 000011   000000 356000 xsym               ANSQ    FLAGS

      114      794    2        IF (ERR# = E$E_EDITEOF OR ERR# = E$E_UNABLE2RR) THEN DO;

    794  4 000012   200003 470500                    LDP0    @ERR#,,AUTO
         4 000013   000000 235100                    LDA     0,,PR0
         4 000014   000317 115007                    CMPA    207,DL
         4 000015   000020 600000 4                  TZE     s:795
         4 000016   000433 115007                    CMPA    283,DL
         4 000017   000031 601000 4                  TNZ     s:800

      115      795    2           CALL VEX$SEQNUM_TEXT(LAST_KEY,SUB_BUF_1) ;

    795  4 000020   000001 630400 5                  EPPR0   1
PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:14   
         4 000021   000020 631400 xsym               EPPR1   B_VECTNIL+16
         4 000022   000000 701000 xent               TSX1    VEX$SEQNUM_TEXT
         4 000023   000000 011000                    NOP     0

      116      796    2           HI_SEQNUM = LAST_KEY;

    796  4 000024   000000 235000 xsym               LDA     LAST_KEY
         4 000025   000000 755000 xsym               STA     HI_SEQNUM

      117      797    2           SUB_BUF_2.COUNT = 0 ;

    797  4 000026   000000 236003                    LDQ     0,DU
         4 000027   000000 552040 xsym               STBQ    SUB_BUF_2,'40'O

      118      798    2           SUB_BUF_3.COUNT = 0 ;

    798  4 000030   000000 552040 xsym               STBQ    SUB_BUF_3,'40'O

      119      799    2           END;

      120      800    2        IF (ERR# = 0) THEN DO;

    800  4 000031   200003 470500                    LDP0    @ERR#,,AUTO
         4 000032   000000 235100                    LDA     0,,PR0
         4 000033   000043 601000 4                  TNZ     s:805

      121      801    2           ERR_CODE = B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR;

    801  4 000034   000000 471400 xsym               LDP1    B$TCB$
         4 000035   100000 473500                    LDP3    0,,PR1
         4 000036   300102 236100                    LDQ     66,,PR3
         4 000037   000000 756000 xsym               STQ     ERR_CODE

      122      802    2           ERRMSG_FPT.V.INCLCODE# = TRUE;

    802  4 000040   004000 236003                    LDQ     2048,DU
         4 000041   000030 256000 1                  ORSQ    ERRMSG_FPT+24
PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:15   

      123      803    2           END;

    803  4 000042   000056 710000 4                  TRA     s:810

      124      804    2        ELSE DO;

      125      805    2           ERR_CODE.FCG_MID = '260505'O;

    805  4 000043   260505 220003                    LDX0    90437,DU
         4 000044   000000 740000 xsym               STX0    ERR_CODE

      126      806    2           ERR_CODE.MON = '0'B;

    806  4 000045   000003 236000 5                  LDQ     3
         4 000046   000000 356000 xsym               ANSQ    ERR_CODE

      127      807    2           ERR_CODE.ERR# = ERR#;

    807  4 000047   000000 236100                    LDQ     0,,PR0
         4 000050   000003 736000                    QLS     3
         4 000051   000000 676000 xsym               ERQ     ERR_CODE
         4 000052   377770 376007                    ANQ     131064,DL
         4 000053   000000 656000 xsym               ERSQ    ERR_CODE

      128      808    2           ERRMSG_FPT.V.INCLCODE# = FALSE;

    808  4 000054   000004 236000 5                  LDQ     4
         4 000055   000030 356000 1                  ANSQ    ERRMSG_FPT+24

      129      809    2           END;

      130      810    1        ERR_CODE.SEV = 0;

    810  4 000056   000005 236000 5                  LDQ     5
         4 000057   000000 356000 xsym               ANSQ    ERR_CODE

PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:16   
      131      811    1        ERRMSG_FPT.V.SUBMESS# = TRUE;

    811  4 000060   001000 236003                    LDQ     512,DU
         4 000061   000030 256000 1                  ORSQ    ERRMSG_FPT+24

      132      812        /**/
      133      813    2        IF (ERR# = E$E_SYNTAX) THEN DO ;

    813  4 000062   000000 235100                    LDA     0,,PR0
         4 000063   000342 115007                    CMPA    226,DL
         4 000064   000103 601000 4                  TNZ     s:818

      134      814    2           I = SUB_BUF_1.COUNT ;

    814  4 000065   000000 236000 xsym               LDQ     SUB_BUF_1
         4 000066   000033 772000                    QRL     27
         4 000067   000040 756000 1                  STQ     I

      135      815    2           CALL CHARBIN(I, SUBSTR(SUB_BUF_1.TEXT,0,I)) ;

    815  4 000070   000000 620006                    EAX0    0,QL
         4 000071   000100 305440                    DTB
         4 000072   000000 230010 xsym               NDSC9   SUB_BUF_1                cn=1,s=nosgn,sf=0,n=*X0
         4 000073   200044 000010                    NDSC9   PRINT+1,,AUTO            cn=0,s=lsgnf,sf=0,n=8
         4 000074   200045 235100                    LDA     PRINT+2,,AUTO
         4 000075   000040 755000 1                  STA     I

      136      816    2           ERRMSG_FPT.V.POINTER# = I + 1 ;

    816  4 000076   000040 236000 1                  LDQ     I
         4 000077   000001 036007                    ADLQ    1,DL
         4 000100   000022 736000                    QLS     18
         4 000101   000030 552020 1                  STBQ    ERRMSG_FPT+24,'20'O

      137      817    2           END ;                           /* THEN DO */

    817  4 000102   000105 710000 4                  TRA     s:820
PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:17   

      138      818    1        ELSE ERRMSG_FPT.V.POINTER# = 0 ;

    818  4 000103   000000 236003                    LDQ     0,DU
         4 000104   000030 552020 1                  STBQ    ERRMSG_FPT+24,'20'O

      139      819        /**/
      140      820    1        ERRMSG_FPT.V.FLAGLEV# = FLAGLEV;

    820  4 000105   200004 471500                    LDP1    @FLAGLEV,,AUTO
         4 000106   100000 236100                    LDQ     0,,PR1
         4 000107   000011 736000                    QLS     9
         4 000110   000027 552010 1                  STBQ    ERRMSG_FPT+23,'10'O

      141      821        /**/
      142      822    1   CALL_ERRMSG:
      143      823    1        IF PRINT

    823  4 000111   200043 234100       CALL_ERRMSG  SZN     PRINT,,AUTO
         4 000112   000152 605000 4                  TPL     s:836

      144      824    1        THEN
      145      825    2        DO ;

      146      826    2           IF (B$TCB$ -> B$TCB.ALT$ ~= ADDR(NIL))AND

    826  4 000113   000000 470400 xsym               LDP0    B$TCB$
         4 000114   000000 236100                    LDQ     0,,PR0
         4 000115   000001 116000 xsym               CMPQ    B_VECTNIL+1
         4 000116   000126 600000 4                  TZE     s:829
         4 000117   000000 220000 xsym               LDX0    ERR_CODE
         4 000120   260505 100003                    CMPX0   90437,DU
         4 000121   000126 600000 4                  TZE     s:829

      147      827    2              (ERR_CODE.FCG_MID ~= '260505'O) THEN
      148      828    2              ERRMSG_FPT.V.DCB# = B$TCB$ -> B$TCB.ALT$ -> B$ALT.DCB#;

PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:18   
    828  4 000122   000000 471500                    LDP1    0,,PR0
         4 000123   100101 721100                    LXL1    65,,PR1
         4 000124   000026 741000 1                  STX1    ERRMSG_FPT+22
         4 000125   000141 710000 4                  TRA     s:833

      149      829    2           ELSE IF (ERR_CODE.ERR# ~= E$E_MRGDESTNOTKEY) AND

    829  4 000126   000000 236000 xsym               LDQ     ERR_CODE
         4 000127   377770 376007                    ANQ     131064,DL
         4 000130   003560 116007                    CMPQ    1904,DL
         4 000131   000137 600000 4                  TZE     s:832
         4 000132   004400 116007                    CMPQ    2304,DL
         4 000133   000137 600000 4                  TZE     s:832

      150      830    2                 (ERR_CODE.ERR# ~= E$FILECREATED)
      151      831    2              THEN ERRMSG_FPT.V.DCB# = M$FILE_NUM;

    831  4 000134   000000 720000 xsym               LXL0    M$FILE_NUM
         4 000135   000026 740000 1                  STX0    ERRMSG_FPT+22
         4 000136   000141 710000 4                  TRA     s:833

      152      832    2              ELSE ERRMSG_FPT.V.DCB# = M$FILE2_NUM;

    832  4 000137   000000 720000 xsym               LXL0    M$FILE2_NUM
         4 000140   000026 740000 1                  STX0    ERRMSG_FPT+22

      153      833    2           ERRMSG_FPT.BUF_ = VECTOR (ERR_BUF) ;

    833  4 000141   000006 235000 5                  LDA     6
         4 000142   200044 452500                    STP2    PRINT+1,,AUTO
         4 000143   200044 236100                    LDQ     PRINT+1,,AUTO
         4 000144   000005 036003                    ADLQ    5,DU
         4 000145   000004 757000 1                  STAQ    ERRMSG_FPT+4

      154      834    2           CALL M$ERRMSG(ERRMSG_FPT) ALTRET (ERROR_1);

    834  4 000146   000000 630400 1                  EPPR0   ERRMSG_FPT
PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:19   
         4 000147   420000 713400                    CLIMB   alt,+8192
         4 000150   405000 401760                    pmme    nvectors=11
         4 000151   000153 702000 4                  TSX2    ERROR_1

      155      835    2           END ;                           /* Then Do */

      156      836    1        RETURN;

    836  4 000152   000000 702200 xent               TSX2  ! X66_ARET

      157      837        /**/
      158      838    1   ERROR_1:
      159      839    1        ALTRETURN;

    839  4 000153   000000 702200 xent  ERROR_1      TSX2  ! X66_AALT

      160      840        /**/
      161      841    1   VEX$ERRNEXT: ENTRY ALTRET;

    841  4 000154   000000 700200 xent  VEX$ERRNEXT  TSX0  ! X66_AUTO_2
         4 000155   000046 000002                    ZERO    38,2

      162      842        /**/
      163      843    1        PRINT = '1'B ;

    843  4 000156   400000 236003                    LDQ     -131072,DU
         4 000157   200043 756100                    STQ     PRINT,,AUTO

      164      844    2        IF (FLAGS.HELP_MODE) THEN DO ;

    844  4 000160   000000 236000 xsym               LDQ     FLAGS
         4 000161   000002 316007                    CANQ    2,DL
         4 000162   000167 600000 4                  TZE     s:848

      165      845    2           CALL VEH$MORE_HELP ;

    845  4 000163   000002 631400 xsym               EPPR1   B_VECTNIL+2
PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:20   
         4 000164   000000 701000 xent               TSX1    VEH$MORE_HELP
         4 000165   000000 011000                    NOP     0

      166      846    2           RETURN ;

    846  4 000166   000000 702200 xent               TSX2  ! X66_ARET

      167      847    2           END ;                           /* THEN DO */
      168      848    1        IF (ERR_CODE.SEV < 7) THEN ERR_CODE.SEV = ERR_CODE.SEV + 1;

    848  4 000167   000000 236000 xsym               LDQ     ERR_CODE
         4 000170   000007 376007                    ANQ     7,DL
         4 000171   000007 116007                    CMPQ    7,DL
         4 000172   000200 603000 4                  TRC     s:849

    848  4 000173   000001 036007                    ADLQ    1,DL
         4 000174   000000 676000 xsym               ERQ     ERR_CODE
         4 000175   000007 376007                    ANQ     7,DL
         4 000176   000000 656000 xsym               ERSQ    ERR_CODE
         4 000177   000201 710000 4                  TRA     s:851

      169      849    1        ELSE ALTRETURN;

    849  4 000200   000000 702200 xent               TSX2  ! X66_AALT

      170      850        /**/
      171      851    1        ERRMSG_FPT.V.SUBMESS# = FALSE;

    851  4 000201   000007 236000 5                  LDQ     7
         4 000202   000030 356000 1                  ANSQ    ERRMSG_FPT+24

      172      852    1        ERRMSG_FPT.V.POINTER# = 0 ;

    852  4 000203   000000 236003                    LDQ     0,DU
         4 000204   000030 552020 1                  STBQ    ERRMSG_FPT+24,'20'O

      173      853    1        GOTO CALL_ERRMSG;
PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:21   

    853  4 000205   000111 710000 4                  TRA     CALL_ERRMSG

      174      854        /**/
      175      855    1   VEX$ERRMAX: ENTRY ALTRET;

    855  4 000206   000000 700200 xent  VEX$ERRMAX   TSX0  ! X66_AUTO_2
         4 000207   000046 000002                    ZERO    38,2

      176      856        /**/
      177      857    1        PRINT = '1'B ;

    857  4 000210   400000 236003                    LDQ     -131072,DU
         4 000211   200043 756100                    STQ     PRINT,,AUTO

      178      858    2        IF (FLAGS.HELP_MODE) THEN DO ;

    858  4 000212   000000 236000 xsym               LDQ     FLAGS
         4 000213   000002 316007                    CANQ    2,DL
         4 000214   000221 600000 4                  TZE     s:862

      179      859    2           CALL VEH$ALL_HELP ;

    859  4 000215   000002 631400 xsym               EPPR1   B_VECTNIL+2
         4 000216   000000 701000 xent               TSX1    VEH$ALL_HELP
         4 000217   000000 011000                    NOP     0

      180      860    2           RETURN ;

    860  4 000220   000000 702200 xent               TSX2  ! X66_ARET

      181      861    2           END ;                           /* THEN DO */
      182      862    1        ERR_CODE.SEV = 7;

    862  4 000221   000007 236007                    LDQ     7,DL
         4 000222   000000 256000 xsym               ORSQ    ERR_CODE

PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:22   
      183      863    1        ERRMSG_FPT.V.SUBMESS# = TRUE;

    863  4 000223   001000 236003                    LDQ     512,DU
         4 000224   000030 256000 1                  ORSQ    ERRMSG_FPT+24

      184      864    1        GOTO CALL_ERRMSG;

    864  4 000225   000111 710000 4                  TRA     CALL_ERRMSG
      185      865        /**/
      186      866    1   END;                                    /* END VEX$ERROR                      */

PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:23   
--  Include file information  --

   VE_FLAGS_R.:E05TOU  cannot be made into a system file and is referenced.
   NK_VFC_C.:E05TOU  is referenced.
   VE_PERR_C.:E05TOU  is referenced.
   VE_SUBS_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure VEX$ERROR.
PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:24   

 **** Variables and constants ****

  ****  Section 001  Data  VEX$ERROR

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(936)   r     1 ERRMSG_FPT                40-0-0/w UBIN        r     1 I
    34-0-0/d STRC(144)   r     1 RESULTS_BUF               32-0-0/c STRC(72)    r     1 VE_ERRMSGACCT

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @ERR#                      4-0-0/w PTR         r     1 @FLAGLEV
    *0-0-0/w UBIN        r     1 ERR#                       5-0-0/c CHAR(120)   r     1 ERR_BUF
    *0-0-0/w UBIN        r     1 FLAGLEV                   43-0-0/b BIT         r     1 PRINT

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$TCB$                     0-0-0/b STRC        r     1 ERR_CODE
     0-0-0/b STRC(72)    r     1 FLAGS                      0-0-0/w UBIN        r     1 HI_SEQNUM
     0-0-0/w UBIN        r     1 LAST_KEY                   0-0-0/w UBIN        r     1 M$FILE2_NUM
     0-0-0/w UBIN        r     1 M$FILE_NUM                 0-0-0/c STRC(288)   r     1 SUB_BUF_1
     0-0-0/c STRC(288)   r     1 SUB_BUF_2                  0-0-0/c STRC(288)   r     1 SUB_BUF_3

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2448)  r     1 B$ALT                      0-0-0/w STRC(144)   r     1 B$TCB
     0-0-0N  NULL        r     1 M$DO                       0-0-0N  NULL        r     1 M$ME
PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:25   


   Procedure VEX$ERROR requires 150 words for executable code.
   Procedure VEX$ERROR requires 38 words of local(AUTO) storage.

    No errors detected in file VEX$ERROR.:E05TSI    .
PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:26   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:27   
          MINI XREF LISTING

B$ALT.CODE
       118**DCL       118--REDEF     119--REDEF     119--REDEF
B$ALT.DCB#
       119**DCL       828>>ASSIGN
B$ALT.ERR
       119**DCL       801>>ASSIGN
B$ALT.ERR.ERR#
       120**DCL       120--REDEF
B$ALT.EVID
       119**DCL       119--REDEF     119--REDEF
B$TCB.ALT$
       114**DCL       801>>ASSIGN    826>>IF        828>>ASSIGN
B$TCB$
       725**DCL       801>>ASSIGN    826>>IF        828>>ASSIGN
BEGIN
       793**LABEL     787--GOTO
CALL_ERRMSG
       823**LABEL     853--GOTO      864--GOTO
ERR#
        25**DCL         8--PROC      789--ENTRY     794>>IF        794>>IF        800>>IF        807>>ASSIGN
       813>>IF
ERRMSG_FPT
       635**DCL       834<>CALL
ERRMSG_FPT.BUF_
       635**DCL       833<<ASSIGN
ERRMSG_FPT.V
       639**DCL       635--DCLINIT
ERRMSG_FPT.V.DCB#
       639**DCL       828<<ASSIGN    831<<ASSIGN    832<<ASSIGN
ERRMSG_FPT.V.FLAGLEV#
       641**DCL       820<<ASSIGN
ERRMSG_FPT.V.INCLCODE#
PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:28   
       644**DCL       802<<ASSIGN    808<<ASSIGN
ERRMSG_FPT.V.POINTER#
       645**DCL       816<<ASSIGN    818<<ASSIGN    852<<ASSIGN
ERRMSG_FPT.V.SUBMESS#
       645**DCL       811<<ASSIGN    851<<ASSIGN    863<<ASSIGN
ERROR_1
       839**LABEL     834--CALLALT
ERR_BUF
       671**DCL       833--ASSIGN
ERR_CODE
       705**DCL       635--DCLINIT   801<<ASSIGN
ERR_CODE.ERR#
       708**DCL       807<<ASSIGN    829>>IF        829>>IF
ERR_CODE.FCG_MID
       706**DCL       805<<ASSIGN    826>>IF
ERR_CODE.MON
       707**DCL       806<<ASSIGN
ERR_CODE.SEV
       709**DCL       810<<ASSIGN    848>>IF        848<<ASSIGN    848>>ASSIGN    862<<ASSIGN
FLAGLEV
        26**DCL         8--PROC      789--ENTRY     820>>ASSIGN
FLAGS.HELP_MODE
       769**DCL       793<<ASSIGN    844>>IF        858>>IF
HI_SEQNUM
       721**DCL       796<<ASSIGN
I
       695**DCL       814<<ASSIGN    815<<CALLBLT   815>>CALLBLT   816>>ASSIGN
LAST_KEY
       720**DCL       795<>CALL      796>>ASSIGN
M$ERRMSG
       104**DCL-ENT   834--CALL
M$FILE2_NUM
       724**DCL       832>>ASSIGN
M$FILE_NUM
       723**DCL       831>>ASSIGN
PRINT
PL6.E3A0      #001=VEX$ERROR File=VEX$ERROR.:E05TSI                              WED 07/30/97 07:11 Page:29   
       700**DCL       786<<ASSIGN    791<<ASSIGN    823>>IF        843<<ASSIGN    857<<ASSIGN
RESULTS_BUF
       684**DCL       639--DCLINIT
SUB_BUF_1
       710**DCL       637--DCLINIT   795<>CALL
SUB_BUF_1.COUNT
       711**DCL       814>>ASSIGN
SUB_BUF_1.TEXT
       712**DCL       815>>CALLBLT
SUB_BUF_2
       713**DCL       638--DCLINIT
SUB_BUF_2.COUNT
       714**DCL       797<<ASSIGN
SUB_BUF_3
       716**DCL       638--DCLINIT
SUB_BUF_3.COUNT
       717**DCL       798<<ASSIGN
VEH$ALL_HELP
       778**DCL-ENT   859--CALL
VEH$MORE_HELP
       777**DCL-ENT   845--CALL
VEX$SEQNUM_TEXT
       781**DCL-ENT   795--CALL
VE_ERRMSGACCT
       665**DCL       636--DCLINIT
