VERSION E05

 23:45 07/29/97  FILE=JSN$NSA.:E05TSI                                                                    1    BMAP - B00     
                                         1  *M*   JSN$NSA    GMAP routines required by execution control      *
                                         2  *T***********************************************************
                                         3  *T*                                                         *
                                         4  *T* Copyright (c) Bull HN Information Systems Inc., 1997    *
                                         5  *T*                                                         *
                                         6  *T***********************************************************
                                         7         ENTDEF  JSN$NSA
                                         8         ENTDEF  JSN$1SSSF
                                         9         ENTDEF  JSN$GETSSR
                                        10         ENTDEF  JSN$SETSSR
                                        11         ENTDEF  JSN$GETASR
                                        12         ENTDEF  JSN$SETASR
                                        13         ENTDEF  JSN$LTRAS
                                        14         ENTDEF  JSN$FIXSS
                                        15         ENTDEF  JSN$FIXSSM
                                        16  *
                                        17         SYMREF  J_SAVSSR
                                        18         SYMREF  H_RPM_FLG
                                        19         SYMREF  J_INITSSR
                                        20         SYMREF  B_MPT
                                        21         SYMREF  B$TSTACK$
                                        22         SYMREF  B$MONTSTACK$
                                        23         SYMREF  B$JIT$
                                        24         SYMREF  B$NULL$
                                        25         SYMREF  J_ASR_E
                                        26         SYMREF  SC_JSNSSF
                                        27         SEGREF  SDS0SID
                                        28         SEGREF  SDS1SID
                                        29         SEGREF  USERISSID
                                        30  *
                                        31         ENTREF  UDN$BLDASR
                                        32         ENTREF  UDN$BLDASRS
                                        33         ENTREF  X66_AUTO_3
                                        34         ENTREF  X66_AUTO_1
                                        35         ENTREF  IRM$SCREECH
                                        36  *
                                        37         LODM    B_BMACROS_C
 23:45 07/29/97  FILE=JSN$NSA.:E05TSI                                                                    2    BMAP - B00     
                                        38         PMC     ON
                                        39         BJIT0
             000000000000                   J.BJIT0 EQU 0
             000000000000                   J.MODE EQU J.BJIT0
             000000000000                   J.USER EQU J.MODE
             000000000000                   J.SYSID EQU J.MODE
             000000000001                   J.ACCN EQU J.MODE+1
             000000000003                   J.UNAME EQU J.ACCN+2
             000000000006                   J.FACCN EQU J.UNAME+3
             000000000010                   J.WOO EQU J.FACCN+2
             000000000012                   J.ERR EQU J.WOO+2
             000000000013                   J.PRIV EQU J.ERR+1
             000000000013                   J.ACTIVE EQU J.PRIV
             000000000014                   J.AUTH EQU J.PRIV+1
             000000000015                   J.JOB EQU J.PRIV+2
             000000000016                   J.PRC EQU J.PRIV+3
             000000000017                   J.SAVED EQU J.PRIV+4
             000000000020                   J.PPRIV EQU J.PRIV+5
             000000000021                   J.FPSN EQU J.PPRIV+1
             000000000022                   J.OUTPRIO EQU J.FPSN+1
             000000000022                   J.DCBNO EQU J.OUTPRIO
             000000000023                   J.JOBNAME EQU J.FPSN+2
                                        40         JJIT5
             000000000314                   J.JJIT5 EQU 204
             000000000314                   J.RNST EQU J.JJIT5
             000000000314                   J.FRS EQU J.RNST
             000000000314                   J.RUNFLAGS EQU J.RNST
             000000000314                   J.LNKCNT EQU J.RNST
             000000000315                   J.JUNK EQU J.RNST+1
             000000000315                   J.STEPS EQU J.JUNK
             000000000316                   J.XCONF EQU J.JUNK+1
             000000000316                   J.STEPCC EQU J.XCONF
             000000000316                   J.XLIMFLG EQU J.XCONF
             000000000316                   J.SVLDTF EQU J.XCONF
             000000000317                   J.YCERR EQU J.XCONF+1
                                        41         MAGIC
             000000000000                   MPT.SS EQU 0             SS$
 23:45 07/29/97  FILE=JSN$NSA.:E05TSI                                                                    3    BMAP - B00     
             000000000001                   MPT.LS EQU MPT.SS+1      LS$
             000000000002                   MPT.AS EQU MPT.LS+1      AS$
             000000000003                   MPT.PS EQU MPT.AS+1      PS$
             000000000004                   MPT.TCB EQU MPT.PS+1      TCB$
             000000000005                   MPT.ECCB EQU MPT.TCB+1     ECCB$
             000000000006                   MPT.SSDESC EQU MPT.ECCB+1    SSDESC$
             000000000007                   MPT.LSDESC EQU MPT.SSDESC+1  LSDESC$
             000000000010                   MPT.ASDESC EQU MPT.LSDESC+1  ASDESC$
             000000000011                   MPT.PSDESC EQU MPT.ASDESC+1  PSDESC$
             000000000012                   MPT.TCBDESC EQU MPT.PSDESC+1  TCBDESC$
             000000000013                   MPT.ECCBDESC EQU MPT.TCBDESC+1 ECCBDESC$
             000000000006                   MAGIC.ND EQU 6             NUMBER OF MAGIC DESCRIPTORS
                                        42         MONLS
             000000000000                   LS.IS EQU 0             MONITOR INSTRUCTION SEGMENT
             000000000001                   LS.JITU EQU LS.IS+1       USER JIT
             000000000002                   LS.BUF EQU LS.JITU+1     USER FILE MANAGEMENT BUFFERS
             000000000003                   LS.ROSEG EQU LS.BUF+1      USER READ ONLY SEGMENT
             000000000004                   LS.DS1 EQU LS.ROSEG+1    MONITOR DATA SEGMENT 1
             000000000004                   LS.CFU EQU LS.DS1        MON DS1 -- CFUS
             000000000005                   LS.DS2 EQU LS.DS1+1      MONITOR DATA SEGMENT 2
             000000000006                   LS.DS3 EQU LS.DS2+1      MONITOR DATA SEGMENT 3
             000000000007                   LS.DS4 EQU LS.DS3+1      MONITOR DATA SEGMENT 4
             000000000010                   LS.DS5 EQU LS.DS4+1      MONITOR DATA SEGMENT 5
             000000000011                   LS.DS6 EQU LS.DS5+1      MONITOR DATA SEGMENT 6
             000000000012                   LS.DS7 EQU LS.DS6+1      MONITOR DATA SEGMENT 7
             000000000013                   LS.DS8 EQU LS.DS7+1      MONITOR DATA SEGMENT 8
             000000000013                   LS.LDCT EQU LS.DS8        MON DS8 -- LDCTS
             000000000014                   LS.NULL EQU LS.DS8+1      NULL DESCRIPTOR
             000000000015                   LS.XLAT EQU LS.NULL+1     XLATE/SEARCH TABLES
             000000000016                   LS.ECCB EQU LS.XLAT+1     ECCB
             000000000017                   LS.TCB EQU LS.ECCB+1     TCB
             000000000020                   LS.TSTACK EQU LS.TCB+1      TSTACK
             000000000021                   LS.REAL EQU LS.TSTACK+1   REAL PG 0-3
             000000000022                   LS.USSS EQU LS.REAL+1     USER SS AREA
             000000000023                   LS.USDS0 EQU LS.USSS+1     USER SDS TYPE 0
             000000000024                   LS.USDS1 EQU LS.USDS0+1    USER SDS TYPE 1
             000000000025                   LS.SCR EQU LS.USDS1+1    SCREECH ENTRY
 23:45 07/29/97  FILE=JSN$NSA.:E05TSI                                                                    4    BMAP - B00     
             000000000026                   LS.XD EQU LS.SCR+1      XDELTA ENTRY DESCRIPTOR
             000000000027                   LS.PMME EQU LS.XD+1       PMME ENTRY DESCRIPTOR
             000000000030                   LS.REG EQU LS.PMME+1     SCHED REG ENTRY DESCRIPTOR
             000000000031                   LS.ULS EQU LS.REG+1      USER LINKAGE SEGMENT
             000000000032                   LS.DBLS EQU LS.ULS+1      DEBUGGER LINKAGE SEGMENT
             000000000033                   LS.ASLLS EQU LS.DBLS+1     ASL LINKAGE SEGMENT
             000000000034                   LS.CPLS EQU LS.ASLLS+1    COMMAND PROCESSOR LINKAGE SEGMENT
             000000000035                   LS.MLS EQU LS.CPLS+1     MONITOR LINKAGE SEGMENT
             000000000036                   LS.UPT EQU LS.MLS+1      USER PAGE TABLE
             000000000037                   LS.MPT EQU LS.UPT+1      MONITOR PAGE TABLE
             000000000040                   LS.USRIS EQU LS.MPT+1      USER INSTRUCTION SEGMENT
             000000000041                   LS.MTSTACK EQU LS.USRIS+1    TSTACKU
             000000000042                   LS.MJIT EQU LS.MTSTACK+1  MONITOR JIT
             000000000043                   LS.MHJIT EQU LS.MJIT+1     MONITOR HJIT
             000000000044                   LS.MONSSS EQU LS.MHJIT+1    MONITOR SSS -- TYPE 0
             000000000045                   LS.HJITU EQU LS.MONSSS+1   USER HJIT
             000000000046                   LS.SBUF1 EQU LS.HJITU+1    SPECIAL BUFFER 1
             000000000047                   LS.SBUF2 EQU LS.SBUF1+1    SPECIAL BUFFER 2
             000000000050                   LS.ISB EQU LS.SBUF2+1    MON ISR -- BYPASS CACHE
             000000000051                   LS.SCU EQU LS.ISB+1      SPECIAL PAGES FOR GETTING SCU ADDR
             000000000052                   LS.WINDOW EQU LS.SCU+1      WINDOW AREA
             000000000053                   LS.ASR EQU LS.WINDOW+1   MONITOR ARGUMENT STACK DESC
             000000000054                   LS.MISC EQU LS.ASR+1      MISCELLANEOUS (can be used @ int level)
             000000000055                   LS.CWSQ1 EQU LS.MISC+1     COMMUNICATIONS WSQ
             000000000075                   LS.CPGT1 EQU LS.CWSQ1+16   CWSQ PG TABLE
             000000000115                   LS.JITPG EQU LS.CPGT1+16
             000000000116                   LS.PPUT EQU LS.JITPG+1
             000000000117                   LS.VPT EQU LS.PPUT+1
             000000000120                   LS.MOUSE EQU LS.VPT+1
             000000000121                   LS.LOWMEM EQU LS.MOUSE+1
             000000000122                   LS.IOEND EQU LS.LOWMEM+1
             000000000123                   LS.TIGR EQU LS.IOEND+1    TIGR DATA
             000000000124                   LS.RONC EQU LS.TIGR+1     READ ONLY SEG -- BYPASS CACHE
             000000000125                   LS.ROSEG8 EQU LS.RONC+1     READ ONLY SEG -- AT IO END ACT (WSQ8)
             000000000126                   LS.XDRTN EQU LS.ROSEG8+1   XDELTA RETURN ENTRY DESCRIPTOR
             000000000127                   LS.RCVRTN EQU LS.XDRTN+1    SUA OR SNAP RETURN ENTRY DESCRIPTOR
             000000000130                   LS.MISC2 EQU LS.RCVRTN+1   MISCELLANEOUS (used on behalf of user only)
 23:45 07/29/97  FILE=JSN$NSA.:E05TSI                                                                    5    BMAP - B00     
             000000000131                   LS.RCVENT EQU LS.MISC2+1    RECOVERY ENTRY DESCRIPTOR
             000000000132                   LS.MLS1 EQU LS.RCVENT+1   MON LS -- TYPE 1 FOR ANLZ
             000000000133                   LS.WS3MLS EQU LS.MLS1+1
             000000000134                   LS.LDCTNC EQU LS.WS3MLS+1
             000000000135                   LS.MSTRPT EQU LS.LDCTNC+1
             000000000136                   LS.SLV1PT EQU LS.MSTRPT+1
             000000000137                   LS.SLV2PT EQU LS.SLV1PT+1
             000000000140                   LS.SLV3PT EQU LS.SLV2PT+1
             000000000141                   LS.SLV4PT EQU LS.SLV3PT+1
             000000000142                   LS.SLV5PT EQU LS.SLV4PT+1
             000000000143                   LS.SLV6PT EQU LS.SLV5PT+1
             000000000144                   LS.SLV7PT EQU LS.SLV6PT+1
             000000000145                   LS.MSTRHJ EQU LS.SLV7PT+1
             000000000146                   LS.SLV1HJ EQU LS.MSTRHJ+1
             000000000147                   LS.SLV2HJ EQU LS.SLV1HJ+1
             000000000150                   LS.SLV3HJ EQU LS.SLV2HJ+1
             000000000151                   LS.SLV4HJ EQU LS.SLV3HJ+1
             000000000152                   LS.SLV5HJ EQU LS.SLV4HJ+1
             000000000153                   LS.SLV6HJ EQU LS.SLV5HJ+1
             000000000154                   LS.SLV7HJ EQU LS.SLV6HJ+1
             000000000155                   LS.AARDV EQU LS.SLV7HJ+1
             000000000155                   LS.FLT EQU LS.AARDV      AARDVARK FAULT ENTRY DESCR
             000000000156                   LS.AARDV2 EQU LS.AARDV+1
             000000000156                   LS.MONRL EQU LS.AARDV2     REAL MON ISR FOR MINIQ
             000000000157                   LS.FIRM EQU LS.AARDV2+1
             000000000160                   LS.WS3MLSNW EQU LS.FIRM+1
             000000000161                   LS.BUFCACH EQU LS.WS3MLSNW+1
             000000000162                   LS.IMX EQU LS.BUFCACH+1  IMX DATA
             000000000163                   LS.CGPT EQU LS.IMX+1      CG PAGE TABLE
             000000000164                   LS.CGCTXT EQU LS.CGPT+1     CG CONTEXT & DESCRIPTOR SEG BLKS
             000000000165                   LS.MAGSS EQU LS.CGCTXT+1   MAGIC SS FRAME
             000000000166                   LS.MAGLS EQU LS.MAGSS+1    MAGIC LS
             000000000167                   LS.MAGAS EQU LS.MAGLS+1    MAGIC AS
             000000000170                   LS.MAGPS EQU LS.MAGAS+1    MAGIC PS
             000000000171                   LS.MAGTCB EQU LS.MAGPS+1    MAGIC TCB
             000000000172                   LS.MAGECCB EQU LS.MAGTCB+1   MAGIC ECCB
             000000000173                   LS.MLSREAD EQU LS.MAGECCB+1  MLS - READ ONLY
 23:45 07/29/97  FILE=JSN$NSA.:E05TSI                                                                    6    BMAP - B00     
             000000000174                   LS.SEGTBL EQU LS.MLSREAD+1    MON OVERLAY SEGMENT TABLE
             000000000175                   LS.WSQ0PT EQU LS.SEGTBL+1     WSQ #0 Page Table.  DPS-90 only
             000000000176                   LS.IPHY_MAP EQU LS.WSQ0PT+1   Inverse physical map for DPS-90
             000000000177                   LS.MINIQ_ENT EQU LS.IPHY_MAP+1 Entry for MINIQ's climb to itself
             000000000200                   LS.XLNORM EQU LS.MINIQ_ENT+1 Normal XLATE tables (Note space reserved for X1000)
             000000000201                   LS.XLALT EQU LS.XLNORM+1   Alternate XLATE tables
             000000000202                   LS.DVT EQU LS.XLALT+1    DVT TABLE
                                        43  *
             000000001762               44  ISR    BOOL    1762
             000000001761               45  TYPE   BOOL    1761            CHANGE DESCRIPTOR TYPE
                                        46  *
             000000000001               47  AUTOLOC EQU    1
                                        48  *
             000000000001               49  ARG1   EQU     1
             000000000002               50  AUTO   EQU     2
                                        51  *
                                        52  *

 23:45 07/29/97  FILE=JSN$NSA.:E05TSI                                                                    7    BMAP - B00     
                                        53         EJECT
 0 000000                               54  JSN$NSA NULL
                                        55  *F*    NAME:   JSN$1SSSF.
                                        56  *F*    PURPOSE: To reload the user's SSR with only one frame.
                                        57  *              CALLED BY: JSD$DEL
                                        58  *                         JSR$RUND
                                        59  *
                                        60  *
   000000                               61  JSN$1SSSF  NULL
                                        62         INHIB   ON
   000000  X 000000 7736 00             63         LDSS    J_INITSSR     LOAD SSR FOR 1 SMALL + 1 LARGE FRAME
   000001    000001 7102 11             64         TRA     1,1
                                        65  *
                                        66  *
                                        67  *
                                        68  *

 23:45 07/29/97  FILE=JSN$NSA.:E05TSI                                                                    8    BMAP - B00     
                                        69         EJECT
   000002                               70  JSN$GETSSR     NULL
                                        71  *F*    NAME:   JSN$GETSSR
                                        72  *F*    PURPOSE: To return the current contents of SSR.
                                        73  *              CALLED BY: JLLS$IMAGES
   000002    0 00000 4717 00            74         LDP1    0,,0
   000003    1 00000 7537 00            75         STSS    0,,ARG1       PASS BACK SSR TO CALLER
   000004    000001 7102 11             76         TRA     1,1
                                        77  *
                                        78  *

 23:45 07/29/97  FILE=JSN$NSA.:E05TSI                                                                    9    BMAP - B00     
                                        79         EJECT
   000005                               80  JSN$SETSSR     NULL
                                        81  *F*    NAME:   JSN$SETSSR
                                        82  *F*    PURPOSE: To reload SSR from a specified location.
                                        83  *              CALLED BY: JLS$IMAGES
   000005    0 00000 4717 00            84         LDP1    0,,0
   000006    1 00000 7737 00            85         LDSS    0,,ARG1  LOAD SAFE STORE REGISTER
   000007    000001 7102 11             86         TRA     1,1
                                        87  *
                                        88  *

 23:45 07/29/97  FILE=JSN$NSA.:E05TSI                                                                    10   BMAP - B00     
                                        89         EJECT
   000010                               90  JSN$GETASR     NULL
                                        91  *F*    NAME:   JSN$GETASR
                                        92  *F*    PURPOSE: To return the current contents of ASR.
                                        93  *              CALLED BY: JLS$IMAGES
   000010    0 00000 4717 00            94         LDP1    0,,0
   000011    1 00000 7507 00            95         STAS    0,,ARG1  PASS ASR BACK TO CALLER
   000012  X 000000 2342 00             96         SZN     H_RPM_FLG IS THIS A DPS 8000
   000013    000001 6002 11             97         TZE     1,1      NO JUST RETURN
   000014    1 00000 2363 00            98         LDQ     0,,1     GET THE LENGTH AND FLAGS
   000015 (1)000000 7362 00             99         QLS     =O24      ISOLATE THE FLAGS
   000016    777000 3762 03            100         ANQ     =O777000,DU
   000017    002000 3762 03            101         ANQ     =O002000,DU IS THE SEGMENT EMPTY
   000020    000001 6002 11            102         TZE     1,1      JUST RETURN
   000021    1 00000 2363 00           103         LDQ     0,,1     GET THE LENGTH AND FLAGS
   000022 (1)000001 7722 00            104         QRL     =O20      ISOLATE THE LENGTH
   000023    1 00001 0363 00           105         ADLQ    1,,1     ADD THE LENGTH TO THE BASE
   000024    1 00001 7563 00           106         STQ     1,,1     NEW BASE
   000025    170361 2362 07            107         LDQ     =O170361,DL 0 BOUND, EMPTY DESCRIPTOR
   000026    1 00000 7563 00           108         STQ     0,,1
   000027    000001 7102 11            109         TRA     1,1
                                       110  *
                                       111  *

 23:45 07/29/97  FILE=JSN$NSA.:E05TSI                                                                    11   BMAP - B00     
                                       112         EJECT
   000030                              113  JSN$SETASR     NULL
                                       114  *F*    NAME:   JSN$SETASR
                                       115  *F*    PURPOSE: To reload ASR from a specified location.
                                       116  *              CALLED BY: JLS$IMAGES
                                       117  *                         JSR$RUND
                                       118  *                         JSS$FIXASR
   000030    0 00000 4717 00           119         LDP1    0,,0
   000031    1 00000 7707 00           120         LDAS    0,,ARG1  LOAD ARGUMENT STACK REGISTER
   000032    1 00000 7717 00           121         LDPS    0,,ARG1  LOAD PARAMETER STACK REGISTER
   000033    000001 7102 11            122         TRA     1,1
                                       123  *

 23:45 07/29/97  FILE=JSN$NSA.:E05TSI                                                                    12   BMAP - B00     
                                       124         EJECT
                                       125  *F*    NAME:   JSN$FIXSSM
                                       126  *F*    PURPOSE:  Entry point to JSN$FIXSS for PL6 routines that
                                       127  *F*              initialized the Magic Segment
                                       128  *              CALLED BY: JSE$EXITS
                                       129  *                         JST$STEP
                                       130  *                         SSU$DELTAGO
             000000000006              131  SS     EQU     6
             000000000005              132  USS    EQU     5
                                       133  *
   000034                              134  JSN$FIXSSM NULL
                                       135         INHIB   ON
   000034  X 000000 4766 00            136         LDP     SS,B_MPT+MPT.SS
                                       137  *
                                       138  *
                                       139  *F*    NAME:     JSN$FIXSS
                                       140  *F*    PURPOSE:   To back of the Safe-Store Stack when the user has blown it
                                       141  *              CALLED BY: HFA$FAULT
                                       142  *                         NIS$DRIVER
                                       143  *                         UDA$SSPATCH
                                       144  *
                                       145  *           ENTERED PRIVY ON WITH PR6->TOP STACK FRAME
                                       146  *
                                       147  *
                                       148  *
   000035                              149  JSN$FIXSS NULL
                                       150         INHIB   ON
   000035    6 00010 7223 00           151         LXL2    8,,SS            GET ISR WSR
   000036    000160 3622 03            152         ANX2    =O160,DU
   000037    000160 1022 03            153         CMPX2   =O160,DU        IS IT THE USER
   000040 (0)000043 6002 00            154         TZE     FIXSS.USR       YES
   000041  X 000000 6202 00            155         EAX0    SC_JSNSSF       NO-SUA
   000042  X 000000 7102 00            156         TRA     IRM$SCREECH
                                       157  *S*    SCREECH_CODE:   JSN-S$SSLIMIT
                                       158  *S*    MESSAGE:   JSN$FIXSS-Top frame is not the user's
   000043                              159  FIXSS.USR NULL
   000043    6 00005 2273 00           160         LDX7    5,,SS           GET FAULT CODE
 23:45 07/29/97  FILE=JSN$NSA.:E05TSI                                                                    13   BMAP - B00     
   000044    777577 3672 03            161         ANX7    =O777577,DU     RESET SSF
   000045    6 00005 7473 00           162         STX7    5,,SS           SO WE DONT MOVE IT TOO
   000046 (0)000067 4756 00            163         LDP     USS,USRSS$      GET DESCRIPTOR OF USR SSS+16
   000047    777701 2262 03            164         LDX6    -63,DU
   000050    6 00077 2353 16           165  FIXSS.LP LDA   63,6,SS         MOVE TOP OF STACK FRAME
   000051    5 00077 7553 16           166         STA     63,6,USS          TO FIRST REAL FRAME
   000052    000001 0662 03            167         ADX6    1,DU
   000053 (0)000050 6046 00            168         TMOZ    FIXSS.LP
   000054  X 000000 7736 00            169         LDSS    J_INITSSR       RESET SSR AND SSF
   000055  X 000000 4756 00            170         LDP5    B$JIT$
   000056 (0)000070 2352 00            171         LDA     ESSF
   000057    5 00012 7553 00           172         STA     J.ERR,,5
   000060    5 00314 2263 00           173         LDX6    J.RNST,,5
   000061    100000 2662 03            174         ORX6    =O100000,DU     SET LIMIT EXCEED BIT
   000062    5 00314 7463 00           175         STX6    J.RNST,,5
   000063    5 00316 7263 00           176         LXL6    J.XLIMFLG,,5
   000064    002000 2662 03            177         ORX6    =O2000,DU       SET XLIMFLG
   000065    5 00316 4463 00           178         SXL6    J.XLIMFLG,,5
   000066    000001 7102 11            179         TRA     1,1
                                       180         INHIB   OFF
                                       181  *
   000067    000020 006 022            182  USRSS$ VFD     18/16,9/6,9/LS.USSS
   000070    12 23 16 1 01013 6        183  ESSF   VFD     A6/J,A6/S,A6/N,1/1,14/523,3/6
                                       184  *
                                       185  *E*     ERROR:       -E$SSF-A
                                       186  *E*     MESSAGE: You blew the Safe-Store Stack.
                                       187  *
                                       188  *E*     ERROR:    JSN-E$SSF-A
                                       189  *E*     MESSAGE: You blew the Safe-Store Stack.

 23:45 07/29/97  FILE=JSN$NSA.:E05TSI                                                                    14   BMAP - B00     
                                       190        EJECT
                                       191  *
                                       192  *F*    NAME:   JSN$LTRAS
                                       193  *F*    PURPOSE: To enter the Command Processor for M$YC
                                       194  *              CALLED BY: JST$STEP
   000071                              195  JSN$LTRAS NULL
   000071  X 000000 7000 00            196         TSX0    X66_AUTO_1
   000072    000006 000001             197         ZERO    6,1
   000073  X 000000 2340 00            198  LTRAS  SZN     H_RPM_FLG
   000074 (0)000100 6050 00            199         TPL     REGASR
   000075  X 000000 7010 00            200         TSX1    UDN$BLDASRS
   000076    000000 0110 00            201         NOP     0
   000077 (0)000102 7100 00            202         TRA     DOCLIMB
   000100                              203  REGASR NULL
   000100  X 000000 7010 00            204         TSX1    UDN$BLDASR
   000101    000000 0110 00            205         NOP     0
   000102                              206  DOCLIMB NULL
   000102    000000 0110 00            207         NOP     0
   000103    2 00003 4715 00           208         LDP1    3,,2
   000104    1 00000 6775 00           209         LDD7    0,,ARG1
   000105    777773 2210 03            210         LDX1    -5,DU
   000106  X 000000 4724 00            211         LDP2    B$TSTACK$
   000107    2 00000 4411 00           212         SXL1    0,,AUTO
   000110  X 000000 4724 00            213         LDP2    B$MONTSTACK$
   000111    2 00000 4411 00           214         SXL1    0,,AUTO
   000112    000000 7134 00            215         PASS    1023                CLIMB THRU DR7
   000113    0 000 000 22 1777

 23:45 07/29/97  FILE=JSN$NSA.:E05TSI                                                                    15   BMAP - B00     
                                       216         EJECT
                                       217  *
                                       218  *F*    NAME:   JSN$DELTRAS
                                       219  *F*
                                       220  *F*    PURPOSE:  To enter DELTA for M$ALIB
                                       221  *F*
                                       222  *              CALLED BY: SSU$DELTAGO
                                       223         ENTDEF  JSN$DELTRAS
   000114                              224  JSN$DELTRAS NULL
   000114  X 000000 7000 00            225         TSX0    X66_AUTO_3
   000115    000006 000003             226         ZERO    6,3
   000116    2 00004 4745 00           227         LDP4    4,,2
   000117    4 00000 4755 00           228         LDP5    0,,4                GET SS DSCR
   000120    2 00005 4735 00           229         LDP3    5,,2
   000121    3 00000 0555 00           230         STD5    0,,3                PUT IT IN DELTA'S LSEG
   000122    000001 2350 07            231         LDA     1,DL
   000123    3 00000 2551 00           232         ORSA    0,,3                CONVERT IT TO TYPE 1
   000124 (0)000073 7100 00            233         TRA     LTRAS
                                       234  *

 23:45 07/29/97  FILE=JSN$NSA.:E05TSI                                                                    16   BMAP - B00     
                                       235         EJECT
                                       236  *      THESE ROUTINES FLUSH THE USERS TSTACK
                                       237  *      BEFORE GOING TO THE REAL ROUTINE IN JSE$EXITS.
                                       238  *
                                       239         ENTDEF  JSE$ABORTM
                                       240         ENTDEF  JSE$ABORTX
                                       241         ENTDEF  JSE$ABORTY
                                       242         ENTDEF  JSE$ACP
                                       243  *
                                       244         ENTREF  JSE$ABORTM1
                                       245         ENTREF  JSE$ABORTX1
                                       246         ENTREF  JSE$ABORTY1
                                       247         ENTREF  JSE$ACP1
                                       248  *
             000000001764              249  SSR    BOOL    1764
                                       250         INHIB   ON
   000125                              251  JSE$ABORTM NULL
   000125  X 000000 6272 00            252         EAX7    JSE$ABORTM1
   000126 (0)000134 7102 00            253         TRA     FLUSH
                                       254  *
   000127                              255  JSE$ABORTX NULL
   000127  X 000000 6272 00            256         EAX7    JSE$ABORTX1
   000130 (0)000134 7102 00            257         TRA     FLUSH
                                       258  *
   000131                              259  JSE$ABORTY NULL
   000131  X 000000 6272 00            260         EAX7    JSE$ABORTY1
   000132 (0)000134 7102 00            261         TRA     FLUSH
                                       262  *
   000133                              263  JSE$ACP  NULL
   000133  X 000000 6272 00            264         EAX7    JSE$ACP1
                                       265  *
   000134                              266  FLUSH  NULL
   000134    001764 4766 07            267         LDP     SS,SSR,DL       LOAD SAFE STORE DESCRIPTOR
   000135    001761 4766 07            268         LDP     SS,TYPE,DL      CHANGE IT TO TYPE ZERO
   000136    777773 2242 03            269         LDX4    -5,DU           INITIAL AUTO OFFSET
   000137    6 00001 4443 00           270         SXL4    AUTOLOC,,6       TO SAFE-STORE FOR UDB$AUTO
   000140    2 00001 5276 14           271         SWDX    1,4,AUTO
 23:45 07/29/97  FILE=JSN$NSA.:E05TSI                                                                    17   BMAP - B00     
   000141    2 00001 4443 14           272         SXL4    1,4,AUTO
   000142    000000 7102 17            273         TRA     0,7             GOTO PROPER ROUTINE
                                       274         INHIB   OFF

 23:45 07/29/97  FILE=JSN$NSA.:E05TSI                                                                    18   BMAP - B00     
                                       275           EJECT
                                       276           ENTDEF    JSN$BLNK,JSN$BLNK1,JSN$BLNK2
                                       277  *        Fill a bunch of memory with -
                                       278  *        area specified by vector passed.
   000143                              279  JSN$BLNK NULL
   000143    0 00000 4715 00           280           LDP1      0,,0
   000144    1 00001 4735 00           281           LDP3      1,,1                BUF PTR
   000145    1 00000 2361 00           282           LDQ       0,,1                SIZE
   000146    000020 7320 00            283           QRS       16
   000147    000001 0360 07            284           ADLQ      1,DL
   000150    055 0 140 1004 00         285           MLR       0,(1,1),55
   000151    000000 0 0 0 0000         286           ADSC9     0,0,0
   000152    3 00000 0 0 0 0006        287           ADSC9     0,0,QL,3
   000153    000001 7100 11            288           TRA       1,1
                                       289  *
                                       290  *        Like above, passed descriptor, start page, n pages.
   000154                              291  JSN$BLNK1 NULL
   000154    0 00000 4715 00           292           LDP1      0,,0                Get the descriptor and put
   000155    1 00000 2371 00           293           LDAQ      0,,1
   000156  X 000000 4734 07            294           LDP3      SDS0SID,DL
   000157    777777 2750 03            295           ORA       -1,DU
   000160    040000 2750 07            296           ORA       16384,DL            Make writeable
   000161    3 00000 7571 00           297           STAQ      0,,3                it where we can load it.
   000162    007777 3760 07            298           ANQ       4095,DL
   000163    0 00000 7561 00           299           STQ       0,,0
   000164  X 000000 4734 07            300           LDP3      SDS1SID,DL
   000165    3 00000 6735 00           301           LDD3      0,,3
   000166    0 00001 4715 00           302           LDP1      1,,0                page in seg
   000167    1 00000 2351 00           303           LDA       0,,1
   000170    0 00002 4715 00           304           LDP1      2,,0                num pages
   000171    1 00000 2361 00           305           LDQ       0,,1
   000172    000001 6000 11            306           TZE       1,1
   000173    000014 7370 00            307           LLS       12                  make them bytes
   000174    0 00000 1761 00           308           SBQ       0,,0
   000175                              309  BLNK     NULL
   000175    055 0 145 1004 00         310           MLR       0,(1,1,,A),55
   000176    000000 0 0 0 0000         311           ADSC9     0,0,0
 23:45 07/29/97  FILE=JSN$NSA.:E05TSI                                                                    19   BMAP - B00     
   000177    3 00000 0 0 0 0006        312           ADSC9     0,0,QL,3
   000200    000001 7100 11            313           TRA       1,1
                                       314  *
                                       315  *        Like above except in IS, passed only page #, n pages
   000201                              316  JSN$BLNK2 NULL
   000201    0 00000 4715 00           317           LDP1      0,,0
   000202    1 00000 2351 00           318           LDA       0,,1
   000203    0 00001 4715 00           319           LDP1      1,,0
   000204    1 00000 2361 00           320           LDQ       0,,1
   000205  X 000000 4734 07            321           LDP3      USERISSID,DL
   000206    000014 7370 00            322           LLS       12                  make them bytes
   000207 (0)000175 7100 00            323           TRA       BLNK
                                       324         END
 1 000000    000000000024
   000001    000000000020

  CONTROL SECTION TABLE

   0 CODE   EVEN  000210
   1 RODATA EVEN  000002 LITERALS

 23:45 07/29/97  FILE=JSN$NSA.:E05TSI         SYMBOL TABLE                                               20   BMAP - B00     
 41000000 000000000001 ARG1           *49        75        85        95       120       121       209
 41000000 000000000002 AUTO           *50       212       214       271       272
 41000000 000000000001 AUTOLOC        *47       270
 03301006 000000000000 B$JIT$         *23       170
 03301005 000000000000 B$MONTSTACK$   *22       213
 02301007 000000000000 B$NULL$        *24
 03301004 000000000000 B$TSTACK$      *21       211
 01101000 000000000175 BLNK          *309       323
 03301003 000000000000 B_MPT          *20       136
 01101000 000000000102 DOCLIMB        202      *206
 01101000 000000000070 ESSF           171      *183
 01101000 000000000050 FIXSS.LP      *165       168
 01101000 000000000043 FIXSS.USR      154      *159
 01101000 000000000134 FLUSH          253       257       261      *266
 03301001 000000000000 H_RPM_FLG      *18        96       198
 03201004 000000000000 IRM$SCREECH    *35       156
 40000000 000000001762 ISR            *44
 41000000 000000000001 J.ACCN         *39
 40000000 000000000013 J.ACTIVE       *39
 40000000 000000000014 J.AUTH         *39
 41000000 000000000000 J.BJIT0        *39
 40000000 000000000022 J.DCBNO        *39
 41000000 000000000012 J.ERR          *39       172
 41000000 000000000006 J.FACCN        *39
 41000000 000000000021 J.FPSN         *39
 40000000 000000000314 J.FRS          *40
 41000000 000000000314 J.JJIT5        *40
 40000000 000000000015 J.JOB          *39
 40000000 000000000023 J.JOBNAME      *39
 41000000 000000000315 J.JUNK         *40
 40000000 000000000314 J.LNKCNT       *40
 41000000 000000000000 J.MODE         *39
 41000000 000000000022 J.OUTPRIO      *39
 41000000 000000000020 J.PPRIV        *39
 40000000 000000000016 J.PRC          *39
 41000000 000000000013 J.PRIV         *39
 41000000 000000000314 J.RNST         *40       173       175
 23:45 07/29/97  FILE=JSN$NSA.:E05TSI         SYMBOL TABLE                                               21   BMAP - B00     
 40000000 000000000314 J.RUNFLAGS     *40
 40000000 000000000017 J.SAVED        *39
 40000000 000000000316 J.STEPCC       *40
 40000000 000000000315 J.STEPS        *40
 40000000 000000000316 J.SVLDTF       *40
 40000000 000000000000 J.SYSID        *39
 41000000 000000000003 J.UNAME        *39
 40000000 000000000000 J.USER         *39
 41000000 000000000010 J.WOO          *39
 41000000 000000000316 J.XCONF        *40
 41000000 000000000316 J.XLIMFLG      *40       176       178
 40000000 000000000317 J.YCERR        *40
 12101000 000000000125 JSE$ABORTM     239      *251
 03201005 000000000000 JSE$ABORTM1   *244       252
 12101000 000000000127 JSE$ABORTX     240      *255
 03201006 000000000000 JSE$ABORTX1   *245       256
 12101000 000000000131 JSE$ABORTY     241      *259
 03201007 000000000000 JSE$ABORTY1   *246       260
 12101000 000000000133 JSE$ACP        242      *263
 03201008 000000000000 JSE$ACP1      *247       264
 12101000 000000000000 JSN$1SSSF        8       *61
 12101000 000000000143 JSN$BLNK       276      *279
 12101000 000000000154 JSN$BLNK1      276      *291
 12101000 000000000201 JSN$BLNK2      276      *316
 12101000 000000000114 JSN$DELTRAS    223      *224
 12101000 000000000035 JSN$FIXSS       14      *149
 12101000 000000000034 JSN$FIXSSM      15      *134
 12101000 000000000010 JSN$GETASR      11       *90
 12101000 000000000002 JSN$GETSSR       9       *70
 12101000 000000000071 JSN$LTRAS       13      *195
 12101000 000000000000 JSN$NSA          7       *54
 12101000 000000000030 JSN$SETASR      12      *113
 12101000 000000000005 JSN$SETSSR      10       *80
 02301008 000000000000 J_ASR_E        *25
 03301002 000000000000 J_INITSSR      *19        63       169
 02301000 000000000000 J_SAVSSR       *17
 41000000 000000000155 LS.AARDV       *42
 23:45 07/29/97  FILE=JSN$NSA.:E05TSI         SYMBOL TABLE                                               22   BMAP - B00     
 41000000 000000000156 LS.AARDV2      *42
 41000000 000000000033 LS.ASLLS       *42
 41000000 000000000053 LS.ASR         *42
 41000000 000000000002 LS.BUF         *42
 41000000 000000000161 LS.BUFCACH     *42
 40000000 000000000004 LS.CFU         *42
 41000000 000000000164 LS.CGCTXT      *42
 41000000 000000000163 LS.CGPT        *42
 41000000 000000000075 LS.CPGT1       *42
 41000000 000000000034 LS.CPLS        *42
 41000000 000000000055 LS.CWSQ1       *42
 41000000 000000000032 LS.DBLS        *42
 41000000 000000000004 LS.DS1         *42
 41000000 000000000005 LS.DS2         *42
 41000000 000000000006 LS.DS3         *42
 41000000 000000000007 LS.DS4         *42
 41000000 000000000010 LS.DS5         *42
 41000000 000000000011 LS.DS6         *42
 41000000 000000000012 LS.DS7         *42
 41000000 000000000013 LS.DS8         *42
 40000000 000000000202 LS.DVT         *42
 41000000 000000000016 LS.ECCB        *42
 41000000 000000000157 LS.FIRM        *42
 40000000 000000000155 LS.FLT         *42
 41000000 000000000045 LS.HJITU       *42
 41000000 000000000162 LS.IMX         *42
 41000000 000000000122 LS.IOEND       *42
 41000000 000000000176 LS.IPHY_MAP    *42
 41000000 000000000000 LS.IS          *42
 41000000 000000000050 LS.ISB         *42
 41000000 000000000115 LS.JITPG       *42
 41000000 000000000001 LS.JITU        *42
 40000000 000000000013 LS.LDCT        *42
 41000000 000000000134 LS.LDCTNC      *42
 41000000 000000000121 LS.LOWMEM      *42
 41000000 000000000167 LS.MAGAS       *42
 41000000 000000000172 LS.MAGECCB     *42
 23:45 07/29/97  FILE=JSN$NSA.:E05TSI         SYMBOL TABLE                                               23   BMAP - B00     
 41000000 000000000166 LS.MAGLS       *42
 41000000 000000000170 LS.MAGPS       *42
 41000000 000000000165 LS.MAGSS       *42
 41000000 000000000171 LS.MAGTCB      *42
 41000000 000000000043 LS.MHJIT       *42
 41000000 000000000177 LS.MINIQ_ENT   *42
 41000000 000000000054 LS.MISC        *42
 41000000 000000000130 LS.MISC2       *42
 41000000 000000000042 LS.MJIT        *42
 41000000 000000000035 LS.MLS         *42
 41000000 000000000132 LS.MLS1        *42
 41000000 000000000173 LS.MLSREAD     *42
 40000000 000000000156 LS.MONRL       *42
 41000000 000000000044 LS.MONSSS      *42
 41000000 000000000120 LS.MOUSE       *42
 41000000 000000000037 LS.MPT         *42
 41000000 000000000145 LS.MSTRHJ      *42
 41000000 000000000135 LS.MSTRPT      *42
 41000000 000000000041 LS.MTSTACK     *42
 41000000 000000000014 LS.NULL        *42
 41000000 000000000027 LS.PMME        *42
 41000000 000000000116 LS.PPUT        *42
 41000000 000000000131 LS.RCVENT      *42
 41000000 000000000127 LS.RCVRTN      *42
 41000000 000000000021 LS.REAL        *42
 41000000 000000000030 LS.REG         *42
 41000000 000000000124 LS.RONC        *42
 41000000 000000000003 LS.ROSEG       *42
 41000000 000000000125 LS.ROSEG8      *42
 41000000 000000000046 LS.SBUF1       *42
 41000000 000000000047 LS.SBUF2       *42
 41000000 000000000025 LS.SCR         *42
 41000000 000000000051 LS.SCU         *42
 41000000 000000000174 LS.SEGTBL      *42
 41000000 000000000146 LS.SLV1HJ      *42
 41000000 000000000136 LS.SLV1PT      *42
 41000000 000000000147 LS.SLV2HJ      *42
 23:45 07/29/97  FILE=JSN$NSA.:E05TSI         SYMBOL TABLE                                               24   BMAP - B00     
 41000000 000000000137 LS.SLV2PT      *42
 41000000 000000000150 LS.SLV3HJ      *42
 41000000 000000000140 LS.SLV3PT      *42
 41000000 000000000151 LS.SLV4HJ      *42
 41000000 000000000141 LS.SLV4PT      *42
 41000000 000000000152 LS.SLV5HJ      *42
 41000000 000000000142 LS.SLV5PT      *42
 41000000 000000000153 LS.SLV6HJ      *42
 41000000 000000000143 LS.SLV6PT      *42
 41000000 000000000154 LS.SLV7HJ      *42
 41000000 000000000144 LS.SLV7PT      *42
 41000000 000000000017 LS.TCB         *42
 41000000 000000000123 LS.TIGR        *42
 41000000 000000000020 LS.TSTACK      *42
 41000000 000000000031 LS.ULS         *42
 41000000 000000000036 LS.UPT         *42
 41000000 000000000023 LS.USDS0       *42
 41000000 000000000024 LS.USDS1       *42
 41000000 000000000040 LS.USRIS       *42
 41000000 000000000022 LS.USSS        *42       182
 41000000 000000000117 LS.VPT         *42
 41000000 000000000052 LS.WINDOW      *42
 41000000 000000000133 LS.WS3MLS      *42
 41000000 000000000160 LS.WS3MLSNW    *42
 41000000 000000000175 LS.WSQ0PT      *42
 41000000 000000000026 LS.XD          *42
 41000000 000000000126 LS.XDRTN       *42
 41000000 000000000201 LS.XLALT       *42
 41000000 000000000015 LS.XLAT        *42
 41000000 000000000200 LS.XLNORM      *42
 01101000 000000000073 LTRAS         *198       233
 40000000 000000000006 MAGIC.ND       *41
 41000000 000000000002 MPT.AS         *41
 41000000 000000000010 MPT.ASDESC     *41
 41000000 000000000005 MPT.ECCB       *41
 40000000 000000000013 MPT.ECCBDESC   *41
 41000000 000000000001 MPT.LS         *41
 23:45 07/29/97  FILE=JSN$NSA.:E05TSI         SYMBOL TABLE                                               25   BMAP - B00     
 41000000 000000000007 MPT.LSDESC     *41
 41000000 000000000003 MPT.PS         *41
 41000000 000000000011 MPT.PSDESC     *41
 41000000 000000000000 MPT.SS         *41       136
 41000000 000000000006 MPT.SSDESC     *41
 41000000 000000000004 MPT.TCB        *41
 41000000 000000000012 MPT.TCBDESC    *41
 01101000 000000000100 REGASR         199      *203
 03301009 000000000000 SC_JSNSSF      *26       155
 03601000 000000000000 SDS0SID        *27       294
 03601001 000000000000 SDS1SID        *28       300
 41000000 000000000006 SS            *131       136       151       160       162       165       267
                                      268
 41000000 000000001764 SSR           *249       267
 41000000 000000001761 TYPE           *45       268
 03201000 000000000000 UDN$BLDASR     *31       204
 03201001 000000000000 UDN$BLDASRS    *32       200
 03601002 000000000000 USERISSID      *29       321
 01101000 000000000067 USRSS$         163      *182
 41000000 000000000005 USS           *132       163       166
 03201003 000000000000 X66_AUTO_1     *34       196
 03201002 000000000000 X66_AUTO_3     *33       225

     206 SYMBOLS

 23:45 07/29/97  FILE=JSN$NSA.:E05TSI         MACRO TABLE                                                26   BMAP - B00     
 BJIT0           39
 JJIT5           40
 MAGIC           41
 MONLS           42

      16 MACROS

    SYMBOL SPACE USED  2220 WORDS
     MACRO SPACE USED  3324 WORDS
   INPUT RECORDS READ  1103
 STATEMENTS PROCESSED   578
         ELAPSED TIME  0:11.16
             CPU TIME     4.34 SEC.
        ASSEMBLY RATE  7991 STATEMENTS/CPU MIN.

      NO ERRORS

