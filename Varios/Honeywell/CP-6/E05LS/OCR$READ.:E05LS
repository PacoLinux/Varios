VERSION E05

PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:1    
        1        1        /*M* OCR$READ KEYINs routine to handle console READ's */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        %SET LISTSUB='1'B;
        8        8                                                /**/
        9        9        /*X* DMR,PLM=5,IND=5,CTI=5,SDI=5,MCL=10,CSI=0,ECI=0 */
       10       10                                                /**/
       11       11        OCR$READ: PROC;
       12       12                                                /**/
       13       13                                                /**/
       14       14        %INCLUDE OC_SUBS_C;
       15      745        %INCLUDE OCI_SUBS_C;
       16      843        %INCLUDE CP_6;
       17      924        %INCLUDE OC_DAT_R;
       18     1085                                                /**/
       19     1086        %F$DCB;
       20     1143                                                /**/
       21     1144    1   DCL  READBUF CHAR(140) STATIC UNAL;     /* BUFFER FOR COMMAND */
       22     1145    1   DCL I UBIN WORD UNAL;
       23     1146    1   DCL SIZE UBIN BYTE UNAL;
       24     1147    1   DCL WSIZE UBIN WORD;
       25     1148    1   DCL MSG# UBIN HALF UNAL;
       26     1149    1   DCL PARM# UBIN BYTE UNAL;
       27     1150    1   DCL NP UBIN BYTE STATIC INIT(1);
       28     1151                                                /**/
       29     1152    1   DCL OCO$IWRITE ENTRY(8);
       30     1153    1   DCL OCE$MAKEDO ENTRY(2);
       31     1154    1   DCL OCN$KEYIN ENTRY(3);
       32     1155                                                /**/
       33     1156        %FPT_READ (FPTN=READ_READ,BUF=READBUF,WAIT=YES);
       34     1195        %FPT_RELDCB (FPTN=RELEASE_DCB);
       35     1209        %FPT_CLOSE (FPTN=READ_CLOSE,DISP=SAVE);
       36     1251                                                /**/
       37     1252        %FPT_RESCTL (FPTN=RELEASE_PSN,
PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:2    
       38     1253                       RPSN=PSN_DATA);
       39     1270                                                /**/
       40     1271        %VLP_RPSN (FPTN=PSN_DATA,
       41     1272                       N=20,
       42     1273                       DISP=REM);
       43     1288                                                /**/
       44     1289        %EJECT;
PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:3    
       45     1290        /*
       46     1291             BEGIN OCR$READ MAIN
       47     1292                                                     */
       48     1293    1        I = OC_QUEUE.SUBC(OC_QHEAD);
       49     1294    1        IF OC_CONSOLE.X_DCBNUM(I) = 0
       50     1295    1        THEN
       51     1296    1             RETURN;
       52     1297    1        READBUF = ' ';
       53     1298    1        READ_READ.V.DCB# = OC_CONSOLE.X_DCBNUM (I);
       54     1299    1        CALL M$READ (READ_READ) ALTRET (READ_ERR);
       55     1300    1        SIZE = DCBADDR (OC_CONSOLE.X_DCBNUM(I))->F$DCB.ARS#;
       56     1301    1        MSG# = 370 /*XEQE_MSG#*/;
       57     1302    1        CALL OCO$IWRITE(BINBIT(OC_CONSOLE.CID(I)+OC_DIRBIT,18),MSG#,
       58     1303    1             NP,SIZE,READBUF,0,OC_CONSOLE.WSN(I),0);
       59     1304    1        WSIZE = SIZE;
       60     1305    1        CALL OCN$KEYIN(READBUF,WSIZE,OC_CONSOLE.STATION(I));
       61     1306    1        CALL OCE$MAKEDO(6 /* OC_READ_EV */,I);
       62     1307    1        RETURN;
       63     1308    1   READ_ERR: ;
       64     1309    1        READ_CLOSE.V.DCB# = OC_CONSOLE.X_DCBNUM(I);
       65     1310    1        CALL M$CLOSE (READ_CLOSE) ALTRET (WHO_CARES);
       66     1311    1   WHO_CARES: ;
       67     1312    1        CALL M$DISPRES (RELEASE_PSN)
       68     1313    1             ALTRET (WHO_CARES0);
       69     1314                                                /**/
       70     1315    1   WHO_CARES0:;
       71     1316    1        CALL M$RELRES (RELEASE_PSN)
       72     1317    1             ALTRET (WHO_CARES1);
       73     1318    1   WHO_CARES1:;
       74     1319    1        RELEASE_DCB.V.DCB# = OC_CONSOLE.X_DCBNUM(I);
       75     1320    1        CALL M$RELDCB(RELEASE_DCB) ALTRET(WHO_CARES2);
       76     1321    1   WHO_CARES2:;
       77     1322    1        OC_CONSOLE.X_DCBNUM(I) = 0;
       78     1323    1        MSG# = 371 /*XEQ_MSG#*/;
       79     1324    1        SIZE = 1;
       80     1325    1        PARM# = 0;
       81     1326    1        CALL OCO$IWRITE(BINBIT(OC_CONSOLE.CID(I)+OC_DIRBIT,18),MSG#,
PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:4    
       82     1327    1             NP,SIZE,PARM#,0,OC_CONSOLE.WSN(I),0);
       83     1328    1        RETURN;
       84     1329    1   END OCR$READ;
       85     1330        %EOD;

PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:5    
--  Include file information  --

   OC$MESSHD_C.:E05TOU  is referenced.
   OC_DAT_R.:E05TOU  cannot be made into a system file and is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   OCI_SUBS_C.:E05TOU  is referenced.
   OC_SUBS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure OCR$READ.

   Procedure OCR$READ requires 161 words for executable code.
   Procedure OCR$READ requires 20 words of local(AUTO) storage.

PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:6    

 Object Unit name= OCR$READ                                   File name= OCR$READ.:E05TOU
 UTS= JUL 30 '97 04:06:05.88 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none   188    274  OCR$READ
    2   Proc  even  none   161    241  OCR$READ
    3  RoData even  none     6      6  OCR$READ

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes            yes      Std        0  OCR$READ

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       8 OCO$IWRITE
         yes           Std       3 OCN$KEYIN
         yes           Std       2 OCE$MAKEDO
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET
                       Std       0 B_CONSPOOL_D
PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:7    

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  OC_INTMSG                             OC_MESSBUF
     OC_MSGBUFFER                          OC_QHEAD                              OC_QUEUE
     OC_PARAM                              OC_CONSOLE$                           OC_DIR
     OC_INTBIT                             OC_MASK                               B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID                               ROSID
PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:8    


        1        1        /*M* OCR$READ KEYINs routine to handle console READ's */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        %SET LISTSUB='1'B;
        8        8                                                /**/
        9        9        /*X* DMR,PLM=5,IND=5,CTI=5,SDI=5,MCL=10,CSI=0,ECI=0 */
       10       10                                                /**/
       11       11        OCR$READ: PROC;

     11  2 000000   000000 700200 xent  OCR$READ     TSX0  ! X66_AUTO_0
         2 000001   000024 000000                    ZERO    20,0

       12       12                                                /**/
       13       13                                                /**/
       14       14        %INCLUDE OC_SUBS_C;
       15      745        %INCLUDE OCI_SUBS_C;
       16      843        %INCLUDE CP_6;
       17      924        %INCLUDE OC_DAT_R;
       18     1085                                                /**/
       19     1086        %F$DCB;
       20     1143                                                /**/
       21     1144    1   DCL  READBUF CHAR(140) STATIC UNAL;     /* BUFFER FOR COMMAND */
       22     1145    1   DCL I UBIN WORD UNAL;
       23     1146    1   DCL SIZE UBIN BYTE UNAL;
       24     1147    1   DCL WSIZE UBIN WORD;
       25     1148    1   DCL MSG# UBIN HALF UNAL;
       26     1149    1   DCL PARM# UBIN BYTE UNAL;
       27     1150    1   DCL NP UBIN BYTE STATIC INIT(1);
       28     1151                                                /**/
       29     1152    1   DCL OCO$IWRITE ENTRY(8);
       30     1153    1   DCL OCE$MAKEDO ENTRY(2);
       31     1154    1   DCL OCN$KEYIN ENTRY(3);
       32     1155                                                /**/
PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:9    
       33     1156        %FPT_READ (FPTN=READ_READ,BUF=READBUF,WAIT=YES);
       34     1195        %FPT_RELDCB (FPTN=RELEASE_DCB);
       35     1209        %FPT_CLOSE (FPTN=READ_CLOSE,DISP=SAVE);
       36     1251                                                /**/
       37     1252        %FPT_RESCTL (FPTN=RELEASE_PSN,
       38     1253                       RPSN=PSN_DATA);
       39     1270                                                /**/
       40     1271        %VLP_RPSN (FPTN=PSN_DATA,
       41     1272                       N=20,
       42     1273                       DISP=REM);
       43     1288                                                /**/
       44     1289        %EJECT;
PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:10   
       45     1290        /*
       46     1291             BEGIN OCR$READ MAIN
       47     1292                                                     */
       48     1293    1        I = OC_QUEUE.SUBC(OC_QHEAD);

   1293  2 000002   000000 236000 xsym               LDQ     OC_QHEAD
         2 000003   000017 402007                    MPY     15,DL
         2 000004   000000 235006 xsym               LDA     OC_QUEUE,QL
         2 000005   200003 755100                    STA     I,,AUTO

       49     1294    1        IF OC_CONSOLE.X_DCBNUM(I) = 0

   1294  2 000006   200003 236100                    LDQ     I,,AUTO
         2 000007   000076 402007                    MPY     62,DL
         2 000010   000000 470400 xsym               LDP0    OC_CONSOLE$
         2 000011   000015 720106                    LXL0    13,QL,PR0
         2 000012   000014 601000 2                  TNZ     s:1297

       50     1295    1        THEN
       51     1296    1             RETURN;

   1296  2 000013   000000 702200 xent               TSX2  ! X66_ARET

       52     1297    1        READBUF = ' ';

   1297  2 000014   040000 100400                    MLR     fill='040'O
         2 000015   000035 000001 xsym               ADSC9   B_VECTNIL+29             cn=0,n=1
         2 000016   000000 000214 1                  ADSC9   READBUF                  cn=0,n=140

       53     1298    1        READ_READ.V.DCB# = OC_CONSOLE.X_DCBNUM (I);

   1298  2 000017   000015 720106                    LXL0    13,QL,PR0
         2 000020   000054 740000 1                  STX0    READ_READ+8

       54     1299    1        CALL M$READ (READ_READ) ALTRET (READ_ERR);

   1299  2 000021   000044 630400 1                  EPPR0   READ_READ
PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:11   
         2 000022   440000 713400                    CLIMB   alt,read
         2 000023   401400 401760                    pmme    nvectors=4
         2 000024   000130 702000 2                  TSX2    READ_ERR

       55     1300    1        SIZE = DCBADDR (OC_CONSOLE.X_DCBNUM(I))->F$DCB.ARS#;

   1300  2 000025   000000 470400 3                  LDP0    0
         2 000026   000000 471500                    LDP1    0,,PR0
         2 000027   200003 236100                    LDQ     I,,AUTO
         2 000030   000076 402007                    MPY     62,DL
         2 000031   000000 473400 xsym               LDP3    OC_CONSOLE$
         2 000032   300015 720106                    LXL0    13,QL,PR3
         2 000033   100000 474510                    LDP4    0,X0,PR1
         2 000034   400000 235100                    LDA     0,,PR4
         2 000035   000033 735000                    ALS     27
         2 000036   200004 755100                    STA     SIZE,,AUTO

       56     1301    1        MSG# = 370 /*XEQE_MSG#*/;

   1301  2 000037   000562 220003                    LDX0    370,DU
         2 000040   200006 740100                    STX0    MSG#,,AUTO

       57     1302    1        CALL OCO$IWRITE(BINBIT(OC_CONSOLE.CID(I)+OC_DIRBIT,18),MSG#,

   1302  2 000041   000000 235000 xsym               LDA     OC_DIR
         2 000042   000022 771000                    ARL     18
         2 000043   200010 755100                    STA     PARM#+1,,AUTO
         2 000044   300012 236106                    LDQ     10,QL,PR3
         2 000045   000022 772000                    QRL     18
         2 000046   200010 036100                    ADLQ    PARM#+1,,AUTO
         2 000047   000022 736000                    QLS     18
         2 000050   000022 772000                    QRL     18
         2 000051   000000 621006                    EAX1    0,QL
         2 000052   200012 741100                    STX1    PARM#+3,,AUTO
         2 000053   000001 236000 3                  LDQ     1
         2 000054   200023 756100                    STQ     PARM#+12,,AUTO
         2 000055   200003 236100                    LDQ     I,,AUTO
PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:12   
         2 000056   000076 402003                    MPY     62,DU
         2 000057   000004 036003                    ADLQ    4,DU
         2 000060   000000 036000 xsym               ADLQ    OC_CONSOLE$
         2 000061   200022 756100                    STQ     PARM#+11,,AUTO
         2 000062   000002 237000 3                  LDAQ    2
         2 000063   200020 757100                    STAQ    PARM#+9,,AUTO
         2 000064   200004 634500                    EPPR4   SIZE,,AUTO
         2 000065   200017 454500                    STP4    PARM#+8,,AUTO
         2 000066   000004 236000 3                  LDQ     4
         2 000067   200016 756100                    STQ     PARM#+7,,AUTO
         2 000070   200006 635500                    EPPR5   MSG#,,AUTO
         2 000071   200015 455500                    STP5    PARM#+6,,AUTO
         2 000072   200012 636500                    EPPR6   PARM#+3,,AUTO
         2 000073   200014 456500                    STP6    PARM#+5,,AUTO
         2 000074   200014 630500                    EPPR0   PARM#+5,,AUTO
         2 000075   000026 631400 xsym               EPPR1   B_VECTNIL+22
         2 000076   000000 701000 xent               TSX1    OCO$IWRITE
         2 000077   000000 011000                    NOP     0

       58     1303    1             NP,SIZE,READBUF,0,OC_CONSOLE.WSN(I),0);
       59     1304    1        WSIZE = SIZE;

   1304  2 000100   200004 236100                    LDQ     SIZE,,AUTO
         2 000101   000033 772000                    QRL     27
         2 000102   200005 756100                    STQ     WSIZE,,AUTO

       60     1305    1        CALL OCN$KEYIN(READBUF,WSIZE,OC_CONSOLE.STATION(I));

   1305  2 000103   200003 236100                    LDQ     I,,AUTO
         2 000104   000076 402003                    MPY     62,DU
         2 000105   000000 036000 xsym               ADLQ    OC_CONSOLE$
         2 000106   200012 756100                    STQ     PARM#+3,,AUTO
         2 000107   200005 630500                    EPPR0   WSIZE,,AUTO
         2 000110   200011 450500                    STP0    PARM#+2,,AUTO
         2 000111   000002 236000 3                  LDQ     2
         2 000112   200010 756100                    STQ     PARM#+1,,AUTO
         2 000113   200010 630500                    EPPR0   PARM#+1,,AUTO
PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:13   
         2 000114   000021 631400 xsym               EPPR1   B_VECTNIL+17
         2 000115   000000 701000 xent               TSX1    OCN$KEYIN
         2 000116   000000 011000                    NOP     0

       61     1306    1        CALL OCE$MAKEDO(6 /* OC_READ_EV */,I);

   1306  2 000117   200003 630500                    EPPR0   I,,AUTO
         2 000120   200011 450500                    STP0    PARM#+2,,AUTO
         2 000121   000005 236000 3                  LDQ     5
         2 000122   200010 756100                    STQ     PARM#+1,,AUTO
         2 000123   200010 630500                    EPPR0   PARM#+1,,AUTO
         2 000124   000020 631400 xsym               EPPR1   B_VECTNIL+16
         2 000125   000000 701000 xent               TSX1    OCE$MAKEDO
         2 000126   000000 011000                    NOP     0

       62     1307    1        RETURN;

   1307  2 000127   000000 702200 xent               TSX2  ! X66_ARET

   1304  2 000130                       READ_ERR     null
       63     1308    1   READ_ERR: ;
       64     1309    1        READ_CLOSE.V.DCB# = OC_CONSOLE.X_DCBNUM(I);

   1309  2 000130   200003 236100                    LDQ     I,,AUTO
         2 000131   000076 402007                    MPY     62,DL
         2 000132   000000 470400 xsym               LDP0    OC_CONSOLE$
         2 000133   000015 720106                    LXL0    13,QL,PR0
         2 000134   000120 740000 1                  STX0    READ_CLOSE+26

       65     1310    1        CALL M$CLOSE (READ_CLOSE) ALTRET (WHO_CARES);

   1310  2 000135   000066 630400 1                  EPPR0   READ_CLOSE
         2 000136   450001 713400                    CLIMB   alt,close
         2 000137   406000 401760                    pmme    nvectors=13
         2 000140   000141 702000 2                  TSX2    WHO_CARES

   1309  2 000141                       WHO_CARES    null
PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:14   
       66     1311    1   WHO_CARES: ;
       67     1312    1        CALL M$DISPRES (RELEASE_PSN)

   1312  2 000141   000124 630400 1                  EPPR0   RELEASE_PSN
         2 000142   550002 713400                    CLIMB   alt,+53250
         2 000143   402400 401760                    pmme    nvectors=6
         2 000144   000145 702000 2                  TSX2    WHO_CARES0

   1309  2 000145                       WHO_CARES0   null
       68     1313    1             ALTRET (WHO_CARES0);
       69     1314                                                /**/
       70     1315    1   WHO_CARES0:;
       71     1316    1        CALL M$RELRES (RELEASE_PSN)

   1316  2 000145   000124 630400 1                  EPPR0   RELEASE_PSN
         2 000146   550003 713400                    CLIMB   alt,+53251
         2 000147   402400 401760                    pmme    nvectors=6
         2 000150   000151 702000 2                  TSX2    WHO_CARES1

   1309  2 000151                       WHO_CARES1   null
       72     1317    1             ALTRET (WHO_CARES1);
       73     1318    1   WHO_CARES1:;
       74     1319    1        RELEASE_DCB.V.DCB# = OC_CONSOLE.X_DCBNUM(I);

   1319  2 000151   200003 236100                    LDQ     I,,AUTO
         2 000152   000076 402007                    MPY     62,DL
         2 000153   000000 470400 xsym               LDP0    OC_CONSOLE$
         2 000154   000015 720106                    LXL0    13,QL,PR0
         2 000155   000064 740000 1                  STX0    RELEASE_DCB+2

       75     1320    1        CALL M$RELDCB(RELEASE_DCB) ALTRET(WHO_CARES2);

   1320  2 000156   000062 630400 1                  EPPR0   RELEASE_DCB
         2 000157   460003 713400                    CLIMB   alt,+24579
         2 000160   400000 401760                    pmme    nvectors=1
         2 000161   000162 702000 2                  TSX2    WHO_CARES2

PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:15   
   1319  2 000162                       WHO_CARES2   null
       76     1321    1   WHO_CARES2:;
       77     1322    1        OC_CONSOLE.X_DCBNUM(I) = 0;

   1322  2 000162   200003 236100                    LDQ     I,,AUTO
         2 000163   000076 402007                    MPY     62,DL
         2 000164   000000 220003                    LDX0    0,DU
         2 000165   000000 470400 xsym               LDP0    OC_CONSOLE$
         2 000166   000015 440106                    SXL0    13,QL,PR0

       78     1323    1        MSG# = 371 /*XEQ_MSG#*/;

   1323  2 000167   000563 221003                    LDX1    371,DU
         2 000170   200006 741100                    STX1    MSG#,,AUTO

       79     1324    1        SIZE = 1;

   1324  2 000171   001000 236003                    LDQ     512,DU
         2 000172   200004 756100                    STQ     SIZE,,AUTO

       80     1325    1        PARM# = 0;

   1325  2 000173   200007 450100                    STZ     PARM#,,AUTO

       81     1326    1        CALL OCO$IWRITE(BINBIT(OC_CONSOLE.CID(I)+OC_DIRBIT,18),MSG#,

   1326  2 000174   000000 235000 xsym               LDA     OC_DIR
         2 000175   000022 771000                    ARL     18
         2 000176   200010 755100                    STA     PARM#+1,,AUTO
         2 000177   200003 236100                    LDQ     I,,AUTO
         2 000200   000076 402007                    MPY     62,DL
         2 000201   000000 470400 xsym               LDP0    OC_CONSOLE$
         2 000202   000012 236106                    LDQ     10,QL,PR0
         2 000203   000022 772000                    QRL     18
         2 000204   200010 036100                    ADLQ    PARM#+1,,AUTO
         2 000205   000022 736000                    QLS     18
         2 000206   000022 772000                    QRL     18
PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:16   
         2 000207   000000 622006                    EAX2    0,QL
         2 000210   200012 742100                    STX2    PARM#+3,,AUTO
         2 000211   000001 236000 3                  LDQ     1
         2 000212   200023 756100                    STQ     PARM#+12,,AUTO
         2 000213   200003 236100                    LDQ     I,,AUTO
         2 000214   000076 402003                    MPY     62,DU
         2 000215   000004 036003                    ADLQ    4,DU
         2 000216   000000 036000 xsym               ADLQ    OC_CONSOLE$
         2 000217   200022 756100                    STQ     PARM#+11,,AUTO
         2 000220   000001 236000 3                  LDQ     1
         2 000221   200021 756100                    STQ     PARM#+10,,AUTO
         2 000222   200007 631500                    EPPR1   PARM#,,AUTO
         2 000223   200020 451500                    STP1    PARM#+9,,AUTO
         2 000224   200004 633500                    EPPR3   SIZE,,AUTO
         2 000225   200017 453500                    STP3    PARM#+8,,AUTO
         2 000226   000004 236000 3                  LDQ     4
         2 000227   200016 756100                    STQ     PARM#+7,,AUTO
         2 000230   200006 634500                    EPPR4   MSG#,,AUTO
         2 000231   200015 454500                    STP4    PARM#+6,,AUTO
         2 000232   200012 635500                    EPPR5   PARM#+3,,AUTO
         2 000233   200014 455500                    STP5    PARM#+5,,AUTO
         2 000234   200014 630500                    EPPR0   PARM#+5,,AUTO
         2 000235   000026 631400 xsym               EPPR1   B_VECTNIL+22
         2 000236   000000 701000 xent               TSX1    OCO$IWRITE
         2 000237   000000 011000                    NOP     0

       82     1327    1             NP,SIZE,PARM#,0,OC_CONSOLE.WSN(I),0);
       83     1328    1        RETURN;

   1328  2 000240   000000 702200 xent               TSX2  ! X66_ARET
       84     1329    1   END OCR$READ;
       85     1330        %EOD;

PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:17   
--  Include file information  --

   OC$MESSHD_C.:E05TOU  is referenced.
   OC_DAT_R.:E05TOU  cannot be made into a system file and is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   OCI_SUBS_C.:E05TOU  is referenced.
   OC_SUBS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure OCR$READ.
PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:18   

 **** Variables and constants ****

  ****  Section 001  Data  OCR$READ

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    43-0-0/w UBIN(9)     r     1 NP                       146-0-0/d STRC(3096)  r     1 PSN_DATA
     0-0-0/c CHAR(140)   r     1 READBUF                   66-0-0/d STRC(1080)  r     1 READ_CLOSE
    44-0-0/d STRC(504)   r     1 READ_READ                 62-0-0/d STRC(144)   r     1 RELEASE_DCB
   124-0-0/d STRC(648)   r     1 RELEASE_PSN

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/b UBIN        r     1 I                          6-0-0/b UBIN(18)    r     1 MSG#
     7-0-0/b UBIN(9)     r     1 PARM#                      4-0-0/b UBIN(9)     r     1 SIZE
     5-0-0/w UBIN        r     1 WSIZE

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 OC_CONSOLE$                0-0-0/w BIT (18)    r     1 OC_DIR
     0-0-0/w UBIN(18)    r     1 OC_DIRBIT                  0-0-0/w UBIN        r     1 OC_QHEAD
     0-0-0/w STRC(540)   r     1 OC_QUEUE(0:8191)

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d ASTR(3528)  r     1 F$DCB
     0-0-0/w STRC(2205)  r     1 OC_CONSOLE(0:0)
PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:19   


   Procedure OCR$READ requires 161 words for executable code.
   Procedure OCR$READ requires 20 words of local(AUTO) storage.
PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:20   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:21   
          MINI XREF LISTING

F$DCB.ACTPOS
      1119**DCL      1119--REDEF
F$DCB.ARS#
      1093**DCL      1093--REDEF    1300>>ASSIGN
F$DCB.ATTR
      1112**DCL      1113--REDEF
F$DCB.BORROW
      1127**DCL      1127--REDEF    1127--REDEF    1127--REDEF
F$DCB.DCBNAME.L
      1141**DCL      1141--IMP-SIZ
F$DCB.EOMCHAR#
      1097**DCL      1097--REDEF
F$DCB.FLDID
      1122**DCL      1122--REDEF
F$DCB.FORM$
      1116**DCL      1116--REDEF
F$DCB.FSECT
      1132**DCL      1132--REDEF
F$DCB.FSN#
      1109**DCL      1109--REDEF    1109--REDEF    1110--REDEF
F$DCB.HEADER$
      1115**DCL      1115--REDEF
F$DCB.IXTNSIZE#
      1113**DCL      1113--REDEF
F$DCB.LASTSTA$
      1102**DCL      1102--REDEF
F$DCB.LVL
      1128**DCL      1128--REDEF
F$DCB.NAME#.C
      1103**DCL      1103--REDEF
F$DCB.NOEOF
      1125**DCL      1125--REDEF
PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:22   
F$DCB.NRECS#
      1114**DCL      1114--REDEF
F$DCB.NRECX
      1133**DCL      1133--REDEF
F$DCB.OHDR
      1125**DCL      1125--REDEF
F$DCB.ORG#
      1108**DCL      1108--REDEF
F$DCB.PRECNO
      1131**DCL      1131--REDEF
F$DCB.RCSZ
      1137**DCL      1137--REDEF
F$DCB.RES#
      1104**DCL      1104--REDEF
F$DCB.SETX
      1116**DCL      1116--REDEF
F$DCB.TAB$
      1116**DCL      1116--REDEF
F$DCB.TDA
      1130**DCL      1131--REDEF
F$DCB.WSN#
      1104**DCL      1104--REDEF
I
      1145**DCL      1293<<ASSIGN   1294>>IF       1298>>ASSIGN   1300>>ASSIGN   1302>>CALL     1302>>CALL
      1305>>CALL     1306<>CALL     1309>>ASSIGN   1319>>ASSIGN   1322>>ASSIGN   1326>>CALL     1326>>CALL
M$CLOSE
       852**DCL-ENT  1310--CALL
M$DISPRES
       859**DCL-ENT  1312--CALL
M$READ
       853**DCL-ENT  1299--CALL
M$RELDCB
       858**DCL-ENT  1320--CALL
M$RELRES
       859**DCL-ENT  1316--CALL
MSG#
PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:23   
      1148**DCL      1301<<ASSIGN   1302<>CALL     1323<<ASSIGN   1326<>CALL
NP
      1150**DCL      1302<>CALL     1326<>CALL
OCE$MAKEDO
      1153**DCL-ENT  1306--CALL
OCN$KEYIN
      1154**DCL-ENT  1305--CALL
OCO$IWRITE
      1152**DCL-ENT  1302--CALL     1326--CALL
OC_CONSOLE.ATTR
      1038**DCL      1038--REDEF
OC_CONSOLE.ATTRO
      1039**DCL      1039--REDEF
OC_CONSOLE.CID
      1037**DCL      1038--REDEF    1302>>CALL     1326>>CALL
OC_CONSOLE.STATION
      1036**DCL      1036--REDEF    1305<>CALL
OC_CONSOLE.WSN
      1037**DCL      1302<>CALL     1326<>CALL
OC_CONSOLE.X_DCBNUM
      1040**DCL      1294>>IF       1298>>ASSIGN   1300--ASSIGN   1309>>ASSIGN   1319>>ASSIGN   1322<<ASSIGN
OC_CONSOLE$
      1035**DCL      1036--IMP-PTR  1294>>IF       1298>>ASSIGN   1300>>ASSIGN   1302>>CALL     1302>>CALL
      1305>>CALL     1309>>ASSIGN   1319>>ASSIGN   1322>>ASSIGN   1326>>CALL     1326>>CALL
OC_DIR
      1078**DCL      1078--REDEF
OC_DIRBIT
      1078**DCL      1302>>CALL     1326>>CALL
OC_INTBIT
      1078**DCL      1079--REDEF
OC_INTMSG
       955**DCL       968--REDEF
OC_INTMSG.FLAGS
       962**DCL       963--REDEF
OC_INTMSG.MESS
       968**DCL       968--REDEF
PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:24   
OC_INTMSG.MSGID
       958**DCL       959--REDEF
OC_INTMSG.WSN
       965**DCL       966--REDEF
OC_MASK
      1079**DCL      1079--REDEF
OC_MESSBUF
       970**DCL       985--REDEF     999--REDEF
OC_MESSBUF.FLAGS
       977**DCL       978--REDEF
OC_MESSBUF.MESS
       983**DCL       983--REDEF
OC_MESSBUF.MSGID
       973**DCL       974--REDEF
OC_MESSBUF.WSN
       980**DCL       981--REDEF
OC_MESSBUF1.FLAGS
       992**DCL       993--REDEF
OC_MESSBUF1.LEN
       998**DCL       998--REDEF
OC_MESSBUF1.MSGID
       988**DCL       989--REDEF
OC_MESSBUF1.WSN
       995**DCL       996--REDEF
OC_MSGBUFFER
      1001**DCL      1016--REDEF
OC_MSGBUFFER.FLAGS
      1008**DCL      1009--REDEF
OC_MSGBUFFER.MESS
      1014**DCL      1014--REDEF
OC_MSGBUFFER.MSGID
      1004**DCL      1005--REDEF
OC_MSGBUFFER.WSN
      1011**DCL      1012--REDEF
OC_MSGBUFFER2.FLAGS
      1023**DCL      1024--REDEF
PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:25   
OC_MSGBUFFER2.MSGID
      1019**DCL      1020--REDEF
OC_MSGBUFFER2.WSN
      1026**DCL      1027--REDEF
OC_PARAM
      1034**DCL      1034--REDEF
OC_QHEAD
      1030**DCL      1293>>ASSIGN
OC_QUEUE.PARMC
      1033**DCL      1033--REDEF
OC_QUEUE.SUBC
      1032**DCL      1293>>ASSIGN
PARM#
      1149**DCL      1325<<ASSIGN   1326<>CALL
PSN_DATA
      1284**DCL      1265--DCLINIT
READBUF
      1144**DCL      1175--DCLINIT  1176--DCLINIT  1297<<ASSIGN   1302<>CALL     1305<>CALL
READ_CLOSE
      1232**DCL      1310<>CALL
READ_CLOSE.SN_
      1232**DCL      1232--REDEF
READ_CLOSE.UTL_
      1233**DCL      1233--REDEF
READ_CLOSE.V
      1237**DCL      1232--DCLINIT
READ_CLOSE.V.DCB#
      1238**DCL      1309<<ASSIGN
READ_CLOSE.V.EXPIRE#
      1247**DCL      1247--REDEF
READ_CLOSE.V.TYPE#
      1245**DCL      1245--REDEF
READ_CLOSE.V.XTNSIZE#
      1242**DCL      1242--REDEF    1244--REDEF
READ_ERR
      1304**LABEL    1299--CALLALT
PL6.E3A0      #001=OCR$READ File=OCR$READ.:E05TSI                                WED 07/30/97 04:06 Page:26   
READ_READ
      1173**DCL      1299<>CALL
READ_READ.STATION_
      1176**DCL      1177--REDEF
READ_READ.V
      1177**DCL      1173--DCLINIT
READ_READ.V.DCB#
      1177**DCL      1298<<ASSIGN
READ_READ.V.DVBYTE.REREAD#
      1188**DCL      1188--REDEF
READ_READ.V.INDX#
      1186**DCL      1186--REDEF
RELEASE_DCB
      1206**DCL      1320<>CALL
RELEASE_DCB.V
      1206**DCL      1206--DCLINIT
RELEASE_DCB.V.DCB#
      1206**DCL      1319<<ASSIGN
RELEASE_PSN
      1264**DCL      1312<>CALL     1316<>CALL
RELEASE_PSN.V
      1266**DCL      1264--DCLINIT
SIZE
      1146**DCL      1300<<ASSIGN   1302<>CALL     1304>>ASSIGN   1324<<ASSIGN   1326<>CALL
WHO_CARES
      1309**LABEL    1310--CALLALT
WHO_CARES0
      1309**LABEL    1312--CALLALT
WHO_CARES1
      1309**LABEL    1316--CALLALT
WHO_CARES2
      1319**LABEL    1320--CALLALT
WSIZE
      1147**DCL      1304<<ASSIGN   1305<>CALL

PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:27   
       86        1        /*M* OCR$SREAD KEYINs internal routine to open and READ file */
       87        2        /*T***********************************************************/
       88        3        /*T*                                                         */
       89        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       90        5        /*T*                                                         */
       91        6        /*T***********************************************************/
       92        7        %SET LISTSUB='1'B;
       93        8                                                /**/
       94        9                                                /**/
       95       10        OCR$SREAD: PROC (INDEX_,FID);
       96       11                                                /**/
       97       12        %INCLUDE CP_6;
       98       93        %INCLUDE OC_SUBS_C;
       99      824        %INCLUDE OCI_SUBS_C;
      100      922        %INCLUDE OC_DAT_R;
      101     1083                                                /**/
      102     1084                                                /**/
      103     1085    1   DCL INDEX_ UBIN WORD;                   /* INDEX INTO CONSOLE TABLES */
      104     1086    1   DCL 1 FID ,
      105     1087    1            2 FIDLEN UBIN BYTE UNAL,
      106     1088    1            2 FIDTEXT CHAR(FID.FIDLEN) UNAL;
      107     1089                                                /*  */
      108     1090                                                /*  */
      109     1091    1   DCL 1 WFID CHAR(100) STATIC;
      110     1092    1   DCL B$TCB$ PTR SYMREF;
      111     1093        %F$DCB;
      112     1150        %B$TCB;
      113     1153        %B$ALT;
      114     1161    1   DCL RETDCB UBIN WORD STATIC;            /* CONTAINS .V.DCB#  TO USE  */
      115     1162    1   DCL 1 DCBNAME STATIC,
      116     1163    1            2 * UBIN BYTE INIT(10),
      117     1164    1            2 NAMEDCB CHAR(31) ;
      118     1165    1   DCL I UBIN WORD;
      119     1166    1   DCL MSG# UBIN HALF UNAL STATIC INIT(371 /*XEQ_MSG#*/);
      120     1167    1   DCL NP UBIN BYTE STATIC INIT(2);
      121     1168    1   DCL 1 PARM#,
      122     1169    1            2 MESS# UBIN WORD UNAL,
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:28   
      123     1170    1            2 ERROR#,
      124     1171    1                 3 FCG BIT(12) UNAL,
      125     1172    1                 3 MID BIT(6) UNAL,
      126     1173    1                 3 MON BIT(1) UNAL,
      127     1174    1                 3 ERR# UBIN (14) UNAL,
      128     1175    1                 3 SEV UBIN (3) UNAL;
      129     1176    1   DCL SIZE(0:3) UBIN BYTE UNAL STATIC INIT(4,4,4,4);
      130     1177                                                /**/
      131     1178                                                /**/
      132     1179    1   DCL OCO$IWRITE ENTRY(8);
      133     1180    1   DCL OCE$MAKEDO ENTRY(2);
      134     1181                                                /*  */
      135     1182                                                /*  */
      136     1183        %FPT_GETDCB (FPTN=GETDCB,DCBNUM=RETDCB,DCBNAME=DCBNAME,MERGE=NO);
              1183            /* USED TO GET A DCB */
      137     1198        %FPT_RELDCB (FPTN=RELDCB);
      138     1212        %FPT_CLOSE (FPTN=XCLOSE,DISP=SAVE);
      139     1254        %FPT_OPEN (FPTN=OPENREAD,ASN=FILE,FUN=IN,NAME=XNAME,ACCT=XACCT,SN=XSN,PASS=XPASS);
      140     1363        %VLP_NAME (FPTN=XNAME);
      141     1390        %VLP_ACCT (FPTN=XACCT);                 /* THE NAME AND ACCT ARE FROM M$FID*/
      142     1403        %VLP_SN (FPTN=XSN);
      143     1416        %VLP_PASS (FPTN=XPASS);
      144     1429        %FPT_FID (FPTN=XFID,ACCT=XACCT,NAME=XNAME,SN=XSN,TEXTFID=WFID,ASN=OPENREAD.V.ASN#,
      145     1430             PASS=XPASS,RES=OPENREAD.V.RES#);
      146     1453                                                /**/
      147     1454                                                /**/
      148     1455        %FPT_RESCTL (FPTN=RELEASE_PSN,
      149     1456                       RPSN=PSN_DATA);
      150     1473                                                /**/
      151     1474        %VLP_RPSN (FPTN=PSN_DATA,
      152     1475                       N=20,
      153     1476                       DISP=REM);
      154     1491                                                /**/
      155     1492        %EJECT;
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:29   
      156     1493        /* BEGIN OCR$SREAD MAIN PROGRAM */
      157     1494    1        IF OC_CONSOLE.X_DCBNUM(INDEX_) ~= 0
      158     1495    1             AND OC_KEYINBUF$ = ADDR(OC_KEYINBUF)
      159     1496    1        THEN
      160     1497    2        DO;
      161     1498    2             PARM#.MESS# = 3;
      162     1499    2             CALL OCO$IWRITE(OC_CADDR,MSG#,
      163     1500    2                  NP,SIZE,PARM#,0,OC_CONSOLE.WSN(INDEX_),0);
      164     1501    2             RETURN;
      165     1502    2           END;
      166     1503                                                /**/
      167     1504    1        WFID = FID.FIDTEXT;
      168     1505    1        DCBNAME.NAMEDCB= 'X$';
      169     1506    1        CALL INSERT(DCBNAME.NAMEDCB,2,SIZEC(DCBNAME.NAMEDCB)-2,OC_CONSOLE.STATION(
              1506                 INDEX_));
      170     1507    1        IF OC_CONSOLE.X_DCBNUM(INDEX_) = 0
      171     1508    1        THEN
      172     1509    1             CALL M$GETDCB(GETDCB) ALTRET(NODCB);
      173     1510    1        ELSE
      174     1511    2        DO;
      175     1512    2             XCLOSE.V.DCB# = OC_CONSOLE.X_DCBNUM (INDEX_);
      176     1513    2             CALL M$CLOSE(XCLOSE) ALTRET(WHO_CARES);
      177     1514    2   WHO_CARES: ;
      178     1515    2             CALL M$DISPRES (RELEASE_PSN)
      179     1516    2                  ALTRET (WHO_CARES0);
      180     1517                                                /**/
      181     1518    2   WHO_CARES0: ;
      182     1519    2             CALL M$RELRES (RELEASE_PSN)
      183     1520    2                  ALTRET (WHO_CARES1);
      184     1521    2   WHO_CARES1: ;
      185     1522    2             RETDCB = OC_CONSOLE.X_DCBNUM (INDEX_);
      186     1523    2           END;
      187     1524    1        CALL M$FID(XFID) ALTRET (BADOPEN);
      188     1525    1        IF XACCT.ACCT# = '        ' THEN XACCT.ACCT# = OC_CONSOLE.ACCT (INDEX_);
      189     1526    1        IF XACCT.ACCT# = '        ' THEN XACCT.ACCT# = OC_DEF_ACCT;
      190     1527    1        OPENREAD.V.DCB# = RETDCB;
      191     1528    1        CALL M$OPEN (OPENREAD) ALTRET(BADOPEN);
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:30   
      192     1529    1        OC_CONSOLE.X_DCBNUM(INDEX_) = RETDCB;
      193     1530    1        CALL OCE$MAKEDO (6 /* OC_READ_EV */,INDEX_);
      194     1531    1        OC_CONSOLE.FIRST_READ (INDEX_) = '1'B /*TRUE#*/;
      195     1532    1        RETURN;
      196     1533    1   NODCB: ;                                /* COULD NOT GET A DCB */
      197     1534    1        PARM#.ERROR# = B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR;
      198     1535    1        PARM#.MESS# = 2;
      199     1536    1        CALL OCO$IWRITE(OC_CADDR,MSG#,
      200     1537    1             NP,SIZE,PARM#,0,OC_CONSOLE.WSN(INDEX_),0);
      201     1538    1        RETURN;
      202     1539    1   BADOPEN: ;                              /* CANNOT OPEN THIS FILE*/
      203     1540    1        PARM#.ERROR# = B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR;
      204     1541    1        PARM#.MESS# = 1;
      205     1542    1        CALL OCO$IWRITE(OC_CADDR,MSG#,
      206     1543    1             NP,SIZE,PARM#,0,OC_CONSOLE.WSN(INDEX_),0);
      207     1544    1   REL_DCB: ;
      208     1545    1        CALL M$DISPRES (RELEASE_PSN)
      209     1546    1             ALTRET (WHO_CARES4);
      210     1547                                                /**/
      211     1548    1   WHO_CARES4:;
      212     1549    1        CALL M$RELRES (RELEASE_PSN)
      213     1550    1             ALTRET (WHO_CARES3);
      214     1551    1   WHO_CARES3:;
      215     1552    1        RELDCB.V.DCB# = RETDCB;
      216     1553    1        CALL M$RELDCB(RELDCB) ALTRET(WHO_CARES_2);
      217     1554    1   WHO_CARES_2:;
      218     1555    1        OC_CONSOLE.X_DCBNUM(INDEX_) = 0;
      219     1556    1        RETURN;
      220     1557    1   END OCR$SREAD;
      221     1558        %EOD;

PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:31   
--  Include file information  --

   OC$MESSHD_C.:E05TOU  is referenced.
   OC_DAT_R.:E05TOU  cannot be made into a system file and is referenced.
   OCI_SUBS_C.:E05TOU  is referenced.
   OC_SUBS_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure OCR$SREAD.

   Procedure OCR$SREAD requires 206 words for executable code.
   Procedure OCR$SREAD requires 16 words of local(AUTO) storage.

PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:32   

 Object Unit name= OCR$SREAD                                  File name= OCR$READ.:E05TOU
 UTS= JUL 30 '97 04:06:30.52 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none   282    432  OCR$SREAD
    2  RoData even  UTS      3      3  OCR$SREAD
    3   Proc  even  none   206    316  OCR$SREAD
    4  RoData even  none     7      7  OCR$SREAD

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes            yes      Std        2  OCR$SREAD

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       8 OCO$IWRITE
         yes           Std       2 OCE$MAKEDO
                       nStd      0 X66_AUTO_2
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:33   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  OC_INTMSG                             OC_MESSBUF
     OC_MSGBUFFER                          OC_KEYINBUF                           OC_PARAM
     OC_CONSOLE$                           OC_KEYINBUF$                          OC_CADDR
     OC_DIR                                OC_INTBIT                             OC_MASK
     OC_DEF_ACCT                           B$TCB$                                B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:34   


       86        1        /*M* OCR$SREAD KEYINs internal routine to open and READ file */
       87        2        /*T***********************************************************/
       88        3        /*T*                                                         */
       89        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       90        5        /*T*                                                         */
       91        6        /*T***********************************************************/
       92        7        %SET LISTSUB='1'B;
       93        8                                                /**/
       94        9                                                /**/
       95       10        OCR$SREAD: PROC (INDEX_,FID);

     10  3 000000   000000 700200 xent  OCR$SREAD    TSX0  ! X66_AUTO_2
         3 000001   000020 000002                    ZERO    16,2

       96       11                                                /**/
       97       12        %INCLUDE CP_6;
       98       93        %INCLUDE OC_SUBS_C;
       99      824        %INCLUDE OCI_SUBS_C;
      100      922        %INCLUDE OC_DAT_R;
      101     1083                                                /**/
      102     1084                                                /**/
      103     1085    1   DCL INDEX_ UBIN WORD;                   /* INDEX INTO CONSOLE TABLES */
      104     1086    1   DCL 1 FID ,
      105     1087    1            2 FIDLEN UBIN BYTE UNAL,
      106     1088    1            2 FIDTEXT CHAR(FID.FIDLEN) UNAL;
      107     1089                                                /*  */
      108     1090                                                /*  */
      109     1091    1   DCL 1 WFID CHAR(100) STATIC;
      110     1092    1   DCL B$TCB$ PTR SYMREF;
      111     1093        %F$DCB;
      112     1150        %B$TCB;
      113     1153        %B$ALT;
      114     1161    1   DCL RETDCB UBIN WORD STATIC;            /* CONTAINS .V.DCB#  TO USE  */
      115     1162    1   DCL 1 DCBNAME STATIC,
      116     1163    1            2 * UBIN BYTE INIT(10),
      117     1164    1            2 NAMEDCB CHAR(31) ;
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:35   
      118     1165    1   DCL I UBIN WORD;
      119     1166    1   DCL MSG# UBIN HALF UNAL STATIC INIT(371 /*XEQ_MSG#*/);
      120     1167    1   DCL NP UBIN BYTE STATIC INIT(2);
      121     1168    1   DCL 1 PARM#,
      122     1169    1            2 MESS# UBIN WORD UNAL,
      123     1170    1            2 ERROR#,
      124     1171    1                 3 FCG BIT(12) UNAL,
      125     1172    1                 3 MID BIT(6) UNAL,
      126     1173    1                 3 MON BIT(1) UNAL,
      127     1174    1                 3 ERR# UBIN (14) UNAL,
      128     1175    1                 3 SEV UBIN (3) UNAL;
      129     1176    1   DCL SIZE(0:3) UBIN BYTE UNAL STATIC INIT(4,4,4,4);
      130     1177                                                /**/
      131     1178                                                /**/
      132     1179    1   DCL OCO$IWRITE ENTRY(8);
      133     1180    1   DCL OCE$MAKEDO ENTRY(2);
      134     1181                                                /*  */
      135     1182                                                /*  */
      136     1183        %FPT_GETDCB (FPTN=GETDCB,DCBNUM=RETDCB,DCBNAME=DCBNAME,MERGE=NO);
              1183            /* USED TO GET A DCB */
      137     1198        %FPT_RELDCB (FPTN=RELDCB);
      138     1212        %FPT_CLOSE (FPTN=XCLOSE,DISP=SAVE);
      139     1254        %FPT_OPEN (FPTN=OPENREAD,ASN=FILE,FUN=IN,NAME=XNAME,ACCT=XACCT,SN=XSN,PASS=XPASS);
      140     1363        %VLP_NAME (FPTN=XNAME);
      141     1390        %VLP_ACCT (FPTN=XACCT);                 /* THE NAME AND ACCT ARE FROM M$FID*/
      142     1403        %VLP_SN (FPTN=XSN);
      143     1416        %VLP_PASS (FPTN=XPASS);
      144     1429        %FPT_FID (FPTN=XFID,ACCT=XACCT,NAME=XNAME,SN=XSN,TEXTFID=WFID,ASN=OPENREAD.V.ASN#,
      145     1430             PASS=XPASS,RES=OPENREAD.V.RES#);
      146     1453                                                /**/
      147     1454                                                /**/
      148     1455        %FPT_RESCTL (FPTN=RELEASE_PSN,
      149     1456                       RPSN=PSN_DATA);
      150     1473                                                /**/
      151     1474        %VLP_RPSN (FPTN=PSN_DATA,
      152     1475                       N=20,
      153     1476                       DISP=REM);
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:36   
      154     1491                                                /**/
      155     1492        %EJECT;
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:37   
      156     1493        /* BEGIN OCR$SREAD MAIN PROGRAM */
      157     1494    1        IF OC_CONSOLE.X_DCBNUM(INDEX_) ~= 0

   1494  3 000002   200003 470500                    LDP0    @INDEX_,,AUTO
         3 000003   000000 236100                    LDQ     0,,PR0
         3 000004   000076 402007                    MPY     62,DL
         3 000005   000000 471400 xsym               LDP1    OC_CONSOLE$
         3 000006   100015 720106                    LXL0    13,QL,PR1
         3 000007   000042 600000 3                  TZE     s:1504
         3 000010   000000 236000 4                  LDQ     0
         3 000011   000000 116000 xsym               CMPQ    OC_KEYINBUF$
         3 000012   000042 601000 3                  TNZ     s:1504

      158     1495    1             AND OC_KEYINBUF$ = ADDR(OC_KEYINBUF)
      159     1496    1        THEN
      160     1497    2        DO;

      161     1498    2             PARM#.MESS# = 3;

   1498  3 000013   000003 235007                    LDA     3,DL
         3 000014   200006 755100                    STA     PARM#,,AUTO

      162     1499    2             CALL OCO$IWRITE(OC_CADDR,MSG#,

   1499  3 000015   000000 236100                    LDQ     0,,PR0
         3 000016   000076 402007                    MPY     62,DL
         3 000017   000000 620006                    EAX0    0,QL
         3 000020   000001 236000 4                  LDQ     1
         3 000021   200017 756100                    STQ     PARM#+9,,AUTO
         3 000022   000004 636010                    EAQ     4,X0
         3 000023   000000 036000 xsym               ADLQ    OC_CONSOLE$
         3 000024   200016 756100                    STQ     PARM#+8,,AUTO
         3 000025   000001 236000 4                  LDQ     1
         3 000026   200015 756100                    STQ     PARM#+7,,AUTO
         3 000027   200006 633500                    EPPR3   PARM#,,AUTO
         3 000030   200014 453500                    STP3    PARM#+6,,AUTO
         3 000031   000002 237000 4                  LDAQ    2
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:38   
         3 000032   200012 757100                    STAQ    PARM#+4,,AUTO
         3 000033   000004 237000 4                  LDAQ    4
         3 000034   200010 757100                    STAQ    PARM#+2,,AUTO
         3 000035   200010 630500                    EPPR0   PARM#+2,,AUTO
         3 000036   000026 631400 xsym               EPPR1   B_VECTNIL+22
         3 000037   000000 701000 xent               TSX1    OCO$IWRITE
         3 000040   000000 011000                    NOP     0

      163     1500    2                  NP,SIZE,PARM#,0,OC_CONSOLE.WSN(INDEX_),0);
      164     1501    2             RETURN;

   1501  3 000041   000000 702200 xent               TSX2  ! X66_ARET

      165     1502    2           END;
      166     1503                                                /**/
      167     1504    1        WFID = FID.FIDTEXT;

   1504  3 000042   200004 473500                    LDP3    @FID,,AUTO
         3 000043   000100 101500                    MRL     fill='000'O
         3 000044   300000 000001                    ADSC9   0,,PR3                   cn=0,n=1
         3 000045   200010 000002                    ADSC9   PARM#+2,,AUTO            cn=0,n=2
         3 000046   200010 220100                    LDX0    PARM#+2,,AUTO
         3 000047   040000 100540                    MLR     fill='040'O
         3 000050   300000 200010                    ADSC9   0,,PR3                   cn=1,n=*X0
         3 000051   000000 000144 1                  ADSC9   WFID                     cn=0,n=100

      168     1505    1        DCBNAME.NAMEDCB= 'X$';

   1505  3 000052   040000 100400                    MLR     fill='040'O
         3 000053   000000 000002 2                  ADSC9   0                        cn=0,n=2
         3 000054   000033 000037 1                  ADSC9   DCBNAME+1                cn=0,n=31

      169     1506    1        CALL INSERT(DCBNAME.NAMEDCB,2,SIZEC(DCBNAME.NAMEDCB)-2,OC_CONSOLE.STATION(
              1506                 INDEX_));

   1506  3 000055   000000 236100                    LDQ     0,,PR0
         3 000056   000076 402007                    MPY     62,DL
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:39   
         3 000057   000002 736000                    QLS     2
         3 000060   040000 100506                    MLR     fill='040'O
         3 000061   100000 000010                    ADSC9   0,Q,PR1                  cn=0,n=8
         3 000062   000033 400035 1                  ADSC9   DCBNAME+1                cn=2,n=29

      170     1507    1        IF OC_CONSOLE.X_DCBNUM(INDEX_) = 0

   1507  3 000063   000000 236100                    LDQ     0,,PR0
         3 000064   000076 402007                    MPY     62,DL
         3 000065   100015 720106                    LXL0    13,QL,PR1
         3 000066   000074 601000 3                  TNZ     s:1512

      171     1508    1        THEN
      172     1509    1             CALL M$GETDCB(GETDCB) ALTRET(NODCB);

   1509  3 000067   000046 630400 1                  EPPR0   GETDCB
         3 000070   460002 713400                    CLIMB   alt,+24578
         3 000071   401000 401760                    pmme    nvectors=3
         3 000072   000202 702000 3                  TSX2    NODCB
         3 000073   000120 710000 3                  TRA     s:1524

      173     1510    1        ELSE
      174     1511    2        DO;

      175     1512    2             XCLOSE.V.DCB# = OC_CONSOLE.X_DCBNUM (INDEX_);

   1512  3 000074   000114 740000 1                  STX0    XCLOSE+26

      176     1513    2             CALL M$CLOSE(XCLOSE) ALTRET(WHO_CARES);

   1513  3 000075   000062 630400 1                  EPPR0   XCLOSE
         3 000076   450001 713400                    CLIMB   alt,close
         3 000077   406000 401760                    pmme    nvectors=13
         3 000100   000101 702000 3                  TSX2    WHO_CARES

   1512  3 000101                       WHO_CARES    null
      177     1514    2   WHO_CARES: ;
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:40   
      178     1515    2             CALL M$DISPRES (RELEASE_PSN)

   1515  3 000101   000262 630400 1                  EPPR0   RELEASE_PSN
         3 000102   550002 713400                    CLIMB   alt,+53250
         3 000103   402400 401760                    pmme    nvectors=6
         3 000104   000105 702000 3                  TSX2    WHO_CARES0

   1512  3 000105                       WHO_CARES0   null
      179     1516    2                  ALTRET (WHO_CARES0);
      180     1517                                                /**/
      181     1518    2   WHO_CARES0: ;
      182     1519    2             CALL M$RELRES (RELEASE_PSN)

   1519  3 000105   000262 630400 1                  EPPR0   RELEASE_PSN
         3 000106   550003 713400                    CLIMB   alt,+53251
         3 000107   402400 401760                    pmme    nvectors=6
         3 000110   000111 702000 3                  TSX2    WHO_CARES1

   1512  3 000111                       WHO_CARES1   null
      183     1520    2                  ALTRET (WHO_CARES1);
      184     1521    2   WHO_CARES1: ;
      185     1522    2             RETDCB = OC_CONSOLE.X_DCBNUM (INDEX_);

   1522  3 000111   200003 470500                    LDP0    @INDEX_,,AUTO
         3 000112   000000 236100                    LDQ     0,,PR0
         3 000113   000076 402007                    MPY     62,DL
         3 000114   000000 471400 xsym               LDP1    OC_CONSOLE$
         3 000115   100015 236106                    LDQ     13,QL,PR1
         3 000116   777777 376007                    ANQ     -1,DL
         3 000117   000031 756000 1                  STQ     RETDCB

      186     1523    2           END;

      187     1524    1        CALL M$FID(XFID) ALTRET (BADOPEN);

   1524  3 000120   000232 630400 1                  EPPR0   XFID
         3 000121   420001 713400                    CLIMB   alt,+8193
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:41   
         3 000122   404400 401760                    pmme    nvectors=10
         3 000123   000236 702000 3                  TSX2    BADOPEN

      188     1525    1        IF XACCT.ACCT# = '        ' THEN XACCT.ACCT# = OC_CONSOLE.ACCT (INDEX_);

   1525  3 000124   040000 106400                    CMPC    fill='040'O
         3 000125   000222 000010 1                  ADSC9   XACCT                    cn=0,n=8
         3 000126   000001 000010 2                  ADSC9   1                        cn=0,n=8
         3 000127   000140 601000 3                  TNZ     s:1526

   1525  3 000130   200003 470500                    LDP0    @INDEX_,,AUTO
         3 000131   000000 236100                    LDQ     0,,PR0
         3 000132   000076 402007                    MPY     62,DL
         3 000133   000002 736000                    QLS     2
         3 000134   000000 471400 xsym               LDP1    OC_CONSOLE$
         3 000135   040000 100506                    MLR     fill='040'O
         3 000136   100020 000010                    ADSC9   16,Q,PR1                 cn=0,n=8
         3 000137   000222 000010 1                  ADSC9   XACCT                    cn=0,n=8

      189     1526    1        IF XACCT.ACCT# = '        ' THEN XACCT.ACCT# = OC_DEF_ACCT;

   1526  3 000140   040000 106400                    CMPC    fill='040'O
         3 000141   000222 000010 1                  ADSC9   XACCT                    cn=0,n=8
         3 000142   000001 000010 2                  ADSC9   1                        cn=0,n=8
         3 000143   000147 601000 3                  TNZ     s:1527

   1526  3 000144   040000 100400                    MLR     fill='040'O
         3 000145   000000 000010 xsym               ADSC9   OC_DEF_ACCT              cn=0,n=8
         3 000146   000222 000010 1                  ADSC9   XACCT                    cn=0,n=8

      190     1527    1        OPENREAD.V.DCB# = RETDCB;

   1527  3 000147   000031 720000 1                  LXL0    RETDCB
         3 000150   000164 740000 1                  STX0    OPENREAD+36

      191     1528    1        CALL M$OPEN (OPENREAD) ALTRET(BADOPEN);

PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:42   
   1528  3 000151   000120 630400 1                  EPPR0   OPENREAD
         3 000152   450000 713400                    CLIMB   alt,open
         3 000153   410400 401760                    pmme    nvectors=18
         3 000154   000236 702000 3                  TSX2    BADOPEN

      192     1529    1        OC_CONSOLE.X_DCBNUM(INDEX_) = RETDCB;

   1529  3 000155   200003 470500                    LDP0    @INDEX_,,AUTO
         3 000156   000000 236100                    LDQ     0,,PR0
         3 000157   000076 402007                    MPY     62,DL
         3 000160   000031 720000 1                  LXL0    RETDCB
         3 000161   000000 471400 xsym               LDP1    OC_CONSOLE$
         3 000162   100015 440106                    SXL0    13,QL,PR1

      193     1530    1        CALL OCE$MAKEDO (6 /* OC_READ_EV */,INDEX_);

   1530  3 000163   200003 236100                    LDQ     @INDEX_,,AUTO
         3 000164   000006 235000 4                  LDA     6
         3 000165   200010 757100                    STAQ    PARM#+2,,AUTO
         3 000166   200010 630500                    EPPR0   PARM#+2,,AUTO
         3 000167   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000170   000000 701000 xent               TSX1    OCE$MAKEDO
         3 000171   000000 011000                    NOP     0

      194     1531    1        OC_CONSOLE.FIRST_READ (INDEX_) = '1'B /*TRUE#*/;

   1531  3 000172   200003 470500                    LDP0    @INDEX_,,AUTO
         3 000173   000000 236100                    LDQ     0,,PR0
         3 000174   000076 402007                    MPY     62,DL
         3 000175   000000 471400 xsym               LDP1    OC_CONSOLE$
         3 000176   000000 620006                    EAX0    0,QL
         3 000177   002000 236007                    LDQ     1024,DL
         3 000200   100017 256110                    ORSQ    15,X0,PR1

      195     1532    1        RETURN;

   1532  3 000201   000000 702200 xent               TSX2  ! X66_ARET
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:43   

   1531  3 000202                       NODCB        null
      196     1533    1   NODCB: ;                                /* COULD NOT GET A DCB */
      197     1534    1        PARM#.ERROR# = B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR;

   1534  3 000202   000000 470400 xsym               LDP0    B$TCB$
         3 000203   000000 471500                    LDP1    0,,PR0
         3 000204   100102 236100                    LDQ     66,,PR1
         3 000205   200007 756100                    STQ     PARM#+1,,AUTO

      198     1535    1        PARM#.MESS# = 2;

   1535  3 000206   000002 235007                    LDA     2,DL
         3 000207   200006 755100                    STA     PARM#,,AUTO

      199     1536    1        CALL OCO$IWRITE(OC_CADDR,MSG#,

   1536  3 000210   200003 471500                    LDP1    @INDEX_,,AUTO
         3 000211   100000 236100                    LDQ     0,,PR1
         3 000212   000076 402007                    MPY     62,DL
         3 000213   000000 620006                    EAX0    0,QL
         3 000214   000001 236000 4                  LDQ     1
         3 000215   200017 756100                    STQ     PARM#+9,,AUTO
         3 000216   000004 636010                    EAQ     4,X0
         3 000217   000000 036000 xsym               ADLQ    OC_CONSOLE$
         3 000220   200016 756100                    STQ     PARM#+8,,AUTO
         3 000221   000001 236000 4                  LDQ     1
         3 000222   200015 756100                    STQ     PARM#+7,,AUTO
         3 000223   200006 633500                    EPPR3   PARM#,,AUTO
         3 000224   200014 453500                    STP3    PARM#+6,,AUTO
         3 000225   000002 237000 4                  LDAQ    2
         3 000226   200012 757100                    STAQ    PARM#+4,,AUTO
         3 000227   000004 237000 4                  LDAQ    4
         3 000230   200010 757100                    STAQ    PARM#+2,,AUTO
         3 000231   200010 630500                    EPPR0   PARM#+2,,AUTO
         3 000232   000026 631400 xsym               EPPR1   B_VECTNIL+22
         3 000233   000000 701000 xent               TSX1    OCO$IWRITE
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:44   
         3 000234   000000 011000                    NOP     0

      200     1537    1             NP,SIZE,PARM#,0,OC_CONSOLE.WSN(INDEX_),0);
      201     1538    1        RETURN;

   1538  3 000235   000000 702200 xent               TSX2  ! X66_ARET

   1535  3 000236                       BADOPEN      null
      202     1539    1   BADOPEN: ;                              /* CANNOT OPEN THIS FILE*/
      203     1540    1        PARM#.ERROR# = B$TCB$ -> B$TCB.ALT$ -> B$ALT.ERR;

   1540  3 000236   000000 470400 xsym               LDP0    B$TCB$
         3 000237   000000 471500                    LDP1    0,,PR0
         3 000240   100102 236100                    LDQ     66,,PR1
         3 000241   200007 756100                    STQ     PARM#+1,,AUTO

      204     1541    1        PARM#.MESS# = 1;

   1541  3 000242   000001 235007                    LDA     1,DL
         3 000243   200006 755100                    STA     PARM#,,AUTO

      205     1542    1        CALL OCO$IWRITE(OC_CADDR,MSG#,

   1542  3 000244   200003 471500                    LDP1    @INDEX_,,AUTO
         3 000245   100000 236100                    LDQ     0,,PR1
         3 000246   000076 402007                    MPY     62,DL
         3 000247   000000 620006                    EAX0    0,QL
         3 000250   000001 236000 4                  LDQ     1
         3 000251   200017 756100                    STQ     PARM#+9,,AUTO
         3 000252   000004 636010                    EAQ     4,X0
         3 000253   000000 036000 xsym               ADLQ    OC_CONSOLE$
         3 000254   200016 756100                    STQ     PARM#+8,,AUTO
         3 000255   000001 236000 4                  LDQ     1
         3 000256   200015 756100                    STQ     PARM#+7,,AUTO
         3 000257   200006 633500                    EPPR3   PARM#,,AUTO
         3 000260   200014 453500                    STP3    PARM#+6,,AUTO
         3 000261   000002 237000 4                  LDAQ    2
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:45   
         3 000262   200012 757100                    STAQ    PARM#+4,,AUTO
         3 000263   000004 237000 4                  LDAQ    4
         3 000264   200010 757100                    STAQ    PARM#+2,,AUTO
         3 000265   200010 630500                    EPPR0   PARM#+2,,AUTO
         3 000266   000026 631400 xsym               EPPR1   B_VECTNIL+22
         3 000267   000000 701000 xent               TSX1    OCO$IWRITE
         3 000270   000000 011000                    NOP     0

   1541  3 000271                       REL_DCB      null
      206     1543    1             NP,SIZE,PARM#,0,OC_CONSOLE.WSN(INDEX_),0);
      207     1544    1   REL_DCB: ;
      208     1545    1        CALL M$DISPRES (RELEASE_PSN)

   1545  3 000271   000262 630400 1                  EPPR0   RELEASE_PSN
         3 000272   550002 713400                    CLIMB   alt,+53250
         3 000273   402400 401760                    pmme    nvectors=6
         3 000274   000275 702000 3                  TSX2    WHO_CARES4

   1541  3 000275                       WHO_CARES4   null
      209     1546    1             ALTRET (WHO_CARES4);
      210     1547                                                /**/
      211     1548    1   WHO_CARES4:;
      212     1549    1        CALL M$RELRES (RELEASE_PSN)

   1549  3 000275   000262 630400 1                  EPPR0   RELEASE_PSN
         3 000276   550003 713400                    CLIMB   alt,+53251
         3 000277   402400 401760                    pmme    nvectors=6
         3 000300   000301 702000 3                  TSX2    WHO_CARES3

      213     1550    1             ALTRET (WHO_CARES3);

   1550  3 000301                       WHO_CARES3   null
      214     1551    1   WHO_CARES3:;
      215     1552    1        RELDCB.V.DCB# = RETDCB;

   1552  3 000301   000031 720000 1                  LXL0    RETDCB
         3 000302   000060 740000 1                  STX0    RELDCB+2
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:46   

      216     1553    1        CALL M$RELDCB(RELDCB) ALTRET(WHO_CARES_2);

   1553  3 000303   000056 630400 1                  EPPR0   RELDCB
         3 000304   460003 713400                    CLIMB   alt,+24579
         3 000305   400000 401760                    pmme    nvectors=1
         3 000306   000307 702000 3                  TSX2    WHO_CARES_2

   1552  3 000307                       WHO_CARES_2  null
      217     1554    1   WHO_CARES_2:;
      218     1555    1        OC_CONSOLE.X_DCBNUM(INDEX_) = 0;

   1555  3 000307   200003 470500                    LDP0    @INDEX_,,AUTO
         3 000310   000000 236100                    LDQ     0,,PR0
         3 000311   000076 402007                    MPY     62,DL
         3 000312   000000 220003                    LDX0    0,DU
         3 000313   000000 471400 xsym               LDP1    OC_CONSOLE$
         3 000314   100015 440106                    SXL0    13,QL,PR1

      219     1556    1        RETURN;

   1556  3 000315   000000 702200 xent               TSX2  ! X66_ARET
      220     1557    1   END OCR$SREAD;
      221     1558        %EOD;

PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:47   
--  Include file information  --

   OC$MESSHD_C.:E05TOU  is referenced.
   OC_DAT_R.:E05TOU  cannot be made into a system file and is referenced.
   OCI_SUBS_C.:E05TOU  is referenced.
   OC_SUBS_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure OCR$SREAD.
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:48   

 **** Variables and constants ****

  ****  Section 001  Data  OCR$SREAD

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    32-0-0/w STRC(315)   r     1 DCBNAME                   46-0-0/d STRC(288)   r     1 GETDCB
    43-0-0/b UBIN(18)    r     1 MSG#                      44-0-0/w UBIN(9)     r     1 NP
   120-0-0/d STRC(2088)  r     1 OPENREAD                 304-0-0/d STRC(3096)  r     1 PSN_DATA
    56-0-0/d STRC(144)   r     1 RELDCB                   262-0-0/d STRC(648)   r     1 RELEASE_PSN
    31-0-0/w UBIN        r     1 RETDCB                    45-0-0/b UBIN(9)     r     1 SIZE(0:3)
     0-0-0/c CHAR(100)   r     1 WFID                     222-0-0/c STRC(72)    r     1 XACCT
    62-0-0/d STRC(1080)  r     1 XCLOSE                   232-0-0/d STRC(864)   r     1 XFID
   212-0-0/c STRC(288)   r     1 XNAME                    230-0-0/c STRC(72)    r     1 XPASS
   224-0-0/d STRC(90)    r     1 XSN

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @FID                       3-0-0/w PTR         r     1 @INDEX_
    *0-0-0/c ASTR(9)     r     1 FID                       *0-0-0/w UBIN        r     1 INDEX_
     6-0-0/b STRC(72)    r     1 PARM#

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$TCB$                     0-0-0/w BIT (18)    r     1 OC_CADDR
     0-0-0/w PTR         r     1 OC_CONSOLE$                0-0-0/c CHAR(8)     r     1 OC_DEF_ACCT
     0-0-0/c CHAR(256)   r     1 OC_KEYINBUF                0-0-0/w PTR         r     1 OC_KEYINBUF$

  ****  BASED and DCB variables  ****

PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:49   
  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2448)  r     1 B$ALT                      0-0-0/w STRC(144)   r     1 B$TCB
     0-0-0/d ASTR(3528)  r     1 F$DCB
     0-0-0/w STRC(2205)  r     1 OC_CONSOLE(0:0)


   Procedure OCR$SREAD requires 206 words for executable code.
   Procedure OCR$SREAD requires 16 words of local(AUTO) storage.
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:50   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:51   
          MINI XREF LISTING

B$ALT.CODE
      1155**DCL      1155--REDEF    1156--REDEF    1156--REDEF
B$ALT.ERR
      1156**DCL      1534>>ASSIGN   1540>>ASSIGN
B$ALT.ERR.ERR#
      1157**DCL      1157--REDEF
B$ALT.EVID
      1156**DCL      1156--REDEF    1156--REDEF
B$TCB.ALT$
      1151**DCL      1534>>ASSIGN   1540>>ASSIGN
B$TCB$
      1092**DCL      1534>>ASSIGN   1540>>ASSIGN
BADOPEN
      1535**LABEL    1524--CALLALT  1528--CALLALT
DCBNAME
      1162**DCL      1194--DCLINIT
DCBNAME.NAMEDCB
      1164**DCL      1505<<ASSIGN   1506<<CALLBLT  1506--CALLBLT
F$DCB.ACTPOS
      1126**DCL      1126--REDEF
F$DCB.ARS#
      1100**DCL      1100--REDEF
F$DCB.ATTR
      1119**DCL      1120--REDEF
F$DCB.BORROW
      1134**DCL      1134--REDEF    1134--REDEF    1134--REDEF
F$DCB.DCBNAME.L
      1148**DCL      1148--IMP-SIZ
F$DCB.EOMCHAR#
      1104**DCL      1104--REDEF
F$DCB.FLDID
      1129**DCL      1129--REDEF
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:52   
F$DCB.FORM$
      1123**DCL      1123--REDEF
F$DCB.FSECT
      1139**DCL      1139--REDEF
F$DCB.FSN#
      1116**DCL      1116--REDEF    1116--REDEF    1117--REDEF
F$DCB.HEADER$
      1122**DCL      1122--REDEF
F$DCB.IXTNSIZE#
      1120**DCL      1120--REDEF
F$DCB.LASTSTA$
      1109**DCL      1109--REDEF
F$DCB.LVL
      1135**DCL      1135--REDEF
F$DCB.NAME#.C
      1110**DCL      1110--REDEF
F$DCB.NOEOF
      1132**DCL      1132--REDEF
F$DCB.NRECS#
      1121**DCL      1121--REDEF
F$DCB.NRECX
      1140**DCL      1140--REDEF
F$DCB.OHDR
      1132**DCL      1132--REDEF
F$DCB.ORG#
      1115**DCL      1115--REDEF
F$DCB.PRECNO
      1138**DCL      1138--REDEF
F$DCB.RCSZ
      1144**DCL      1144--REDEF
F$DCB.RES#
      1111**DCL      1111--REDEF
F$DCB.SETX
      1123**DCL      1123--REDEF
F$DCB.TAB$
      1123**DCL      1123--REDEF
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:53   
F$DCB.TDA
      1137**DCL      1138--REDEF
F$DCB.WSN#
      1111**DCL      1111--REDEF
FID
      1086**DCL        10--PROC
FID.FIDLEN
      1087**DCL      1088--IMP-SIZ  1504>>ASSIGN
FID.FIDTEXT
      1088**DCL      1504>>ASSIGN
GETDCB
      1194**DCL      1509<>CALL
GETDCB.V
      1195**DCL      1194--DCLINIT
INDEX_
      1085**DCL        10--PROC     1494>>IF       1499>>CALL     1506>>CALLBLT  1507>>IF       1512>>ASSIGN
      1522>>ASSIGN   1525>>ASSIGN   1529>>ASSIGN   1530<>CALL     1531>>ASSIGN   1536>>CALL     1542>>CALL
      1555>>ASSIGN
M$CLOSE
        21**DCL-ENT  1513--CALL
M$DISPRES
        28**DCL-ENT  1515--CALL     1545--CALL
M$FID
        84**DCL-ENT  1524--CALL
M$GETDCB
        27**DCL-ENT  1509--CALL
M$OPEN
        21**DCL-ENT  1528--CALL
M$RELDCB
        27**DCL-ENT  1553--CALL
M$RELRES
        28**DCL-ENT  1519--CALL     1549--CALL
MSG#
      1166**DCL      1499<>CALL     1536<>CALL     1542<>CALL
NODCB
      1531**LABEL    1509--CALLALT
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:54   
NP
      1167**DCL      1499<>CALL     1536<>CALL     1542<>CALL
OCE$MAKEDO
      1180**DCL-ENT  1530--CALL
OCO$IWRITE
      1179**DCL-ENT  1499--CALL     1536--CALL     1542--CALL
OC_CADDR
      1075**DCL      1499<>CALL     1536<>CALL     1542<>CALL
OC_CONSOLE.ACCT
      1040**DCL      1525>>ASSIGN
OC_CONSOLE.ATTR
      1036**DCL      1036--REDEF
OC_CONSOLE.ATTRO
      1037**DCL      1037--REDEF
OC_CONSOLE.CID
      1035**DCL      1036--REDEF
OC_CONSOLE.FIRST_READ
      1040**DCL      1531<<ASSIGN
OC_CONSOLE.STATION
      1034**DCL      1034--REDEF    1506>>CALLBLT
OC_CONSOLE.WSN
      1035**DCL      1499<>CALL     1536<>CALL     1542<>CALL
OC_CONSOLE.X_DCBNUM
      1038**DCL      1494>>IF       1507>>IF       1512>>ASSIGN   1522>>ASSIGN   1529<<ASSIGN   1555<<ASSIGN
OC_CONSOLE$
      1033**DCL      1034--IMP-PTR  1494>>IF       1499>>CALL     1506>>CALLBLT  1507>>IF       1512>>ASSIGN
      1522>>ASSIGN   1525>>ASSIGN   1529>>ASSIGN   1531>>ASSIGN   1536>>CALL     1542>>CALL     1555>>ASSIGN
OC_DEF_ACCT
      1080**DCL      1526>>ASSIGN
OC_DIR
      1076**DCL      1076--REDEF
OC_INTBIT
      1076**DCL      1077--REDEF
OC_INTMSG
       953**DCL       966--REDEF
OC_INTMSG.FLAGS
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:55   
       960**DCL       961--REDEF
OC_INTMSG.MESS
       966**DCL       966--REDEF
OC_INTMSG.MSGID
       956**DCL       957--REDEF
OC_INTMSG.WSN
       963**DCL       964--REDEF
OC_KEYINBUF
      1030**DCL      1494--IF
OC_KEYINBUF$
      1074**DCL      1494>>IF
OC_MASK
      1077**DCL      1077--REDEF
OC_MESSBUF
       968**DCL       983--REDEF     997--REDEF
OC_MESSBUF.FLAGS
       975**DCL       976--REDEF
OC_MESSBUF.MESS
       981**DCL       981--REDEF
OC_MESSBUF.MSGID
       971**DCL       972--REDEF
OC_MESSBUF.WSN
       978**DCL       979--REDEF
OC_MESSBUF1.FLAGS
       990**DCL       991--REDEF
OC_MESSBUF1.LEN
       996**DCL       996--REDEF
OC_MESSBUF1.MSGID
       986**DCL       987--REDEF
OC_MESSBUF1.WSN
       993**DCL       994--REDEF
OC_MSGBUFFER
       999**DCL      1014--REDEF
OC_MSGBUFFER.FLAGS
      1006**DCL      1007--REDEF
OC_MSGBUFFER.MESS
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:56   
      1012**DCL      1012--REDEF
OC_MSGBUFFER.MSGID
      1002**DCL      1003--REDEF
OC_MSGBUFFER.WSN
      1009**DCL      1010--REDEF
OC_MSGBUFFER2.FLAGS
      1021**DCL      1022--REDEF
OC_MSGBUFFER2.MSGID
      1017**DCL      1018--REDEF
OC_MSGBUFFER2.WSN
      1024**DCL      1025--REDEF
OC_PARAM
      1032**DCL      1032--REDEF
OC_QUEUE.PARMC
      1031**DCL      1031--REDEF
OPENREAD
      1319**DCL      1528<>CALL
OPENREAD.ACSVEH_
      1321**DCL      1322--REDEF
OPENREAD.ALTKEYS_
      1327**DCL      1328--REDEF    1328--REDEF
OPENREAD.HDR_
      1326**DCL      1327--REDEF
OPENREAD.TAB_
      1325**DCL      1326--REDEF
OPENREAD.UHL_
      1319**DCL      1320--REDEF    1320--REDEF
OPENREAD.V
      1328**DCL      1319--DCLINIT
OPENREAD.V.ASN#
      1338**DCL      1444--DCLINIT
OPENREAD.V.DCB#
      1328**DCL      1527<<ASSIGN
OPENREAD.V.FSN#
      1359**DCL      1359--REDEF    1359--REDEF
OPENREAD.V.RES#
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:57   
      1343**DCL      1444--DCLINIT
OPENREAD.WSN_
      1325**DCL      1325--REDEF
PARM#
      1168**DCL      1499<>CALL     1536<>CALL     1542<>CALL
PARM#.ERROR#
      1170**DCL      1534<<ASSIGN   1540<<ASSIGN
PARM#.MESS#
      1169**DCL      1498<<ASSIGN   1535<<ASSIGN   1541<<ASSIGN
PSN_DATA
      1487**DCL      1468--DCLINIT
RELDCB
      1209**DCL      1553<>CALL
RELDCB.V
      1209**DCL      1209--DCLINIT
RELDCB.V.DCB#
      1209**DCL      1552<<ASSIGN
RELEASE_PSN
      1467**DCL      1515<>CALL     1519<>CALL     1545<>CALL     1549<>CALL
RELEASE_PSN.V
      1469**DCL      1467--DCLINIT
RETDCB
      1161**DCL      1195--DCLINIT  1522<<ASSIGN   1527>>ASSIGN   1529>>ASSIGN   1552>>ASSIGN
SIZE
      1176**DCL      1499<>CALL     1536<>CALL     1542<>CALL
WFID
      1091**DCL      1441--DCLINIT  1504<<ASSIGN
WHO_CARES
      1512**LABEL    1513--CALLALT
WHO_CARES0
      1512**LABEL    1515--CALLALT
WHO_CARES1
      1512**LABEL    1519--CALLALT
WHO_CARES3
      1550**LABEL    1549--CALLALT
WHO_CARES4
PL6.E3A0      #002=OCR$SREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:06 Page:58   
      1541**LABEL    1545--CALLALT
WHO_CARES_2
      1552**LABEL    1553--CALLALT
XACCT
      1401**DCL      1324--DCLINIT  1442--DCLINIT
XACCT.ACCT#
      1401**DCL      1525>>IF       1525<<ASSIGN   1526>>IF       1526<<ASSIGN
XCLOSE
      1235**DCL      1513<>CALL
XCLOSE.SN_
      1235**DCL      1235--REDEF
XCLOSE.UTL_
      1236**DCL      1236--REDEF
XCLOSE.V
      1240**DCL      1235--DCLINIT
XCLOSE.V.DCB#
      1241**DCL      1512<<ASSIGN
XCLOSE.V.EXPIRE#
      1250**DCL      1250--REDEF
XCLOSE.V.TYPE#
      1248**DCL      1248--REDEF
XCLOSE.V.XTNSIZE#
      1245**DCL      1245--REDEF    1247--REDEF
XFID
      1441**DCL      1524<>CALL
XFID.V
      1445**DCL      1441--DCLINIT
XNAME
      1388**DCL      1320--DCLINIT  1442--DCLINIT
XPASS
      1427**DCL      1321--DCLINIT  1443--DCLINIT
XSN
      1414**DCL      1319--DCLINIT  1443--DCLINIT

PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:59   
      222        1        /*M* OCR$CREAD KEYINs routine to handle cancel READ's */
      223        2        /*T***********************************************************/
      224        3        /*T*                                                         */
      225        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      226        5        /*T*                                                         */
      227        6        /*T***********************************************************/
      228        7        %SET LISTSUB='1'B;
      229        8                                                /**/
      230        9                                                /**/
      231       10        OCR$CREAD: PROC(INDEX_);
      232       11                                                /**/
      233       12                                                /**/
      234       13        %INCLUDE CP_6;
      235       94        %INCLUDE OC_SUBS_C;
      236      825        %INCLUDE OCI_SUBS_C;
      237      923        %INCLUDE OC_DAT_R;
      238     1084                                                /**/
      239     1085        %F$DCB;
      240     1142                                                /**/
      241     1143    1   DCL SIZE(0:3) UBIN BYTE UNAL STATIC INIT(1,1,1,1);
      242     1144    1   DCL MSG# UBIN HALF UNAL STATIC ;
      243     1145    1   DCL PARM# UBIN BYTE UNAL;
      244     1146    1   DCL NP UBIN BYTE STATIC INIT(1);
      245     1147    1   DCL INDEX_ UBIN WORD;
      246     1148                                                /**/
      247     1149    1   DCL OCO$IWRITE ENTRY(8);
      248     1150                                                /**/
      249     1151        %FPT_RELDCB (FPTN=RELEASE_DCB);
      250     1165        %FPT_CLOSE (FPTN=READ_CLOSE,DISP=SAVE);
      251     1207                                                /**/
      252     1208        %FPT_RESCTL (FPTN=RELEASE_PSN,
      253     1209                       RPSN=PSN_DATA);
      254     1226                                                /**/
      255     1227        %VLP_RPSN (FPTN=PSN_DATA,
      256     1228                       N=20,
      257     1229                       DISP=REM);
      258     1244                                                /**/
PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:60   
      259     1245                                                /**/
      260     1246        %EJECT;
PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:61   
      261     1247        /*
      262     1248             BEGIN OCR$CREAD MAIN
      263     1249                                                     */
      264     1250    1        IF OC_CONSOLE.X_DCBNUM(INDEX_) = 0
      265     1251    2        THEN DO;
      266     1252    2             MSG# = 371 /*XEQ_MSG#*/;
      267     1253    2             PARM# = 4;
      268     1254    2             CALL OCO$IWRITE(OC_CADDR,MSG#,
      269     1255    2                  NP,SIZE,PARM#,0,OC_CONSOLE.WSN(INDEX_),0);
      270     1256    2             RETURN;
      271     1257    2           END;
      272     1258    1        READ_CLOSE.V.DCB# = OC_CONSOLE.X_DCBNUM(INDEX_);
      273     1259    1        CALL M$CLOSE (READ_CLOSE) ALTRET (WHO_CARES);
      274     1260    1   WHO_CARES: ;
      275     1261    1        CALL M$DISPRES (RELEASE_PSN)
      276     1262    1             ALTRET (WHO_CARES0);
      277     1263                                                /**/
      278     1264    1   WHO_CARES0:;
      279     1265    1        CALL M$RELRES (RELEASE_PSN)
      280     1266    1             ALTRET (WHO_CARES1);
      281     1267    1   WHO_CARES1:;
      282     1268    1        RELEASE_DCB.V.DCB# = OC_CONSOLE.X_DCBNUM(INDEX_);
      283     1269    1        CALL M$RELDCB (RELEASE_DCB) ALTRET (WHO_CARE2);
      284     1270    1   WHO_CARE2:;
      285     1271    1        OC_CONSOLE.X_DCBNUM(INDEX_) = 0;
      286     1272    1        MSG# = 371 /*XEQ_MSG#*/;
      287     1273    1        PARM# = 5;
      288     1274    1        CALL OCO$IWRITE(OC_CADDR,MSG#,
      289     1275    1             NP,SIZE,PARM#,0,OC_CONSOLE.WSN(INDEX_),0);
      290     1276    1        RETURN;
      291     1277    1   END OCR$CREAD;

PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:62   
--  Include file information  --

   OC$MESSHD_C.:E05TOU  is referenced.
   OC_DAT_R.:E05TOU  cannot be made into a system file and is referenced.
   OCI_SUBS_C.:E05TOU  is referenced.
   OC_SUBS_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure OCR$CREAD.

   Procedure OCR$CREAD requires 87 words for executable code.
   Procedure OCR$CREAD requires 14 words of local(AUTO) storage.

    No errors detected in file OCR$READ.:E05TSI    .

PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:63   

 Object Unit name= OCR$CREAD                                  File name= OCR$READ.:E05TOU
 UTS= JUL 30 '97 04:07:02.60 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none   142    216  OCR$CREAD
    2   Proc  even  none    87    127  OCR$CREAD
    3  RoData even  none     6      6  OCR$CREAD

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes            yes      Std        1  OCR$CREAD

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       8 OCO$IWRITE
                       nStd      0 X66_AUTO_1
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:64   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  OC_INTMSG                             OC_MESSBUF
     OC_MSGBUFFER                          OC_PARAM                              OC_CONSOLE$
     OC_CADDR                              OC_DIR                                OC_INTBIT
     OC_MASK                               B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:65   


      222        1        /*M* OCR$CREAD KEYINs routine to handle cancel READ's */
      223        2        /*T***********************************************************/
      224        3        /*T*                                                         */
      225        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      226        5        /*T*                                                         */
      227        6        /*T***********************************************************/
      228        7        %SET LISTSUB='1'B;
      229        8                                                /**/
      230        9                                                /**/
      231       10        OCR$CREAD: PROC(INDEX_);

     10  2 000000   000000 700200 xent  OCR$CREAD    TSX0  ! X66_AUTO_1
         2 000001   000016 000001                    ZERO    14,1

      232       11                                                /**/
      233       12                                                /**/
      234       13        %INCLUDE CP_6;
      235       94        %INCLUDE OC_SUBS_C;
      236      825        %INCLUDE OCI_SUBS_C;
      237      923        %INCLUDE OC_DAT_R;
      238     1084                                                /**/
      239     1085        %F$DCB;
      240     1142                                                /**/
      241     1143    1   DCL SIZE(0:3) UBIN BYTE UNAL STATIC INIT(1,1,1,1);
      242     1144    1   DCL MSG# UBIN HALF UNAL STATIC ;
      243     1145    1   DCL PARM# UBIN BYTE UNAL;
      244     1146    1   DCL NP UBIN BYTE STATIC INIT(1);
      245     1147    1   DCL INDEX_ UBIN WORD;
      246     1148                                                /**/
      247     1149    1   DCL OCO$IWRITE ENTRY(8);
      248     1150                                                /**/
      249     1151        %FPT_RELDCB (FPTN=RELEASE_DCB);
      250     1165        %FPT_CLOSE (FPTN=READ_CLOSE,DISP=SAVE);
      251     1207                                                /**/
      252     1208        %FPT_RESCTL (FPTN=RELEASE_PSN,
      253     1209                       RPSN=PSN_DATA);
PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:66   
      254     1226                                                /**/
      255     1227        %VLP_RPSN (FPTN=PSN_DATA,
      256     1228                       N=20,
      257     1229                       DISP=REM);
      258     1244                                                /**/
      259     1245                                                /**/
      260     1246        %EJECT;
PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:67   
      261     1247        /*
      262     1248             BEGIN OCR$CREAD MAIN
      263     1249                                                     */
      264     1250    1        IF OC_CONSOLE.X_DCBNUM(INDEX_) = 0

   1250  2 000002   200003 470500                    LDP0    @INDEX_,,AUTO
         2 000003   000000 236100                    LDQ     0,,PR0
         2 000004   000076 402007                    MPY     62,DL
         2 000005   000000 471400 xsym               LDP1    OC_CONSOLE$
         2 000006   100015 720106                    LXL0    13,QL,PR1
         2 000007   000041 601000 2                  TNZ     s:1258

      265     1251    2        THEN DO;

      266     1252    2             MSG# = 371 /*XEQ_MSG#*/;

   1252  2 000010   000563 221003                    LDX1    371,DU
         2 000011   000001 741000 1                  STX1    MSG#

      267     1253    2             PARM# = 4;

   1253  2 000012   004000 236003                    LDQ     2048,DU
         2 000013   200004 756100                    STQ     PARM#,,AUTO

      268     1254    2             CALL OCO$IWRITE(OC_CADDR,MSG#,

   1254  2 000014   000000 236100                    LDQ     0,,PR0
         2 000015   000076 402007                    MPY     62,DL
         2 000016   000000 620006                    EAX0    0,QL
         2 000017   000000 236000 3                  LDQ     0
         2 000020   200015 756100                    STQ     PARM#+9,,AUTO
         2 000021   000004 636010                    EAQ     4,X0
         2 000022   000000 036000 xsym               ADLQ    OC_CONSOLE$
         2 000023   200014 756100                    STQ     PARM#+8,,AUTO
         2 000024   000000 236000 3                  LDQ     0
         2 000025   200013 756100                    STQ     PARM#+7,,AUTO
         2 000026   200004 633500                    EPPR3   PARM#,,AUTO
PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:68   
         2 000027   200012 453500                    STP3    PARM#+6,,AUTO
         2 000030   000002 237000 3                  LDAQ    2
         2 000031   200010 757100                    STAQ    PARM#+4,,AUTO
         2 000032   000004 237000 3                  LDAQ    4
         2 000033   200006 757100                    STAQ    PARM#+2,,AUTO
         2 000034   200006 630500                    EPPR0   PARM#+2,,AUTO
         2 000035   000026 631400 xsym               EPPR1   B_VECTNIL+22
         2 000036   000000 701000 xent               TSX1    OCO$IWRITE
         2 000037   000000 011000                    NOP     0

      269     1255    2                  NP,SIZE,PARM#,0,OC_CONSOLE.WSN(INDEX_),0);
      270     1256    2             RETURN;

   1256  2 000040   000000 702200 xent               TSX2  ! X66_ARET

      271     1257    2           END;
      272     1258    1        READ_CLOSE.V.DCB# = OC_CONSOLE.X_DCBNUM(INDEX_);

   1258  2 000041   000042 740000 1                  STX0    READ_CLOSE+26

      273     1259    1        CALL M$CLOSE (READ_CLOSE) ALTRET (WHO_CARES);

   1259  2 000042   000010 630400 1                  EPPR0   READ_CLOSE
         2 000043   450001 713400                    CLIMB   alt,close
         2 000044   406000 401760                    pmme    nvectors=13
         2 000045   000046 702000 2                  TSX2    WHO_CARES

   1258  2 000046                       WHO_CARES    null
      274     1260    1   WHO_CARES: ;
      275     1261    1        CALL M$DISPRES (RELEASE_PSN)

   1261  2 000046   000046 630400 1                  EPPR0   RELEASE_PSN
         2 000047   550002 713400                    CLIMB   alt,+53250
         2 000050   402400 401760                    pmme    nvectors=6
         2 000051   000052 702000 2                  TSX2    WHO_CARES0

   1258  2 000052                       WHO_CARES0   null
PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:69   
      276     1262    1             ALTRET (WHO_CARES0);
      277     1263                                                /**/
      278     1264    1   WHO_CARES0:;
      279     1265    1        CALL M$RELRES (RELEASE_PSN)

   1265  2 000052   000046 630400 1                  EPPR0   RELEASE_PSN
         2 000053   550003 713400                    CLIMB   alt,+53251
         2 000054   402400 401760                    pmme    nvectors=6
         2 000055   000056 702000 2                  TSX2    WHO_CARES1

   1258  2 000056                       WHO_CARES1   null
      280     1266    1             ALTRET (WHO_CARES1);
      281     1267    1   WHO_CARES1:;
      282     1268    1        RELEASE_DCB.V.DCB# = OC_CONSOLE.X_DCBNUM(INDEX_);

   1268  2 000056   200003 470500                    LDP0    @INDEX_,,AUTO
         2 000057   000000 236100                    LDQ     0,,PR0
         2 000060   000076 402007                    MPY     62,DL
         2 000061   000000 471400 xsym               LDP1    OC_CONSOLE$
         2 000062   100015 720106                    LXL0    13,QL,PR1
         2 000063   000006 740000 1                  STX0    RELEASE_DCB+2

      283     1269    1        CALL M$RELDCB (RELEASE_DCB) ALTRET (WHO_CARE2);

   1269  2 000064   000004 630400 1                  EPPR0   RELEASE_DCB
         2 000065   460003 713400                    CLIMB   alt,+24579
         2 000066   400000 401760                    pmme    nvectors=1
         2 000067   000070 702000 2                  TSX2    WHO_CARE2

   1268  2 000070                       WHO_CARE2    null
      284     1270    1   WHO_CARE2:;
      285     1271    1        OC_CONSOLE.X_DCBNUM(INDEX_) = 0;

   1271  2 000070   200003 470500                    LDP0    @INDEX_,,AUTO
         2 000071   000000 236100                    LDQ     0,,PR0
         2 000072   000076 402007                    MPY     62,DL
         2 000073   000000 220003                    LDX0    0,DU
PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:70   
         2 000074   000000 471400 xsym               LDP1    OC_CONSOLE$
         2 000075   100015 440106                    SXL0    13,QL,PR1

      286     1272    1        MSG# = 371 /*XEQ_MSG#*/;

   1272  2 000076   000563 221003                    LDX1    371,DU
         2 000077   000001 741000 1                  STX1    MSG#

      287     1273    1        PARM# = 5;

   1273  2 000100   005000 236003                    LDQ     2560,DU
         2 000101   200004 756100                    STQ     PARM#,,AUTO

      288     1274    1        CALL OCO$IWRITE(OC_CADDR,MSG#,

   1274  2 000102   000000 236100                    LDQ     0,,PR0
         2 000103   000076 402007                    MPY     62,DL
         2 000104   000000 622006                    EAX2    0,QL
         2 000105   000000 236000 3                  LDQ     0
         2 000106   200015 756100                    STQ     PARM#+9,,AUTO
         2 000107   000004 636012                    EAQ     4,X2
         2 000110   000000 036000 xsym               ADLQ    OC_CONSOLE$
         2 000111   200014 756100                    STQ     PARM#+8,,AUTO
         2 000112   000000 236000 3                  LDQ     0
         2 000113   200013 756100                    STQ     PARM#+7,,AUTO
         2 000114   200004 631500                    EPPR1   PARM#,,AUTO
         2 000115   200012 451500                    STP1    PARM#+6,,AUTO
         2 000116   000002 237000 3                  LDAQ    2
         2 000117   200010 757100                    STAQ    PARM#+4,,AUTO
         2 000120   000004 237000 3                  LDAQ    4
         2 000121   200006 757100                    STAQ    PARM#+2,,AUTO
         2 000122   200006 630500                    EPPR0   PARM#+2,,AUTO
         2 000123   000026 631400 xsym               EPPR1   B_VECTNIL+22
         2 000124   000000 701000 xent               TSX1    OCO$IWRITE
         2 000125   000000 011000                    NOP     0

      289     1275    1             NP,SIZE,PARM#,0,OC_CONSOLE.WSN(INDEX_),0);
PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:71   
      290     1276    1        RETURN;

   1276  2 000126   000000 702200 xent               TSX2  ! X66_ARET
      291     1277    1   END OCR$CREAD;

PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:72   
--  Include file information  --

   OC$MESSHD_C.:E05TOU  is referenced.
   OC_DAT_R.:E05TOU  cannot be made into a system file and is referenced.
   OCI_SUBS_C.:E05TOU  is referenced.
   OC_SUBS_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure OCR$CREAD.
PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:73   

 **** Variables and constants ****

  ****  Section 001  Data  OCR$CREAD

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     1-0-0/b UBIN(18)    r     1 MSG#                       2-0-0/w UBIN(9)     r     1 NP
    70-0-0/d STRC(3096)  r     1 PSN_DATA                  10-0-0/d STRC(1080)  r     1 READ_CLOSE
     4-0-0/d STRC(144)   r     1 RELEASE_DCB               46-0-0/d STRC(648)   r     1 RELEASE_PSN
     0-0-0/b UBIN(9)     r     1 SIZE(0:3)

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @INDEX_                   *0-0-0/w UBIN        r     1 INDEX_
     4-0-0/b UBIN(9)     r     1 PARM#

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w BIT (18)    r     1 OC_CADDR                   0-0-0/w PTR         r     1 OC_CONSOLE$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d ASTR(3528)  r     1 F$DCB
     0-0-0/w STRC(2205)  r     1 OC_CONSOLE(0:0)

PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:74   

   Procedure OCR$CREAD requires 87 words for executable code.
   Procedure OCR$CREAD requires 14 words of local(AUTO) storage.

    No errors detected in file OCR$READ.:E05TSI    .
PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:75   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:76   
          MINI XREF LISTING

F$DCB.ACTPOS
      1118**DCL      1118--REDEF
F$DCB.ARS#
      1092**DCL      1092--REDEF
F$DCB.ATTR
      1111**DCL      1112--REDEF
F$DCB.BORROW
      1126**DCL      1126--REDEF    1126--REDEF    1126--REDEF
F$DCB.DCBNAME.L
      1140**DCL      1140--IMP-SIZ
F$DCB.EOMCHAR#
      1096**DCL      1096--REDEF
F$DCB.FLDID
      1121**DCL      1121--REDEF
F$DCB.FORM$
      1115**DCL      1115--REDEF
F$DCB.FSECT
      1131**DCL      1131--REDEF
F$DCB.FSN#
      1108**DCL      1108--REDEF    1108--REDEF    1109--REDEF
F$DCB.HEADER$
      1114**DCL      1114--REDEF
F$DCB.IXTNSIZE#
      1112**DCL      1112--REDEF
F$DCB.LASTSTA$
      1101**DCL      1101--REDEF
F$DCB.LVL
      1127**DCL      1127--REDEF
F$DCB.NAME#.C
      1102**DCL      1102--REDEF
F$DCB.NOEOF
      1124**DCL      1124--REDEF
PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:77   
F$DCB.NRECS#
      1113**DCL      1113--REDEF
F$DCB.NRECX
      1132**DCL      1132--REDEF
F$DCB.OHDR
      1124**DCL      1124--REDEF
F$DCB.ORG#
      1107**DCL      1107--REDEF
F$DCB.PRECNO
      1130**DCL      1130--REDEF
F$DCB.RCSZ
      1136**DCL      1136--REDEF
F$DCB.RES#
      1103**DCL      1103--REDEF
F$DCB.SETX
      1115**DCL      1115--REDEF
F$DCB.TAB$
      1115**DCL      1115--REDEF
F$DCB.TDA
      1129**DCL      1130--REDEF
F$DCB.WSN#
      1103**DCL      1103--REDEF
INDEX_
      1147**DCL        10--PROC     1250>>IF       1254>>CALL     1258>>ASSIGN   1268>>ASSIGN   1271>>ASSIGN
      1274>>CALL
M$CLOSE
        22**DCL-ENT  1259--CALL
M$DISPRES
        29**DCL-ENT  1261--CALL
M$RELDCB
        28**DCL-ENT  1269--CALL
M$RELRES
        29**DCL-ENT  1265--CALL
MSG#
      1144**DCL      1252<<ASSIGN   1254<>CALL     1272<<ASSIGN   1274<>CALL
NP
PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:78   
      1146**DCL      1254<>CALL     1274<>CALL
OCO$IWRITE
      1149**DCL-ENT  1254--CALL     1274--CALL
OC_CADDR
      1076**DCL      1254<>CALL     1274<>CALL
OC_CONSOLE.ATTR
      1037**DCL      1037--REDEF
OC_CONSOLE.ATTRO
      1038**DCL      1038--REDEF
OC_CONSOLE.CID
      1036**DCL      1037--REDEF
OC_CONSOLE.STATION
      1035**DCL      1035--REDEF
OC_CONSOLE.WSN
      1036**DCL      1254<>CALL     1274<>CALL
OC_CONSOLE.X_DCBNUM
      1039**DCL      1250>>IF       1258>>ASSIGN   1268>>ASSIGN   1271<<ASSIGN
OC_CONSOLE$
      1034**DCL      1035--IMP-PTR  1250>>IF       1254>>CALL     1258>>ASSIGN   1268>>ASSIGN   1271>>ASSIGN
      1274>>CALL
OC_DIR
      1077**DCL      1077--REDEF
OC_INTBIT
      1077**DCL      1078--REDEF
OC_INTMSG
       954**DCL       967--REDEF
OC_INTMSG.FLAGS
       961**DCL       962--REDEF
OC_INTMSG.MESS
       967**DCL       967--REDEF
OC_INTMSG.MSGID
       957**DCL       958--REDEF
OC_INTMSG.WSN
       964**DCL       965--REDEF
OC_MASK
      1078**DCL      1078--REDEF
PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:79   
OC_MESSBUF
       969**DCL       984--REDEF     998--REDEF
OC_MESSBUF.FLAGS
       976**DCL       977--REDEF
OC_MESSBUF.MESS
       982**DCL       982--REDEF
OC_MESSBUF.MSGID
       972**DCL       973--REDEF
OC_MESSBUF.WSN
       979**DCL       980--REDEF
OC_MESSBUF1.FLAGS
       991**DCL       992--REDEF
OC_MESSBUF1.LEN
       997**DCL       997--REDEF
OC_MESSBUF1.MSGID
       987**DCL       988--REDEF
OC_MESSBUF1.WSN
       994**DCL       995--REDEF
OC_MSGBUFFER
      1000**DCL      1015--REDEF
OC_MSGBUFFER.FLAGS
      1007**DCL      1008--REDEF
OC_MSGBUFFER.MESS
      1013**DCL      1013--REDEF
OC_MSGBUFFER.MSGID
      1003**DCL      1004--REDEF
OC_MSGBUFFER.WSN
      1010**DCL      1011--REDEF
OC_MSGBUFFER2.FLAGS
      1022**DCL      1023--REDEF
OC_MSGBUFFER2.MSGID
      1018**DCL      1019--REDEF
OC_MSGBUFFER2.WSN
      1025**DCL      1026--REDEF
OC_PARAM
      1033**DCL      1033--REDEF
PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:80   
OC_QUEUE.PARMC
      1032**DCL      1032--REDEF
PARM#
      1145**DCL      1253<<ASSIGN   1254<>CALL     1273<<ASSIGN   1274<>CALL
PSN_DATA
      1240**DCL      1221--DCLINIT
READ_CLOSE
      1188**DCL      1259<>CALL
READ_CLOSE.SN_
      1188**DCL      1188--REDEF
READ_CLOSE.UTL_
      1189**DCL      1189--REDEF
READ_CLOSE.V
      1193**DCL      1188--DCLINIT
READ_CLOSE.V.DCB#
      1194**DCL      1258<<ASSIGN
READ_CLOSE.V.EXPIRE#
      1203**DCL      1203--REDEF
READ_CLOSE.V.TYPE#
      1201**DCL      1201--REDEF
READ_CLOSE.V.XTNSIZE#
      1198**DCL      1198--REDEF    1200--REDEF
RELEASE_DCB
      1162**DCL      1269<>CALL
RELEASE_DCB.V
      1162**DCL      1162--DCLINIT
RELEASE_DCB.V.DCB#
      1162**DCL      1268<<ASSIGN
RELEASE_PSN
      1220**DCL      1261<>CALL     1265<>CALL
RELEASE_PSN.V
      1222**DCL      1220--DCLINIT
SIZE
      1143**DCL      1254<>CALL     1274<>CALL
WHO_CARE2
      1268**LABEL    1269--CALLALT
PL6.E3A0      #003=OCR$CREAD File=OCR$READ.:E05TSI                               WED 07/30/97 04:07 Page:81   
WHO_CARES
      1258**LABEL    1259--CALLALT
WHO_CARES0
      1258**LABEL    1261--CALLALT
WHO_CARES1
      1258**LABEL    1265--CALLALT
