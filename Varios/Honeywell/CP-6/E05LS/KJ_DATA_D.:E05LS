VERSION E05

PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:1    
        1        1        /*M* KJ_DATA_D - FEI static data and based structures. */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        KJ_DATA_D: PROC;
        8        8
        9        9        %INCLUDE KJ_FCNS_C;
       10       36        %INCLUDE LCP_6;
       11     4315        %INCLUDE KNH_MACRO_C;
       12     4598        %INCLUDE GH_HARDWARE_M;
       13     4696        %INCLUDE KL_MACRO_C;
       14     8048        %INCLUDE KJ_MACRO_M;
       15     8485        %INCLUDE KH$STT;
       16     8515        %INCLUDE KL_AFCN_C;
       17     8616        %INCLUDE K_SCODE_C ;
       18     8701
       19     8702
       20     8703
       21     8704        /* Equates for mode */
       22     8705        %EQU KJ_MODE_ASCII = 1;
       23     8706        %EQU KJ_MODE_BCD = 2;
       24     8707        %EQU KJ_MODE_BIN = 3;
       25     8708
       26     8709
       27     8710
       28     8711
       29     8712
       30     8713
       31     8714        /* Subs for coupler function codes */
       32     8715        %EQU KJ_IO_OUTCONT = 1;
       33     8716        %EQU KJ_IO_RDINTCONT = 2;               /* Read interupt control              */
       34     8717        %EQU KJ_IO_WRINTCONT = 3;               /* Write interupt control             */
       35     8718        %EQU KJ_IO_RDTASK = 6;                  /* Read task register                 */
       36     8719        %EQU KJ_IO_WRTASK = 7;                  /* Write task register                */
       37     8720        %EQU KJ_IO_DCWLIST = 9;                 /* DCW list Iold                      */
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:2    
       38     8721        %EQU KJ_IO_LDBARR = 11;                 /* Load barricade                     */
       39     8722        %EQU KJ_IO_RDDCWOFF = 12;               /* Read DCW offset                    */
       40     8723        %EQU KJ_IO_RDCONFA = 16;                /* Read configuration register A      */
       41     8724        %EQU KJ_IO_WRCONFA = 17;                /* Write configuration register A     */
       42     8725        %EQU KJ_IO_RDSTATUS1 = 24;              /* Read status register 1             */
       43     8726        %EQU KJ_IO_RDSTATUS2 = 26;              /* Read status register 2             */
       44     8727        %EQU KJ_IO_RDDVID = 38;                 /* Read device ID                     */
       45     8728        %EQU KJ_IO_DMPSCRTCH = 25;              /* Dump scratch pad                   */
       46     8729        %EQU KJ_IO_RDLCN = 18;                  /* Read LCN                           */
       47     8730
       48     8731        /* Function that need to be directed to channel 2 or 3 */
       49     8732        %EQU KJ_IO_INTL66 = 3;                  /* Interupt L66                       */
       50     8733
       51     8734        /* Function codes for DCW's */
       52     8735        %EQU KJ_DCW_DISC = 48;                  /* Disconnect                         */
       53     8736        %EQU KJ_DCW_DISCINT = 56;               /* Disconnect and interupt            */
       54     8737        %EQU KJ_DCW_INTL6 = 57;                 /* Interupt L6                        */
       55     8738        %EQU KJ_DCW_JUMP = 58;                  /* Jump                               */
       56     8739        %EQU KJ_DCW_INTL66 = 59;                /* Interupt L66                       */
       57     8740        %EQU KJ_DCW_STCNFSTS = 60;              /* Store configuration status         */
       58     8741        %EQU KJ_DCW_DTL6L66 = 61;               /* Data transfer L6 to L66            */
       59     8742        %EQU KJ_DCW_DTL66L6 = 62;               /* Data transfer L66 to L6            */
       60     8743        %EQU KJ_DCW_RDCLROR = 53;               /* Read & clear L66; or to store L6   */
       61     8744        %EQU KJ_DCW_NOP = 51;                   /* Nop                                */
       62     8745        %EQU KJ_DCW_STALL = 52;                 /* Stall                              */
       63     8746
       64     8747        /* Equates for interupt level into the HOST */
       65     8748        %EQU KJ_INTLVL_INIT = 3;      /* Interupt to tell host FEI is initializing    */
       66     8749        %EQU KJ_INTLVL_DATA = 7;      /* Interupt level to inform host there is data  */
       67     8750        %EQU KJ_INTLVL_ERR = 3;  /* Interupt level to inform host there is a probleM  */
       68     8751        /* Subs for status bits in status 1 */
       69     8752        %EQU KJ_STATUS_DR = '1000000000000000'B; /* Device ready                      */
       70     8753        %EQU KJ_STATUS_ATT = '0100000000000000'B; /* Attention                        */
       71     8754        %EQU KJ_STATUS_ESE = '0001000000000000'B; /* External system error            */
       72     8755        %EQU KJ_STATUS_ESP = '0000100000000000'B; /* External system parity           */
       73     8756        %EQU KJ_STATUS_CNO = '0000010000000000'B; /* Central non-operational          */
       74     8757        %EQU KJ_STATUS_CSP = '0000001000000000'B; /* Central system parity            */
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:3    
       75     8758        %EQU KJ_STATUS_CSR = '0000000100000000'B; /* Central system read              */
       76     8759        %EQU KJ_STATUS_CSW = '0000000010000000'B; /* Central system write             */
       77     8760        %EQU KJ_STATUS_COP = '0000000001000000'B; /* Central operational              */
       78     8761        %EQU KJ_STATUS_TT = '0000000000100000'B; /* Transaction timer                 */
       79     8762        %EQU KJ_STATUS_W2NZ = '0000000000010000'B; /* word 2 nonzero                  */
       80     8763        %EQU KJ_STATUS_MY = '0000000000001000'B; /* Memory yellow                     */
       81     8764        %EQU KJ_STATUS_NER = '0000000000000100'B; /* Nonexistent resource             */
       82     8765        %EQU KJ_STATUS_L6B = '0000000000000010'B; /* Level 6 bus parity               */
       83     8766        %EQU KJ_STATUS_MR = '0000000000000001'B; /* Memory read                       */
       84     8767
       85     8768        /* Status word 2 equates */
       86     8769        %EQU KJ_STATUS2_BV = '1000000000000000'B; /* Barricade violation              */
       87     8770        %EQU KJ_STATUS2_CWE = '0100000000000000'B; /* Control word exhaust            */
       88     8771        %EQU KJ_STATUS2_IFC = '0010000000000000'B; /* Illegal function code           */
       89     8772        %EQU KJ_STATUS2_IDCW = '0001000000000000'B; /* Illegal DCW                    */
       90     8773        %EQU KJ_STATUS2_IPCW = '0000100000000000'B; /* Illegal PCW                    */
       91     8774        %EQU KJ_STATUS2_HF6 = '0000010000000000'B; /* Hardware fault 6                */
       92     8775        %EQU KJ_STATUS2_HF66 = '0000001000000000'B; /* Hardware fault 66              */
       93     8776        %EQU KJ_STATUS2_HFDCW = '0000000100000000'B; /* Hardware fault DCW            */
       94     8777        %EQU KJ_STATUS2_STBT = '0000000010000000'B; /* Stored boot                    */
       95     8778        %EQU KJ_STATUS2_MSB = '0000000001000000'B; /* MSB                             */
       96     8779
       97     8780        %EJECT;
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:4    
       98     8781        /* DCL for all of KJ */
       99     8782
      100     8783    1   DCL M$CQ DCB;
      101     8784
      102     8785        %KJ$DCW (NAME=KJ_DCW_DTL66L6,STCLASS="CONSTANT SYMDEF",OPERATION=DATAL66_L6,MODE=
              8785            ASCII);
      103     8825        %KJ$DCW (NAME=KJ_DCW_DTL6L66,STCLASS="CONSTANT SYMDEF",OPERATION=DATAL6_L66,MODE=
              8825            ASCII);
      104     8865        %KJ$DCW (NAME=KJ_DCW_JUMP,STCLASS="STATIC SYMDEF",OPERATION=JUMP);
      105     8905        %KJ$DCW;
      106     8945
      107     8946        %KJ$TASK (NAME=KJ_TASK_INIT,
      108     8947                  L66TESTINTLVL=%KJ_INTLVL_INIT,
      109     8948                  L66SPECINTLVL=%KJ_INTLVL_ERR,
      110     8949                  STCLASS="CONSTANT SYMDEF");
      111     8969
      112     8970        %KJ$CONFIG (NAME=KJ_CONFIG_INIT,
      113     8971                            STCLASS = "STATIC SYMDEF",
      114     8972                            FEPBAR=YES,
      115     8973                            OPL=YES,
      116     8974                            TEST=NO,
      117     8975                            L6SPECINTLVL=52);
      118     8997
      119     8998        %KJ$CONFIG (NAME=KJ_CONFIG_INIT_ADP,
      120     8999                            STCLASS = "STATIC SYMDEF",
      121     9000                            ADPHOST=YES,
      122     9001                            FEPBAR=YES,
      123     9002                            OPL=YES,
      124     9003                            TEST=NO,
      125     9004                            L6SPECINTLVL=52);
      126     9026
      127     9027        %KJ$OUTCONT (NAME=KJ_INITCPLR,
      128     9028                       STCLASS="CONSTANT SYMDEF",
      129     9029                       INITIALIZE=YES);
      130     9047
      131     9048        %KJ$INTCTL  (NAME=KJ_INTCONT_INIT,
      132     9049                       STCLASS="STATIC SYMDEF",
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:5    
      133     9050                       CPUCHAN=0,
      134     9051                       L6TERMINTLVL=52);
      135     9068
      136     9069        %EJECT;
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:6    
      137     9070        /* Context for the coupler */
      138     9071    1   DCL G$HAND_Q$ PTR SYMREF;
      139     9072    1   DCL 1 KJ_CTX$ PTR STATIC SYMDEF;
      140     9073    1   DCL 1 KJ_SIZE UBIN(32) STATIC SYMDEF;
      141     9074
      142     9075
      143     9076
      144     9077        /*F* NAME: KJ$CTX
      145     9078
      146     9079        The COUPLER's Context Block is maintained
      147     9080        in the context area of the Circular Queue
      148     9081        Header.
      149     9082        */
      150     9083
      151     9084    1   DCL 1 KJ$CTX BASED (KJ_CTX$),
      152     9085    1         2 STATE UBIN,
      153     9086        /* Equates for the state of the coupler */
      154     9087        %EQU KJ_STATE_MASKED = 1;               /* Coupler is masked                  */
      155     9088        %EQU KJ_STATE_INIT = 2;                 /* Coupler being initialized          */
      156     9089        %EQU KJ_STATE_RUNNING = 3;              /* Coupler running                    */
      157     9090        %EQU KJ_STATE_RECOVERY = 4;             /* Coupler recovery                   */
      158     9091
      159     9092    1         2 CURRENT_FUNCTION UBIN,          /* Current function in progress       */
      160     9093
      161     9094        /* Equates for CURRENT_FUNCTION */
      162     9095        %EQU KJ_CF_NONE = 0;                    /* No function in progress            */
      163     9096        %EQU KJ_CF_INIT = 1;                    /* Init coupler                       */
      164     9097        %EQU KJ_CF_ROCQSIZE = 2;                /* Reading OCQ size                   */
      165     9098        %EQU KJ_CF_RICQSIZE = 3;                /* Reading ICQ size                   */
      166     9099        %EQU KJ_CF_DATA = 5;                    /* Transfering data                   */
      167     9100
      168     9101    1         2 CHAN0 UBIN ,                    /* Coupler chan address               */
      169     9102    1         2 CHAN1 UBIN ,                    /* Coupler chan address               */
      170     9103    1         2 CHAN2 UBIN,                     /* Coupler chan address               */
      171     9104    1         2 STATUS1 BIT(16),                /* Couplers current status            */
      172     9105    1         2 STATUS2 BIT(16),                /* Couplers current status            */
      173     9106    1         2 HOST_NODE UBIN BYTE UNAL,       /* Node number of host                */
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:7    
      174     9107    1         2 FEP_NODE UBIN BYTE UNAL,        /* Node number of fep                 */
      175     9108    1        2 QOS UBIN BYTE UNAL,              /* QOS for connection */
      176     9109    1        2 * UBIN BYTE UNAL,
      177     9110    1         2 FLAGS WALIGNED,
      178     9111    1           3 BUF_FULL BIT(1) UNAL,         /* Buffer contains data               */
      179     9112    1           3 * UBIN(15) UNAL,
      180     9113    1         2 ICQ ALIGNED,
      181     9114    1           3 IPTR UBIN(32),                /* Insert pointer                     */
      182     9115    1           3 * UBIN,                       /* Filler for rest of word            */
      183     9116    1           3 RPTR UBIN(32),                /* Removal pointer                    */
      184     9117    1           3 * UBIN,                       /* Filler for rest of word            */
      185     9118    1           3 SIZE UBIN(32),                /* Queue size                         */
      186     9119    1           3 * UBIN,                       /* Filler for rest of word            */
      187     9120    1              3 LSTIPTR UBIN(32),        /* last icq iptr */
      188     9121    1              3 * UBIN(32),              /*filler for rest of word*/
      189     9122    1           3 OFFSET UBIN(32),              /* Offset to ICQ                      */
      190     9123    1           3 BUF$ PTR,                     /* Pointer to Buffer for ICQ          */
      191     9124    1           3 BUF_SIZE SBIN(32),            /* Size of buffer                     */
      192     9125    1           3 NEW_RPTR UBIN(32),            /* New removal ptr for handerl CQ     */
      193     9126    1         2 OCQ ALIGNED,
      194     9127    1           3 IPTR UBIN(32),                /* Insert pointer                     */
      195     9128    1           3 * UBIN,                       /* Filler for rest of word            */
      196     9129    1           3 RPTR UBIN(32),                /* Removal pointer                    */
      197     9130    1           3 * UBIN,                       /* Filler for rest of word            */
      198     9131    1           3 SIZE UBIN(32),                /* Queue size                         */
      199     9132    1           3 * UBIN,                       /* Filler for rest of word            */
      200     9133    1           3 FLAGS UNAL,
      201     9134    1             4 * BIT(8) UNAL,
      202     9135    1             4 QFULL BIT(1) UNAL,
      203     9136    1             4 * BIT(23) UNAL,
      204     9137    1           3 * UBIN,
      205     9138    1           3 RDSIZE UBIN(32),              /* Size of area read in               */
      206     9139    1           3 BUF$ PTR,                     /* Pointer for OCQ buffer             */
      207     9140    1           3 BUF_SIZE SBIN(32),            /* Size of buffer                     */
      208     9141    1         2 IBUF,                           /* Buffer for internal messages       */
      209     9142    1           3 BUF$ PTR,
      210     9143    1           3 SIZE UBIN,
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:8    
      211     9144    1           3 CSIZE UBIN,                   /* Current size                       */
      212     9145    1         2 IOIP,
      213     9146    1           3 FLAG BIT(1) UNAL,
      214     9147    1           3 * BIT(15) UNAL,
      215     9148    1           3 * (0:1) UBIN WORD,
      216     9149                  %KJ$DCW (LVL=2,LAST=",",NAME="DCWS(0:19)");
      217     9189              %KJ$DCW (NAME="PTR_DCW(0:8)",LVL=2); /* DCWS FOR READING AND WRITING PTRS */
      218     9229
      219     9230        /* Offsets for CQs */
      220     9231    1   DCL KJ_OFF_ICQ_RPTR UBIN(32) STATIC SYMDEF;
      221     9232    1   DCL KJ_OFF_ICQ_IPTR UBIN(32) STATIC SYMDEF;
      222     9233    1   DCL KJ_OFF_ICQ_DATA UBIN(32) STATIC SYMDEF;
      223     9234    1   DCL KJ_OFF_ICQ_LSTIPTR UBIN(32) STATIC SYMDEF;
      224     9235    1   DCL KJ_OFF_OCQ_RPTR UBIN(32) STATIC SYMDEF;
      225     9236    1   DCL KJ_OFF_OCQ_IPTR UBIN(32) STATIC SYMDEF;
      226     9237    1   DCL KJ_OFF_OCQ_DATA UBIN(32) STATIC SYMDEF;
      227     9238    1   DCL KJ_OFF_IOIP UBIN(32) STATIC SYMDEF;
      228     9239    1   DCL KJ_OFF_OCQ_FLAGS UBIN(32) STATIC SYMDEF;
      229     9240    1   DCL KJ_SCQ_OFFSET UBIN(32) STATIC SYMDEF;
      230     9241    1   DCL KJ_RCQ_OFFSET UBIN(32) STATIC SYMDEF;
      231     9242    1   DCL KJ_SCQ$ PTR STATIC SYMDEF;
      232     9243    1   DCL KJ_RCQ$ PTR STATIC SYMDEF;
      233     9244    1   DCL KJ_MSGSLINT UBIN STATIC SYMDEF INIT(0); /* Messages until interupt        */
      234     9245    1   DCL KJ_LDCTX UBIN STATIC SYMDEF INIT(0);
      235     9246    1   DCL KJ_TIME UBIN(32) STATIC SYMDEF INIT(0);
      236     9247    1   DCL KJ_TIME_LEFT UBIN STATIC SYMDEF INIT(0);
      237     9248    1   DCL KJ_DPS8000_FLG UBIN STATIC SYMDEF INIT(0);
      238     9249
      239     9250        /* Hardwired control parameters */
      240     9251    1   DCL 1 KJ_CONTROL STATIC SYMDEF,
      241     9252    1         2 ICQPGS UBIN INIT(16384),        /* Pages for input circular quere     */
      242     9253    1         2 OCQPGS UBIN INIT(16384),        /* Pages for output circular quere    */
      243     9254    1         2 INTPGS UBIN INIT(1),            /* Pages for internal buffer          */
      244     9255    1         2 INTLVL UBIN INIT(50),           /* Interupt level                     */
      245     9256    1         2 CHAN  UBIN INIT(0),             /* Channel                            */
      246     9257    1         2 MSG# UBIN INIT(0),              /* # of messages before a interupt    */
      247     9258    1         2 INTHTIME UBIN INIT (2),             /* Time inbetween host interupts      */
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:9    
      248     9259    1         2 RES CHAR(2) INIT('HL'),
      249     9260    1         2 ATTR BIT(16) INIT ('0'B),
      250     9261    1         2 OCQDBLKSIZ UBIN INIT(2048);
      251     9262
      252     9263        /* Statistics */
      253     9264        %KJ$STT_FEI(NAME=KJ_STATS,STCLASS="STATIC SYMDEF");
      254     9611
      255     9612
      256     9613        /* Offset into the queue header for the pointers */
      257     9614        %EQU KJ_OFFSET_IOIP = 2;                /* Io in progress flag                */
      258     9615        %EQU KJ_OFFSET_NODE = 3;                /* Offset node#s                      */
      259     9616        %EQU KJ_OFFSET_SIZE = 5;                /* Size of queue                      */
      260     9617        %EQU KJ_OFFSET_RPTR = 9;                /* Removal pointer                    */
      261     9618        %EQU KJ_OFFSET_IPTR = 10;               /* Insert pointer                     */
      262     9619        %EQU KJ_OFFSET_FLAGS = 11;              /* Flags                              */
      263     9620        %EQU KJ_OFFSET_DATA = 16;               /* Offset to the data in queue        */
      264     9621        %EQU KJ_OFFSET_LSTIPTR = 13;
      265     9622
      266     9623        %EJECT;
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:10   
      267     9624        /* Constant message definitions */
      268     9625        %KNH$MESS (FPTN=KJ_INIT_MSG,
      269     9626                       FUNCTION=%KN_FCN_INIT,
      270     9627                       FPTSZ="SIZEC(KJ_INIT_MSG.FPT)",
      271     9628                       LAST=",",
      272     9629                       STCLASS="STATIC SYMDEF");
      273     9678        %FPT_CONNECT (FPTN=FPT,
      274     9679                        STCLASS="STATIC SYMDEF",
      275     9680                        TYPE=LINK,
      276     9681                       LVL=2);
      277     9750
      278     9751        %KNH$MESS (FPTN=KJ_TERM_MSG,
      279     9752                       FUNCTION=%KN_FCN_TERM,
      280     9753                       STCLASS="STATIC SYMDEF");
      281     9802
      282     9803        %FPT_WRITE (FPTN=KJ_WRT_INIT,
      283     9804                  DCB=M$CQ,
      284     9805                  BUF=KJ_INIT_MSG,
      285     9806                  STCLASS="CONSTANT SYMDEF");
      286     9830
      287     9831        %FPT_WRITE (FPTN=KJ_WRT_TERM,
      288     9832                  DCB=M$CQ,
      289     9833                  BUF=KJ_TERM_MSG,
      290     9834                  STCLASS="CONSTANT SYMDEF");
      291     9858
      292     9859        %EJECT;
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:11   
      293     9860        /* IOLD FPT for GNS$IOLD */
      294     9861
      295     9862        %GH_IOLD (FPTN=KJ_IOLD_BARR,
      296     9863                       FNC=%KJ_IO_LDBARR,
      297     9864                       STCLASS="STATIC SYMDEF");
      298     9879
      299     9880        %GH_IOLD (FPTN=KJ_IOLD_DCWLIST,
      300     9881                        FNC=%KJ_IO_DCWLIST,
      301     9882                        STCLASS="STATIC SYMDEF");
      302     9897
      303     9898        %GH_IO   (FPTN=KJ_GH_IO_INIT,
      304     9899                  STCLASS="CONSTANT SYMDEF");
      305     9915        %GH_IO    (FPTN=KJ_GH_IO_INTL66,
      306     9916                       FNC=%KJ_IO_INTL66,
      307     9917                       LCTADR=%KJ_INTLVL_DATA,
      308     9918                       STCLASS="STATIC SYMDEF");
      309     9934        %VLP_SCODE (FPTN=CPLR_IO,STCLASS="CONSTANT SYMDEF",ERR#=%S$CPLR_IO,FCG=KJ,MID=F,SEV=
              9934            G_SEV_SCREECH#);
      310     9995        %VLP_SCODE (FPTN=CPLR_SCANSZ,STCLASS="CONSTANT SYMDEF",ERR#=%S$CPLR_SCANSZ,FCG=KJ,
              9995            MID=F,SEV=G_SEV_SCREECH#);
      311    10056        %VLP_SCODE (FPTN=CPLR_BADMSG,STCLASS="CONSTANT SYMDEF",ERR#=%S$CPLR_BADMSG,FCG=KJ,
             10056            MID=F,SEV=G_SEV_SCREECH#);
      312    10117        %VLP_SCODE (FPTN=HOSTABRT,STCLASS="CONSTANT SYMDEF",ERR#=%S$HOST_REQUEST,FCG=KJ,MID=
             10117            F,SEV=G_SEV_SCREECH#);
      313    10178        %VLP_SCODE (FPTN=HOSTTO,STCLASS="CONSTANT SYMDEF",ERR#=%S$HOST_TO,FCG=KJ,MID=F,SEV=
             10178            G_SEV_SCREECH#);
      314    10239        %VLP_SCODE (FPTN=HOSTFLT,STCLASS="CONSTANT SYMDEF",ERR#=%S$HOST_FEPFLT,FCG=KJ,MID=F,
             10239            SEV=G_SEV_SCREECH#);
      315    10300        %VLP_SCODE (FPTN=HOSTOREQ,STCLASS="CONSTANT SYMDEF",ERR#=%S$HOST_OREQ,FCG=KJ,MID=F,
             10300            SEV=G_SEV_SCREECH#);
      316    10361        %VLP_SCODE (FPTN=HOSTBADMSG,STCLASS="CONSTANT SYMDEF",ERR#=%S$HOST_BADMSG,FCG=KJ,MID
             10361            =F,SEV=G_SEV_SCREECH#);
      317    10422    1   END KJ_DATA_D;

PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:12   
--  Include file information  --

   K_SCODE_C.:E05TOU  is referenced.
   KL_AFCN_C.:E05TOU  is referenced.
   KH$STT.:E05TOU  is referenced.
   KJ_MACRO_M.:E05TOU  is referenced.
   KL_MACRO_C.:E05TOU  is referenced.
   GH_HARDWARE_M.:E05TOU  is referenced.
   KNH_MACRO_C.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  is referenced.
   GT_LCP6_M.:E05TOU  is referenced.
   KI_CP6.:E05TOU  is referenced.
   GF_LCP6_M.:E05TOU  is referenced.
   GM_LCP6_M.:E05TOU  is referenced.
   GU_LCP6_M.:E05TOU  is referenced.
   GJ_LCP6_M.:E05TOU  is referenced.
   GH_LCP6_M.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
   KJ_FCNS_C.:E05TOU  is referenced.
      No diagnostics issued in procedure KJ_DATA_D.

   No code generated for procedure KJ_DATA_D .
   Procedure KJ_DATA_D requires 4 words of local(AUTO) storage.

    No errors detected in file KJ_DATA_D.:E05TSI    .

PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:13   

 Object Unit name= KJ_DATA_D                                  File name= KJ_DATA_D.:E05TOU
 UTS= JUL 30 '97 00:45:52.72 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_LCP6_SYSTEM                               Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size HexSiz  Section name
    0   DCB   even  none     0      0  M$CQ
    1  RoData even  UTS     76     4C  KJ_DATA_D
    2   Data  even  none   156     9C  KJ_DATA_D
    3   Proc  even  none     0      0  KJ_DATA_D

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect HexLoc Primary Altret sequence   type   Parms  Name
     3      0   yes            yes     ~proc       0  KJ_DATA_D
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:14   

  ****  Data defs  ****

 Sect HexLoc  Name                           Sect HexLoc  Name
    1      0  KJ_DCW_DTL66L6                     1      6  KJ_DCW_DTL6L66
    2      0  KJ_DCW_JUMP                        1      C  KJ_TASK_INIT
    2      6  KJ_CONFIG_INIT                     2      7  KJ_CONFIG_INIT_ADP
    1      D  KJ_INITCPLR                        2      8  KJ_INTCONT_INIT
    2      9  KJ_CTX$                            2      B  KJ_SIZE
    2      D  KJ_OFF_ICQ_RPTR                    2      F  KJ_OFF_ICQ_IPTR
    2     11  KJ_OFF_ICQ_DATA                    2     13  KJ_OFF_ICQ_LSTIPTR
    2     15  KJ_OFF_OCQ_RPTR                    2     17  KJ_OFF_OCQ_IPTR
    2     19  KJ_OFF_OCQ_DATA                    2     1B  KJ_OFF_IOIP
    2     1D  KJ_OFF_OCQ_FLAGS                   2     1F  KJ_SCQ_OFFSET
    2     21  KJ_RCQ_OFFSET                      2     23  KJ_SCQ$
    2     25  KJ_RCQ$                            2     27  KJ_MSGSLINT
    2     28  KJ_LDCTX                           2     29  KJ_TIME
    2     2B  KJ_TIME_LEFT                       2     2C  KJ_DPS8000_FLG
    2     2D  KJ_CONTROL                         2     37  KJ_STATS
    2     6D  KJ_INIT_MSG                        2     88  KJ_TERM_MSG
    1      E  KJ_WRT_INIT                        1     20  KJ_WRT_TERM
    2     90  KJ_IOLD_BARR                       2     95  KJ_IOLD_DCWLIST
    1     32  KJ_GH_IO_INIT                      2     9A  KJ_GH_IO_INTL66
    1     34  CPLR_IO                            1     37  CPLR_SCANSZ
    1     3A  CPLR_BADMSG                        1     3D  HOSTABRT
    1     40  HOSTTO                             1     43  HOSTFLT
    1     46  HOSTOREQ                           1     49  HOSTBADMSG

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$CQ                             r    G$ROS$
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:15   

        1        1        /*M* KJ_DATA_D - FEI static data and based structures. */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        KJ_DATA_D: PROC;
        8        8
        9        9        %INCLUDE KJ_FCNS_C;
       10       36        %INCLUDE LCP_6;
       11     4315        %INCLUDE KNH_MACRO_C;
       12     4598        %INCLUDE GH_HARDWARE_M;
       13     4696        %INCLUDE KL_MACRO_C;
       14     8048        %INCLUDE KJ_MACRO_M;
       15     8485        %INCLUDE KH$STT;
       16     8515        %INCLUDE KL_AFCN_C;
       17     8616        %INCLUDE K_SCODE_C ;
       18     8701
       19     8702
       20     8703
       21     8704        /* Equates for mode */
       22     8705        %EQU KJ_MODE_ASCII = 1;
       23     8706        %EQU KJ_MODE_BCD = 2;
       24     8707        %EQU KJ_MODE_BIN = 3;
       25     8708
       26     8709
       27     8710
       28     8711
       29     8712
       30     8713
       31     8714        /* Subs for coupler function codes */
       32     8715        %EQU KJ_IO_OUTCONT = 1;
       33     8716        %EQU KJ_IO_RDINTCONT = 2;               /* Read interupt control              */
       34     8717        %EQU KJ_IO_WRINTCONT = 3;               /* Write interupt control             */
       35     8718        %EQU KJ_IO_RDTASK = 6;                  /* Read task register                 */
       36     8719        %EQU KJ_IO_WRTASK = 7;                  /* Write task register                */
       37     8720        %EQU KJ_IO_DCWLIST = 9;                 /* DCW list Iold                      */
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:16   
       38     8721        %EQU KJ_IO_LDBARR = 11;                 /* Load barricade                     */
       39     8722        %EQU KJ_IO_RDDCWOFF = 12;               /* Read DCW offset                    */
       40     8723        %EQU KJ_IO_RDCONFA = 16;                /* Read configuration register A      */
       41     8724        %EQU KJ_IO_WRCONFA = 17;                /* Write configuration register A     */
       42     8725        %EQU KJ_IO_RDSTATUS1 = 24;              /* Read status register 1             */
       43     8726        %EQU KJ_IO_RDSTATUS2 = 26;              /* Read status register 2             */
       44     8727        %EQU KJ_IO_RDDVID = 38;                 /* Read device ID                     */
       45     8728        %EQU KJ_IO_DMPSCRTCH = 25;              /* Dump scratch pad                   */
       46     8729        %EQU KJ_IO_RDLCN = 18;                  /* Read LCN                           */
       47     8730
       48     8731        /* Function that need to be directed to channel 2 or 3 */
       49     8732        %EQU KJ_IO_INTL66 = 3;                  /* Interupt L66                       */
       50     8733
       51     8734        /* Function codes for DCW's */
       52     8735        %EQU KJ_DCW_DISC = 48;                  /* Disconnect                         */
       53     8736        %EQU KJ_DCW_DISCINT = 56;               /* Disconnect and interupt            */
       54     8737        %EQU KJ_DCW_INTL6 = 57;                 /* Interupt L6                        */
       55     8738        %EQU KJ_DCW_JUMP = 58;                  /* Jump                               */
       56     8739        %EQU KJ_DCW_INTL66 = 59;                /* Interupt L66                       */
       57     8740        %EQU KJ_DCW_STCNFSTS = 60;              /* Store configuration status         */
       58     8741        %EQU KJ_DCW_DTL6L66 = 61;               /* Data transfer L6 to L66            */
       59     8742        %EQU KJ_DCW_DTL66L6 = 62;               /* Data transfer L66 to L6            */
       60     8743        %EQU KJ_DCW_RDCLROR = 53;               /* Read & clear L66; or to store L6   */
       61     8744        %EQU KJ_DCW_NOP = 51;                   /* Nop                                */
       62     8745        %EQU KJ_DCW_STALL = 52;                 /* Stall                              */
       63     8746
       64     8747        /* Equates for interupt level into the HOST */
       65     8748        %EQU KJ_INTLVL_INIT = 3;      /* Interupt to tell host FEI is initializing    */
       66     8749        %EQU KJ_INTLVL_DATA = 7;      /* Interupt level to inform host there is data  */
       67     8750        %EQU KJ_INTLVL_ERR = 3;  /* Interupt level to inform host there is a probleM  */
       68     8751        /* Subs for status bits in status 1 */
       69     8752        %EQU KJ_STATUS_DR = '1000000000000000'B; /* Device ready                      */
       70     8753        %EQU KJ_STATUS_ATT = '0100000000000000'B; /* Attention                        */
       71     8754        %EQU KJ_STATUS_ESE = '0001000000000000'B; /* External system error            */
       72     8755        %EQU KJ_STATUS_ESP = '0000100000000000'B; /* External system parity           */
       73     8756        %EQU KJ_STATUS_CNO = '0000010000000000'B; /* Central non-operational          */
       74     8757        %EQU KJ_STATUS_CSP = '0000001000000000'B; /* Central system parity            */
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:17   
       75     8758        %EQU KJ_STATUS_CSR = '0000000100000000'B; /* Central system read              */
       76     8759        %EQU KJ_STATUS_CSW = '0000000010000000'B; /* Central system write             */
       77     8760        %EQU KJ_STATUS_COP = '0000000001000000'B; /* Central operational              */
       78     8761        %EQU KJ_STATUS_TT = '0000000000100000'B; /* Transaction timer                 */
       79     8762        %EQU KJ_STATUS_W2NZ = '0000000000010000'B; /* word 2 nonzero                  */
       80     8763        %EQU KJ_STATUS_MY = '0000000000001000'B; /* Memory yellow                     */
       81     8764        %EQU KJ_STATUS_NER = '0000000000000100'B; /* Nonexistent resource             */
       82     8765        %EQU KJ_STATUS_L6B = '0000000000000010'B; /* Level 6 bus parity               */
       83     8766        %EQU KJ_STATUS_MR = '0000000000000001'B; /* Memory read                       */
       84     8767
       85     8768        /* Status word 2 equates */
       86     8769        %EQU KJ_STATUS2_BV = '1000000000000000'B; /* Barricade violation              */
       87     8770        %EQU KJ_STATUS2_CWE = '0100000000000000'B; /* Control word exhaust            */
       88     8771        %EQU KJ_STATUS2_IFC = '0010000000000000'B; /* Illegal function code           */
       89     8772        %EQU KJ_STATUS2_IDCW = '0001000000000000'B; /* Illegal DCW                    */
       90     8773        %EQU KJ_STATUS2_IPCW = '0000100000000000'B; /* Illegal PCW                    */
       91     8774        %EQU KJ_STATUS2_HF6 = '0000010000000000'B; /* Hardware fault 6                */
       92     8775        %EQU KJ_STATUS2_HF66 = '0000001000000000'B; /* Hardware fault 66              */
       93     8776        %EQU KJ_STATUS2_HFDCW = '0000000100000000'B; /* Hardware fault DCW            */
       94     8777        %EQU KJ_STATUS2_STBT = '0000000010000000'B; /* Stored boot                    */
       95     8778        %EQU KJ_STATUS2_MSB = '0000000001000000'B; /* MSB                             */
       96     8779
       97     8780        %EJECT;
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:18   
       98     8781        /* DCL for all of KJ */
       99     8782
      100     8783    1   DCL M$CQ DCB;
      101     8784
      102     8785        %KJ$DCW (NAME=KJ_DCW_DTL66L6,STCLASS="CONSTANT SYMDEF",OPERATION=DATAL66_L6,MODE=
              8785            ASCII);
      103     8825        %KJ$DCW (NAME=KJ_DCW_DTL6L66,STCLASS="CONSTANT SYMDEF",OPERATION=DATAL6_L66,MODE=
              8825            ASCII);
      104     8865        %KJ$DCW (NAME=KJ_DCW_JUMP,STCLASS="STATIC SYMDEF",OPERATION=JUMP);
      105     8905        %KJ$DCW;
      106     8945
      107     8946        %KJ$TASK (NAME=KJ_TASK_INIT,
      108     8947                  L66TESTINTLVL=%KJ_INTLVL_INIT,
      109     8948                  L66SPECINTLVL=%KJ_INTLVL_ERR,
      110     8949                  STCLASS="CONSTANT SYMDEF");
      111     8969
      112     8970        %KJ$CONFIG (NAME=KJ_CONFIG_INIT,
      113     8971                            STCLASS = "STATIC SYMDEF",
      114     8972                            FEPBAR=YES,
      115     8973                            OPL=YES,
      116     8974                            TEST=NO,
      117     8975                            L6SPECINTLVL=52);
      118     8997
      119     8998        %KJ$CONFIG (NAME=KJ_CONFIG_INIT_ADP,
      120     8999                            STCLASS = "STATIC SYMDEF",
      121     9000                            ADPHOST=YES,
      122     9001                            FEPBAR=YES,
      123     9002                            OPL=YES,
      124     9003                            TEST=NO,
      125     9004                            L6SPECINTLVL=52);
      126     9026
      127     9027        %KJ$OUTCONT (NAME=KJ_INITCPLR,
      128     9028                       STCLASS="CONSTANT SYMDEF",
      129     9029                       INITIALIZE=YES);
      130     9047
      131     9048        %KJ$INTCTL  (NAME=KJ_INTCONT_INIT,
      132     9049                       STCLASS="STATIC SYMDEF",
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:19   
      133     9050                       CPUCHAN=0,
      134     9051                       L6TERMINTLVL=52);
      135     9068
      136     9069        %EJECT;
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:20   
      137     9070        /* Context for the coupler */
      138     9071    1   DCL G$HAND_Q$ PTR SYMREF;
      139     9072    1   DCL 1 KJ_CTX$ PTR STATIC SYMDEF;
      140     9073    1   DCL 1 KJ_SIZE UBIN(32) STATIC SYMDEF;
      141     9074
      142     9075
      143     9076
      144     9077        /*F* NAME: KJ$CTX
      145     9078
      146     9079        The COUPLER's Context Block is maintained
      147     9080        in the context area of the Circular Queue
      148     9081        Header.
      149     9082        */
      150     9083
      151     9084    1   DCL 1 KJ$CTX BASED (KJ_CTX$),
      152     9085    1         2 STATE UBIN,
      153     9086        /* Equates for the state of the coupler */
      154     9087        %EQU KJ_STATE_MASKED = 1;               /* Coupler is masked                  */
      155     9088        %EQU KJ_STATE_INIT = 2;                 /* Coupler being initialized          */
      156     9089        %EQU KJ_STATE_RUNNING = 3;              /* Coupler running                    */
      157     9090        %EQU KJ_STATE_RECOVERY = 4;             /* Coupler recovery                   */
      158     9091
      159     9092    1         2 CURRENT_FUNCTION UBIN,          /* Current function in progress       */
      160     9093
      161     9094        /* Equates for CURRENT_FUNCTION */
      162     9095        %EQU KJ_CF_NONE = 0;                    /* No function in progress            */
      163     9096        %EQU KJ_CF_INIT = 1;                    /* Init coupler                       */
      164     9097        %EQU KJ_CF_ROCQSIZE = 2;                /* Reading OCQ size                   */
      165     9098        %EQU KJ_CF_RICQSIZE = 3;                /* Reading ICQ size                   */
      166     9099        %EQU KJ_CF_DATA = 5;                    /* Transfering data                   */
      167     9100
      168     9101    1         2 CHAN0 UBIN ,                    /* Coupler chan address               */
      169     9102    1         2 CHAN1 UBIN ,                    /* Coupler chan address               */
      170     9103    1         2 CHAN2 UBIN,                     /* Coupler chan address               */
      171     9104    1         2 STATUS1 BIT(16),                /* Couplers current status            */
      172     9105    1         2 STATUS2 BIT(16),                /* Couplers current status            */
      173     9106    1         2 HOST_NODE UBIN BYTE UNAL,       /* Node number of host                */
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:21   
      174     9107    1         2 FEP_NODE UBIN BYTE UNAL,        /* Node number of fep                 */
      175     9108    1        2 QOS UBIN BYTE UNAL,              /* QOS for connection */
      176     9109    1        2 * UBIN BYTE UNAL,
      177     9110    1         2 FLAGS WALIGNED,
      178     9111    1           3 BUF_FULL BIT(1) UNAL,         /* Buffer contains data               */
      179     9112    1           3 * UBIN(15) UNAL,
      180     9113    1         2 ICQ ALIGNED,
      181     9114    1           3 IPTR UBIN(32),                /* Insert pointer                     */
      182     9115    1           3 * UBIN,                       /* Filler for rest of word            */
      183     9116    1           3 RPTR UBIN(32),                /* Removal pointer                    */
      184     9117    1           3 * UBIN,                       /* Filler for rest of word            */
      185     9118    1           3 SIZE UBIN(32),                /* Queue size                         */
      186     9119    1           3 * UBIN,                       /* Filler for rest of word            */
      187     9120    1              3 LSTIPTR UBIN(32),        /* last icq iptr */
      188     9121    1              3 * UBIN(32),              /*filler for rest of word*/
      189     9122    1           3 OFFSET UBIN(32),              /* Offset to ICQ                      */
      190     9123    1           3 BUF$ PTR,                     /* Pointer to Buffer for ICQ          */
      191     9124    1           3 BUF_SIZE SBIN(32),            /* Size of buffer                     */
      192     9125    1           3 NEW_RPTR UBIN(32),            /* New removal ptr for handerl CQ     */
      193     9126    1         2 OCQ ALIGNED,
      194     9127    1           3 IPTR UBIN(32),                /* Insert pointer                     */
      195     9128    1           3 * UBIN,                       /* Filler for rest of word            */
      196     9129    1           3 RPTR UBIN(32),                /* Removal pointer                    */
      197     9130    1           3 * UBIN,                       /* Filler for rest of word            */
      198     9131    1           3 SIZE UBIN(32),                /* Queue size                         */
      199     9132    1           3 * UBIN,                       /* Filler for rest of word            */
      200     9133    1           3 FLAGS UNAL,
      201     9134    1             4 * BIT(8) UNAL,
      202     9135    1             4 QFULL BIT(1) UNAL,
      203     9136    1             4 * BIT(23) UNAL,
      204     9137    1           3 * UBIN,
      205     9138    1           3 RDSIZE UBIN(32),              /* Size of area read in               */
      206     9139    1           3 BUF$ PTR,                     /* Pointer for OCQ buffer             */
      207     9140    1           3 BUF_SIZE SBIN(32),            /* Size of buffer                     */
      208     9141    1         2 IBUF,                           /* Buffer for internal messages       */
      209     9142    1           3 BUF$ PTR,
      210     9143    1           3 SIZE UBIN,
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:22   
      211     9144    1           3 CSIZE UBIN,                   /* Current size                       */
      212     9145    1         2 IOIP,
      213     9146    1           3 FLAG BIT(1) UNAL,
      214     9147    1           3 * BIT(15) UNAL,
      215     9148    1           3 * (0:1) UBIN WORD,
      216     9149                  %KJ$DCW (LVL=2,LAST=",",NAME="DCWS(0:19)");
      217     9189              %KJ$DCW (NAME="PTR_DCW(0:8)",LVL=2); /* DCWS FOR READING AND WRITING PTRS */
      218     9229
      219     9230        /* Offsets for CQs */
      220     9231    1   DCL KJ_OFF_ICQ_RPTR UBIN(32) STATIC SYMDEF;
      221     9232    1   DCL KJ_OFF_ICQ_IPTR UBIN(32) STATIC SYMDEF;
      222     9233    1   DCL KJ_OFF_ICQ_DATA UBIN(32) STATIC SYMDEF;
      223     9234    1   DCL KJ_OFF_ICQ_LSTIPTR UBIN(32) STATIC SYMDEF;
      224     9235    1   DCL KJ_OFF_OCQ_RPTR UBIN(32) STATIC SYMDEF;
      225     9236    1   DCL KJ_OFF_OCQ_IPTR UBIN(32) STATIC SYMDEF;
      226     9237    1   DCL KJ_OFF_OCQ_DATA UBIN(32) STATIC SYMDEF;
      227     9238    1   DCL KJ_OFF_IOIP UBIN(32) STATIC SYMDEF;
      228     9239    1   DCL KJ_OFF_OCQ_FLAGS UBIN(32) STATIC SYMDEF;
      229     9240    1   DCL KJ_SCQ_OFFSET UBIN(32) STATIC SYMDEF;
      230     9241    1   DCL KJ_RCQ_OFFSET UBIN(32) STATIC SYMDEF;
      231     9242    1   DCL KJ_SCQ$ PTR STATIC SYMDEF;
      232     9243    1   DCL KJ_RCQ$ PTR STATIC SYMDEF;
      233     9244    1   DCL KJ_MSGSLINT UBIN STATIC SYMDEF INIT(0); /* Messages until interupt        */
      234     9245    1   DCL KJ_LDCTX UBIN STATIC SYMDEF INIT(0);
      235     9246    1   DCL KJ_TIME UBIN(32) STATIC SYMDEF INIT(0);
      236     9247    1   DCL KJ_TIME_LEFT UBIN STATIC SYMDEF INIT(0);
      237     9248    1   DCL KJ_DPS8000_FLG UBIN STATIC SYMDEF INIT(0);
      238     9249
      239     9250        /* Hardwired control parameters */
      240     9251    1   DCL 1 KJ_CONTROL STATIC SYMDEF,
      241     9252    1         2 ICQPGS UBIN INIT(16384),        /* Pages for input circular quere     */
      242     9253    1         2 OCQPGS UBIN INIT(16384),        /* Pages for output circular quere    */
      243     9254    1         2 INTPGS UBIN INIT(1),            /* Pages for internal buffer          */
      244     9255    1         2 INTLVL UBIN INIT(50),           /* Interupt level                     */
      245     9256    1         2 CHAN  UBIN INIT(0),             /* Channel                            */
      246     9257    1         2 MSG# UBIN INIT(0),              /* # of messages before a interupt    */
      247     9258    1         2 INTHTIME UBIN INIT (2),             /* Time inbetween host interupts     */
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:23   
      248     9259    1         2 RES CHAR(2) INIT('HL'),
      249     9260    1         2 ATTR BIT(16) INIT ('0'B),
      250     9261    1         2 OCQDBLKSIZ UBIN INIT(2048);
      251     9262
      252     9263        /* Statistics */
      253     9264        %KJ$STT_FEI(NAME=KJ_STATS,STCLASS="STATIC SYMDEF");
      254     9611
      255     9612
      256     9613        /* Offset into the queue header for the pointers */
      257     9614        %EQU KJ_OFFSET_IOIP = 2;                /* Io in progress flag                */
      258     9615        %EQU KJ_OFFSET_NODE = 3;                /* Offset node#s                      */
      259     9616        %EQU KJ_OFFSET_SIZE = 5;                /* Size of queue                      */
      260     9617        %EQU KJ_OFFSET_RPTR = 9;                /* Removal pointer                    */
      261     9618        %EQU KJ_OFFSET_IPTR = 10;               /* Insert pointer                     */
      262     9619        %EQU KJ_OFFSET_FLAGS = 11;              /* Flags                              */
      263     9620        %EQU KJ_OFFSET_DATA = 16;               /* Offset to the data in queue        */
      264     9621        %EQU KJ_OFFSET_LSTIPTR = 13;
      265     9622
      266     9623        %EJECT;
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:24   
      267     9624        /* Constant message definitions */
      268     9625        %KNH$MESS (FPTN=KJ_INIT_MSG,
      269     9626                       FUNCTION=%KN_FCN_INIT,
      270     9627                       FPTSZ="SIZEC(KJ_INIT_MSG.FPT)",
      271     9628                       LAST=",",
      272     9629                       STCLASS="STATIC SYMDEF");
      273     9678        %FPT_CONNECT (FPTN=FPT,
      274     9679                        STCLASS="STATIC SYMDEF",
      275     9680                        TYPE=LINK,
      276     9681                       LVL=2);
      277     9750
      278     9751        %KNH$MESS (FPTN=KJ_TERM_MSG,
      279     9752                       FUNCTION=%KN_FCN_TERM,
      280     9753                       STCLASS="STATIC SYMDEF");
      281     9802
      282     9803        %FPT_WRITE (FPTN=KJ_WRT_INIT,
      283     9804                  DCB=M$CQ,
      284     9805                  BUF=KJ_INIT_MSG,
      285     9806                  STCLASS="CONSTANT SYMDEF");
      286     9830
      287     9831        %FPT_WRITE (FPTN=KJ_WRT_TERM,
      288     9832                  DCB=M$CQ,
      289     9833                  BUF=KJ_TERM_MSG,
      290     9834                  STCLASS="CONSTANT SYMDEF");
      291     9858
      292     9859        %EJECT;
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:25   
      293     9860        /* IOLD FPT for GNS$IOLD */
      294     9861
      295     9862        %GH_IOLD (FPTN=KJ_IOLD_BARR,
      296     9863                       FNC=%KJ_IO_LDBARR,
      297     9864                       STCLASS="STATIC SYMDEF");
      298     9879
      299     9880        %GH_IOLD (FPTN=KJ_IOLD_DCWLIST,
      300     9881                        FNC=%KJ_IO_DCWLIST,
      301     9882                        STCLASS="STATIC SYMDEF");
      302     9897
      303     9898        %GH_IO   (FPTN=KJ_GH_IO_INIT,
      304     9899                  STCLASS="CONSTANT SYMDEF");
      305     9915        %GH_IO    (FPTN=KJ_GH_IO_INTL66,
      306     9916                       FNC=%KJ_IO_INTL66,
      307     9917                       LCTADR=%KJ_INTLVL_DATA,
      308     9918                       STCLASS="STATIC SYMDEF");
      309     9934       %VLP_SCODE (FPTN=CPLR_IO,STCLASS="CONSTANT SYMDEF",ERR#=%S$CPLR_IO,FCG=KJ,MID=F,SEV=
              9934            G_SEV_SCREECH#);
      310     9995        %VLP_SCODE (FPTN=CPLR_SCANSZ,STCLASS="CONSTANT SYMDEF",ERR#=%S$CPLR_SCANSZ,FCG=KJ,
              9995            MID=F,SEV=G_SEV_SCREECH#);
      311    10056        %VLP_SCODE (FPTN=CPLR_BADMSG,STCLASS="CONSTANT SYMDEF",ERR#=%S$CPLR_BADMSG,FCG=KJ,
             10056            MID=F,SEV=G_SEV_SCREECH#);
      312    10117       %VLP_SCODE (FPTN=HOSTABRT,STCLASS="CONSTANT SYMDEF",ERR#=%S$HOST_REQUEST,FCG=KJ,MID=
             10117            F,SEV=G_SEV_SCREECH#);
      313    10178        %VLP_SCODE (FPTN=HOSTTO,STCLASS="CONSTANT SYMDEF",ERR#=%S$HOST_TO,FCG=KJ,MID=F,SEV=
             10178            G_SEV_SCREECH#);
      314    10239       %VLP_SCODE (FPTN=HOSTFLT,STCLASS="CONSTANT SYMDEF",ERR#=%S$HOST_FEPFLT,FCG=KJ,MID=F,
             10239            SEV=G_SEV_SCREECH#);
      315    10300        %VLP_SCODE (FPTN=HOSTOREQ,STCLASS="CONSTANT SYMDEF",ERR#=%S$HOST_OREQ,FCG=KJ,MID=F,
             10300            SEV=G_SEV_SCREECH#);
      316    10361       %VLP_SCODE (FPTN=HOSTBADMSG,STCLASS="CONSTANT SYMDEF",ERR#=%S$HOST_BADMSG,FCG=KJ,MID
             10361            =F,SEV=G_SEV_SCREECH#);
      317    10422    1   END KJ_DATA_D;

PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:26   
--  Include file information  --

   K_SCODE_C.:E05TOU  is referenced.
   KL_AFCN_C.:E05TOU  is referenced.
   KH$STT.:E05TOU  is referenced.
   KJ_MACRO_M.:E05TOU  is referenced.
   KL_MACRO_C.:E05TOU  is referenced.
   GH_HARDWARE_M.:E05TOU  is referenced.
   KNH_MACRO_C.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  is referenced.
   GT_LCP6_M.:E05TOU  is referenced.
   KI_CP6.:E05TOU  is referenced.
   GF_LCP6_M.:E05TOU  is referenced.
   GM_LCP6_M.:E05TOU  is referenced.
   GU_LCP6_M.:E05TOU  is referenced.
   GJ_LCP6_M.:E05TOU  is referenced.
   GH_LCP6_M.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
   KJ_FCNS_C.:E05TOU  is referenced.
      No diagnostics issued in procedure KJ_DATA_D.
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:27   

 **** Variables and constants ****

  ****  Section 001 RoData KJ_DATA_D

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     E-0-0/w STRC(288)   r     1 KJ_WRT_INIT               20-0-0/w STRC(288)   r     1 KJ_WRT_TERM

  ****  Section 002  Data  KJ_DATA_D

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     9-0-0/w PTR         r     1 KJ_CTX$                   6D-0-0/w STRC(432)   r     1 KJ_INIT_MSG
    88-0-0/c STRC(128)   r     1 KJ_TERM_MSG

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0N  NULL        r     1 M$CQ


   No code generated for procedure KJ_DATA_D .
   Procedure KJ_DATA_D requires 4 words of local(AUTO) storage.

    No errors detected in file KJ_DATA_D.:E05TSI    .
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:28   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:29   
          MINI XREF LISTING

KJ_CTX$
      9072**DCL      9084--IMP-PTR
KJ_GH_IO_INIT.CAS.CHN
      9910**DCL      9910--REDEF
KJ_GH_IO_INIT.DAS
      9911**DCL      9912--REDEF    9913--REDEF
KJ_GH_IO_INTL66.CAS.CHN
      9929**DCL      9929--REDEF
KJ_GH_IO_INTL66.DAS
      9930**DCL      9931--REDEF    9932--REDEF
KJ_INIT_MSG
      9642**DCL      9821--DCLINIT
KJ_INIT_MSG.FPT
      9697**DCL      9676--DCLINIT
KJ_INIT_MSG.FPT.RLCID.GENERATION
      9731**DCL      9732--REDEF
KJ_INIT_MSG.FPT.RLCID.LDCTX
      9732**DCL      9732--REDEF
KJ_INIT_MSG.FPT.TERMINAL_ID.TERM
      9720**DCL      9729--REDEF
KJ_INIT_MSG.FUNCTION
      9642**DCL      9642--REDEF
KJ_INIT_MSG.UID
      9672**DCL      9672--REDEF    9672--REDEF
KJ_IOLD_BARR.CHN
      9875**DCL      9875--REDEF
KJ_IOLD_DCWLIST.CHN
      9893**DCL      9893--REDEF
KJ_STATS.REQSTATS.DSPMSK
      9524**DCL      9530--REDEF
KJ_STATS.REQSTATS.SLCMSK
      9565**DCL      9572--REDEF
PL6.E3A0      #001=KJ_DATA_D File=KJ_DATA_D.:E05TSI                              WED 07/30/97 00:45 Page:30   
KJ_TERM_MSG
      9766**DCL      9849--DCLINIT
KJ_TERM_MSG.FUNCTION
      9766**DCL      9766--REDEF
KJ_TERM_MSG.UID
      9796**DCL      9796--REDEF    9796--REDEF
KJ_WRT_INIT.V
      9824**DCL      9821--DCLINIT
KJ_WRT_TERM.V
      9852**DCL      9849--DCLINIT
