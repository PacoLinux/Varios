VERSION A02

PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:1    
        1        1        /*M* FUI$IOTEST - driver for FUI$RDRQS testing */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DMR,PLM=5,IND=3,CTI=3,SDI=3,MCL=2,CSI=0,ECI=0,CLM=30,CRM=67, MOC=Y,CCI=3 */
        8        8
        9        9
       10       10
       11       11        FUI$IOTEST: PROC MAIN;
       12       12
       13       13
       14       14        %INCLUDE CP_6_SUBS;
       15      554        %INCLUDE XSL_SOCKET_M;
       16     1302        %INCLUDE FU_NFS_M;
       17     1817
       18     1818        %FU$RQSCTX (NAME=READRQS,STCLASS=STATIC);
       19     1907        %FU$RQSCTX (NAME=WRITERQS,STCLASS=STATIC);
       20     1996        %FU$UCTX (NAME=CONTEXT1,STCLASS=STATIC);
       21     2049        %FU$UCTX (NAME=CONTEXT2,STCLASS=STATIC);
       22     2102        %FU$FCTX (NAME=FILECTX,STCLASS=STATIC);
       23     2205        %FU$FCTX (NAME=FILECTXOUT,STCLASS=STATIC);
       24     2308        %FU$NFSDS (NAME=DATASEG,STCLASS=STATIC);
       25     2338             %FU$READRES;
       26     2390             %FU$WRITEARGS;
       27     2433
       28     2434        %INCLUDE CP_6;
       29     2515
       30     2516    1   DCL M$TI DCB;
       31     2517    1   DCL M$TO DCB;
       32     2518
       33     2519
       34     2520    1   DCL STARTBYTE UBIN STATIC;
       35     2521    1   DCL SIZEBYTES UBIN STATIC;
       36     2522    1   DCL BLKSZ UBIN STATIC SYMDEF INIT (1024);
       37     2523    1   DCL BYTETRANS UBIN STATIC;
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:2    
       38     2524    1   DCL FU_PROC# SBIN STATIC SYMDEF INIT(0);
       39     2525    1   DCL B$DS8 PTR CONSTANT SYMDEF INIT(ADDR(DATASEG));
       40     2526
       41     2527    1   DCL I SBIN;
       42     2528    1   DCL J SBIN;
       43     2529    1   DCL MAX_LOOP UBIN STATIC SYMDEF INIT(100);
       44     2530
       45     2531
       46     2532
       47     2533
       48     2534    1   DCL FUI$RDRQS ENTRY (3);
       49     2535    1   DCL FUI$WRRQS ENTRY(3);
       50     2536
       51     2537
       52     2538
       53     2539
       54     2540        %FPT_OPEN (FPTN=OPEN_TESTFILE,
       55     2541                       DCB=M$TI,
       56     2542                       FUN=UPDATE,
       57     2543                       ORG=CONSEC);
       58     2652
       59     2653
       60     2654        %FPT_OPEN (FPTN=OPEN_WRITEFILE,
       61     2655                       DCB=M$TO,
       62     2656                       FUN=UPDATE,
       63     2657                       ORG=CONSEC,
       64     2658                       EXIST=NEWFILE,
       65     2659                       CTG=YES);
       66     2768
       67     2769
       68     2770                                 /* OPEN THE TEST FILE                 */
       69     2771
       70     2772    1        CALL M$OPEN (OPEN_TESTFILE)
       71     2773    2        WHENALTRETURN DO;
       72     2774    2           CALL M$XXX;
       73     2775    2           END;
       74     2776
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:3    
       75     2777    1        CALL M$OPEN (OPEN_WRITEFILE)
       76     2778    2        WHENALTRETURN DO;
       77     2779    2           OPEN_WRITEFILE.V.FUN# = %CREATE#;
       78     2780    2           CALL M$OPEN (OPEN_WRITEFILE)
       79     2781    3           WHENALTRETURN DO;
       80     2782    3              CALL M$XXX;
       81     2783    3              END;
       82     2784    2           END;
       83     2785
       84     2786
       85     2787
       86     2788                                 /* INITIALIZE THE CONTEXT BLOCK       */
       87     2789
       88     2790
       89     2791
       90     2792    1        CONTEXT2.BUF$=ADDR(NIL);
       91     2793    1        CONTEXT2.FILEPOS.CRECNO(0) = 0;
       92     2794    1        CONTEXT2.ARS# = 99999999;
       93     2795    1        CONTEXT2.FILEPOS.FOFFSET(0) =  0;
       94     2796    1        CONTEXT2.CONTREAD = '0'B;
       95     2797    1        CONTEXT2.FCTX$ = ADDR(FILECTXOUT);
       96     2798
       97     2799    1        FILECTXOUT.DCB# = DCBNUM(M$TO);
       98     2800    1        FILECTXOUT.FATTR.XATTR.TEXTMODE = '1'B;
       99     2801    1        FILECTXOUT.CRECNO = 0;
      100     2802
      101     2803
      102     2804    1        STARTBYTE = 0;
      103     2805
      104     2806    2        DO J = 0 TO 0;
      105     2807
      106     2808
      107     2809    2           CONTEXT1.BUF$=ADDR(NIL);
      108     2810    2           CONTEXT1.FILEPOS.CRECNO(0) = 0;
      109     2811    2           CONTEXT1.ARS# = 99999999;
      110     2812    2           CONTEXT1.FILEPOS.FOFFSET(0) = 0;
      111     2813    2           CONTEXT1.CONTREAD = '0'B;
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:4    
      112     2814    2           CONTEXT1.FCTX$ = ADDR(FILECTX);
      113     2815
      114     2816    2           FILECTX.DCB# = DCBNUM(M$TI);
      115     2817    2           FILECTX.FATTR.XATTR.TEXTMODE = '1'B;
      116     2818    2           FILECTX.CRECNO = 0;
      117     2819
      118     2820    3           DO I = 0 TO MAX_LOOP;
      119     2821                                 /* INITIALIZE THE READRQS PACKET      */
      120     2822
      121     2823    3              READRQS.UCTX$ = ADDR(CONTEXT1);
      122     2824    3              SIZEBYTES = BLKSZ;
      123     2825
      124     2826
      125     2827    3              CALL FUI$RDRQS (READRQS,STARTBYTE,SIZEBYTES);
      126     2828        /*   CALL DUMPBUFFER; */
      127     2829
      128     2830    3              IF ADDR(READRQS.REPLYHDR.RESULTS)->FU$READRES.COUNT = 0
      129     2831    3              THEN
      130     2832    3                 EXIT;
      131     2833
      132     2834
      133     2835                                 /* INITIALIZE THE WRITEREQUEST PACKET */
      134     2836    3              WRITERQS.UCTX$ = ADDR(CONTEXT2);
      135     2837
      136     2838    3              WRITERQS.BODY$ = ADDR(WRITERQS.BODY);
      137     2839
      138     2840    3              WRITERQS.BODY$ -> FU$WRITEARGS.OFFSET =
      139     2841    3                 FILECTXOUT.FATTR.SIZE;
      140     2842
      141     2843    3              WRITERQS.CALLHDR.REXMIT.F = '0'B;
      142     2844    3              WRITERQS.BODY$ -> FU$WRITEARGS.COUNT =
      143     2845    3                 ADDR(READRQS.REPLYHDR.RESULTS)->FU$READRES.COUNT;
      144     2846    3              BYTETRANS =
      145     2847    3                 ADDR(READRQS.REPLYHDR.RESULTS)->FU$READRES.COUNT;
      146     2848    3              WRITERQS.BODY$->FU$WRITEARGS.DATA =
      147     2849    3                 ADDR(READRQS.REPLYHDR.RESULTS)->FU$READRES.DATA;
      148     2850
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:5    
      149     2851    3              CALL FUI$WRRQS (WRITERQS, STARTBYTE, BYTETRANS);
      150     2852        /*
      151     2853                   WRITERQS.BODY$ -> FU$WRITEARGS.COUNT =
      152     2854                      ADDR(READRQS.REPLYHDR.RESULTS)->FU$READRES.COUNT;
      153     2855                   BYTETRANS =
      154     2856                      ADDR(READRQS.REPLYHDR.RESULTS)->FU$READRES.COUNT;
      155     2857                   WRITERQS.BODY$->FU$WRITEARGS.DATA =
      156     2858                      ADDR(READRQS.REPLYHDR.RESULTS)->FU$READRES.DATA;
      157     2859                   WRITERQS.CALLHDR.REXMIT.F = '1'B;
      158     2860
      159     2861                   CALL FUI$WRRQS (WRITERQS, STARTBYTE, BYTETRANS);
      160     2862         */
      161     2863    3              STARTBYTE = STARTBYTE + BYTETRANS;
      162     2864
      163     2865    3              END;               /* OF DO, LOOPING THROUGH FILE */
      164     2866
      165     2867    2           END;             /* DO J (WRITING INPUT FILE N TIMES) */
      166     2868
      167     2869        /*   STARTBYTE = STARTBYTE - BYTETRANS;
      168     2870             WRITERQS.BODY$ -> FU$WRITEARGS.COUNT = BYTETRANS - 2;
      169     2871             BYTETRANS = BYTETRANS - 2;
      170     2872             CALL FUI$WRRQS (WRITERQS, STARTBYTE, BYTETRANS);              */
      171     2873
      172     2874    1        CALL M$EXIT;
      173     2875
      174     2876
      175     2877
      176     2878    1   DUMPBUFFER: PROC;
      177     2879
      178     2880    2   DCL M$LO DCB;
      179     2881
      180     2882        %FPT_WRITE (FPTN=WRITE_LO,DCB=M$LO);
      181     2913
      182     2914
      183     2915    2        WRITE_LO.BUF_ = VECTOR (
      184     2916    2           ADDR(READRQS.REPLYHDR.RESULTS)->FU$READRES.DATA);
      185     2917    2        CALL M$WRITE (WRITE_LO);
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:6    
      186     2918
      187     2919    2   END DUMPBUFFER;
      188     2920    1   END FUI$IOTEST;

PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:7    
--  Include file information  --

   CP_6.:LIBRARY  cannot be made into a system file and is referenced.
   FU_NFS_M.:FUA2TOU  is referenced.
   XSL_SOCKET_M.:LIBRARY  is referenced.
   CP_6_SUBS.:LIBRARY  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure FUI$IOTEST.

   Procedure FUI$IOTEST requires 118 words for executable code.
   Procedure FUI$IOTEST requires 8 words of local(AUTO) storage.

    No errors detected in file FUI$IOTEST.:FUA2TSI    .

PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:8    

 Object Unit name= FUI$IOTEST                                 File name= FUI$IOTEST.:FUA2TOU
 UTS= NOV 21 '97 11:33:05.32 FRI                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none  4572  10734  FUI$IOTEST
    1   DCB   even  none     0      0  M$UC
    2   DCB   even  none     0      0  M$TI
    3   DCB   even  none     0      0  M$TO
    4  RoData even  UTS      1      1  FUI$IOTEST
    5   DCB   even  none     0      0  M$LO
    6   Proc  even  none   118    166  FUI$IOTEST
    7  RoData even  none    14     16  FUI$IOTEST

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     6      0   yes            yes      Main       0  FUI$IOTEST

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    0  10527  BLKSZ                              0  10531  FU_PROC#
    4      0  B$DS8                              0  10532  MAX_LOOP
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:9    

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       3 FUI$WRRQS
         yes           Std       3 FUI$RDRQS
                       nStd      0 X66_MAUTO
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_MARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  M$TI                                  M$TO
     M$LO                                  B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     NULLSID                               ISSID
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:10   


        1        1        /*M* FUI$IOTEST - driver for FUI$RDRQS testing */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DMR,PLM=5,IND=3,CTI=3,SDI=3,MCL=2,CSI=0,ECI=0,CLM=30,CRM=67, MOC=Y,CCI=3 */
        8        8
        9        9
       10       10
       11       11        FUI$IOTEST: PROC MAIN;

     11  6 000000   000000 700200 xent  FUI$IOTEST   TSX0  ! X66_MAUTO
         6 000001   000010 000000                    ZERO    8,0

       12       12
       13       13
       14       14        %INCLUDE CP_6_SUBS;
       15      554        %INCLUDE XSL_SOCKET_M;
       16     1302        %INCLUDE FU_NFS_M;
       17     1817
       18     1818        %FU$RQSCTX (NAME=READRQS,STCLASS=STATIC);
       19     1907        %FU$RQSCTX (NAME=WRITERQS,STCLASS=STATIC);
       20     1996        %FU$UCTX (NAME=CONTEXT1,STCLASS=STATIC);
       21     2049        %FU$UCTX (NAME=CONTEXT2,STCLASS=STATIC);
       22     2102        %FU$FCTX (NAME=FILECTX,STCLASS=STATIC);
       23     2205        %FU$FCTX (NAME=FILECTXOUT,STCLASS=STATIC);
       24     2308        %FU$NFSDS (NAME=DATASEG,STCLASS=STATIC);
       25     2338             %FU$READRES;
       26     2390             %FU$WRITEARGS;
       27     2433
       28     2434        %INCLUDE CP_6;
       29     2515
       30     2516    1   DCL M$TI DCB;
       31     2517    1   DCL M$TO DCB;
       32     2518
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:11   
       33     2519
       34     2520    1   DCL STARTBYTE UBIN STATIC;
       35     2521    1   DCL SIZEBYTES UBIN STATIC;
       36     2522    1   DCL BLKSZ UBIN STATIC SYMDEF INIT (1024);
       37     2523    1   DCL BYTETRANS UBIN STATIC;
       38     2524    1   DCL FU_PROC# SBIN STATIC SYMDEF INIT(0);
       39     2525    1   DCL B$DS8 PTR CONSTANT SYMDEF INIT(ADDR(DATASEG));
       40     2526
       41     2527    1   DCL I SBIN;
       42     2528    1   DCL J SBIN;
       43     2529    1   DCL MAX_LOOP UBIN STATIC SYMDEF INIT(100);
       44     2530
       45     2531
       46     2532
       47     2533
       48     2534    1   DCL FUI$RDRQS ENTRY (3);
       49     2535    1   DCL FUI$WRRQS ENTRY(3);
       50     2536
       51     2537
       52     2538
       53     2539
       54     2540        %FPT_OPEN (FPTN=OPEN_TESTFILE,
       55     2541                       DCB=M$TI,
       56     2542                       FUN=UPDATE,
       57     2543                       ORG=CONSEC);
       58     2652
       59     2653
       60     2654        %FPT_OPEN (FPTN=OPEN_WRITEFILE,
       61     2655                       DCB=M$TO,
       62     2656                       FUN=UPDATE,
       63     2657                       ORG=CONSEC,
       64     2658                       EXIST=NEWFILE,
       65     2659                       CTG=YES);
       66     2768
       67     2769
       68     2770                                 /* OPEN THE TEST FILE                 */
       69     2771
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:12   
       70     2772    1        CALL M$OPEN (OPEN_TESTFILE)

   2772  6 000002   010534 630400 0                  EPPR0   OPEN_TESTFILE
         6 000003   450000 713400                    CLIMB   alt,open
         6 000004   410400 401760                    pmme    nvectors=18
         6 000005   000007 702000 6                  TSX2    s:2774
         6 000006   000011 710000 6                  TRA     s:2777

       71     2773    2        WHENALTRETURN DO;

       72     2774    2           CALL M$XXX;

   2774  6 000007   000003 713400                    CLIMB   3
         6 000010   000000 401760                    pmme    nvectors=0

       73     2775    2           END;

       74     2776
       75     2777    1        CALL M$OPEN (OPEN_WRITEFILE)

   2777  6 000011   010626 630400 0                  EPPR0   OPEN_WRITEFILE
         6 000012   450000 713400                    CLIMB   alt,open
         6 000013   410400 401760                    pmme    nvectors=18
         6 000014   000016 702000 6                  TSX2    s:2779
         6 000015   000027 710000 6                  TRA     s:2792

       76     2778    2        WHENALTRETURN DO;

       77     2779    2           OPEN_WRITEFILE.V.FUN# = %CREATE#;

   2779  6 000016   003000 236007                    LDQ     1536,DL
         6 000017   010673 552010 0                  STBQ    OPEN_WRITEFILE+37,'10'O

       78     2780    2           CALL M$OPEN (OPEN_WRITEFILE)

   2780  6 000020   010626 630400 0                  EPPR0   OPEN_WRITEFILE
         6 000021   450000 713400                    CLIMB   alt,open
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:13   
         6 000022   410400 401760                    pmme    nvectors=18
         6 000023   000025 702000 6                  TSX2    s:2782
         6 000024   000027 710000 6                  TRA     s:2792

       79     2781    3           WHENALTRETURN DO;

       80     2782    3              CALL M$XXX;

   2782  6 000025   000003 713400                    CLIMB   3
         6 000026   000000 401760                    pmme    nvectors=0

       81     2783    3              END;

       82     2784    2           END;

       83     2785
       84     2786
       85     2787
       86     2788                                 /* INITIALIZE THE CONTEXT BLOCK       */
       87     2789
       88     2790
       89     2791
       90     2792    1        CONTEXT2.BUF$=ADDR(NIL);

   2792  6 000027   000001 236000 xsym               LDQ     B_VECTNIL+1
         6 000030   010141 756000 0                  STQ     CONTEXT2+15

       91     2793    1        CONTEXT2.FILEPOS.CRECNO(0) = 0;

   2793  6 000031   010142 450000 0                  STZ     CONTEXT2+16

       92     2794    1        CONTEXT2.ARS# = 99999999;

   2794  6 000032   000000 235000 7                  LDA     0
         6 000033   010140 755000 0                  STA     CONTEXT2+14

       93     2795    1        CONTEXT2.FILEPOS.FOFFSET(0) =  0;
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:14   

   2795  6 000034   010143 450000 0                  STZ     CONTEXT2+17

       94     2796    1        CONTEXT2.CONTREAD = '0'B;

   2796  6 000035   000001 236000 7                  LDQ     1
         6 000036   010137 356000 0                  ANSQ    CONTEXT2+13

       95     2797    1        CONTEXT2.FCTX$ = ADDR(FILECTXOUT);

   2797  6 000037   000002 236000 7                  LDQ     2
         6 000040   010125 756000 0                  STQ     CONTEXT2+3

       96     2798
       97     2799    1        FILECTXOUT.DCB# = DCBNUM(M$TO);

   2799  6 000041   000000 236007 xsym               LDQ     M$TO,DL
         6 000042   000000 620006                    EAX0    0,QL
         6 000043   010256 740000 0                  STX0    FILECTXOUT+10

       98     2800    1        FILECTXOUT.FATTR.XATTR.TEXTMODE = '1'B;

   2800  6 000044   400000 236003                    LDQ     -131072,DU
         6 000045   010263 256000 0                  ORSQ    FILECTXOUT+15

       99     2801    1        FILECTXOUT.CRECNO = 0;

   2801  6 000046   010260 450000 0                  STZ     FILECTXOUT+12

      100     2802
      101     2803
      102     2804    1        STARTBYTE = 0;

   2804  6 000047   010525 450000 0                  STZ     STARTBYTE

      103     2805
      104     2806    2        DO J = 0 TO 0;
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:15   

   2806  6 000050   200004 450100                    STZ     J,,AUTO

      105     2807
      106     2808
      107     2809    2           CONTEXT1.BUF$=ADDR(NIL);

   2809  6 000051   000001 236000 xsym               LDQ     B_VECTNIL+1
         6 000052   010075 756000 0                  STQ     CONTEXT1+15

      108     2810    2           CONTEXT1.FILEPOS.CRECNO(0) = 0;

   2810  6 000053   010076 450000 0                  STZ     CONTEXT1+16

      109     2811    2           CONTEXT1.ARS# = 99999999;

   2811  6 000054   000000 235000 7                  LDA     0
         6 000055   010074 755000 0                  STA     CONTEXT1+14

      110     2812    2           CONTEXT1.FILEPOS.FOFFSET(0) = 0;

   2812  6 000056   010077 450000 0                  STZ     CONTEXT1+17

      111     2813    2           CONTEXT1.CONTREAD = '0'B;

   2813  6 000057   000001 236000 7                  LDQ     1
         6 000060   010073 356000 0                  ANSQ    CONTEXT1+13

      112     2814    2           CONTEXT1.FCTX$ = ADDR(FILECTX);

   2814  6 000061   000003 236000 7                  LDQ     3
         6 000062   010061 756000 0                  STQ     CONTEXT1+3

      113     2815
      114     2816    2           FILECTX.DCB# = DCBNUM(M$TI);

   2816  6 000063   000000 236007 xsym               LDQ     M$TI,DL
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:16   
         6 000064   000000 620006                    EAX0    0,QL
         6 000065   010200 740000 0                  STX0    FILECTX+10

      115     2817    2           FILECTX.FATTR.XATTR.TEXTMODE = '1'B;

   2817  6 000066   400000 236003                    LDQ     -131072,DU
         6 000067   010205 256000 0                  ORSQ    FILECTX+15

      116     2818    2           FILECTX.CRECNO = 0;

   2818  6 000070   010202 450000 0                  STZ     FILECTX+12

      117     2819
      118     2820    3           DO I = 0 TO MAX_LOOP;

   2820  6 000071   200003 450100                    STZ     I,,AUTO
         6 000072   000141 710000 6                  TRA     s:2865+1

      119     2821                                 /* INITIALIZE THE READRQS PACKET      */
      120     2822
      121     2823    3              READRQS.UCTX$ = ADDR(CONTEXT1);

   2823  6 000073   000004 236000 7                  LDQ     4
         6 000074   000004 756000 0                  STQ     READRQS+4

      122     2824    3              SIZEBYTES = BLKSZ;

   2824  6 000075   010527 235000 0                  LDA     BLKSZ
         6 000076   010526 755000 0                  STA     SIZEBYTES

      123     2825
      124     2826
      125     2827    3              CALL FUI$RDRQS (READRQS,STARTBYTE,SIZEBYTES);

   2827  6 000077   000005 630400 7                  EPPR0   5
         6 000100   000021 631400 xsym               EPPR1   B_VECTNIL+17
         6 000101   000000 701000 xent               TSX1    FUI$RDRQS
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:17   
         6 000102   000000 011000                    NOP     0

      126     2828        /*   CALL DUMPBUFFER; */
      127     2829
      128     2830    3              IF ADDR(READRQS.REPLYHDR.RESULTS)->FU$READRES.COUNT = 0

   2830  6 000103   000045 235000 0                  LDA     READRQS+37
         6 000104   000145 600000 6                  TZE     s:2867

      129     2831    3              THEN
      130     2832    3                 EXIT;
      131     2833
      132     2834
      133     2835                                 /* INITIALIZE THE WRITEREQUEST PACKET */
      134     2836    3              WRITERQS.UCTX$ = ADDR(CONTEXT2);

   2836  6 000105   000010 236000 7                  LDQ     8
         6 000106   004033 756000 0                  STQ     WRITERQS+4

      135     2837
      136     2838    3              WRITERQS.BODY$ = ADDR(WRITERQS.BODY);

   2838  6 000107   000011 236000 7                  LDQ     9
         6 000110   004032 756000 0                  STQ     WRITERQS+3

      137     2839
      138     2840    3              WRITERQS.BODY$ -> FU$WRITEARGS.OFFSET =

   2840  6 000111   004032 470400 0                  LDP0    WRITERQS+3
         6 000112   010267 235000 0                  LDA     FILECTXOUT+19
         6 000113   000011 755100                    STA     9,,PR0

      139     2841    3                 FILECTXOUT.FATTR.SIZE;
      140     2842
      141     2843    3              WRITERQS.CALLHDR.REXMIT.F = '0'B;

   2843  6 000114   000031 236000 xsym               LDQ     B_VECTNIL+25
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:18   
         6 000115   004042 356000 0                  ANSQ    WRITERQS+11

      142     2844    3              WRITERQS.BODY$ -> FU$WRITEARGS.COUNT =

   2844  6 000116   004032 470400 0                  LDP0    WRITERQS+3
         6 000117   000045 235000 0                  LDA     READRQS+37
         6 000120   000013 755100                    STA     11,,PR0

      143     2845    3                 ADDR(READRQS.REPLYHDR.RESULTS)->FU$READRES.COUNT;
      144     2846    3              BYTETRANS =

   2846  6 000121   000045 235000 0                  LDA     READRQS+37
         6 000122   010530 755000 0                  STA     BYTETRANS

      145     2847    3                 ADDR(READRQS.REPLYHDR.RESULTS)->FU$READRES.COUNT;
      146     2848    3              WRITERQS.BODY$->FU$WRITEARGS.DATA =

   2848  6 000123   004032 470400 0                  LDP0    WRITERQS+3
         6 000124   000013 720100                    LXL0    11,,PR0
         6 000125   000000 621005                    EAX1    0,AL
         6 000126   040140 100440                    MLR     fill='040'O
         6 000127   000046 000011 0                  ADSC9   READRQS+38               cn=0,n=*X1
         6 000130   000014 000010                    ADSC9   12,,PR0                  cn=0,n=*X0

      147     2849    3                 ADDR(READRQS.REPLYHDR.RESULTS)->FU$READRES.DATA;
      148     2850
      149     2851    3              CALL FUI$WRRQS (WRITERQS, STARTBYTE, BYTETRANS);

   2851  6 000131   000012 630400 7                  EPPR0   10
         6 000132   000021 631400 xsym               EPPR1   B_VECTNIL+17
         6 000133   000000 701000 xent               TSX1    FUI$WRRQS
         6 000134   000000 011000                    NOP     0

      150     2852        /*
      151     2853                   WRITERQS.BODY$ -> FU$WRITEARGS.COUNT =
      152     2854                      ADDR(READRQS.REPLYHDR.RESULTS)->FU$READRES.COUNT;
      153     2855                   BYTETRANS =
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:19   
      154     2856                      ADDR(READRQS.REPLYHDR.RESULTS)->FU$READRES.COUNT;
      155     2857                   WRITERQS.BODY$->FU$WRITEARGS.DATA =
      156     2858                      ADDR(READRQS.REPLYHDR.RESULTS)->FU$READRES.DATA;
      157     2859                   WRITERQS.CALLHDR.REXMIT.F = '1'B;
      158     2860
      159     2861                   CALL FUI$WRRQS (WRITERQS, STARTBYTE, BYTETRANS);
      160     2862         */
      161     2863    3              STARTBYTE = STARTBYTE + BYTETRANS;

   2863  6 000135   010525 236000 0                  LDQ     STARTBYTE
         6 000136   010530 036000 0                  ADLQ    BYTETRANS
         6 000137   010525 756000 0                  STQ     STARTBYTE

      162     2864
      163     2865    3              END;               /* OF DO, LOOPING THROUGH FILE */

   2865  6 000140   200003 054100                    AOS     I,,AUTO
         6 000141   010532 236000 0                  LDQ     MAX_LOOP
         6 000142   000073 604000 6                  TMI     s:2823
         6 000143   200003 116100                    CMPQ    I,,AUTO
         6 000144   000073 605000 6                  TPL     s:2823

      164     2866
      165     2867    2           END;             /* DO J (WRITING INPUT FILE N TIMES) */

   2867  6 000145   200004 054100                    AOS     J,,AUTO
         6 000146   000051 604400 6                  TMOZ    s:2809

      166     2868
      167     2869        /*   STARTBYTE = STARTBYTE - BYTETRANS;
      168     2870             WRITERQS.BODY$ -> FU$WRITEARGS.COUNT = BYTETRANS - 2;
      169     2871             BYTETRANS = BYTETRANS - 2;
      170     2872             CALL FUI$WRRQS (WRITERQS, STARTBYTE, BYTETRANS);              */
      171     2873
      172     2874    1        CALL M$EXIT;

   2874  6 000147   000001 713400                    CLIMB   exit
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:20   
         6 000150   000000 401760                    pmme    nvectors=0
         6 000151   000165 710000 6                  TRA     s:2920

      173     2875
      174     2876
      175     2877
      176     2878    1   DUMPBUFFER: PROC;

   2878  6 000152   200006 741300       DUMPBUFFER   STX1  ! J+2,,AUTO

      177     2879
      178     2880    2   DCL M$LO DCB;
      179     2881
      180     2882        %FPT_WRITE (FPTN=WRITE_LO,DCB=M$LO);
      181     2913
      182     2914
      183     2915    2        WRITE_LO.BUF_ = VECTOR (

   2915  6 000153   000045 235000 0                  LDA     READRQS+37
         6 000154   000020 735000                    ALS     16
         6 000155   000140 135007                    SBLA    96,DL
         6 000156   000015 236000 7                  LDQ     13
         6 000157   010724 757000 0                  STAQ    WRITE_LO+4

      184     2916    2           ADDR(READRQS.REPLYHDR.RESULTS)->FU$READRES.DATA);
      185     2917    2        CALL M$WRITE (WRITE_LO);

   2917  6 000160   010720 630400 0                  EPPR0   WRITE_LO
         6 000161   040001 713400                    CLIMB   write
         6 000162   401400 401760                    pmme    nvectors=4

      186     2918
      187     2919    2   END DUMPBUFFER;

   2919  6 000163   200006 221300                    LDX1  ! J+2,,AUTO
         6 000164   000001 702211                    TSX2  ! 1,X1

PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:21   
      188     2920    1   END FUI$IOTEST;

   2920  6 000165   000000 702200 xent               TSX2  ! X66_MARET

PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:22   
--  Include file information  --

   CP_6.:LIBRARY  cannot be made into a system file and is referenced.
   FU_NFS_M.:FUA2TOU  is referenced.
   XSL_SOCKET_M.:LIBRARY  is referenced.
   CP_6_SUBS.:LIBRARY  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure FUI$IOTEST.
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:23   

 **** Variables and constants ****

  ****  Section 000  Data  FUI$IOTEST

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

 10527-0-0/w UBIN        r     1 BLKSZ                  10530-0-0/w UBIN        r     1 BYTETRANS
 10056-0-0/w STRC(1296)  r     1 CONTEXT1               10122-0-0/w STRC(1296)  r     1 CONTEXT2
 10322-0-0/w STRC(4716)  r     1 DATASEG                10166-0-0/w STRC(1656)  r     1 FILECTX
 10244-0-0/w STRC(1656)  r     1 FILECTXOUT             10532-0-0/w UBIN        r     1 MAX_LOOP
 10534-0-0/d STRC(2088)  r     1 OPEN_TESTFILE          10626-0-0/d STRC(2088)  r     1 OPEN_WRITEFILE
     0-0-0/w STRC(74556) r     1 READRQS                10526-0-0/w UBIN        r     1 SIZEBYTES
 10525-0-0/w UBIN        r     1 STARTBYTE               4027-0-0/w STRC(74556) r     1 WRITERQS
 10720-0-0/d STRC(432)   r     1 WRITE_LO

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w SBIN        r     1 I                          4-0-0/w SBIN        r     1 J

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w ASTR(684)   r     1 FU$READRES                 0-0-0/w ASTR(432)   r     1 FU$WRITEARGS
     0-0-0N  NULL        r     1 M$LO                       0-0-0N  NULL        r     1 M$TI
     0-0-0N  NULL        r     1 M$TO


   Procedure FUI$IOTEST requires 118 words for executable code.
   Procedure FUI$IOTEST requires 8 words of local(AUTO) storage.
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:24   

    No errors detected in file FUI$IOTEST.:FUA2TSI    .
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:25   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:26   
          MINI XREF LISTING

BLKSZ
      2522**DCL      2824>>ASSIGN
BYTETRANS
      2523**DCL      2846<<ASSIGN   2851<>CALL     2863>>ASSIGN
CONTEXT1
      2011**DCL      2823--ASSIGN
CONTEXT1.ARS#
      2044**DCL      2811<<ASSIGN
CONTEXT1.BUF$
      2045**DCL      2809<<ASSIGN
CONTEXT1.CONTREAD
      2043**DCL      2813<<ASSIGN
CONTEXT1.FCTX$
      2015**DCL      2814<<ASSIGN
CONTEXT1.FFLG#
      2041**DCL      2041--REDEF
CONTEXT1.FILEPOS
      2045**DCL      2046--REDEF
CONTEXT1.FILEPOS.CRECNO
      2045**DCL      2810<<ASSIGN
CONTEXT1.FILEPOS.FOFFSET
      2045**DCL      2046--REDEF    2812<<ASSIGN
CONTEXT2
      2064**DCL      2836--ASSIGN
CONTEXT2.ARS#
      2097**DCL      2794<<ASSIGN
CONTEXT2.BUF$
      2098**DCL      2792<<ASSIGN
CONTEXT2.CONTREAD
      2096**DCL      2796<<ASSIGN
CONTEXT2.FCTX$
      2068**DCL      2797<<ASSIGN
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:27   
CONTEXT2.FFLG#
      2094**DCL      2094--REDEF
CONTEXT2.FILEPOS
      2098**DCL      2099--REDEF
CONTEXT2.FILEPOS.CRECNO
      2098**DCL      2793<<ASSIGN
CONTEXT2.FILEPOS.FOFFSET
      2098**DCL      2099--REDEF    2795<<ASSIGN
DATASEG
      2322**DCL      2525--DCLINIT
FILECTX
      2116**DCL      2814--ASSIGN
FILECTX.CRECNO
      2143**DCL      2818<<ASSIGN
FILECTX.DCB#
      2143**DCL      2816<<ASSIGN
FILECTX.FATTR.XATTR.TEXTMODE
      2164**DCL      2817<<ASSIGN
FILECTX.FID.ASN
      2194**DCL      2195--REDEF
FILECTX.FOFFSET
      2203**DCL      2203--REDEF
FILECTXOUT
      2219**DCL      2797--ASSIGN
FILECTXOUT.CRECNO
      2246**DCL      2801<<ASSIGN
FILECTXOUT.DCB#
      2246**DCL      2799<<ASSIGN
FILECTXOUT.FATTR.SIZE
      2273**DCL      2840>>ASSIGN
FILECTXOUT.FATTR.XATTR.TEXTMODE
      2267**DCL      2800<<ASSIGN
FILECTXOUT.FID.ASN
      2297**DCL      2298--REDEF
FILECTXOUT.FOFFSET
      2306**DCL      2306--REDEF
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:28   
FU$READRES.COUNT
      2388**DCL      2388--IMP-SIZ  2830>>IF       2844>>ASSIGN   2846>>ASSIGN   2848>>ASSIGN   2915>>ASSIGN
FU$READRES.DATA
      2388**DCL      2848>>ASSIGN   2915--ASSIGN
FU$WRITEARGS.COUNT
      2430**DCL      2431--IMP-SIZ  2844<<ASSIGN   2848>>ASSIGN
FU$WRITEARGS.DATA
      2431**DCL      2848<<ASSIGN
FU$WRITEARGS.OFFSET
      2430**DCL      2840<<ASSIGN
FUI$RDRQS
      2534**DCL-ENT  2827--CALL
FUI$WRRQS
      2535**DCL-ENT  2851--CALL
I
      2527**DCL      2820<<DOINDEX
J
      2528**DCL      2806<<DOINDEX
M$EXIT
      2455**DCL-ENT  2874--CALL
M$OPEN
      2443**DCL-ENT  2772--CALL     2777--CALL     2780--CALL
M$TI
      2516**DCL      2816>>ASSIGN
M$TO
      2517**DCL      2799>>ASSIGN
M$WRITE
      2444**DCL-ENT  2917--CALL
M$XXX
      2455**DCL-ENT  2774--CALL     2782--CALL
MAX_LOOP
      2529**DCL      2820>>DOINDEX
OPEN_TESTFILE
      2608**DCL      2772<>CALL
OPEN_TESTFILE.ACSVEH_
      2610**DCL      2611--REDEF
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:29   
OPEN_TESTFILE.ALTKEYS_
      2616**DCL      2617--REDEF    2617--REDEF
OPEN_TESTFILE.HDR_
      2615**DCL      2616--REDEF
OPEN_TESTFILE.TAB_
      2614**DCL      2615--REDEF
OPEN_TESTFILE.UHL_
      2608**DCL      2609--REDEF    2609--REDEF
OPEN_TESTFILE.V
      2617**DCL      2608--DCLINIT
OPEN_TESTFILE.V.FSN#
      2648**DCL      2648--REDEF    2648--REDEF
OPEN_TESTFILE.WSN_
      2614**DCL      2614--REDEF
OPEN_WRITEFILE
      2724**DCL      2777<>CALL     2780<>CALL
OPEN_WRITEFILE.ACSVEH_
      2726**DCL      2727--REDEF
OPEN_WRITEFILE.ALTKEYS_
      2732**DCL      2733--REDEF    2733--REDEF
OPEN_WRITEFILE.HDR_
      2731**DCL      2732--REDEF
OPEN_WRITEFILE.TAB_
      2730**DCL      2731--REDEF
OPEN_WRITEFILE.UHL_
      2724**DCL      2725--REDEF    2725--REDEF
OPEN_WRITEFILE.V
      2733**DCL      2724--DCLINIT
OPEN_WRITEFILE.V.FSN#
      2764**DCL      2764--REDEF    2764--REDEF
OPEN_WRITEFILE.V.FUN#
      2743**DCL      2779<<ASSIGN
OPEN_WRITEFILE.WSN_
      2730**DCL      2730--REDEF
READRQS
      1832**DCL      2827<>CALL
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:30   
READRQS.CALLHDR
      1893**DCL      1898--REDEF
READRQS.CALLHDR.AUTH_CRED
      1895**DCL      1897--REDEF
READRQS.CALLHDR.XID
      1893**DCL      1893--REDEF
READRQS.REPLYHDR.AUTH_VERF_HID
      1902**DCL      1902--REDEF    1902--REDEF
READRQS.REPLYHDR.PVERS_HIGH
      1904**DCL      1904--REDEF
READRQS.REPLYHDR.PVERS_LOW
      1903**DCL      1903--REDEF    1904--REDEF
READRQS.REPLYHDR.REJECT_STAT
      1899**DCL      1899--REDEF    1900--REDEF
READRQS.REPLYHDR.RESULTS
      1903**DCL      2830--IF       2844--ASSIGN   2846--ASSIGN   2848--ASSIGN   2848--ASSIGN   2915--ASSIGN
      2915--ASSIGN
READRQS.REPLYHDR.VERS_HIGH
      1901**DCL      1901--REDEF    1901--REDEF
READRQS.REPLYHDR.VERS_LOW
      1900**DCL      1900--REDEF    1901--REDEF
READRQS.UCTX$
      1837**DCL      2823<<ASSIGN
SIZEBYTES
      2521**DCL      2824<<ASSIGN   2827<>CALL
STARTBYTE
      2520**DCL      2804<<ASSIGN   2827<>CALL     2851<>CALL     2863<<ASSIGN   2863>>ASSIGN
WRITERQS
      1921**DCL      2851<>CALL
WRITERQS.BODY
      1994**DCL      2838--ASSIGN
WRITERQS.BODY$
      1925**DCL      2838<<ASSIGN   2840>>ASSIGN   2844>>ASSIGN   2848>>ASSIGN   2848>>ASSIGN
WRITERQS.CALLHDR
      1982**DCL      1987--REDEF
WRITERQS.CALLHDR.AUTH_CRED
PL6.E3A0      #001=FUI$IOTEST File=FUI$IOTEST.:FUA2TSI                           FRI 11/21/97 11:33 Page:31   
      1984**DCL      1986--REDEF
WRITERQS.CALLHDR.REXMIT.F
      1982**DCL      2843<<ASSIGN
WRITERQS.CALLHDR.XID
      1982**DCL      1982--REDEF
WRITERQS.REPLYHDR.AUTH_VERF_HID
      1991**DCL      1991--REDEF    1991--REDEF
WRITERQS.REPLYHDR.PVERS_HIGH
      1993**DCL      1993--REDEF
WRITERQS.REPLYHDR.PVERS_LOW
      1992**DCL      1992--REDEF    1993--REDEF
WRITERQS.REPLYHDR.REJECT_STAT
      1988**DCL      1988--REDEF    1989--REDEF
WRITERQS.REPLYHDR.VERS_HIGH
      1990**DCL      1990--REDEF    1990--REDEF
WRITERQS.REPLYHDR.VERS_LOW
      1989**DCL      1989--REDEF    1990--REDEF
WRITERQS.UCTX$
      1926**DCL      2836<<ASSIGN
WRITE_LO IN PROCEDURE DUMPBUFFER
      2899**DCL      2917<>CALL
WRITE_LO.BUF_ IN PROCEDURE DUMPBUFFER
      2899**DCL      2915<<ASSIGN
WRITE_LO.STATION_ IN PROCEDURE DUMPBUFFER
      2901**DCL      2901--REDEF
WRITE_LO.V IN PROCEDURE DUMPBUFFER
      2902**DCL      2899--DCLINIT
WRITE_LO.V.DVBYTE.VFC# IN PROCEDURE DUMPBUFFER
      2908**DCL      2908--REDEF
