VERSION E05

PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:1    
        1        1        /*M* NKA$DEVIO Common NIO$QUE and SSV$EVENT interface for device io*/
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X*DMC,PLM=6,IND=2,ENU=2,DCI=4,CSU=2,ECU=2,THI=2,DTI=0*/
        8        8        /**/
        9        9        /**/
       10       10        NKA$DEVIO: PROC (FCN,DVBYTE,VFC,EVENT,STATION$) ALTRET;
       11       11        /**/
       12       12        /**/
       13       13        %INCLUDE B$JIT_C;
       14      327        %B$JIT0;
       15      416        %U$JIT1X;
       16      419        %M$JIT2X;
       17      422        %F$JIT3;
       18      427        %A$JIT6X;
       19      430        %INCLUDE F$DCB;
       20      479        %INCLUDE NI_DATA_R;
       21      916        %INCLUDE N_FC_C;
       22      953        %NI$DCT;
       23     1001        %INCLUDE NK_SUBS;
       24     1026        %INCLUDE F_FPTCODE_C;
       25     1062        %INCLUDE CP_6_SUBS;
       26     1602        %INCLUDE FOO_MAC_C;
       27     2350        /**/
       28     2351        %N$REQ (STCLASS="BASED(IOQ$)");
       29     2409        /**/
       30     2410        /**/
       31     2411    1   DCL FCN UBIN WORD;
       32     2412    1   DCL DVBYTE BIT(9) CALIGNED;
       33     2413    1   DCL VFC CHAR(1) UNAL;
       34     2414    1   DCL EVENT UBIN WORD;
       35     2415    1   DCL STATION$ PTR;
       36     2416    1   DCL IOQ$ PTR;
       37     2417    1   DCL QFCN UBIN WORD;
PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:2    
       38     2418    1   DCL DCB$ PTR;
       39     2419    1   DCL B$JIT$ PTR SYMREF;
       40     2420    1   DCL NIQ$GET ENTRY(1) ALTRET;
       41     2421    1   DCL FMD$GETBUF ENTRY(3);
       42     2422    1   DCL NIO$QUE ENTRY(1) ALTRET;
       43     2423    1   DCL FOG$BLDUR ENTRY(1) ALTRET;
       44     2424    1   DCL FOG$BLDURUC ENTRY(1) ALTRET;
       45     2425    1   DCL FOG$BLD ENTRY(1) ALTRET;
       46     2426        /**/
       47     2427    1   DCL SC_BNKFCN ENTRY CONV(2,0);
       48     2428        /**/
       49     2429        /* LOCAL AUTOMATIC STORAGE */
       50     2430    1   DCL BUF$ PTR;
       51     2431        %FO_GPARM (FPTN=GPARM,STCLASS=AUTO);
       52     2453        /**/
       53     2454    2         DO CASE (FCN);
       54     2455    2           CASE (MFC_READ);
       55     2456    2             QFCN=%N_READ;
       56     2457    2           CASE (MFC_WRITE);
       57     2458    2             QFCN=%N_WRITE;
       58     2459    2           CASE (MFC_WRUR);
       59     2460    2             QFCN=%N_WRASC;
       60     2461    2           CASE (MFC_WRURUC);
       61     2462    2             QFCN=%N_WRASC;
       62     2463    2           CASE (MFC_WRBIN);
       63     2464    2             QFCN=%N_WRBIN;
       64     2465    2           CASE (ELSE);
       65     2466    2             CALL SC_BNKFCN;
       66     2467        /*S*  SCREECH_CODE: NKA-S$BMDFCN
       67     2468              TYPE:    SUA
       68     2469              MESSAGE: Illegal function passed on device I/O
       69     2470              REMARKS: Several media layer functions which are legal for files
       70     2471                       are not legal for devices.  This screech occurs when a
       71     2472                       confused formatting layer passes a file function to
       72     2473                       NKA$DEVIO.  This screech code is also reported
       73     2474                       by KIA$UCIO (KIA-S$BMDFCN) AND KCI$RWCG (KCI-S$BMDFCN)
       74     2475                       in similar situations                                         */
PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:3    
       75     2476    2           END;
       76     2477    1         DCB$=B$JIT$->B$JIT.DCB$;
       77     2478    1         CALL NIQ$GET (IOQ$);
       78     2479    1         N$REQ.FC=QFCN;
       79     2480    1         N$REQ.USER#=B$JIT.USER;
       80     2481    1         N$REQ.BUF$=DCB$->F$DCB.UB$;
       81     2482    1         N$REQ.BUFSIZE=DCB$->F$DCB.UBYTES;
       82     2483    1         N$REQ.DCB$=DCB$;
       83     2484    1         IF DCB$->F$DCB.ASN=%COMGROUP# THEN
       84     2485    1           N$REQ.DLA.DCTX=DCB$->F$DCB.LDCTX;
       85     2486    1           ELSE
       86     2487    1           N$REQ.DLA.DCTX=DCB$->F$DCB.SETX;
       87     2488    1         N$REQ.DVE.DVBYTE=DVBYTE;
       88     2489    1         IF QFCN=%N_READ THEN N$REQ.OPFLG=OP_USER|OP_BPF|OP_ARS;
       89     2490    2           ELSE DO;
       90     2491    2           N$REQ.OPFLG=OP_USER|OP_BPF;
       91     2492    2           N$REQ.DVE.VFC=VFC;
       92     2493    2         END;
       93     2494    1         IF DCB$->F$DCB.WAIT=1 THEN N$REQ.OPFLG.WAIT='1'B;
       94     2495    2           ELSE DO;
       95     2496    2           N$REQ.EVNTINFO=EVENT;
       96     2497    2           N$REQ.NWIO=0;               /*NO-WAIT*/
       97     2498    2         END;
       98     2499    1         IF ADDR(STATION$)~=ADDR(NIL) THEN N$REQ.STATION.LSTA$=STATION$;
       99     2500    1         IF N$DCT$(N$REQ.DLA.DCTX)->NI$DCT.RESCOD=NK_NCOM THEN
      100     2501    2         DO;
      101     2502    2           CALL FMD$GETBUF (0,1,BUF$);
      102     2503    2           GPARM.BUF$=BUF$;
      103     2504    2           GPARM.REC$=DCB$->F$DCB.UB$;
      104     2505    2           IF N$REQ.BUFSIZE>511 THEN GPARM.RECL=511;
      105     2506    2             ELSE GPARM.RECL=N$REQ.BUFSIZE;
      106     2507    2           GPARM.VFC=VFC;
      107     2508    2           GPARM.REPEATS=1;
      108     2509    2           GPARM.DVBYTE=DVBYTE;
      109     2510    2           IF DVBYTE & %DVBYTE_BIN# THEN
      110     2511    2             GPARM.DVBYTE=GPARM.DVBYTE & (~%DVBYTE_BP#);
      111     2512    2           IF FCN = MFC_WRUR THEN CALL FOG$BLDUR (GPARM);
PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:4    
      112     2513    2             ELSE IF FCN = MFC_WRURUC THEN CALL FOG$BLDURUC (GPARM);
      113     2514    2               ELSE CALL FOG$BLD (GPARM);
      114     2515    2           N$REQ.RCT=0;
      115     2516    2           N$REQ.EAINFOX=1;
      116     2517    2           N$REQ.FC=%N_SYMB;
      117     2518    2           N$REQ.BUF$=BUF$;
      118     2519    2         END;
      119     2520    1         CALL NIO$QUE (N$REQ);
      120     2521    1         RETURN;
      121     2522        /**/
      122     2523    1   END;
      123     2524        /**/
      124     2525        /**/
      125     2526        %EOD;

PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:5    
--  Include file information  --

   FOO_MAC_C.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   F_FPTCODE_C.:E05TOU  is referenced.
   NK_SUBS.:E05TOU  is referenced.
   N_FC_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   NI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   F$DCB.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  is referenced.
      No diagnostics issued in procedure NKA$DEVIO.

   Procedure NKA$DEVIO requires 216 words for executable code.
   Procedure NKA$DEVIO requires 20 words of local(AUTO) storage.

PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:6    

 Object Unit name= NKA$DEVIO                                  File name= NKA$DEVIO.:E05TOU
 UTS= JUL 30 '97 03:43:05.40 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none   216    330  NKA$DEVIO
    1  RoData even  none     4      4  NKA$DEVIO

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes    yes     yes      Std        5  NKA$DEVIO

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       1 NIQ$GET
 yes     yes           Std       1 FOG$BLDURUC
 yes     yes           Std       1 NIO$QUE
         yes           Std       3 FMD$GETBUF
 yes     yes           Std       1 FOG$BLDUR
 yes     yes           Std       1 FOG$BLD
                       nStd      0 X66_AUTO_5
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:7    

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     SC_BNKFCN                             N$DCT$$                               N$FQ$
     NI$FQ$                                NI$IBUF$                              NI$RP$
     B$JIT$                                B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ASLENTSID                             ISSID
PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:8    


        1        1        /*M* NKA$DEVIO Common NIO$QUE and SSV$EVENT interface for device io*/
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X*DMC,PLM=6,IND=2,ENU=2,DCI=4,CSU=2,ECU=2,THI=2,DTI=0*/
        8        8        /**/
        9        9        /**/
       10       10        NKA$DEVIO: PROC (FCN,DVBYTE,VFC,EVENT,STATION$) ALTRET;

     10  0 000000   000000 700200 xent  NKA$DEVIO    TSX0  ! X66_AUTO_5
         0 000001   000024 000005                    ZERO    20,5

       11       11        /**/
       12       12        /**/
       13       13        %INCLUDE B$JIT_C;
       14      327        %B$JIT0;
       15      416        %U$JIT1X;
       16      419        %M$JIT2X;
       17      422        %F$JIT3;
       18      427        %A$JIT6X;
       19      430        %INCLUDE F$DCB;
       20      479        %INCLUDE NI_DATA_R;
       21      916        %INCLUDE N_FC_C;
       22      953        %NI$DCT;
       23     1001        %INCLUDE NK_SUBS;
       24     1026        %INCLUDE F_FPTCODE_C;
       25     1062        %INCLUDE CP_6_SUBS;
       26     1602        %INCLUDE FOO_MAC_C;
       27     2350        /**/
       28     2351        %N$REQ (STCLASS="BASED(IOQ$)");
       29     2409        /**/
       30     2410        /**/
       31     2411    1   DCL FCN UBIN WORD;
       32     2412    1   DCL DVBYTE BIT(9) CALIGNED;
PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:9    
       33     2413    1   DCL VFC CHAR(1) UNAL;
       34     2414    1   DCL EVENT UBIN WORD;
       35     2415    1   DCL STATION$ PTR;
       36     2416    1   DCL IOQ$ PTR;
       37     2417    1   DCL QFCN UBIN WORD;
       38     2418    1   DCL DCB$ PTR;
       39     2419    1   DCL B$JIT$ PTR SYMREF;
       40     2420    1   DCL NIQ$GET ENTRY(1) ALTRET;
       41     2421    1   DCL FMD$GETBUF ENTRY(3);
       42     2422    1   DCL NIO$QUE ENTRY(1) ALTRET;
       43     2423    1   DCL FOG$BLDUR ENTRY(1) ALTRET;
       44     2424    1   DCL FOG$BLDURUC ENTRY(1) ALTRET;
       45     2425    1   DCL FOG$BLD ENTRY(1) ALTRET;
       46     2426        /**/
       47     2427    1   DCL SC_BNKFCN ENTRY CONV(2,0);
       48     2428        /**/
       49     2429        /* LOCAL AUTOMATIC STORAGE */
       50     2430    1   DCL BUF$ PTR;
       51     2431        %FO_GPARM (FPTN=GPARM,STCLASS=AUTO);
       52     2453        /**/
       53     2454    2         DO CASE (FCN);

   2454  0 000002   200003 470500                    LDP0    @FCN,,AUTO
         0 000003   000000 235100                    LDA     0,,PR0
         0 000004   000016 115007                    CMPA    14,DL
         0 000005   000007 602005 0                  TNC     s:2454+5,AL
         0 000006   000044 710000 0                  TRA     s:2466
         0 000007   000025 710000 0                  TRA     s:2456
         0 000010   000030 710000 0                  TRA     s:2458
         0 000011   000044 710000 0                  TRA     s:2466
         0 000012   000044 710000 0                  TRA     s:2466
         0 000013   000044 710000 0                  TRA     s:2466
         0 000014   000044 710000 0                  TRA     s:2466
         0 000015   000044 710000 0                  TRA     s:2466
         0 000016   000044 710000 0                  TRA     s:2466
         0 000017   000044 710000 0                  TRA     s:2466
         0 000020   000044 710000 0                  TRA     s:2466
PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:10   
         0 000021   000033 710000 0                  TRA     s:2460
         0 000022   000041 710000 0                  TRA     s:2464
         0 000023   000044 710000 0                  TRA     s:2466
         0 000024   000036 710000 0                  TRA     s:2462

       54     2455    2           CASE (MFC_READ);

       55     2456    2             QFCN=%N_READ;

   2456  0 000025   000014 236007                    LDQ     12,DL
         0 000026   200011 756100                    STQ     QFCN,,AUTO
         0 000027   000046 710000 0                  TRA     s:2477

       56     2457    2           CASE (MFC_WRITE);

       57     2458    2             QFCN=%N_WRITE;

   2458  0 000030   000015 236007                    LDQ     13,DL
         0 000031   200011 756100                    STQ     QFCN,,AUTO
         0 000032   000046 710000 0                  TRA     s:2477

       58     2459    2           CASE (MFC_WRUR);

       59     2460    2             QFCN=%N_WRASC;

   2460  0 000033   000005 236007                    LDQ     5,DL
         0 000034   200011 756100                    STQ     QFCN,,AUTO
         0 000035   000046 710000 0                  TRA     s:2477

       60     2461    2           CASE (MFC_WRURUC);

       61     2462    2             QFCN=%N_WRASC;

   2462  0 000036   000005 236007                    LDQ     5,DL
         0 000037   200011 756100                    STQ     QFCN,,AUTO
         0 000040   000046 710000 0                  TRA     s:2477

PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:11   
       62     2463    2           CASE (MFC_WRBIN);

       63     2464    2             QFCN=%N_WRBIN;

   2464  0 000041   000003 236007                    LDQ     3,DL
         0 000042   200011 756100                    STQ     QFCN,,AUTO
         0 000043   000046 710000 0                  TRA     s:2477

       64     2465    2           CASE (ELSE);

       65     2466    2             CALL SC_BNKFCN;

   2466  0 000044   000000 713400 xsym               CLIMB   SC_BNKFCN
         0 000045   000000 600000 xsid               climb   nvectors=         0

       66     2467        /*S*  SCREECH_CODE: NKA-S$BMDFCN
       67     2468              TYPE:    SUA
       68     2469              MESSAGE: Illegal function passed on device I/O
       69     2470              REMARKS: Several media layer functions which are legal for files
       70     2471                       are not legal for devices.  This screech occurs when a
       71     2472                       confused formatting layer passes a file function to
       72     2473                       NKA$DEVIO.  This screech code is also reported
       73     2474                       by KIA$UCIO (KIA-S$BMDFCN) AND KCI$RWCG (KCI-S$BMDFCN)
       74     2475                       in similar situations                                         */
       75     2476    2           END;

       76     2477    1         DCB$=B$JIT$->B$JIT.DCB$;

   2477  0 000046   000000 470400 xsym               LDP0    B$JIT$
         0 000047   000232 236100                    LDQ     154,,PR0
         0 000050   200012 756100                    STQ     DCB$,,AUTO

       77     2478    1         CALL NIQ$GET (IOQ$);

   2478  0 000051   200010 631500                    EPPR1   IOQ$,,AUTO
         0 000052   200020 451500                    STP1    GPARM+4,,AUTO
         0 000053   200020 630500                    EPPR0   GPARM+4,,AUTO
PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:12   
         0 000054   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000055   000000 701000 xent               TSX1    NIQ$GET
         0 000056   000000 011000                    NOP     0

       78     2479    1         N$REQ.FC=QFCN;

   2479  0 000057   200010 470500                    LDP0    IOQ$,,AUTO
         0 000060   200011 236100                    LDQ     QFCN,,AUTO
         0 000061   000003 552104                    STBQ    3,'04'O,PR0

       79     2480    1         N$REQ.USER#=B$JIT.USER;

   2480  0 000062   000000 470400 xsym               LDP0    B$JIT$
         0 000063   200010 471500                    LDP1    IOQ$,,AUTO
         0 000064   000000 236100                    LDQ     0,,PR0
         0 000065   000022 772000                    QRL     18
         0 000066   100027 552104                    STBQ    23,'04'O,PR1

       80     2481    1         N$REQ.BUF$=DCB$->F$DCB.UB$;

   2481  0 000067   200012 473500                    LDP3    DCB$,,AUTO
         0 000070   300075 236100                    LDQ     61,,PR3
         0 000071   100005 756100                    STQ     5,,PR1

       81     2482    1         N$REQ.BUFSIZE=DCB$->F$DCB.UBYTES;

   2482  0 000072   200010 471500                    LDP1    IOQ$,,AUTO
         0 000073   300076 236100                    LDQ     62,,PR3
         0 000074   000020 736000                    QLS     16
         0 000075   100004 676100                    ERQ     4,,PR1
         0 000076   000034 376000 xsym               ANQ     B_VECTNIL+28
         0 000077   100004 656100                    ERSQ    4,,PR1

       82     2483    1         N$REQ.DCB$=DCB$;

   2483  0 000100   200012 236100                    LDQ     DCB$,,AUTO
         0 000101   200010 471500                    LDP1    IOQ$,,AUTO
PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:13   
         0 000102   100022 756100                    STQ     18,,PR1

       83     2484    1         IF DCB$->F$DCB.ASN=%COMGROUP# THEN

   2484  0 000103   300032 236100                    LDQ     26,,PR3
         0 000104   777000 376007                    ANQ     -512,DL
         0 000105   004000 116007                    CMPQ    2048,DL
         0 000106   000115 601000 0                  TNZ     s:2487

       84     2485    1           N$REQ.DLA.DCTX=DCB$->F$DCB.LDCTX;

   2485  0 000107   300051 236100                    LDQ     41,,PR3
         0 000110   000003 736000                    QLS     3
         0 000111   100001 676100                    ERQ     1,,PR1
         0 000112   777770 376003                    ANQ     -8,DU
         0 000113   100001 656100                    ERSQ    1,,PR1
         0 000114   000122 710000 0                  TRA     s:2488

       85     2486    1           ELSE
       86     2487    1           N$REQ.DLA.DCTX=DCB$->F$DCB.SETX;

   2487  0 000115   300051 236100                    LDQ     41,,PR3
         0 000116   000025 736000                    QLS     21
         0 000117   100001 676100                    ERQ     1,,PR1
         0 000120   777770 376003                    ANQ     -8,DU
         0 000121   100001 656100                    ERSQ    1,,PR1

       87     2488    1         N$REQ.DVE.DVBYTE=DVBYTE;

   2488  0 000122   200004 471500                    LDP1    @DVBYTE,,AUTO
         0 000123   200010 474500                    LDP4    IOQ$,,AUTO
         0 000124   000100 100500                    MLR     fill='000'O
         0 000125   100000 000001                    ADSC9   0,,PR1                   cn=0,n=1
         0 000126   400031 000001                    ADSC9   25,,PR4                  cn=0,n=1

       88     2489    1         IF QFCN=%N_READ THEN N$REQ.OPFLG=OP_USER|OP_BPF|OP_ARS;

PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:14   
   2489  0 000127   200011 235100                    LDA     QFCN,,AUTO
         0 000130   000014 115007                    CMPA    12,DL
         0 000131   000135 601000 0                  TNZ     s:2491

   2489  0 000132   000610 236007                    LDQ     392,DL
         0 000133   400004 552104                    STBQ    4,'04'O,PR4
         0 000134   000144 710000 0                  TRA     s:2494

       89     2490    2           ELSE DO;

       90     2491    2           N$REQ.OPFLG=OP_USER|OP_BPF;

   2491  0 000135   000410 236007                    LDQ     264,DL
         0 000136   400004 552104                    STBQ    4,'04'O,PR4

       91     2492    2           N$REQ.DVE.VFC=VFC;

   2492  0 000137   200005 474500                    LDP4    @VFC,,AUTO
         0 000140   200010 475500                    LDP5    IOQ$,,AUTO
         0 000141   040100 100500                    MLR     fill='040'O
         0 000142   400000 000001                    ADSC9   0,,PR4                   cn=0,n=1
         0 000143   500031 200001                    ADSC9   25,,PR5                  cn=1,n=1

       92     2493    2         END;

       93     2494    1         IF DCB$->F$DCB.WAIT=1 THEN N$REQ.OPFLG.WAIT='1'B;

   2494  0 000144   300064 236100                    LDQ     52,,PR3
         0 000145   000020 376007                    ANQ     16,DL
         0 000146   000020 116007                    CMPQ    16,DL
         0 000147   000154 601000 0                  TNZ     s:2496

   2494  0 000150   200010 474500                    LDP4    IOQ$,,AUTO
         0 000151   000020 236007                    LDQ     16,DL
         0 000152   400004 256100                    ORSQ    4,,PR4
         0 000153   000162 710000 0                  TRA     s:2499

PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:15   
       94     2495    2           ELSE DO;

       95     2496    2           N$REQ.EVNTINFO=EVENT;

   2496  0 000154   200006 474500                    LDP4    @EVENT,,AUTO
         0 000155   200010 475500                    LDP5    IOQ$,,AUTO
         0 000156   400000 235100                    LDA     0,,PR4
         0 000157   500026 755100                    STA     22,,PR5

       96     2497    2           N$REQ.NWIO=0;               /*NO-WAIT*/

   2497  0 000160   000000 236000 1                  LDQ     0
         0 000161   500031 356100                    ANSQ    25,,PR5

       97     2498    2         END;

       98     2499    1         IF ADDR(STATION$)~=ADDR(NIL) THEN N$REQ.STATION.LSTA$=STATION$;

   2499  0 000162   200007 236100                    LDQ     @STATION$,,AUTO
         0 000163   000001 116000 xsym               CMPQ    B_VECTNIL+1
         0 000164   000171 600000 0                  TZE     s:2500

   2499  0 000165   200007 474500                    LDP4    @STATION$,,AUTO
         0 000166   400000 236100                    LDQ     0,,PR4
         0 000167   200010 475500                    LDP5    IOQ$,,AUTO
         0 000170   500013 756100                    STQ     11,,PR5

       99     2500    1         IF N$DCT$(N$REQ.DLA.DCTX)->NI$DCT.RESCOD=NK_NCOM THEN

   2500  0 000171   200010 474500                    LDP4    IOQ$,,AUTO
         0 000172   400001 236100                    LDQ     1,,PR4
         0 000173   000025 772000                    QRL     21
         0 000174   000000 475400 xsym               LDP5    N$DCT$$
         0 000175   500000 476506                    LDP6    0,QL,PR5
         0 000176   600006 236100                    LDQ     6,,PR6
         0 000177   000017 316007                    CANQ    15,DL
         0 000200   000323 601000 0                  TNZ     s:2520
PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:16   

      100     2501    2         DO;

      101     2502    2           CALL FMD$GETBUF (0,1,BUF$);

   2502  0 000201   200013 636500                    EPPR6   BUF$,,AUTO
         0 000202   200022 456500                    STP6    GPARM+6,,AUTO
         0 000203   000002 237000 1                  LDAQ    2
         0 000204   200020 757100                    STAQ    GPARM+4,,AUTO
         0 000205   200020 630500                    EPPR0   GPARM+4,,AUTO
         0 000206   000021 631400 xsym               EPPR1   B_VECTNIL+17
         0 000207   000000 701000 xent               TSX1    FMD$GETBUF
         0 000210   000000 011000                    NOP     0

      102     2503    2           GPARM.BUF$=BUF$;

   2503  0 000211   200013 236100                    LDQ     BUF$,,AUTO
         0 000212   200014 756100                    STQ     GPARM,,AUTO

      103     2504    2           GPARM.REC$=DCB$->F$DCB.UB$;

   2504  0 000213   200012 470500                    LDP0    DCB$,,AUTO
         0 000214   000075 236100                    LDQ     61,,PR0
         0 000215   200015 756100                    STQ     GPARM+1,,AUTO

      104     2505    2           IF N$REQ.BUFSIZE>511 THEN GPARM.RECL=511;

   2505  0 000216   200010 471500                    LDP1    IOQ$,,AUTO
         0 000217   100004 236100                    LDQ     4,,PR1
         0 000220   000034 376000 xsym               ANQ     B_VECTNIL+28
         0 000221   000200 116003                    CMPQ    128,DU
         0 000222   000226 602000 0                  TNC     s:2506

   2505  0 000223   777000 236007                    LDQ     -512,DL
         0 000224   200016 552110                    STBQ    GPARM+2,'10'O,AUTO
         0 000225   000231 710000 0                  TRA     s:2507

PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:17   
      105     2506    2             ELSE GPARM.RECL=N$REQ.BUFSIZE;

   2506  0 000226   100004 236100                    LDQ     4,,PR1
         0 000227   000007 772000                    QRL     7
         0 000230   200016 552110                    STBQ    GPARM+2,'10'O,AUTO

      106     2507    2           GPARM.VFC=VFC;

   2507  0 000231   200005 473500                    LDP3    @VFC,,AUTO
         0 000232   040100 100500                    MLR     fill='040'O
         0 000233   300000 000001                    ADSC9   0,,PR3                   cn=0,n=1
         0 000234   200016 000001                    ADSC9   GPARM+2,,AUTO            cn=0,n=1

      107     2508    2           GPARM.REPEATS=1;

   2508  0 000235   000001 236007                    LDQ     1,DL
         0 000236   200016 552104                    STBQ    GPARM+2,'04'O,AUTO

      108     2509    2           GPARM.DVBYTE=DVBYTE;

   2509  0 000237   200004 474500                    LDP4    @DVBYTE,,AUTO
         0 000240   000100 100500                    MLR     fill='000'O
         0 000241   400000 000001                    ADSC9   0,,PR4                   cn=0,n=1
         0 000242   200016 200001                    ADSC9   GPARM+2,,AUTO            cn=1,n=1

      109     2510    2           IF DVBYTE & %DVBYTE_BIN# THEN

   2510  0 000243   000100 100500                    MLR     fill='000'O
         0 000244   400000 000001                    ADSC9   0,,PR4                   cn=0,n=1
         0 000245   200020 000004                    ADSC9   GPARM+4,,AUTO            cn=0,n=4
         0 000246   200020 236100                    LDQ     GPARM+4,,AUTO
         0 000247   040000 376003                    ANQ     16384,DU
         0 000250   000257 600000 0                  TZE     s:2512

      110     2511    2             GPARM.DVBYTE=GPARM.DVBYTE & (~%DVBYTE_BP#);

   2511  0 000251   200016 236100                    LDQ     GPARM+2,,AUTO
PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:18   
         0 000252   000011 736000                    QLS     9
         0 000253   777000 376003                    ANQ     -512,DU
         0 000254   577000 376003                    ANQ     -66048,DU
         0 000255   000011 772000                    QRL     9
         0 000256   200016 552120                    STBQ    GPARM+2,'20'O,AUTO

      111     2512    2           IF FCN = MFC_WRUR THEN CALL FOG$BLDUR (GPARM);

   2512  0 000257   200003 475500                    LDP5    @FCN,,AUTO
         0 000260   500000 235100                    LDA     0,,PR5
         0 000261   000012 115007                    CMPA    10,DL
         0 000262   000272 601000 0                  TNZ     s:2513

   2512  0 000263   200014 636500                    EPPR6   GPARM,,AUTO
         0 000264   200020 456500                    STP6    GPARM+4,,AUTO
         0 000265   200020 630500                    EPPR0   GPARM+4,,AUTO
         0 000266   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000267   000000 701000 xent               TSX1    FOG$BLDUR
         0 000270   000000 011000                    NOP     0
         0 000271   000311 710000 0                  TRA     s:2515

      112     2513    2             ELSE IF FCN = MFC_WRURUC THEN CALL FOG$BLDURUC (GPARM);

   2513  0 000272   000015 115007                    CMPA    13,DL
         0 000273   000303 601000 0                  TNZ     s:2514

   2513  0 000274   200014 636500                    EPPR6   GPARM,,AUTO
         0 000275   200020 456500                    STP6    GPARM+4,,AUTO
         0 000276   200020 630500                    EPPR0   GPARM+4,,AUTO
         0 000277   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000300   000000 701000 xent               TSX1    FOG$BLDURUC
         0 000301   000000 011000                    NOP     0
         0 000302   000311 710000 0                  TRA     s:2515

      113     2514    2               ELSE CALL FOG$BLD (GPARM);

   2514  0 000303   200014 636500                    EPPR6   GPARM,,AUTO
PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:19   
         0 000304   200020 456500                    STP6    GPARM+4,,AUTO
         0 000305   200020 630500                    EPPR0   GPARM+4,,AUTO
         0 000306   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000307   000000 701000 xent               TSX1    FOG$BLD
         0 000310   000000 011000                    NOP     0

      114     2515    2           N$REQ.RCT=0;

   2515  0 000311   000000 220003                    LDX0    0,DU
         0 000312   200010 470500                    LDP0    IOQ$,,AUTO
         0 000313   000030 440100                    SXL0    24,,PR0

      115     2516    2           N$REQ.EAINFOX=1;

   2516  0 000314   000001 235007                    LDA     1,DL
         0 000315   000025 755100                    STA     21,,PR0

      116     2517    2           N$REQ.FC=%N_SYMB;

   2517  0 000316   000032 236007                    LDQ     26,DL
         0 000317   000003 552104                    STBQ    3,'04'O,PR0

      117     2518    2           N$REQ.BUF$=BUF$;

   2518  0 000320   200013 236100                    LDQ     BUF$,,AUTO
         0 000321   200010 470500                    LDP0    IOQ$,,AUTO
         0 000322   000005 756100                    STQ     5,,PR0

      118     2519    2         END;

      119     2520    1         CALL NIO$QUE (N$REQ);

   2520  0 000323   200010 630500                    EPPR0   IOQ$,,AUTO
         0 000324   000017 631400 xsym               EPPR1   B_VECTNIL+15
         0 000325   000000 701000 xent               TSX1    NIO$QUE
         0 000326   000000 011000                    NOP     0

PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:20   
      120     2521    1         RETURN;

   2521  0 000327   000000 702200 xent               TSX2  ! X66_ARET
      121     2522        /**/
      122     2523    1   END;
      123     2524        /**/
      124     2525        /**/
      125     2526        %EOD;

PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:21   
--  Include file information  --

   FOO_MAC_C.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   F_FPTCODE_C.:E05TOU  is referenced.
   NK_SUBS.:E05TOU  is referenced.
   N_FC_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   NI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   F$DCB.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  is referenced.
      No diagnostics issued in procedure NKA$DEVIO.
PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:22   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @DVBYTE                    6-0-0/w PTR         r     1 @EVENT
     3-0-0/w PTR         r     1 @FCN                       7-0-0/w PTR         r     1 @STATION$
     5-0-0/w PTR         r     1 @VFC                      13-0-0/w PTR         r     1 BUF$
    12-0-0/w PTR         r     1 DCB$                      *0-0-0/c BIT (9)     r     1 DVBYTE
    *0-0-0/w UBIN        r     1 EVENT                     *0-0-0/w UBIN        r     1 FCN
    14-0-0/w STRC(108)   r     1 GPARM                     10-0-0/w PTR         r     1 IOQ$
    11-0-0/w UBIN        r     1 QFCN                      *0-0-0/w PTR         r     1 STATION$
    *0-0-0/c CHAR        r     1 VFC

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$JIT$                     0-0-0/w PTR         r     1 N$DCT$$
     0-0-0/w PTR         r     1 N$FQ$                      0-0-0/w PTR         r     1 NI$FQ$
     0-0-0/w PTR         r     1 NI$IBUF$                   0-0-0/w PTR         r     1 NI$RP$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(7560)  r     1 B$JIT                      0-0-0/d ASTR(3528)  r     1 F$DCB
     0-0-0/w PTR         r     1 N$DCT$(0:0)                0-0-0/d STRC(1080)  r     1 N$REQ
     0-0-0/w STRC(1332)  r     1 NI$DCT


   Procedure NKA$DEVIO requires 216 words for executable code.
PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:23   
   Procedure NKA$DEVIO requires 20 words of local(AUTO) storage.
PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:24   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:25   
          MINI XREF LISTING

B$JIT.DCB$
       423**DCL      2477>>ASSIGN
B$JIT.ERR.MID
       334**DCL       334--REDEF
B$JIT.USER
       333**DCL      2480>>ASSIGN
B$JIT$
      2419**DCL       328--IMP-PTR  2477>>ASSIGN   2480>>ASSIGN
BUF$
      2430**DCL      2502<>CALL     2503>>ASSIGN   2518>>ASSIGN
DCB$
      2418**DCL      2477<<ASSIGN   2481>>ASSIGN   2482>>ASSIGN   2483>>ASSIGN   2484>>IF       2485>>ASSIGN
      2487>>ASSIGN   2494>>IF       2504>>ASSIGN
DVBYTE
      2412**DCL        10--PROC     2488>>ASSIGN   2509>>ASSIGN   2510>>IF
EVENT
      2414**DCL        10--PROC     2496>>ASSIGN
F$DCB.ACTPOS
       456**DCL       456--REDEF
F$DCB.ARS
       431**DCL       431--REDEF
F$DCB.ASN
       446**DCL      2484>>IF
F$DCB.ATTR
       449**DCL       450--REDEF
F$DCB.BORROW
       464**DCL       464--REDEF     464--REDEF     464--REDEF
F$DCB.DCBNAME.L
       478**DCL       478--IMP-SIZ
F$DCB.EOMCHAR
       435**DCL       435--REDEF
F$DCB.FLDID
PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:26   
       459**DCL       459--REDEF
F$DCB.FORM$
       453**DCL       453--REDEF
F$DCB.FSECT
       469**DCL       469--REDEF
F$DCB.FSN
       446**DCL       446--REDEF     446--REDEF     447--REDEF
F$DCB.HEADER$
       452**DCL       452--REDEF
F$DCB.IXTNSIZE
       450**DCL       450--REDEF
F$DCB.LASTSTA$
       440**DCL       440--REDEF
F$DCB.LDCTX
       453**DCL      2485>>ASSIGN
F$DCB.LVL
       465**DCL       465--REDEF
F$DCB.NAME.C
       440**DCL       440--REDEF
F$DCB.NOEOF
       461**DCL       461--REDEF
F$DCB.NRECS
       451**DCL       451--REDEF
F$DCB.NRECX
       470**DCL       470--REDEF
F$DCB.OHDR
       462**DCL       462--REDEF
F$DCB.ORG
       445**DCL       445--REDEF
F$DCB.PRECNO
       468**DCL       468--REDEF
F$DCB.RCSZ
       473**DCL       473--REDEF
F$DCB.RES
       441**DCL       441--REDEF
F$DCB.SETX
PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:27   
       453**DCL       453--REDEF    2487>>ASSIGN
F$DCB.TAB$
       452**DCL       453--REDEF
F$DCB.TDA
       467**DCL       467--REDEF
F$DCB.UB$
       469**DCL      2481>>ASSIGN   2504>>ASSIGN
F$DCB.UBYTES
       469**DCL      2482>>ASSIGN
F$DCB.WAIT
       463**DCL      2494>>IF
F$DCB.WSN
       442**DCL       442--REDEF
FCN
      2411**DCL        10--PROC     2454>>DOCASE   2512>>IF       2513>>IF
FMD$GETBUF
      2421**DCL-ENT  2502--CALL
FOG$BLD
      2425**DCL-ENT  2514--CALL
FOG$BLDUR
      2423**DCL-ENT  2512--CALL
FOG$BLDURUC
      2424**DCL-ENT  2513--CALL
GPARM
      2444**DCL      2512<>CALL     2513<>CALL     2514<>CALL
GPARM.BUF$
      2445**DCL      2503<<ASSIGN
GPARM.DVBYTE
      2449**DCL      2509<<ASSIGN   2511<<ASSIGN   2511>>ASSIGN
GPARM.REC$
      2446**DCL      2504<<ASSIGN
GPARM.RECL
      2450**DCL      2505<<ASSIGN   2506<<ASSIGN
GPARM.REPEATS
      2451**DCL      2508<<ASSIGN
GPARM.VFC
PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:28   
      2447**DCL      2448--REDEF    2507<<ASSIGN
IOQ$
      2416**DCL      2360--IMP-PTR  2478<>CALL     2479>>ASSIGN   2480>>ASSIGN   2481>>ASSIGN   2482>>ASSIGN
      2483>>ASSIGN   2485>>ASSIGN   2487>>ASSIGN   2488>>ASSIGN   2489>>ASSIGN   2491>>ASSIGN   2492>>ASSIGN
      2494>>ASSIGN   2496>>ASSIGN   2497>>ASSIGN   2499>>ASSIGN   2500>>IF       2505>>IF       2506>>ASSIGN
      2515>>ASSIGN   2516>>ASSIGN   2517>>ASSIGN   2518>>ASSIGN   2520>>CALL
N$DCT$
       911**DCL      2500>>IF
N$DCT$$
       777**DCL       911--IMP-PTR  2500>>IF
N$FQ$
       777**DCL       912--IMP-PTR
N$REQ
      2360**DCL      2520<>CALL
N$REQ.BUF$
      2369**DCL      2481<<ASSIGN   2518<<ASSIGN
N$REQ.BUFADDR
      2369**DCL      2370--REDEF    2370--REDEF
N$REQ.BUFSIZE
      2363**DCL      2482<<ASSIGN   2505>>IF       2506>>ASSIGN
N$REQ.DCB$
      2391**DCL      2483<<ASSIGN
N$REQ.DLA.DCTX
      2360**DCL      2485<<ASSIGN   2487<<ASSIGN   2500>>IF
N$REQ.DLA.DRELADDR
      2361**DCL      2361--REDEF
N$REQ.DVE.DVBYTE
      2395**DCL      2488<<ASSIGN
N$REQ.DVE.EOMCHAR
      2398**DCL      2399--REDEF
N$REQ.DVE.VFC
      2399**DCL      2492<<ASSIGN
N$REQ.EAINFO
      2392**DCL      2392--REDEF
N$REQ.EAINFOX
      2392**DCL      2393--REDEF    2516<<ASSIGN
PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:29   
N$REQ.EVNTINFO
      2393**DCL      2393--REDEF    2496<<ASSIGN
N$REQ.FC
      2363**DCL      2479<<ASSIGN   2517<<ASSIGN
N$REQ.NWIO
      2399**DCL      2497<<ASSIGN
N$REQ.OPFLG
      2366**DCL      2489<<ASSIGN   2491<<ASSIGN
N$REQ.OPFLG.WAIT
      2367**DCL      2494<<ASSIGN
N$REQ.RCT
      2395**DCL      2515<<ASSIGN
N$REQ.STATION.LSTA$
      2373**DCL      2499<<ASSIGN
N$REQ.STATUS
      2374**DCL      2380--REDEF
N$REQ.USER#
      2394**DCL      2480<<ASSIGN
N$REQ_INIT.BUFADDR
       796**DCL       797--REDEF     797--REDEF
N$REQ_INIT.DLA.DRELADDR
       788**DCL       788--REDEF
N$REQ_INIT.DVE.EOMCHAR
       825**DCL       826--REDEF
N$REQ_INIT.EAINFO
       819**DCL       819--REDEF
N$REQ_INIT.EAINFOX
       819**DCL       820--REDEF
N$REQ_INIT.EVNTINFO
       820**DCL       820--REDEF
N$REQ_INIT.STATUS
       801**DCL       807--REDEF
NI$DCT.DP
       982**DCL       989--REDEF     992--REDEF     993--REDEF     995--REDEF     995--REDEF     996--REDEF
       997--REDEF     997--REDEF
NI$DCT.MPC.IOCHANX
PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:30   
       990**DCL       990--REDEF
NI$DCT.RESCOD
       969**DCL      2500>>IF
NI$FQ$
       837**DCL       913--IMP-PTR
NI$IBUF$
       837**DCL       913--IMP-PTR
NI$IMXMBX_INIT.PAGED_BASE
       847**DCL       848--REDEF     848--REDEF
NI$IMXMBX_INIT.SIZE
       849**DCL       849--REDEF
NI$REQ_INIT.DCW
       871**DCL       874--REDEF
NI$REQ_INIT.DCW.TALLY
       872**DCL       872--REDEF
NI$REQ_INIT.IDCW.EXTA
       874**DCL       874--REDEF
NI$REQ_INIT.PCW
       876**DCL       880--REDEF
NI$REQ_INIT.SEEK
       881**DCL       882--REDEF     883--REDEF
NI$RP$
       885**DCL       915--IMP-PTR
NIO$QUE
      2422**DCL-ENT  2520--CALL
NIQ$GET
      2420**DCL-ENT  2478--CALL
NI_MBX_INIT.DCW.CONTROL.AE
       907**DCL       907--REDEF
NI_MBX_INIT.LPW.CONTROL.AE
       903**DCL       903--REDEF
QFCN
      2417**DCL      2456<<ASSIGN   2458<<ASSIGN   2460<<ASSIGN   2462<<ASSIGN   2464<<ASSIGN   2479>>ASSIGN
      2489>>IF
SC_BNKFCN
      2427**DCL-ENT  2466--CALL
PL6.E3A0      #001=NKA$DEVIO File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:31   
STATION$
      2415**DCL        10--PROC     2499--IF       2499>>ASSIGN
VFC
      2413**DCL        10--PROC     2492>>ASSIGN   2507>>ASSIGN

PL6.E3A0      #002=NKA$EVENT File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:32   
      126        1        /*T***********************************************************/
      127        2        /*T*                                                         */
      128        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      129        4        /*T*                                                         */
      130        5        /*T***********************************************************/
      131        6        /**/
      132        7        /**/
      133        8        NKA$EVENT: PROC (TYC,EVENT);
      134        9        /**/
      135       10        /**/
      136       11        %INCLUDE B$JIT_C;
      137      325        %B$JIT0;
      138      414        %U$JIT1X;
      139      417        %M$JIT2X;
      140      420        %F$JIT3;
      141      425        %A$JIT6X;
      142      428        %INCLUDE F$DCB;
      143      477        %INCLUDE CP_6;
      144     6036        %INCLUDE CP_6_SUBS;
      145     6576        /**/
      146     6577        %B$EVNT;
      147     6590        %B$NWIO (NAME=NWIO,STCLASS="",PARONLY=1);
      148     6671        %VLP_STATION (FPTN=VSTA,STCLASS=BASED);
      149     6698        /**/
      150     6699        /**/
      151     6700    1   DCL TYC BIT(36) ALIGNED;
      152     6701    1   DCL EVENT UBIN WORD;
      153     6702    1   DCL DCB$ PTR;
      154     6703    1   DCL DOMN UBIN WORD;
      155     6704    1   DCL B$JIT$ PTR SYMREF;
      156     6705    1   DCL FMO$GETDOMAIN ENTRY(1);
      157     6706    1   DCL SSV$EVENT ENTRY(7);
      158     6707        /**/
      159     6708        /**/
      160     6709    1         DCB$=B$JIT.DCB$;
      161     6710    1         IF DCB$->F$DCB.ASN=%COMGROUP#
      162     6711    1           OR (DCB$->F$DCB.IASN=%STREAM#
PL6.E3A0      #002=NKA$EVENT File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:33   
      163     6712    2           AND DCB$->F$DCB.CFU$->F$DCB.ASN=%COMGROUP#) THEN DO;
      164     6713    2           NWIO.P#=SIZEW(NWIO)-SIZEW(NWIO.P#);
      165     6714    2           NWIO.CGPARM=DCB$->F$DCB.LASTSTA$->VSTA;
      166     6715    2         END;
      167     6716    1           ELSE NWIO.P#=SIZEW(NWIO)-SIZEW(NWIO.P#)-SIZEW(NWIO.CGPARM);
      168     6717    1         NWIO.TYC=TYC;
      169     6718    1         NWIO.ARS=DCB$->F$DCB.ARS;
      170     6719    1         NWIO.DVE.DVBYTE=DCB$->F$DCB.DVBYTE;
      171     6720    1         NWIO.DVE.EOMCHAR=DCB$->F$DCB.EOMCHAR;
      172     6721    1         NWIO.IOERRCODE = B$JIT.ERR;
      173     6722    1         CALL FMO$GETDOMAIN (DOMN);
      174     6723    1         CALL SSV$EVENT (B$JIT.USER,DOMN,%EVSC_IO#,EVENT,B$JIT.ERR,ADDR(NWIO));
      175     6724    1         RETURN;
      176     6725        /**/
      177     6726    1   END;
      178     6727        /**/
      179     6728        /**/

PL6.E3A0      #002=NKA$EVENT File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:34   
--  Include file information  --

   CP_6_SUBS.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   F$DCB.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  is referenced.
      No diagnostics issued in procedure NKA$EVENT.

   Procedure NKA$EVENT requires 68 words for executable code.
   Procedure NKA$EVENT requires 28 words of local(AUTO) storage.

    No errors detected in file NKA$DEVIO.:E05TSI    .

PL6.E3A0      #002=NKA$EVENT File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:35   

 Object Unit name= NKA$EVENT                                  File name= NKA$DEVIO.:E05TOU
 UTS= JUL 30 '97 03:43:49.12 WED                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Proc  even  none    68    104  NKA$EVENT
    2  RoData even  none     1      1  NKA$EVENT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes            yes      Std        2  NKA$EVENT

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       1 FMO$GETDOMAIN
         yes           Std       7 SSV$EVENT
                       nStd      0 X66_AUTO_2
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  B$JIT$                                B_VECTNIL
PL6.E3A0      #002=NKA$EVENT File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:36   

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #002=NKA$EVENT File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:37   


      126        1        /*T***********************************************************/
      127        2        /*T*                                                         */
      128        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      129        4        /*T*                                                         */
      130        5        /*T***********************************************************/
      131        6        /**/
      132        7        /**/
      133        8        NKA$EVENT: PROC (TYC,EVENT);

      8  1 000000   000000 700200 xent  NKA$EVENT    TSX0  ! X66_AUTO_2
         1 000001   000034 000002                    ZERO    28,2

      134        9        /**/
      135       10        /**/
      136       11        %INCLUDE B$JIT_C;
      137      325        %B$JIT0;
      138      414        %U$JIT1X;
      139      417        %M$JIT2X;
      140      420        %F$JIT3;
      141      425        %A$JIT6X;
      142      428        %INCLUDE F$DCB;
      143      477        %INCLUDE CP_6;
      144     6036        %INCLUDE CP_6_SUBS;
      145     6576        /**/
      146     6577        %B$EVNT;
      147     6590        %B$NWIO (NAME=NWIO,STCLASS="",PARONLY=1);
      148     6671        %VLP_STATION (FPTN=VSTA,STCLASS=BASED);
      149     6698        /**/
      150     6699        /**/
      151     6700    1   DCL TYC BIT(36) ALIGNED;
      152     6701    1   DCL EVENT UBIN WORD;
      153     6702    1   DCL DCB$ PTR;
      154     6703    1   DCL DOMN UBIN WORD;
      155     6704    1   DCL B$JIT$ PTR SYMREF;
      156     6705    1   DCL FMO$GETDOMAIN ENTRY(1);
      157     6706    1   DCL SSV$EVENT ENTRY(7);
PL6.E3A0      #002=NKA$EVENT File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:38   
      158     6707        /**/
      159     6708        /**/
      160     6709    1         DCB$=B$JIT.DCB$;

   6709  1 000002   000000 470400 xsym               LDP0    B$JIT$
         1 000003   000232 236100                    LDQ     154,,PR0
         1 000004   200022 756100                    STQ     DCB$,,AUTO

      161     6710    1         IF DCB$->F$DCB.ASN=%COMGROUP#

   6710  1 000005   200022 471500                    LDP1    DCB$,,AUTO
         1 000006   100032 236100                    LDQ     26,,PR1
         1 000007   777000 376007                    ANQ     -512,DL
         1 000010   004000 116007                    CMPQ    2048,DL
         1 000011   000023 600000 1                  TZE     s:6713
         1 000012   100103 236100                    LDQ     67,,PR1
         1 000013   000777 376007                    ANQ     511,DL
         1 000014   000005 116007                    CMPQ    5,DL
         1 000015   000032 601000 1                  TNZ     s:6716
         1 000016   100066 473500                    LDP3    54,,PR1
         1 000017   300032 236100                    LDQ     26,,PR3
         1 000020   777000 376007                    ANQ     -512,DL
         1 000021   004000 116007                    CMPQ    2048,DL
         1 000022   000032 601000 1                  TNZ     s:6716

      162     6711    1           OR (DCB$->F$DCB.IASN=%STREAM#
      163     6712    2           AND DCB$->F$DCB.CFU$->F$DCB.ASN=%COMGROUP#) THEN DO;

      164     6713    2           NWIO.P#=SIZEW(NWIO)-SIZEW(NWIO.P#);

   6713  1 000023   000014 235007                    LDA     12,DL
         1 000024   200005 755100                    STA     NWIO,,AUTO

      165     6714    2           NWIO.CGPARM=DCB$->F$DCB.LASTSTA$->VSTA;

   6714  1 000025   100007 473500                    LDP3    7,,PR1
         1 000026   000100 100500                    MLR     fill='000'O
PL6.E3A0      #002=NKA$EVENT File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:39   
         1 000027   300000 000040                    ADSC9   0,,PR3                   cn=0,n=32
         1 000030   200011 000040                    ADSC9   NWIO+4,,AUTO             cn=0,n=32

      166     6715    2         END;

   6715  1 000031   000034 710000 1                  TRA     s:6717

      167     6716    1           ELSE NWIO.P#=SIZEW(NWIO)-SIZEW(NWIO.P#)-SIZEW(NWIO.CGPARM);

   6716  1 000032   000004 235007                    LDA     4,DL
         1 000033   200005 755100                    STA     NWIO,,AUTO

      168     6717    1         NWIO.TYC=TYC;

   6717  1 000034   200003 473500                    LDP3    @TYC,,AUTO
         1 000035   300000 236100                    LDQ     0,,PR3
         1 000036   200006 756100                    STQ     NWIO+1,,AUTO

      169     6718    1         NWIO.ARS=DCB$->F$DCB.ARS;

   6718  1 000037   100000 235100                    LDA     0,,PR1
         1 000040   200007 755100                    STA     NWIO+2,,AUTO

      170     6719    1         NWIO.DVE.DVBYTE=DCB$->F$DCB.DVBYTE;

   6719  1 000041   100003 236100                    LDQ     3,,PR1
         1 000042   200010 676100                    ERQ     NWIO+3,,AUTO
         1 000043   776000 376003                    ANQ     -1024,DU
         1 000044   200010 656100                    ERSQ    NWIO+3,,AUTO

      171     6720    1         NWIO.DVE.EOMCHAR=DCB$->F$DCB.EOMCHAR;

   6720  1 000045   100003 236100                    LDQ     3,,PR1
         1 000046   000022 736000                    QLS     18
         1 000047   200010 552120                    STBQ    NWIO+3,'20'O,AUTO

      172     6721    1         NWIO.IOERRCODE = B$JIT.ERR;
PL6.E3A0      #002=NKA$EVENT File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:40   

   6721  1 000050   000012 236100                    LDQ     10,,PR0
         1 000051   200021 756100                    STQ     NWIO+12,,AUTO

      173     6722    1         CALL FMO$GETDOMAIN (DOMN);

   6722  1 000052   200023 634500                    EPPR4   DOMN,,AUTO
         1 000053   200024 454500                    STP4    DOMN+1,,AUTO
         1 000054   200024 630500                    EPPR0   DOMN+1,,AUTO
         1 000055   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000056   000000 701000 xent               TSX1    FMO$GETDOMAIN
         1 000057   000000 011000                    NOP     0

      174     6723    1         CALL SSV$EVENT (B$JIT.USER,DOMN,%EVSC_IO#,EVENT,B$JIT.ERR,ADDR(NWIO));

   6723  1 000060   200005 630500                    EPPR0   NWIO,,AUTO
         1 000061   200024 450500                    STP0    DOMN+1,,AUTO
         1 000062   200024 631500                    EPPR1   DOMN+1,,AUTO
         1 000063   200033 451500                    STP1    DOMN+8,,AUTO
         1 000064   000000 236000 xsym               LDQ     B$JIT$
         1 000065   000012 036003                    ADLQ    10,DU
         1 000066   200032 756100                    STQ     DOMN+7,,AUTO
         1 000067   200004 236100                    LDQ     @EVENT,,AUTO
         1 000070   000000 235000 2                  LDA     0
         1 000071   200030 757100                    STAQ    DOMN+5,,AUTO
         1 000072   200023 633500                    EPPR3   DOMN,,AUTO
         1 000073   200027 453500                    STP3    DOMN+4,,AUTO
         1 000074   000000 236000 xsym               LDQ     B$JIT$
         1 000075   200000 036007                    ADLQ    65536,DL
         1 000076   200026 756100                    STQ     DOMN+3,,AUTO
         1 000077   200026 630500                    EPPR0   DOMN+3,,AUTO
         1 000100   000024 631400 xsym               EPPR1   B_VECTNIL+20
         1 000101   000000 701000 xent               TSX1    SSV$EVENT
         1 000102   000000 011000                    NOP     0

      175     6724    1         RETURN;

PL6.E3A0      #002=NKA$EVENT File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:41   
   6724  1 000103   000000 702200 xent               TSX2  ! X66_ARET
      176     6725        /**/
      177     6726    1   END;
      178     6727        /**/
      179     6728        /**/

PL6.E3A0      #002=NKA$EVENT File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:42   
--  Include file information  --

   CP_6_SUBS.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   F$DCB.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  is referenced.
      No diagnostics issued in procedure NKA$EVENT.
PL6.E3A0      #002=NKA$EVENT File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:43   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @EVENT                     3-0-0/w PTR         r     1 @TYC
    22-0-0/w PTR         r     1 DCB$                      23-0-0/w UBIN        r     1 DOMN
    *0-0-0/w UBIN        r     1 EVENT                      5-0-0/w STRC(468)   r     1 NWIO
    *0-0-0/w BIT         r     1 TYC

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$JIT$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(7560)  r     1 B$JIT                      0-0-0/d ASTR(3528)  r     1 F$DCB
     0-0-0/w STRC(288)   r     1 VSTA


   Procedure NKA$EVENT requires 68 words for executable code.
   Procedure NKA$EVENT requires 28 words of local(AUTO) storage.

    No errors detected in file NKA$DEVIO.:E05TSI    .
PL6.E3A0      #002=NKA$EVENT File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:44   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=NKA$EVENT File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:45   
          MINI XREF LISTING

B$EVNT.CODE
      6579**DCL      6579--REDEF    6580--REDEF    6580--REDEF
B$EVNT.ERR.ERR#
      6581**DCL      6581--REDEF
B$EVNT.EVID
      6580**DCL      6580--REDEF    6580--REDEF
B$JIT.DCB$
       421**DCL      6709>>ASSIGN
B$JIT.ERR
       331**DCL      6721>>ASSIGN   6723<>CALL
B$JIT.ERR.MID
       332**DCL       332--REDEF
B$JIT.USER
       331**DCL      6723<>CALL
B$JIT$
      6704**DCL       326--IMP-PTR  6709>>ASSIGN   6721>>ASSIGN   6723>>CALL     6723>>CALL
DCB$
      6702**DCL      6709<<ASSIGN   6710>>IF       6710>>IF       6710>>IF       6714>>ASSIGN   6718>>ASSIGN
      6719>>ASSIGN   6720>>ASSIGN
DOMN
      6703**DCL      6722<>CALL     6723<>CALL
EVENT
      6701**DCL         8--PROC     6723<>CALL
F$DCB.ACTPOS
       454**DCL       454--REDEF
F$DCB.ARS
       429**DCL       429--REDEF    6718>>ASSIGN
F$DCB.ASN
       444**DCL      6710>>IF       6710>>IF
F$DCB.ATTR
       447**DCL       448--REDEF
F$DCB.BORROW
PL6.E3A0      #002=NKA$EVENT File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:46   
       462**DCL       462--REDEF     462--REDEF     462--REDEF
F$DCB.CFU$
       463**DCL      6710>>IF
F$DCB.DCBNAME.L
       476**DCL       476--IMP-SIZ
F$DCB.DVBYTE
       432**DCL      6719>>ASSIGN
F$DCB.EOMCHAR
       433**DCL       433--REDEF    6720>>ASSIGN
F$DCB.FLDID
       457**DCL       457--REDEF
F$DCB.FORM$
       451**DCL       451--REDEF
F$DCB.FSECT
       467**DCL       467--REDEF
F$DCB.FSN
       444**DCL       444--REDEF     444--REDEF     445--REDEF
F$DCB.HEADER$
       450**DCL       450--REDEF
F$DCB.IASN
       470**DCL      6710>>IF
F$DCB.IXTNSIZE
       448**DCL       448--REDEF
F$DCB.LASTSTA$
       438**DCL       438--REDEF    6714>>ASSIGN
F$DCB.LVL
       463**DCL       463--REDEF
F$DCB.NAME.C
       438**DCL       438--REDEF
F$DCB.NOEOF
       459**DCL       459--REDEF
F$DCB.NRECS
       449**DCL       449--REDEF
F$DCB.NRECX
       468**DCL       468--REDEF
F$DCB.OHDR
PL6.E3A0      #002=NKA$EVENT File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:47   
       460**DCL       460--REDEF
F$DCB.ORG
       443**DCL       443--REDEF
F$DCB.PRECNO
       466**DCL       466--REDEF
F$DCB.RCSZ
       471**DCL       471--REDEF
F$DCB.RES
       439**DCL       439--REDEF
F$DCB.SETX
       451**DCL       451--REDEF
F$DCB.TAB$
       450**DCL       451--REDEF
F$DCB.TDA
       465**DCL       465--REDEF
F$DCB.WSN
       440**DCL       440--REDEF
FMO$GETDOMAIN
      6705**DCL-ENT  6722--CALL
NWIO
      6594**DCL      6713--ASSIGN   6716--ASSIGN   6723--CALL
NWIO.ARS
      6596**DCL      6718<<ASSIGN
NWIO.CGPARM
      6612**DCL      6714<<ASSIGN   6716--ASSIGN
NWIO.CGPARM.MSGIDXT
      6620**DCL      6623--REDEF
NWIO.DVE.DVBYTE
      6596**DCL      6719<<ASSIGN
NWIO.DVE.EOMCHAR
      6596**DCL      6720<<ASSIGN
NWIO.IOERRCODE
      6639**DCL      6721<<ASSIGN
NWIO.P#
      6596**DCL      6713<<ASSIGN   6713--ASSIGN   6716<<ASSIGN   6716--ASSIGN
NWIO.TYC
PL6.E3A0      #002=NKA$EVENT File=NKA$DEVIO.:E05TSI                              WED 07/30/97 03:43 Page:48   
      6596**DCL      6717<<ASSIGN
SSV$EVENT
      6706**DCL-ENT  6723--CALL
TYC
      6700**DCL         8--PROC     6717>>ASSIGN
VSTA
      6683**DCL      6714>>ASSIGN
VSTA.MSGIDXT
      6693**DCL      6696--REDEF
