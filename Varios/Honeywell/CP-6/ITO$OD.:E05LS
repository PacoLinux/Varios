VERSION E05

PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:1    
        1        1        /*T***********************************************************/
        2        2        /*T*                                                         */
        3        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        4        4        /*T*                                                         */
        5        5        /*T***********************************************************/
        6        6        /*    Process TIGR commands for Optical Disc and build tables  */
        7        7
        8        8        /*X* PLM=6,IND=3,CTI=3,DCI=3,DTI=0,MCI,MOC,DMC  */
        9        9
       10       10        /*P*  NAME:       ITO$OD
       11       11              PURPOSE:    Contains procedures to process TIGR Optical
       12       12                          Disc commands and build supporting tables.
       13       13        */
       14       14
       15       15        /**/
       16       16        /*D*     NAME:     ITO$CHECK_OD
       17       17                 PURPOSE:  To check the syntax of the TIGR OPC command and build tables
       18       18                           for the Optical Disc Controller and its devices.
       19       19
       20       20                 DESCRIPTION:
       21       21                           The OPC name and number, and the IOM and Channel numbers
       22       22                           are parsed and passed to ITF$FEP to build a KI$FEI and DQH
       23       23                           table.  These look like ordinary FEP tables with an OPC like
       24       24                           mnemonic instead of FEPxx.  A list of OPCs is made containing
       25       25                           a pointer to the corresponding FEI table.  During execution,
       26       26                           the LDCT index for the FEP tables will be placed in this list
       27       27                           entry when the OPC connects.
       28       28
       29       29                           The device portion of the command is used to build a set of
       30       30                           device and resource tables for each device using ITD$DISKTAPE.
       31       31        */
       32       32
       33       33        ITO$CHECK_OD: PROC(PCB,PTR$) ALTRET;
       34       34
       35       35        %INCLUDE XU_MACRO_C;
       36     3141        %INCLUDE IT_SUBS_C;
       37     3408        %INCLUDE IT_ERROR_C;
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:2    
       38     3491        %INCLUDE IT$DTDEV;
       39     3526        %INCLUDE IT$CMDWD;
       40     3534        %INCLUDE KI_SUBS_C;
       41     3670        %INCLUDE FP_MACRO_C;
       42     3942
       43     3943        %SUB NO = '0'B/*No*/;
       44     3944        %SUB YES = '1'B/*YES*/;
       45     3945
       46     3946        /*    Parameters        */
       47     3947
       48     3948        %P$PCB (NAME=PCB,STCLASS=" ");
       49     4149    1   DCL PTR$ PTR;
       50     4150
       51     4151        /*    Externals          */
       52     4152
       53     4153    1   DCL B$DS5$ PTR SYMREF;
       54     4154    1   DCL IT_FEI$$ PTR SYMREF;
       55     4155    1   DCL FP_OPCI$$ PTR SYMREF;
       56     4156    1   DCL FP_MXOPC UBIN SYMREF;
       57     4157    1   DCL IT_TXT_0000 CHAR(4) SYMREF;
       58     4158        %INCLUDE NI_DATA_R;
       59     4595        %INCLUDE KI_DATA_R;
       60     4621
       61     4622        /*    Auto                 */
       62     4623    1   DCL CMD$ PTR;
       63     4624    1   DCL TEMP$ PTR;
       64     4625    1   DCL BLK$ PTR;
       65     4626    1   DCL TEMP UBIN;
       66     4627    1   DCL DEV$ PTR;
       67     4628    1   DCL TMP$ PTR;
       68     4629    1   DCL DEVX SBIN;
       69     4630    1   DCL CHTX UBIN;
       70     4631    1   DCL I UBIN;
       71     4632    1   DCL I$ PTR;
       72     4633    1   DCL IP REDEF I$ UBIN;
       73     4634    1   DCL J UBIN;
       74     4635    1   DCL 1 TEXTC,
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:3    
       75     4636    1         2 COUNT UBIN(9) UNAL,
       76     4637    1         2 TEXT CHAR(8) UNAL;
       77     4638        /**/
       78     4639        /*  Based  */
       79     4640        /**/
       80     4641    1   DCL 1 TEXT$C BASED,
       81     4642    1         2 COUNT UBIN BYTE UNAL,
       82     4643    1         2 TEXT CHAR(TEXT$C.COUNT) UNAL;
       83     4644        %NI$CHT;
       84     4647        %FP$OPCI (STCLASS=BASED);
       85     4657        %INCLUDE IT$FEP;
       86     4683
       87     4684
       88     4685
       89     4686    1   DCL 1 FEP_CNTWD CONSTANT,
       90     4687    1         2 * BIT(18) INIT(NO) UNAL,
       91     4688    1         2 OFFSET UBIN(9) INIT(SIZEW(IT$FEP)) UNAL,
       92     4689    1         2 TYPE UBIN(9) INIT(%ITS_FEP) UNAL;
       93     4690    1   DCL 1 ODDEV_CNTWD CONSTANT,
       94     4691    1         2 * BIT(18) INIT(NO) UNAL,
       95     4692    1         2 OFFSET UBIN(9) INIT(SIZEW(IT$DTDEV)) UNAL,
       96     4693    1         2 TYPE UBIN(9) INIT(%ITS_DEV) UNAL;
       97     4694
       98     4695
       99     4696        /*    Entry points               */
      100     4697
      101     4698    1   DCL ITE$ERROR ENTRY(2);
      102     4699    1   DCL ITF$FEP ENTRY(1) ALTRET;
      103     4700    1   DCL ITD$DISKTAPE ENTRY(1) ALTRET;
      104     4701    1   DCL ITH$ALLOCATE ENTRY(2) ALTRET;
      105     4702    1   DCL ITH$CHECK_CHANNUM ENTRY(2) ALTRET;
      106     4703    1   DCL ITH$CHECK_DEVNAME ENTRY(2) ALTRET;
      107     4704
      108     4705        %EJECT;
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:4    
      109     4706        %PARSE$OUT (NAME=P$O,STCLASS=BASED);
      110     4751    1         CMD$ = B$DS5$;
      111     4752    1         CMD$->IT$CMDWD = %ITS_OPC;
      112     4753    1         CMD$ = PINCRW(CMD$,SIZEW(IT$CMDWD));
      113     4754    1         CMD$->IT$FEP = NO;
      114     4755    1         CMD$->IT$FEP.CNTWD = FEP_CNTWD;
      115     4756    1         BLK$ = PCB.OUT$->P$O.SUBLK$(0); /* NAME                         */
      116     4757    1         TEMP=BLK$->P$O.SUBLK$(0)->P$O.SUBLK$(0)->TEXT$C.COUNT;
      117     4758    2         IF TEMP=0 OR TEMP>2 THEN DO;
      118     4759    2            CALL ITE$ERROR(%E$BADFEP#);
      119     4760    2            ALTRETURN;
      120     4761    2            END;
      121     4762    1         CALL CHARBIN(CMD$->IT$FEP.FEP#,SUBSTR(BLK$->P$O.SUBLK$(0)->
      122     4763    1            P$O.SUBLK$(0)->TEXT$C.TEXT,0,TEMP));
      123     4764    2         IF CMD$->IT$FEP.FEP# = 0 OR CMD$->IT$FEP.FEP# > KI_FEMAX# THEN DO;
      124     4765    2            CALL ITE$ERROR(%E$BADFEP#);
      125     4766    2            ALTRETURN;
      126     4767    2            END;
      127     4768    1         BLK$ = PCB.OUT$->P$O.SUBLK$(1);
      128     4769    1         TEXTC = BLK$->P$O.SUBLK$(0)->P$O.SUBLK$(0)->TEXT$C;
      129     4770    1         CALL CHARBIN(TEMP,SUBSTR(TEXTC.TEXT,0,TEXTC.COUNT));
      130     4771    2         IF TEMP > NI_IOMS-1 THEN DO;
      131     4772    2            CALL ITE$ERROR(%E$IOM2BIG);
      132     4773    2            ALTRETURN;
      133     4774    2            END;
      134     4775    1         CMD$->IT$FEP.IOM# = TEMP;
      135     4776    1         TEXTC = BLK$->P$O.SUBLK$(1)->P$O.SUBLK$(0)->TEXT$C;
      136     4777    1         CALL CHARBIN(TEMP,SUBSTR(TEXTC.TEXT,0,TEXTC.COUNT));
      137     4778    1         CALL ITH$CHECK_CHANNUM ( ,TEMP) ALTRET(FEPERR);
      138     4779    1         CMD$->IT$FEP.CHAN = TEMP ;
      139     4780    1         CMD$->IT$FEP.INQSZ = 2;
      140     4781    1         CMD$->IT$FEP.OUTQSZ = 4;
      141     4782    1         CMD$->IT$FEP.QOS = 1;
      142     4783    1         CMD$->IT$FEP.TIMEOUT.BOOT = KITM_BT;
      143     4784    1         CMD$->IT$FEP.TIMEOUT.DUMP = KITM_DMP;
      144     4785    1         CMD$->IT$FEP.TIMEOUT.RUN = KITM_RUN;
      145     4786    1         CMD$->IT$FEP.TIMEOUT.INT = KITM_INIT;
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:5    
      146     4787        /**/
      147     4788    1         IF PCB.OUT$->P$O.NSUBLKS ~= 3 THEN  /* must be an option present   */
      148     4789    2         DO J = 2 TO PCB.OUT$->P$O.NSUBLKS - 2;  /* last sublk is DEV list  */
      149     4790        /**/
      150     4791    2            BLK$ = PCB.OUT$->P$O.SUBLK$(J);
      151     4792    2            IF (BLK$->P$O.CODE = %ITS_STATUS)
      152     4793    3            THEN DO;
      153     4794    3               IF BLK$->P$O.SUBLK$(0)->P$O.CODE = %ITS_DOWN THEN
      154     4795    3                  CMD$->IT$FEP.FLAGS.DOWN = YES ;
      155     4796    3               END;
      156     4797    3            ELSE DO;
      157     4798    3               TEXTC = BLK$->P$O.SUBLK$(0)->P$O.SUBLK$(0)->TEXT$C;
      158     4799    3               CALL CHARBIN(TEMP,SUBSTR(TEXTC.TEXT,0,TEXTC.COUNT));
      159     4800    4               IF TEMP < 1 OR TEMP > 64 THEN DO; /* BAD QSZ OPTION */
      160     4801    4                  CALL ITE$ERROR(%E$BADQSZ);
      161     4802    4                  END;
      162     4803    4               ELSE DO CASE(BLK$->P$O.CODE);
      163     4804    4                CASE(%ITS_BOOTTO);
      164     4805    4                  CMD$->IT$FEP.TIMEOUT.BOOT = TEMP;
      165     4806    4                CASE(%ITS_DUMPTO);
      166     4807    4                  CMD$->IT$FEP.TIMEOUT.DUMP = TEMP;
      167     4808    4                CASE(%ITS_RUNTO);
      168     4809    4                  CMD$->IT$FEP.TIMEOUT.RUN = TEMP;
      169     4810    4                CASE(%ITS_INITTO);
      170     4811    4                  CMD$->IT$FEP.TIMEOUT.INT = TEMP;
      171     4812    4                END; /*small CASE*/
      172     4813    3               END; /*ELSE DO;*/
      173     4814    2            END; /* DO J */
      174     4815    1         BLK$ = PCB.OUT$->P$O.SUBLK$(PCB.OUT$->P$O.NSUBLKS-1);
      175     4816              /* BLK$ points to DEV block after all this stuff  */
      176     4817    1         CHTX = ((CMD$->IT$FEP.IOM#)*%N_MAXCHANS)+CMD$->IT$FEP.CHAN;
      177     4818    1         CMD$ = PINCRW(CMD$,SIZEW(IT$FEP));
      178     4819    1         CMD$->IT$CMDWD = %ITS_ENDCMD;
      179     4820    1         CALL ITF$FEP (PTR$) ALTRET(FEPERR);
      180     4821    1         I$=PTR$;
      181     4822    1         CALL ITH$ALLOCATE (PTR$,SIZEW(FP$OPCI)) ALTRET(FEPERR);
      182     4823    1         I$->FP$OPCI.LNK$ = FP_OPCI$$;
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:6    
      183     4824    1         I$->FP$OPCI.FEI# = KI_MXFE;
      184     4825    1         I$->FP$OPCI.LDCTX = 0;
      185     4826    1         FP_OPCI$$ = I$;
      186     4827    1         FP_MXOPC = FP_MXOPC + 1;
      187     4828    1         CMD$ = B$DS5$;
      188     4829    1         CMD$->IT$CMDWD = %ITS_OD;
      189     4830    1         CMD$ = PINCRW(CMD$,SIZEW(IT$CMDWD));
      190     4831    1         DEV$ = CMD$;   /* ptr to start of DEV blocks, for dup checking */
      191     4832    1         I$ = BLK$; /* Point to DEV block        */
      192     4833    2         DO I = 0 TO I$->P$O.NSUBLKS - 1;
      193     4834    3            IF I ~= 0 THEN DO;
      194     4835    3               CMD$ = PINCRW(CMD$,SIZEW(IT$DTDEV)); /* Start new block  */
      195     4836    3               END;
      196     4837    2            BLK$ = I$->P$O.SUBLK$(I); /* point to DEV option block  */
      197     4838    3            DO J = 1 TO BLK$->P$O.NSUBLKS - 1;
      198     4839    3               TEMP$ = BLK$->P$O.SUBLK$(J);
      199     4840    4               DO SELECT (TEMP$->P$O.CODE);
      200     4841    4                  SELECT (%ITS_NAMENUM);
      201     4842    4                  CMD$->IT$DTDEV = NO;
      202     4843    4                  CMD$->IT$DTDEV.VFC = CHTX; /* Pass Channel table index */
      203     4844    4                  CMD$->IT$DTDEV.CHAIN = IP; /* Pass context ptr  */
      204     4845    4                  CMD$->IT$DTDEV.FLAGS.INPUT = YES;
      205     4846    4                  CMD$->IT$DTDEV.FLAGS.OUTPUT = YES;
      206     4847    4                  CMD$->IT$DTDEV.CNTWD = ODDEV_CNTWD;
      207     4848    4                  CMD$->IT$DTDEV.NM.MNEM = 'OD';
      208     4849    4                  CMD$->IT$DTDEV.ATTR = YES;
      209     4850    5                  IF TEMP$->P$O.SUBLK$(0)->TEXT$C.COUNT~=2 THEN DO;
      210     4851    5                     CALL ITE$ERROR(%E$2CHARDEV#);
      211     4852    5                     ALTRETURN;
      212     4853    5                     END;
      213     4854    4                  CMD$->IT$DTDEV.NM.NUM = SUBSTR(TEMP$->P$O.SUBLK$(0)
      214     4855    4                     ->TEXT$C.TEXT,0,2);
      215     4856    4                  CMD$->IT$DTDEV.NM.BLANKS = IT_TXT_0000;
      216     4857    4                  TMP$ = DEV$;
      217     4858    5                  DO DEVX = 0 TO I-1;  /* check all previous devices */
      218     4859    5                     IF DEVX ~= 0 THEN
      219     4860    5                        TMP$ = PINCRW(TMP$,SIZEW(IT$DTDEV));
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:7    
      220     4861    6                     IF CMD$->IT$DTDEV.NAME = TMP$->IT$DTDEV.NAME THEN DO;
      221     4862    6                        TEXTC.TEXT = CMD$->IT$DTDEV.NAME;
      222     4863    6                        TEXTC.COUNT = 4;
      223     4864    6                        CALL ITE$ERROR (%E$DUPDEVNAME,ADDR(TEXTC));
      224     4865    6                        ALTRETURN;
      225     4866    6                        END; /*IF*/
      226     4867    5                     END; /*DO*/
      227     4868    4                  CALL ITH$CHECK_DEVNAME (CMD$->IT$DTDEV.NAME, ) ALTRET (DEVERR);
      228     4869    4                  SELECT (%ITS_DEV#);
      229     4870    4                  TEXTC = TEMP$->P$O.SUBLK$(0)->P$O.SUBLK$(0)->TEXT$C;
      230     4871    4                  CALL CHARBIN (TEMP,SUBSTR(TEXTC.TEXT,0,TEXTC.COUNT));
      231     4872    4                  CMD$->IT$DTDEV.DEV# = TEMP;
      232     4873    4                  SELECT (%ITS_STATUS);
      233     4874    4                  IF TEMP$->P$O.SUBLK$(0)->P$O.CODE = %ITS_DOWN THEN
      234     4875    4                     CMD$->IT$DTDEV.FLAGS.DOWN = YES;
      235     4876    4                  END;
      236     4877    3               END;
      237     4878    2            END;
      238     4879    1         CMD$ = PINCRW(CMD$,SIZEW(IT$DTDEV));
      239     4880    1         CMD$->IT$CMDWD = %ITS_ENDCMD;
      240     4881
      241     4882    1         CALL ITD$DISKTAPE (PTR$) ALTRET(DEVERR);
      242     4883
      243     4884    1         RETURN;
      244     4885    1   FEPERR:;
      245     4886    1   DEVERR:;
      246     4887    1         ALTRETURN;
      247     4888
      248     4889    1   END;

PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:8    
--  Include file information  --

   IT$FEP.:E05TOU  cannot be made into a system file and is referenced.
   KI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   NI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   FP_MACRO_C.:E05TOU  is referenced.
   KI_SUBS_C.:E05TOU  is referenced.
   IT$CMDWD.:E05TOU  cannot be made into a system file and is referenced.
   IT$DTDEV.:E05TOU  cannot be made into a system file and is referenced.
   IT_ERROR_C.:E05TOU  is referenced.
   IT_SUBS_C.:E05TOU  is referenced.
   XU_MACRO_C.:E05TOU  is referenced.
      No diagnostics issued in procedure ITO$CHECK_OD.

   Procedure ITO$CHECK_OD requires 447 words for executable code.
   Procedure ITO$CHECK_OD requires 24 words of local(AUTO) storage.

    No errors detected in file ITO$OD.:E05TSI    .

PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:9    

 Object Unit name= ITO$CHECK_OD                               File name= ITO$OD.:E05TOU
 UTS= JUL 29 '97 23:06:41.44 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0  RoData even  UTS      3      3  ITO$CHECK_OD
    1   Proc  even  none   447    677  ITO$CHECK_OD
    2  RoData even  none    11     13  ITO$CHECK_OD

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes    yes     yes      Std        2  ITO$CHECK_OD

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       2 ITE$ERROR
 yes     yes           Std       1 ITD$DISKTAPE
 yes     yes           Std       2 ITH$CHECK_CHANNUM
 yes     yes           Std       2 ITH$ALLOCATE
 yes     yes           Std       2 ITH$CHECK_DEVNAME
 yes     yes           Std       1 ITF$FEP
                       nStd      0 X66_AUTO_2
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:10   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     B$DS5$                                FP_OPCI$$                             FP_MXOPC
     IT_TXT_0000                           N$DCT$$                               N$FQ$
     NI$CHT$                               NI$FQ$                                NI$IBUF$
     NI$RP$                                NI_IOMS                               KI_FEI$$
     KI_MXFE                               B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:11   


        1        1        /*T***********************************************************/
        2        2        /*T*                                                         */
        3        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        4        4        /*T*                                                         */
        5        5        /*T***********************************************************/
        6        6        /*    Process TIGR commands for Optical Disc and build tables  */
        7        7
        8        8        /*X* PLM=6,IND=3,CTI=3,DCI=3,DTI=0,MCI,MOC,DMC  */
        9        9
       10       10        /*P*  NAME:       ITO$OD
       11       11              PURPOSE:    Contains procedures to process TIGR Optical
       12       12                          Disc commands and build supporting tables.
       13       13        */
       14       14
       15       15        /**/
       16       16        /*D*     NAME:     ITO$CHECK_OD
       17       17                 PURPOSE:  To check the syntax of the TIGR OPC command and build tables
       18       18                           for the Optical Disc Controller and its devices.
       19       19
       20       20                 DESCRIPTION:
       21       21                           The OPC name and number, and the IOM and Channel numbers
       22       22                           are parsed and passed to ITF$FEP to build a KI$FEI and DQH
       23       23                           table.  These look like ordinary FEP tables with an OPC like
       24       24                           mnemonic instead of FEPxx.  A list of OPCs is made containing
       25       25                           a pointer to the corresponding FEI table.  During execution,
       26       26                           the LDCT index for the FEP tables will be placed in this list
       27       27                           entry when the OPC connects.
       28       28
       29       29                           The device portion of the command is used to build a set of
       30       30                           device and resource tables for each device using ITD$DISKTAPE.
       31       31        */
       32       32
       33       33        ITO$CHECK_OD: PROC(PCB,PTR$) ALTRET;

     33  1 000000   000000 700200 xent  ITO$CHECK_OD TSX0  ! X66_AUTO_2
         1 000001   000030 000002                    ZERO    24,2
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:12   

       34       34
       35       35        %INCLUDE XU_MACRO_C;
       36     3141        %INCLUDE IT_SUBS_C;
       37     3408        %INCLUDE IT_ERROR_C;
       38     3491        %INCLUDE IT$DTDEV;
       39     3526        %INCLUDE IT$CMDWD;
       40     3534        %INCLUDE KI_SUBS_C;
       41     3670        %INCLUDE FP_MACRO_C;
       42     3942
       43     3943        %SUB NO = '0'B/*No*/;
       44     3944        %SUB YES = '1'B/*YES*/;
       45     3945
       46     3946        /*    Parameters        */
       47     3947
       48     3948        %P$PCB (NAME=PCB,STCLASS=" ");
       49     4149    1   DCL PTR$ PTR;
       50     4150
       51     4151        /*    Externals          */
       52     4152
       53     4153    1   DCL B$DS5$ PTR SYMREF;
       54     4154    1   DCL IT_FEI$$ PTR SYMREF;
       55     4155    1   DCL FP_OPCI$$ PTR SYMREF;
       56     4156    1   DCL FP_MXOPC UBIN SYMREF;
       57     4157    1   DCL IT_TXT_0000 CHAR(4) SYMREF;
       58     4158        %INCLUDE NI_DATA_R;
       59     4595        %INCLUDE KI_DATA_R;
       60     4621
       61     4622        /*    Auto                 */
       62     4623    1   DCL CMD$ PTR;
       63     4624    1   DCL TEMP$ PTR;
       64     4625    1   DCL BLK$ PTR;
       65     4626    1   DCL TEMP UBIN;
       66     4627    1   DCL DEV$ PTR;
       67     4628    1   DCL TMP$ PTR;
       68     4629    1   DCL DEVX SBIN;
       69     4630    1   DCL CHTX UBIN;
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:13   
       70     4631    1   DCL I UBIN;
       71     4632    1   DCL I$ PTR;
       72     4633    1   DCL IP REDEF I$ UBIN;
       73     4634    1   DCL J UBIN;
       74     4635    1   DCL 1 TEXTC,
       75     4636    1         2 COUNT UBIN(9) UNAL,
       76     4637    1         2 TEXT CHAR(8) UNAL;
       77     4638        /**/
       78     4639        /*  Based  */
       79     4640        /**/
       80     4641    1   DCL 1 TEXT$C BASED,
       81     4642    1         2 COUNT UBIN BYTE UNAL,
       82     4643    1         2 TEXT CHAR(TEXT$C.COUNT) UNAL;
       83     4644        %NI$CHT;
       84     4647        %FP$OPCI (STCLASS=BASED);
       85     4657        %INCLUDE IT$FEP;
       86     4683
       87     4684
       88     4685
       89     4686    1   DCL 1 FEP_CNTWD CONSTANT,
       90     4687    1         2 * BIT(18) INIT(NO) UNAL,
       91     4688    1         2 OFFSET UBIN(9) INIT(SIZEW(IT$FEP)) UNAL,
       92     4689    1         2 TYPE UBIN(9) INIT(%ITS_FEP) UNAL;
       93     4690    1   DCL 1 ODDEV_CNTWD CONSTANT,
       94     4691    1         2 * BIT(18) INIT(NO) UNAL,
       95     4692    1         2 OFFSET UBIN(9) INIT(SIZEW(IT$DTDEV)) UNAL,
       96     4693    1         2 TYPE UBIN(9) INIT(%ITS_DEV) UNAL;
       97     4694
       98     4695
       99     4696        /*    Entry points               */
      100     4697
      101     4698    1   DCL ITE$ERROR ENTRY(2);
      102     4699    1   DCL ITF$FEP ENTRY(1) ALTRET;
      103     4700    1   DCL ITD$DISKTAPE ENTRY(1) ALTRET;
      104     4701    1   DCL ITH$ALLOCATE ENTRY(2) ALTRET;
      105     4702    1   DCL ITH$CHECK_CHANNUM ENTRY(2) ALTRET;
      106     4703    1   DCL ITH$CHECK_DEVNAME ENTRY(2) ALTRET;
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:14   
      107     4704
      108     4705        %EJECT;
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:15   
      109     4706        %PARSE$OUT (NAME=P$O,STCLASS=BASED);
      110     4751    1         CMD$ = B$DS5$;

   4751  1 000002   000000 236000 xsym               LDQ     B$DS5$
         1 000003   200005 756100                    STQ     CMD$,,AUTO

      111     4752    1         CMD$->IT$CMDWD = %ITS_OPC;

   4752  1 000004   000016 235007                    LDA     14,DL
         1 000005   200005 470500                    LDP0    CMD$,,AUTO
         1 000006   000000 755100                    STA     0,,PR0

      112     4753    1         CMD$ = PINCRW(CMD$,SIZEW(IT$CMDWD));

   4753  1 000007   000001 036003                    ADLQ    1,DU
         1 000010   200005 756100                    STQ     CMD$,,AUTO

      113     4754    1         CMD$->IT$FEP = NO;

   4754  1 000011   200005 470500                    LDP0    CMD$,,AUTO
         1 000012   000100 100400                    MLR     fill='000'O
         1 000013   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         1 000014   000000 000044                    ADSC9   0,,PR0                   cn=0,n=36

      114     4755    1         CMD$->IT$FEP.CNTWD = FEP_CNTWD;

   4755  1 000015   000000 236000 0                  LDQ     FEP_CNTWD
         1 000016   000000 756100                    STQ     0,,PR0

      115     4756    1         BLK$ = PCB.OUT$->P$O.SUBLK$(0); /* NAME                         */

   4756  1 000017   200003 471500                    LDP1    @PCB,,AUTO
         1 000020   100003 473500                    LDP3    3,,PR1
         1 000021   300003 236100                    LDQ     3,,PR3
         1 000022   200007 756100                    STQ     BLK$,,AUTO

      116     4757    1         TEMP=BLK$->P$O.SUBLK$(0)->P$O.SUBLK$(0)->TEXT$C.COUNT;
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:16   

   4757  1 000023   200007 474500                    LDP4    BLK$,,AUTO
         1 000024   400003 475500                    LDP5    3,,PR4
         1 000025   500003 476500                    LDP6    3,,PR5
         1 000026   000100 101500                    MRL     fill='000'O
         1 000027   600000 000001                    ADSC9   0,,PR6                   cn=0,n=1
         1 000030   200010 000004                    ADSC9   TEMP,,AUTO               cn=0,n=4

      117     4758    2         IF TEMP=0 OR TEMP>2 THEN DO;

   4758  1 000031   200010 235100                    LDA     TEMP,,AUTO
         1 000032   000035 600000 1                  TZE     s:4759
         1 000033   000003 115007                    CMPA    3,DL
         1 000034   000042 602000 1                  TNC     s:4762

      118     4759    2            CALL ITE$ERROR(%E$BADFEP#);

   4759  1 000035   000001 630400 2                  EPPR0   1
         1 000036   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000037   000000 701000 xent               TSX1    ITE$ERROR
         1 000040   000000 011000                    NOP     0

      119     4760    2            ALTRETURN;

   4760  1 000041   000000 702200 xent               TSX2  ! X66_AALT

      120     4761    2            END;
      121     4762    1         CALL CHARBIN(CMD$->IT$FEP.FEP#,SUBSTR(BLK$->P$O.SUBLK$(0)->

   4762  1 000042   400003 473500                    LDP3    3,,PR4
         1 000043   300003 475500                    LDP5    3,,PR3
         1 000044   000100 101500                    MRL     fill='000'O
         1 000045   500000 000001                    ADSC9   0,,PR5                   cn=0,n=1
         1 000046   200024 000002                    ADSC9   TEXTC+4,,AUTO            cn=0,n=2
         1 000047   200024 220100                    LDX0    TEXTC+4,,AUTO
         1 000050   000000 621005                    EAX1    0,AL
         1 000051   000100 305540                    DTB
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:17   
         1 000052   500000 230011                    NDSC9   0,,PR5                   cn=1,s=nosgn,sf=0,n=*X1
         1 000053   200026 000010                    NDSC9   TEXTC+6,,AUTO            cn=0,s=lsgnf,sf=0,n=8
         1 000054   200027 235100                    LDA     TEXTC+7,,AUTO
         1 000055   000004 755100                    STA     4,,PR0

      122     4763    1            P$O.SUBLK$(0)->TEXT$C.TEXT,0,TEMP));
      123     4764    2         IF CMD$->IT$FEP.FEP# = 0 OR CMD$->IT$FEP.FEP# > KI_FEMAX# THEN DO;

   4764  1 000056   000061 600000 1                  TZE     s:4765
         1 000057   000144 115007                    CMPA    100,DL
         1 000060   000066 602000 1                  TNC     s:4768

      124     4765    2            CALL ITE$ERROR(%E$BADFEP#);

   4765  1 000061   000001 630400 2                  EPPR0   1
         1 000062   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000063   000000 701000 xent               TSX1    ITE$ERROR
         1 000064   000000 011000                    NOP     0

      125     4766    2            ALTRETURN;

   4766  1 000065   000000 702200 xent               TSX2  ! X66_AALT

      126     4767    2            END;
      127     4768    1         BLK$ = PCB.OUT$->P$O.SUBLK$(1);

   4768  1 000066   100003 473500                    LDP3    3,,PR1
         1 000067   300004 236100                    LDQ     4,,PR3
         1 000070   200007 756100                    STQ     BLK$,,AUTO

      128     4769    1         TEXTC = BLK$->P$O.SUBLK$(0)->P$O.SUBLK$(0)->TEXT$C;

   4769  1 000071   200007 474500                    LDP4    BLK$,,AUTO
         1 000072   400003 475500                    LDP5    3,,PR4
         1 000073   500003 476500                    LDP6    3,,PR5
         1 000074   000100 101500                    MRL     fill='000'O
         1 000075   600000 000001                    ADSC9   0,,PR6                   cn=0,n=1
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:18   
         1 000076   200024 000002                    ADSC9   TEXTC+4,,AUTO            cn=0,n=2
         1 000077   200024 220100                    LDX0    TEXTC+4,,AUTO
         1 000100   000001 621010                    EAX1    1,X0
         1 000101   000100 100540                    MLR     fill='000'O
         1 000102   600000 000011                    ADSC9   0,,PR6                   cn=0,n=*X1
         1 000103   200020 000011                    ADSC9   TEXTC,,AUTO              cn=0,n=9

      129     4770    1         CALL CHARBIN(TEMP,SUBSTR(TEXTC.TEXT,0,TEXTC.COUNT));

   4770  1 000104   200020 236100                    LDQ     TEXTC,,AUTO
         1 000105   000033 772000                    QRL     27
         1 000106   000000 620006                    EAX0    0,QL
         1 000107   000100 305540                    DTB
         1 000110   200020 230010                    NDSC9   TEXTC,,AUTO              cn=1,s=nosgn,sf=0,n=*X0
         1 000111   200024 000010                    NDSC9   TEXTC+4,,AUTO            cn=0,s=lsgnf,sf=0,n=8
         1 000112   200025 235100                    LDA     TEXTC+5,,AUTO
         1 000113   200010 755100                    STA     TEMP,,AUTO

      130     4771    2         IF TEMP > NI_IOMS-1 THEN DO;

   4771  1 000114   200010 236100                    LDQ     TEMP,,AUTO
         1 000115   000120 604000 1                  TMI     s:4772
         1 000116   000000 116000 xsym               CMPQ    NI_IOMS
         1 000117   000125 604000 1                  TMI     s:4775

      131     4772    2            CALL ITE$ERROR(%E$IOM2BIG);

   4772  1 000120   000003 630400 2                  EPPR0   3
         1 000121   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000122   000000 701000 xent               TSX1    ITE$ERROR
         1 000123   000000 011000                    NOP     0

      132     4773    2            ALTRETURN;

   4773  1 000124   000000 702200 xent               TSX2  ! X66_AALT

      133     4774    2            END;
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:19   
      134     4775    1         CMD$->IT$FEP.IOM# = TEMP;

   4775  1 000125   000001 756100                    STQ     1,,PR0

      135     4776    1         TEXTC = BLK$->P$O.SUBLK$(1)->P$O.SUBLK$(0)->TEXT$C;

   4776  1 000126   400004 473500                    LDP3    4,,PR4
         1 000127   300003 475500                    LDP5    3,,PR3
         1 000130   000100 101500                    MRL     fill='000'O
         1 000131   500000 000001                    ADSC9   0,,PR5                   cn=0,n=1
         1 000132   200024 000002                    ADSC9   TEXTC+4,,AUTO            cn=0,n=2
         1 000133   200024 220100                    LDX0    TEXTC+4,,AUTO
         1 000134   000001 621010                    EAX1    1,X0
         1 000135   000100 100540                    MLR     fill='000'O
         1 000136   500000 000011                    ADSC9   0,,PR5                   cn=0,n=*X1
         1 000137   200020 000011                    ADSC9   TEXTC,,AUTO              cn=0,n=9

      136     4777    1         CALL CHARBIN(TEMP,SUBSTR(TEXTC.TEXT,0,TEXTC.COUNT));

   4777  1 000140   200020 236100                    LDQ     TEXTC,,AUTO
         1 000141   000033 772000                    QRL     27
         1 000142   000000 620006                    EAX0    0,QL
         1 000143   000100 305540                    DTB
         1 000144   200020 230010                    NDSC9   TEXTC,,AUTO              cn=1,s=nosgn,sf=0,n=*X0
         1 000145   200024 000010                    NDSC9   TEXTC+4,,AUTO            cn=0,s=lsgnf,sf=0,n=8
         1 000146   200025 235100                    LDA     TEXTC+5,,AUTO
         1 000147   200010 755100                    STA     TEMP,,AUTO

      137     4778    1         CALL ITH$CHECK_CHANNUM ( ,TEMP) ALTRET(FEPERR);

   4778  1 000150   200010 633500                    EPPR3   TEMP,,AUTO
         1 000151   200025 453500                    STP3    TEXTC+5,,AUTO
         1 000152   000001 236000 xsym               LDQ     B_VECTNIL+1
         1 000153   200024 756100                    STQ     TEXTC+4,,AUTO
         1 000154   200024 630500                    EPPR0   TEXTC+4,,AUTO
         1 000155   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000156   000000 701000 xent               TSX1    ITH$CHECK_CHANNUM
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:20   
         1 000157   000676 702000 1                  TSX2    FEPERR

      138     4779    1         CMD$->IT$FEP.CHAN = TEMP ;

   4779  1 000160   200010 235100                    LDA     TEMP,,AUTO
         1 000161   200005 470500                    LDP0    CMD$,,AUTO
         1 000162   000002 755100                    STA     2,,PR0

      139     4780    1         CMD$->IT$FEP.INQSZ = 2;

   4780  1 000163   000002 236007                    LDQ     2,DL
         1 000164   000005 756100                    STQ     5,,PR0

      140     4781    1         CMD$->IT$FEP.OUTQSZ = 4;

   4781  1 000165   000004 235007                    LDA     4,DL
         1 000166   000006 755100                    STA     6,,PR0

      141     4782    1         CMD$->IT$FEP.QOS = 1;

   4782  1 000167   000001 235007                    LDA     1,DL
         1 000170   000007 755100                    STA     7,,PR0

      142     4783    1         CMD$->IT$FEP.TIMEOUT.BOOT = KITM_BT;

   4783  1 000171   036000 236003                    LDQ     15360,DU
         1 000172   000010 552140                    STBQ    8,'40'O,PR0

      143     4784    1         CMD$->IT$FEP.TIMEOUT.DUMP = KITM_DMP;

   4784  1 000173   000002 236003                    LDQ     2,DU
         1 000174   000010 552120                    STBQ    8,'20'O,PR0

      144     4785    1         CMD$->IT$FEP.TIMEOUT.RUN = KITM_RUN;

   4785  1 000175   014000 236007                    LDQ     6144,DL
         1 000176   000010 552110                    STBQ    8,'10'O,PR0
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:21   

      145     4786    1         CMD$->IT$FEP.TIMEOUT.INT = KITM_INIT;

   4786  1 000177   000014 236007                    LDQ     12,DL
         1 000200   000010 552104                    STBQ    8,'04'O,PR0

      146     4787        /**/
      147     4788    1         IF PCB.OUT$->P$O.NSUBLKS ~= 3 THEN  /* must be an option present   */

   4788  1 000201   200003 471500                    LDP1    @PCB,,AUTO
         1 000202   100003 473500                    LDP3    3,,PR1
         1 000203   300001 220100                    LDX0    1,,PR3
         1 000204   000003 100003                    CMPX0   3,DU
         1 000205   000333 600000 1                  TZE     s:4815

      148     4789    2         DO J = 2 TO PCB.OUT$->P$O.NSUBLKS - 2;  /* last sublk is DEV list  */

   4789  1 000206   000002 235007                    LDA     2,DL
         1 000207   200017 755100                    STA     J,,AUTO
         1 000210   000323 710000 1                  TRA     s:4814+3

      149     4790        /**/
      150     4791    2            BLK$ = PCB.OUT$->P$O.SUBLK$(J);

   4791  1 000211   200003 470500                    LDP0    @PCB,,AUTO
         1 000212   000003 471500                    LDP1    3,,PR0
         1 000213   200017 720100                    LXL0    J,,AUTO
         1 000214   100003 236110                    LDQ     3,X0,PR1
         1 000215   200007 756100                    STQ     BLK$,,AUTO

      151     4792    2            IF (BLK$->P$O.CODE = %ITS_STATUS)

   4792  1 000216   200007 473500                    LDP3    BLK$,,AUTO
         1 000217   300000 721100                    LXL1    0,,PR3
         1 000220   000004 101003                    CMPX1   4,DU
         1 000221   000232 601000 1                  TNZ     s:4798

PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:22   
      152     4793    3            THEN DO;

      153     4794    3               IF BLK$->P$O.SUBLK$(0)->P$O.CODE = %ITS_DOWN THEN

   4794  1 000222   300003 474500                    LDP4    3,,PR3
         1 000223   400000 722100                    LXL2    0,,PR4
         1 000224   000002 102003                    CMPX2   2,DU
         1 000225   000320 601000 1                  TNZ     s:4814

      154     4795    3                  CMD$->IT$FEP.FLAGS.DOWN = YES ;

   4795  1 000226   400000 236003                    LDQ     -131072,DU
         1 000227   200005 475500                    LDP5    CMD$,,AUTO
         1 000230   500003 756100                    STQ     3,,PR5

      155     4796    3               END;

   4796  1 000231   000320 710000 1                  TRA     s:4814

      156     4797    3            ELSE DO;

      157     4798    3               TEXTC = BLK$->P$O.SUBLK$(0)->P$O.SUBLK$(0)->TEXT$C;

   4798  1 000232   300003 474500                    LDP4    3,,PR3
         1 000233   400003 475500                    LDP5    3,,PR4
         1 000234   000100 101500                    MRL     fill='000'O
         1 000235   500000 000001                    ADSC9   0,,PR5                   cn=0,n=1
         1 000236   200024 000002                    ADSC9   TEXTC+4,,AUTO            cn=0,n=2
         1 000237   200024 221100                    LDX1    TEXTC+4,,AUTO
         1 000240   000001 622011                    EAX2    1,X1
         1 000241   000100 100540                    MLR     fill='000'O
         1 000242   500000 000012                    ADSC9   0,,PR5                   cn=0,n=*X2
         1 000243   200020 000011                    ADSC9   TEXTC,,AUTO              cn=0,n=9

      158     4799    3               CALL CHARBIN(TEMP,SUBSTR(TEXTC.TEXT,0,TEXTC.COUNT));

   4799  1 000244   200020 236100                    LDQ     TEXTC,,AUTO
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:23   
         1 000245   000033 772000                    QRL     27
         1 000246   000000 621006                    EAX1    0,QL
         1 000247   000100 305540                    DTB
         1 000250   200020 230011                    NDSC9   TEXTC,,AUTO              cn=1,s=nosgn,sf=0,n=*X1
         1 000251   200024 000010                    NDSC9   TEXTC+4,,AUTO            cn=0,s=lsgnf,sf=0,n=8
         1 000252   200025 235100                    LDA     TEXTC+5,,AUTO
         1 000253   200010 755100                    STA     TEMP,,AUTO

      159     4800    4               IF TEMP < 1 OR TEMP > 64 THEN DO; /* BAD QSZ OPTION */

   4800  1 000254   000257 600000 1                  TZE     s:4801
         1 000255   000101 115007                    CMPA    65,DL
         1 000256   000264 602000 1                  TNC     s:4803

      160     4801    4                  CALL ITE$ERROR(%E$BADQSZ);

   4801  1 000257   000005 630400 2                  EPPR0   5
         1 000260   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000261   000000 701000 xent               TSX1    ITE$ERROR
         1 000262   000000 011000                    NOP     0

      161     4802    4                  END;

   4802  1 000263   000320 710000 1                  TRA     s:4814

      162     4803    4               ELSE DO CASE(BLK$->P$O.CODE);

   4803  1 000264   300000 236100                    LDQ     0,,PR3
         1 000265   777777 376007                    ANQ     -1,DL
         1 000266   000005 136007                    SBLQ    5,DL
         1 000267   000004 116007                    CMPQ    4,DL
         1 000270   000272 602006 1                  TNC     s:4803+6,QL
         1 000271   000320 710000 1                  TRA     s:4814
         1 000272   000276 710000 1                  TRA     s:4805
         1 000273   000303 710000 1                  TRA     s:4807
         1 000274   000310 710000 1                  TRA     s:4809
         1 000275   000315 710000 1                  TRA     s:4811
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:24   

      163     4804    4                CASE(%ITS_BOOTTO);

      164     4805    4                  CMD$->IT$FEP.TIMEOUT.BOOT = TEMP;

   4805  1 000276   200005 471500                    LDP1    CMD$,,AUTO
         1 000277   200010 236100                    LDQ     TEMP,,AUTO
         1 000300   000033 736000                    QLS     27
         1 000301   100010 552140                    STBQ    8,'40'O,PR1
         1 000302   000320 710000 1                  TRA     s:4814

      165     4806    4                CASE(%ITS_DUMPTO);

      166     4807    4                  CMD$->IT$FEP.TIMEOUT.DUMP = TEMP;

   4807  1 000303   200005 471500                    LDP1    CMD$,,AUTO
         1 000304   200010 236100                    LDQ     TEMP,,AUTO
         1 000305   000022 736000                    QLS     18
         1 000306   100010 552120                    STBQ    8,'20'O,PR1
         1 000307   000320 710000 1                  TRA     s:4814

      167     4808    4                CASE(%ITS_RUNTO);

      168     4809    4                  CMD$->IT$FEP.TIMEOUT.RUN = TEMP;

   4809  1 000310   200005 471500                    LDP1    CMD$,,AUTO
         1 000311   200010 236100                    LDQ     TEMP,,AUTO
         1 000312   000011 736000                    QLS     9
         1 000313   100010 552110                    STBQ    8,'10'O,PR1
         1 000314   000320 710000 1                  TRA     s:4814

      169     4810    4                CASE(%ITS_INITTO);

      170     4811    4                  CMD$->IT$FEP.TIMEOUT.INT = TEMP;

   4811  1 000315   200005 471500                    LDP1    CMD$,,AUTO
         1 000316   200010 236100                    LDQ     TEMP,,AUTO
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:25   
         1 000317   100010 552104                    STBQ    8,'04'O,PR1

      171     4812    4                END; /*small CASE*/

      172     4813    3               END; /*ELSE DO;*/

      173     4814    2            END; /* DO J */

   4814  1 000320   200017 235100                    LDA     J,,AUTO
         1 000321   000001 035007                    ADLA    1,DL
         1 000322   200017 755100                    STA     J,,AUTO
         1 000323   200003 470500                    LDP0    @PCB,,AUTO
         1 000324   000003 471500                    LDP1    3,,PR0
         1 000325   100001 236100                    LDQ     1,,PR1
         1 000326   000022 772000                    QRL     18
         1 000327   000002 136007                    SBLQ    2,DL
         1 000330   000333 604000 1                  TMI     s:4815
         1 000331   200017 116100                    CMPQ    J,,AUTO
         1 000332   000211 603000 1                  TRC     s:4791

      174     4815    1         BLK$ = PCB.OUT$->P$O.SUBLK$(PCB.OUT$->P$O.NSUBLKS-1);

   4815  1 000333   200003 470500                    LDP0    @PCB,,AUTO
         1 000334   000003 471500                    LDP1    3,,PR0
         1 000335   100001 220100                    LDX0    1,,PR1
         1 000336   100002 236110                    LDQ     2,X0,PR1
         1 000337   200007 756100                    STQ     BLK$,,AUTO

      175     4816              /* BLK$ points to DEV block after all this stuff  */
      176     4817    1         CHTX = ((CMD$->IT$FEP.IOM#)*%N_MAXCHANS)+CMD$->IT$FEP.CHAN;

   4817  1 000340   200005 473500                    LDP3    CMD$,,AUTO
         1 000341   300001 236100                    LDQ     1,,PR3
         1 000342   000007 736000                    QLS     7
         1 000343   300002 036100                    ADLQ    2,,PR3
         1 000344   200014 756100                    STQ     CHTX,,AUTO

PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:26   
      177     4818    1         CMD$ = PINCRW(CMD$,SIZEW(IT$FEP));

   4818  1 000345   200005 236100                    LDQ     CMD$,,AUTO
         1 000346   000011 036003                    ADLQ    9,DU
         1 000347   200005 756100                    STQ     CMD$,,AUTO

      178     4819    1         CMD$->IT$CMDWD = %ITS_ENDCMD;

   4819  1 000350   000145 235007                    LDA     101,DL
         1 000351   200005 473500                    LDP3    CMD$,,AUTO
         1 000352   300000 755100                    STA     0,,PR3

      179     4820    1         CALL ITF$FEP (PTR$) ALTRET(FEPERR);

   4820  1 000353   200004 630500                    EPPR0   @PTR$,,AUTO
         1 000354   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000355   000000 701000 xent               TSX1    ITF$FEP
         1 000356   000676 702000 1                  TSX2    FEPERR

      180     4821    1         I$=PTR$;

   4821  1 000357   200004 470500                    LDP0    @PTR$,,AUTO
         1 000360   000000 236100                    LDQ     0,,PR0
         1 000361   200016 756100                    STQ     I$,,AUTO

      181     4822    1         CALL ITH$ALLOCATE (PTR$,SIZEW(FP$OPCI)) ALTRET(FEPERR);

   4822  1 000362   000006 236000 2                  LDQ     6
         1 000363   200004 235100                    LDA     @PTR$,,AUTO
         1 000364   200024 757100                    STAQ    TEXTC+4,,AUTO
         1 000365   200024 630500                    EPPR0   TEXTC+4,,AUTO
         1 000366   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000367   000000 701000 xent               TSX1    ITH$ALLOCATE
         1 000370   000676 702000 1                  TSX2    FEPERR

      182     4823    1         I$->FP$OPCI.LNK$ = FP_OPCI$$;

PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:27   
   4823  1 000371   000000 236000 xsym               LDQ     FP_OPCI$$
         1 000372   200016 470500                    LDP0    I$,,AUTO
         1 000373   000000 756100                    STQ     0,,PR0

      183     4824    1         I$->FP$OPCI.FEI# = KI_MXFE;

   4824  1 000374   000000 235000 xsym               LDA     KI_MXFE
         1 000375   000001 755100                    STA     1,,PR0

      184     4825    1         I$->FP$OPCI.LDCTX = 0;

   4825  1 000376   000002 450100                    STZ     2,,PR0

      185     4826    1         FP_OPCI$$ = I$;

   4826  1 000377   200016 236100                    LDQ     I$,,AUTO
         1 000400   000000 756000 xsym               STQ     FP_OPCI$$

      186     4827    1         FP_MXOPC = FP_MXOPC + 1;

   4827  1 000401   000000 235000 xsym               LDA     FP_MXOPC
         1 000402   000001 035007                    ADLA    1,DL
         1 000403   000000 755000 xsym               STA     FP_MXOPC

      187     4828    1         CMD$ = B$DS5$;

   4828  1 000404   000000 236000 xsym               LDQ     B$DS5$
         1 000405   200005 756100                    STQ     CMD$,,AUTO

      188     4829    1         CMD$->IT$CMDWD = %ITS_OD;

   4829  1 000406   000017 235007                    LDA     15,DL
         1 000407   200005 471500                    LDP1    CMD$,,AUTO
         1 000410   100000 755100                    STA     0,,PR1

      189     4830    1         CMD$ = PINCRW(CMD$,SIZEW(IT$CMDWD));

PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:28   
   4830  1 000411   000001 036003                    ADLQ    1,DU
         1 000412   200005 756100                    STQ     CMD$,,AUTO

      190     4831    1         DEV$ = CMD$;   /* ptr to start of DEV blocks, for dup checking */

   4831  1 000413   200011 756100                    STQ     DEV$,,AUTO

      191     4832    1         I$ = BLK$; /* Point to DEV block        */

   4832  1 000414   200007 236100                    LDQ     BLK$,,AUTO
         1 000415   200016 756100                    STQ     I$,,AUTO

      192     4833    2         DO I = 0 TO I$->P$O.NSUBLKS - 1;

   4833  1 000416   200015 450100                    STZ     I,,AUTO
         1 000417   000655 710000 1                  TRA     s:4878+3

      193     4834    3            IF I ~= 0 THEN DO;

   4834  1 000420   200015 235100                    LDA     I,,AUTO
         1 000421   000425 600000 1                  TZE     s:4837

      194     4835    3               CMD$ = PINCRW(CMD$,SIZEW(IT$DTDEV)); /* Start new block  */

   4835  1 000422   200005 236100                    LDQ     CMD$,,AUTO
         1 000423   000010 036003                    ADLQ    8,DU
         1 000424   200005 756100                    STQ     CMD$,,AUTO

      195     4836    3               END;

      196     4837    2            BLK$ = I$->P$O.SUBLK$(I); /* point to DEV option block  */

   4837  1 000425   200016 470500                    LDP0    I$,,AUTO
         1 000426   000003 236105                    LDQ     3,AL,PR0
         1 000427   200007 756100                    STQ     BLK$,,AUTO

      197     4838    3            DO J = 1 TO BLK$->P$O.NSUBLKS - 1;
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:29   

   4838  1 000430   000001 235007                    LDA     1,DL
         1 000431   200017 755100                    STA     J,,AUTO
         1 000432   000644 710000 1                  TRA     s:4877+3

      198     4839    3               TEMP$ = BLK$->P$O.SUBLK$(J);

   4839  1 000433   200007 470500                    LDP0    BLK$,,AUTO
         1 000434   200017 720100                    LXL0    J,,AUTO
         1 000435   000003 236110                    LDQ     3,X0,PR0
         1 000436   200006 756100                    STQ     TEMP$,,AUTO

      199     4840    4               DO SELECT (TEMP$->P$O.CODE);

   4840  1 000437   200006 471500                    LDP1    TEMP$,,AUTO
         1 000440   100000 236100                    LDQ     0,,PR1
         1 000441   777777 376007                    ANQ     -1,DL
         1 000442   000004 116007                    CMPQ    4,DL
         1 000443   000451 602000 1                  TNC     s:4840+10
         1 000444   000632 600000 1                  TZE     s:4874
         1 000445   100000 721100                    LXL1    0,,PR1
         1 000446   000151 101003                    CMPX1   105,DU
         1 000447   000641 601000 1                  TNZ     s:4877
         1 000450   000455 710000 1                  TRA     s:4842
         1 000451   100000 721100                    LXL1    0,,PR1
         1 000452   000003 101003                    CMPX1   3,DU
         1 000453   000641 601000 1                  TNZ     s:4877
         1 000454   000604 710000 1                  TRA     s:4870

      200     4841    4                  SELECT (%ITS_NAMENUM);

      201     4842    4                  CMD$->IT$DTDEV = NO;

   4842  1 000455   200005 473500                    LDP3    CMD$,,AUTO
         1 000456   000100 100400                    MLR     fill='000'O
         1 000457   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         1 000460   300000 000035                    ADSC9   0,,PR3                   cn=0,n=29
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:30   

      202     4843    4                  CMD$->IT$DTDEV.VFC = CHTX; /* Pass Channel table index */

   4843  1 000461   000100 100500                    MLR     fill='000'O
         1 000462   200014 000004                    ADSC9   CHTX,,AUTO               cn=0,n=4
         1 000463   300005 200004                    ADSC9   5,,PR3                   cn=1,n=4

      203     4844    4                  CMD$->IT$DTDEV.CHAIN = IP; /* Pass context ptr  */

   4844  1 000464   000100 100500                    MLR     fill='000'O
         1 000465   200016 000004                    ADSC9   I$,,AUTO                 cn=0,n=4
         1 000466   300006 200004                    ADSC9   6,,PR3                   cn=1,n=4

      204     4845    4                  CMD$->IT$DTDEV.FLAGS.INPUT = YES;

   4845  1 000467   400000 236003                    LDQ     -131072,DU
         1 000470   300001 256100                    ORSQ    1,,PR3

      205     4846    4                  CMD$->IT$DTDEV.FLAGS.OUTPUT = YES;

   4846  1 000471   200000 236003                    LDQ     65536,DU
         1 000472   300001 256100                    ORSQ    1,,PR3

      206     4847    4                  CMD$->IT$DTDEV.CNTWD = ODDEV_CNTWD;

   4847  1 000473   000001 236000 0                  LDQ     ODDEV_CNTWD
         1 000474   300000 756100                    STQ     0,,PR3

      207     4848    4                  CMD$->IT$DTDEV.NM.MNEM = 'OD';

   4848  1 000475   000002 221000 0                  LDX1    ODDEV_CNTWD+1
         1 000476   300002 741100                    STX1    2,,PR3

      208     4849    4                  CMD$->IT$DTDEV.ATTR = YES;

   4849  1 000477   000100 100400                    MLR     fill='000'O
         1 000500   000030 000001 xsym               ADSC9   B_VECTNIL+24             cn=0,n=1
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:31   
         1 000501   300004 600002                    ADSC9   4,,PR3                   cn=3,n=2

      209     4850    5                  IF TEMP$->P$O.SUBLK$(0)->TEXT$C.COUNT~=2 THEN DO;

   4850  1 000502   100003 474500                    LDP4    3,,PR1
         1 000503   000100 101500                    MRL     fill='000'O
         1 000504   400000 000001                    ADSC9   0,,PR4                   cn=0,n=1
         1 000505   200024 000004                    ADSC9   TEXTC+4,,AUTO            cn=0,n=4
         1 000506   200024 236100                    LDQ     TEXTC+4,,AUTO
         1 000507   000002 116007                    CMPQ    2,DL
         1 000510   000516 600000 1                  TZE     s:4854

      210     4851    5                     CALL ITE$ERROR(%E$2CHARDEV#);

   4851  1 000511   000010 630400 2                  EPPR0   8
         1 000512   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000513   000000 701000 xent               TSX1    ITE$ERROR
         1 000514   000000 011000                    NOP     0

      211     4852    5                     ALTRETURN;

   4852  1 000515   000000 702200 xent               TSX2  ! X66_AALT

      212     4853    5                     END;
      213     4854    4                  CMD$->IT$DTDEV.NM.NUM = SUBSTR(TEMP$->P$O.SUBLK$(0)

   4854  1 000516   100003 474500                    LDP4    3,,PR1
         1 000517   000100 101500                    MRL     fill='000'O
         1 000520   400000 000001                    ADSC9   0,,PR4                   cn=0,n=1
         1 000521   200024 000002                    ADSC9   TEXTC+4,,AUTO            cn=0,n=2
         1 000522   200024 222100                    LDX2    TEXTC+4,,AUTO
         1 000523   040100 100500                    MLR     fill='040'O
         1 000524   400000 200002                    ADSC9   0,,PR4                   cn=1,n=2
         1 000525   300002 400002                    ADSC9   2,,PR3                   cn=2,n=2

      214     4855    4                     ->TEXT$C.TEXT,0,2);
      215     4856    4                  CMD$->IT$DTDEV.NM.BLANKS = IT_TXT_0000;
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:32   

   4856  1 000526   000000 236000 xsym               LDQ     IT_TXT_0000
         1 000527   300003 756100                    STQ     3,,PR3

      216     4857    4                  TMP$ = DEV$;

   4857  1 000530   200011 236100                    LDQ     DEV$,,AUTO
         1 000531   200012 756100                    STQ     TMP$,,AUTO

      217     4858    5                  DO DEVX = 0 TO I-1;  /* check all previous devices */

   4858  1 000532   200013 450100                    STZ     DEVX,,AUTO
         1 000533   000570 710000 1                  TRA     s:4867+1

      218     4859    5                     IF DEVX ~= 0 THEN

   4859  1 000534   200013 235100                    LDA     DEVX,,AUTO
         1 000535   000541 600000 1                  TZE     s:4861

      219     4860    5                        TMP$ = PINCRW(TMP$,SIZEW(IT$DTDEV));

   4860  1 000536   200012 236100                    LDQ     TMP$,,AUTO
         1 000537   000010 036003                    ADLQ    8,DU
         1 000540   200012 756100                    STQ     TMP$,,AUTO

      220     4861    6                     IF CMD$->IT$DTDEV.NAME = TMP$->IT$DTDEV.NAME THEN DO;

   4861  1 000541   200005 470500                    LDP0    CMD$,,AUTO
         1 000542   200012 471500                    LDP1    TMP$,,AUTO
         1 000543   040100 106500                    CMPC    fill='040'O
         1 000544   000002 000010                    ADSC9   2,,PR0                   cn=0,n=8
         1 000545   100002 000010                    ADSC9   2,,PR1                   cn=0,n=8
         1 000546   000567 601000 1                  TNZ     s:4867

      221     4862    6                        TEXTC.TEXT = CMD$->IT$DTDEV.NAME;

   4862  1 000547   040100 100500                    MLR     fill='040'O
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:33   
         1 000550   000002 000010                    ADSC9   2,,PR0                   cn=0,n=8
         1 000551   200020 200010                    ADSC9   TEXTC,,AUTO              cn=1,n=8

      222     4863    6                        TEXTC.COUNT = 4;

   4863  1 000552   004000 236003                    LDQ     2048,DU
         1 000553   200020 552140                    STBQ    TEXTC,'40'O,AUTO

      223     4864    6                        CALL ITE$ERROR (%E$DUPDEVNAME,ADDR(TEXTC));

   4864  1 000554   200020 633500                    EPPR3   TEXTC,,AUTO
         1 000555   200024 453500                    STP3    TEXTC+4,,AUTO
         1 000556   200024 634500                    EPPR4   TEXTC+4,,AUTO
         1 000557   200027 454500                    STP4    TEXTC+7,,AUTO
         1 000560   000012 236000 2                  LDQ     10
         1 000561   200026 756100                    STQ     TEXTC+6,,AUTO
         1 000562   200026 630500                    EPPR0   TEXTC+6,,AUTO
         1 000563   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000564   000000 701000 xent               TSX1    ITE$ERROR
         1 000565   000000 011000                    NOP     0

      224     4865    6                        ALTRETURN;

   4865  1 000566   000000 702200 xent               TSX2  ! X66_AALT

      225     4866    6                        END; /*IF*/
      226     4867    5                     END; /*DO*/

   4867  1 000567   200013 054100                    AOS     DEVX,,AUTO
         1 000570   200013 236100                    LDQ     DEVX,,AUTO
         1 000571   000534 604000 1                  TMI     s:4859
         1 000572   200015 116100                    CMPQ    I,,AUTO
         1 000573   000534 602000 1                  TNC     s:4859

      227     4868    4                  CALL ITH$CHECK_DEVNAME (CMD$->IT$DTDEV.NAME, ) ALTRET (DEVERR);

   4868  1 000574   200005 236100                    LDQ     CMD$,,AUTO
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:34   
         1 000575   000002 036003                    ADLQ    2,DU
         1 000576   200024 756100                    STQ     TEXTC+4,,AUTO
         1 000577   200024 630500                    EPPR0   TEXTC+4,,AUTO
         1 000600   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000601   000000 701000 xent               TSX1    ITH$CHECK_DEVNAME
         1 000602   000676 702000 1                  TSX2    FEPERR
         1 000603   000641 710000 1                  TRA     s:4877

      228     4869    4                  SELECT (%ITS_DEV#);

      229     4870    4                  TEXTC = TEMP$->P$O.SUBLK$(0)->P$O.SUBLK$(0)->TEXT$C;

   4870  1 000604   100003 473500                    LDP3    3,,PR1
         1 000605   300003 474500                    LDP4    3,,PR3
         1 000606   000100 101500                    MRL     fill='000'O
         1 000607   400000 000001                    ADSC9   0,,PR4                   cn=0,n=1
         1 000610   200024 000002                    ADSC9   TEXTC+4,,AUTO            cn=0,n=2
         1 000611   200024 221100                    LDX1    TEXTC+4,,AUTO
         1 000612   000001 622011                    EAX2    1,X1
         1 000613   000100 100540                    MLR     fill='000'O
         1 000614   400000 000012                    ADSC9   0,,PR4                   cn=0,n=*X2
         1 000615   200020 000011                    ADSC9   TEXTC,,AUTO              cn=0,n=9

      230     4871    4                  CALL CHARBIN (TEMP,SUBSTR(TEXTC.TEXT,0,TEXTC.COUNT));

   4871  1 000616   200020 236100                    LDQ     TEXTC,,AUTO
         1 000617   000033 772000                    QRL     27
         1 000620   000000 621006                    EAX1    0,QL
         1 000621   000100 305540                    DTB
         1 000622   200020 230011                    NDSC9   TEXTC,,AUTO              cn=1,s=nosgn,sf=0,n=*X1
         1 000623   200024 000010                    NDSC9   TEXTC+4,,AUTO            cn=0,s=lsgnf,sf=0,n=8
         1 000624   200025 235100                    LDA     TEXTC+5,,AUTO
         1 000625   200010 755100                    STA     TEMP,,AUTO

      231     4872    4                  CMD$->IT$DTDEV.DEV# = TEMP;

   4872  1 000626   000000 621005                    EAX1    0,AL
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:35   
         1 000627   200005 473500                    LDP3    CMD$,,AUTO
         1 000630   300001 441100                    SXL1    1,,PR3
         1 000631   000641 710000 1                  TRA     s:4877

      232     4873    4                  SELECT (%ITS_STATUS);

      233     4874    4                  IF TEMP$->P$O.SUBLK$(0)->P$O.CODE = %ITS_DOWN THEN

   4874  1 000632   100003 473500                    LDP3    3,,PR1
         1 000633   300000 721100                    LXL1    0,,PR3
         1 000634   000002 101003                    CMPX1   2,DU
         1 000635   000641 601000 1                  TNZ     s:4877

      234     4875    4                     CMD$->IT$DTDEV.FLAGS.DOWN = YES;

   4875  1 000636   200005 474500                    LDP4    CMD$,,AUTO
         1 000637   040000 236003                    LDQ     16384,DU
         1 000640   400001 256100                    ORSQ    1,,PR4

      235     4876    4                  END;

      236     4877    3               END;

   4877  1 000641   200017 235100                    LDA     J,,AUTO
         1 000642   000001 035007                    ADLA    1,DL
         1 000643   200017 755100                    STA     J,,AUTO
         1 000644   200007 470500                    LDP0    BLK$,,AUTO
         1 000645   000001 236100                    LDQ     1,,PR0
         1 000646   000022 772000                    QRL     18
         1 000647   200017 116100                    CMPQ    J,,AUTO
         1 000650   000652 600000 1                  TZE     s:4878
         1 000651   000433 603000 1                  TRC     s:4839

      237     4878    2            END;

   4878  1 000652   200015 235100                    LDA     I,,AUTO
         1 000653   000001 035007                    ADLA    1,DL
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:36   
         1 000654   200015 755100                    STA     I,,AUTO
         1 000655   200016 470500                    LDP0    I$,,AUTO
         1 000656   000001 236100                    LDQ     1,,PR0
         1 000657   000022 772000                    QRL     18
         1 000660   200015 116100                    CMPQ    I,,AUTO
         1 000661   000663 600000 1                  TZE     s:4879
         1 000662   000420 603000 1                  TRC     s:4834

      238     4879    1         CMD$ = PINCRW(CMD$,SIZEW(IT$DTDEV));

   4879  1 000663   200005 236100                    LDQ     CMD$,,AUTO
         1 000664   000010 036003                    ADLQ    8,DU
         1 000665   200005 756100                    STQ     CMD$,,AUTO

      239     4880    1         CMD$->IT$CMDWD = %ITS_ENDCMD;

   4880  1 000666   000145 235007                    LDA     101,DL
         1 000667   200005 471500                    LDP1    CMD$,,AUTO
         1 000670   100000 755100                    STA     0,,PR1

      240     4881
      241     4882    1         CALL ITD$DISKTAPE (PTR$) ALTRET(DEVERR);

   4882  1 000671   200004 630500                    EPPR0   @PTR$,,AUTO
         1 000672   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000673   000000 701000 xent               TSX1    ITD$DISKTAPE
         1 000674   000676 702000 1                  TSX2    FEPERR

      242     4883
      243     4884    1         RETURN;

   4884  1 000675   000000 702200 xent               TSX2  ! X66_ARET

   4880  1 000676                       FEPERR       null
   4880  1 000676                       DEVERR       null
      244     4885    1   FEPERR:;
      245     4886    1   DEVERR:;
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:37   
      246     4887    1         ALTRETURN;

   4887  1 000676   000000 702200 xent               TSX2  ! X66_AALT

FEP_CNTWD
 Sect OctLoc
   0     000   000000 011006                                                    ....

ODDEV_CNTWD
 Sect OctLoc
   0     001   000000 010002                                                    ....

(unnamed)
 Sect OctLoc
   0     002   117104 040040                                                    OD

(unnamed)
 Sect OctLoc
   2     000   000000 000167   000000 006000   000000 000162   000002 006000    ...w.......r....
   2     004   000000 000217   000004 006000   000005 006000   000000 000152    ...............j
   2     010   000007 006000   000000 000256   000011 006000                    ............
      247     4888
      248     4889    1   END;

PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:38   
--  Include file information  --

   IT$FEP.:E05TOU  cannot be made into a system file and is referenced.
   KI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N$REQ.:E05TOU  is referenced.
   NI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   FP_MACRO_C.:E05TOU  is referenced.
   KI_SUBS_C.:E05TOU  is referenced.
   IT$CMDWD.:E05TOU  cannot be made into a system file and is referenced.
   IT$DTDEV.:E05TOU  cannot be made into a system file and is referenced.
   IT_ERROR_C.:E05TOU  is referenced.
   IT_SUBS_C.:E05TOU  is referenced.
   XU_MACRO_C.:E05TOU  is referenced.
      No diagnostics issued in procedure ITO$CHECK_OD.
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:39   

 **** Variables and constants ****

  ****  Section 000 RoData ITO$CHECK_OD

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/b STRC        r     1 FEP_CNTWD                  1-0-0/b STRC        r     1 ODDEV_CNTWD

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @PCB                       4-0-0/w PTR         r     1 @PTR$
     7-0-0/w PTR         r     1 BLK$                      14-0-0/w UBIN        r     1 CHTX
     5-0-0/w PTR         r     1 CMD$                      11-0-0/w PTR         r     1 DEV$
    13-0-0/w SBIN        r     1 DEVX                      15-0-0/w UBIN        r     1 I
    16-0-0/w PTR         r     1 I$                        16-0-0/w UBIN        r     1 IP
    17-0-0/w UBIN        r     1 J                         *0-0-0/w STRC(504)   r     1 PCB
    *0-0-0/w PTR         r     1 PTR$                      10-0-0/w UBIN        r     1 TEMP
     6-0-0/w PTR         r     1 TEMP$                     20-0-0/c STRC(81)    r     1 TEXTC
    12-0-0/w PTR         r     1 TMP$

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$DS5$                     0-0-0/w UBIN        r     1 FP_MXOPC
     0-0-0/w PTR         r     1 FP_OPCI$$                  0-0-0/c CHAR(4)     r     1 IT_TXT_0000
     0-0-0/w PTR         r     1 KI_FEI$$                   0-0-0/w UBIN        r     1 KI_MXFE
     0-0-0/w PTR         r     1 N$DCT$$                    0-0-0/w PTR         r     1 N$FQ$
     0-0-0/w PTR         r     1 NI$CHT$                    0-0-0/w PTR         r     1 NI$FQ$
     0-0-0/w PTR         r     1 NI$IBUF$                   0-0-0/w PTR         r     1 NI$RP$
     0-0-0/w SBIN        r     1 NI_IOMS

PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:40   
  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(108)   r     1 FP$OPCI                    0-0-0/w UBIN        r     1 IT$CMDWD
     0-0-0/w STRC(261)   r     1 IT$DTDEV                   0-0-0/w STRC(324)   r     1 IT$FEP
     0-0-0/w STRC(144)   r     1 P$O                        0-0-0/c ASTR(9)     r     1 TEXT$C


   Procedure ITO$CHECK_OD requires 447 words for executable code.
   Procedure ITO$CHECK_OD requires 24 words of local(AUTO) storage.

    No errors detected in file ITO$OD.:E05TSI    .
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:41   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:42   
          MINI XREF LISTING

B$DS5$
      4153**DCL      4751>>ASSIGN   4828>>ASSIGN
BLK$
      4625**DCL      4756<<ASSIGN   4757>>ASSIGN   4762>>CALLBLT  4762>>CALLBLT  4768<<ASSIGN   4769>>ASSIGN
      4769>>ASSIGN   4776>>ASSIGN   4776>>ASSIGN   4791<<ASSIGN   4792>>IF       4794>>IF       4798>>ASSIGN
      4798>>ASSIGN   4803>>DOCASE   4815<<ASSIGN   4832>>ASSIGN   4837<<ASSIGN   4838>>DOINDEX  4839>>ASSIGN
CHTX
      4630**DCL      4817<<ASSIGN   4843>>ASSIGN
CMD$
      4623**DCL      4751<<ASSIGN   4752>>ASSIGN   4753<<ASSIGN   4753>>ASSIGN   4754>>ASSIGN   4755>>ASSIGN
      4762>>CALLBLT  4764>>IF       4764>>IF       4775>>ASSIGN   4779>>ASSIGN   4780>>ASSIGN   4781>>ASSIGN
      4782>>ASSIGN   4783>>ASSIGN   4784>>ASSIGN   4785>>ASSIGN   4786>>ASSIGN   4795>>ASSIGN   4805>>ASSIGN
      4807>>ASSIGN   4809>>ASSIGN   4811>>ASSIGN   4817>>ASSIGN   4817>>ASSIGN   4818<<ASSIGN   4818>>ASSIGN
      4819>>ASSIGN   4828<<ASSIGN   4829>>ASSIGN   4830<<ASSIGN   4830>>ASSIGN   4831>>ASSIGN   4835<<ASSIGN
      4835>>ASSIGN   4842>>ASSIGN   4843>>ASSIGN   4844>>ASSIGN   4845>>ASSIGN   4846>>ASSIGN   4847>>ASSIGN
      4848>>ASSIGN   4849>>ASSIGN   4854>>ASSIGN   4856>>ASSIGN   4861>>IF       4862>>ASSIGN   4868>>CALL
      4872>>ASSIGN   4875>>ASSIGN   4879<<ASSIGN   4879>>ASSIGN   4880>>ASSIGN
DEV$
      4627**DCL      4831<<ASSIGN   4857>>ASSIGN
DEVERR
      4880**LABEL    4868--CALLALT  4882--CALLALT
DEVX
      4629**DCL      4858<<DOINDEX  4859>>IF
FEPERR
      4880**LABEL    4778--CALLALT  4820--CALLALT  4822--CALLALT
FEP_CNTWD
      4686**DCL      4755>>ASSIGN
FP$OPCI
      4652**DCL      4822--CALL
FP$OPCI.FEI#
      4654**DCL      4824<<ASSIGN
FP$OPCI.LDCTX
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:43   
      4655**DCL      4825<<ASSIGN
FP$OPCI.LNK$
      4653**DCL      4823<<ASSIGN
FP_MXOPC
      4156**DCL      4827<<ASSIGN   4827>>ASSIGN
FP_OPCI$$
      4155**DCL      4823>>ASSIGN   4826<<ASSIGN
I
      4631**DCL      4833<<DOINDEX  4834>>IF       4837>>ASSIGN   4858>>DOINDEX
I$
      4632**DCL      4633--REDEF    4821<<ASSIGN   4823>>ASSIGN   4824>>ASSIGN   4825>>ASSIGN   4826>>ASSIGN
      4832<<ASSIGN   4833>>DOINDEX  4837>>ASSIGN
IP
      4633**DCL      4844>>ASSIGN
IT$CMDWD
      3533**DCL      4752<<ASSIGN   4753--ASSIGN   4819<<ASSIGN   4829<<ASSIGN   4830--ASSIGN   4880<<ASSIGN
IT$DTDEV
      3499**DCL      4692--DCLINIT  4835--ASSIGN   4842<<ASSIGN   4860--ASSIGN   4879--ASSIGN
IT$DTDEV.ATTR
      3523**DCL      4849<<ASSIGN
IT$DTDEV.CHAIN
      3525**DCL      4844<<ASSIGN
IT$DTDEV.CNTWD
      3500**DCL      4847<<ASSIGN
IT$DTDEV.DEV#
      3514**DCL      4872<<ASSIGN
IT$DTDEV.FLAGS.DOWN
      3508**DCL      4875<<ASSIGN
IT$DTDEV.FLAGS.INPUT
      3505**DCL      4845<<ASSIGN
IT$DTDEV.FLAGS.OUTPUT
      3506**DCL      4846<<ASSIGN
IT$DTDEV.NAME
      3515**DCL      3516--REDEF    4861>>IF       4861>>IF       4862>>ASSIGN   4868<>CALL
IT$DTDEV.NM.BLANKS
      3519**DCL      4856<<ASSIGN
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:44   
IT$DTDEV.NM.MNEM
      3517**DCL      4848<<ASSIGN
IT$DTDEV.NM.NUM
      3518**DCL      4854<<ASSIGN
IT$DTDEV.VFC
      3524**DCL      4843<<ASSIGN
IT$FEP
      4665**DCL      4688--DCLINIT  4754<<ASSIGN   4818--ASSIGN
IT$FEP.CHAN
      4671**DCL      4779<<ASSIGN   4817>>ASSIGN
IT$FEP.CNTWD
      4666**DCL      4755<<ASSIGN
IT$FEP.FEP#
      4674**DCL      4762<<CALLBLT  4764>>IF       4764>>IF
IT$FEP.FLAGS.DOWN
      4673**DCL      4795<<ASSIGN
IT$FEP.INQSZ
      4675**DCL      4780<<ASSIGN
IT$FEP.IOM#
      4670**DCL      4775<<ASSIGN   4817>>ASSIGN
IT$FEP.OUTQSZ
      4676**DCL      4781<<ASSIGN
IT$FEP.QOS
      4677**DCL      4782<<ASSIGN
IT$FEP.TIMEOUT.BOOT
      4679**DCL      4783<<ASSIGN   4805<<ASSIGN
IT$FEP.TIMEOUT.DUMP
      4680**DCL      4784<<ASSIGN   4807<<ASSIGN
IT$FEP.TIMEOUT.INT
      4682**DCL      4786<<ASSIGN   4811<<ASSIGN
IT$FEP.TIMEOUT.RUN
      4681**DCL      4785<<ASSIGN   4809<<ASSIGN
ITD$DISKTAPE
      4700**DCL-ENT  4882--CALL
ITE$ERROR
      4698**DCL-ENT  4759--CALL     4765--CALL     4772--CALL     4801--CALL     4851--CALL     4864--CALL
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:45   
ITF$FEP
      4699**DCL-ENT  4820--CALL
ITH$ALLOCATE
      4701**DCL-ENT  4822--CALL
ITH$CHECK_CHANNUM
      4702**DCL-ENT  4778--CALL
ITH$CHECK_DEVNAME
      4703**DCL-ENT  4868--CALL
IT_TXT_0000
      4157**DCL      4856>>ASSIGN
J
      4634**DCL      4789<<DOINDEX  4791>>ASSIGN   4838<<DOINDEX  4839>>ASSIGN
KI_FEI$$
      4606**DCL      4607--IMP-PTR
KI_MXFE
      4615**DCL      4824>>ASSIGN
N$DCT$$
      4456**DCL      4590--IMP-PTR
N$FQ$
      4456**DCL      4591--IMP-PTR
N$REQ_INIT.BUFADDR
      4475**DCL      4476--REDEF    4476--REDEF
N$REQ_INIT.DLA.DRELADDR
      4467**DCL      4467--REDEF
N$REQ_INIT.DVE.EOMCHAR
      4504**DCL      4505--REDEF
N$REQ_INIT.EAINFO
      4498**DCL      4498--REDEF
N$REQ_INIT.EAINFOX
      4498**DCL      4499--REDEF
N$REQ_INIT.EVNTINFO
      4499**DCL      4499--REDEF
N$REQ_INIT.STATUS
      4480**DCL      4486--REDEF
NI$CHT$
      4515**DCL      4645--IMP-PTR
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:46   
NI$FQ$
      4516**DCL      4592--IMP-PTR
NI$IBUF$
      4516**DCL      4592--IMP-PTR
NI$IMXMBX_INIT.PAGED_BASE
      4526**DCL      4527--REDEF    4527--REDEF
NI$IMXMBX_INIT.SIZE
      4528**DCL      4528--REDEF
NI$REQ_INIT.DCW
      4550**DCL      4553--REDEF
NI$REQ_INIT.DCW.TALLY
      4551**DCL      4551--REDEF
NI$REQ_INIT.IDCW.EXTA
      4553**DCL      4553--REDEF
NI$REQ_INIT.PCW
      4555**DCL      4559--REDEF
NI$REQ_INIT.SEEK
      4560**DCL      4561--REDEF    4562--REDEF
NI$RP$
      4564**DCL      4594--IMP-PTR
NI_IOMS
      4568**DCL      4771>>IF
NI_MBX_INIT.DCW.CONTROL.AE
      4586**DCL      4586--REDEF
NI_MBX_INIT.LPW.CONTROL.AE
      4582**DCL      4582--REDEF
ODDEV_CNTWD
      4690**DCL      4847>>ASSIGN
P$O.CODE
      4720**DCL      4792>>IF       4794>>IF       4803>>DOCASE   4840>>DOSELCT  4874>>IF
P$O.NSUBLKS
      4724**DCL      4788>>IF       4789>>DOINDEX  4815>>ASSIGN   4833>>DOINDEX  4838>>DOINDEX
P$O.SUBLK$
      4745**DCL      4756>>ASSIGN   4757>>ASSIGN   4757>>ASSIGN   4762>>CALLBLT  4762>>CALLBLT  4762>>CALLBLT
      4762>>CALLBLT  4768>>ASSIGN   4769>>ASSIGN   4769>>ASSIGN   4769>>ASSIGN   4769>>ASSIGN   4776>>ASSIGN
      4776>>ASSIGN   4776>>ASSIGN   4776>>ASSIGN   4791>>ASSIGN   4794>>IF       4798>>ASSIGN   4798>>ASSIGN
PL6.E3A0      #001=ITO$CHECK_OD File=ITO$OD.:E05TSI                              TUE 07/29/97 23:06 Page:47   
      4798>>ASSIGN   4798>>ASSIGN   4815>>ASSIGN   4837>>ASSIGN   4839>>ASSIGN   4850>>IF       4854>>ASSIGN
      4854>>ASSIGN   4870>>ASSIGN   4870>>ASSIGN   4870>>ASSIGN   4870>>ASSIGN   4874>>IF
PCB
      3967**DCL        33--PROC
PCB.OUT$
      3980**DCL      4756>>ASSIGN   4768>>ASSIGN   4788>>IF       4789>>DOINDEX  4791>>ASSIGN   4815>>ASSIGN
      4815>>ASSIGN
PTR$
      4149**DCL        33--PROC     4820<>CALL     4821>>ASSIGN   4822<>CALL     4882<>CALL
TEMP
      4626**DCL      4757<<ASSIGN   4758>>IF       4758>>IF       4762>>CALLBLT  4770<<CALLBLT  4771>>IF
      4775>>ASSIGN   4777<<CALLBLT  4778<>CALL     4779>>ASSIGN   4799<<CALLBLT  4800>>IF       4800>>IF
      4805>>ASSIGN   4807>>ASSIGN   4809>>ASSIGN   4811>>ASSIGN   4871<<CALLBLT  4872>>ASSIGN
TEMP$
      4624**DCL      4839<<ASSIGN   4840>>DOSELCT  4850>>IF       4854>>ASSIGN   4854>>ASSIGN   4870>>ASSIGN
      4870>>ASSIGN   4874>>IF
TEXT$C
      4641**DCL      4769>>ASSIGN   4776>>ASSIGN   4798>>ASSIGN   4870>>ASSIGN
TEXT$C.COUNT
      4642**DCL      4643--IMP-SIZ  4757>>ASSIGN   4762>>CALLBLT  4769>>ASSIGN   4776>>ASSIGN   4798>>ASSIGN
      4850>>IF       4854>>ASSIGN   4870>>ASSIGN
TEXT$C.TEXT
      4643**DCL      4762>>CALLBLT  4854>>ASSIGN
TEXTC
      4635**DCL      4769<<ASSIGN   4776<<ASSIGN   4798<<ASSIGN   4864--CALL     4870<<ASSIGN
TEXTC.COUNT
      4636**DCL      4770>>CALLBLT  4777>>CALLBLT  4799>>CALLBLT  4863<<ASSIGN   4871>>CALLBLT
TEXTC.TEXT
      4637**DCL      4770>>CALLBLT  4777>>CALLBLT  4799>>CALLBLT  4862<<ASSIGN   4871>>CALLBLT
TMP$
      4628**DCL      4857<<ASSIGN   4860<<ASSIGN   4860>>ASSIGN   4861>>IF
