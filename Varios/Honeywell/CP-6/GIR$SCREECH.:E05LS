VERSION E05

PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:1    
        1        1        /*M* GIR$SCREECH    LCP-6 Recovery entry module  */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /**/
        8        8        /*X* DMR */
        9        9        /**/
       10       10        GIR$SCREECH: PROC(TSA);
       11       11
       12       12        %INCLUDE LCP_6;
       13      203        %INCLUDE IR_DATA_M;
       14      367        %INCLUDE GH_GATE_M;
       15      408        %INCLUDE GM_MACRO_M;
       16      890        %INCLUDE G$BOBCAT_M;
       17      910        %INCLUDE G_HJIT_M;
       18     1055        %INCLUDE HF_ERRORS_C;
       19     1140        /**/
       20     1141        %G$TSA (FPTN=TSA,STCLASS="PARAM");
       21     1529        /**/
       22     1530        %VLP_SCODE (FPTN=SCODE,STCLASS=BASED);
       23     1591        %VLP_SCODE (FPTN=SCREECH_CODE,STCLASS=STATIC SYMDEF);
       24     1652        %VLP_ERRCODE (FPTN=GHTCODE,STCLASS=CONSTANT,FCG='GH',MID='T');
       25     1698        %VLP_ERRCODE (FPTN=GHHCODE,STCLASS=CONSTANT,FCG='GH',MID='H');
       26     1744        %G$UHJIT(FPTN=G_UHJIT, STCLASS=SYMREF);
       27     4718        %GATE (FPTN=GI_RCVR_GATE,STCLASS="STATIC SYMDEF");
       28     4737    1   DCL GI_GASP BIT(1) STATIC SYMDEF INIT('1'B);
       29     4738    1   DCL GI_DUMP UBIN SYMREF;
       30     4739        /**/
       31     4740    1   DCL GIR$INITDUMP ENTRY;
       32     4741    1   DCL GIR$READSTAT ENTRY;
       33     4742    1   DCL GIR$GASP ENTRY(1);
       34     4743    1   DCL GHH$WDTN ENTRY;
       35     4744    1   DCL GHH$WDTF ENTRY;
       36     4745    1   DCL GHH$RTCN ENTRY;
       37     4746    1   DCL GHH$RTCF ENTRY;
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:2    
       38     4747        /**/
       39     4748    1   DCL G$PPUT$ PTR SYMREF;
       40     4749    1   DCL G$LOW_MEM$ PTR SYMREF;
       41     4750    1   DCL G$BOBCAT$ PTR SYMREF;
       42     4751    1   DCL G$MHJIT$ PTR SYMREF;
       43     4752    1   DCL G$ASDT_MON$ PTR SYMREF;
       44     4753        /**/
       45     4754        %GM$PPUT (FPTN=GM$PPUT,ARRAY=NO,STCLASS="BASED(PPUT$)");
       46     4814        %GM$PPUT (FPTN=GM$PP,ARRAY=YES,STCLASS="BASED(G$PPUT$)");
       47     4874        %RV_FEP_BUFF (FPTN=GI$RVBUF,STCLASS="BASED(RVBUF$)");
       48     4967        %GI_RCVR_EQU;
       49     4979        %G$BOBCAT (FPTN=G$BOBCAT,STCLASS="BASED(G$BOBCAT$)");
       50     4992        %G$MHJIT (FPTN=G$MHJIT,STCLASS="BASED(G$MHJIT$)");
       51    11866        /**/
       52    11867    1   DCL RVBUF$ PTR;
       53    11868    1   DCL I SBIN;
       54    11869    1   DCL J SBIN;
       55    11870    1   DCL HIPAGE SBIN;
       56    11871    1   DCL LOPAGE SBIN;
       57    11872    1   DCL PPUT$ PTR;
       58    11873        %EJECT;
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:3    
       59    11874
       60    11875                %LOCK (G=GI_RCVR_GATE);
       61    11882    1           CALL GHH$WDTF;
       62    11883    1           CALL GHH$RTCF;
       63    11884    1           RVBUF$=PINCRW(G$LOW_MEM$,%GI_RVBUF_LOC);
       64    11885    2           IF TSA.I.TRAP# = 0 THEN DO;
       65    11886    2              SCREECH_CODE=TSA.A$->SCODE;
       66    11887    2              END;
       67    11888    2           ELSE DO;
       68    11889    2              IF ADDR(TSA)~=ADDR(G_UHJIT.TSA_USR)
       69    11890    2              THEN SCREECH_CODE=GHTCODE;
       70    11891    2              ELSE SCREECH_CODE=GHHCODE;
       71    11892    2              SCREECH_CODE.ERR#=TSA.I.TRAP#+%E$TRAP;
       72    11893    2              END;
       73    11894
       74    11895    2           DO WHILE(GI$RVBUF.BUSY~=0);
       75    11896                                      /* NEED TO THINK OF SOMETHING BETTER THAN THIS */
       76    11897    2              END;
       77    11898    1           GI$RVBUF.BUSY=-1;
       78    11899    1           GI$RVBUF.SCODE = SCREECH_CODE;
       79    11900    1           GI$RVBUF.MHJITPP = G$MHJIT.ASDT_MON.MHJIT.BASE;
       80    11901    1           GI$RVBUF.CUN = G$MHJIT.CUN;
       81    11902    1           GI$RVBUF.TSA$ = ADDR(TSA);
       82    11903        /**/
       83    11904        /* For now, we will dump all in-use pages */
       84    11905        /**/
       85    11906    1           LOPAGE=G$BOBCAT.MEM_LOW;
       86    11907    1           HIPAGE=G$BOBCAT.MEM_HI;
       87    11908    1           J=(LOPAGE+%(GI_PGS_PER_BIT-1))/%GI_PGS_PER_BIT;
       88    11909    2           DO I=0 TO J;
       89    11910    2              GI$RVBUF.DUMPMAP(I)='1'B;
       90    11911    2              END;
       91    11912
       92    11913    1           I=LOPAGE;
       93    11914    1           PPUT$ = ADDR(GM$PP(I));
       94    11915    2           DO WHILE(NOT GM$PPUT.C.FIRSTP);
       95    11916    2              GI$RVBUF.DUMPMAP(I/%GI_PGS_PER_BIT)='1'B;
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:4    
       96    11917    2              I = I + 1;
       97    11918    2              PPUT$ = ADDR(GM$PP(I));
       98    11919    2              END;
       99    11920
      100    11921    2           DO WHILE(I<=HIPAGE);
      101    11922    2              PPUT$ = ADDR(GM$PP(I));
      102    11923    3              IF NOT (GM$PPUT.C.FIRSTP) THEN DO;
      103    11924    3                 CALL PPUT_BAD;
      104    11925    3                 GOTO MAP_DONE;
      105    11926    3                 END;
      106    11927    2              J=I+GM$PPUT.SIZE-1;
      107    11928    3              IF GM$PPUT.C.INUSE AND NOT GM$PPUT.C.PP THEN DO I=I TO J;
      108    11929    3                 GI$RVBUF.DUMPMAP(I/%GI_PGS_PER_BIT)='1'B;
      109    11930    3                 END;
      110    11931    3              ELSE DO;
      111    11932    3                 I=J+1;
      112    11933    3                 END;
      113    11934    2              PPUT$ = ADDR(GM$PP(J));
      114    11935    3              IF NOT (GM$PPUT.C.LASTP) THEN DO;
      115    11936    3                 CALL PPUT_BAD;
      116    11937    3                 GOTO MAP_DONE;
      117    11938    3                 END;
      118    11939    2              END;
      119    11940        /**/
      120    11941    1   MAP_DONE:
      121    11942
      122    11943    1           GI$RVBUF.BADPPX=I;
      123    11944    1           CALL SKIP_PROC(G$ASDT_MON$);
      124    11945
      125    11946    2           IF /*SCREECH_CODE.SEV=7 AND*/ GI_GASP THEN DO;
      126    11947    2              CALL GIR$GASP;
      127    11948    2              END;
      128    11949    1           CALL GIR$INITDUMP;
      129    11950
      130    11951        /* Turn off the clocks */
      131    11952        /**/
      132    11953    2           DO WHILE(GI$RVBUF.BUSY~=0);
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:5    
      133    11954                                 /* For now, just hang out until somebody zaps the */
      134    11955                                                /* busy flag or re-boots us.          */
      135    11956    2              CALL GIR$READSTAT;           /* READ COUPLER STATUS */
      136    11957                                                /* TO KEEP THINGS MOVING */
      137    11958    2              END;
      138    11959
      139    11960    2           DO WHILE(SCREECH_CODE.SEV=7);
      140    11961                                                /* Full screech.  Hang out forever. */
      141    11962    2              END;
      142    11963        /* Turn on the clocks */
      143    11964    1           CALL GHH$WDTN;
      144    11965    1           CALL GHH$RTCN;
      145    11966                %UNLOCK (G=GI_RCVR_GATE);
      146    11973    1           RETURN;
      147    11974        %EJECT;
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:6    
      148    11975    1   PPUT_BAD: PROC;
      149    11976        /**/
      150    11977        /* PPUT IS INCONSISTENT.  DUMP ALL OF MEMORY. */
      151    11978        /**/
      152    11979
      153    11980    2   DCL I SBIN;
      154    11981
      155    11982    2           GI$RVBUF.FLAGS.BADPPUT='1'B;
      156    11983    3           DO I=0 TO HIPAGE/4;
      157    11984    3              GI$RVBUF.DUMPMAP(I)='1'B;
      158    11985    3              END;
      159    11986    2           RETURN;
      160    11987    2   END PPUT_BAD;
      161    11988
      162    11989
      163    11990    1   SKIP_PROC: PROC(ASDT$);
      164    11991
      165    11992        /* SKIP DUMPING PROCEDURE SEGMENTS */
      166    11993
      167    11994    2   DCL ASDT$ PTR;
      168    11995    2   DCL 1 ASDT(0:1) DALIGNED BASED(ASDT$),
      169    11996    2         2 V BIT(1),
      170    11997    2         2 * BIT(3),
      171    11998    2         2 RPN UBIN(12) UNAL,
      172    11999    2         2 PROT BIT(6),
      173    12000    2         2 * BIT(1),
      174    12001    2         2 SIZE UBIN(9) UNAL;
      175    12002
      176    12003    2   DCL PGX UBIN;
      177    12004    2   DCL SIZE SBIN;
      178    12005    2   DCL ASDTX UBIN;
      179    12006    2   DCL T UBIN;
      180    12007
      181    12008    3           DO ASDTX=0 TO 30;
      182    12009    4              IF ASDT.V(ASDTX) AND (ASDT.PROT(ASDTX) = '101110'B) THEN DO;
      183    12010    4                 SIZE=ASDT.SIZE(ASDTX);
      184    12011    4                 PGX=ASDT.RPN(ASDTX);
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:7    
      185    12012    4                 T=MOD(PGX,4);
      186    12013    5                 IF T ~= 0 THEN DO;
      187    12014    5                    PGX=PGX+4-T;
      188    12015    5                    SIZE=SIZE-4+T;
      189    12016    5                    END;
      190    12017    4                 PGX=PGX/4;
      191    12018    5                 DO WHILE(SIZE>3);
      192    12019    5                    GI$RVBUF.DUMPMAP(PGX)='0'B;
      193    12020    5                    PGX=PGX+1;
      194    12021    5                    SIZE=SIZE-4;
      195    12022    5                    END;
      196    12023    4                 END;
      197    12024    3              END;
      198    12025    2           RETURN;
      199    12026
      200    12027    2   END SKIP_PROC;
      201    12028
      202    12029    1   END GIR$SCREECH;
      203    12030        %EOD;

PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:8    
--  Include file information  --

   HF_ERRORS_C.:E05TOU  is referenced.
   G_HJIT_M.:E05TOU  is referenced.
   G$BOBCAT_M.:E05TOU  is referenced.
   GM_MACRO_M.:E05TOU  is referenced.
   GH_GATE_M.:E05TOU  cannot be made into a system file and is referenced.
   IR_DATA_M.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
   G_LCP6_E.:E05TOU  was found in the system file and is referenced.
   GT_LCP6_M.:E05TOU  was found in the system file and is referenced.
   KI_CP6.:E05TOU  was found in the system file and is referenced.
   GF_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GM_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GU_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GJ_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GH_LCP6_M.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure GIR$SCREECH.

   Procedure GIR$SCREECH requires 492 words for executable code.
   Procedure GIR$SCREECH requires 22 words of local(AUTO) storage.

PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:9    

 Object Unit name= GIR$SCREECH                                File name= GIR$SCREECH.:E05TOU
 UTS= JUL 29 '97 21:47:36.72 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_LCP6_SYSTEM                               Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size HexSiz  Section name
    0   Data  even  none     7      7  GIR$SCREECH
    1  RoData even  UTS      4      4  GIR$SCREECH
    2   Proc  even  none   492    1EC  GIR$SCREECH
    3  RoData even  none     2      2  GIR$SCREECH

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect HexLoc Primary Altret sequence   type   Parms  Name
     2      0   yes            yes      Std        1  GIR$SCREECH

  ****  Data defs  ****

 Sect HexLoc  Name                           Sect HexLoc  Name
    0      0  SCREECH_CODE                       0      3  GI_RCVR_GATE
    0      6  GI_GASP
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:10   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       1 GHH$LOCK
         yes           Std       0 GHH$RTCF
         yes           Std       1 GIR$GASP
 yes     yes           Std       1 GHH$UNLOCK
         yes           Std       0 GIR$INITDUMP
         yes           Std       0 GIR$READSTAT
         yes           Std       0 GHH$WDTN
         yes           Std       0 GHH$WDTF
         yes           Std       0 GHH$RTCN
                       nStd      0 X6A_AUTO_1
                       nStd      0 X6A_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     G_UHJIT                               G$PPUT$                               G$LOW_MEM$
     G$BOBCAT$                             G$MHJIT$                              G$ASDT_MON$
r    G$ROS$
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:11   


        1        1        /*M* GIR$SCREECH    LCP-6 Recovery entry module  */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /**/
        8        8        /*X* DMR */
        9        9        /**/
       10       10        GIR$SCREECH: PROC(TSA);

     10   2 000000  D380 0000 0000  xent GIR$SCREECH     LNJ,B5   X6A_AUTO_1
          2 000003       0016 0001                       DC       22,1

       11       11
       12       12        %INCLUDE LCP_6;
       13      203        %INCLUDE IR_DATA_M;
       14      367        %INCLUDE GH_GATE_M;
       15      408        %INCLUDE GM_MACRO_M;
       16      890        %INCLUDE G$BOBCAT_M;
       17      910        %INCLUDE G_HJIT_M;
       18     1055        %INCLUDE HF_ERRORS_C;
       19     1140        /**/
       20     1141        %G$TSA (FPTN=TSA,STCLASS="PARAM");
       21     1529        /**/
       22     1530        %VLP_SCODE (FPTN=SCODE,STCLASS=BASED);
       23     1591        %VLP_SCODE (FPTN=SCREECH_CODE,STCLASS=STATIC SYMDEF);
       24     1652        %VLP_ERRCODE (FPTN=GHTCODE,STCLASS=CONSTANT,FCG='GH',MID='T');
       25     1698        %VLP_ERRCODE (FPTN=GHHCODE,STCLASS=CONSTANT,FCG='GH',MID='H');
       26     1744        %G$UHJIT(FPTN=G_UHJIT, STCLASS=SYMREF);
       27     4718        %GATE (FPTN=GI_RCVR_GATE,STCLASS="STATIC SYMDEF");
       28     4737    1   DCL GI_GASP BIT(1) STATIC SYMDEF INIT('1'B);
       29     4738    1   DCL GI_DUMP UBIN SYMREF;
       30     4739        /**/
       31     4740    1   DCL GIR$INITDUMP ENTRY;
       32     4741    1   DCL GIR$READSTAT ENTRY;
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:12   
       33     4742    1   DCL GIR$GASP ENTRY(1);
       34     4743    1   DCL GHH$WDTN ENTRY;
       35     4744    1   DCL GHH$WDTF ENTRY;
       36     4745    1   DCL GHH$RTCN ENTRY;
       37     4746    1   DCL GHH$RTCF ENTRY;
       38     4747        /**/
       39     4748    1   DCL G$PPUT$ PTR SYMREF;
       40     4749    1   DCL G$LOW_MEM$ PTR SYMREF;
       41     4750    1   DCL G$BOBCAT$ PTR SYMREF;
       42     4751    1   DCL G$MHJIT$ PTR SYMREF;
       43     4752    1   DCL G$ASDT_MON$ PTR SYMREF;
       44     4753        /**/
       45     4754        %GM$PPUT (FPTN=GM$PPUT,ARRAY=NO,STCLASS="BASED(PPUT$)");
       46     4814        %GM$PPUT (FPTN=GM$PP,ARRAY=YES,STCLASS="BASED(G$PPUT$)");
       47     4874        %RV_FEP_BUFF (FPTN=GI$RVBUF,STCLASS="BASED(RVBUF$)");
       48     4967        %GI_RCVR_EQU;
       49     4979        %G$BOBCAT (FPTN=G$BOBCAT,STCLASS="BASED(G$BOBCAT$)");
       50     4992        %G$MHJIT (FPTN=G$MHJIT,STCLASS="BASED(G$MHJIT$)");
       51    11866        /**/
       52    11867    1   DCL RVBUF$ PTR;
       53    11868    1   DCL I SBIN;
       54    11869    1   DCL J SBIN;
       55    11870    1   DCL HIPAGE SBIN;
       56    11871    1   DCL LOPAGE SBIN;
       57    11872    1   DCL PPUT$ PTR;
       58    11873        %EJECT;
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:13   
       59    11874
       60    11875                %LOCK (G=GI_RCVR_GATE);

  11880   2 000005  BB80 0000 0000  03                   LAB,B3   0
          2 000008  CBF0 0100                            LAB,B4   256,IMO
          2 00000A  E380 0000 0000  xent                 LNJ,B6   GHH$LOCK
          2 00000D       0001                            DC       s:11882,PREL

       61    11882    1           CALL GHH$WDTF;

  11882   2 00000E  CBF0 0000                            LAB,B4   0,IMO
          2 000010  E380 0000 0000  xent                 LNJ,B6   GHH$WDTF
          2 000013       0001                            DC       s:11883,PREL

       62    11883    1           CALL GHH$RTCF;

  11883   2 000014  CBF0 0000                            LAB,B4   0,IMO
          2 000016  E380 0000 0000  xent                 LNJ,B6   GHH$RTCF
          2 000019       0001                            DC       s:11884,PREL

       63    11884    1           RVBUF$=PINCRW(G$LOW_MEM$,%GI_RVBUF_LOC);

  11884   2 00001A  EC80 0000 0000  xsym                 LDB,B6   G$LOW_MEM$
          2 00001D  DBC6 0200                            LAB,B5   512,B6
          2 00001F  DFC7 0006                            STB,B5   RVBUF$,AUTO

       64    11885    2           IF TSA.I.TRAP# = 0 THEN DO;

  11885   2 000021  CCC7 0004                            LDB,B4   @TSA,AUTO
          2 000023  E2C4 0002                            LLH,R6   2,B4
          2 000025  6981 000D                            BNEZ,R6  s:11889,PREL

       65    11886    2              SCREECH_CODE=TSA.A$->SCODE;

  11886   2 000027  BCC4 0006                            LDB,B3   6,B4
          2 000029  AB83                                 LAB,B2   ,B3
          2 00002A  2C00                                 LDV,R2   0
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:14   
          2 00002B  6C06                                 LDV,R6   6
          2 00002C  BB80 0000 0000  00                   LAB,B3   SCREECH_CODE
          2 00002F  3C00                                 LDV,R3   0
          2 000030  0008                                 MMM

       66    11887    2              END;

  11887   2 000031  0F81 002D                            B        s:11895,PREL

       67    11888    2           ELSE DO;

       68    11889    2              IF ADDR(TSA)~=ADDR(G_UHJIT.TSA_USR)

  11889   2 000033  BB80 0000 00B6  xsym                 LAB,B3   G_UHJIT+182
          2 000036  BDC7 0004                            CMB,B3   @TSA,AUTO
          2 000038  0901 0010                            BE       s:11891,PREL

       69    11890    2              THEN SCREECH_CODE=GHTCODE;

  11890   2 00003A  BB80 0000 0000  01                   LAB,B3   GHTCODE
          2 00003D  AB80 0000 0000  00                   LAB,B2   SCREECH_CODE
          2 000040  5C06                                 LDV,R5   6
          2 000041  0021                                 ALR      ;
          2 000042       4403 0000                                ALPHANUM(0,B3,,4),;
          2 000044       4002 0000                                ALPHANUM(0,B2,,R5,FILL)
          2 000046  437F                                 CSYNC    s:11890+11,SPREL
          2 000047  0F81 000D                            B        s:11892,PREL

       70    11891    2              ELSE SCREECH_CODE=GHHCODE;

  11891   2 000049  BB80 0000 0000  01                   LAB,B3   GHTCODE
          2 00004C  AB80 0000 0000  00                   LAB,B2   SCREECH_CODE
          2 00004F  5C06                                 LDV,R5   6
          2 000050  0021                                 ALR      ;
          2 000051       4403 0002                                ALPHANUM(2,B3,,4),;
          2 000053       4002 0000                                ALPHANUM(0,B2,,R5,FILL)

PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:15   
       71    11892    2              SCREECH_CODE.ERR#=TSA.I.TRAP#+%E$TRAP;

  11892   2 000055  437F                                 CSYNC    s:11891+11,SPREL
          2 000056  E2C4 0002                            LLH,R6   2,B4
          2 000058  EA70 0514                            ADD,R6   1300,IMO
          2 00005A  6003                                 SOL,R6   3
          2 00005B  EA80 0000 0001  00                   SRM,R6,'FFF8'X    SCREECH_CODE+1
          2 00005E       FFF8

       72    11893    2              END;

       73    11894
       74    11895    2           DO WHILE(GI$RVBUF.BUSY~=0);

  11895   2 00005F  ECC7 0006                            LDB,B6   RVBUF$,AUTO
          2 000061  E846 0100                            LDR,R6   256,B6
          2 000063  6901 0006                            BEZ,R6   s:11898,PREL

       75    11896                                      /* NEED TO THINK OF SOMETHING BETTER THAN THIS */
       76    11897    2              END;

  11897   2 000065  ECC7 0006                            LDB,B6   RVBUF$,AUTO
          2 000067  E846 0100                            LDR,R6   256,B6
          2 000069  69FC                                 BNEZ,R6  s:11897,SPREL

       77    11898    1           GI$RVBUF.BUSY=-1;

  11898   2 00006A  8946 0100                            LBT,'FFFF'X       256,B6
  11898   2 00006C       FFFF

       78    11899    1           GI$RVBUF.SCODE = SCREECH_CODE;

  11899   2 00006D  AB80 0000 0000  00                   LAB,B2   SCREECH_CODE
          2 000070  2C00                                 LDV,R2   0
          2 000071  6C06                                 LDV,R6   6
          2 000072  BBC6 0104                            LAB,B3   260,B6
          2 000074  3C00                                 LDV,R3   0
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:16   
          2 000075  0008                                 MMM

       79    11900    1           GI$RVBUF.MHJITPP = G$MHJIT.ASDT_MON.MHJIT.BASE;

  11900   2 000076  ECC7 0006                            LDB,B6   RVBUF$,AUTO
          2 000078  DC80 0000 0000  xsym                 LDB,B5   G$MHJIT$
          2 00007B  E845 000C                            LDR,R6   12,B5
          2 00007D  E570 7FFF                            AND,R6   32767,IMO
          2 00007F  EF46 0107                            STR,R6   263,B6

       80    11901    1           GI$RVBUF.CUN = G$MHJIT.CUN;

  11901   2 000081  D845 0351                            LDR,R5   849,B5
          2 000083  DF46 0108                            STR,R5   264,B6

       81    11902    1           GI$RVBUF.TSA$ = ADDR(TSA);

  11902   2 000085  CCC7 0004                            LDB,B4   @TSA,AUTO
          2 000087  CFC6 0109                            STB,B4   265,B6

       82    11903        /**/
       83    11904        /* For now, we will dump all in-use pages */
       84    11905        /**/
       85    11906    1           LOPAGE=G$BOBCAT.MEM_LOW;

  11906   2 000089  BC80 0000 0000  xsym                 LDB,B3   G$BOBCAT$
          2 00008C  C843 0009                            LDR,R4   9,B3
          2 00008E  CF47 000B                            STR,R4   LOPAGE,AUTO

       86    11907    1           HIPAGE=G$BOBCAT.MEM_HI;

  11907   2 000090  B843 0008                            LDR,R3   8,B3
          2 000092  BF47 000A                            STR,R3   HIPAGE,AUTO

       87    11908    1           J=(LOPAGE+%(GI_PGS_PER_BIT-1))/%GI_PGS_PER_BIT;

  11908   2 000094  4E03                                 ADV,R4   3
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:17   
          2 000095  C370 0004                            DIV,R4   4,IMO
          2 000097  CF47 0009                            STR,R4   J,AUTO

       88    11909    2           DO I=0 TO J;

  11909   2 000099  8747 0008                            CL       I,AUTO
          2 00009B  0F81 0008                            B        s:11911+2,PREL

       89    11910    2              GI$RVBUF.DUMPMAP(I)='1'B;

  11910   2 00009D  ECC7 0006                            LDB,B6   RVBUF$,AUTO
          2 00009F  B847 0008                            LDR,R3   I,AUTO
          2 0000A1  8936                                 LBT      ,B6,R3

       90    11911    2              END;

  11911   2 0000A2  8AC7 0008                            INC      I,AUTO
          2 0000A4  E847 0008                            LDR,R6   I,AUTO
          2 0000A6  E947 0009                            CMR,R6   J,AUTO
          2 0000A8  0AF5                                 BALE     s:11910,SPREL

       91    11912
       92    11913    1           I=LOPAGE;

  11913   2 0000A9  E847 000B                            LDR,R6   LOPAGE,AUTO
          2 0000AB  EF47 0008                            STR,R6   I,AUTO

       93    11914    1           PPUT$ = ADDR(GM$PP(I));

  11914   2 0000AD  DC80 0000 0000  xsym                 LDB,B5   G$PPUT$
          2 0000B0  B856                                 LDR,R3   R6
          2 0000B1  3001                                 SOL,R3   1
          2 0000B2  CBB5                                 LAB,B4   ,B5,R3
          2 0000B3  CFC7 000C                            STB,B4   PPUT$,AUTO

       94    11915    2           DO WHILE(NOT GM$PPUT.C.FIRSTP);

PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:18   
  11915   2 0000B5  0F81 0014                            B        s:11919,PREL

       95    11916    2              GI$RVBUF.DUMPMAP(I/%GI_PGS_PER_BIT)='1'B;

  11916   2 0000B7  E847 0008                            LDR,R6   I,AUTO
          2 0000B9  E370 0004                            DIV,R6   4,IMO
          2 0000BB  ECC7 0006                            LDB,B6   RVBUF$,AUTO
          2 0000BD  B856                                 LDR,R3   R6
          2 0000BE  8936                                 LBT      ,B6,R3

       96    11917    2              I = I + 1;

  11917   2 0000BF  8AC7 0008                            INC      I,AUTO

       97    11918    2              PPUT$ = ADDR(GM$PP(I));

  11918   2 0000C1  DC80 0000 0000  xsym                 LDB,B5   G$PPUT$
          2 0000C4  B847 0008                            LDR,R3   I,AUTO
          2 0000C6  3001                                 SOL,R3   1
          2 0000C7  CBB5                                 LAB,B4   ,B5,R3
          2 0000C8  CFC7 000C                            STB,B4   PPUT$,AUTO

       98    11919    2              END;

  11919   2 0000CA  8284                                 LB,'0080'X        ,B4
  11919   2 0000CB       0080
          2 0000CC  05EB                                 BBF      s:11916,SPREL

       99    11920
      100    11921    2           DO WHILE(I<=HIPAGE);

  11921   2 0000CD  E847 0008                            LDR,R6   I,AUTO
          2 0000CF  E947 000A                            CMR,R6   HIPAGE,AUTO
          2 0000D1  0A01 0052                            BAG      s:11943,PREL

      101    11922    2              PPUT$ = ADDR(GM$PP(I));

PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:19   
  11922   2 0000D3  EC80 0000 0000  xsym                 LDB,B6   G$PPUT$
          2 0000D6  B847 0008                            LDR,R3   I,AUTO
          2 0000D8  3001                                 SOL,R3   1
          2 0000D9  DBB6                                 LAB,B5   ,B6,R3
          2 0000DA  DFC7 000C                            STB,B5   PPUT$,AUTO

      102    11923    3              IF NOT (GM$PPUT.C.FIRSTP) THEN DO;

  11923   2 0000DC  8285                                 LB,'0080'X        ,B5
  11923   2 0000DD       0080
          2 0000DE  0501 0006                            BBT      s:11927,PREL

      103    11924    3                 CALL PPUT_BAD;

  11924   2 0000E0  E3C0 009A                            LNJ,B6   s:0,PREL
          2 0000E2       0001                            DC       s:11925,PREL

      104    11925    3                 GOTO MAP_DONE;

  11925   2 0000E3  0F81 0040                            B        s:11943,PREL

      105    11926    3                 END;
      106    11927    2              J=I+GM$PPUT.SIZE-1;

  11927   2 0000E5  E847 0008                            LDR,R6   I,AUTO
          2 0000E7  EA45 0001                            ADD,R6   1,B5
          2 0000E9  6EFF                                 ADV,R6   -1
          2 0000EA  EF47 0009                            STR,R6   J,AUTO

      107    11928    3              IF GM$PPUT.C.INUSE AND NOT GM$PPUT.C.PP THEN DO I=I TO J;

  11928   2 0000EC  8285                                 LB,'0020'X        ,B5
  11928   2 0000ED       0020
          2 0000EE  0581 001C                            BBF      s:11932,PREL
          2 0000F0  8285                                 LB,'0004'X        ,B5
          2 0000F1       0004
          2 0000F2  0501 0018                            BBT      s:11932,PREL
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:20   

  11928   2 0000F4  D847 0008                            LDR,R5   I,AUTO
          2 0000F6  DF47 0008                            STR,R5   I,AUTO
          2 0000F8  0F81 000B                            B        s:11930+2,PREL

      108    11929    3                 GI$RVBUF.DUMPMAP(I/%GI_PGS_PER_BIT)='1'B;

  11929   2 0000FA  E847 0008                            LDR,R6   I,AUTO
          2 0000FC  E370 0004                            DIV,R6   4,IMO
          2 0000FE  ECC7 0006                            LDB,B6   RVBUF$,AUTO
          2 000100  B856                                 LDR,R3   R6
          2 000101  8936                                 LBT      ,B6,R3

      109    11930    3                 END;

  11930   2 000102  8AC7 0008                            INC      I,AUTO
          2 000104  E847 0008                            LDR,R6   I,AUTO
          2 000106  E947 0009                            CMR,R6   J,AUTO
          2 000108  0AF2                                 BALE     s:11929,SPREL
          2 000109  0F81 0004                            B        s:11934,PREL

      110    11931    3              ELSE DO;

      111    11932    3                 I=J+1;

  11932   2 00010B  6E01                                 ADV,R6   1
          2 00010C  EF47 0008                            STR,R6   I,AUTO

      112    11933    3                 END;

      113    11934    2              PPUT$ = ADDR(GM$PP(J));

  11934   2 00010E  EC80 0000 0000  xsym                 LDB,B6   G$PPUT$
          2 000111  B847 0009                            LDR,R3   J,AUTO
          2 000113  3001                                 SOL,R3   1
          2 000114  DBB6                                 LAB,B5   ,B6,R3
          2 000115  DFC7 000C                            STB,B5   PPUT$,AUTO
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:21   

      114    11935    3              IF NOT (GM$PPUT.C.LASTP) THEN DO;

  11935   2 000117  8285                                 LB,'0040'X        ,B5
  11935   2 000118       0040
          2 000119  0501 0006                            BBT      s:11939,PREL

      115    11936    3                 CALL PPUT_BAD;

  11936   2 00011B  E3C0 005F                            LNJ,B6   s:0,PREL
          2 00011D       0001                            DC       s:11937,PREL

      116    11937    3                 GOTO MAP_DONE;

  11937   2 00011E  0F81 0005                            B        s:11943,PREL

      117    11938    3                 END;
      118    11939    2              END;

  11939   2 000120  E947 000A                            CMR,R6   HIPAGE,AUTO
          2 000122  0A81 FFB0                            BALE     s:11922,PREL

      119    11940        /**/
      120    11941    1   MAP_DONE:
      121    11942
      122    11943    1           GI$RVBUF.BADPPX=I;

  11943   2 000124  ECC7 0006            MAP_DONE        LDB,B6   RVBUF$,AUTO
          2 000126  E847 0008                            LDR,R6   I,AUTO
          2 000128  EF46 010B                            STR,R6   267,B6

      123    11944    1           CALL SKIP_PROC(G$ASDT_MON$);

  11944   2 00012A  DB80 0000 0000  xsym                 LAB,B5   G$ASDT_MON$
          2 00012D  DFC7 0010                            STB,B5   PPUT$+4,AUTO
          2 00012F  E3C0 0068                            LNJ,B6   s:0,PREL
          2 000131       0001                            DC       s:11946,PREL
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:22   

      124    11945
      125    11946    2           IF /*SCREECH_CODE.SEV=7 AND*/ GI_GASP THEN DO;

  11946   2 000132  8980 0000 0006  00                   CMZ      GI_GASP
          2 000135  0881 0007                            BAGE     s:11949,PREL

      126    11947    2              CALL GIR$GASP;

  11947   2 000137  CBF0 0000                            LAB,B4   0,IMO
          2 000139  E380 0000 0000  xent                 LNJ,B6   GIR$GASP
          2 00013C       0001                            DC       s:11949,PREL

      127    11948    2              END;

      128    11949    1           CALL GIR$INITDUMP;

  11949   2 00013D  CBF0 0000                            LAB,B4   0,IMO
          2 00013F  E380 0000 0000  xent                 LNJ,B6   GIR$INITDUMP
          2 000142       0001                            DC       s:11953,PREL

      129    11950
      130    11951        /* Turn off the clocks */
      131    11952        /**/
      132    11953    2           DO WHILE(GI$RVBUF.BUSY~=0);

  11953   2 000143  ECC7 0006                            LDB,B6   RVBUF$,AUTO
          2 000145  E846 0100                            LDR,R6   256,B6
          2 000147  6901 000C                            BEZ,R6   s:11960,PREL

      133    11954                                 /* For now, just hang out until somebody zaps the */
      134    11955                                                /* busy flag or re-boots us.          */
      135    11956    2              CALL GIR$READSTAT;           /* READ COUPLER STATUS */

  11956   2 000149  CBF0 0000                            LAB,B4   0,IMO
          2 00014B  E380 0000 0000  xent                 LNJ,B6   GIR$READSTAT
          2 00014E       0001                            DC       s:11958,PREL
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:23   

      136    11957                                                /* TO KEEP THINGS MOVING */
      137    11958    2              END;

  11958   2 00014F  ECC7 0006                            LDB,B6   RVBUF$,AUTO
          2 000151  E846 0100                            LDR,R6   256,B6
          2 000153  69F6                                 BNEZ,R6  s:11956,SPREL

      138    11959
      139    11960    2           DO WHILE(SCREECH_CODE.SEV=7);

  11960   2 000154  D800 0000 0001  00                   LDR,R5   SCREECH_CODE+1
          2 000157  D570 0007                            AND,R5   7,IMO
          2 000159  5D07                                 CMV,R5   7
          2 00015A  0981 0008                            BNE      s:11964,PREL

      140    11961                                                /* Full screech.  Hang out forever. */
      141    11962    2              END;

  11962   2 00015C  E800 0000 0001  00                   LDR,R6   SCREECH_CODE+1
          2 00015F  E570 0007                            AND,R6   7,IMO
          2 000161  6D07                                 CMV,R6   7
          2 000162  097A                                 BE       s:11962,SPREL

      142    11963        /* Turn on the clocks */
      143    11964    1           CALL GHH$WDTN;

  11964   2 000163  CBF0 0000                            LAB,B4   0,IMO
          2 000165  E380 0000 0000  xent                 LNJ,B6   GHH$WDTN
          2 000168       0001                            DC       s:11965,PREL

      144    11965    1           CALL GHH$RTCN;

  11965   2 000169  CBF0 0000                            LAB,B4   0,IMO
          2 00016B  E380 0000 0000  xent                 LNJ,B6   GHH$RTCN
          2 00016E       0001                            DC       s:11971,PREL

PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:24   
      145    11966                %UNLOCK (G=GI_RCVR_GATE);

  11971   2 00016F  BB80 0000 0000  03                   LAB,B3   0
          2 000172  CBF0 0100                            LAB,B4   256,IMO
          2 000174  E380 0000 0000  xent                 LNJ,B6   GHH$UNLOCK
          2 000177       0001                            DC       s:11973,PREL

      146    11973    1           RETURN;

  11973   2 000178  C380 0000 0000  xent                 LNJ,B4   X6A_ARET

      147    11974        %EJECT;
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:25   
      148    11975    1   PPUT_BAD: PROC;

  11975   2 00017B  EFC7 000E            PPUT_BAD        STB,B6   PPUT$+2,AUTO

      149    11976        /**/
      150    11977        /* PPUT IS INCONSISTENT.  DUMP ALL OF MEMORY. */
      151    11978        /**/
      152    11979
      153    11980    2   DCL I SBIN;
      154    11981
      155    11982    2           GI$RVBUF.FLAGS.BADPPUT='1'B;

  11982   2 00017D  DCC7 0006                            LDB,B5   RVBUF$,AUTO
          2 00017F  8945 0101                            LBT,'8000'X       257,B5
          2 000181       8000

      156    11983    3           DO I=0 TO HIPAGE/4;

  11983   2 000182  8747 0010                            CL       I,AUTO
          2 000184  0F81 0008                            B        s:11985+2,PREL

      157    11984    3              GI$RVBUF.DUMPMAP(I)='1'B;

  11984   2 000186  ECC7 0006                            LDB,B6   RVBUF$,AUTO
          2 000188  B847 0010                            LDR,R3   I,AUTO
          2 00018A  8936                                 LBT      ,B6,R3

      158    11985    3              END;

  11985   2 00018B  8AC7 0010                            INC      I,AUTO
          2 00018D  E847 000A                            LDR,R6   HIPAGE,AUTO
          2 00018F  E370 0004                            DIV,R6   4,IMO
          2 000191  E947 0010                            CMR,R6   I,AUTO
          2 000193  08F3                                 BAGE     s:11984,SPREL

      159    11986    2           RETURN;

PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:26   
  11986   2 000194  ECC7 000E                            LDB,B6   PPUT$+2,AUTO
          2 000196  C3C6 0001                            LNJ,B4   1,B6

      160    11987    2   END PPUT_BAD;
      161    11988
      162    11989
      163    11990    1   SKIP_PROC: PROC(ASDT$);

  11990   2 000198  EFC7 000E            SKIP_PROC       STB,B6   PPUT$+2,AUTO

      164    11991
      165    11992        /* SKIP DUMPING PROCEDURE SEGMENTS */
      166    11993
      167    11994    2   DCL ASDT$ PTR;
      168    11995    2   DCL 1 ASDT(0:1) DALIGNED BASED(ASDT$),
      169    11996    2         2 V BIT(1),
      170    11997    2         2 * BIT(3),
      171    11998    2         2 RPN UBIN(12) UNAL,
      172    11999    2         2 PROT BIT(6),
      173    12000    2         2 * BIT(1),
      174    12001    2         2 SIZE UBIN(9) UNAL;
      175    12002
      176    12003    2   DCL PGX UBIN;
      177    12004    2   DCL SIZE SBIN;
      178    12005    2   DCL ASDTX UBIN;
      179    12006    2   DCL T UBIN;
      180    12007
      181    12008    3           DO ASDTX=0 TO 30;

  12008   2 00019A  8747 0014                            CL       ASDTX,AUTO

      182    12009    4              IF ASDT.V(ASDTX) AND (ASDT.PROT(ASDTX) = '101110'B) THEN DO;

  12009   2 00019C  ECC7 0010                            LDB,B6   @ASDT$,AUTO
          2 00019E  DC86                                 LDB,B5   ,B6
          2 00019F  B847 0014                            LDR,R3   ASDTX,AUTO
          2 0001A1  3001                                 SOL,R3   1
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:27   
          2 0001A2  89B5                                 CMZ      ,B5,R3
          2 0001A3  0881 003D                            BAGE     s:12024,PREL
          2 0001A5  3E01                                 ADV,R3   1
          2 0001A6  E835                                 LDR,R6   ,B5,R3
          2 0001A7  E570 FC00                            AND,R6   -1024,IMO
          2 0001A9  E970 B800                            CMR,R6   -18432,IMO
          2 0001AB  0981 0035                            BNE      s:12024,PREL

      183    12010    4                 SIZE=ASDT.SIZE(ASDTX);

  12010   2 0001AD  D835                                 LDR,R5   ,B5,R3
          2 0001AE  D570 01FF                            AND,R5   511,IMO
          2 0001B0  DF47 0013                            STR,R5   SIZE,AUTO

      184    12011    4                 PGX=ASDT.RPN(ASDTX);

  12011   2 0001B2  A847 0014                            LDR,R2   ASDTX,AUTO
          2 0001B4  2001                                 SOL,R2   1
          2 0001B5  C825                                 LDR,R4   ,B5,R2
          2 0001B6  C570 0FFF                            AND,R4   4095,IMO
          2 0001B8  CF47 0012                            STR,R4   PGX,AUTO

      185    12012    4                 T=MOD(PGX,4);

  12012   2 0001BA  C570 0003                            AND,R4   3,IMO
          2 0001BC  CF47 0015                            STR,R4   T,AUTO

      186    12013    5                 IF T ~= 0 THEN DO;

  12013   2 0001BE  4901 000C                            BEZ,R4   s:12017,PREL

      187    12014    5                    PGX=PGX+4-T;

  12014   2 0001C0  C247 0012                            SUB,R4   PGX,AUTO
          2 0001C2  8254                                 NEG      R4
          2 0001C3  4E04                                 ADV,R4   4
          2 0001C4  CF47 0012                            STR,R4   PGX,AUTO
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:28   

      188    12015    5                    SIZE=SIZE-4+T;

  12015   2 0001C6  DA47 0015                            ADD,R5   T,AUTO
          2 0001C8  5EFC                                 ADV,R5   -4
          2 0001C9  DF47 0013                            STR,R5   SIZE,AUTO

      189    12016    5                    END;

      190    12017    4                 PGX=PGX/4;

  12017   2 0001CB  C847 0012                            LDR,R4   PGX,AUTO
          2 0001CD  4042                                 SOR,R4   2
          2 0001CE  CF47 0012                            STR,R4   PGX,AUTO

      191    12018    5                 DO WHILE(SIZE>3);

  12018   2 0001D0  5D03                                 CMV,R5   3
          2 0001D1  0A81 000F                            BALE     s:12024,PREL

      192    12019    5                    GI$RVBUF.DUMPMAP(PGX)='0'B;

  12019   2 0001D3  ECC7 0006                            LDB,B6   RVBUF$,AUTO
          2 0001D5  B847 0012                            LDR,R3   PGX,AUTO
          2 0001D7  8836                                 LBF      ,B6,R3

      193    12020    5                    PGX=PGX+1;

  12020   2 0001D8  8AC7 0012                            INC      PGX,AUTO

      194    12021    5                    SIZE=SIZE-4;

  12021   2 0001DA  E847 0013                            LDR,R6   SIZE,AUTO
          2 0001DC  6EFC                                 ADV,R6   -4
          2 0001DD  EF47 0013                            STR,R6   SIZE,AUTO

      195    12022    5                    END;
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:29   

  12022   2 0001DF  6D03                                 CMV,R6   3
          2 0001E0  0A73                                 BAG      s:12019,SPREL

      196    12023    4                 END;

      197    12024    3              END;

  12024   2 0001E1  8AC7 0014                            INC      ASDTX,AUTO
          2 0001E3  E847 0014                            LDR,R6   ASDTX,AUTO
          2 0001E5  6D1E                                 CMV,R6   30
          2 0001E6  0381 FFB5                            BLE      s:12009,PREL

      198    12025    2           RETURN;

  12025   2 0001E8  ECC7 000E                            LDB,B6   PPUT$+2,AUTO
          2 0001EA  C3C6 0001                            LNJ,B4   1,B6
      199    12026
      200    12027    2   END SKIP_PROC;
      201    12028
      202    12029    1   END GIR$SCREECH;
      203    12030        %EOD;

PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:30   
--  Include file information  --

   HF_ERRORS_C.:E05TOU  is referenced.
   G_HJIT_M.:E05TOU  is referenced.
   G$BOBCAT_M.:E05TOU  is referenced.
   GM_MACRO_M.:E05TOU  is referenced.
   GH_GATE_M.:E05TOU  cannot be made into a system file and is referenced.
   IR_DATA_M.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
   G_LCP6_E.:E05TOU  was found in the system file and is referenced.
   GT_LCP6_M.:E05TOU  was found in the system file and is referenced.
   KI_CP6.:E05TOU  was found in the system file and is referenced.
   GF_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GM_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GU_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GJ_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GH_LCP6_M.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure GIR$SCREECH.
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:31   

 **** Variables and constants ****

  ****  Section 000  Data  GIR$SCREECH

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     6-0-0/b BIT         r     1 GI_GASP                    3-0-0/w STRC(48)    r     1 GI_RCVR_GATE
     0-0-0/w STRC(48)    r     1 SCREECH_CODE

  ****  Section 001 RoData GIR$SCREECH

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     2-0-0/w STRC(32)    r     1 GHHCODE                    0-0-0/w STRC(32)    r     1 GHTCODE

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

    10-0-0/w PTR         r     1 @ASDT$                     4-0-0/w PTR         r     1 @TSA
    *0-0-0/w PTR         r     1 ASDT$                     14-0-0/w UBIN(16)    r     1 ASDTX
     A-0-0/w SBIN(16)    r     1 HIPAGE                     8-0-0/w SBIN(16)    r     1 I
    10-0-0/w SBIN(16)    r     1 I                          9-0-0/w SBIN(16)    r     1 J
     B-0-0/w SBIN(16)    r     1 LOPAGE                    12-0-0/w UBIN(16)    r     1 PGX
     C-0-0/w PTR         r     1 PPUT$                      6-0-0/w PTR         r     1 RVBUF$
    13-0-0/w SBIN(16)    r     1 SIZE                      15-0-0/w UBIN(16)    r     1 T
    *0-0-0/w STRC(928)   r     1 TSA

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 G$ASDT_MON$                0-0-0/w PTR         r     1 G$BOBCAT$
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:32   
     0-0-0/w PTR         r     1 G$LOW_MEM$                 0-0-0/w PTR         r     1 G$MHJIT$
     0-0-0/w PTR         r     1 G$PPUT$                    0-0-0/w STRC(6480)  r     1 G_UHJIT

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(32)    r     1 ASDT(0:1)                  0-0-0/w STRC(1696)  r     1 G$BOBCAT
     0-0-0/w STRC(27232) r     1 G$MHJIT                    0-0-0/w STRC(4288)  r     1 GI$RVBUF
     0-0-0/w STRC(32)    r     1 GM$PP(0:32767)             0-0-0/w STRC(32)    r     1 GM$PPUT
     0-0-0/w STRC(48)    r     1 SCODE


   Procedure GIR$SCREECH requires 492 words for executable code.
   Procedure GIR$SCREECH requires 22 words of local(AUTO) storage.
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:33   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:34   
          MINI XREF LISTING

ASDT.PROT IN PROCEDURE SKIP_PROC
     11999**DCL     12009>>IF
ASDT.RPN IN PROCEDURE SKIP_PROC
     11998**DCL     12011>>ASSIGN
ASDT.SIZE IN PROCEDURE SKIP_PROC
     12001**DCL     12010>>ASSIGN
ASDT.V IN PROCEDURE SKIP_PROC
     11996**DCL     12009>>IF
ASDT$ IN PROCEDURE SKIP_PROC
     11994**DCL     11990--PROC    11995--IMP-PTR 12009>>IF      12009>>IF      12010>>ASSIGN  12011>>ASSIGN
ASDTX IN PROCEDURE SKIP_PROC
     12005**DCL     12008<<DOINDEX 12009>>IF      12009>>IF      12010>>ASSIGN  12011>>ASSIGN
G$ASDT_MON$
      4752**DCL     11944<>CALL
G$BOBCAT.MEM_HI
      4980**DCL     11907>>ASSIGN
G$BOBCAT.MEM_LOW
      4981**DCL     11906>>ASSIGN
G$BOBCAT$
      4750**DCL      4980--IMP-PTR 11906>>ASSIGN  11907>>ASSIGN
G$LOW_MEM$
      4749**DCL     11884>>ASSIGN
G$MHJIT.ASDT_MON.MHJIT.BASE
      5175**DCL     11900>>ASSIGN
G$MHJIT.CUN
     11337**DCL     11901>>ASSIGN
G$MHJIT.INTCON.HHJIT
     11471**DCL     11471--REDEF
G$MHJIT.INTCON.P$$
     11444**DCL     11444--REDEF
G$MHJIT.ISA_BIGFOOT.P$$
      8389**DCL      8389--REDEF
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:35   
G$MHJIT.ISA_DBINH.P$$
      9603**DCL      9603--REDEF
G$MHJIT.ISA_IDLE.P$$
      6484**DCL      6484--REDEF
G$MHJIT.ISA_LVL10.P$$
      9906**DCL      9906--REDEF
G$MHJIT.ISA_LVL11.P$$
     10209**DCL     10209--REDEF
G$MHJIT.ISA_LVL12.P$$
     10512**DCL     10512--REDEF
G$MHJIT.ISA_LVL5.P$$
      8692**DCL      8692--REDEF
G$MHJIT.ISA_OV.P$$
      8086**DCL      8086--REDEF
G$MHJIT.ISA_PFS.P$$
      7757**DCL      7757--REDEF
G$MHJIT.ISA_RT_CLOCK.P$$
     11119**DCL     11119--REDEF
G$MHJIT.ISA_SATYR_RCV.P$$
      8996**DCL      8996--REDEF
G$MHJIT.ISA_SATYR_TRN.P$$
      9300**DCL      9300--REDEF
G$MHJIT.ISA_SCHD.P$$
     10815**DCL     10815--REDEF
G$MHJIT.ISA_WDOG.P$$
      7865**DCL      7865--REDEF
G$MHJIT.TSA_DB.ISA.P$$
      7087**DCL      7087--REDEF
G$MHJIT.TSA_DB.P$$
      6958**DCL      6958--REDEF    6959--REDEF
G$MHJIT.TSA_HND.ISA.P$$
     11665**DCL     11665--REDEF
G$MHJIT.TSA_HND.P$$
     11536**DCL     11536--REDEF   11537--REDEF
G$MHJIT.TSA_MON.ISA.P$$
      6699**DCL      6699--REDEF
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:36   
G$MHJIT.TSA_MON.P$$
      6570**DCL      6570--REDEF    6571--REDEF
G$MHJIT.TSA_OV.ISA.P$$
      7475**DCL      7475--REDEF
G$MHJIT.TSA_OV.P$$
      7346**DCL      7346--REDEF    7347--REDEF
G$MHJIT$
      4751**DCL      5009--IMP-PTR 11900>>ASSIGN  11901>>ASSIGN
G$PPUT$
      4748**DCL      4828--IMP-PTR 11914>>ASSIGN  11918>>ASSIGN  11922>>ASSIGN  11934>>ASSIGN
GHH$LOCK
       407**DCL-ENT 11880--CALL
GHH$RTCF
      4746**DCL-ENT 11883--CALL
GHH$RTCN
      4745**DCL-ENT 11965--CALL
GHH$UNLOCK
       407**DCL-ENT 11971--CALL
GHH$WDTF
      4744**DCL-ENT 11882--CALL
GHH$WDTN
      4743**DCL-ENT 11964--CALL
GHHCODE
      1712**DCL     11891>>ASSIGN
GHTCODE
      1666**DCL     11890>>ASSIGN
GI$RVBUF.BADPPX
      4965**DCL     11943<<ASSIGN
GI$RVBUF.BUSY
      4895**DCL     11895>>DOWHILE 11898<<ASSIGN  11953>>DOWHILE
GI$RVBUF.CUN
      4965**DCL     11901<<ASSIGN
GI$RVBUF.DUMPMAP
      4890**DCL     11910<<ASSIGN  11916<<ASSIGN  11929<<ASSIGN  11984<<ASSIGN  12019<<ASSIGN
GI$RVBUF.FLAGS.BADPPUT
      4899**DCL     11982<<ASSIGN
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:37   
GI$RVBUF.MHJITPP
      4965**DCL     11900<<ASSIGN
GI$RVBUF.SCODE
      4930**DCL     11899<<ASSIGN
GI$RVBUF.TSA$
      4965**DCL     11902<<ASSIGN
GIR$GASP
      4742**DCL-ENT 11947--CALL
GIR$INITDUMP
      4740**DCL-ENT 11949--CALL
GIR$READSTAT
      4741**DCL-ENT 11956--CALL
GI_GASP
      4737**DCL     11946>>IF
GI_RCVR_GATE
      4730**DCL     11880<>CALL    11971<>CALL
GM$PP
      4828**DCL     11914--ASSIGN  11918--ASSIGN  11922--ASSIGN  11934--ASSIGN
GM$PPUT.C.FIRSTP
      4784**DCL     11915>>DOWHILE 11923>>IF
GM$PPUT.C.INUSE
      4792**DCL     11928>>IF
GM$PPUT.C.LASTP
      4788**DCL     11935>>IF
GM$PPUT.C.PP
      4804**DCL     11928>>IF
GM$PPUT.SIZE
      4809**DCL     11927>>ASSIGN
G_UHJIT.ISA_USR
      3184**DCL      3479--REDEF
G_UHJIT.ISA_USR.P$$
      3259**DCL      3259--REDEF
G_UHJIT.TSA_CP.ISA.P$$
      4466**DCL      4466--REDEF
G_UHJIT.TSA_CP.P$$
      4337**DCL      4337--REDEF    4338--REDEF
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:38   
G_UHJIT.TSA_DB.ISA.P$$
      4078**DCL      4078--REDEF
G_UHJIT.TSA_DB.P$$
      3949**DCL      3949--REDEF    3950--REDEF
G_UHJIT.TSA_RTT.P$$
      4712**DCL      4712--REDEF    4713--REDEF
G_UHJIT.TSA_USR
      3509**DCL     11889--IF
G_UHJIT.TSA_USR.ISA.P$$
      3668**DCL      3668--REDEF
G_UHJIT.TSA_USR.P$$
      3539**DCL      3539--REDEF    3540--REDEF
HIPAGE
     11870**DCL     11907<<ASSIGN  11921>>DOWHILE 11983>>DOINDEX
I
     11868**DCL     11909<<DOINDEX 11910>>ASSIGN  11913<<ASSIGN  11914>>ASSIGN  11916>>ASSIGN  11917<<ASSIGN
     11917>>ASSIGN  11918>>ASSIGN  11921>>DOWHILE 11922>>ASSIGN  11927>>ASSIGN  11928<<DOINDEX 11928>>DOINDEX
     11929>>ASSIGN  11932<<ASSIGN  11943>>ASSIGN
I IN PROCEDURE PPUT_BAD
     11980**DCL     11983<<DOINDEX 11984>>ASSIGN
J
     11869**DCL     11908<<ASSIGN  11909>>DOINDEX 11927<<ASSIGN  11928>>DOINDEX 11932>>ASSIGN  11934>>ASSIGN
LOPAGE
     11871**DCL     11906<<ASSIGN  11908>>ASSIGN  11913>>ASSIGN
MAP_DONE
     11943**LABEL   11925--GOTO    11937--GOTO
PGX IN PROCEDURE SKIP_PROC
     12003**DCL     12011<<ASSIGN  12012>>ASSIGN  12014<<ASSIGN  12014>>ASSIGN  12017<<ASSIGN  12017>>ASSIGN
     12019>>ASSIGN  12020<<ASSIGN  12020>>ASSIGN
PPUT$
     11872**DCL      4768--IMP-PTR 11914<<ASSIGN  11915>>DOWHILE 11918<<ASSIGN  11922<<ASSIGN  11923>>IF
     11927>>ASSIGN  11928>>IF      11928>>IF      11934<<ASSIGN  11935>>IF
PPUT_BAD
     11975**PROC    11924--CALL    11936--CALL
RVBUF$
     11867**DCL      4887--IMP-PTR 11884<<ASSIGN  11895>>DOWHILE 11898>>ASSIGN  11899>>ASSIGN  11900>>ASSIGN
PL6.E3A0      #001=GIR$SCREECH File=GIR$SCREECH.:E05TSI                          TUE 07/29/97 21:47 Page:39   
     11901>>ASSIGN  11902>>ASSIGN  11910>>ASSIGN  11916>>ASSIGN  11929>>ASSIGN  11943>>ASSIGN  11953>>DOWHILE
     11982>>ASSIGN  11984>>ASSIGN  12019>>ASSIGN
SCODE
      1557**DCL     11886>>ASSIGN
SCREECH_CODE
      1618**DCL     11886<<ASSIGN  11890<<ASSIGN  11891<<ASSIGN  11899>>ASSIGN
SCREECH_CODE.ERR#
      1647**DCL     11892<<ASSIGN
SCREECH_CODE.SEV
      1648**DCL     11960>>DOWHILE
SIZE IN PROCEDURE SKIP_PROC
     12004**DCL     12010<<ASSIGN  12015<<ASSIGN  12015>>ASSIGN  12018>>DOWHILE 12021<<ASSIGN  12021>>ASSIGN
SKIP_PROC
     11990**PROC    11944--CALL
T IN PROCEDURE SKIP_PROC
     12006**DCL     12012<<ASSIGN  12013>>IF      12014>>ASSIGN  12015>>ASSIGN
TSA
      1168**DCL        10--PROC    11889--IF      11902--ASSIGN
TSA.A$
      1200**DCL     11886>>ASSIGN
TSA.I.TRAP#
      1192**DCL     11885>>IF      11892>>ASSIGN
TSA.ISA.P$$
      1329**DCL      1329--REDEF
TSA.P$$
      1200**DCL      1200--REDEF    1201--REDEF

PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:40   
      204        1        /*T***********************************************************/
      205        2        /*T*                                                         */
      206        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      207        4        /*T*                                                         */
      208        5        /*T***********************************************************/
      209        6        GIR$INITDUMP: PROC;
      210        7        /**/
      211        8                /*F*  NAME:  GIR$INITDUMP
      212        9                      PURPOSE:  GIR$INITDUMP is called by GIR$SCREECH to
      213       10                      initiate a dump once the recovery buffer has been
      214       11                      built.
      215       12
      216       13                      Currently only a full screech on a local FEP is
      217       14                      supported.  The coupler is initialized and a level
      218       15                      7 interrupt is sent to the host to cause FROG to
      219       16                      suck the dump from the FEP.
      220       17                */
      221       18        %INCLUDE GH_HARDWARE_M;
      222      116        %INCLUDE GH_IOFNC_E;
      223      185        %INCLUDE IR_DATA_M;
      224      349        %INCLUDE GM_VIRTUAL_E;
      225      559        %INCLUDE K_SCODE_C;
      226      644        %INCLUDE LCP_6;
      227      835        %INCLUDE G$BOBCAT_M;
      228      855        /**/
      229      856        %GI_RCVR_EQU;
      230      868        /**/
      231      869    1   DCL GHH$IO ENTRY(1) ALTRET;
      232      870    1   DCL GHH$IO_IN ENTRY(1) ALTRET;
      233      871    1   DCL GHH$LEV ENTRY(1);
      234      872    1   DCL GHH$ASD ENTRY(2);
      235      873    1   DCL GID$WRDUMP ENTRY(3);
      236      874    1   DCL GID$DISKIO ENTRY(4);
      237      875    1   DCL GID$INITDUMP ENTRY(1) ALTRET;
      238      876    1   DCL GIR$INITCHANS ENTRY(1);
      239      877    1   DCL GUD$RING0 ENTRY;
      240      878        /**/
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:41   
      241      879    1   DCL KJ_INTLVL_SCREECH UBIN STATIC SYMDEF INIT ( 7 ) ;
      242      880    1   DCL GJ_BOOTCHAN UBIN SYMREF;
      243      881    1   DCL G$LOW_MEM$ PTR SYMREF;
      244      882    1   DCL G$BOBCAT$ PTR SYMREF;
      245      883        /**/
      246      884        %GH_IO (FPTN=GH_IO,STCLASS=STATIC);
      247      900    1   DCL GID_BOOTCHAN UBIN SYMREF;
      248      901    1   DCL GI@RECOV UBIN SYMREF;
      249      902    1   DCL GI_DUMP UBIN SYMREF;
      250      903        /**/
      251      904        /* Here we define a constant ISA and ASDT to go to '100'X on reboot */
      252      905    1   DCL 1 ASDT CONSTANT ALIGNED,
      253      906             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      254      907                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      255      908                BASE=%GM_SEG0000_VP,
      256      909                V=YES,SIZE=15);
      257      931             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      258      932                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      259      933                BASE=%GM_SEG0001_VP,
      260      934                V=YES,SIZE=15);
      261      956             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      262      957                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      263      958                BASE=%GM_SEG0002_VP,
      264      959                V=YES,SIZE=15);
      265      981             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      266      982                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      267      983                BASE=%GM_SEG0003_VP,
      268      984                V=YES,SIZE=15);
      269     1006             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      270     1007                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      271     1008                BASE=%GM_SEG0004_VP,
      272     1009                V=YES,SIZE=15);
      273     1031             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      274     1032                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      275     1033                BASE=%GM_SEG0005_VP,
      276     1034                V=YES,SIZE=15);
      277     1056             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:42   
      278     1057                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      279     1058                BASE=%GM_SEG0006_VP,
      280     1059                V=YES,SIZE=15);
      281     1081             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      282     1082                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      283     1083                BASE=%GM_SEG0007_VP,
      284     1084                V=YES,SIZE=15);
      285     1106             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      286     1107                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      287     1108                BASE=%GM_SEG0008_VP,
      288     1109                V=YES,SIZE=15);
      289     1131             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      290     1132                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      291     1133                BASE=%GM_SEG0009_VP,
      292     1134                V=YES,SIZE=15);
      293     1156             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      294     1157                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      295     1158                BASE=%GM_SEG0010_VP,
      296     1159                V=YES,SIZE=15);
      297     1181             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      298     1182                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      299     1183                BASE=%GM_SEG0011_VP,
      300     1184                V=YES,SIZE=15);
      301     1206             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      302     1207                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      303     1208                BASE=%GM_SEG0012_VP,
      304     1209                V=YES,SIZE=15);
      305     1231             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      306     1232                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      307     1233                BASE=%GM_SEG0013_VP,
      308     1234                V=YES,SIZE=15);
      309     1256             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      310     1257                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      311     1258                BASE=%GM_SEG0014_VP,
      312     1259                V=YES,SIZE=15);
      313     1281             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      314     1282                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:43   
      315     1283                BASE=%GM_SEG0015_VP,
      316     1284                V=YES,SIZE=15);
      317     1306             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      318     1307                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      319     1308                BASE=%GM_SEG0100_VP,
      320     1309                V=YES,SIZE=255);
      321     1331             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      322     1332                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      323     1333                BASE=%GM_SEG0200_VP,
      324     1334                V=YES,SIZE=255);
      325     1356             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      326     1357                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      327     1358                BASE=%GM_SEG0300_VP,
      328     1359                V=YES,SIZE=255);
      329     1381             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      330     1382                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      331     1383                BASE=%GM_SEG0400_VP,
      332     1384                V=YES,SIZE=255);
      333     1406             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      334     1407                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      335     1408                BASE=%GM_SEG0500_VP,
      336     1409                V=YES,SIZE=255);
      337     1431             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      338     1432                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      339     1433                BASE=%GM_SEG0600_VP,
      340     1434                V=YES,SIZE=255);
      341     1456             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      342     1457                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      343     1458                BASE=%GM_SEG0700_VP,
      344     1459                V=YES,SIZE=255);
      345     1481             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      346     1482                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      347     1483                BASE=%GM_SEG0800_VP,
      348     1484                V=YES,SIZE=255);
      349     1506             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      350     1507                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      351     1508                BASE=%GM_SEG0900_VP,
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:44   
      352     1509                V=YES,SIZE=255);
      353     1531             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      354     1532                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      355     1533                BASE=%GM_SEG1000_VP,
      356     1534                V=YES,SIZE=255);
      357     1556             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      358     1557                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      359     1558                BASE=%GM_SEG1100_VP,
      360     1559                V=YES,SIZE=255);
      361     1581             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      362     1582                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      363     1583                BASE=%GM_SEG1200_VP,
      364     1584                V=YES,SIZE=255);
      365     1606             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      366     1607                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      367     1608                BASE=%GM_SEG1300_VP,
      368     1609                V=YES,SIZE=255);
      369     1631             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      370     1632                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      371     1633                BASE=%GM_SEG1400_VP,
      372     1634                V=YES,SIZE=255);
      373     1656             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=YES,
      374     1657                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      375     1658                BASE=%GM_SEG1500_VP,
      376     1659                V=YES,SIZE=255);
      377     1681        %G$SEGDESC (FPTN=INITSEG0,STCLASS=CONSTANT,LAST=YES,
      378     1682             RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      379     1683             BASE=0,
      380     1684             SIZE=15,V=YES);
      381     1706        %G$ISA (FPTN=GIR_ISA_REBOOT,
      382     1707                RING=G_RING0#,
      383     1708                P = "BITBIN('100'X)",
      384     1709                ASV$=ASDT,
      385     1710                MMU=YES,
      386     1711                STCLASS="CONSTANT SYMDEF",
      387     1712                LVL=1);
      388     2015        %GH_LEV (FPTN=GOREBOOT,TYPE=TRIGGER_SUSPEND,LEVEL=0,STCLASS=CONSTANT);
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:45   
      389     2037    1   DCL SIZE256 UBIN(32) CONSTANT INIT(256);
      390     2038    1   DCL LOW UBIN(32) CONSTANT INIT(%GI_RVBUF_LOC);
      391     2039    1   DCL LOW$ REDEF LOW PTR;
      392     2040        %RV_FEP_BUFF (FPTN=GI$RVBUF,STCLASS="BASED(RVBUF$)");
      393     2133        %G$LOW_MEM (STCLASS="BASED(G$LOW_MEM$)");
      394     2182        %G$ISA (FPTN=G$ISA,STCLASS=BASED);
      395     2485        %G$ASDT (FPTN=G$ASDT,STCLASS=BASED);
      396     2514        %G$BOBCAT(STCLASS="BASED(G$BOBCAT$)");
      397     2527    1   DCL RVBUF$ PTR;
      398     2528    1   DCL NAK BIT(1);
      399     2529        /**/
      400     2530
      401     2531        %EJECT;
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:46   
      402     2532
      403     2533    1           RVBUF$=PINCRW(G$LOW_MEM$,%GI_RVBUF_LOC);
      404     2534    1           GH_IO.CAS.CHN=GJ_BOOTCHAN;
      405     2535    1           GH_IO.CAS.FNC=%GH#IO_INPDVCID;
      406     2536    1           NAK='1'B;
      407     2537    2           DO WHILE(NAK);
      408     2538    3              CALL GHH$IO_IN(GH_IO) WHENRETURN DO;
      409     2539    3                 NAK='0'B;
      410     2540    3                 END;
      411     2541    2              END;
      412     2542    2           DO SELECT(GH_IO.STATUS);
      413     2543    2              SELECT('2408'X);
      414     2544    2              CALL COUPLER_DUMP;
      415     2545    2              SELECT('2017'X);
      416     2546    2              IF (GI_DUMP ~= 0) AND (GI$RVBUF.SCODE.ERR# ~= %S$HOST_BOOT)
      417     2547    2              THEN
      418     2548    2                 CALL DISK_DUMP;
      419     2549
      420     2550        /* Read in the bootstrap */
      421     2551
      422     2552    2              CALL GID$DISKIO(0,SIZE256,PINCRW(G$LOW_MEM$,256),0);
      423     2553    2              CALL GIR$INITCHANS('1'B);
      424     2554
      425     2555        /* TURN ON SEGMENT 0 */
      426     2556    2              CALL GUD$RING0;
      427     2557    2              CALL GHH$ASD(ADDR(NIL),INITSEG0);
      428     2558
      429     2559        /* MOVE ASDT AND ISA TO LOW MEMORY */
      430     2560    2              LOW$->G$ISA = GIR_ISA_REBOOT;
      431     2561    2              PINCRW(LOW$,SIZEW(G$ISA))->G$ASDT = ASDT;
      432     2562    2              LOW$->G$ISA.ASV$ = PINCRW(LOW$,SIZEW(G$ISA));
      433     2563        /* Set up the IV$ for level 0 and then trigger it */
      434     2564    2              G$LOW_MEM.IV.INT.PFS$ = ADDR(LOW$->G$ISA.DEV);
      435     2565    2              CALL GHH$LEV (GOREBOOT);
      436     2566        /* Never to return */
      437     2567    2              END;
      438     2568
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:47   
      439     2569    1           RETURN;
      440     2570        %EJECT;
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:48   
      441     2571        /**/
      442     2572    1   COUPLER_DUMP: PROC;
      443     2573        /**/
      444     2574        /* Initialize the coupler */
      445     2575        /**/
      446     2576    2           GH_IO.CAS.CHN=GJ_BOOTCHAN;
      447     2577    2           GH_IO.CAS.FNC=%GH#IO_OTPCTR;
      448     2578    2           GH_IO.DAS='4000'X;              /* STOPIO */
      449     2579    2           CALL DOIO(GH_IO);
      450     2580        /**/
      451     2581    2           GH_IO.CAS.CHN=GJ_BOOTCHAN+1;
      452     2582    2           GH_IO.CAS.FNC=%GH#IO_OTPCNFA;
      453     2583    2           IF G$BOBCAT.DPS8000FLG ~= 0 THEN
      454     2584    2              GH_IO.DAS='2080'X;
      455     2585    2           ELSE
      456     2586    2              GH_IO.DAS='0080'X;
      457     2587    2           CALL DOIO(GH_IO);
      458     2588        /**/
      459     2589    2           GH_IO.CAS.CHN=GJ_BOOTCHAN+1;
      460     2590    2           GH_IO.CAS.FNC=%GH#IO_OTPTSK;
      461     2591    2           GH_IO.DAS='1F00'X;
      462     2592    2           CALL DOIO(GH_IO);
      463     2593        /**/
      464     2594    2           GH_IO.CAS.CHN=GJ_BOOTCHAN+2;    /* INTERRUPT L66 */
      465     2595    2           GH_IO.CAS.FNC=%GH#IO_OTPINTCTR;
      466     2596    2           GH_IO.RANGE = KJ_INTLVL_SCREECH ;
      467     2597    2           CALL DOIO(GH_IO);
      468     2598        /**/
      469     2599    2           RETURN;
      470     2600
      471     2601    2   END COUPLER_DUMP;
      472     2602
      473     2603        %EJECT;
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:49   
      474     2604    1   DISK_DUMP: PROC;
      475     2605    2   DCL I UBIN;
      476     2606    2   DCL RSECT UBIN;
      477     2607    2   DCL RPAGE UBIN;
      478     2608    2   DCL NPGS UBIN;
      479     2609    2   DCL AVAILPGS SBIN;
      480     2610
      481     2611    2           GID_BOOTCHAN = GJ_BOOTCHAN;
      482     2612    2           CALL GID$INITDUMP(AVAILPGS);
      483     2613    2           RSECT=0;
      484     2614    2           NPGS=%GI_PGS_PER_BIT;
      485     2615    3   DUMPL:  DO I=0 TO SIZEB(GI$RVBUF.DUMPMAP)-1;
      486     2616    4              IF GI$RVBUF.DUMPMAP(I) THEN DO;
      487     2617    4                 RPAGE=I*NPGS;
      488     2618    4                 CALL GID$WRDUMP(RPAGE,RSECT,NPGS);
      489     2619    4                 RSECT=RSECT+(NPGS*2);
      490     2620    4                 AVAILPGS=AVAILPGS-NPGS;
      491     2621    5                 IF AVAILPGS<NPGS THEN DO; /*Out of space*/
      492     2622    5                    EXIT DUMPL;
      493     2623    5                    END;
      494     2624    4                 END;
      495     2625    3              END DUMPL;
      496     2626    2           GI$RVBUF.BUSY=0;
      497     2627    2           RETURN;
      498     2628    2   END DISK_DUMP;
      499     2629        %EJECT;
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:50   
      500     2630
      501     2631    1   GIR$READSTAT: ENTRY;
      502     2632    1           GH_IO.CAS.CHN=GJ_BOOTCHAN;      /* COUPLER CHANNEL 0 */
      503     2633    1           GH_IO.CAS.FNC=%GH#IO_INPSTT1;   /* INPUT STATUS WORD 1 */
      504     2634    1           CALL GHH$IO_IN(GH_IO);          /* READ STATUS, IGNORE NAK */
      505     2635    1           GH_IO.CAS.FNC=%GH#IO_INPSTT2;   /* INPUT STATUS WORD 2 */
      506     2636    1           CALL GHH$IO_IN(GH_IO);          /* READ STATUS, IGNORE NAK */
      507     2637    1           RETURN;
      508     2638
      509     2639
      510     2640
      511     2641
      512     2642    1   DOIO:   PROC(GH_IO);
      513     2643        /**/
      514     2644        %GH_IO (FPTN=GH_IO,STCLASS=PARAM);
      515     2660        /**/
      516     2661    2   NAK:
      517     2662    2           CALL GHH$IO(GH_IO) ALTRET(NAK);
      518     2663    2           RETURN;
      519     2664        /**/
      520     2665    2   END DOIO;
      521     2666        /**/
      522     2667    1   END GIR$INITDUMP;
      523     2668        %EOD;

PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:51   
--  Include file information  --

   G$BOBCAT_M.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
   K_SCODE_C.:E05TOU  is referenced.
   GM_VIRTUAL_E.:E05TOU  is referenced.
   IR_DATA_M.:E05TOU  is referenced.
   GH_IOFNC_E.:E05TOU  is referenced.
   GH_HARDWARE_M.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  was found in the system file and is referenced.
   GT_LCP6_M.:E05TOU  was found in the system file and is referenced.
   KI_CP6.:E05TOU  was found in the system file and is referenced.
   GF_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GM_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GU_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GJ_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GH_LCP6_M.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure GIR$INITDUMP.

   Procedure GIR$INITDUMP requires 477 words for executable code.
   Procedure GIR$INITDUMP requires 26 words of local(AUTO) storage.

PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:52   

 Object Unit name= GIR$INITDUMP                               File name= GIR$SCREECH.:E05TOU
 UTS= JUL 29 '97 21:49:05.28 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_LCP6_SYSTEM                               Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size HexSiz  Section name
    0   Data  even  none     3      3  GIR$INITDUMP
    1  RoData even  UTS    114     72  GIR$INITDUMP
    2   Proc  even  none   477    1DD  GIR$INITDUMP
    3  RoData even  none     7      7  GIR$INITDUMP

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect HexLoc Primary Altret sequence   type   Parms  Name
     2      0   yes            yes      Std        0  GIR$INITDUMP
     2    1A3                  yes      Std        0  GIR$READSTAT

  ****  Data defs  ****

 Sect HexLoc  Name                           Sect HexLoc  Name
    0      0  KJ_INTLVL_SCREECH                  1     40  GIR_ISA_REBOOT
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:53   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       1 GHH$IO_IN
         yes           Std       2 GHH$ASD
         yes           Std       0 GUD$RING0
         yes           Std       1 GHH$LEV
         yes           Std       4 GID$DISKIO
         yes           Std       1 GIR$INITCHANS
 yes     yes           Std       1 GID$INITDUMP
         yes           Std       3 GID$WRDUMP
 yes     yes           Std       1 GHH$IO
                       nStd      0 X6A_AUTO_0
                       nStd      0 X6A_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     GJ_BOOTCHAN                           G$LOW_MEM$                            G$BOBCAT$
     GID_BOOTCHAN                          GI_DUMP                          r    G$ROS$
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:54   


      204        1        /*T***********************************************************/
      205        2        /*T*                                                         */
      206        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      207        4        /*T*                                                         */
      208        5        /*T***********************************************************/
      209        6        GIR$INITDUMP: PROC;

      6   2 000000  D380 0000 0000  xent GIR$INITDUMP    LNJ,B5   X6A_AUTO_0
          2 000003       001A 0000                       DC       26,0

      210        7        /**/
      211        8                /*F*  NAME:  GIR$INITDUMP
      212        9                      PURPOSE:  GIR$INITDUMP is called by GIR$SCREECH to
      213       10                      initiate a dump once the recovery buffer has been
      214       11                      built.
      215       12
      216       13                      Currently only a full screech on a local FEP is
      217       14                      supported.  The coupler is initialized and a level
      218       15                      7 interrupt is sent to the host to cause FROG to
      219       16                      suck the dump from the FEP.
      220       17                */
      221       18        %INCLUDE GH_HARDWARE_M;
      222      116        %INCLUDE GH_IOFNC_E;
      223      185        %INCLUDE IR_DATA_M;
      224      349        %INCLUDE GM_VIRTUAL_E;
      225      559        %INCLUDE K_SCODE_C;
      226      644        %INCLUDE LCP_6;
      227      835        %INCLUDE G$BOBCAT_M;
      228      855        /**/
      229      856        %GI_RCVR_EQU;
      230      868        /**/
      231      869    1   DCL GHH$IO ENTRY(1) ALTRET;
      232      870    1   DCL GHH$IO_IN ENTRY(1) ALTRET;
      233      871    1   DCL GHH$LEV ENTRY(1);
      234      872    1   DCL GHH$ASD ENTRY(2);
      235      873    1   DCL GID$WRDUMP ENTRY(3);
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:55   
      236      874    1   DCL GID$DISKIO ENTRY(4);
      237      875    1   DCL GID$INITDUMP ENTRY(1) ALTRET;
      238      876    1   DCL GIR$INITCHANS ENTRY(1);
      239      877    1   DCL GUD$RING0 ENTRY;
      240      878        /**/
      241      879    1   DCL KJ_INTLVL_SCREECH UBIN STATIC SYMDEF INIT ( 7 ) ;
      242      880    1   DCL GJ_BOOTCHAN UBIN SYMREF;
      243      881    1   DCL G$LOW_MEM$ PTR SYMREF;
      244      882    1   DCL G$BOBCAT$ PTR SYMREF;
      245      883        /**/
      246      884        %GH_IO (FPTN=GH_IO,STCLASS=STATIC);
      247      900    1   DCL GID_BOOTCHAN UBIN SYMREF;
      248      901    1   DCL GI@RECOV UBIN SYMREF;
      249      902    1   DCL GI_DUMP UBIN SYMREF;
      250      903        /**/
      251      904        /* Here we define a constant ISA and ASDT to go to '100'X on reboot */
      252      905    1   DCL 1 ASDT CONSTANT ALIGNED,
      253      906             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      254      907                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      255      908                BASE=%GM_SEG0000_VP,
      256      909                V=YES,SIZE=15);
      257      931             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      258      932                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      259      933                BASE=%GM_SEG0001_VP,
      260      934                V=YES,SIZE=15);
      261      956             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      262      957                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      263      958                BASE=%GM_SEG0002_VP,
      264      959                V=YES,SIZE=15);
      265      981             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      266      982                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      267      983                BASE=%GM_SEG0003_VP,
      268      984                V=YES,SIZE=15);
      269     1006             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      270     1007                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      271     1008                BASE=%GM_SEG0004_VP,
      272     1009                V=YES,SIZE=15);
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:56   
      273     1031             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      274     1032                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      275     1033                BASE=%GM_SEG0005_VP,
      276     1034                V=YES,SIZE=15);
      277     1056             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      278     1057                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      279     1058                BASE=%GM_SEG0006_VP,
      280     1059                V=YES,SIZE=15);
      281     1081             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      282     1082                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      283     1083                BASE=%GM_SEG0007_VP,
      284     1084                V=YES,SIZE=15);
      285     1106             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      286     1107                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      287     1108                BASE=%GM_SEG0008_VP,
      288     1109                V=YES,SIZE=15);
      289     1131             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      290     1132                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      291     1133                BASE=%GM_SEG0009_VP,
      292     1134                V=YES,SIZE=15);
      293     1156             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      294     1157                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      295     1158                BASE=%GM_SEG0010_VP,
      296     1159                V=YES,SIZE=15);
      297     1181             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      298     1182                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      299     1183                BASE=%GM_SEG0011_VP,
      300     1184                V=YES,SIZE=15);
      301     1206             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      302     1207                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      303     1208                BASE=%GM_SEG0012_VP,
      304     1209                V=YES,SIZE=15);
      305     1231             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      306     1232                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      307     1233                BASE=%GM_SEG0013_VP,
      308     1234                V=YES,SIZE=15);
      309     1256             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:57   
      310     1257                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      311     1258                BASE=%GM_SEG0014_VP,
      312     1259                V=YES,SIZE=15);
      313     1281             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      314     1282                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      315     1283                BASE=%GM_SEG0015_VP,
      316     1284                V=YES,SIZE=15);
      317     1306             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      318     1307                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      319     1308                BASE=%GM_SEG0100_VP,
      320     1309                V=YES,SIZE=255);
      321     1331             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      322     1332                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      323     1333                BASE=%GM_SEG0200_VP,
      324     1334                V=YES,SIZE=255);
      325     1356             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      326     1357                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      327     1358                BASE=%GM_SEG0300_VP,
      328     1359                V=YES,SIZE=255);
      329     1381             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      330     1382                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      331     1383                BASE=%GM_SEG0400_VP,
      332     1384                V=YES,SIZE=255);
      333     1406             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      334     1407                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      335     1408                BASE=%GM_SEG0500_VP,
      336     1409                V=YES,SIZE=255);
      337     1431             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      338     1432                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      339     1433                BASE=%GM_SEG0600_VP,
      340     1434                V=YES,SIZE=255);
      341     1456             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      342     1457                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      343     1458                BASE=%GM_SEG0700_VP,
      344     1459                V=YES,SIZE=255);
      345     1481             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      346     1482                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:58   
      347     1483                BASE=%GM_SEG0800_VP,
      348     1484                V=YES,SIZE=255);
      349     1506             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      350     1507                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      351     1508                BASE=%GM_SEG0900_VP,
      352     1509                V=YES,SIZE=255);
      353     1531             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      354     1532                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      355     1533                BASE=%GM_SEG1000_VP,
      356     1534                V=YES,SIZE=255);
      357     1556             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      358     1557                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      359     1558                BASE=%GM_SEG1100_VP,
      360     1559                V=YES,SIZE=255);
      361     1581             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      362     1582                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      363     1583                BASE=%GM_SEG1200_VP,
      364     1584                V=YES,SIZE=255);
      365     1606             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      366     1607                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      367     1608                BASE=%GM_SEG1300_VP,
      368     1609                V=YES,SIZE=255);
      369     1631             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=NO,
      370     1632                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      371     1633                BASE=%GM_SEG1400_VP,
      372     1634                V=YES,SIZE=255);
      373     1656             %G$SEGDESC(FPTN=*,LVL=2,STCLASS=CONSTANT,LAST=YES,
      374     1657                RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      375     1658                BASE=%GM_SEG1500_VP,
      376     1659                V=YES,SIZE=255);
      377     1681        %G$SEGDESC (FPTN=INITSEG0,STCLASS=CONSTANT,LAST=YES,
      378     1682             RP=G_R_USR#,EP=G_R_USR#,WP=G_R_USR#,
      379     1683             BASE=0,
      380     1684             SIZE=15,V=YES);
      381     1706        %G$ISA (FPTN=GIR_ISA_REBOOT,
      382     1707                RING=G_RING0#,
      383     1708                P = "BITBIN('100'X)",
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:59   
      384     1709                ASV$=ASDT,
      385     1710                MMU=YES,
      386     1711                STCLASS="CONSTANT SYMDEF",
      387     1712                LVL=1);
      388     2015        %GH_LEV (FPTN=GOREBOOT,TYPE=TRIGGER_SUSPEND,LEVEL=0,STCLASS=CONSTANT);
      389     2037    1   DCL SIZE256 UBIN(32) CONSTANT INIT(256);
      390     2038    1   DCL LOW UBIN(32) CONSTANT INIT(%GI_RVBUF_LOC);
      391     2039    1   DCL LOW$ REDEF LOW PTR;
      392     2040        %RV_FEP_BUFF (FPTN=GI$RVBUF,STCLASS="BASED(RVBUF$)");
      393     2133        %G$LOW_MEM (STCLASS="BASED(G$LOW_MEM$)");
      394     2182        %G$ISA (FPTN=G$ISA,STCLASS=BASED);
      395     2485        %G$ASDT (FPTN=G$ASDT,STCLASS=BASED);
      396     2514        %G$BOBCAT(STCLASS="BASED(G$BOBCAT$)");
      397     2527    1   DCL RVBUF$ PTR;
      398     2528    1   DCL NAK BIT(1);
      399     2529        /**/
      400     2530
      401     2531        %EJECT;
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:60   
      402     2532
      403     2533    1           RVBUF$=PINCRW(G$LOW_MEM$,%GI_RVBUF_LOC);

   2533   2 000005  EC80 0000 0000  xsym                 LDB,B6   G$LOW_MEM$
          2 000008  DBC6 0200                            LAB,B5   512,B6
          2 00000A  DFC7 0004                            STB,B5   RVBUF$,AUTO

      404     2534    1           GH_IO.CAS.CHN=GJ_BOOTCHAN;

   2534   2 00000C  E800 0000 0000  xsym                 LDR,R6   GJ_BOOTCHAN
          2 00000F  6006                                 SOL,R6   6
          2 000010  EA80 0000 0001  00                   SRM,R6,'FFC0'X    GH_IO
          2 000013       FFC0

      405     2535    1           GH_IO.CAS.FNC=%GH#IO_INPDVCID;

   2535   2 000014  6C26                                 LDV,R6   38
          2 000015  EA80 0000 0001  00                   SRM,R6,'003F'X    GH_IO
          2 000018       003F

      406     2536    1           NAK='1'B;

   2536   2 000019  8947 0006                            LBT,'8000'X       NAK,AUTO
   2536   2 00001B       8000

      407     2537    2           DO WHILE(NAK);

   2537   2 00001C  89C7 0006                            CMZ      NAK,AUTO
          2 00001E  0881 000F                            BAGE     s:2542,PREL

      408     2538    3              CALL GHH$IO_IN(GH_IO) WHENRETURN DO;

   2538   2 000020  BB80 0000 0000  03                   LAB,B3   0
          2 000023  CBF0 0100                            LAB,B4   256,IMO
          2 000025  E380 0000 0000  xent                 LNJ,B6   GHH$IO_IN
          2 000028       0003                            DC       s:2541,PREL

PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:61   
      409     2539    3                 NAK='0'B;

   2539   2 000029  8747 0006                            CL       NAK,AUTO

      410     2540    3                 END;

      411     2541    2              END;

   2541   2 00002B  89C7 0006                            CMZ      NAK,AUTO
          2 00002D  0873                                 BAL      s:2538,SPREL

      412     2542    2           DO SELECT(GH_IO.STATUS);

   2542   2 00002E  E800 0000 0002  00                   LDR,R6   GH_IO+1
          2 000031  E970 2408                            CMR,R6   9224,IMO
          2 000033  0201 0005                            BL       s:2542+11,PREL
          2 000035  0901 0009                            BE       s:2544,PREL
          2 000037  0F81 0086                            B        s:2569,PREL
          2 000039  E970 2017                            CMR,R6   8215,IMO
          2 00003B  0981 0082                            BNE      s:2569,PREL
          2 00003D  0F81 0006                            B        s:2546,PREL

      413     2543    2              SELECT('2408'X);

      414     2544    2              CALL COUPLER_DUMP;

   2544   2 00003F  E3C0 0081                            LNJ,B6   s:0,PREL
          2 000041       0001                            DC       s:2544+3,PREL
          2 000042  0F81 007B                            B        s:2569,PREL

      415     2545    2              SELECT('2017'X);

      416     2546    2              IF (GI_DUMP ~= 0) AND (GI$RVBUF.SCODE.ERR# ~= %S$HOST_BOOT)

   2546   2 000044  D800 0000 0000  xsym                 LDR,R5   GI_DUMP
          2 000047  5901 000D                            BEZ,R5   s:2552,PREL
          2 000049  ECC7 0004                            LDB,B6   RVBUF$,AUTO
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:62   
          2 00004B  C846 0105                            LDR,R4   261,B6
          2 00004D  4043                                 SOR,R4   3
          2 00004E  C970 00A3                            CMR,R4   163,IMO
          2 000050  0901 0004                            BE       s:2552,PREL

      417     2547    2              THEN
      418     2548    2                 CALL DISK_DUMP;

   2548   2 000052  E3C0 00EE                            LNJ,B6   s:0,PREL
          2 000054       0001                            DC       s:2552,PREL

      419     2549
      420     2550        /* Read in the bootstrap */
      421     2551
      422     2552    2              CALL GID$DISKIO(0,SIZE256,PINCRW(G$LOW_MEM$,256),0);

   2552   2 000055  EBF0 0000                            LAB,B6   0,IMO
          2 000057  DC80 0000 0000  xsym                 LDB,B5   G$LOW_MEM$
          2 00005A  CBC5 0100                            LAB,B4   256,B5
          2 00005C  CFC7 0010                            STB,B4   AVAILPGS+2,AUTO
          2 00005E  BBF0 0000                            LAB,B3   0,IMO
          2 000060  BFC7 0018                            STB,B3   AVAILPGS+10,AUTO
          2 000062  ABC7 0010                            LAB,B2   AVAILPGS+2,AUTO
          2 000064  AFC7 0016                            STB,B2   AVAILPGS+8,AUTO
          2 000066  9B80 0000 006E  01                   LAB,B1   SIZE256
          2 000069  9FC7 0014                            STB,B1   AVAILPGS+6,AUTO
          2 00006B  EFC7 0012                            STB,B6   AVAILPGS+4,AUTO
          2 00006D  BBC7 0012                            LAB,B3   AVAILPGS+4,AUTO
          2 00006F  CBF0 0400                            LAB,B4   1024,IMO
          2 000071  E380 0000 0000  xent                 LNJ,B6   GID$DISKIO
          2 000074       0001                            DC       s:2553,PREL

      423     2553    2              CALL GIR$INITCHANS('1'B);

   2553   2 000075  BB80 0000 0003  03                   LAB,B3   +3
          2 000078  CBF0 0100                            LAB,B4   256,IMO
          2 00007A  E380 0000 0000  xent                 LNJ,B6   GIR$INITCHANS
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:63   
          2 00007D       0001                            DC       s:2556,PREL

      424     2554
      425     2555        /* TURN ON SEGMENT 0 */
      426     2556    2              CALL GUD$RING0;

   2556   2 00007E  CBF0 0000                            LAB,B4   0,IMO
          2 000080  E380 0000 0000  xent                 LNJ,B6   GUD$RING0
          2 000083       0001                            DC       s:2557,PREL

      427     2557    2              CALL GHH$ASD(ADDR(NIL),INITSEG0);

   2557   2 000084  EB80 0000 0000                       LAB,B6   0
          2 000087  EFC7 0010                            STB,B6   AVAILPGS+2,AUTO
          2 000089  DB80 0000 003E  01                   LAB,B5   INITSEG0
          2 00008C  DFC7 0014                            STB,B5   AVAILPGS+6,AUTO
          2 00008E  CBC7 0010                            LAB,B4   AVAILPGS+2,AUTO
          2 000090  CFC7 0012                            STB,B4   AVAILPGS+4,AUTO
          2 000092  BBC7 0012                            LAB,B3   AVAILPGS+4,AUTO
          2 000094  CBF0 0200                            LAB,B4   512,IMO
          2 000096  E380 0000 0000  xent                 LNJ,B6   GHH$ASD
          2 000099       0001                            DC       s:2560,PREL

      428     2558
      429     2559        /* MOVE ASDT AND ISA TO LOW MEMORY */
      430     2560    2              LOW$->G$ISA = GIR_ISA_REBOOT;

   2560   2 00009A  AB80 0000 0040  01                   LAB,B2   GIR_ISA_REBOOT
          2 00009D  2C00                                 LDV,R2   0
          2 00009E  6C5A                                 LDV,R6   90
          2 00009F  BC80 0000 0070  01                   LDB,B3   LOW
          2 0000A2  3C00                                 LDV,R3   0
          2 0000A3  0008                                 MMM

      431     2561    2              PINCRW(LOW$,SIZEW(G$ISA))->G$ASDT = ASDT;

   2561   2 0000A4  AB80 0000 0000  01                   LAB,B2   ASDT
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:64   
          2 0000A7  2C00                                 LDV,R2   0
          2 0000A8  6C7C                                 LDV,R6   124
          2 0000A9  3C5A                                 LDV,R3   90
          2 0000AA  0008                                 MMM

      432     2562    2              LOW$->G$ISA.ASV$ = PINCRW(LOW$,SIZEW(G$ISA));

   2562   2 0000AB  EBC3 002D                            LAB,B6   45,B3
          2 0000AD  EF83                                 STB,B6   ,B3

      433     2563        /* Set up the IV$ for level 0 and then trigger it */
      434     2564    2              G$LOW_MEM.IV.INT.PFS$ = ADDR(LOW$->G$ISA.DEV);

   2564   2 0000AE  DBC3 0005                            LAB,B5   5,B3
          2 0000B0  CC80 0000 0000  xsym                 LDB,B4   G$LOW_MEM$
          2 0000B3  DFC4 0080                            STB,B5   128,B4

      435     2565    2              CALL GHH$LEV (GOREBOOT);

   2565   2 0000B5  BB80 0000 0005  03                   LAB,B3   +5
          2 0000B8  CBF0 0100                            LAB,B4   256,IMO
          2 0000BA  E380 0000 0000  xent                 LNJ,B6   GHH$LEV
          2 0000BD       0001                            DC       s:2569,PREL

      436     2566        /* Never to return */
      437     2567    2              END;

      438     2568
      439     2569    1           RETURN;

   2569   2 0000BE  C380 0000 0000  xent                 LNJ,B4   X6A_ARET

      440     2570        %EJECT;
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:65   
      441     2571        /**/
      442     2572    1   COUPLER_DUMP: PROC;

   2572   2 0000C1  EFC7 0008            COUPLER_DUMP    STB,B6   NAK+2,AUTO

      443     2573        /**/
      444     2574        /* Initialize the coupler */
      445     2575        /**/
      446     2576    2           GH_IO.CAS.CHN=GJ_BOOTCHAN;

   2576   2 0000C3  E800 0000 0000  xsym                 LDR,R6   GJ_BOOTCHAN
          2 0000C6  6006                                 SOL,R6   6
          2 0000C7  EA80 0000 0001  00                   SRM,R6,'FFC0'X    GH_IO
          2 0000CA       FFC0

      447     2577    2           GH_IO.CAS.FNC=%GH#IO_OTPCTR;

   2577   2 0000CB  6C01                                 LDV,R6   1
          2 0000CC  EA80 0000 0001  00                   SRM,R6,'003F'X    GH_IO
          2 0000CF       003F

      448     2578    2           GH_IO.DAS='4000'X;              /* STOPIO */

   2578   2 0000D0  D870 4000                            LDR,R5   16384,IMO
          2 0000D2  DF00 0000 0002  00                   STR,R5   GH_IO+1

      449     2579    2           CALL DOIO(GH_IO);

   2579   2 0000D5  DB80 0000 0001  00                   LAB,B5   GH_IO
          2 0000D8  DFC7 000C                            STB,B5   RSECT+1,AUTO
          2 0000DA  E3C0 00F4                            LNJ,B6   s:0,PREL
          2 0000DC       0001                            DC       s:2581,PREL

      450     2580        /**/
      451     2581    2           GH_IO.CAS.CHN=GJ_BOOTCHAN+1;

   2581   2 0000DD  E800 0000 0000  xsym                 LDR,R6   GJ_BOOTCHAN
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:66   
          2 0000E0  6E01                                 ADV,R6   1
          2 0000E1  6006                                 SOL,R6   6
          2 0000E2  EA80 0000 0001  00                   SRM,R6,'FFC0'X    GH_IO
          2 0000E5       FFC0

      452     2582    2           GH_IO.CAS.FNC=%GH#IO_OTPCNFA;

   2582   2 0000E6  6C11                                 LDV,R6   17
          2 0000E7  EA80 0000 0001  00                   SRM,R6,'003F'X    GH_IO
          2 0000EA       003F

      453     2583    2           IF G$BOBCAT.DPS8000FLG ~= 0 THEN

   2583   2 0000EB  EC80 0000 0000  xsym                 LDB,B6   G$BOBCAT$
          2 0000EE  D846 0067                            LDR,R5   103,B6
          2 0000F0  5901 0008                            BEZ,R5   s:2586,PREL

      454     2584    2              GH_IO.DAS='2080'X;

   2584   2 0000F2  C870 2080                            LDR,R4   8320,IMO
          2 0000F4  CF00 0000 0002  00                   STR,R4   GH_IO+1
          2 0000F7  0F81 0006                            B        s:2587,PREL

      455     2585    2           ELSE
      456     2586    2              GH_IO.DAS='0080'X;

   2586   2 0000F9  C870 0080                            LDR,R4   128,IMO
          2 0000FB  CF00 0000 0002  00                   STR,R4   GH_IO+1

      457     2587    2           CALL DOIO(GH_IO);

   2587   2 0000FE  DB80 0000 0001  00                   LAB,B5   GH_IO
          2 000101  DFC7 000C                            STB,B5   RSECT+1,AUTO
          2 000103  E3C0 00CB                            LNJ,B6   s:0,PREL
          2 000105       0001                            DC       s:2589,PREL

      458     2588        /**/
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:67   
      459     2589    2           GH_IO.CAS.CHN=GJ_BOOTCHAN+1;

   2589   2 000106  E800 0000 0000  xsym                 LDR,R6   GJ_BOOTCHAN
          2 000109  6E01                                 ADV,R6   1
          2 00010A  6006                                 SOL,R6   6
          2 00010B  EA80 0000 0001  00                   SRM,R6,'FFC0'X    GH_IO
          2 00010E       FFC0

      460     2590    2           GH_IO.CAS.FNC=%GH#IO_OTPTSK;

   2590   2 00010F  6C07                                 LDV,R6   7
          2 000110  EA80 0000 0001  00                   SRM,R6,'003F'X    GH_IO
          2 000113       003F

      461     2591    2           GH_IO.DAS='1F00'X;

   2591   2 000114  D870 1F00                            LDR,R5   7936,IMO
          2 000116  DF00 0000 0002  00                   STR,R5   GH_IO+1

      462     2592    2           CALL DOIO(GH_IO);

   2592   2 000119  EB80 0000 0001  00                   LAB,B6   GH_IO
          2 00011C  EFC7 000C                            STB,B6   RSECT+1,AUTO
          2 00011E  E3C0 00B0                            LNJ,B6   s:0,PREL
          2 000120       0001                            DC       s:2594,PREL

      463     2593        /**/
      464     2594    2           GH_IO.CAS.CHN=GJ_BOOTCHAN+2;    /* INTERRUPT L66 */

   2594   2 000121  E800 0000 0000  xsym                 LDR,R6   GJ_BOOTCHAN
          2 000124  6E02                                 ADV,R6   2
          2 000125  6006                                 SOL,R6   6
          2 000126  EA80 0000 0001  00                   SRM,R6,'FFC0'X    GH_IO
          2 000129       FFC0

      465     2595    2           GH_IO.CAS.FNC=%GH#IO_OTPINTCTR;

PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:68   
   2595   2 00012A  6C03                                 LDV,R6   3
          2 00012B  EA80 0000 0001  00                   SRM,R6,'003F'X    GH_IO
          2 00012E       003F

      466     2596    2           GH_IO.RANGE = KJ_INTLVL_SCREECH ;

   2596   2 00012F  D800 0000 0000  00                   LDR,R5   KJ_INTLVL_SCREECH
          2 000132  DF00 0000 0002  00                   STR,R5   GH_IO+1

      467     2597    2           CALL DOIO(GH_IO);

   2597   2 000135  EB80 0000 0001  00                   LAB,B6   GH_IO
          2 000138  EFC7 000C                            STB,B6   RSECT+1,AUTO
          2 00013A  E3C0 0094                            LNJ,B6   s:0,PREL
          2 00013C       0001                            DC       s:2599,PREL

      468     2598        /**/
      469     2599    2           RETURN;

   2599   2 00013D  ECC7 0008                            LDB,B6   NAK+2,AUTO
          2 00013F  C3C6 0001                            LNJ,B4   1,B6

      470     2600
      471     2601    2   END COUPLER_DUMP;
      472     2602
      473     2603        %EJECT;
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:69   
      474     2604    1   DISK_DUMP: PROC;

   2604   2 000141  EFC7 0008            DISK_DUMP       STB,B6   NAK+2,AUTO

      475     2605    2   DCL I UBIN;
      476     2606    2   DCL RSECT UBIN;
      477     2607    2   DCL RPAGE UBIN;
      478     2608    2   DCL NPGS UBIN;
      479     2609    2   DCL AVAILPGS SBIN;
      480     2610
      481     2611    2           GID_BOOTCHAN = GJ_BOOTCHAN;

   2611   2 000143  E800 0000 0000  xsym                 LDR,R6   GJ_BOOTCHAN
          2 000146  EF00 0000 0000  xsym                 STR,R6   GID_BOOTCHAN

      482     2612    2           CALL GID$INITDUMP(AVAILPGS);

   2612   2 000149  DBC7 000E                            LAB,B5   AVAILPGS,AUTO
          2 00014B  DFC7 0010                            STB,B5   AVAILPGS+2,AUTO
          2 00014D  BBC7 0010                            LAB,B3   AVAILPGS+2,AUTO
          2 00014F  CBF0 0100                            LAB,B4   256,IMO
          2 000151  E380 0000 0000  xent                 LNJ,B6   GID$INITDUMP
          2 000154       0001                            DC       s:2613,PREL

      483     2613    2           RSECT=0;

   2613   2 000155  8747 000B                            CL       RSECT,AUTO

      484     2614    2           NPGS=%GI_PGS_PER_BIT;

   2614   2 000157  6C04                                 LDV,R6   4
          2 000158  EF47 000D                            STR,R6   NPGS,AUTO

      485     2615    3   DUMPL:  DO I=0 TO SIZEB(GI$RVBUF.DUMPMAP)-1;

   2615   2 00015A  8747 000A            DUMPL           CL       I,AUTO
          2 00015C  0F81 0039                            B        s:2625+2,PREL
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:70   

      486     2616    4              IF GI$RVBUF.DUMPMAP(I) THEN DO;

   2616   2 00015E  ECC7 0004                            LDB,B6   RVBUF$,AUTO
          2 000160  B847 000A                            LDR,R3   I,AUTO
          2 000162  82B6                                 LB       ,B6,R3
          2 000163  0581 0030                            BBF      s:2625,PREL

      487     2617    4                 RPAGE=I*NPGS;

   2617   2 000165  F853                                 LDR,R7   R3
          2 000166  FB47 000D                            MUL,R7   NPGS,AUTO
          2 000168  E857                                 LDR,R6   R7
          2 000169  EF47 000C                            STR,R6   RPAGE,AUTO

      488     2618    4                 CALL GID$WRDUMP(RPAGE,RSECT,NPGS);

   2618   2 00016B  DBC7 000D                            LAB,B5   NPGS,AUTO
          2 00016D  DFC7 0014                            STB,B5   AVAILPGS+6,AUTO
          2 00016F  CBC7 000B                            LAB,B4   RSECT,AUTO
          2 000171  CFC7 0012                            STB,B4   AVAILPGS+4,AUTO
          2 000173  BBC7 000C                            LAB,B3   RPAGE,AUTO
          2 000175  BFC7 0010                            STB,B3   AVAILPGS+2,AUTO
          2 000177  BBC7 0010                            LAB,B3   AVAILPGS+2,AUTO
          2 000179  CBF0 0300                            LAB,B4   768,IMO
          2 00017B  E380 0000 0000  xent                 LNJ,B6   GID$WRDUMP
          2 00017E       0001                            DC       s:2619,PREL

      489     2619    4                 RSECT=RSECT+(NPGS*2);

   2619   2 00017F  E847 000D                            LDR,R6   NPGS,AUTO
          2 000181  6001                                 SOL,R6   1
          2 000182  EA47 000B                            ADD,R6   RSECT,AUTO
          2 000184  EF47 000B                            STR,R6   RSECT,AUTO

      490     2620    4                 AVAILPGS=AVAILPGS-NPGS;

PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:71   
   2620   2 000186  D847 000E                            LDR,R5   AVAILPGS,AUTO
          2 000188  D247 000D                            SUB,R5   NPGS,AUTO
          2 00018A  DF47 000E                            STR,R5   AVAILPGS,AUTO

      491     2621    5                 IF AVAILPGS<NPGS THEN DO; /*Out of space*/

   2621   2 00018C  5801 0005                            BLZ,R5   s:2622,PREL
          2 00018E  D947 000D                            CMR,R5   NPGS,AUTO
          2 000190  0281 0003                            BGE      s:2625,PREL

      492     2622    5                    EXIT DUMPL;

   2622   2 000192  0F81 0008                            B        s:2626,PREL

      493     2623    5                    END;
      494     2624    4                 END;
      495     2625    3              END DUMPL;

   2625   2 000194  8AC7 000A                            INC      I,AUTO
          2 000196  E847 000A                            LDR,R6   I,AUTO
          2 000198  E970 0FFF                            CMR,R6   4095,IMO
          2 00019A  03C4                                 BLE      s:2616,SPREL

      496     2626    2           GI$RVBUF.BUSY=0;

   2626   2 00019B  ECC7 0004                            LDB,B6   RVBUF$,AUTO
          2 00019D  8746 0100                            CL       256,B6

      497     2627    2           RETURN;

   2627   2 00019F  ECC7 0008                            LDB,B6   NAK+2,AUTO
          2 0001A1  C3C6 0001                            LNJ,B4   1,B6

      498     2628    2   END DISK_DUMP;
      499     2629        %EJECT;
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:72   
      500     2630
      501     2631    1   GIR$READSTAT: ENTRY;

   2631   2 0001A3  D380 0000 0000  xent GIR$READSTAT    LNJ,B5   X6A_AUTO_0
          2 0001A6       001A 0000                       DC       26,0

      502     2632    1           GH_IO.CAS.CHN=GJ_BOOTCHAN;      /* COUPLER CHANNEL 0 */

   2632   2 0001A8  E800 0000 0000  xsym                 LDR,R6   GJ_BOOTCHAN
          2 0001AB  6006                                 SOL,R6   6
          2 0001AC  EA80 0000 0001  00                   SRM,R6,'FFC0'X    GH_IO
          2 0001AF       FFC0

      503     2633    1           GH_IO.CAS.FNC=%GH#IO_INPSTT1;   /* INPUT STATUS WORD 1 */

   2633   2 0001B0  6C18                                 LDV,R6   24
          2 0001B1  EA80 0000 0001  00                   SRM,R6,'003F'X    GH_IO
          2 0001B4       003F

      504     2634    1           CALL GHH$IO_IN(GH_IO);          /* READ STATUS, IGNORE NAK */

   2634   2 0001B5  BB80 0000 0000  03                   LAB,B3   0
          2 0001B8  CBF0 0100                            LAB,B4   256,IMO
          2 0001BA  E380 0000 0000  xent                 LNJ,B6   GHH$IO_IN
          2 0001BD       0001                            DC       s:2635,PREL

      505     2635    1           GH_IO.CAS.FNC=%GH#IO_INPSTT2;   /* INPUT STATUS WORD 2 */

   2635   2 0001BE  6C1A                                 LDV,R6   26
          2 0001BF  EA80 0000 0001  00                   SRM,R6,'003F'X    GH_IO
          2 0001C2       003F

      506     2636    1           CALL GHH$IO_IN(GH_IO);          /* READ STATUS, IGNORE NAK */

   2636   2 0001C3  BB80 0000 0000  03                   LAB,B3   0
          2 0001C6  CBF0 0100                            LAB,B4   256,IMO
          2 0001C8  E380 0000 0000  xent                 LNJ,B6   GHH$IO_IN
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:73   
          2 0001CB       0001                            DC       s:2637,PREL

      507     2637    1           RETURN;

   2637   2 0001CC  C380 0000 0000  xent                 LNJ,B4   X6A_ARET

      508     2638
      509     2639
      510     2640
      511     2641
      512     2642    1   DOIO:   PROC(GH_IO);

   2642   2 0001CF  EFC7 000A            DOIO            STB,B6   I,AUTO

      513     2643        /**/
      514     2644        %GH_IO (FPTN=GH_IO,STCLASS=PARAM);
      515     2660        /**/
      516     2661    2   NAK:
      517     2662    2           CALL GHH$IO(GH_IO) ALTRET(NAK);

   2662   2 0001D1  BBC7 000C            NAK             LAB,B3   @GH_IO,AUTO
          2 0001D3  CBF0 0100                            LAB,B4   256,IMO
          2 0001D5  E380 0000 0000  xent                 LNJ,B6   GHH$IO
          2 0001D8       FFF9                            DC       s:2662,PREL

      518     2663    2           RETURN;

   2663   2 0001D9  ECC7 000A                            LDB,B6   I,AUTO
          2 0001DB  C3C6 0001                            LNJ,B4   1,B6
      519     2664        /**/
      520     2665    2   END DOIO;
      521     2666        /**/
      522     2667    1   END GIR$INITDUMP;
      523     2668        %EOD;

PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:74   
--  Include file information  --

   G$BOBCAT_M.:E05TOU  is referenced.
   LCP_6.:E05TOU  cannot be made into a system file and is referenced.
   K_SCODE_C.:E05TOU  is referenced.
   GM_VIRTUAL_E.:E05TOU  is referenced.
   IR_DATA_M.:E05TOU  is referenced.
   GH_IOFNC_E.:E05TOU  is referenced.
   GH_HARDWARE_M.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  was found in the system file and is referenced.
   GT_LCP6_M.:E05TOU  was found in the system file and is referenced.
   KI_CP6.:E05TOU  was found in the system file and is referenced.
   GF_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GM_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GU_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GJ_LCP6_M.:E05TOU  was found in the system file and is referenced.
   GH_LCP6_M.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure GIR$INITDUMP.
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:75   

 **** Variables and constants ****

  ****  Section 000  Data  GIR$INITDUMP

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     1-0-0/w STRC(32)    r     1 GH_IO                      0-0-0/w UBIN(16)    r     1 KJ_INTLVL_SCREECH

  ****  Section 001 RoData GIR$INITDUMP

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(992)   r     1 ASDT                      40-0-0/w STRC(720)   r     1 GIR_ISA_REBOOT
    6D-0-0/w STRC(16)    r     1 GOREBOOT                  3E-0-0/w STRC(32)    r     1 INITSEG0
    70-0-0/w UBIN(32)    r     1 LOW                       70-0-0/w PTR         r     1 LOW$
    6E-0-0/w UBIN(32)    r     1 SIZE256

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     C-0-0/w PTR         r     1 @GH_IO                     E-0-0/w SBIN(16)    r     1 AVAILPGS
    *0-0-0/w STRC(32)    r     1 GH_IO                      A-0-0/w UBIN(16)    r     1 I
     6-0-0/b BIT         r     1 NAK                        D-0-0/w UBIN(16)    r     1 NPGS
     C-0-0/w UBIN(16)    r     1 RPAGE                      B-0-0/w UBIN(16)    r     1 RSECT
     4-0-0/w PTR         r     1 RVBUF$

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 G$BOBCAT$                  0-0-0/w PTR         r     1 G$LOW_MEM$
     0-0-0/w UBIN(16)    r     1 GID_BOOTCHAN               0-0-0/w UBIN(16)    r     1 GI_DUMP
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:76   
     0-0-0/w UBIN(16)    r     1 GJ_BOOTCHAN

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(32)    r     1 G$ASDT(0:30)               0-0-0/w STRC(1696)  r     1 G$BOBCAT
     0-0-0/w STRC(720)   r     1 G$ISA                      0-0-0/w STRC(4096)  r     1 G$LOW_MEM
     0-0-0/w STRC(4288)  r     1 GI$RVBUF


   Procedure GIR$INITDUMP requires 477 words for executable code.
   Procedure GIR$INITDUMP requires 26 words of local(AUTO) storage.
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:77   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:78   
          MINI XREF LISTING

ASDT
       905**DCL      1743--DCLINIT  2561>>ASSIGN
AVAILPGS IN PROCEDURE DISK_DUMP
      2609**DCL      2612<>CALL     2620<<ASSIGN   2620>>ASSIGN   2621>>IF
COUPLER_DUMP
      2572**PROC     2544--CALL
DISK_DUMP
      2604**PROC     2548--CALL
DOIO
      2642**PROC     2579--CALL     2587--CALL     2592--CALL     2597--CALL
DUMPL IN PROCEDURE DISK_DUMP
      2615**LABEL    2622--EXIT
G$ASDT
      2490**DCL      2561<<ASSIGN
G$BOBCAT.DPS8000FLG
      2525**DCL      2583>>IF
G$BOBCAT$
       882**DCL      2515--IMP-PTR  2583>>IF
G$ISA
      2209**DCL      2560<<ASSIGN   2561--ASSIGN   2562--ASSIGN
G$ISA.ASV$
      2213**DCL      2562<<ASSIGN
G$ISA.DEV
      2233**DCL      2564--ASSIGN
G$ISA.P$$
      2286**DCL      2286--REDEF
G$LOW_MEM.IV.IL$
      2175**DCL      2175--REDEF
G$LOW_MEM.IV.INT.I#00$
      2175**DCL      2175--REDEF
G$LOW_MEM.IV.INT.I#01$
      2175**DCL      2175--REDEF
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:79   
G$LOW_MEM.IV.INT.I#02$
      2176**DCL      2176--REDEF
G$LOW_MEM.IV.INT.I#03$
      2176**DCL      2176--REDEF
G$LOW_MEM.IV.INT.I#04$
      2176**DCL      2177--REDEF
G$LOW_MEM.IV.INT.I#05$
      2177**DCL      2177--REDEF
G$LOW_MEM.IV.INT.I#61$
      2178**DCL      2178--REDEF
G$LOW_MEM.IV.INT.I#62$
      2178**DCL      2178--REDEF
G$LOW_MEM.IV.INT.I#63$
      2178**DCL      2178--REDEF
G$LOW_MEM.IV.INT.PFS$
      2175**DCL      2564<<ASSIGN
G$LOW_MEM.TV.T#01$
      2163**DCL      2163--REDEF
G$LOW_MEM.TV.T#02$
      2163**DCL      2163--REDEF
G$LOW_MEM.TV.T#03$
      2162**DCL      2162--REDEF
G$LOW_MEM.TV.T#05$
      2162**DCL      2162--REDEF
G$LOW_MEM.TV.T#06$
      2161**DCL      2161--REDEF
G$LOW_MEM.TV.T#07$
      2161**DCL      2161--REDEF
G$LOW_MEM.TV.T#08$
      2160**DCL      2161--REDEF
G$LOW_MEM.TV.T#09$
      2160**DCL      2160--REDEF
G$LOW_MEM.TV.T#10$
      2160**DCL      2160--REDEF
G$LOW_MEM.TV.T#12$
      2159**DCL      2159--REDEF
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:80   
G$LOW_MEM.TV.T#13$
      2159**DCL      2159--REDEF
G$LOW_MEM.TV.T#14$
      2158**DCL      2158--REDEF
G$LOW_MEM.TV.T#15$
      2158**DCL      2158--REDEF
G$LOW_MEM.TV.T#16$
      2157**DCL      2158--REDEF
G$LOW_MEM.TV.T#17$
      2157**DCL      2157--REDEF
G$LOW_MEM.TV.T#19$
      2156**DCL      2157--REDEF
G$LOW_MEM.TV.T#20$
      2156**DCL      2156--REDEF
G$LOW_MEM.TV.T#21$
      2156**DCL      2156--REDEF
G$LOW_MEM.TV.T#22$
      2155**DCL      2155--REDEF
G$LOW_MEM.TV.T#23$
      2155**DCL      2155--REDEF
G$LOW_MEM.TV.T#24$
      2154**DCL      2155--REDEF
G$LOW_MEM.TV.T#25$
      2154**DCL      2154--REDEF
G$LOW_MEM.TV.T#26$
      2154**DCL      2154--REDEF
G$LOW_MEM.TV.T#27$
      2153**DCL      2153--REDEF
G$LOW_MEM.TV.T#28$
      2153**DCL      2153--REDEF
G$LOW_MEM.TV.T#29$
      2152**DCL      2153--REDEF
G$LOW_MEM.TV.T#30$
      2152**DCL      2152--REDEF
G$LOW_MEM.TV.T#31$
      2152**DCL      2152--REDEF
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:81   
G$LOW_MEM.TV.T#32$
      2151**DCL      2151--REDEF
G$LOW_MEM.TV.T#33$
      2151**DCL      2151--REDEF
G$LOW_MEM$
       881**DCL      2138--IMP-PTR  2533>>ASSIGN   2552>>CALL     2564>>ASSIGN
GHH$ASD
       872**DCL-ENT  2557--CALL
GHH$IO
       869**DCL-ENT  2662--CALL
GHH$IO_IN
       870**DCL-ENT  2538--CALL     2634--CALL     2636--CALL
GHH$LEV
       871**DCL-ENT  2565--CALL
GH_IO
       895**DCL      2538<>CALL     2579<>CALL     2587<>CALL     2592<>CALL     2597<>CALL     2634<>CALL
      2636<>CALL
GH_IO.CAS.CHN
       895**DCL       895--REDEF    2534<<ASSIGN   2576<<ASSIGN   2581<<ASSIGN   2589<<ASSIGN   2594<<ASSIGN
      2632<<ASSIGN
GH_IO.CAS.FNC
       896**DCL      2535<<ASSIGN   2577<<ASSIGN   2582<<ASSIGN   2590<<ASSIGN   2595<<ASSIGN   2633<<ASSIGN
      2635<<ASSIGN
GH_IO.DAS
       896**DCL       897--REDEF     898--REDEF    2578<<ASSIGN   2584<<ASSIGN   2586<<ASSIGN   2591<<ASSIGN
GH_IO.RANGE
       897**DCL      2596<<ASSIGN
GH_IO.STATUS
       898**DCL      2542>>DOSELCT
GH_IO IN PROCEDURE DOIO
      2655**DCL      2642--PROC     2662<>CALL
GH_IO.CAS.CHN IN PROCEDURE DOIO
      2655**DCL      2655--REDEF
GH_IO.DAS IN PROCEDURE DOIO
      2656**DCL      2657--REDEF    2658--REDEF
GI$RVBUF.BUSY
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:82   
      2061**DCL      2626<<ASSIGN
GI$RVBUF.DUMPMAP
      2056**DCL      2615--DOINDEX  2616>>IF
GI$RVBUF.SCODE.ERR#
      2123**DCL      2546>>IF
GID$DISKIO
       874**DCL-ENT  2552--CALL
GID$INITDUMP
       875**DCL-ENT  2612--CALL
GID$WRDUMP
       873**DCL-ENT  2618--CALL
GID_BOOTCHAN
       900**DCL      2611<<ASSIGN
GIR$INITCHANS
       876**DCL-ENT  2553--CALL
GIR_ISA_REBOOT
      1739**DCL      2560>>ASSIGN
GIR_ISA_REBOOT.P
      1818**DCL      1818--REDEF    1818--REDEF
GI_DUMP
       902**DCL      2546>>IF
GJ_BOOTCHAN
       880**DCL      2534>>ASSIGN   2576>>ASSIGN   2581>>ASSIGN   2589>>ASSIGN   2594>>ASSIGN   2611>>ASSIGN
      2632>>ASSIGN
GOREBOOT
      2034**DCL      2565<>CALL
GUD$RING0
       877**DCL-ENT  2556--CALL
I IN PROCEDURE DISK_DUMP
      2605**DCL      2615<<DOINDEX  2616>>IF       2617>>ASSIGN
INITSEG0
      1698**DCL      2557<>CALL
KJ_INTLVL_SCREECH
       879**DCL      2596>>ASSIGN
LOW
      2038**DCL      2039--REDEF
PL6.E3A0      #002=GIR$INITDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:83   
LOW$
      2039**DCL      2560>>ASSIGN   2561>>ASSIGN   2562>>ASSIGN   2562>>ASSIGN   2564>>ASSIGN
NAK
      2528**DCL      2536<<ASSIGN   2537>>DOWHILE  2539<<ASSIGN
NAK IN PROCEDURE DOIO
      2662**LABEL    2662--CALLALT
NPGS IN PROCEDURE DISK_DUMP
      2608**DCL      2614<<ASSIGN   2617>>ASSIGN   2618<>CALL     2619>>ASSIGN   2620>>ASSIGN   2621>>IF
RPAGE IN PROCEDURE DISK_DUMP
      2607**DCL      2617<<ASSIGN   2618<>CALL
RSECT IN PROCEDURE DISK_DUMP
      2606**DCL      2613<<ASSIGN   2618<>CALL     2619<<ASSIGN   2619>>ASSIGN
RVBUF$
      2527**DCL      2053--IMP-PTR  2533<<ASSIGN   2546>>IF       2616>>IF       2626>>ASSIGN
SIZE256
      2037**DCL      2552<>CALL

PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:84   
      524        1        /*T***********************************************************/
      525        2        /*T*                                                         */
      526        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      527        4        /*T*                                                         */
      528        5        /*T***********************************************************/
      529        6        GIR$MLCPDUMP: PROC;
      530        7        /**/
      531        8        /*D*    NAME:  GIR$MLCPDUMP
      532        9                CALL:  CALL GIR$MLCPDUMP
      533       10                DESCRIPTION:
      534       11                This routine is called from GJS$STEP after the last booted
      535       12                in user has be set up.  If the boot calls for an MLCP dump
      536       13                the RAM from all MLCPs is dumped into the host memory that
      537       14                contained the boot image.
      538       15        */
      539       16        /**/
      540       17        %INCLUDE GI_DATA_M;
      541       45        %INCLUDE GH_HARDWARE_M;
      542      143        %INCLUDE GH_IOFNC_E;
      543      212    1   DCL GHH$IO ENTRY(1) ALTRET;
      544      213    1   DCL GHH$IO_IN ENTRY(1) ALTRET;
      545      214    1   DCL GHH$IOLD ENTRY(1) ALTRET;
      546      215    1   DCL GIR$READCPLR ENTRY(3);
      547      216    1   DCL GIR$WRITECPLR ENTRY(3);
      548      217    1   DCL GMA$GETPS ENTRY(2) ALTRET;
      549      218    1   DCL GMA$MAP ENTRY(2) ALTRET;
      550      219    1   DCL GMA$RELPS ENTRY(2) ALTRET;
      551      220        /**/
      552      221    1   DCL 1 QHDR ALIGNED,
      553      222    1         2 * UBIN(32),
      554      223    1         2 MLCPDUMP BIT(1),                /* SET IF MLCP DUMP REQUESTED */
      555      224    1         2 * BIT(31);
      556      225    1   DCL CHAN UBIN;
      557      226        %GH_IO (FPTN=GH_IO,STCLASS=AUTO);
      558      242        %GH_IOLD (FPTN=GH_IOLD,STCLASS=AUTO);
      559      257    1   DCL TIMEOUT SBIN;
      560      258    1   DCL WAIT SBIN;
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:85   
      561      259        %GI$MLCPDMP (FPTN=GI$MLCPDMP,STCLASS=AUTO,DSIZE=1);
      562      262        %GI$MLCPDMP_HDR (FPTN=GI$MLCPDMP_HDR,STCLASS=AUTO);
      563      265    1   DCL PP UBIN;
      564      266    1   DCL L66ADDR UBIN(32);
      565      267    1   DCL L6ADDR UBIN(32);
      566      268    1   DCL WDSIZE UBIN(32);
      567      269        /**/
      568      270    1   DCL G$WINDOW1$ PTR SYMREF;
      569      271    1   DCL GJ_BOOTBASE UBIN(32) SYMREF;
      570      272    1   DCL GJ_BOOTSIZE UBIN(32) SYMREF;
      571      273    1   DCL GD_CHN BIT(16) SYMREF ALIGNED;
      572      274    1   DCL GH_KEEPDELTA UBIN SYMREF;
      573      275    1   DCL GH_IGNORE_TRAP SBIN SYMREF;
      574      276        /**/
      575      277        %EJECT;
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:86   
      576      278        /**/
      577      279    1           WDSIZE=SIZEW(QHDR);
      578      280    1           L66ADDR=0;
      579      281    1           CALL GIR$READCPLR(L66ADDR,ADDR(QHDR),WDSIZE);
      580      282    1           IF NOT QHDR.MLCPDUMP THEN RETURN;
      581      283        /**/
      582      284    1           L66ADDR=GJ_BOOTBASE+(SIZEC(GI$MLCPDMP_HDR)/4);
      583      285    2           CALL GMA$GETPS(PP,2048/256) WHENALTRETURN DO;
      584      286    2              RETURN;
      585      287    2              END;
      586      288    1           CALL GMA$MAP(PP,2048/256);
      587      289        /**/
      588      290    1           CHAN=16;
      589      291    2   DUMP:   DO WHILE(CHAN<1024);
      590      292    2              GH_IO.CAS.CHN=CHAN;
      591      293    2              GH_IO.CAS.FNC=%GH#IO_INPDVCID;
      592      294    2              GH_IO.DAS='0'B;
      593      295    2              GH_IGNORE_TRAP=15;
      594      296    2              CALL GHH$IO_IN(GH_IO);
      595      297    2              GH_IGNORE_TRAP=-1;
      596      298    2              IF (GH_IO.DAS&'FF'X)='21'X
      597      299    2              THEN CALL DUMP_RAM;
      598      300    2              CHAN=CHAN+16;
      599      301    2              END DUMP;
      600      302        /**/
      601      303    1           GI$MLCPDMP_HDR.MLCP='MLCP';
      602      304    1           GI$MLCPDMP_HDR.SIZE=(L66ADDR-GJ_BOOTBASE)*4;
      603      305    1           WDSIZE=SIZEW(GI$MLCPDMP_HDR);
      604      306    1           CALL GIR$WRITECPLR(GJ_BOOTBASE,ADDR(GI$MLCPDMP_HDR),WDSIZE);
      605      307    1           CALL GMA$RELPS(PP,2048/256);
      606      308    1           RETURN;
      607      309        /**/
      608      310        %EJECT;
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:87   
      609      311        /**/
      610      312    1   DUMP_RAM: PROC ALTRET;
      611      313    2   DCL 1 RAMMAP BASED(G$WINDOW1$) ALIGNED,
      612      314    2         2 LCTS CHAR(512),
      613      315    2         2 CCP,
      614      316    2           3 CCB_COPY CHAR(512),
      615      317    2           3 * CHAR(2560),
      616      318    2         2 CCB CHAR(512);
      617      319        /**/
      618      320        /* IF DEBUG CHANNEL ON THIS MLCP THEN SKIP IT */
      619      321        /**/
      620      322    2           IF GH_KEEPDELTA ~= 0
      621      323    2           THEN
      622      324    2              IF (GD_CHN & 'FC00'X) = BINBIT(CHAN*64,16) THEN RETURN;
      623      325        /**/
      624      326        /* RESET MLCP */
      625      327        /**/
      626      328    2           GH_IO.CAS.FNC=%GH#IO_OTPINTCTR;
      627      329    2           GH_IO.DAS='0'B;
      628      330    3           CALL DOIO WHENALTRETURN DO;
      629      331    3              ALTRETURN;
      630      332    3              END;
      631      333    2           GH_IO.CAS.FNC=%GH#IO_OTPCHNCTR;
      632      334    2           GH_IO.DAS='0100'X;              /* CCBLIST RESET */
      633      335    3           CALL DOIO WHENALTRETURN DO;
      634      336    3              ALTRETURN;
      635      337    3              END;
      636      338        /**/
      637      339        /* READ MLCP RAM */
      638      340        /**/
      639      341    2           GH_IOLD.CHN=CHAN;
      640      342    2           GH_IOLD.FNC=%GH#IO_IOLD;
      641      343    2           GH_IOLD.BUF$=G$WINDOW1$;
      642      344    2           GH_IOLD.BYTX=0;
      643      345    2           GH_IOLD.BUFSIZE=4096;
      644      346    3           CALL GHH$IOLD(GH_IOLD) WHENALTRETURN DO;
      645      347    3              ALTRETURN;
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:88   
      646      348    3              END;
      647      349        /**/
      648      350    2           GH_IO.CAS.FNC=%GH#IO_OTPCCBCTR;
      649      351    2           GH_IO.DAS='0'B;
      650      352    3           CALL GHH$IO(GH_IO) WHENALTRETURN DO;
      651      353    3              ALTRETURN;
      652      354    3              END;
      653      355        /**/
      654      356        /* START BLOCK MODE TRANSFER */
      655      357        /**/
      656      358    2           GH_IO.CAS.FNC=%GH#IO_OTPCHNCTR;
      657      359    2           GH_IO.DAS='0800'X;
      658      360    3           CALL DOIO WHENALTRETURN DO;
      659      361    3              ALTRETURN;
      660      362    3              END;
      661      363        /**/
      662      364        /* WAIT FOR TRANSFER TO COMPLETE */
      663      365        /**/
      664      366    2           GH_IO.CAS.FNC=%GH#IO_INPNXTCCBSTT;
      665      367    2           GH_IO.DAS='0'B;
      666      368    2           TIMEOUT=0;
      667      369    3           DO WHILE( NOT (GH_IO.DAS & '1000'X));
      668      370    3              WAIT=10000;
      669      371    4              DO WHILE(WAIT~=0);
      670      372    4                 WAIT=WAIT-1;
      671      373    4                 END;
      672      374    4              CALL GHH$IO_IN(GH_IO) WHENRETURN DO;
      673      375    4                 GH_IO.CAS.FNC=%GH#IO_INPCCBSTT;
      674      376    4                 END;
      675      377    3              TIMEOUT=TIMEOUT+1;
      676      378    3              IF TIMEOUT=0 THEN ALTRETURN;
      677      379    3              END;
      678      380        /**/
      679      381        /* WRITE DUMP TO HOST MEMORY */
      680      382        /**/
      681      383    2           GI$MLCPDMP.CHAN=CHAN*64;
      682      384    2           GI$MLCPDMP.SIZE=1024;
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:89   
      683      385    2           WDSIZE=4;                       /*SIZEW(GI$MLCPDMP)*/
      684      386    2           CALL GIR$WRITECPLR(L66ADDR,ADDR(GI$MLCPDMP),WDSIZE);
      685      387    2           L66ADDR=L66ADDR+2/* SIZEW OF HEADER INFORMATION */;
      686      388        /**/
      687      389    2           WDSIZE=512;
      688      390    2           RAMMAP.CCP.CCB_COPY = RAMMAP.CCB; /* Squeeze out the CCP area */
      689      391    2           CALL GIR$WRITECPLR(L66ADDR,G$WINDOW1$,WDSIZE);
      690      392    2           L66ADDR=L66ADDR+256;
      691      393    2           RETURN;
      692      394        /**/
      693      395    2   END DUMP_RAM;
      694      396        /**/
      695      397        /**/
      696      398        /**/
      697      399    1   DOIO:   PROC ALTRET;
      698      400        /**/
      699      401    2           TIMEOUT=10000;
      700      402    3           DO WHILE(TIMEOUT>0);
      701      403    4              CALL GHH$IO(GH_IO) WHENRETURN DO;
      702      404    4                 TIMEOUT=0;
      703      405    4                 END;
      704      406    4              WHENALTRETURN DO;
      705      407    4                 TIMEOUT=TIMEOUT-1;
      706      408    4                 IF TIMEOUT=0 THEN ALTRETURN;
      707      409    4                 END;
      708      410    3              END;
      709      411        /**/
      710      412    2   END DOIO;
      711      413        /**/
      712      414    1   END GIR$MLCPDUMP;
      713      415        %EOD;

PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:90   
--  Include file information  --

   GH_IOFNC_E.:E05TOU  is referenced.
   GH_HARDWARE_M.:E05TOU  is referenced.
   GI_DATA_M.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  was found in the system file and is never referenced.
   GT_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   KI_CP6.:E05TOU  was found in the system file and is never referenced.
   GF_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GM_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GU_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GJ_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GH_LCP6_M.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure GIR$MLCPDUMP.

   Procedure GIR$MLCPDUMP requires 539 words for executable code.
   Procedure GIR$MLCPDUMP requires 46 words of local(AUTO) storage.

PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:91   

 Object Unit name= GIR$MLCPDUMP                               File name= GIR$SCREECH.:E05TOU
 UTS= JUL 29 '97 21:49:33.64 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_LCP6_SYSTEM                               Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size HexSiz  Section name
    0  RoData even  UTS      2      2  GIR$MLCPDUMP
    1   Proc  even  none   539    21B  GIR$MLCPDUMP

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect HexLoc Primary Altret sequence   type   Parms  Name
     1      0   yes            yes      Std        0  GIR$MLCPDUMP

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       3 GIR$READCPLR
 yes     yes           Std       2 GMA$GETPS
 yes     yes           Std       1 GHH$IO_IN
         yes           Std       3 GIR$WRITECPLR
 yes     yes           Std       2 GMA$MAP
 yes     yes           Std       2 GMA$RELPS
 yes     yes           Std       1 GHH$IOLD
 yes     yes           Std       1 GHH$IO
                       nStd      0 X6A_AUTO_0
                       nStd      0 X6A_ARET
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:92   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     G$WINDOW1$                            GJ_BOOTBASE                           GD_CHN
     GH_KEEPDELTA                          GH_IGNORE_TRAP                   r    G$ROS$
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:93   


      524        1        /*T***********************************************************/
      525        2        /*T*                                                         */
      526        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      527        4        /*T*                                                         */
      528        5        /*T***********************************************************/
      529        6        GIR$MLCPDUMP: PROC;

      6   1 000000  D380 0000 0000  xent GIR$MLCPDUMP    LNJ,B5   X6A_AUTO_0
          1 000003       002E 0000                       DC       46,0

      530        7        /**/
      531        8        /*D*    NAME:  GIR$MLCPDUMP
      532        9                CALL:  CALL GIR$MLCPDUMP
      533       10                DESCRIPTION:
      534       11                This routine is called from GJS$STEP after the last booted
      535       12                in user has be set up.  If the boot calls for an MLCP dump
      536       13                the RAM from all MLCPs is dumped into the host memory that
      537       14                contained the boot image.
      538       15        */
      539       16        /**/
      540       17        %INCLUDE GI_DATA_M;
      541       45        %INCLUDE GH_HARDWARE_M;
      542      143        %INCLUDE GH_IOFNC_E;
      543      212    1   DCL GHH$IO ENTRY(1) ALTRET;
      544      213    1   DCL GHH$IO_IN ENTRY(1) ALTRET;
      545      214    1   DCL GHH$IOLD ENTRY(1) ALTRET;
      546      215    1   DCL GIR$READCPLR ENTRY(3);
      547      216    1   DCL GIR$WRITECPLR ENTRY(3);
      548      217    1   DCL GMA$GETPS ENTRY(2) ALTRET;
      549      218    1   DCL GMA$MAP ENTRY(2) ALTRET;
      550      219    1   DCL GMA$RELPS ENTRY(2) ALTRET;
      551      220        /**/
      552      221    1   DCL 1 QHDR ALIGNED,
      553      222    1         2 * UBIN(32),
      554      223    1         2 MLCPDUMP BIT(1),                /* SET IF MLCP DUMP REQUESTED */
      555      224    1         2 * BIT(31);
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:94   
      556      225    1   DCL CHAN UBIN;
      557      226        %GH_IO (FPTN=GH_IO,STCLASS=AUTO);
      558      242        %GH_IOLD (FPTN=GH_IOLD,STCLASS=AUTO);
      559      257    1   DCL TIMEOUT SBIN;
      560      258    1   DCL WAIT SBIN;
      561      259        %GI$MLCPDMP (FPTN=GI$MLCPDMP,STCLASS=AUTO,DSIZE=1);
      562      262        %GI$MLCPDMP_HDR (FPTN=GI$MLCPDMP_HDR,STCLASS=AUTO);
      563      265    1   DCL PP UBIN;
      564      266    1   DCL L66ADDR UBIN(32);
      565      267    1   DCL L6ADDR UBIN(32);
      566      268    1   DCL WDSIZE UBIN(32);
      567      269        /**/
      568      270    1   DCL G$WINDOW1$ PTR SYMREF;
      569      271    1   DCL GJ_BOOTBASE UBIN(32) SYMREF;
      570      272    1   DCL GJ_BOOTSIZE UBIN(32) SYMREF;
      571      273    1   DCL GD_CHN BIT(16) SYMREF ALIGNED;
      572      274    1   DCL GH_KEEPDELTA UBIN SYMREF;
      573      275    1   DCL GH_IGNORE_TRAP SBIN SYMREF;
      574      276        /**/
      575      277        %EJECT;
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:95   
      576      278        /**/
      577      279    1           WDSIZE=SIZEW(QHDR);

    279   1 000005  8CF0 0000 0004                       LDI      4,IMO
          1 000008  8D47 0020                            SDI      WDSIZE,AUTO

      578      280    1           L66ADDR=0;

    280   1 00000A  8747 001C                            CL       L66ADDR,AUTO
          1 00000C  8747 001D                            CL       L66ADDR+1,AUTO

      579      281    1           CALL GIR$READCPLR(L66ADDR,ADDR(QHDR),WDSIZE);

    281   1 00000E  EBC7 0004                            LAB,B6   QHDR,AUTO
          1 000010  EFC7 0026                            STB,B6   WDSIZE+6,AUTO
          1 000012  DBC7 0020                            LAB,B5   WDSIZE,AUTO
          1 000014  DFC7 002C                            STB,B5   WDSIZE+12,AUTO
          1 000016  CBC7 0026                            LAB,B4   WDSIZE+6,AUTO
          1 000018  CFC7 002A                            STB,B4   WDSIZE+10,AUTO
          1 00001A  BBC7 001C                            LAB,B3   L66ADDR,AUTO
          1 00001C  BFC7 0028                            STB,B3   WDSIZE+8,AUTO
          1 00001E  BBC7 0028                            LAB,B3   WDSIZE+8,AUTO
          1 000020  CBF0 0300                            LAB,B4   768,IMO
          1 000022  E380 0000 0000  xent                 LNJ,B6   GIR$READCPLR
          1 000025       0001                            DC       s:282,PREL

      580      282    1           IF NOT QHDR.MLCPDUMP THEN RETURN;

    282   1 000026  89C7 0006                            CMZ      QHDR+2,AUTO
          1 000028  0801 0004                            BAL      s:284,PREL

    282   1 00002A  C380 0000 0000  xent                 LNJ,B4   X6A_ARET

      581      283        /**/
      582      284    1           L66ADDR=GJ_BOOTBASE+(SIZEC(GI$MLCPDMP_HDR)/4);

    284   1 00002D  8C80 0000 0000  xsym                 LDI      GJ_BOOTBASE
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:96   
          1 000030  8470 0000 0002                       AID      2,IMO
          1 000033  8D47 001C                            SDI      L66ADDR,AUTO

      583      285    2           CALL GMA$GETPS(PP,2048/256) WHENALTRETURN DO;

    285   1 000035  EBF0 0008                            LAB,B6   8,IMO
          1 000037  EFC7 0028                            STB,B6   WDSIZE+8,AUTO
          1 000039  DBC7 001B                            LAB,B5   PP,AUTO
          1 00003B  DFC7 0026                            STB,B5   WDSIZE+6,AUTO
          1 00003D  BBC7 0026                            LAB,B3   WDSIZE+6,AUTO
          1 00003F  CBF0 0200                            LAB,B4   512,IMO
          1 000041  E380 0000 0000  xent                 LNJ,B6   GMA$GETPS
          1 000044       0003                            DC       s:286,PREL
          1 000045  0F81 0004                            B        s:288,PREL

      584      286    2              RETURN;

    286   1 000047  C380 0000 0000  xent                 LNJ,B4   X6A_ARET

      585      287    2              END;
      586      288    1           CALL GMA$MAP(PP,2048/256);

    288   1 00004A  EBF0 0008                            LAB,B6   8,IMO
          1 00004C  EFC7 0028                            STB,B6   WDSIZE+8,AUTO
          1 00004E  DBC7 001B                            LAB,B5   PP,AUTO
          1 000050  DFC7 0026                            STB,B5   WDSIZE+6,AUTO
          1 000052  BBC7 0026                            LAB,B3   WDSIZE+6,AUTO
          1 000054  CBF0 0200                            LAB,B4   512,IMO
          1 000056  E380 0000 0000  xent                 LNJ,B6   GMA$MAP
          1 000059       0001                            DC       s:290,PREL

      587      289        /**/
      588      290    1           CHAN=16;

    290   1 00005A  6C10                                 LDV,R6   16
          1 00005B  EF47 0008                            STR,R6   CHAN,AUTO

PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:97   
      589      291    2   DUMP:   DO WHILE(CHAN<1024);

    291   1 00005D  E970 0400            DUMP            CMR,R6   1024,IMO
          1 00005F  0281 0034                            BGE      s:303,PREL

      590      292    2              GH_IO.CAS.CHN=CHAN;

    292   1 000061  E847 0008                            LDR,R6   CHAN,AUTO
          1 000063  6006                                 SOL,R6   6
          1 000064  EAC7 0009                            SRM,R6,'FFC0'X    GH_IO,AUTO
          1 000066       FFC0

      591      293    2              GH_IO.CAS.FNC=%GH#IO_INPDVCID;

    293   1 000067  6C26                                 LDV,R6   38
          1 000068  EAC7 0009                            SRM,R6,'003F'X    GH_IO,AUTO
          1 00006A       003F

      592      294    2              GH_IO.DAS='0'B;

    294   1 00006B  8747 000A                            CL       GH_IO+1,AUTO

      593      295    2              GH_IGNORE_TRAP=15;

    295   1 00006D  5C0F                                 LDV,R5   15
          1 00006E  DF00 0000 0000  xsym                 STR,R5   GH_IGNORE_TRAP

      594      296    2              CALL GHH$IO_IN(GH_IO);

    296   1 000071  EBC7 0009                            LAB,B6   GH_IO,AUTO
          1 000073  EFC7 0026                            STB,B6   WDSIZE+6,AUTO
          1 000075  BBC7 0026                            LAB,B3   WDSIZE+6,AUTO
          1 000077  CBF0 0100                            LAB,B4   256,IMO
          1 000079  E380 0000 0000  xent                 LNJ,B6   GHH$IO_IN
          1 00007C       0001                            DC       s:297,PREL

      595      297    2              GH_IGNORE_TRAP=-1;
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:98   

    297   1 00007D  8900 0000 0000  xsym                 LBT,'FFFF'X       GH_IGNORE_TRAP
    297   1 000080       FFFF

      596      298    2              IF (GH_IO.DAS&'FF'X)='21'X

    298   1 000081  E847 000A                            LDR,R6   GH_IO+1,AUTO
          1 000083  E570 FF00                            AND,R6   -256,IMO
          1 000085  E970 2100                            CMR,R6   8448,IMO
          1 000087  0981 0004                            BNE      s:300,PREL

      597      299    2              THEN CALL DUMP_RAM;

    299   1 000089  E3C0 004B                            LNJ,B6   s:0,PREL
          1 00008B       0001                            DC       s:300,PREL

      598      300    2              CHAN=CHAN+16;

    300   1 00008C  E847 0008                            LDR,R6   CHAN,AUTO
          1 00008E  6E10                                 ADV,R6   16
          1 00008F  EF47 0008                            STR,R6   CHAN,AUTO

      599      301    2              END DUMP;

    301   1 000091  E970 0400                            CMR,R6   1024,IMO
          1 000093  024E                                 BL       s:292,SPREL

      600      302        /**/
      601      303    1           GI$MLCPDMP_HDR.MLCP='MLCP';

    303   1 000094  AB80 0000 0000  00                   LAB,B2   0
          1 000097  2C00                                 LDV,R2   0
          1 000098  6C04                                 LDV,R6   4
          1 000099  BB87                                 LAB,B3   ,AUTO
          1 00009A  3C2E                                 LDV,R3   46
          1 00009B  0008                                 MMM

PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:99   
      602      304    1           GI$MLCPDMP_HDR.SIZE=(L66ADDR-GJ_BOOTBASE)*4;

    304   1 00009C  8CC7 001C                            LDI      L66ADDR,AUTO
          1 00009E  8480 0000 0000  xsym                 SID      GJ_BOOTBASE
          1 0000A1  7082                                 DOL,R7   2
          1 0000A2  8D47 0019                            SDI      GI$MLCPDMP_HDR+2,AUTO

      603      305    1           WDSIZE=SIZEW(GI$MLCPDMP_HDR);

    305   1 0000A4  8CF0 0000 0004                       LDI      4,IMO
          1 0000A7  8D47 0020                            SDI      WDSIZE,AUTO

      604      306    1           CALL GIR$WRITECPLR(GJ_BOOTBASE,ADDR(GI$MLCPDMP_HDR),WDSIZE);

    306   1 0000A9  EBC7 0017                            LAB,B6   GI$MLCPDMP_HDR,AUTO
          1 0000AB  EFC7 0026                            STB,B6   WDSIZE+6,AUTO
          1 0000AD  DBC7 0020                            LAB,B5   WDSIZE,AUTO
          1 0000AF  DFC7 002C                            STB,B5   WDSIZE+12,AUTO
          1 0000B1  CBC7 0026                            LAB,B4   WDSIZE+6,AUTO
          1 0000B3  CFC7 002A                            STB,B4   WDSIZE+10,AUTO
          1 0000B5  AB80 0000 0000  xsym                 LAB,B2   GJ_BOOTBASE
          1 0000B8  AFC7 0028                            STB,B2   WDSIZE+8,AUTO
          1 0000BA  BBC7 0028                            LAB,B3   WDSIZE+8,AUTO
          1 0000BC  CBF0 0300                            LAB,B4   768,IMO
          1 0000BE  E380 0000 0000  xent                 LNJ,B6   GIR$WRITECPLR
          1 0000C1       0001                            DC       s:307,PREL

      605      307    1           CALL GMA$RELPS(PP,2048/256);

    307   1 0000C2  EBF0 0008                            LAB,B6   8,IMO
          1 0000C4  EFC7 0028                            STB,B6   WDSIZE+8,AUTO
          1 0000C6  DBC7 001B                            LAB,B5   PP,AUTO
          1 0000C8  DFC7 0026                            STB,B5   WDSIZE+6,AUTO
          1 0000CA  BBC7 0026                            LAB,B3   WDSIZE+6,AUTO
          1 0000CC  CBF0 0200                            LAB,B4   512,IMO
          1 0000CE  E380 0000 0000  xent                 LNJ,B6   GMA$RELPS
          1 0000D1       0001                            DC       s:308,PREL
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:100  

      606      308    1           RETURN;

    308   1 0000D2  C380 0000 0000  xent                 LNJ,B4   X6A_ARET

      607      309        /**/
      608      310        %EJECT;
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:101  
      609      311        /**/
      610      312    1   DUMP_RAM: PROC ALTRET;

    312   1 0000D5  EFC7 0022            DUMP_RAM        STB,B6   WDSIZE+2,AUTO

      611      313    2   DCL 1 RAMMAP BASED(G$WINDOW1$) ALIGNED,
      612      314    2         2 LCTS CHAR(512),
      613      315    2         2 CCP,
      614      316    2           3 CCB_COPY CHAR(512),
      615      317    2           3 * CHAR(2560),
      616      318    2         2 CCB CHAR(512);
      617      319        /**/
      618      320        /* IF DEBUG CHANNEL ON THIS MLCP THEN SKIP IT */
      619      321        /**/
      620      322    2           IF GH_KEEPDELTA ~= 0

    322   1 0000D7  E800 0000 0000  xsym                 LDR,R6   GH_KEEPDELTA
          1 0000DA  6901 0010                            BEZ,R6   s:328,PREL

      621      323    2           THEN
      622      324    2              IF (GD_CHN & 'FC00'X) = BINBIT(CHAN*64,16) THEN RETURN;

    324   1 0000DC  D800 0000 0000  xsym                 LDR,R5   GD_CHN
          1 0000DF  D570 FC00                            AND,R5   -1024,IMO
          1 0000E1  C847 0008                            LDR,R4   CHAN,AUTO
          1 0000E3  4006                                 SOL,R4   6
          1 0000E4  D954                                 CMR,R5   R4
          1 0000E5  0981 0005                            BNE      s:328,PREL

    324   1 0000E7  ECC7 0022                            LDB,B6   WDSIZE+2,AUTO
          1 0000E9  C3C6 0001                            LNJ,B4   1,B6

      623      325        /**/
      624      326        /* RESET MLCP */
      625      327        /**/
      626      328    2           GH_IO.CAS.FNC=%GH#IO_OTPINTCTR;

PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:102  
    328   1 0000EB  5C03                                 LDV,R5   3
          1 0000EC  DAC7 0009                            SRM,R5,'003F'X    GH_IO,AUTO
          1 0000EE       003F

      627      329    2           GH_IO.DAS='0'B;

    329   1 0000EF  8747 000A                            CL       GH_IO+1,AUTO

      628      330    3           CALL DOIO WHENALTRETURN DO;

    330   1 0000F1  E3C0 0100                            LNJ,B6   s:0,PREL
          1 0000F3       0003                            DC       s:331,PREL
          1 0000F4  0F81 0005                            B        s:333,PREL

      629      331    3              ALTRETURN;

    331   1 0000F6  ECC7 0022                            LDB,B6   WDSIZE+2,AUTO
          1 0000F8  B806                                 LDR,R3   ,B6
          1 0000F9  C3B6                                 LNJ,B4   ,B6,R3

      630      332    3              END;
      631      333    2           GH_IO.CAS.FNC=%GH#IO_OTPCHNCTR;

    333   1 0000FA  6C05                                 LDV,R6   5
          1 0000FB  EAC7 0009                            SRM,R6,'003F'X    GH_IO,AUTO
          1 0000FD       003F

      632      334    2           GH_IO.DAS='0100'X;              /* CCBLIST RESET */

    334   1 0000FE  D870 0100                            LDR,R5   256,IMO
          1 000100  DF47 000A                            STR,R5   GH_IO+1,AUTO

      633      335    3           CALL DOIO WHENALTRETURN DO;

    335   1 000102  E3C0 00EF                            LNJ,B6   s:0,PREL
          1 000104       0003                            DC       s:336,PREL
          1 000105  0F81 0005                            B        s:341,PREL
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:103  

      634      336    3              ALTRETURN;

    336   1 000107  ECC7 0022                            LDB,B6   WDSIZE+2,AUTO
          1 000109  B806                                 LDR,R3   ,B6
          1 00010A  C3B6                                 LNJ,B4   ,B6,R3

      635      337    3              END;
      636      338        /**/
      637      339        /* READ MLCP RAM */
      638      340        /**/
      639      341    2           GH_IOLD.CHN=CHAN;

    341   1 00010B  E847 0008                            LDR,R6   CHAN,AUTO
          1 00010D  6006                                 SOL,R6   6
          1 00010E  EAC7 000B                            SRM,R6,'FFC0'X    GH_IOLD,AUTO
          1 000110       FFC0

      640      342    2           GH_IOLD.FNC=%GH#IO_IOLD;

    342   1 000111  6C09                                 LDV,R6   9
          1 000112  EAC7 000B                            SRM,R6,'003F'X    GH_IOLD,AUTO
          1 000114       003F

      641      343    2           GH_IOLD.BUF$=G$WINDOW1$;

    343   1 000115  EC80 0000 0000  xsym                 LDB,B6   G$WINDOW1$
          1 000118  EFC7 000C                            STB,B6   GH_IOLD+1,AUTO

      642      344    2           GH_IOLD.BYTX=0;

    344   1 00011A  8747 000E                            CL       GH_IOLD+3,AUTO

      643      345    2           GH_IOLD.BUFSIZE=4096;

    345   1 00011C  D870 1000                            LDR,R5   4096,IMO
          1 00011E  DF47 000F                            STR,R5   GH_IOLD+4,AUTO
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:104  

      644      346    3           CALL GHH$IOLD(GH_IOLD) WHENALTRETURN DO;

    346   1 000120  DBC7 000B                            LAB,B5   GH_IOLD,AUTO
          1 000122  DFC7 0026                            STB,B5   WDSIZE+6,AUTO
          1 000124  BBC7 0026                            LAB,B3   WDSIZE+6,AUTO
          1 000126  CBF0 0100                            LAB,B4   256,IMO
          1 000128  E380 0000 0000  xent                 LNJ,B6   GHH$IOLD
          1 00012B       0003                            DC       s:347,PREL
          1 00012C  0F81 0005                            B        s:350,PREL

      645      347    3              ALTRETURN;

    347   1 00012E  ECC7 0022                            LDB,B6   WDSIZE+2,AUTO
          1 000130  B806                                 LDR,R3   ,B6
          1 000131  C3B6                                 LNJ,B4   ,B6,R3

      646      348    3              END;
      647      349        /**/
      648      350    2           GH_IO.CAS.FNC=%GH#IO_OTPCCBCTR;

    350   1 000132  6C0F                                 LDV,R6   15
          1 000133  EAC7 0009                            SRM,R6,'003F'X    GH_IO,AUTO
          1 000135       003F

      649      351    2           GH_IO.DAS='0'B;

    351   1 000136  8747 000A                            CL       GH_IO+1,AUTO

      650      352    3           CALL GHH$IO(GH_IO) WHENALTRETURN DO;

    352   1 000138  EBC7 0009                            LAB,B6   GH_IO,AUTO
          1 00013A  EFC7 0026                            STB,B6   WDSIZE+6,AUTO
          1 00013C  BBC7 0026                            LAB,B3   WDSIZE+6,AUTO
          1 00013E  CBF0 0100                            LAB,B4   256,IMO
          1 000140  E380 0000 0000  xent                 LNJ,B6   GHH$IO
          1 000143       0003                            DC       s:353,PREL
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:105  
          1 000144  0F81 0005                            B        s:358,PREL

      651      353    3              ALTRETURN;

    353   1 000146  ECC7 0022                            LDB,B6   WDSIZE+2,AUTO
          1 000148  B806                                 LDR,R3   ,B6
          1 000149  C3B6                                 LNJ,B4   ,B6,R3

      652      354    3              END;
      653      355        /**/
      654      356        /* START BLOCK MODE TRANSFER */
      655      357        /**/
      656      358    2           GH_IO.CAS.FNC=%GH#IO_OTPCHNCTR;

    358   1 00014A  6C05                                 LDV,R6   5
          1 00014B  EAC7 0009                            SRM,R6,'003F'X    GH_IO,AUTO
          1 00014D       003F

      657      359    2           GH_IO.DAS='0800'X;

    359   1 00014E  D870 0800                            LDR,R5   2048,IMO
          1 000150  DF47 000A                            STR,R5   GH_IO+1,AUTO

      658      360    3           CALL DOIO WHENALTRETURN DO;

    360   1 000152  E3C0 009F                            LNJ,B6   s:0,PREL
          1 000154       0003                            DC       s:361,PREL
          1 000155  0F81 0005                            B        s:366,PREL

      659      361    3              ALTRETURN;

    361   1 000157  ECC7 0022                            LDB,B6   WDSIZE+2,AUTO
          1 000159  B806                                 LDR,R3   ,B6
          1 00015A  C3B6                                 LNJ,B4   ,B6,R3

      660      362    3              END;
      661      363        /**/
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:106  
      662      364        /* WAIT FOR TRANSFER TO COMPLETE */
      663      365        /**/
      664      366    2           GH_IO.CAS.FNC=%GH#IO_INPNXTCCBSTT;

    366   1 00015B  6C1A                                 LDV,R6   26
          1 00015C  EAC7 0009                            SRM,R6,'003F'X    GH_IO,AUTO
          1 00015E       003F

      665      367    2           GH_IO.DAS='0'B;

    367   1 00015F  8747 000A                            CL       GH_IO+1,AUTO

      666      368    2           TIMEOUT=0;

    368   1 000161  8747 0010                            CL       TIMEOUT,AUTO

      667      369    3           DO WHILE( NOT (GH_IO.DAS & '1000'X));

    369   1 000163  0F81 0026                            B        s:379,PREL

      668      370    3              WAIT=10000;

    370   1 000165  E870 2710                            LDR,R6   10000,IMO
          1 000167  EF47 0011                            STR,R6   WAIT,AUTO

      669      371    4              DO WHILE(WAIT~=0);

    371   1 000169  6901 0006                            BEZ,R6   s:374,PREL

      670      372    4                 WAIT=WAIT-1;

    372   1 00016B  88C7 0011                            DEC      WAIT,AUTO

      671      373    4                 END;

    373   1 00016D  E847 0011                            LDR,R6   WAIT,AUTO
          1 00016F  69FC                                 BNEZ,R6  s:372,SPREL
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:107  

      672      374    4              CALL GHH$IO_IN(GH_IO) WHENRETURN DO;

    374   1 000170  EBC7 0009                            LAB,B6   GH_IO,AUTO
          1 000172  EFC7 0026                            STB,B6   WDSIZE+6,AUTO
          1 000174  BBC7 0026                            LAB,B3   WDSIZE+6,AUTO
          1 000176  CBF0 0100                            LAB,B4   256,IMO
          1 000178  E380 0000 0000  xent                 LNJ,B6   GHH$IO_IN
          1 00017B       0005                            DC       s:377,PREL

      673      375    4                 GH_IO.CAS.FNC=%GH#IO_INPCCBSTT;

    375   1 00017C  6C18                                 LDV,R6   24
          1 00017D  EAC7 0009                            SRM,R6,'003F'X    GH_IO,AUTO
          1 00017F       003F

      674      376    4                 END;

      675      377    3              TIMEOUT=TIMEOUT+1;

    377   1 000180  8AC7 0010                            INC      TIMEOUT,AUTO

      676      378    3              IF TIMEOUT=0 THEN ALTRETURN;

    378   1 000182  E847 0010                            LDR,R6   TIMEOUT,AUTO
          1 000184  6981 0005                            BNEZ,R6  s:379,PREL

    378   1 000186  ECC7 0022                            LDB,B6   WDSIZE+2,AUTO
          1 000188  B806                                 LDR,R3   ,B6
          1 000189  C3B6                                 LNJ,B4   ,B6,R3

      677      379    3              END;

    379   1 00018A  E847 000A                            LDR,R6   GH_IO+1,AUTO
          1 00018C  E570 1000                            AND,R6   4096,IMO
          1 00018E  6957                                 BEZ,R6   s:370,SPREL

PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:108  
      678      380        /**/
      679      381        /* WRITE DUMP TO HOST MEMORY */
      680      382        /**/
      681      383    2           GI$MLCPDMP.CHAN=CHAN*64;

    383   1 00018F  F847 0008                            LDR,R7   CHAN,AUTO
          1 000191  6C00                                 LDV,R6   0
          1 000192  7086                                 DOL,R7   6
          1 000193  8D47 0012                            SDI      GI$MLCPDMP,AUTO

      682      384    2           GI$MLCPDMP.SIZE=1024;

    384   1 000195  8CF0 0000 0400                       LDI      1024,IMO
          1 000198  8D47 0014                            SDI      GI$MLCPDMP+2,AUTO

      683      385    2           WDSIZE=4;                       /*SIZEW(GI$MLCPDMP)*/

    385   1 00019A  8CF0 0000 0004                       LDI      4,IMO
          1 00019D  8D47 0020                            SDI      WDSIZE,AUTO

      684      386    2           CALL GIR$WRITECPLR(L66ADDR,ADDR(GI$MLCPDMP),WDSIZE);

    386   1 00019F  EBC7 0012                            LAB,B6   GI$MLCPDMP,AUTO
          1 0001A1  EFC7 0026                            STB,B6   WDSIZE+6,AUTO
          1 0001A3  DBC7 0020                            LAB,B5   WDSIZE,AUTO
          1 0001A5  DFC7 002C                            STB,B5   WDSIZE+12,AUTO
          1 0001A7  CBC7 0026                            LAB,B4   WDSIZE+6,AUTO
          1 0001A9  CFC7 002A                            STB,B4   WDSIZE+10,AUTO
          1 0001AB  BBC7 001C                            LAB,B3   L66ADDR,AUTO
          1 0001AD  BFC7 0028                            STB,B3   WDSIZE+8,AUTO
          1 0001AF  BBC7 0028                            LAB,B3   WDSIZE+8,AUTO
          1 0001B1  CBF0 0300                            LAB,B4   768,IMO
          1 0001B3  E380 0000 0000  xent                 LNJ,B6   GIR$WRITECPLR
          1 0001B6       0001                            DC       s:387,PREL

      685      387    2           L66ADDR=L66ADDR+2/* SIZEW OF HEADER INFORMATION */;

PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:109  
    387   1 0001B7  8CC7 001C                            LDI      L66ADDR,AUTO
          1 0001B9  8470 0000 0002                       AID      2,IMO
          1 0001BC  8D47 001C                            SDI      L66ADDR,AUTO

      686      388        /**/
      687      389    2           WDSIZE=512;

    389   1 0001BE  8CF0 0000 0200                       LDI      512,IMO
          1 0001C1  8D47 0020                            SDI      WDSIZE,AUTO

      688      390    2           RAMMAP.CCP.CCB_COPY = RAMMAP.CCB; /* Squeeze out the CCP area */

    390   1 0001C3  AC80 0000 0000  xsym                 LDB,B2   G$WINDOW1$
          1 0001C6  ABC2 0700                            LAB,B2   1792,B2
          1 0001C8  2C00                                 LDV,R2   0
          1 0001C9  E870 0200                            LDR,R6   512,IMO
          1 0001CB  BC80 0000 0000  xsym                 LDB,B3   G$WINDOW1$
          1 0001CE  BBC3 0100                            LAB,B3   256,B3
          1 0001D0  3C00                                 LDV,R3   0
          1 0001D1  0008                                 MMM

      689      391    2           CALL GIR$WRITECPLR(L66ADDR,G$WINDOW1$,WDSIZE);

    391   1 0001D2  EBC7 0020                            LAB,B6   WDSIZE,AUTO
          1 0001D4  EFC7 002A                            STB,B6   WDSIZE+10,AUTO
          1 0001D6  DB80 0000 0000  xsym                 LAB,B5   G$WINDOW1$
          1 0001D9  DFC7 0028                            STB,B5   WDSIZE+8,AUTO
          1 0001DB  CBC7 001C                            LAB,B4   L66ADDR,AUTO
          1 0001DD  CFC7 0026                            STB,B4   WDSIZE+6,AUTO
          1 0001DF  BBC7 0026                            LAB,B3   WDSIZE+6,AUTO
          1 0001E1  CBF0 0300                            LAB,B4   768,IMO
          1 0001E3  E380 0000 0000  xent                 LNJ,B6   GIR$WRITECPLR
          1 0001E6       0001                            DC       s:392,PREL

      690      392    2           L66ADDR=L66ADDR+256;

    392   1 0001E7  8CC7 001C                            LDI      L66ADDR,AUTO
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:110  
          1 0001E9  8470 0000 0100                       AID      256,IMO
          1 0001EC  8D47 001C                            SDI      L66ADDR,AUTO

      691      393    2           RETURN;

    393   1 0001EE  ECC7 0022                            LDB,B6   WDSIZE+2,AUTO
          1 0001F0  C3C6 0001                            LNJ,B4   1,B6

      692      394        /**/
      693      395    2   END DUMP_RAM;
      694      396        /**/
      695      397        /**/
      696      398        /**/
      697      399    1   DOIO:   PROC ALTRET;

    399   1 0001F2  EFC7 0024            DOIO            STB,B6   WDSIZE+4,AUTO

      698      400        /**/
      699      401    2           TIMEOUT=10000;

    401   1 0001F4  E870 2710                            LDR,R6   10000,IMO
          1 0001F6  EF47 0010                            STR,R6   TIMEOUT,AUTO

      700      402    3           DO WHILE(TIMEOUT>0);

    402   1 0001F8  6A81 001E                            BLEZ,R6  s:412,PREL

      701      403    4              CALL GHH$IO(GH_IO) WHENRETURN DO;

    403   1 0001FA  EBC7 0009                            LAB,B6   GH_IO,AUTO
          1 0001FC  EFC7 0026                            STB,B6   WDSIZE+6,AUTO
          1 0001FE  BBC7 0026                            LAB,B3   WDSIZE+6,AUTO
          1 000200  CBF0 0100                            LAB,B4   256,IMO
          1 000202  E380 0000 0000  xent                 LNJ,B6   GHH$IO
          1 000205       0005                            DC       s:407,PREL

      702      404    4                 TIMEOUT=0;
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:111  

    404   1 000206  8747 0010                            CL       TIMEOUT,AUTO

      703      405    4                 END;

    405   1 000208  0F81 000B                            B        s:410,PREL

      704      406    4              WHENALTRETURN DO;

      705      407    4                 TIMEOUT=TIMEOUT-1;

    407   1 00020A  88C7 0010                            DEC      TIMEOUT,AUTO

      706      408    4                 IF TIMEOUT=0 THEN ALTRETURN;

    408   1 00020C  E847 0010                            LDR,R6   TIMEOUT,AUTO
          1 00020E  6981 0005                            BNEZ,R6  s:410,PREL

    408   1 000210  ECC7 0024                            LDB,B6   WDSIZE+4,AUTO
          1 000212  B806                                 LDR,R3   ,B6
          1 000213  C3B6                                 LNJ,B4   ,B6,R3

      707      409    4                 END;
      708      410    3              END;

    410   1 000214  E847 0010                            LDR,R6   TIMEOUT,AUTO
          1 000216  6A64                                 BGZ,R6   s:403,SPREL

      709      411        /**/
      710      412    2   END DOIO;

    412   1 000217  ECC7 0024                            LDB,B6   WDSIZE+4,AUTO
          1 000219  C3C6 0001                            LNJ,B4   1,B6
      711      413        /**/
      712      414    1   END GIR$MLCPDUMP;
      713      415        %EOD;

PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:112  
--  Include file information  --

   GH_IOFNC_E.:E05TOU  is referenced.
   GH_HARDWARE_M.:E05TOU  is referenced.
   GI_DATA_M.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  was found in the system file and is never referenced.
   GT_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   KI_CP6.:E05TOU  was found in the system file and is never referenced.
   GF_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GM_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GU_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GJ_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GH_LCP6_M.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure GIR$MLCPDUMP.
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:113  

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     8-0-0/w UBIN(16)    r     1 CHAN                       9-0-0/w STRC(32)    r     1 GH_IO
     B-0-0/w STRC(80)    r     1 GH_IOLD                   12-0-0/c STRC(72)    r     1 GI$MLCPDMP
    17-0-0/c STRC(64)    r     1 GI$MLCPDMP_HDR            1C-0-0/w UBIN(32)    r     1 L66ADDR
    1B-0-0/w UBIN(16)    r     1 PP                         4-0-0/w STRC(64)    r     1 QHDR
    10-0-0/w SBIN(16)    r     1 TIMEOUT                   11-0-0/w SBIN(16)    r     1 WAIT
    20-0-0/w UBIN(32)    r     1 WDSIZE

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 G$WINDOW1$                 0-0-0/w BIT (16)    r     1 GD_CHN
     0-0-0/w SBIN(16)    r     1 GH_IGNORE_TRAP             0-0-0/w UBIN(16)    r     1 GH_KEEPDELTA
     0-0-0/w UBIN(32)    r     1 GJ_BOOTBASE

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(32768) r     1 RAMMAP


   Procedure GIR$MLCPDUMP requires 539 words for executable code.
   Procedure GIR$MLCPDUMP requires 46 words of local(AUTO) storage.
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:114  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:115  
          MINI XREF LISTING

CHAN
       225**DCL       290<<ASSIGN    291>>DOWHILE   292>>ASSIGN    300<<ASSIGN    300>>ASSIGN    324>>IF
       341>>ASSIGN    383>>ASSIGN
DOIO
       399**PROC      330--CALL      335--CALL      360--CALL
DUMP_RAM
       312**PROC      299--CALL
G$WINDOW1$
       270**DCL       313--IMP-PTR   343>>ASSIGN    390>>ASSIGN    390>>ASSIGN    391<>CALL
GD_CHN
       273**DCL       324>>IF
GHH$IO
       212**DCL-ENT   352--CALL      403--CALL
GHH$IOLD
       214**DCL-ENT   346--CALL
GHH$IO_IN
       213**DCL-ENT   296--CALL      374--CALL
GH_IGNORE_TRAP
       275**DCL       295<<ASSIGN    297<<ASSIGN
GH_IO
       237**DCL       296<>CALL      352<>CALL      374<>CALL      403<>CALL
GH_IO.CAS.CHN
       237**DCL       237--REDEF     292<<ASSIGN
GH_IO.CAS.FNC
       238**DCL       293<<ASSIGN    328<<ASSIGN    333<<ASSIGN    350<<ASSIGN    358<<ASSIGN    366<<ASSIGN
       375<<ASSIGN
GH_IO.DAS
       238**DCL       239--REDEF     240--REDEF     294<<ASSIGN    298>>IF        329<<ASSIGN    334<<ASSIGN
       351<<ASSIGN    359<<ASSIGN    367<<ASSIGN    369>>DOWHILE
GH_IOLD
       253**DCL       346<>CALL
GH_IOLD.BUF$
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:116  
       254**DCL       343<<ASSIGN
GH_IOLD.BUFSIZE
       255**DCL       345<<ASSIGN
GH_IOLD.BYTX
       254**DCL       344<<ASSIGN
GH_IOLD.CHN
       253**DCL       253--REDEF     341<<ASSIGN
GH_IOLD.FNC
       254**DCL       342<<ASSIGN
GH_KEEPDELTA
       274**DCL       322>>IF
GI$MLCPDMP
       260**DCL       386--CALL
GI$MLCPDMP.CHAN
       260**DCL       383<<ASSIGN
GI$MLCPDMP.SIZE
       260**DCL       384<<ASSIGN
GI$MLCPDMP_HDR
       263**DCL       284--ASSIGN    305--ASSIGN    306--CALL
GI$MLCPDMP_HDR.MLCP
       263**DCL       303<<ASSIGN
GI$MLCPDMP_HDR.SIZE
       263**DCL       304<<ASSIGN
GIR$READCPLR
       215**DCL-ENT   281--CALL
GIR$WRITECPLR
       216**DCL-ENT   306--CALL      386--CALL      391--CALL
GJ_BOOTBASE
       271**DCL       284>>ASSIGN    304>>ASSIGN    306<>CALL
GMA$GETPS
       217**DCL-ENT   285--CALL
GMA$MAP
       218**DCL-ENT   288--CALL
GMA$RELPS
       219**DCL-ENT   307--CALL
L66ADDR
PL6.E3A0      #003=GIR$MLCPDUMP File=GIR$SCREECH.:E05TSI                         TUE 07/29/97 21:49 Page:117  
       266**DCL       280<<ASSIGN    281<>CALL      284<<ASSIGN    304>>ASSIGN    386<>CALL      387<<ASSIGN
       387>>ASSIGN    391<>CALL      392<<ASSIGN    392>>ASSIGN
PP
       265**DCL       285<>CALL      288<>CALL      307<>CALL
QHDR
       221**DCL       279--ASSIGN    281--CALL
QHDR.MLCPDUMP
       223**DCL       282>>IF
RAMMAP.CCB IN PROCEDURE DUMP_RAM
       318**DCL       390>>ASSIGN
RAMMAP.CCP.CCB_COPY IN PROCEDURE DUMP_RAM
       316**DCL       390<<ASSIGN
TIMEOUT
       257**DCL       368<<ASSIGN    377<<ASSIGN    377>>ASSIGN    378>>IF        401<<ASSIGN    402>>DOWHILE
       404<<ASSIGN    407<<ASSIGN    407>>ASSIGN    408>>IF
WAIT
       258**DCL       370<<ASSIGN    371>>DOWHILE   372<<ASSIGN    372>>ASSIGN
WDSIZE
       268**DCL       279<<ASSIGN    281<>CALL      305<<ASSIGN    306<>CALL      385<<ASSIGN    386<>CALL
       389<<ASSIGN    391<>CALL

PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:118  
      714        1        /*T***********************************************************/
      715        2        /*T*                                                         */
      716        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      717        4        /*T*                                                         */
      718        5        /*T***********************************************************/
      719        6        GIR$CPLRIO: PROC(A66,A6,WORDSIZE);
      720        7        /**/
      721        8    1   DCL A66 UBIN(32);
      722        9    1   DCL A6 UBIN(32);                        /* PROBABLY A POINTER                 */
      723       10    1   DCL WORDSIZE UBIN(32);
      724       11        /**/
      725       12        %INCLUDE GH_HARDWARE_M;
      726      110        %INCLUDE GH_IOFNC_E;
      727      179 S      %INCLUDE GH_LCP6_M;
      728      180        /**/
      729      181    1   DCL GHH$IO_IN ENTRY(1) ALTRET;
      730      182    1   DCL GHH$IO ENTRY(1) ALTRET;
      731      183    1   DCL GHH$IOLD ENTRY(1) ALTRET;
      732      184        /**/
      733      185        %SET LISTMAC='1'B;
      734      186    1   DCL 1 XFERL66_L6 STATIC ALIGNED,
      735      187    1         2 SIZE UBIN INIT(SIZEW(XFERL66_L6)),
      736      188                %GH_CPLDCW (FPTN=XFER,LVL=2,STCLASS=STATIC,OC=%GH#CPL_L66_TO_L6,
      737      189                            MODE=%GH#CTM_ASCII,TALLY=0,LAST=",");
               190        %LSET LISTDIR='0'B;
               203    1   2 XFER ALIGNED,
               205    1   3 OC  UBIN BYTE UNAL INIT(62)/**/,3 MODE  UBIN BYTE UNAL INIT(1)
               206    1   /**/,3 TALLY  UBIN WORD UNAL INIT(0)/**/,3 * UBIN(6)UNAL INIT(0)/**/,
               207    1   3 CN  UBIN(2)UNAL INIT(0)/**/,3 A66  UBIN(24)UNAL INIT(0)
               208    1   /**/,3 * UBIN(7)UNAL INIT(0)/**/,3 BN  UBIN(1)UNAL INIT(0)/**/,3
               209    1   * UBIN(1)UNAL INIT(0)/**/,3 A6  UBIN(23)UNAL INIT(0)/**/,
      738      211                %GH_CPLDCW (FPTN=DISC,LVL=2,STCLASS=STATIC,LAST=";",OC=%GH#CPL_DISCONNECT);
               212        %LSET LISTDIR='0'B;
               225    1   2 DISC ALIGNED,
               227    1   3 OC  UBIN BYTE UNAL INIT(48)/**/,3 MODE  UBIN BYTE UNAL INIT(0)
               228    1   /**/,3 TALLY  UBIN WORD UNAL INIT(0)/**/,3 * UBIN(6)UNAL INIT(0)/**/,
               229    1   3 CN  UBIN(2)UNAL INIT(0)/**/,3 A66  UBIN(24)UNAL INIT(0)
PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:119  
               230    1   /**/,3 * UBIN(7)UNAL INIT(0)/**/,3 BN  UBIN(1)UNAL INIT(0)/**/,3
               231    1   * UBIN(1)UNAL INIT(0)/**/,3 A6  UBIN(23)UNAL INIT(0)/**/;
      739      233        %SET LISTMAC='0'B;
      740      234        %GH_IO (FPTN=GH_IO,STCLASS=STATIC);
      741      250        %GH_IO (FPTN=GETSTWD,STCLASS=STATIC);
      742      266        %GH_IOLD (FPTN=EXCDCW,STCLASS=STATIC,FNC=%GH#IO_IOLD);
      743      281        /**/
      744      282    1   DCL 1 STATUS ALIGNED,
      745      283    1         2 WD1 BIT(16),
      746      284    1         2 WD2 BIT(16);
      747      285        /**/
      748      286    1   DCL WDSLEFT SBIN(32);
      749      287    1   DCL SEG UBIN;
      750      288    1   DCL WOFFSET UBIN(32);
      751      289    1   DCL L6ADDR UBIN(32);
      752      290        /**/
      753      291    1   DCL GJ_BOOTCHAN UBIN WORD SYMREF;
      754      292    1   DCL G$ASDT_MCL$ PTR SYMREF;
      755      293        %G$SEGDESC (FPTN="ASDT(0:30)",STCLASS="BASED(G$ASDT_MCL$)");
      756      315        /**/
      757      316        %EQU K1=1024;
      758      317        %EQU K2=2048;
      759      318        %EQU K4=4096;
      760      319        %EQU K8=8192;
      761      320        %EQU K16=16384;
      762      321        %EQU K32=32768;
      763      322        %EQU K64=65536;
      764      323        /**/
      765      324        %EJECT;
PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:120  
      766      325    1   GIR$READCPLR: ENTRY(A66,A6,WORDSIZE);
      767      326    1           XFERL66_L6.XFER.OC=%GH#CPL_L66_TO_L6;
      768      327    1           GOTO RW_CMN;
      769      328        /**/
      770      329    1   GIR$WRITECPLR: ENTRY(A66,A6,WORDSIZE);
      771      330    1           XFERL66_L6.XFER.OC=%GH#CPL_L6_TO_L66;
      772      331        /**/
      773      332    1   RW_CMN:
      774      333    2           IF A6<%K64 THEN DO;
      775      334    2              SEG=A6/%K4;
      776      335    2              WOFFSET=MOD(A6,%K4);
      777      336    2              END;
      778      337    2           ELSE DO;
      779      338    2              SEG=15+A6/%K64;
      780      339    2              WOFFSET=MOD(A6,%K64);
      781      340    2              END;
      782      341    1           L6ADDR=ASDT.BASE(SEG)*256+WOFFSET;
      783      342    1           XFERL66_L6.XFER.A66=A66;
      784      343    1           XFERL66_L6.XFER.A6=L6ADDR;
      785      344    1           XFERL66_L6.XFER.TALLY=0;
      786      345    1           WDSLEFT=WORDSIZE;
      787      346    2           DO WHILE (WDSLEFT>0);
      788      347    2              IF WDSLEFT<%K32 THEN
      789      348    2                 XFERL66_L6.XFER.TALLY=WDSLEFT*2;
      790      349    2              CALL COUPLER_IO(XFERL66_L6);
      791      350    2              WDSLEFT=WDSLEFT-%K32;
      792      351    2              XFERL66_L6.XFER.A66=XFERL66_L6.XFER.A66+%K16;
      793      352    2              XFERL66_L6.XFER.A6=XFERL66_L6.XFER.A6+%K32;
      794      353    2              END;
      795      354    1           RETURN;
      796      355        %EJECT;
PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:121  
      797      356    1   COUPLER_IO: PROC(DCWLIST) ALTRET;
      798      357    2   DCL DCWLIST UBIN;
      799      358        /**/
      800      359    2   DCL NAK BIT(1) ALIGNED;
      801      360    2   DCL I SBIN;
      802      361    2           EXCDCW.CHN=GJ_BOOTCHAN+1;       /* DCW LIST FUNCTION                  */
      803      362    2           EXCDCW.BUF$=PINCRW(ADDR(DCWLIST),1);
      804      363    2           EXCDCW.BYTX=0;
      805      364    2           EXCDCW.BUFSIZE=(DCWLIST-1)*2;
      806      365    2           NAK='1'B;
      807      366    3           DO WHILE(NAK);
      808      367    3              CALL GHH$IOLD(EXCDCW) ALTRET(IOLD_NAK);
      809      368    3              NAK='0'B;
      810      369    3   IOLD_NAK:  END;
      811      370    2           GETSTWD.CAS.CHN=GJ_BOOTCHAN;
      812      371    2           GETSTWD.CAS.FNC=%GH#IO_INPSTT1;
      813      372    2           NAK='1'B;
      814      373    3           DO WHILE(NAK);
      815      374    4              DO I=0 TO 10000;
      816      375    4                 END;
      817      376    3              CALL GHH$IO_IN(GETSTWD) ALTRET(ST1_NAK);
      818      377    3              NAK='0'B;
      819      378    3   ST1_NAK:   END;
      820      379    2           STATUS.WD1=GETSTWD.STATUS;
      821      380    2           GETSTWD.CAS.FNC=%GH#IO_INPSTT2;
      822      381    2           NAK='1'B;
      823      382    3           DO WHILE(NAK);
      824      383    3              CALL GHH$IO_IN(GETSTWD) ALTRET(ST2_NAK);
      825      384    3              NAK='0'B;
      826      385    3   ST2_NAK:   END;
      827      386    2           STATUS.WD2=GETSTWD.STATUS;
      828      387    2           IF STATUS.WD1='8000'X THEN
      829      388    2              RETURN;
      830      389    2           ELSE
      831      390    2              ALTRETURN;
      832      391    2   END COUPLER_IO;
      833      392        %EJECT;
PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:122  
      834      393    1   DOIO:   PROC(GH_IO) ALTRET;
      835      394        %GH_IO (FPTN=GH_IO,STCLASS="");
      836      410    2   DCL NAK BIT(1) ALIGNED;
      837      411    2           NAK='1'B;
      838      412    3           DO WHILE(NAK);
      839      413    3              CALL GHH$IO(GH_IO) ALTRET(NAKED);
      840      414    3              NAK='0'B;
      841      415    3   NAKED:     END;
      842      416    2           RETURN;
      843      417    2   END DOIO;
      844      418    1   END GIR$CPLRIO;
      845      419        %EOD;

PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:123  
--  Include file information  --

   GH_IOFNC_E.:E05TOU  is referenced.
   GH_HARDWARE_M.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  was found in the system file and is never referenced.
   GT_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   KI_CP6.:E05TOU  was found in the system file and is never referenced.
   GF_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GM_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GU_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GJ_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GH_LCP6_M.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure GIR$CPLRIO.

   Procedure GIR$CPLRIO requires 387 words for executable code.
   Procedure GIR$CPLRIO requires 28 words of local(AUTO) storage.

PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:124  

 Object Unit name= GIR$CPLRIO                                 File name= GIR$SCREECH.:E05TOU
 UTS= JUL 29 '97 21:49:45.28 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_LCP6_SYSTEM                               Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size HexSiz  Section name
    0   Data  even  none    22     16  GIR$CPLRIO
    1   Proc  even  none   387    183  GIR$CPLRIO
    2  RoData even  none     4      4  GIR$CPLRIO

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect HexLoc Primary Altret sequence   type   Parms  Name
     1      0   yes            yes      Std        3  GIR$CPLRIO
     1      7                  yes      Std        3  GIR$READCPLR
     1     12                  yes      Std        3  GIR$WRITECPLR

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       1 GHH$IOLD
 yes     yes           Std       1 GHH$IO_IN
 yes     yes           Std       1 GHH$IO
                       nStd      0 X6A_AUTO_3
                       nStd      0 X6B_BLR
                       nStd      0 X6A_ARET
PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:125  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     GJ_BOOTCHAN                           G$ASDT_MCL$                      r    G$ROS$
PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:126  


      714        1        /*T***********************************************************/
      715        2        /*T*                                                         */
      716        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      717        4        /*T*                                                         */
      718        5        /*T***********************************************************/
      719        6        GIR$CPLRIO: PROC(A66,A6,WORDSIZE);

      6   1 000000  D380 0000 0000  xent GIR$CPLRIO      LNJ,B5   X6A_AUTO_3
          1 000003       001C 0003                       DC       28,3
          1 000005  0F81 0006                            B        s:326,PREL

      720        7        /**/
      721        8    1   DCL A66 UBIN(32);
      722        9    1   DCL A6 UBIN(32);                        /* PROBABLY A POINTER                 */
      723       10    1   DCL WORDSIZE UBIN(32);
      724       11        /**/
      725       12        %INCLUDE GH_HARDWARE_M;
      726      110        %INCLUDE GH_IOFNC_E;
      727      179 S      %INCLUDE GH_LCP6_M;
      728      180        /**/
      729      181    1   DCL GHH$IO_IN ENTRY(1) ALTRET;
      730      182    1   DCL GHH$IO ENTRY(1) ALTRET;
      731      183    1   DCL GHH$IOLD ENTRY(1) ALTRET;
      732      184        /**/
      733      185        %SET LISTMAC='1'B;
      734      186    1   DCL 1 XFERL66_L6 STATIC ALIGNED,
      735      187    1         2 SIZE UBIN INIT(SIZEW(XFERL66_L6)),
      736      188                %GH_CPLDCW (FPTN=XFER,LVL=2,STCLASS=STATIC,OC=%GH#CPL_L66_TO_L6,
      737      189                            MODE=%GH#CTM_ASCII,TALLY=0,LAST=",");
               190        %LSET LISTDIR='0'B;
               203    1   2 XFER ALIGNED,
               205    1   3 OC  UBIN BYTE UNAL INIT(62)/**/,3 MODE  UBIN BYTE UNAL INIT(1)
               206    1   /**/,3 TALLY  UBIN WORD UNAL INIT(0)/**/,3 * UBIN(6)UNAL INIT(0)/**/,
               207    1   3 CN  UBIN(2)UNAL INIT(0)/**/,3 A66  UBIN(24)UNAL INIT(0)
               208    1   /**/,3 * UBIN(7)UNAL INIT(0)/**/,3 BN  UBIN(1)UNAL INIT(0)/**/,3
               209    1   * UBIN(1)UNAL INIT(0)/**/,3 A6  UBIN(23)UNAL INIT(0)/**/,
PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:127  
      738      211                %GH_CPLDCW (FPTN=DISC,LVL=2,STCLASS=STATIC,LAST=";",OC=%GH#CPL_DISCONNECT);
               212        %LSET LISTDIR='0'B;
               225    1   2 DISC ALIGNED,
               227    1   3 OC  UBIN BYTE UNAL INIT(48)/**/,3 MODE  UBIN BYTE UNAL INIT(0)
               228    1   /**/,3 TALLY  UBIN WORD UNAL INIT(0)/**/,3 * UBIN(6)UNAL INIT(0)/**/,
               229    1   3 CN  UBIN(2)UNAL INIT(0)/**/,3 A66  UBIN(24)UNAL INIT(0)
               230    1   /**/,3 * UBIN(7)UNAL INIT(0)/**/,3 BN  UBIN(1)UNAL INIT(0)/**/,3
               231    1   * UBIN(1)UNAL INIT(0)/**/,3 A6  UBIN(23)UNAL INIT(0)/**/;
      739      233        %SET LISTMAC='0'B;
      740      234        %GH_IO (FPTN=GH_IO,STCLASS=STATIC);
      741      250        %GH_IO (FPTN=GETSTWD,STCLASS=STATIC);
      742      266        %GH_IOLD (FPTN=EXCDCW,STCLASS=STATIC,FNC=%GH#IO_IOLD);
      743      281        /**/
      744      282    1   DCL 1 STATUS ALIGNED,
      745      283    1         2 WD1 BIT(16),
      746      284    1         2 WD2 BIT(16);
      747      285        /**/
      748      286    1   DCL WDSLEFT SBIN(32);
      749      287    1   DCL SEG UBIN;
      750      288    1   DCL WOFFSET UBIN(32);
      751      289    1   DCL L6ADDR UBIN(32);
      752      290        /**/
      753      291    1   DCL GJ_BOOTCHAN UBIN WORD SYMREF;
      754      292    1   DCL G$ASDT_MCL$ PTR SYMREF;
      755      293        %G$SEGDESC (FPTN="ASDT(0:30)",STCLASS="BASED(G$ASDT_MCL$)");
      756      315        /**/
      757      316        %EQU K1=1024;
      758      317        %EQU K2=2048;
      759      318        %EQU K4=4096;
      760      319        %EQU K8=8192;
      761      320        %EQU K16=16384;
      762      321        %EQU K32=32768;
      763      322        %EQU K64=65536;
      764      323        /**/
      765      324        %EJECT;
PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:128  
      766      325    1   GIR$READCPLR: ENTRY(A66,A6,WORDSIZE);

    325   1 000007  D380 0000 0000  xent GIR$READCPLR    LNJ,B5   X6A_AUTO_3
          1 00000A       001C 0003                       DC       28,3

      767      326    1           XFERL66_L6.XFER.OC=%GH#CPL_L66_TO_L6;

    326   1 00000C  6C3E                                 LDV,R6   62
          1 00000D  E780 0000 0001  00                   STH,R6   XFERL66_L6+1

      768      327    1           GOTO RW_CMN;

    327   1 000010  0F81 000A                            B        s:333,PREL

      769      328        /**/
      770      329    1   GIR$WRITECPLR: ENTRY(A66,A6,WORDSIZE);

    329   1 000012  D380 0000 0000  xent GIR$WRITECPLR   LNJ,B5   X6A_AUTO_3
          1 000015       001C 0003                       DC       28,3

      771      330    1           XFERL66_L6.XFER.OC=%GH#CPL_L6_TO_L66;

    330   1 000017  6C3D                                 LDV,R6   61
          1 000018  E780 0000 0001  00                   STH,R6   XFERL66_L6+1

      772      331        /**/
      773      332    1   RW_CMN:
      774      333    2           IF A6<%K64 THEN DO;

    333   1 00001B  ECC7 0006            RW_CMN          LDB,B6   @A6,AUTO
          1 00001D  8C86                                 LDI      ,B6
          1 00001E  84F0 0001 0000                       SID      65536,IMO
          1 000021  0601 000F                            BCT      s:338,PREL

      775      334    2              SEG=A6/%K4;

    334   1 000023  8C86                                 LDI      ,B6
PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:129  
          1 000024  70CC                                 DOR,R7   12
          1 000025  E857                                 LDR,R6   R7
          1 000026  EF47 000E                            STR,R6   SEG,AUTO

      776      335    2              WOFFSET=MOD(A6,%K4);

    335   1 000028  8C86                                 LDI      ,B6
          1 000029  E857                                 LDR,R6   R7
          1 00002A  E570 0FFF                            AND,R6   4095,IMO
          1 00002C  70F0                                 DAR,R7   16
          1 00002D  8D47 000F                            SDI      WOFFSET,AUTO

      777      336    2              END;

    336   1 00002F  0F81 0010                            B        s:341,PREL

      778      337    2           ELSE DO;

      779      338    2              SEG=15+A6/%K64;

    338   1 000031  8C86                                 LDI      ,B6
          1 000032  70D0                                 DOR,R7   16
          1 000033  8470 0000 000F                       AID      15,IMO
          1 000036  E857                                 LDR,R6   R7
          1 000037  EF47 000E                            STR,R6   SEG,AUTO

      780      339    2              WOFFSET=MOD(A6,%K64);

    339   1 000039  8C86                                 LDI      ,B6
          1 00003A  E857                                 LDR,R6   R7
          1 00003B  E570 FFFF                            AND,R6   -1,IMO
          1 00003D  70F0                                 DAR,R7   16
          1 00003E  8D47 000F                            SDI      WOFFSET,AUTO

      781      340    2              END;

      782      341    1           L6ADDR=ASDT.BASE(SEG)*256+WOFFSET;
PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:130  

    341   1 000040  DC80 0000 0000  xsym                 LDB,B5   G$ASDT_MCL$
          1 000043  B847 000E                            LDR,R3   SEG,AUTO
          1 000045  3001                                 SOL,R3   1
          1 000046  F835                                 LDR,R7   ,B5,R3
          1 000047  F570 7FFF                            AND,R7   32767,IMO
          1 000049  6C00                                 LDV,R6   0
          1 00004A  7088                                 DOL,R7   8
          1 00004B  8447 000F                            AID      WOFFSET,AUTO
          1 00004D  8D47 0011                            SDI      L6ADDR,AUTO

      783      342    1           XFERL66_L6.XFER.A66=A66;

    342   1 00004F  CCC7 0004                            LDB,B4   @A66,AUTO
          1 000051  8C84                                 LDI      ,B4
          1 000052  7088                                 DOL,R7   8
          1 000053  8D47 001A                            SDI      I+1,AUTO
          1 000055  ABC7 001A                            LAB,B2   I+1,AUTO
          1 000057  2C00                                 LDV,R2   0
          1 000058  6C20                                 LDV,R6   32
          1 000059  BB80 0000 0000  00                   LAB,B3   XFERL66_L6
          1 00005C  3C38                                 LDV,R3   56
          1 00005D  7C18                                 LDV,R7   24
          1 00005E  D380 0000 0000  xent                 LNJ,B5   X6B_BLR

      784      343    1           XFERL66_L6.XFER.A6=L6ADDR;

    343   1 000061  8CC7 0011                            LDI      L6ADDR,AUTO
          1 000063  7089                                 DOL,R7   9
          1 000064  8D47 001A                            SDI      I+1,AUTO
          1 000066  ABC7 001A                            LAB,B2   I+1,AUTO
          1 000068  2C00                                 LDV,R2   0
          1 000069  6C20                                 LDV,R6   32
          1 00006A  BB80 0000 0000  00                   LAB,B3   XFERL66_L6
          1 00006D  3C59                                 LDV,R3   89
          1 00006E  7C17                                 LDV,R7   23
          1 00006F  D380 0000 0000  xent                 LNJ,B5   X6B_BLR
PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:131  

      785      344    1           XFERL66_L6.XFER.TALLY=0;

    344   1 000072  8700 0000 0002  00                   CL       XFERL66_L6+2

      786      345    1           WDSLEFT=WORDSIZE;

    345   1 000075  ECC7 0008                            LDB,B6   @WORDSIZE,AUTO
          1 000077  8C86                                 LDI      ,B6
          1 000078  8D47 000C                            SDI      WDSLEFT,AUTO

      787      346    2           DO WHILE (WDSLEFT>0);

    346   1 00007A  84F0 0000 0000                       SID      0,IMO
          1 00007D  6801 005B                            BLZ,R6   s:354,PREL
          1 00007F  6A01 0003                            BGZ,R6   s:347,PREL
          1 000081  7901 0057                            BEZ,R7   s:354,PREL

      788      347    2              IF WDSLEFT<%K32 THEN

    347   1 000083  8CC7 000C                            LDI      WDSLEFT,AUTO
          1 000085  84F0 0000 8000                       SID      32768,IMO
          1 000088  6881 0008                            BGEZ,R6  s:349,PREL

      789      348    2                 XFERL66_L6.XFER.TALLY=WDSLEFT*2;

    348   1 00008A  8CC7 000C                            LDI      WDSLEFT,AUTO
          1 00008C  7081                                 DOL,R7   1
          1 00008D  E857                                 LDR,R6   R7
          1 00008E  EF00 0000 0002  00                   STR,R6   XFERL66_L6+2

      790      349    2              CALL COUPLER_IO(XFERL66_L6);

    349   1 000091  EB80 0000 0000  00                   LAB,B6   XFERL66_L6
          1 000094  EFC7 0016                            STB,B6   L6ADDR+5,AUTO
          1 000096  E3C0 0045                            LNJ,B6   s:0,PREL
          1 000098       0001                            DC       s:350,PREL
PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:132  

      791      350    2              WDSLEFT=WDSLEFT-%K32;

    350   1 000099  8CC7 000C                            LDI      WDSLEFT,AUTO
          1 00009B  8470 FFFF 8000                       AID      -32768,IMO
          1 00009E  8D47 000C                            SDI      WDSLEFT,AUTO

      792      351    2              XFERL66_L6.XFER.A66=XFERL66_L6.XFER.A66+%K16;

    351   1 0000A0  8C80 0000 0003  00                   LDI      XFERL66_L6+3
          1 0000A3  E570 00FF                            AND,R6   255,IMO
          1 0000A5  8470 0000 4000                       AID      16384,IMO
          1 0000A8  7088                                 DOL,R7   8
          1 0000A9  8D47 001A                            SDI      I+1,AUTO
          1 0000AB  ABC7 001A                            LAB,B2   I+1,AUTO
          1 0000AD  2C00                                 LDV,R2   0
          1 0000AE  6C20                                 LDV,R6   32
          1 0000AF  BB80 0000 0000  00                   LAB,B3   XFERL66_L6
          1 0000B2  3C38                                 LDV,R3   56
          1 0000B3  7C18                                 LDV,R7   24
          1 0000B4  D380 0000 0000  xent                 LNJ,B5   X6B_BLR

      793      352    2              XFERL66_L6.XFER.A6=XFERL66_L6.XFER.A6+%K32;

    352   1 0000B7  8C80 0000 0005  00                   LDI      XFERL66_L6+5
          1 0000BA  E570 007F                            AND,R6   127,IMO
          1 0000BC  8470 0000 8000                       AID      32768,IMO
          1 0000BF  7089                                 DOL,R7   9
          1 0000C0  8D47 001A                            SDI      I+1,AUTO
          1 0000C2  ABC7 001A                            LAB,B2   I+1,AUTO
          1 0000C4  2C00                                 LDV,R2   0
          1 0000C5  6C20                                 LDV,R6   32
          1 0000C6  BB80 0000 0000  00                   LAB,B3   XFERL66_L6
          1 0000C9  3C59                                 LDV,R3   89
          1 0000CA  7C17                                 LDV,R7   23
          1 0000CB  D380 0000 0000  xent                 LNJ,B5   X6B_BLR

PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:133  
      794      353    2              END;

    353   1 0000CE  8CC7 000C                            LDI      WDSLEFT,AUTO
          1 0000D0  84F0 0000 0000                       SID      0,IMO
          1 0000D3  6A01 FFAF                            BGZ,R6   s:347,PREL
          1 0000D5  6801 0003                            BLZ,R6   s:354,PREL
          1 0000D7  7981 FFAB                            BNEZ,R7  s:347,PREL

      795      354    1           RETURN;

    354   1 0000D9  C380 0000 0000  xent                 LNJ,B4   X6A_ARET

      796      355        %EJECT;
PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:134  
      797      356    1   COUPLER_IO: PROC(DCWLIST) ALTRET;

    356   1 0000DC  EFC7 0014            COUPLER_IO      STB,B6   L6ADDR+3,AUTO

      798      357    2   DCL DCWLIST UBIN;
      799      358        /**/
      800      359    2   DCL NAK BIT(1) ALIGNED;
      801      360    2   DCL I SBIN;
      802      361    2           EXCDCW.CHN=GJ_BOOTCHAN+1;       /* DCW LIST FUNCTION                  */

    361   1 0000DE  E800 0000 0000  xsym                 LDR,R6   GJ_BOOTCHAN
          1 0000E1  6E01                                 ADV,R6   1
          1 0000E2  6006                                 SOL,R6   6
          1 0000E3  EA80 0000 0011  00                   SRM,R6,'FFC0'X    EXCDCW
          1 0000E6       FFC0

      803      362    2           EXCDCW.BUF$=PINCRW(ADDR(DCWLIST),1);

    362   1 0000E7  DCC7 0016                            LDB,B5   @DCWLIST,AUTO
          1 0000E9  CBC5 0001                            LAB,B4   1,B5
          1 0000EB  CF80 0000 0012  00                   STB,B4   EXCDCW+1

      804      363    2           EXCDCW.BYTX=0;

    363   1 0000EE  8700 0000 0014  00                   CL       EXCDCW+3

      805      364    2           EXCDCW.BUFSIZE=(DCWLIST-1)*2;

    364   1 0000F1  E805                                 LDR,R6   ,B5
          1 0000F2  6001                                 SOL,R6   1
          1 0000F3  6EFE                                 ADV,R6   -2
          1 0000F4  EF00 0000 0015  00                   STR,R6   EXCDCW+4

      806      365    2           NAK='1'B;

    365   1 0000F7  8947 0018                            LBT,'8000'X       NAK,AUTO
    365   1 0000F9       8000
PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:135  

      807      366    3           DO WHILE(NAK);

    366   1 0000FA  89C7 0018                            CMZ      NAK,AUTO
          1 0000FC  0881 000F                            BAGE     s:370,PREL

      808      367    3              CALL GHH$IOLD(EXCDCW) ALTRET(IOLD_NAK);

    367   1 0000FE  BB80 0000 0000  02                   LAB,B3   0
          1 000101  CBF0 0100                            LAB,B4   256,IMO
          1 000103  E380 0000 0000  xent                 LNJ,B6   GHH$IOLD
          1 000106       0003                            DC       s:369,PREL

      809      368    3              NAK='0'B;

    368   1 000107  8747 0018                            CL       NAK,AUTO

      810      369    3   IOLD_NAK:  END;

    369   1 000109  89C7 0018            IOLD_NAK        CMZ      NAK,AUTO
          1 00010B  0873                                 BAL      s:367,SPREL

      811      370    2           GETSTWD.CAS.CHN=GJ_BOOTCHAN;

    370   1 00010C  E800 0000 0000  xsym                 LDR,R6   GJ_BOOTCHAN
          1 00010F  6006                                 SOL,R6   6
          1 000110  EA80 0000 000F  00                   SRM,R6,'FFC0'X    GETSTWD
          1 000113       FFC0

      812      371    2           GETSTWD.CAS.FNC=%GH#IO_INPSTT1;

    371   1 000114  6C18                                 LDV,R6   24
          1 000115  EA80 0000 000F  00                   SRM,R6,'003F'X    GETSTWD
          1 000118       003F

      813      372    2           NAK='1'B;

PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:136  
    372   1 000119  8947 0018                            LBT,'8000'X       NAK,AUTO
    372   1 00011B       8000

      814      373    3           DO WHILE(NAK);

    373   1 00011C  89C7 0018                            CMZ      NAK,AUTO
          1 00011E  0881 0018                            BAGE     s:379,PREL

      815      374    4              DO I=0 TO 10000;

    374   1 000120  8747 0019                            CL       I,AUTO

      816      375    4                 END;

    375   1 000122  8AC7 0019                            INC      I,AUTO
          1 000124  E847 0019                            LDR,R6   I,AUTO
          1 000126  E970 2710                            CMR,R6   10000,IMO
          1 000128  0AFA                                 BALE     s:375,SPREL

      817      376    3              CALL GHH$IO_IN(GETSTWD) ALTRET(ST1_NAK);

    376   1 000129  BB80 0000 0002  02                   LAB,B3   +2
          1 00012C  CBF0 0100                            LAB,B4   256,IMO
          1 00012E  E380 0000 0000  xent                 LNJ,B6   GHH$IO_IN
          1 000131       0003                            DC       s:378,PREL

      818      377    3              NAK='0'B;

    377   1 000132  8747 0018                            CL       NAK,AUTO

      819      378    3   ST1_NAK:   END;

    378   1 000134  89C7 0018            ST1_NAK         CMZ      NAK,AUTO
          1 000136  086A                                 BAL      s:374,SPREL

      820      379    2           STATUS.WD1=GETSTWD.STATUS;

PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:137  
    379   1 000137  E800 0000 0010  00                   LDR,R6   GETSTWD+1
          1 00013A  EF47 000A                            STR,R6   STATUS,AUTO

      821      380    2           GETSTWD.CAS.FNC=%GH#IO_INPSTT2;

    380   1 00013C  5C1A                                 LDV,R5   26
          1 00013D  DA80 0000 000F  00                   SRM,R5,'003F'X    GETSTWD
          1 000140       003F

      822      381    2           NAK='1'B;

    381   1 000141  8947 0018                            LBT,'8000'X       NAK,AUTO
    381   1 000143       8000

      823      382    3           DO WHILE(NAK);

    382   1 000144  89C7 0018                            CMZ      NAK,AUTO
          1 000146  0881 000F                            BAGE     s:386,PREL

      824      383    3              CALL GHH$IO_IN(GETSTWD) ALTRET(ST2_NAK);

    383   1 000148  BB80 0000 0002  02                   LAB,B3   +2
          1 00014B  CBF0 0100                            LAB,B4   256,IMO
          1 00014D  E380 0000 0000  xent                 LNJ,B6   GHH$IO_IN
          1 000150       0003                            DC       s:385,PREL

      825      384    3              NAK='0'B;

    384   1 000151  8747 0018                            CL       NAK,AUTO

      826      385    3   ST2_NAK:   END;

    385   1 000153  89C7 0018            ST2_NAK         CMZ      NAK,AUTO
          1 000155  0873                                 BAL      s:383,SPREL

      827      386    2           STATUS.WD2=GETSTWD.STATUS;

PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:138  
    386   1 000156  E800 0000 0010  00                   LDR,R6   GETSTWD+1
          1 000159  EF47 000B                            STR,R6   STATUS+1,AUTO

      828      387    2           IF STATUS.WD1='8000'X THEN

    387   1 00015B  D847 000A                            LDR,R5   STATUS,AUTO
          1 00015D  D970 8000                            CMR,R5   -32768,IMO
          1 00015F  0981 0005                            BNE      s:390,PREL

      829      388    2              RETURN;

    388   1 000161  ECC7 0014                            LDB,B6   L6ADDR+3,AUTO
          1 000163  C3C6 0001                            LNJ,B4   1,B6

      830      389    2           ELSE
      831      390    2              ALTRETURN;

    390   1 000165  ECC7 0014                            LDB,B6   L6ADDR+3,AUTO
          1 000167  B806                                 LDR,R3   ,B6
          1 000168  C3B6                                 LNJ,B4   ,B6,R3

      832      391    2   END COUPLER_IO;
      833      392        %EJECT;
PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:139  
      834      393    1   DOIO:   PROC(GH_IO) ALTRET;

    393   1 000169  EFC7 0014            DOIO            STB,B6   L6ADDR+3,AUTO

      835      394        %GH_IO (FPTN=GH_IO,STCLASS="");
      836      410    2   DCL NAK BIT(1) ALIGNED;
      837      411    2           NAK='1'B;

    411   1 00016B  8947 0018                            LBT,'8000'X       NAK,AUTO
    411   1 00016D       8000

      838      412    3           DO WHILE(NAK);

    412   1 00016E  89C7 0018                            CMZ      NAK,AUTO
          1 000170  0881 000E                            BAGE     s:416,PREL

      839      413    3              CALL GHH$IO(GH_IO) ALTRET(NAKED);

    413   1 000172  BBC7 0016                            LAB,B3   @GH_IO,AUTO
          1 000174  CBF0 0100                            LAB,B4   256,IMO
          1 000176  E380 0000 0000  xent                 LNJ,B6   GHH$IO
          1 000179       0003                            DC       s:415,PREL

      840      414    3              NAK='0'B;

    414   1 00017A  8747 0018                            CL       NAK,AUTO

      841      415    3   NAKED:     END;

    415   1 00017C  89C7 0018            NAKED           CMZ      NAK,AUTO
          1 00017E  0874                                 BAL      s:413,SPREL

      842      416    2           RETURN;

    416   1 00017F  ECC7 0014                            LDB,B6   L6ADDR+3,AUTO
          1 000181  C3C6 0001                            LNJ,B4   1,B6
      843      417    2   END DOIO;
PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:140  
      844      418    1   END GIR$CPLRIO;
      845      419        %EOD;

PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:141  
--  Include file information  --

   GH_IOFNC_E.:E05TOU  is referenced.
   GH_HARDWARE_M.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  was found in the system file and is never referenced.
   GT_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   KI_CP6.:E05TOU  was found in the system file and is never referenced.
   GF_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GM_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GU_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GJ_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GH_LCP6_M.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure GIR$CPLRIO.
PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:142  

 **** Variables and constants ****

  ****  Section 000  Data  GIR$CPLRIO

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

    11-0-0/w STRC(80)    r     1 EXCDCW                     F-0-0/w STRC(32)    r     1 GETSTWD
     0-0-0/w STRC(208)   r     1 XFERL66_L6

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     6-0-0/w PTR         r     1 @A6                        4-0-0/w PTR         r     1 @A66
    16-0-0/w PTR         r     1 @DCWLIST                  16-0-0/w PTR         r     1 @GH_IO
     8-0-0/w PTR         r     1 @WORDSIZE                 *0-0-0/w UBIN(32)    r     1 A6
    *0-0-0/w UBIN(32)    r     1 A66                       *0-0-0/w UBIN(16)    r     1 DCWLIST
    *0-0-0/w STRC(32)    r     1 GH_IO                     19-0-0/w SBIN(16)    r     1 I
    11-0-0/w UBIN(32)    r     1 L6ADDR                    18-0-0/w BIT         r     1 NAK
    18-0-0/w BIT         r     1 NAK                        E-0-0/w UBIN(16)    r     1 SEG
     A-0-0/w STRC(32)    r     1 STATUS                     C-0-0/w SBIN(32)    r     1 WDSLEFT
     F-0-0/w UBIN(32)    r     1 WOFFSET                   *0-0-0/w UBIN(32)    r     1 WORDSIZE

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 G$ASDT_MCL$                0-0-0/w UBIN(16)    r     1 GJ_BOOTCHAN

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:143  
     0-0-0/w STRC(32)    r     1 ASDT(0:30)


   Procedure GIR$CPLRIO requires 387 words for executable code.
   Procedure GIR$CPLRIO requires 28 words of local(AUTO) storage.
PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:144  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:145  
          MINI XREF LISTING

A6
         9**DCL         6--PROC      325--ENTRY     329--ENTRY     333>>IF        334>>ASSIGN    335>>ASSIGN
       338>>ASSIGN    339>>ASSIGN
A66
         8**DCL         6--PROC      325--ENTRY     329--ENTRY     342>>ASSIGN
ASDT.BASE
       311**DCL       341>>ASSIGN
COUPLER_IO
       356**PROC      349--CALL
DCWLIST IN PROCEDURE COUPLER_IO
       357**DCL       356--PROC      362--ASSIGN    364>>ASSIGN
EXCDCW
       277**DCL       367<>CALL
EXCDCW.BUF$
       278**DCL       362<<ASSIGN
EXCDCW.BUFSIZE
       279**DCL       364<<ASSIGN
EXCDCW.BYTX
       278**DCL       363<<ASSIGN
EXCDCW.CHN
       277**DCL       277--REDEF     361<<ASSIGN
G$ASDT_MCL$
       292**DCL       307--IMP-PTR   341>>ASSIGN
GETSTWD
       261**DCL       376<>CALL      383<>CALL
GETSTWD.CAS.CHN
       261**DCL       261--REDEF     370<<ASSIGN
GETSTWD.CAS.FNC
       262**DCL       371<<ASSIGN    380<<ASSIGN
GETSTWD.DAS
       262**DCL       263--REDEF     264--REDEF
GETSTWD.STATUS
PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:146  
       264**DCL       379>>ASSIGN    386>>ASSIGN
GHH$IO
       182**DCL-ENT   413--CALL
GHH$IOLD
       183**DCL-ENT   367--CALL
GHH$IO_IN
       181**DCL-ENT   376--CALL      383--CALL
GH_IO.CAS.CHN
       245**DCL       245--REDEF
GH_IO.DAS
       246**DCL       247--REDEF     248--REDEF
GH_IO IN PROCEDURE DOIO
       405**DCL       393--PROC      413<>CALL
GH_IO.CAS.CHN IN PROCEDURE DOIO
       405**DCL       405--REDEF
GH_IO.DAS IN PROCEDURE DOIO
       406**DCL       407--REDEF     408--REDEF
GJ_BOOTCHAN
       291**DCL       361>>ASSIGN    370>>ASSIGN
I IN PROCEDURE COUPLER_IO
       360**DCL       374<<DOINDEX
IOLD_NAK IN PROCEDURE COUPLER_IO
       369**LABEL     367--CALLALT
L6ADDR
       289**DCL       341<<ASSIGN    343>>ASSIGN
NAK IN PROCEDURE COUPLER_IO
       359**DCL       365<<ASSIGN    366>>DOWHILE   368<<ASSIGN    372<<ASSIGN    373>>DOWHILE   377<<ASSIGN
       381<<ASSIGN    382>>DOWHILE   384<<ASSIGN
NAK IN PROCEDURE DOIO
       410**DCL       411<<ASSIGN    412>>DOWHILE   414<<ASSIGN
NAKED IN PROCEDURE DOIO
       415**LABEL     413--CALLALT
RW_CMN
       333**LABEL     327--GOTO
SEG
       287**DCL       334<<ASSIGN    338<<ASSIGN    341>>ASSIGN
PL6.E3A0      #004=GIR$CPLRIO File=GIR$SCREECH.:E05TSI                           TUE 07/29/97 21:49 Page:147  
ST1_NAK IN PROCEDURE COUPLER_IO
       378**LABEL     376--CALLALT
ST2_NAK IN PROCEDURE COUPLER_IO
       385**LABEL     383--CALLALT
STATUS.WD1
       283**DCL       379<<ASSIGN    387>>IF
STATUS.WD2
       284**DCL       386<<ASSIGN
WDSLEFT
       286**DCL       345<<ASSIGN    346>>DOWHILE   347>>IF        348>>ASSIGN    350<<ASSIGN    350>>ASSIGN
WOFFSET
       288**DCL       335<<ASSIGN    339<<ASSIGN    341>>ASSIGN
WORDSIZE
        10**DCL         6--PROC      325--ENTRY     329--ENTRY     345>>ASSIGN
XFERL66_L6
       186**DCL       187--DCLINIT   349<>CALL
XFERL66_L6.XFER.A6
       209**DCL       343<<ASSIGN    352<<ASSIGN    352>>ASSIGN
XFERL66_L6.XFER.A66
       207**DCL       342<<ASSIGN    351<<ASSIGN    351>>ASSIGN
XFERL66_L6.XFER.OC
       205**DCL       326<<ASSIGN    330<<ASSIGN
XFERL66_L6.XFER.TALLY
       206**DCL       344<<ASSIGN    348<<ASSIGN

PL6.E3A0      #005=GIR$GASP File=GIR$SCREECH.:E05TSI                             TUE 07/29/97 21:49 Page:148  
      846        1        /*T***********************************************************/
      847        2        /*T*                                                         */
      848        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      849        4        /*T*                                                         */
      850        5        /*T***********************************************************/
      851        6        /**/
      852        7        /*F*    NAME: GIR$GASP
      853        8                CALL: CALL GIR$GASP
      854        9                DESCRIPTION:  GIR$GASP kicks each async line to display a message
      855       10                when the FEP crashes.
      856       11        */
      857       12        GIR$GASP: PROC (SCREECH);
      858       13
      859       14        %INCLUDE G$BOBCAT_M;
      860       34 S      %INCLUDE G_LCP6_E;
      861       35 S      %INCLUDE KI_CP6;
      862       36        %INCLUDE GH_IOFNC_E;
      863      105        %INCLUDE KW_LCT_E;
      864      460        %INCLUDE KW_ALCT_E;
      865      650        %INCLUDE KH$CHN;
      866      772        %INCLUDE KA_GLBASM_E;
      867      854        %INCLUDE KA_LCT_E;
      868      978        %INCLUDE KH$IO;
      869     1225
      870     1226    1   DCL KHI$IO_OTPLCTBYT ENTRY(2) ALTRET;
      871     1227    1   DCL KHI$IO_OTP ENTRY(2) ALTRET;
      872     1228
      873     1229    1   DCL GH_IGNORE_TRAP SBIN SYMREF;
      874     1230    1   DCL GH_KEEPDELTA SBIN SYMREF;
      875     1231    1   DCL GD_CHN UBIN SYMREF;
      876     1232
      877     1233    1   DCL G$BOBCAT$ PTR SYMREF;
      878     1234        %G$BOBCAT (FPTN=G$BOBCAT,STCLASS="BASED(G$BOBCAT$)");
      879     1247
      880     1248    1   DCL SCREECH BIT(1) ALIGNED;
      881     1249    1   DCL CHN$ PTR;
      882     1250        %KH$CHN (NAME=KH$CHN,STCLASS="BASED(CHN$)");
PL6.E3A0      #005=GIR$GASP File=GIR$SCREECH.:E05TSI                             TUE 07/29/97 21:49 Page:149  
      883     1374
      884     1375        %KH$IO (FPTN=KH$IO,STCLASS=AUTO);
      885     1489
      886     1490
      887     1491
      888     1492    1           CHN$=G$BOBCAT.CHNLOW$;
      889     1493    2           DO WHILE(CHN$<=G$BOBCAT.CHNHI$);
      890     1494    3              IF (KH$CHN.ATTR & %G_ATTR_CL_ASYNC) AND NOT KH$CHN.DED THEN DO;
      891     1495    3                 KH$IO.LCTBYT.DAT=%KA#OTPASNRQS_SCREECH;
      892     1496    3                 KH$IO.LCTBYT.ADR=%KA_LCT_OTPASNRQS;
      893     1497    3                 GH_IGNORE_TRAP=15;
      894     1498    4                 CALL KHI$IO_OTPLCTBYT(KH$CHN,KH$IO) WHENRETURN DO;
      895     1499    4                    KH$IO.LCTBYT.DAT=255;
      896     1500    4                    KH$IO.LCTBYT.ADR=%KW#TRNSTTMSK;
      897     1501    4                    GH_IGNORE_TRAP=15;
      898     1502    4                    CALL KHI$IO_OTPLCTBYT(KH$CHN,KH$IO);
      899     1503    4                    END;
      900     1504    3                 END;
      901     1505    3              ELSE IF KH$CHN.ATTR & %G_ATTR_CL_SLCC THEN DO;
      902     1506    3                    KH$IO.FNC=%GH#IO_OTPCTR;
      903     1507    3                    KH$IO.CTR='4000'X;
      904     1508    3                    CALL KHI$IO_OTP (KH$CHN, KH$IO);
      905     1509    3                    END;
      906     1510    2              CHN$=PINCRW(CHN$,SIZEW(KH$CHN));
      907     1511    2              END;
      908     1512    1           GH_IGNORE_TRAP=-1;
      909     1513    1           RETURN;
      910     1514
      911     1515        %EJECT;
PL6.E3A0      #005=GIR$GASP File=GIR$SCREECH.:E05TSI                             TUE 07/29/97 21:49 Page:150  
      912     1516
      913     1517    1   GIR$INITCHANS: ENTRY(SCREECH);
      914     1518
      915     1519    1           CHN$=G$BOBCAT.CHNLOW$;
      916     1520    1           CHN$ = PINCRW(CHN$,8*SIZEW(KH$CHN)); /* Skip central system */
      917     1521    2           DO WHILE(CHN$<=G$BOBCAT.CHNHI$);
      918     1522    2              KH$IO.FNC=%GH#IO_OTPCTR;
      919     1523    2              KH$IO.CTR='8000'X;
      920     1524    2              GH_IGNORE_TRAP=15;
      921     1525    2              IF KH$CHN.CHNBIT0_9 ~= 0 AND KH$CHN.CTR
      922     1526    2                AND ((KH$CHN.DVCID&'F5'X)='21'X AND SCREECH OR
      923     1527    2                (KH$CHN.DVCID&'FF'X)='21'X AND (GH_KEEPDELTA=0
      924     1528    2                OR KH$CHN.CHNBIT0_9/32~=GD_CHN/2048))
      925     1529    2              THEN
      926     1530    2                 CALL KHI$IO_OTP(KH$CHN,KH$IO);
      927     1531    2              CHN$=PINCRW(CHN$,SIZEW(KH$CHN));
      928     1532    2              END;
      929     1533    1           GH_IGNORE_TRAP=-1;
      930     1534    1           RETURN;
      931     1535
      932     1536
      933     1537    1   END GIR$GASP;

PL6.E3A0      #005=GIR$GASP File=GIR$SCREECH.:E05TSI                             TUE 07/29/97 21:49 Page:151  
--  Include file information  --

   KH$IO.:E05TOU  is referenced.
   KA_LCT_E.:E05TOU  is referenced.
   KA_GLBASM_E.:E05TOU  is referenced.
   KH$CHN.:E05TOU  is referenced.
   KW_ALCT_E.:E05TOU  is referenced.
   KW_LCT_E.:E05TOU  is referenced.
   GH_IOFNC_E.:E05TOU  is referenced.
   G$BOBCAT_M.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  was found in the system file and is referenced.
   GT_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   KI_CP6.:E05TOU  was found in the system file and is referenced.
   GF_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GM_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GU_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GJ_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GH_LCP6_M.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure GIR$GASP.

   Procedure GIR$GASP requires 244 words for executable code.
   Procedure GIR$GASP requires 14 words of local(AUTO) storage.

    No errors detected in file GIR$SCREECH.:E05TSI    .

PL6.E3A0      #005=GIR$GASP File=GIR$SCREECH.:E05TSI                             TUE 07/29/97 21:49 Page:152  

 Object Unit name= GIR$GASP                                   File name= GIR$SCREECH.:E05TOU
 UTS= JUL 29 '97 21:49:54.72 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_LCP6_SYSTEM                               Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size HexSiz  Section name
    0   Proc  even  none   244     F4  GIR$GASP

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect HexLoc Primary Altret sequence   type   Parms  Name
     0      0   yes            yes      Std        1  GIR$GASP
     0     83                  yes      Std        1  GIR$INITCHANS

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       2 KHI$IO_OTPLCTBYT
 yes     yes           Std       2 KHI$IO_OTP
                       nStd      0 X6A_AUTO_1
                       nStd      0 X6A_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     GH_IGNORE_TRAP                        GH_KEEPDELTA                          GD_CHN
     G$BOBCAT$                        r    G$ROS$
PL6.E3A0      #005=GIR$GASP File=GIR$SCREECH.:E05TSI                             TUE 07/29/97 21:49 Page:153  


      846        1        /*T***********************************************************/
      847        2        /*T*                                                         */
      848        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      849        4        /*T*                                                         */
      850        5        /*T***********************************************************/
      851        6        /**/
      852        7        /*F*    NAME: GIR$GASP
      853        8                CALL: CALL GIR$GASP
      854        9                DESCRIPTION:  GIR$GASP kicks each async line to display a message
      855       10                when the FEP crashes.
      856       11        */
      857       12        GIR$GASP: PROC (SCREECH);

     12   0 000000  D380 0000 0000  xent GIR$GASP        LNJ,B5   X6A_AUTO_1
          0 000003       000E 0001                       DC       14,1

      858       13
      859       14        %INCLUDE G$BOBCAT_M;
      860       34 S      %INCLUDE G_LCP6_E;
      861       35 S      %INCLUDE KI_CP6;
      862       36        %INCLUDE GH_IOFNC_E;
      863      105        %INCLUDE KW_LCT_E;
      864      460        %INCLUDE KW_ALCT_E;
      865      650        %INCLUDE KH$CHN;
      866      772        %INCLUDE KA_GLBASM_E;
      867      854        %INCLUDE KA_LCT_E;
      868      978        %INCLUDE KH$IO;
      869     1225
      870     1226    1   DCL KHI$IO_OTPLCTBYT ENTRY(2) ALTRET;
      871     1227    1   DCL KHI$IO_OTP ENTRY(2) ALTRET;
      872     1228
      873     1229    1   DCL GH_IGNORE_TRAP SBIN SYMREF;
      874     1230    1   DCL GH_KEEPDELTA SBIN SYMREF;
      875     1231    1   DCL GD_CHN UBIN SYMREF;
      876     1232
      877     1233    1   DCL G$BOBCAT$ PTR SYMREF;
PL6.E3A0      #005=GIR$GASP File=GIR$SCREECH.:E05TSI                             TUE 07/29/97 21:49 Page:154  
      878     1234        %G$BOBCAT (FPTN=G$BOBCAT,STCLASS="BASED(G$BOBCAT$)");
      879     1247
      880     1248    1   DCL SCREECH BIT(1) ALIGNED;
      881     1249    1   DCL CHN$ PTR;
      882     1250        %KH$CHN (NAME=KH$CHN,STCLASS="BASED(CHN$)");
      883     1374
      884     1375        %KH$IO (FPTN=KH$IO,STCLASS=AUTO);
      885     1489
      886     1490
      887     1491
      888     1492    1           CHN$=G$BOBCAT.CHNLOW$;

   1492   0 000005  EC80 0000 0000  xsym                 LDB,B6   G$BOBCAT$
          0 000008  DCC6 0038                            LDB,B5   56,B6
          0 00000A  DFC7 0006                            STB,B5   CHN$,AUTO

      889     1493    2           DO WHILE(CHN$<=G$BOBCAT.CHNHI$);

   1493   0 00000C  DDC6 003A                            CMB,B5   58,B6
          0 00000E  0301 006D                            BG       s:1512,PREL

      890     1494    3              IF (KH$CHN.ATTR & %G_ATTR_CL_ASYNC) AND NOT KH$CHN.DED THEN DO;

   1494   0 000010  ECC7 0006                            LDB,B6   CHN$,AUTO
          0 000012  E846 0005                            LDR,R6   5,B6
          0 000014  E570 8000                            AND,R6   -32768,IMO
          0 000016  6901 003C                            BEZ,R6   s:1505,PREL
          0 000018  82C6 0009                            LB,'0100'X        9,B6
          0 00001A       0100
          0 00001B  0501 0037                            BBT      s:1505,PREL

      891     1495    3                 KH$IO.LCTBYT.DAT=%KA#OTPASNRQS_SCREECH;

   1495   0 00001D  6C0A                                 LDV,R6   10
          0 00001E  E7C7 0009                            STH,R6   KH$IO+1,AUTO

      892     1496    3                 KH$IO.LCTBYT.ADR=%KA_LCT_OTPASNRQS;
PL6.E3A0      #005=GIR$GASP File=GIR$SCREECH.:E05TSI                             TUE 07/29/97 21:49 Page:155  

   1496   0 000020  5C17                                 LDV,R5   23
          0 000021  DAC7 0009                            SRM,R5,'00FF'X    KH$IO+1,AUTO
          0 000023       00FF

      893     1497    3                 GH_IGNORE_TRAP=15;

   1497   0 000024  4C0F                                 LDV,R4   15
          0 000025  CF00 0000 0000  xsym                 STR,R4   GH_IGNORE_TRAP

      894     1498    4                 CALL KHI$IO_OTPLCTBYT(KH$CHN,KH$IO) WHENRETURN DO;

   1498   0 000028  DBC7 0008                            LAB,B5   KH$IO,AUTO
          0 00002A  DFC7 000C                            STB,B5   KH$IO+4,AUTO
          0 00002C  EFC7 000A                            STB,B6   KH$IO+2,AUTO
          0 00002E  BBC7 000A                            LAB,B3   KH$IO+2,AUTO
          0 000030  CBF0 0200                            LAB,B4   512,IMO
          0 000032  E380 0000 0000  xent                 LNJ,B6   KHI$IO_OTPLCTBYT
          0 000035       001C                            DC       s:1504,PREL

      895     1499    4                    KH$IO.LCTBYT.DAT=255;

   1499   0 000036  8947 0009                            LBT,'FF00'X       KH$IO+1,AUTO
   1499   0 000038       FF00

      896     1500    4                    KH$IO.LCTBYT.ADR=%KW#TRNSTTMSK;

   1500   0 000039  6C2F                                 LDV,R6   47
          0 00003A  EAC7 0009                            SRM,R6,'00FF'X    KH$IO+1,AUTO
          0 00003C       00FF

      897     1501    4                    GH_IGNORE_TRAP=15;

   1501   0 00003D  5C0F                                 LDV,R5   15
          0 00003E  DF00 0000 0000  xsym                 STR,R5   GH_IGNORE_TRAP

      898     1502    4                    CALL KHI$IO_OTPLCTBYT(KH$CHN,KH$IO);
PL6.E3A0      #005=GIR$GASP File=GIR$SCREECH.:E05TSI                             TUE 07/29/97 21:49 Page:156  

   1502   0 000041  EBC7 0008                            LAB,B6   KH$IO,AUTO
          0 000043  EFC7 000C                            STB,B6   KH$IO+4,AUTO
          0 000045  DCC7 0006                            LDB,B5   CHN$,AUTO
          0 000047  DFC7 000A                            STB,B5   KH$IO+2,AUTO
          0 000049  BBC7 000A                            LAB,B3   KH$IO+2,AUTO
          0 00004B  CBF0 0200                            LAB,B4   512,IMO
          0 00004D  E380 0000 0000  xent                 LNJ,B6   KHI$IO_OTPLCTBYT
          0 000050       0001                            DC       s:1504,PREL

      899     1503    4                    END;

      900     1504    3                 END;

   1504   0 000051  0F81 001D                            B        s:1510,PREL

      901     1505    3              ELSE IF KH$CHN.ATTR & %G_ATTR_CL_SLCC THEN DO;

   1505   0 000053  E846 0005                            LDR,R6   5,B6
          0 000055  E570 0200                            AND,R6   512,IMO
          0 000057  6901 0017                            BEZ,R6   s:1510,PREL

      902     1506    3                    KH$IO.FNC=%GH#IO_OTPCTR;

   1506   0 000059  6C01                                 LDV,R6   1
          0 00005A  EAC7 0008                            SRM,R6,'003F'X    KH$IO,AUTO
          0 00005C       003F

      903     1507    3                    KH$IO.CTR='4000'X;

   1507   0 00005D  D870 4000                            LDR,R5   16384,IMO
          0 00005F  DF47 0009                            STR,R5   KH$IO+1,AUTO

      904     1508    3                    CALL KHI$IO_OTP (KH$CHN, KH$IO);

   1508   0 000061  DBC7 0008                            LAB,B5   KH$IO,AUTO
          0 000063  DFC7 000C                            STB,B5   KH$IO+4,AUTO
PL6.E3A0      #005=GIR$GASP File=GIR$SCREECH.:E05TSI                             TUE 07/29/97 21:49 Page:157  
          0 000065  EFC7 000A                            STB,B6   KH$IO+2,AUTO
          0 000067  BBC7 000A                            LAB,B3   KH$IO+2,AUTO
          0 000069  CBF0 0200                            LAB,B4   512,IMO
          0 00006B  E380 0000 0000  xent                 LNJ,B6   KHI$IO_OTP
          0 00006E       0001                            DC       s:1510,PREL

      905     1509    3                    END;

      906     1510    2              CHN$=PINCRW(CHN$,SIZEW(KH$CHN));

   1510   0 00006F  ECC7 0006                            LDB,B6   CHN$,AUTO
          0 000071  DBC6 0020                            LAB,B5   32,B6
          0 000073  DFC7 0006                            STB,B5   CHN$,AUTO

      907     1511    2              END;

   1511   0 000075  EC80 0000 0000  xsym                 LDB,B6   G$BOBCAT$
          0 000078  DDC6 003A                            CMB,B5   58,B6
          0 00007A  0381 FF95                            BLE      s:1494,PREL

      908     1512    1           GH_IGNORE_TRAP=-1;

   1512   0 00007C  8900 0000 0000  xsym                 LBT,'FFFF'X       GH_IGNORE_TRAP
   1512   0 00007F       FFFF

      909     1513    1           RETURN;

   1513   0 000080  C380 0000 0000  xent                 LNJ,B4   X6A_ARET

      910     1514
      911     1515        %EJECT;
PL6.E3A0      #005=GIR$GASP File=GIR$SCREECH.:E05TSI                             TUE 07/29/97 21:49 Page:158  
      912     1516
      913     1517    1   GIR$INITCHANS: ENTRY(SCREECH);

   1517   0 000083  D380 0000 0000  xent GIR$INITCHANS   LNJ,B5   X6A_AUTO_1
          0 000086       000E 0001                       DC       14,1

      914     1518
      915     1519    1           CHN$=G$BOBCAT.CHNLOW$;

   1519   0 000088  EC80 0000 0000  xsym                 LDB,B6   G$BOBCAT$
          0 00008B  DCC6 0038                            LDB,B5   56,B6
          0 00008D  DFC7 0006                            STB,B5   CHN$,AUTO

      916     1520    1           CHN$ = PINCRW(CHN$,8*SIZEW(KH$CHN)); /* Skip central system */

   1520   0 00008F  CBC5 0100                            LAB,B4   256,B5
          0 000091  CFC7 0006                            STB,B4   CHN$,AUTO

      917     1521    2           DO WHILE(CHN$<=G$BOBCAT.CHNHI$);

   1521   0 000093  CDC6 003A                            CMB,B4   58,B6
          0 000095  0301 0057                            BG       s:1533,PREL

      918     1522    2              KH$IO.FNC=%GH#IO_OTPCTR;

   1522   0 000097  6C01                                 LDV,R6   1
          0 000098  EAC7 0008                            SRM,R6,'003F'X    KH$IO,AUTO
          0 00009A       003F

      919     1523    2              KH$IO.CTR='8000'X;

   1523   0 00009B  D870 8000                            LDR,R5   -32768,IMO
          0 00009D  DF47 0009                            STR,R5   KH$IO+1,AUTO

      920     1524    2              GH_IGNORE_TRAP=15;

   1524   0 00009F  4C0F                                 LDV,R4   15
PL6.E3A0      #005=GIR$GASP File=GIR$SCREECH.:E05TSI                             TUE 07/29/97 21:49 Page:159  
          0 0000A0  CF00 0000 0000  xsym                 STR,R4   GH_IGNORE_TRAP

      921     1525    2              IF KH$CHN.CHNBIT0_9 ~= 0 AND KH$CHN.CTR

   1525   0 0000A3  ECC7 0006                            LDB,B6   CHN$,AUTO
          0 0000A5  8286                                 LB,'FFC0'X        ,B6
          0 0000A6       FFC0
          0 0000A7  0581 0038                            BBF      s:1531,PREL
          0 0000A9  82C6 0007                            LB,'0020'X        7,B6
          0 0000AB       0020
          0 0000AC  0581 0033                            BBF      s:1531,PREL
          0 0000AE  B846 0002                            LDR,R3   2,B6
          0 0000B0  B570 F500                            AND,R3   -2816,IMO
          0 0000B2  B970 2100                            CMR,R3   8448,IMO
          0 0000B4  0981 0006                            BNE      s:1525+24,PREL
          0 0000B6  DCC7 0004                            LDB,B5   @SCREECH,AUTO
          0 0000B8  8985                                 CMZ      ,B5
          0 0000B9  0801 0018                            BAL      s:1530,PREL
          0 0000BB  B846 0002                            LDR,R3   2,B6
          0 0000BD  B570 FF00                            AND,R3   -256,IMO
          0 0000BF  B970 2100                            CMR,R3   8448,IMO
          0 0000C1  0981 001E                            BNE      s:1531,PREL
          0 0000C3  B800 0000 0000  xsym                 LDR,R3   GH_KEEPDELTA
          0 0000C6  3901 000B                            BEZ,R3   s:1530,PREL
          0 0000C8  A806                                 LDR,R2   ,B6
          0 0000C9  2046                                 SOR,R2   6
          0 0000CA  2045                                 SOR,R2   5
          0 0000CB  9800 0000 0000  xsym                 LDR,R1   GD_CHN
          0 0000CE  104B                                 SOR,R1   11
          0 0000CF  A951                                 CMR,R2   R1
          0 0000D0  0901 000F                            BE       s:1531,PREL

      922     1526    2                AND ((KH$CHN.DVCID&'F5'X)='21'X AND SCREECH OR
      923     1527    2                (KH$CHN.DVCID&'FF'X)='21'X AND (GH_KEEPDELTA=0
      924     1528    2                OR KH$CHN.CHNBIT0_9/32~=GD_CHN/2048))
      925     1529    2              THEN
      926     1530    2                 CALL KHI$IO_OTP(KH$CHN,KH$IO);
PL6.E3A0      #005=GIR$GASP File=GIR$SCREECH.:E05TSI                             TUE 07/29/97 21:49 Page:160  

   1530   0 0000D2  DBC7 0008                            LAB,B5   KH$IO,AUTO
          0 0000D4  DFC7 000C                            STB,B5   KH$IO+4,AUTO
          0 0000D6  EFC7 000A                            STB,B6   KH$IO+2,AUTO
          0 0000D8  BBC7 000A                            LAB,B3   KH$IO+2,AUTO
          0 0000DA  CBF0 0200                            LAB,B4   512,IMO
          0 0000DC  E380 0000 0000  xent                 LNJ,B6   KHI$IO_OTP
          0 0000DF       0001                            DC       s:1531,PREL

      927     1531    2              CHN$=PINCRW(CHN$,SIZEW(KH$CHN));

   1531   0 0000E0  ECC7 0006                            LDB,B6   CHN$,AUTO
          0 0000E2  DBC6 0020                            LAB,B5   32,B6
          0 0000E4  DFC7 0006                            STB,B5   CHN$,AUTO

      928     1532    2              END;

   1532   0 0000E6  EC80 0000 0000  xsym                 LDB,B6   G$BOBCAT$
          0 0000E9  DDC6 003A                            CMB,B5   58,B6
          0 0000EB  0381 FFAB                            BLE      s:1522,PREL

      929     1533    1           GH_IGNORE_TRAP=-1;

   1533   0 0000ED  8900 0000 0000  xsym                 LBT,'FFFF'X       GH_IGNORE_TRAP
   1533   0 0000F0       FFFF

      930     1534    1           RETURN;

   1534   0 0000F1  C380 0000 0000  xent                 LNJ,B4   X6A_ARET
      931     1535
      932     1536
      933     1537    1   END GIR$GASP;

PL6.E3A0      #005=GIR$GASP File=GIR$SCREECH.:E05TSI                             TUE 07/29/97 21:49 Page:161  
--  Include file information  --

   KH$IO.:E05TOU  is referenced.
   KA_LCT_E.:E05TOU  is referenced.
   KA_GLBASM_E.:E05TOU  is referenced.
   KH$CHN.:E05TOU  is referenced.
   KW_ALCT_E.:E05TOU  is referenced.
   KW_LCT_E.:E05TOU  is referenced.
   GH_IOFNC_E.:E05TOU  is referenced.
   G$BOBCAT_M.:E05TOU  is referenced.
   G_LCP6_E.:E05TOU  was found in the system file and is referenced.
   GT_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   KI_CP6.:E05TOU  was found in the system file and is referenced.
   GF_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GM_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GU_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GJ_LCP6_M.:E05TOU  was found in the system file and is never referenced.
   GH_LCP6_M.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure GIR$GASP.
PL6.E3A0      #005=GIR$GASP File=GIR$SCREECH.:E05TSI                             TUE 07/29/97 21:49 Page:162  

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @SCREECH                   6-0-0/w PTR         r     1 CHN$
     8-0-0/w STRC(32)    r     1 KH$IO                     *0-0-0/w BIT         r     1 SCREECH

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 G$BOBCAT$                  0-0-0/w UBIN(16)    r     1 GD_CHN
     0-0-0/w SBIN(16)    r     1 GH_IGNORE_TRAP             0-0-0/w SBIN(16)    r     1 GH_KEEPDELTA

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
HexLoc.c.b A Datatyp(siz) R M Lvl/name                 HexLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(1696)  r     1 G$BOBCAT                   0-0-0/w STRC(512)   r     1 KH$CHN


   Procedure GIR$GASP requires 244 words for executable code.
   Procedure GIR$GASP requires 14 words of local(AUTO) storage.

    No errors detected in file GIR$SCREECH.:E05TSI    .
PL6.E3A0      #005=GIR$GASP File=GIR$SCREECH.:E05TSI                             TUE 07/29/97 21:49 Page:163  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #005=GIR$GASP File=GIR$SCREECH.:E05TSI                             TUE 07/29/97 21:49 Page:164  
          MINI XREF LISTING

CHN$
      1249**DCL      1265--IMP-PTR  1492<<ASSIGN   1493>>DOWHILE  1494>>IF       1494>>IF       1498>>CALL
      1502>>CALL     1505>>IF       1508>>CALL     1510<<ASSIGN   1510>>ASSIGN   1519<<ASSIGN   1520<<ASSIGN
      1520>>ASSIGN   1521>>DOWHILE  1525>>IF       1525>>IF       1525>>IF       1525>>IF       1525>>IF
      1530>>CALL     1531<<ASSIGN   1531>>ASSIGN
G$BOBCAT.CHNHI$
      1242**DCL      1493>>DOWHILE  1521>>DOWHILE
G$BOBCAT.CHNLOW$
      1242**DCL      1492>>ASSIGN   1519>>ASSIGN
G$BOBCAT$
      1233**DCL      1235--IMP-PTR  1492>>ASSIGN   1493>>DOWHILE  1519>>ASSIGN   1521>>DOWHILE
GD_CHN
      1231**DCL      1525>>IF
GH_IGNORE_TRAP
      1229**DCL      1497<<ASSIGN   1501<<ASSIGN   1512<<ASSIGN   1524<<ASSIGN   1533<<ASSIGN
GH_KEEPDELTA
      1230**DCL      1525>>IF
KH$CHN
      1265**DCL      1498<>CALL     1502<>CALL     1508<>CALL     1510--ASSIGN   1520--ASSIGN   1530<>CALL
      1531--ASSIGN
KH$CHN.ATTR
      1298**DCL      1494>>IF       1505>>IF
KH$CHN.CHNBIT0_9
      1272**DCL      1525>>IF       1525>>IF
KH$CHN.CTR
      1308**DCL      1525>>IF
KH$CHN.DED
      1325**DCL      1494>>IF
KH$CHN.DVCID
      1291**DCL      1525>>IF       1525>>IF
KH$CHN.TERMID.TERM
      1361**DCL      1370--REDEF
PL6.E3A0      #005=GIR$GASP File=GIR$SCREECH.:E05TSI                             TUE 07/29/97 21:49 Page:165  
KH$IO
      1387**DCL      1498<>CALL     1502<>CALL     1508<>CALL     1530<>CALL
KH$IO.ASNSTT
      1396**DCL      1397--REDEF    1403--REDEF    1408--REDEF    1412--REDEF    1416--REDEF    1420--REDEF
      1427--REDEF    1433--REDEF    1439--REDEF    1444--REDEF    1451--REDEF    1454--REDEF    1458--REDEF
      1465--REDEF    1469--REDEF    1473--REDEF    1477--REDEF    1482--REDEF    1486--REDEF
KH$IO.CTR
      1444**DCL      1507<<ASSIGN   1523<<ASSIGN
KH$IO.FNC
      1393**DCL      1506<<ASSIGN   1522<<ASSIGN
KH$IO.LCTBYT.ADR
      1403**DCL      1496<<ASSIGN   1500<<ASSIGN
KH$IO.LCTBYT.DAT
      1403**DCL      1495<<ASSIGN   1499<<ASSIGN
KHI$IO_OTP
      1227**DCL-ENT  1508--CALL     1530--CALL
KHI$IO_OTPLCTBYT
      1226**DCL-ENT  1498--CALL     1502--CALL
SCREECH
      1248**DCL        12--PROC     1517--ENTRY    1525>>IF
