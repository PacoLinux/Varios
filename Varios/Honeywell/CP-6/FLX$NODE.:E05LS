VERSION E05

PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:1    
        1        1        /*M* FLI$NODE - node interpreting routines */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* THI=1,PLM=3 */
        8        8        FLI$NODE_TAPE_OD: PROC( NODE$ ) ALTRET;
        9        9        /*F*  NAME: FLI$NODE_TAPE
       10       10              PURPOSE: Interpret TAPE/OD source and destination nodes.
       11       11        */
       12       12
       13       13    1   DCL NODE$ PTR ALIGNED;                  /* To TAPE_DEST node                  */
       14       14
       15       15         /***
       16       16          *** INCLUDE
       17       17          ***/
       18       18
       19       19        %INCLUDE CP_6;
       20     5578        %INCLUDE FLI_DATA_R;
       21     6992        %INCLUDE FLS_DATA_R;
       22     8792        %INCLUDE FLE_DATA_R;
       23    14743        %INCLUDE XU_MACRO_C;
       24    17849        %INCLUDE CP_6_SUBS;
       25    18389
       26    18390         /***
       27    18391          *** ENTRY
       28    18392          ***/
       29    18393
       30    18394    1   DCL FLI$USE_SNLIST_NODE ENTRY(1) ALTRET;
       31    18395    1   DCL FLI$RPT_ERR ENTRY(5);
       32    18396
       33    18397         /***
       34    18398          *** AUTO
       35    18399          ***/
       36    18400
       37    18401    1   DCL NODEX SBIN AUTO;
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:2    
       38    18402    1   DCL SUBNODEX SBIN AUTO;
       39    18403    1   DCL SUBLK$ PTR AUTO;
       40    18404    1   DCL SUBNODE$ PTR AUTO;
       41    18405    1   DCL TEMP SBIN AUTO;
       42    18406
       43    18407         /***
       44    18408          *** BASED
       45    18409          ***/
       46    18410
       47    18411        %PARSE$OUT( STCLASS="BASED(NODE$)" );
       48    18456        %PARSE$SYM( STCLASS=BASED );
       49    18494    1   DCL 1 TEXTC BASED CALIGNED,
       50    18495    1         2 L UBIN BYTE CALIGNED,
       51    18496    1         2 C CHAR(TEXTC.L);
       52    18497
       53    18498        /****************************************/
       54    18499
       55    18500         /***
       56    18501          *** Set up defaults.
       57    18502          ***/
       58    18503
       59    18504    1      TAPE_OPEN.V.DENSITY# = 0;
       60    18505    1      TAPE_OPEN.V.EXPIRE# = %NEVER#;
       61    18506    1      TAPE_OPEN.V.XTEND# = '0'B;
       62    18507    1      TAPE_OPEN.V.VOLACCESS# = 0;
       63    18508    1      TAPE_OPEN.V.FSN# = 0;
       64    18509    1      TAPE_OPEN.V.VOL# = 0;
       65    18510    1      TAPE_OPEN.V.BLKL# = 4 * 4096;
       66    18511    1      TAPE_OPEN.V.IOERROK# = '0'B;
       67    18512    1      ARCOM_OPTIONS.IMMUPDATE = '0'B;
       68    18513
       69    18514    2      DO CASE( OUT$BLK.CODE );
       70    18515    2       CASE( %TAPE_DEST );                 /* Destination => output              */
       71    18516    2         TAPE_OPEN.V.RES# = 'LT';
       72    18517    2         TAPE_OPEN.V.FUN# = %CREATE#;
       73    18518    2         TAPE_OPEN.V.CVOL# = %YES#;
       74    18519    2         TAPE_OPEN.V.ASN# = %TAPE#;
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:3    
       75    18520    2       CASE( %TAPE_SOURCE );               /* Source => input                    */
       76    18521    2         TAPE_OPEN.V.RES# = 'LT';
       77    18522    2         TAPE_OPEN.V.FUN# = %IN#;
       78    18523    2         TAPE_OPEN.V.CVOL# = %YES#;
       79    18524    2         TAPE_OPEN.V.ASN# = %TAPE#;
       80    18525    2       CASE( %OD_DEST );                   /* Destination => output              */
       81    18526    2         TAPE_OPEN.V.RES# = 'OD';
       82    18527    2         TAPE_OPEN.V.FUN# = %CREATE#;
       83    18528    2         TAPE_OPEN.V.CVOL# = %NO#;
       84    18529    2         TAPE_OPEN.V.ASN# = %FILE#;
       85    18530    2       CASE( %OD_SOURCE );                 /* Source => input                    */
       86    18531    2         TAPE_OPEN.V.RES# = 'OD';
       87    18532    2         TAPE_OPEN.V.FUN# = %IN#;
       88    18533    2         TAPE_OPEN.V.CVOL# = %NO#;
       89    18534    2         TAPE_OPEN.V.ASN# = %FILE#;
       90    18535    2       CASE( ELSE );                       /* Bad node passed by caller          */
       91    18536    2         CALL M$XXX;
       92    18537    2       END;
       93    18538
       94    18539         /***
       95    18540          *** Interpret nodes.
       96    18541          ***/
       97    18542
       98    18543    2      DO NODEX=0 TO OUT$BLK.NSUBLKS-1;
       99    18544    2         SUBLK$ = OUT$BLK.SUBLK$(NODEX);
      100    18545    3         DO CASE( SUBLK$->OUT$BLK.CODE );
      101    18546    3          CASE( %TAPE_SET, %OD_SET );
      102    18547    3            CALL FLI_MULTI_SET ALTRET( JUSTALT );
      103    18548    3          CASE( %TAPE_OPTIONS );
      104    18549    4            DO SUBNODEX = 0 TO SUBLK$->OUT$BLK.NSUBLKS - 1;
      105    18550    4               SUBNODE$ = SUBLK$->OUT$BLK.SUBLK$(SUBNODEX);
      106    18551    5               DO CASE( SUBNODE$->OUT$BLK.CODE );
      107    18552    5                CASE( %DENSITY );
      108    18553    5                  TAPE_OPEN.V.DENSITY# = SUBNODE$->OUT$BLK.SUBLK$(0)->OUT$BLK.CODE;
      109    18554    5                CASE( %VOLACCESS );
      110    18555    5                  TAPE_OPEN.V.VOLACCESS# = SUBNODE$->OUT$BLK.SUBLK$(0)->OUT$BLK.CODE;
      111    18556    5                CASE( %EXPIRE );
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:4    
      112    18557    5                  IF SUBNODE$->OUT$BLK.NSUBLKS = 0
      113    18558    5                   THEN TAPE_OPEN.V.EXPIRE# = %NEVER#;
      114    18559    6                   ELSE DO;
      115    18560    6                     CALL CHARBIN( TAPE_OPEN.V.EXPIRE#,
      116    18561    6                       SUBNODE$->OUT$BLK.SUBLK$(0)->OUT$SYM.TEXT );
      117    18562    6                     END;
      118    18563    5                CASE( %BLOCK );
      119    18564    5                  CALL CHARBIN( NBR_GRANS_PER_TAPE_BUF, SUBNODE$->OUT$BLK.SUBLK$(0)->
             18564                           OUT$SYM.TEXT );
      120    18565    5                  TAPE_OPEN.V.BLKL# = NBR_GRANS_PER_TAPE_BUF * 4096;
      121    18566    5                  IF NBR_GRANS_PER_TAPE_BUF > ( 99999 / ( 4096 * 9 / 8 ) )
      122    18567    6                   THEN DO; /* 99999 is ANS limit, 4096 binary block size,
      123    18568                           9 / 8 conversion factor from binary to ASCII */
      124    18569    6                     CALL FLI$RPT_ERR ( E_BLOCK_LIMIT );
      125    18570    6                     ALTRETURN;
      126    18571    6                     END;
      127    18572    5                CASE( %EXTEND );
      128    18573    5                  TAPE_OPEN.V.XTEND# = %YES#;
      129    18574    5                CASE( %VOL );
      130    18575    5                  CALL CHARBIN( TEMP,
      131    18576    5                    SUBNODE$->OUT$BLK.SUBLK$(0)->OUT$SYM.TEXT );
      132    18577    5                  TAPE_OPEN.V.VOL# = TEMP;
      133    18578    5                CASE( %FSN );
      134    18579    5                  CALL CHARBIN( TEMP,
      135    18580    5                    SUBNODE$->OUT$BLK.SUBLK$(0)->OUT$SYM.TEXT );
      136    18581    5                  TAPE_OPEN.V.FSN# = TEMP;
      137    18582    5                CASE( %IMMUPDATE );
      138    18583    5                  ARCOM_OPTIONS.IMMUPDATE = %YES#;
      139    18584    5                CASE( %IOERRORCIY );
      140    18585    5                  ARCOM_OPTIONS.IOERRORCI = %YES#;
      141    18586    5                CASE( %IOERRORCIN );
      142    18587    5                  ARCOM_OPTIONS.IOERRORCI = %NO#;
      143    18588    5                CASE( %IOERRORCOY );
      144    18589    5                  ARCOM_OPTIONS.IOERRORCO = %YES#;
      145    18590    5                CASE( %IOERRORCON );
      146    18591    5                  ARCOM_OPTIONS.IOERRORCO = %NO#;
      147    18592    5                CASE( %DUPLICATE_TAPESET );
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:5    
      148    18593    5                  ARCOM_OPTIONS.DUPLICATE_TAPESET = %YES#;
      149    18594
      150    18595    5                END;
      151    18596    4               END;
      152    18597    3          END;
      153    18598    2         END;
      154    18599    1      RETURN;
      155    18600
      156    18601    1   JUSTALT: ;
      157    18602    1      ALTRETURN;
      158    18603
      159    18604        /****************************************/
      160    18605    1   FLI_MULTI_SET: PROC ALTRET;
      161    18606        /*F*  NAME: FLI_MULTI_SET
      162    18607              PURPOSE: Process MULTI_SET node.
      163    18608        */
      164    18609
      165    18610         /***
      166    18611          *** AUTO
      167    18612          ***/
      168    18613
      169    18614    2   DCL I SBIN AUTO;
      170    18615    2   DCL TEMP SBIN AUTO;
      171    18616
      172    18617         /***
      173    18618          *** BASED
      174    18619          ***/
      175    18620
      176    18621    2   DCL CTSN CHAR(6) AUTO;
      177    18622    2   DCL 1 CTSNCHARS REDEF CTSN,
      178    18623    2         2 XXXX CHAR(4),
      179    18624    2         2 N1 UBIN BYTE CALIGNED,
      180    18625    2         2 N2 UBIN BYTE CALIGNED;
      181    18626
      182    18627        /****************************************/
      183    18628
      184    18629    3      DO SUBNODEX=0 TO SUBLK$->OUT$BLK.NSUBLKS-1;
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:6    
      185    18630    3         SUBNODE$ = SUBLK$->OUT$BLK.SUBLK$(SUBNODEX);
      186    18631    3         CALL FLI$USE_SNLIST_NODE( SUBNODE$ ) ALTRET( JUSTALT );
      187    18632    3         END;
      188    18633    2      RETURN;
      189    18634
      190    18635    2   JUSTALT: ;
      191    18636    2      ALTRETURN;
      192    18637
      193    18638    2   END FLI_MULTI_SET;
      194    18639
      195    18640    1   END FLI$NODE_TAPE_OD;
      196    18641        %EOD;

PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:7    
--  Include file information  --

   CP_6_SUBS.:E05TOU  is referenced.
   XU_MACRO_C.:E05TOU  is referenced.
   FL_PERR_C.:E05TOU  is referenced.
   FLE_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   FLS_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   B_MICROPS_C.:E05TOU  is referenced.
   FLB_SUBS_C.:E05TOU  is referenced.
   FLI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure FLI$NODE_TAPE_OD.

   Procedure FLI$NODE_TAPE_OD requires 305 words for executable code.
   Procedure FLI$NODE_TAPE_OD requires 18 words of local(AUTO) storage.

PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:8    

 Object Unit name= FLI$NODE_TAPE_OD                           File name= FLX$NODE.:E05TOU
 UTS= JUL 29 '97 16:33:02.32 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   DCB   even  none     0      0  M$PRE_RET
    2   Data  even  none    20     24  FLI$NODE_TAPE_OD
    3   DCB   even  none     0      0  M$TSN_USED
    4   DCB   even  none     0      0  M$STATUS
    5   DCB   even  none     0      0  M$REBUILD
    6   DCB   even  none     0      0  M$ARCHIVE
    7   DCB   even  none     0      0  M$NODATA_LIST
    8  RoData even  UTS      2      2  FLI$NODE_TAPE_OD
    9   Proc  even  none   305    461  FLI$NODE_TAPE_OD
   10  RoData even  none     7      7  FLI$NODE_TAPE_OD

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     9      0   yes    yes     yes      Std        1  FLI$NODE_TAPE_OD
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:9    

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       5 FLI$RPT_ERR
 yes     yes           Std       1 FLI$USE_SNLIST_NODE
                       nStd      0 X66_AUTO_1
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  TAPE_DCBLIST$                         TAPE_OPEN
     SNVECLIST$                            NBR_GRANS_PER_TAPE_BUF                DPLIST$
     DPRESLIST$                            DISK_FILE_SPEC$                       SPECCHARS
     EFTWORD                               M$PRE_RET                             RET_CMDS_NAME
     M$TSN_USED                            M$STATUS                              M$REBUILD
     M$ARCHIVE                             M$NODATA_LIST                         BLK_TAG$
     BLK_TAG0$                             NBR_BYTES_TO_MOVE                     DISK_GRAN$
     BLOCK_GRAN$                      r    EFT_CVOL_FILE                    r    EFT_RESTRICT_FILE
     TSN_USED_NAME                         BACKUP_NAME                      r    ARCHIVE_NAME
r    PRIME_FILE                       r    DUAL_FILE                             REBUILD_NAME
     REBUILD_DIR_KEY                       REBUILD_KEY                           NODATA_FILE_NAME
     NODATA_KEY                            ARCOM_OPTIONS                    r    E_BLOCK_LIMIT
     B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:10   


        1        1        /*M* FLI$NODE - node interpreting routines */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* THI=1,PLM=3 */
        8        8        FLI$NODE_TAPE_OD: PROC( NODE$ ) ALTRET;

      8  9 000000   000000 700200 xent  FLI$NODE_TA* TSX0  ! X66_AUTO_1
         9 000001   000022 000001                    ZERO    18,1

        9        9        /*F*  NAME: FLI$NODE_TAPE
       10       10              PURPOSE: Interpret TAPE/OD source and destination nodes.
       11       11        */
       12       12
       13       13    1   DCL NODE$ PTR ALIGNED;                  /* To TAPE_DEST node                  */
       14       14
       15       15         /***
       16       16          *** INCLUDE
       17       17          ***/
       18       18
       19       19        %INCLUDE CP_6;
       20     5578        %INCLUDE FLI_DATA_R;
       21     6992        %INCLUDE FLS_DATA_R;
       22     8792        %INCLUDE FLE_DATA_R;
       23    14743        %INCLUDE XU_MACRO_C;
       24    17849        %INCLUDE CP_6_SUBS;
       25    18389
       26    18390         /***
       27    18391          *** ENTRY
       28    18392          ***/
       29    18393
       30    18394    1   DCL FLI$USE_SNLIST_NODE ENTRY(1) ALTRET;
       31    18395    1   DCL FLI$RPT_ERR ENTRY(5);
       32    18396
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:11   
       33    18397         /***
       34    18398          *** AUTO
       35    18399          ***/
       36    18400
       37    18401    1   DCL NODEX SBIN AUTO;
       38    18402    1   DCL SUBNODEX SBIN AUTO;
       39    18403    1   DCL SUBLK$ PTR AUTO;
       40    18404    1   DCL SUBNODE$ PTR AUTO;
       41    18405    1   DCL TEMP SBIN AUTO;
       42    18406
       43    18407         /***
       44    18408          *** BASED
       45    18409          ***/
       46    18410
       47    18411        %PARSE$OUT( STCLASS="BASED(NODE$)" );
       48    18456        %PARSE$SYM( STCLASS=BASED );
       49    18494    1   DCL 1 TEXTC BASED CALIGNED,
       50    18495    1         2 L UBIN BYTE CALIGNED,
       51    18496    1         2 C CHAR(TEXTC.L);
       52    18497
       53    18498        /****************************************/
       54    18499
       55    18500         /***
       56    18501          *** Set up defaults.
       57    18502          ***/
       58    18503
       59    18504    1      TAPE_OPEN.V.DENSITY# = 0;

  18504  9 000002   000000 236003                    LDQ     0,DU
         9 000003   000066 552004 xsym               STBQ    TAPE_OPEN+54,'04'O

       60    18505    1      TAPE_OPEN.V.EXPIRE# = %NEVER#;

  18505  9 000004   000001 335007                    LCA     1,DL
         9 000005   000057 755000 xsym               STA     TAPE_OPEN+47

       61    18506    1      TAPE_OPEN.V.XTEND# = '0'B;
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:12   

  18506  9 000006   000000 236000 10                 LDQ     0
         9 000007   000060 356000 xsym               ANSQ    TAPE_OPEN+48

       62    18507    1      TAPE_OPEN.V.VOLACCESS# = 0;

  18507  9 000010   000001 236000 10                 LDQ     1
         9 000011   000063 356000 xsym               ANSQ    TAPE_OPEN+51

       63    18508    1      TAPE_OPEN.V.FSN# = 0;

  18508  9 000012   000000 220003                    LDX0    0,DU
         9 000013   000066 740000 xsym               STX0    TAPE_OPEN+54

       64    18509    1      TAPE_OPEN.V.VOL# = 0;

  18509  9 000014   000000 236003                    LDQ     0,DU
         9 000015   000061 552040 xsym               STBQ    TAPE_OPEN+49,'40'O

       65    18510    1      TAPE_OPEN.V.BLKL# = 4 * 4096;

  18510  9 000016   040000 221003                    LDX1    16384,DU
         9 000017   000052 741000 xsym               STX1    TAPE_OPEN+42

       66    18511    1      TAPE_OPEN.V.IOERROK# = '0'B;

  18511  9 000020   000002 236000 10                 LDQ     2
         9 000021   000060 356000 xsym               ANSQ    TAPE_OPEN+48

       67    18512    1      ARCOM_OPTIONS.IMMUPDATE = '0'B;

  18512  9 000022   000031 236000 xsym               LDQ     B_VECTNIL+25
         9 000023   000000 356000 xsym               ANSQ    ARCOM_OPTIONS

       68    18513
       69    18514    2      DO CASE( OUT$BLK.CODE );

PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:13   
  18514  9 000024   200003 470500                    LDP0    @NODE$,,AUTO
         9 000025   000000 471500                    LDP1    0,,PR0
         9 000026   100000 722100                    LXL2    0,,PR1
         9 000027   000026 102003                    CMPX2   22,DU
         9 000030   000032 602012 9                  TNC     s:18514+6,X2
         9 000031   000140 710000 9                  TRA     s:18536
         9 000032   000140 710000 9                  TRA     s:18536
         9 000033   000140 710000 9                  TRA     s:18536
         9 000034   000140 710000 9                  TRA     s:18536
         9 000035   000060 710000 9                  TRA     s:18516
         9 000036   000075 710000 9                  TRA     s:18521
         9 000037   000140 710000 9                  TRA     s:18536
         9 000040   000140 710000 9                  TRA     s:18536
         9 000041   000140 710000 9                  TRA     s:18536
         9 000042   000140 710000 9                  TRA     s:18536
         9 000043   000140 710000 9                  TRA     s:18536
         9 000044   000140 710000 9                  TRA     s:18536
         9 000045   000140 710000 9                  TRA     s:18536
         9 000046   000140 710000 9                  TRA     s:18536
         9 000047   000140 710000 9                  TRA     s:18536
         9 000050   000140 710000 9                  TRA     s:18536
         9 000051   000140 710000 9                  TRA     s:18536
         9 000052   000112 710000 9                  TRA     s:18526
         9 000053   000140 710000 9                  TRA     s:18536
         9 000054   000140 710000 9                  TRA     s:18536
         9 000055   000140 710000 9                  TRA     s:18536
         9 000056   000140 710000 9                  TRA     s:18536
         9 000057   000125 710000 9                  TRA     s:18531

       70    18515    2       CASE( %TAPE_DEST );                 /* Destination => output              */

       71    18516    2         TAPE_OPEN.V.RES# = 'LT';

  18516  9 000060   000000 236000 8                  LDQ     0
         9 000061   777777 376003                    ANQ     -1,DU
         9 000062   040040 276007                    ORQ     16416,DL
         9 000063   000050 756000 xsym               STQ     TAPE_OPEN+40
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:14   

       72    18517    2         TAPE_OPEN.V.FUN# = %CREATE#;

  18517  9 000064   003000 236007                    LDQ     1536,DL
         9 000065   000045 552010 xsym               STBQ    TAPE_OPEN+37,'10'O

       73    18518    2         TAPE_OPEN.V.CVOL# = %YES#;

  18518  9 000066   000044 236000 xsym               LDQ     TAPE_OPEN+36
         9 000067   000003 376000 10                 ANQ     3
         9 000070   000004 276007                    ORQ     4,DL
         9 000071   000044 756000 xsym               STQ     TAPE_OPEN+36

       74    18519    2         TAPE_OPEN.V.ASN# = %TAPE#;

  18519  9 000072   000002 236007                    LDQ     2,DL
         9 000073   000045 552004 xsym               STBQ    TAPE_OPEN+37,'04'O
         9 000074   000142 710000 9                  TRA     s:18543

       75    18520    2       CASE( %TAPE_SOURCE );               /* Source => input                    */

       76    18521    2         TAPE_OPEN.V.RES# = 'LT';

  18521  9 000075   000000 236000 8                  LDQ     0
         9 000076   777777 376003                    ANQ     -1,DU
         9 000077   040040 276007                    ORQ     16416,DL
         9 000100   000050 756000 xsym               STQ     TAPE_OPEN+40

       77    18522    2         TAPE_OPEN.V.FUN# = %IN#;

  18522  9 000101   002000 236007                    LDQ     1024,DL
         9 000102   000045 552010 xsym               STBQ    TAPE_OPEN+37,'10'O

       78    18523    2         TAPE_OPEN.V.CVOL# = %YES#;

  18523  9 000103   000044 236000 xsym               LDQ     TAPE_OPEN+36
         9 000104   000003 376000 10                 ANQ     3
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:15   
         9 000105   000004 276007                    ORQ     4,DL
         9 000106   000044 756000 xsym               STQ     TAPE_OPEN+36

       79    18524    2         TAPE_OPEN.V.ASN# = %TAPE#;

  18524  9 000107   000002 236007                    LDQ     2,DL
         9 000110   000045 552004 xsym               STBQ    TAPE_OPEN+37,'04'O
         9 000111   000142 710000 9                  TRA     s:18543

       80    18525    2       CASE( %OD_DEST );                   /* Destination => output              */

       81    18526    2         TAPE_OPEN.V.RES# = 'OD';

  18526  9 000112   000001 236000 8                  LDQ     1
         9 000113   777777 376003                    ANQ     -1,DU
         9 000114   040040 276007                    ORQ     16416,DL
         9 000115   000050 756000 xsym               STQ     TAPE_OPEN+40

       82    18527    2         TAPE_OPEN.V.FUN# = %CREATE#;

  18527  9 000116   003000 236007                    LDQ     1536,DL
         9 000117   000045 552010 xsym               STBQ    TAPE_OPEN+37,'10'O

       83    18528    2         TAPE_OPEN.V.CVOL# = %NO#;

  18528  9 000120   000003 236000 10                 LDQ     3
         9 000121   000044 356000 xsym               ANSQ    TAPE_OPEN+36

       84    18529    2         TAPE_OPEN.V.ASN# = %FILE#;

  18529  9 000122   000001 236007                    LDQ     1,DL
         9 000123   000045 552004 xsym               STBQ    TAPE_OPEN+37,'04'O
         9 000124   000142 710000 9                  TRA     s:18543

       85    18530    2       CASE( %OD_SOURCE );                 /* Source => input                    */

       86    18531    2         TAPE_OPEN.V.RES# = 'OD';
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:16   

  18531  9 000125   000001 236000 8                  LDQ     1
         9 000126   777777 376003                    ANQ     -1,DU
         9 000127   040040 276007                    ORQ     16416,DL
         9 000130   000050 756000 xsym               STQ     TAPE_OPEN+40

       87    18532    2         TAPE_OPEN.V.FUN# = %IN#;

  18532  9 000131   002000 236007                    LDQ     1024,DL
         9 000132   000045 552010 xsym               STBQ    TAPE_OPEN+37,'10'O

       88    18533    2         TAPE_OPEN.V.CVOL# = %NO#;

  18533  9 000133   000003 236000 10                 LDQ     3
         9 000134   000044 356000 xsym               ANSQ    TAPE_OPEN+36

       89    18534    2         TAPE_OPEN.V.ASN# = %FILE#;

  18534  9 000135   000001 236007                    LDQ     1,DL
         9 000136   000045 552004 xsym               STBQ    TAPE_OPEN+37,'04'O
         9 000137   000142 710000 9                  TRA     s:18543

       90    18535    2       CASE( ELSE );                       /* Bad node passed by caller          */

       91    18536    2         CALL M$XXX;

  18536  9 000140   000003 713400                    CLIMB   3
         9 000141   000000 401760                    pmme    nvectors=0

       92    18537    2       END;

       93    18538
       94    18539         /***
       95    18540          *** Interpret nodes.
       96    18541          ***/
       97    18542
       98    18543    2      DO NODEX=0 TO OUT$BLK.NSUBLKS-1;
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:17   

  18543  9 000142   200004 450100                    STZ     NODEX,,AUTO
         9 000143   000422 710000 9                  TRA     s:18598+1

       99    18544    2         SUBLK$ = OUT$BLK.SUBLK$(NODEX);

  18544  9 000144   200003 470500                    LDP0    @NODE$,,AUTO
         9 000145   000000 471500                    LDP1    0,,PR0
         9 000146   200004 720100                    LXL0    NODEX,,AUTO
         9 000147   100003 236110                    LDQ     3,X0,PR1
         9 000150   200006 756100                    STQ     SUBLK$,,AUTO

      100    18545    3         DO CASE( SUBLK$->OUT$BLK.CODE );

  18545  9 000151   200006 473500                    LDP3    SUBLK$,,AUTO
         9 000152   300000 721100                    LXL1    0,,PR3
         9 000153   000022 101003                    CMPX1   18,DU
         9 000154   000156 602011 9                  TNC     s:18545+5,X1
         9 000155   000421 710000 9                  TRA     s:18598
         9 000156   000200 710000 9                  TRA     s:18547
         9 000157   000203 710000 9                  TRA     s:18549
         9 000160   000421 710000 9                  TRA     s:18598
         9 000161   000421 710000 9                  TRA     s:18598
         9 000162   000421 710000 9                  TRA     s:18598
         9 000163   000421 710000 9                  TRA     s:18598
         9 000164   000421 710000 9                  TRA     s:18598
         9 000165   000421 710000 9                  TRA     s:18598
         9 000166   000421 710000 9                  TRA     s:18598
         9 000167   000421 710000 9                  TRA     s:18598
         9 000170   000421 710000 9                  TRA     s:18598
         9 000171   000421 710000 9                  TRA     s:18598
         9 000172   000421 710000 9                  TRA     s:18598
         9 000173   000421 710000 9                  TRA     s:18598
         9 000174   000421 710000 9                  TRA     s:18598
         9 000175   000421 710000 9                  TRA     s:18598
         9 000176   000421 710000 9                  TRA     s:18598
         9 000177   000200 710000 9                  TRA     s:18547
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:18   

      101    18546    3          CASE( %TAPE_SET, %OD_SET );

      102    18547    3            CALL FLI_MULTI_SET ALTRET( JUSTALT );

  18547  9 000200   000432 701000 9                  TSX1    FLI_MULTI_SET
         9 000201   000431 702000 9                  TSX2    JUSTALT
         9 000202   000421 710000 9                  TRA     s:18598

      103    18548    3          CASE( %TAPE_OPTIONS );

      104    18549    4            DO SUBNODEX = 0 TO SUBLK$->OUT$BLK.NSUBLKS - 1;

  18549  9 000203   200005 450100                    STZ     SUBNODEX,,AUTO
         9 000204   000414 710000 9                  TRA     s:18596+1

      105    18550    4               SUBNODE$ = SUBLK$->OUT$BLK.SUBLK$(SUBNODEX);

  18550  9 000205   200006 470500                    LDP0    SUBLK$,,AUTO
         9 000206   200005 720100                    LXL0    SUBNODEX,,AUTO
         9 000207   000003 236110                    LDQ     3,X0,PR0
         9 000210   200007 756100                    STQ     SUBNODE$,,AUTO

      106    18551    5               DO CASE( SUBNODE$->OUT$BLK.CODE );

  18551  9 000211   200007 471500                    LDP1    SUBNODE$,,AUTO
         9 000212   100000 721100                    LXL1    0,,PR1
         9 000213   000047 101003                    CMPX1   39,DU
         9 000214   000216 602011 9                  TNC     s:18551+5,X1
         9 000215   000413 710000 9                  TRA     s:18596
         9 000216   000265 710000 9                  TRA     s:18553
         9 000217   000345 710000 9                  TRA     s:18575
         9 000220   000360 710000 9                  TRA     s:18579
         9 000221   000271 710000 9                  TRA     s:18555
         9 000222   000300 710000 9                  TRA     s:18557
         9 000223   000315 710000 9                  TRA     s:18564
         9 000224   000340 710000 9                  TRA     s:18573
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:19   
         9 000225   000413 710000 9                  TRA     s:18596
         9 000226   000413 710000 9                  TRA     s:18596
         9 000227   000413 710000 9                  TRA     s:18596
         9 000230   000413 710000 9                  TRA     s:18596
         9 000231   000413 710000 9                  TRA     s:18596
         9 000232   000413 710000 9                  TRA     s:18596
         9 000233   000413 710000 9                  TRA     s:18596
         9 000234   000413 710000 9                  TRA     s:18596
         9 000235   000413 710000 9                  TRA     s:18596
         9 000236   000413 710000 9                  TRA     s:18596
         9 000237   000413 710000 9                  TRA     s:18596
         9 000240   000413 710000 9                  TRA     s:18596
         9 000241   000413 710000 9                  TRA     s:18596
         9 000242   000413 710000 9                  TRA     s:18596
         9 000243   000413 710000 9                  TRA     s:18596
         9 000244   000413 710000 9                  TRA     s:18596
         9 000245   000413 710000 9                  TRA     s:18596
         9 000246   000413 710000 9                  TRA     s:18596
         9 000247   000413 710000 9                  TRA     s:18596
         9 000250   000413 710000 9                  TRA     s:18596
         9 000251   000372 710000 9                  TRA     s:18583
         9 000252   000413 710000 9                  TRA     s:18596
         9 000253   000413 710000 9                  TRA     s:18596
         9 000254   000413 710000 9                  TRA     s:18596
         9 000255   000413 710000 9                  TRA     s:18596
         9 000256   000413 710000 9                  TRA     s:18596
         9 000257   000413 710000 9                  TRA     s:18596
         9 000260   000411 710000 9                  TRA     s:18593
         9 000261   000400 710000 9                  TRA     s:18587
         9 000262   000375 710000 9                  TRA     s:18585
         9 000263   000406 710000 9                  TRA     s:18591
         9 000264   000403 710000 9                  TRA     s:18589

      107    18552    5                CASE( %DENSITY );

      108    18553    5                  TAPE_OPEN.V.DENSITY# = SUBNODE$->OUT$BLK.SUBLK$(0)->OUT$BLK.CODE;

PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:20   
  18553  9 000265   100003 473500                    LDP3    3,,PR1
         9 000266   300000 236100                    LDQ     0,,PR3
         9 000267   000066 552004 xsym               STBQ    TAPE_OPEN+54,'04'O
         9 000270   000413 710000 9                  TRA     s:18596

      109    18554    5                CASE( %VOLACCESS );

      110    18555    5                  TAPE_OPEN.V.VOLACCESS# = SUBNODE$->OUT$BLK.SUBLK$(0)->OUT$BLK.CODE;

  18555  9 000271   100003 473500                    LDP3    3,,PR1
         9 000272   300000 236100                    LDQ     0,,PR3
         9 000273   000022 736000                    QLS     18
         9 000274   000063 676000 xsym               ERQ     TAPE_OPEN+51
         9 000275   000007 376003                    ANQ     7,DU
         9 000276   000063 656000 xsym               ERSQ    TAPE_OPEN+51
         9 000277   000413 710000 9                  TRA     s:18596

      111    18556    5                CASE( %EXPIRE );

      112    18557    5                  IF SUBNODE$->OUT$BLK.NSUBLKS = 0

  18557  9 000300   100001 222100                    LDX2    1,,PR1
         9 000301   000305 601000 9                  TNZ     s:18560

      113    18558    5                   THEN TAPE_OPEN.V.EXPIRE# = %NEVER#;

  18558  9 000302   000001 335007                    LCA     1,DL
         9 000303   000057 755000 xsym               STA     TAPE_OPEN+47
         9 000304   000413 710000 9                  TRA     s:18596

      114    18559    6                   ELSE DO;

      115    18560    6                     CALL CHARBIN( TAPE_OPEN.V.EXPIRE#,

  18560  9 000305   100003 473500                    LDP3    3,,PR1
         9 000306   300004 236100                    LDQ     4,,PR3
         9 000307   000033 772000                    QRL     27
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:21   
         9 000310   000000 623006                    EAX3    0,QL
         9 000311   000000 305540                    DTB
         9 000312   300004 230013                    NDSC9   4,,PR3                   cn=1,s=nosgn,sf=0,n=*X3
         9 000313   000057 000004 xsym               NDSC9   TAPE_OPEN+47             cn=0,s=lsgnf,sf=0,n=4

      116    18561    6                       SUBNODE$->OUT$BLK.SUBLK$(0)->OUT$SYM.TEXT );
      117    18562    6                     END;

  18562  9 000314   000413 710000 9                  TRA     s:18596

      118    18563    5                CASE( %BLOCK );

      119    18564    5                  CALL CHARBIN( NBR_GRANS_PER_TAPE_BUF, SUBNODE$->OUT$BLK.SUBLK$(0)->
             18564                           OUT$SYM.TEXT );

  18564  9 000315   100003 473500                    LDP3    3,,PR1
         9 000316   300004 236100                    LDQ     4,,PR3
         9 000317   000033 772000                    QRL     27
         9 000320   000000 622006                    EAX2    0,QL
         9 000321   000000 305540                    DTB
         9 000322   300004 230012                    NDSC9   4,,PR3                   cn=1,s=nosgn,sf=0,n=*X2
         9 000323   000000 000004 xsym               NDSC9   NBR_GRANS_PER_TAPE_BUF   cn=0,s=lsgnf,sf=0,n=4

      120    18565    5                  TAPE_OPEN.V.BLKL# = NBR_GRANS_PER_TAPE_BUF * 4096;

  18565  9 000324   000000 235000 xsym               LDA     NBR_GRANS_PER_TAPE_BUF
         9 000325   000014 735000                    ALS     12
         9 000326   000000 621005                    EAX1    0,AL
         9 000327   000052 741000 xsym               STX1    TAPE_OPEN+42

      121    18566    5                  IF NBR_GRANS_PER_TAPE_BUF > ( 99999 / ( 4096 * 9 / 8 ) )

  18566  9 000330   000000 236000 xsym               LDQ     NBR_GRANS_PER_TAPE_BUF
         9 000331   000025 116007                    CMPQ    21,DL
         9 000332   000413 604400 9                  TMOZ    s:18596

      122    18567    6                   THEN DO; /* 99999 is ANS limit, 4096 binary block size,
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:22   

      123    18568                           9 / 8 conversion factor from binary to ASCII */
      124    18569    6                     CALL FLI$RPT_ERR ( E_BLOCK_LIMIT );

  18569  9 000333   000004 630400 10                 EPPR0   4
         9 000334   000017 631400 xsym               EPPR1   B_VECTNIL+15
         9 000335   000000 701000 xent               TSX1    FLI$RPT_ERR
         9 000336   000000 011000                    NOP     0

      125    18570    6                     ALTRETURN;

  18570  9 000337   000000 702200 xent               TSX2  ! X66_AALT

      126    18571    6                     END;
      127    18572    5                CASE( %EXTEND );

      128    18573    5                  TAPE_OPEN.V.XTEND# = %YES#;

  18573  9 000340   000060 236000 xsym               LDQ     TAPE_OPEN+48
         9 000341   000000 376000 10                 ANQ     0
         9 000342   020000 276003                    ORQ     8192,DU
         9 000343   000060 756000 xsym               STQ     TAPE_OPEN+48
         9 000344   000413 710000 9                  TRA     s:18596

      129    18574    5                CASE( %VOL );

      130    18575    5                  CALL CHARBIN( TEMP,

  18575  9 000345   100003 473500                    LDP3    3,,PR1
         9 000346   300004 236100                    LDQ     4,,PR3
         9 000347   000033 772000                    QRL     27
         9 000350   000000 622006                    EAX2    0,QL
         9 000351   000100 305540                    DTB
         9 000352   300004 230012                    NDSC9   4,,PR3                   cn=1,s=nosgn,sf=0,n=*X2
         9 000353   200010 000004                    NDSC9   TEMP,,AUTO               cn=0,s=lsgnf,sf=0,n=4

      131    18576    5                    SUBNODE$->OUT$BLK.SUBLK$(0)->OUT$SYM.TEXT );
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:23   
      132    18577    5                  TAPE_OPEN.V.VOL# = TEMP;

  18577  9 000354   200010 236100                    LDQ     TEMP,,AUTO
         9 000355   000033 736000                    QLS     27
         9 000356   000061 552040 xsym               STBQ    TAPE_OPEN+49,'40'O
         9 000357   000413 710000 9                  TRA     s:18596

      133    18578    5                CASE( %FSN );

      134    18579    5                  CALL CHARBIN( TEMP,

  18579  9 000360   100003 473500                    LDP3    3,,PR1
         9 000361   300004 236100                    LDQ     4,,PR3
         9 000362   000033 772000                    QRL     27
         9 000363   000000 622006                    EAX2    0,QL
         9 000364   000100 305540                    DTB
         9 000365   300004 230012                    NDSC9   4,,PR3                   cn=1,s=nosgn,sf=0,n=*X2
         9 000366   200010 000004                    NDSC9   TEMP,,AUTO               cn=0,s=lsgnf,sf=0,n=4

      135    18580    5                    SUBNODE$->OUT$BLK.SUBLK$(0)->OUT$SYM.TEXT );
      136    18581    5                  TAPE_OPEN.V.FSN# = TEMP;

  18581  9 000367   200010 723100                    LXL3    TEMP,,AUTO
         9 000370   000066 743000 xsym               STX3    TAPE_OPEN+54
         9 000371   000413 710000 9                  TRA     s:18596

      137    18582    5                CASE( %IMMUPDATE );

      138    18583    5                  ARCOM_OPTIONS.IMMUPDATE = %YES#;

  18583  9 000372   400000 236003                    LDQ     -131072,DU
         9 000373   000000 256000 xsym               ORSQ    ARCOM_OPTIONS
         9 000374   000413 710000 9                  TRA     s:18596

      139    18584    5                CASE( %IOERRORCIY );

      140    18585    5                  ARCOM_OPTIONS.IOERRORCI = %YES#;
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:24   

  18585  9 000375   200000 236003                    LDQ     65536,DU
         9 000376   000000 256000 xsym               ORSQ    ARCOM_OPTIONS
         9 000377   000413 710000 9                  TRA     s:18596

      141    18586    5                CASE( %IOERRORCIN );

      142    18587    5                  ARCOM_OPTIONS.IOERRORCI = %NO#;

  18587  9 000400   000005 236000 10                 LDQ     5
         9 000401   000000 356000 xsym               ANSQ    ARCOM_OPTIONS
         9 000402   000413 710000 9                  TRA     s:18596

      143    18588    5                CASE( %IOERRORCOY );

      144    18589    5                  ARCOM_OPTIONS.IOERRORCO = %YES#;

  18589  9 000403   100000 236003                    LDQ     32768,DU
         9 000404   000000 256000 xsym               ORSQ    ARCOM_OPTIONS
         9 000405   000413 710000 9                  TRA     s:18596

      145    18590    5                CASE( %IOERRORCON );

      146    18591    5                  ARCOM_OPTIONS.IOERRORCO = %NO#;

  18591  9 000406   000006 236000 10                 LDQ     6
         9 000407   000000 356000 xsym               ANSQ    ARCOM_OPTIONS
         9 000410   000413 710000 9                  TRA     s:18596

      147    18592    5                CASE( %DUPLICATE_TAPESET );

      148    18593    5                  ARCOM_OPTIONS.DUPLICATE_TAPESET = %YES#;

  18593  9 000411   040000 236003                    LDQ     16384,DU
         9 000412   000000 256000 xsym               ORSQ    ARCOM_OPTIONS

      149    18594
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:25   
      150    18595    5                END;

      151    18596    4               END;

  18596  9 000413   200005 054100                    AOS     SUBNODEX,,AUTO
         9 000414   200006 470500                    LDP0    SUBLK$,,AUTO
         9 000415   000001 236100                    LDQ     1,,PR0
         9 000416   000022 772000                    QRL     18
         9 000417   200005 116100                    CMPQ    SUBNODEX,,AUTO
         9 000420   000205 605400 9                  TPNZ    s:18550

      152    18597    3          END;

      153    18598    2         END;

  18598  9 000421   200004 054100                    AOS     NODEX,,AUTO
         9 000422   200003 470500                    LDP0    @NODE$,,AUTO
         9 000423   000000 471500                    LDP1    0,,PR0
         9 000424   100001 236100                    LDQ     1,,PR1
         9 000425   000022 772000                    QRL     18
         9 000426   200004 116100                    CMPQ    NODEX,,AUTO
         9 000427   000144 605400 9                  TPNZ    s:18544

      154    18599    1      RETURN;

  18599  9 000430   000000 702200 xent               TSX2  ! X66_ARET

  18590  9 000431                       JUSTALT      null
      155    18600
      156    18601    1   JUSTALT: ;
      157    18602    1      ALTRETURN;

  18602  9 000431   000000 702200 xent               TSX2  ! X66_AALT

      158    18603
      159    18604        /****************************************/
      160    18605    1   FLI_MULTI_SET: PROC ALTRET;
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:26   

  18605  9 000432   200012 741300       FLI_MULTI_S* STX1  ! TEMP+2,,AUTO

      161    18606        /*F*  NAME: FLI_MULTI_SET
      162    18607              PURPOSE: Process MULTI_SET node.
      163    18608        */
      164    18609
      165    18610         /***
      166    18611          *** AUTO
      167    18612          ***/
      168    18613
      169    18614    2   DCL I SBIN AUTO;
      170    18615    2   DCL TEMP SBIN AUTO;
      171    18616
      172    18617         /***
      173    18618          *** BASED
      174    18619          ***/
      175    18620
      176    18621    2   DCL CTSN CHAR(6) AUTO;
      177    18622    2   DCL 1 CTSNCHARS REDEF CTSN,
      178    18623    2         2 XXXX CHAR(4),
      179    18624    2         2 N1 UBIN BYTE CALIGNED,
      180    18625    2         2 N2 UBIN BYTE CALIGNED;
      181    18626
      182    18627        /****************************************/
      183    18628
      184    18629    3      DO SUBNODEX=0 TO SUBLK$->OUT$BLK.NSUBLKS-1;

  18629  9 000433   200005 450100                    STZ     SUBNODEX,,AUTO
         9 000434   000450 710000 9                  TRA     s:18632+1

      185    18630    3         SUBNODE$ = SUBLK$->OUT$BLK.SUBLK$(SUBNODEX);

  18630  9 000435   200006 470500                    LDP0    SUBLK$,,AUTO
         9 000436   200005 720100                    LXL0    SUBNODEX,,AUTO
         9 000437   000003 236110                    LDQ     3,X0,PR0
         9 000440   200007 756100                    STQ     SUBNODE$,,AUTO
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:27   

      186    18631    3         CALL FLI$USE_SNLIST_NODE( SUBNODE$ ) ALTRET( JUSTALT );

  18631  9 000441   200007 631500                    EPPR1   SUBNODE$,,AUTO
         9 000442   200020 451500                    STP1    TEMP+8,,AUTO
         9 000443   200020 630500                    EPPR0   TEMP+8,,AUTO
         9 000444   000017 631400 xsym               EPPR1   B_VECTNIL+15
         9 000445   000000 701000 xent               TSX1    FLI$USE_SNLIST_NODE
         9 000446   000457 702000 9                  TSX2    JUSTALT

      187    18632    3         END;

  18632  9 000447   200005 054100                    AOS     SUBNODEX,,AUTO
         9 000450   200006 470500                    LDP0    SUBLK$,,AUTO
         9 000451   000001 236100                    LDQ     1,,PR0
         9 000452   000022 772000                    QRL     18
         9 000453   200005 116100                    CMPQ    SUBNODEX,,AUTO
         9 000454   000435 605400 9                  TPNZ    s:18630

      188    18633    2      RETURN;

  18633  9 000455   200012 221300                    LDX1  ! TEMP+2,,AUTO
         9 000456   000001 702211                    TSX2  ! 1,X1

  18631  9 000457                       JUSTALT      null
      189    18634
      190    18635    2   JUSTALT: ;
      191    18636    2      ALTRETURN;

  18636  9 000457   200012 221300                    LDX1  ! TEMP+2,,AUTO
         9 000460   000000 702211                    TSX2  ! 0,X1
      192    18637
      193    18638    2   END FLI_MULTI_SET;
      194    18639
      195    18640    1   END FLI$NODE_TAPE_OD;
      196    18641        %EOD;

PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:28   
--  Include file information  --

   CP_6_SUBS.:E05TOU  is referenced.
   XU_MACRO_C.:E05TOU  is referenced.
   FL_PERR_C.:E05TOU  is referenced.
   FLE_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   FLS_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   B_MICROPS_C.:E05TOU  is referenced.
   FLB_SUBS_C.:E05TOU  is referenced.
   FLI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure FLI$NODE_TAPE_OD.
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:29   

 **** Variables and constants ****

  ****  Section 002  Data  FLI$NODE_TAPE_OD

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    12-0-0/d STRC(360)   r     1 DEL_NODATA_REC

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @NODE$                    *0-0-0/w PTR         r     1 NODE$
     4-0-0/w SBIN        r     1 NODEX                      6-0-0/w PTR         r     1 SUBLK$
     7-0-0/w PTR         r     1 SUBNODE$                   5-0-0/w SBIN        r     1 SUBNODEX
    10-0-0/w SBIN        r     1 TEMP

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c ASTR(9)     r     1 ARCHIVE_NAME               0-0-0/b STRC        r     1 ARCOM_OPTIONS
     0-0-0/c ASTR(9)     r     1 BACKUP_NAME                0-0-0/w PTR         r     1 BLK_TAG$
     0-0-0/w PTR         r     1 BLK_TAG0$                  0-0-0/w PTR         r     1 BLOCK_GRAN$
     0-0-0/w PTR         r     1 DISK_FILE_SPEC$            0-0-0/w PTR         r     1 DISK_GRAN$
     0-0-0/w PTR         r     1 DPLIST$                    0-0-0/w PTR         r     1 DPRESLIST$
     0-0-0/c ASTR(9)     r     1 DUAL_FILE                  0-0-0/c ASTR(9)     r     1 EFT_CVOL_FILE
     0-0-0/c ASTR(9)     r     1 EFT_RESTRICT_FILE          0-0-0/w STRC        r     1 E_BLOCK_LIMIT
     0-0-0/w SBIN        r     1 NBR_BYTES_TO_MOVE
     0-0-0/w SBIN        r     1 NBR_GRANS_PER_TAPE_BUF
     0-0-0/c ASTR(9)     r     1 NODATA_FILE_NAME           0-0-0/c STRC(369)   r     1 NODATA_KEY
     0-0-0/c ASTR(9)     r     1 PRIME_FILE                 0-0-0/c ASTR(9)     r     1 REBUILD_DIR_KEY
     0-0-0/c ASTR(9)     r     1 REBUILD_KEY                0-0-0/c ASTR(9)     r     1 REBUILD_NAME
     0-0-0/c ASTR(9)     r     1 RET_CMDS_NAME              0-0-0/w PTR         r     1 SNVECLIST$
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:30   
     0-0-0/w PTR         r     1 TAPE_DCBLIST$              0-0-0/d STRC(2088)  r     1 TAPE_OPEN
     0-0-0/c ASTR(9)     r     1 TSN_USED_NAME

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0N  NULL        r     1 M$NODATA_LIST              0-0-0/w STRC(144)   r     1 OUT$BLK
     0-0-0/w ASTR(153)   r     1 OUT$SYM                    0-0-0/c ASTR(9)     r     1 TEXTC


   Procedure FLI$NODE_TAPE_OD requires 305 words for executable code.
   Procedure FLI$NODE_TAPE_OD requires 18 words of local(AUTO) storage.
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:31   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:32   
          MINI XREF LISTING

ARCHIVE_NAME.L#
      7884**DCL      7884--IMP-SIZ
ARCOM_OPTIONS.DUPLICATE_TAPESET
      8791**DCL     18593<<ASSIGN
ARCOM_OPTIONS.IMMUPDATE
      8791**DCL     18512<<ASSIGN  18583<<ASSIGN
ARCOM_OPTIONS.IOERRORCI
      8791**DCL     18585<<ASSIGN  18587<<ASSIGN
ARCOM_OPTIONS.IOERRORCO
      8791**DCL     18589<<ASSIGN  18591<<ASSIGN
BACKUP_NAME.L#
      7528**DCL      7528--IMP-SIZ
BLK_TAG.NAME
      7020**DCL      7020--REDEF
BLK_TAG$
      7017**DCL      7017--IMP-PTR
BLK_TAG0.NAME
      7026**DCL      7026--REDEF
BLK_TAG0$
      7023**DCL      7023--IMP-PTR
BLOCK_GRAN$
      7030**DCL      7031--IMP-PTR
CLOSE_NODATA_LIST.SN_
      8682**DCL      8682--REDEF
CLOSE_NODATA_LIST.UTL_
      8683**DCL      8683--REDEF
CLOSE_NODATA_LIST.V.EXPIRE#
      8697**DCL      8697--REDEF
CLOSE_NODATA_LIST.V.TYPE#
      8695**DCL      8695--REDEF
CLOSE_NODATA_LIST.V.XTNSIZE#
      8692**DCL      8692--REDEF    8694--REDEF
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:33   
CLOSE_PRIME_DUAL.SN_
      8159**DCL      8159--REDEF
CLOSE_PRIME_DUAL.UTL_
      8160**DCL      8160--REDEF
CLOSE_PRIME_DUAL.V.EXPIRE#
      8174**DCL      8174--REDEF
CLOSE_PRIME_DUAL.V.TYPE#
      8172**DCL      8172--REDEF
CLOSE_PRIME_DUAL.V.XTNSIZE#
      8169**DCL      8169--REDEF    8171--REDEF
CLOSE_REBUILD.SN_
      8434**DCL      8434--REDEF
CLOSE_REBUILD.UTL_
      8435**DCL      8435--REDEF
CLOSE_REBUILD.V.EXPIRE#
      8449**DCL      8449--REDEF
CLOSE_REBUILD.V.TYPE#
      8447**DCL      8447--REDEF
CLOSE_REBUILD.V.XTNSIZE#
      8444**DCL      8444--REDEF    8446--REDEF
CLOSE_STATUS.SN_
      7649**DCL      7649--REDEF
CLOSE_STATUS.UTL_
      7650**DCL      7650--REDEF
CLOSE_STATUS.V.EXPIRE#
      7664**DCL      7664--REDEF
CLOSE_STATUS.V.TYPE#
      7662**DCL      7662--REDEF
CLOSE_STATUS.V.XTNSIZE#
      7659**DCL      7659--REDEF    7661--REDEF
CLOSE_TSN_USED.SN_
      7359**DCL      7359--REDEF
CLOSE_TSN_USED.UTL_
      7360**DCL      7360--REDEF
CLOSE_TSN_USED.V.EXPIRE#
      7374**DCL      7374--REDEF
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:34   
CLOSE_TSN_USED.V.TYPE#
      7372**DCL      7372--REDEF
CLOSE_TSN_USED.V.XTNSIZE#
      7369**DCL      7369--REDEF    7371--REDEF
CON_CLOSE_ARCHIVE.SN_
      7691**DCL      7691--REDEF
CON_CLOSE_ARCHIVE.UTL_
      7692**DCL      7692--REDEF
CON_CLOSE_ARCHIVE.V.EXPIRE#
      7706**DCL      7706--REDEF
CON_CLOSE_ARCHIVE.V.TYPE#
      7704**DCL      7704--REDEF
CON_CLOSE_ARCHIVE.V.XTNSIZE#
      7701**DCL      7701--REDEF    7703--REDEF
CON_OPEN_ARCHIVE_FILE.ACSVEH_
      7778**DCL      7779--REDEF
CON_OPEN_ARCHIVE_FILE.ALTKEYS_
      7784**DCL      7785--REDEF    7785--REDEF
CON_OPEN_ARCHIVE_FILE.HDR_
      7783**DCL      7784--REDEF
CON_OPEN_ARCHIVE_FILE.TAB_
      7782**DCL      7783--REDEF
CON_OPEN_ARCHIVE_FILE.UHL_
      7776**DCL      7777--REDEF    7777--REDEF
CON_OPEN_ARCHIVE_FILE.V.FSN#
      7816**DCL      7816--REDEF    7816--REDEF
CON_OPEN_ARCHIVE_FILE.WSN_
      7782**DCL      7782--REDEF
CON_READ_ARCHIVE_FILE.STATION_
      7840**DCL      7841--REDEF
CON_READ_ARCHIVE_FILE.V.DVBYTE.REREAD#
      7852**DCL      7852--REDEF
CON_READ_ARCHIVE_FILE.V.INDX#
      7850**DCL      7850--REDEF
CTSN IN PROCEDURE FLI_MULTI_SET
     18621**DCL     18622--REDEF
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:35   
CVOL_UTL.ULBL#
      7119**DCL      7119--REDEF
DEL_NODATA_REC.V
      8785**DCL      8782--DCLINIT
DISK_CLOSE.SN_
      6189**DCL      6189--REDEF
DISK_CLOSE.UTL_
      6190**DCL      6190--REDEF
DISK_CLOSE.V.EXPIRE#
      6204**DCL      6204--REDEF
DISK_CLOSE.V.TYPE#
      6202**DCL      6202--REDEF
DISK_CLOSE.V.XTNSIZE#
      6199**DCL      6199--REDEF    6201--REDEF
DISK_FILE_SPEC.SPEC
      6554**DCL      6556--REDEF
DISK_FILE_SPEC.SPEC.START
      6555**DCL      6555--REDEF
DISK_FILE_SPEC.SPEC.STOP
      6556**DCL      6556--REDEF
DISK_FILE_SPEC$
      6553**DCL      6554--IMP-PTR
DISK_GRAN$
      7030**DCL      7030--IMP-PTR
DISK_OPEN.ACSVEH_
      6054**DCL      6055--REDEF
DISK_OPEN.ALTKEYS_
      6060**DCL      6061--REDEF    6061--REDEF
DISK_OPEN.HDR_
      6059**DCL      6060--REDEF
DISK_OPEN.TAB_
      6058**DCL      6059--REDEF
DISK_OPEN.UHL_
      6052**DCL      6053--REDEF    6053--REDEF
DISK_OPEN.V.FSN#
      6092**DCL      6092--REDEF    6092--REDEF
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:36   
DISK_OPEN.WSN_
      6058**DCL      6058--REDEF
DISK_READ.STATION_
      6116**DCL      6117--REDEF
DISK_READ.V.DVBYTE.REREAD#
      6128**DCL      6128--REDEF
DISK_READ.V.INDX#
      6126**DCL      6126--REDEF
DISK_WRITE.STATION_
      6154**DCL      6154--REDEF
DISK_WRITE.V.DVBYTE.VFC#
      6161**DCL      6161--REDEF
DPLIST$
      6539**DCL      6551--IMP-PTR
DPRESLIST$
      6553**DCL      6553--IMP-PTR
DUAL_FILE.L#
      7955**DCL      7955--IMP-SIZ
EFTWORD
      6674**DCL      6674--REDEF
EFT_CVOL_FILE.L#
      7079**DCL      7079--IMP-SIZ
EFT_RESTRICT_FILE.L#
      7106**DCL      7106--IMP-SIZ
E_BLOCK_LIMIT
     13630**DCL     18569<>CALL
FIT_AREA.W2
      7390**DCL      7391--REDEF
FLI$RPT_ERR
     18395**DCL-ENT 18569--CALL
FLI$USE_SNLIST_NODE
     18394**DCL-ENT 18631--CALL
FLI_MULTI_SET
     18605**PROC    18547--CALL
FPT_EXIT.V.STEPCC#
      5979**DCL      5979--REDEF
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:37   
JUSTALT
     18590**LABEL   18547--CALLALT
JUSTALT IN PROCEDURE FLI_MULTI_SET
     18631**LABEL   18631--CALLALT
M$XXX
      5518**DCL-ENT 18536--CALL
NBR_BYTES_TO_MOVE
      7029**DCL      7030--IMP-SIZ  7031--IMP-SIZ
NBR_GRANS_PER_TAPE_BUF
      6512**DCL     18564<<CALLBLT 18565>>ASSIGN  18566>>IF
NODATA_FILE_NAME.L#
      8644**DCL      8644--IMP-SIZ
NODATA_KEY
      8790**DCL      8782--DCLINIT  8783--DCLINIT
NODE$
        13**DCL         8--PROC    18417--IMP-PTR 18514>>DOCASE  18543>>DOINDEX 18544>>ASSIGN
NODEX
     18401**DCL     18543<<DOINDEX 18544>>ASSIGN
OPEN_NODATA_LIST.ACSVEH_
      8577**DCL      8578--REDEF
OPEN_NODATA_LIST.ALTKEYS_
      8583**DCL      8584--REDEF    8584--REDEF
OPEN_NODATA_LIST.HDR_
      8582**DCL      8583--REDEF
OPEN_NODATA_LIST.TAB_
      8581**DCL      8582--REDEF
OPEN_NODATA_LIST.UHL_
      8575**DCL      8576--REDEF    8576--REDEF
OPEN_NODATA_LIST.V.FSN#
      8615**DCL      8615--REDEF    8615--REDEF
OPEN_NODATA_LIST.WSN_
      8581**DCL      8581--REDEF
OPEN_PRIME_DUAL.ACSVEH_
      8024**DCL      8025--REDEF
OPEN_PRIME_DUAL.ALTKEYS_
      8030**DCL      8031--REDEF    8031--REDEF
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:38   
OPEN_PRIME_DUAL.HDR_
      8029**DCL      8030--REDEF
OPEN_PRIME_DUAL.TAB_
      8028**DCL      8029--REDEF
OPEN_PRIME_DUAL.UHL_
      8022**DCL      8023--REDEF    8023--REDEF
OPEN_PRIME_DUAL.V.FSN#
      8062**DCL      8062--REDEF    8062--REDEF
OPEN_PRIME_DUAL.WSN_
      8028**DCL      8028--REDEF
OPEN_REBUILD.ACSVEH_
      8259**DCL      8260--REDEF
OPEN_REBUILD.ALTKEYS_
      8265**DCL      8266--REDEF    8266--REDEF
OPEN_REBUILD.HDR_
      8264**DCL      8265--REDEF
OPEN_REBUILD.TAB_
      8263**DCL      8264--REDEF
OPEN_REBUILD.UHL_
      8257**DCL      8258--REDEF    8258--REDEF
OPEN_REBUILD.V.FSN#
      8297**DCL      8297--REDEF    8297--REDEF
OPEN_REBUILD.WSN_
      8263**DCL      8263--REDEF
OPEN_STATUS.ACSVEH_
      7461**DCL      7462--REDEF
OPEN_STATUS.ALTKEYS_
      7467**DCL      7468--REDEF    7468--REDEF
OPEN_STATUS.HDR_
      7466**DCL      7467--REDEF
OPEN_STATUS.TAB_
      7465**DCL      7466--REDEF
OPEN_STATUS.UHL_
      7459**DCL      7460--REDEF    7460--REDEF
OPEN_STATUS.V.FSN#
      7499**DCL      7499--REDEF    7499--REDEF
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:39   
OPEN_STATUS.WSN_
      7465**DCL      7465--REDEF
OPEN_TSN_USED.ACSVEH_
      7197**DCL      7198--REDEF
OPEN_TSN_USED.ALTKEYS_
      7203**DCL      7204--REDEF    7204--REDEF
OPEN_TSN_USED.HDR_
      7202**DCL      7203--REDEF
OPEN_TSN_USED.TAB_
      7201**DCL      7202--REDEF
OPEN_TSN_USED.UHL_
      7195**DCL      7196--REDEF    7196--REDEF
OPEN_TSN_USED.V.FSN#
      7235**DCL      7235--REDEF    7235--REDEF
OPEN_TSN_USED.WSN_
      7201**DCL      7201--REDEF
OUT$BLK.CODE
     18425**DCL     18514>>DOCASE  18545>>DOCASE  18551>>DOCASE  18553>>ASSIGN  18555>>ASSIGN
OUT$BLK.NSUBLKS
     18429**DCL     18543>>DOINDEX 18549>>DOINDEX 18557>>IF      18629>>DOINDEX
OUT$BLK.SUBLK$
     18450**DCL     18544>>ASSIGN  18550>>ASSIGN  18553>>ASSIGN  18555>>ASSIGN  18560>>CALLBLT 18560>>CALLBLT
     18564>>CALLBLT 18564>>CALLBLT 18575>>CALLBLT 18575>>CALLBLT 18579>>CALLBLT 18579>>CALLBLT 18630>>ASSIGN
OUT$SYM.COUNT
     18486**DCL     18489--IMP-SIZ 18560>>CALLBLT 18564>>CALLBLT 18575>>CALLBLT 18579>>CALLBLT
OUT$SYM.TEXT
     18489**DCL     18560>>CALLBLT 18564>>CALLBLT 18575>>CALLBLT 18579>>CALLBLT
PRE_RET_CLOSE.SN_
      6917**DCL      6917--REDEF
PRE_RET_CLOSE.UTL_
      6918**DCL      6918--REDEF
PRE_RET_CLOSE.V.EXPIRE#
      6932**DCL      6932--REDEF
PRE_RET_CLOSE.V.TYPE#
      6930**DCL      6930--REDEF
PRE_RET_CLOSE.V.XTNSIZE#
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:40   
      6927**DCL      6927--REDEF    6929--REDEF
PRE_RET_OPEN.ACSVEH_
      6852**DCL      6853--REDEF
PRE_RET_OPEN.ALTKEYS_
      6858**DCL      6859--REDEF    6859--REDEF
PRE_RET_OPEN.HDR_
      6857**DCL      6858--REDEF
PRE_RET_OPEN.TAB_
      6856**DCL      6857--REDEF
PRE_RET_OPEN.UHL_
      6850**DCL      6851--REDEF    6851--REDEF
PRE_RET_OPEN.V.FSN#
      6890**DCL      6890--REDEF    6890--REDEF
PRE_RET_OPEN.WSN_
      6856**DCL      6856--REDEF
PRE_RET_READ.STATION_
      6707**DCL      6708--REDEF
PRE_RET_READ.V.DVBYTE.REREAD#
      6719**DCL      6719--REDEF
PRE_RET_READ.V.INDX#
      6717**DCL      6717--REDEF
PRE_RET_WRITE.STATION_
      6745**DCL      6745--REDEF
PRE_RET_WRITE.V.DVBYTE.VFC#
      6752**DCL      6752--REDEF
PRIME_FILE.L#
      7928**DCL      7928--IMP-SIZ
READ_NODATA_LIST.STATION_
      8721**DCL      8722--REDEF
READ_NODATA_LIST.V.DVBYTE.REREAD#
      8733**DCL      8733--REDEF
READ_NODATA_LIST.V.INDX#
      8731**DCL      8731--REDEF
READ_PRIME_DUAL.STATION_
      8086**DCL      8087--REDEF
READ_PRIME_DUAL.V.DVBYTE.REREAD#
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:41   
      8098**DCL      8098--REDEF
READ_PRIME_DUAL.V.INDX#
      8096**DCL      8096--REDEF
READ_REBUILD.STATION_
      8392**DCL      8393--REDEF
READ_REBUILD.V.DVBYTE.REREAD#
      8404**DCL      8404--REDEF
READ_REBUILD.V.INDX#
      8402**DCL      8402--REDEF
READ_STATUS.STATION_
      7607**DCL      7608--REDEF
READ_STATUS.V.DVBYTE.REREAD#
      7619**DCL      7619--REDEF
READ_STATUS.V.INDX#
      7617**DCL      7617--REDEF
READ_TSN_USED.STATION_
      7317**DCL      7318--REDEF
READ_TSN_USED.V.DVBYTE.REREAD#
      7329**DCL      7329--REDEF
READ_TSN_USED.V.INDX#
      7327**DCL      7327--REDEF
REBUILD_DIR_KEY.L#
      8478**DCL      8478--IMP-SIZ
REBUILD_KEY.L#
      8505**DCL      8505--IMP-SIZ
REBUILD_NAME.L#
      8326**DCL      8326--IMP-SIZ
RET_CMDS_NAME.L#
      6961**DCL      6961--IMP-SIZ
SNVECLIST$
      6493**DCL      6493--IMP-PTR
SPEC.START
      6557**DCL      6558--REDEF
SPEC.STOP
      6558**DCL      6559--REDEF
SPECCHARS
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:42   
      6557**DCL      6557--REDEF
SUBLK$
     18403**DCL     18544<<ASSIGN  18545>>DOCASE  18549>>DOINDEX 18550>>ASSIGN  18629>>DOINDEX 18630>>ASSIGN
SUBNODE$
     18404**DCL     18550<<ASSIGN  18551>>DOCASE  18553>>ASSIGN  18555>>ASSIGN  18557>>IF      18560>>CALLBLT
     18560>>CALLBLT 18564>>CALLBLT 18564>>CALLBLT 18575>>CALLBLT 18575>>CALLBLT 18579>>CALLBLT 18579>>CALLBLT
     18630<<ASSIGN  18631<>CALL
SUBNODEX
     18402**DCL     18549<<DOINDEX 18550>>ASSIGN  18629<<DOINDEX 18630>>ASSIGN
TAPE_BLOCK_.W2
      7045**DCL      7046--REDEF
TAPE_CLOSE.SN_
      6410**DCL      6410--REDEF
TAPE_CLOSE.UTL_
      6411**DCL      6411--REDEF
TAPE_CLOSE.V.EXPIRE#
      6425**DCL      6425--REDEF
TAPE_CLOSE.V.TYPE#
      6423**DCL      6423--REDEF
TAPE_CLOSE.V.XTNSIZE#
      6420**DCL      6420--REDEF    6422--REDEF
TAPE_DCBLIST$
      5966**DCL      5966--IMP-PTR
TAPE_OPEN.ACSVEH_
      6275**DCL      6276--REDEF
TAPE_OPEN.ALTKEYS_
      6281**DCL      6282--REDEF    6282--REDEF
TAPE_OPEN.HDR_
      6280**DCL      6281--REDEF
TAPE_OPEN.TAB_
      6279**DCL      6280--REDEF
TAPE_OPEN.UHL_
      6273**DCL      6274--REDEF    6274--REDEF
TAPE_OPEN.V.ASN#
      6292**DCL     18519<<ASSIGN  18524<<ASSIGN  18529<<ASSIGN  18534<<ASSIGN
TAPE_OPEN.V.BLKL#
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:43   
      6299**DCL     18510<<ASSIGN  18565<<ASSIGN
TAPE_OPEN.V.CVOL#
      6287**DCL     18518<<ASSIGN  18523<<ASSIGN  18528<<ASSIGN  18533<<ASSIGN
TAPE_OPEN.V.DENSITY#
      6314**DCL     18504<<ASSIGN  18553<<ASSIGN
TAPE_OPEN.V.EXPIRE#
      6302**DCL     18505<<ASSIGN  18558<<ASSIGN  18560<<CALLBLT
TAPE_OPEN.V.FSN#
      6313**DCL      6313--REDEF    6313--REDEF   18508<<ASSIGN  18581<<ASSIGN
TAPE_OPEN.V.FUN#
      6292**DCL     18517<<ASSIGN  18522<<ASSIGN  18527<<ASSIGN  18532<<ASSIGN
TAPE_OPEN.V.IOERROK#
      6304**DCL     18511<<ASSIGN
TAPE_OPEN.V.RES#
      6297**DCL     18516<<ASSIGN  18521<<ASSIGN  18526<<ASSIGN  18531<<ASSIGN
TAPE_OPEN.V.VOL#
      6307**DCL     18509<<ASSIGN  18577<<ASSIGN
TAPE_OPEN.V.VOLACCESS#
      6311**DCL     18507<<ASSIGN  18555<<ASSIGN
TAPE_OPEN.V.XTEND#
      6303**DCL     18506<<ASSIGN  18573<<ASSIGN
TAPE_OPEN.WSN_
      6279**DCL      6279--REDEF
TAPE_READ.STATION_
      6337**DCL      6338--REDEF
TAPE_READ.V.DVBYTE.REREAD#
      6349**DCL      6349--REDEF
TAPE_READ.V.INDX#
      6347**DCL      6347--REDEF
TAPE_WRITE.STATION_
      6375**DCL      6375--REDEF
TAPE_WRITE.V.DVBYTE.VFC#
      6382**DCL      6382--REDEF
TEMP
     18405**DCL     18575<<CALLBLT 18577>>ASSIGN  18579<<CALLBLT 18581>>ASSIGN
TEXTC.L
PL6.E3A0      #001=FLI$NODE_TAPE_OD File=FLX$NODE.:E05TSI                        TUE 07/29/97 16:33 Page:44   
     18495**DCL     18496--IMP-SIZ
TSN_USED_NAME.L#
      7264**DCL      7264--IMP-SIZ
TVECTOR.W2
      6506**DCL      6507--REDEF
WRITE_NODATA_LIST.STATION_
      8759**DCL      8759--REDEF
WRITE_NODATA_LIST.V.DVBYTE.VFC#
      8766**DCL      8766--REDEF
WRITE_PRIME_DUAL.STATION_
      8124**DCL      8124--REDEF
WRITE_PRIME_DUAL.V.DVBYTE.VFC#
      8131**DCL      8131--REDEF
WRITE_REBUILD.STATION_
      8360**DCL      8360--REDEF
WRITE_REBUILD.V.DVBYTE.VFC#
      8367**DCL      8367--REDEF
WRITE_STATUS.STATION_
      7575**DCL      7575--REDEF
WRITE_STATUS.V.DVBYTE.VFC#
      7582**DCL      7582--REDEF
WRITE_TSN_USED.STATION_
      7285**DCL      7285--REDEF
WRITE_TSN_USED.V.DVBYTE.VFC#
      7292**DCL      7292--REDEF

PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:45   
      197        1        /*T***********************************************************/
      198        2        /*T*                                                         */
      199        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      200        4        /*T*                                                         */
      201        5        /*T***********************************************************/
      202        6        FLI$SNLIST_NODE: PROC( NODE$, SNLIST$, SNSIZEW ) ALTRET;
      203        7        /*F*  NAME: FLI$SNLIST
      204        8              PURPOSE: Build serial number list VLP from node.
      205        9        */
      206       10
      207       11    1   DCL NODE$ PTR ALIGNED;                  /* To CT_VOL_SET or LT_VOL_SET node   */
      208       12                                                /* To CD_VOL_SET or OD_VOL_SET node   */
      209       13    1   DCL SNLIST$ PTR ALIGNED;                /* Pointer to VLP_SN area             */
      210       14    1   DCL SNSIZEW SBIN ALIGNED;          /* Returned size in words of VLP_SN built  */
      211       15
      212       16         /***
      213       17          *** INCLUDE
      214       18          ***/
      215       19
      216       20        %INCLUDE CP_6;
      217     5579        %INCLUDE FLI_SUBS_C;
      218     5608        %INCLUDE XU_MACRO_C;
      219     8714
      220     8715         /***
      221     8716          *** AUTO
      222     8717          ***/
      223     8718
      224     8719    1   DCL 1 CT5FMT AUTO,                      /* CT#xxxxn or CD#xxxxn               */
      225     8720    1         2 XXXX CHAR(4),
      226     8721    1         2 N CHAR(1),
      227     8722    1         2 NUBIN REDEF N UBIN BYTE CALIGNED;
      228     8723    1   DCL CT5FMTCHARS REDEF CT5FMT CHAR(5);
      229     8724    1   DCL 1 CT6FMT AUTO,                      /* CT#xxxxnn or CD#xxxxnn             */
      230     8725    1         2 XXXX CHAR(4),
      231     8726    1         2 NN CHAR(2),
      232     8727    1         2 NNUBIN REDEF NN,
      233     8728    1           3 N1 UBIN BYTE CALIGNED,
PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:46   
      234     8729    1           3 N2 UBIN BYTE CALIGNED;
      235     8730    1   DCL CT6FMTCHARS REDEF CT6FMT CHAR(6);
      236     8731    1   DCL SNLISTX SBIN AUTO;             /* Index of serial number list structure   */
      237     8732    1   DCL N SBIN AUTO;
      238     8733    1   DCL NN SBIN AUTO;
      239     8734    1   DCL SUBLK$ PTR AUTO;
      240     8735
      241     8736         /***
      242     8737          *** BASED
      243     8738          ***/
      244     8739
      245     8740        %PARSE$OUT( STCLASS=BASED );
      246     8785        %PARSE$SYM( STCLASS=BASED );
      247     8823
      248     8824         /***
      249     8825          *** FPT
      250     8826          ***/
      251     8827
      252     8828        %VLP_SN( FPTN=SNLIST,
      253     8829                 STCLASS="BASED(SNLIST$)" );
      254     8842
      255     8843        /****************************************/
      256     8844
      257     8845         /***
      258     8846          *** Handle CT/CD and LT/OD separately.
      259     8847          ***/
      260     8848
      261     8849    1      IF NODE$->OUT$BLK.CODE = %CT_VOL_SET OR NODE$->OUT$BLK.CODE = %CD_VOL_SET
      262     8850    1       THEN CALL FLI_CT_SNLIST ALTRET( JUSTALT );
      263     8851    1       ELSE CALL FLI_LT_SNLIST;
      264     8852
      265     8853    1      SNSIZEW = LENGTHC(SNLIST.NUM#) + SNLIST.NUM# * LENGTHC(SNLIST.SN#(0));
      266     8854    1      SNSIZEW = (SNSIZEW + 3) / 4;
      267     8855
      268     8856    1      RETURN;
      269     8857
      270     8858    1   JUSTALT: ;
PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:47   
      271     8859    1      ALTRETURN;
      272     8860
      273     8861        /****************************************/
      274     8862
      275     8863    1   FLI_LT_SNLIST: PROC;
      276     8864
      277     8865        /********************/
      278     8866
      279     8867         /***
      280     8868          *** Put each serial number in the VLP_SN.
      281     8869          ***/
      282     8870
      283     8871    2      SNLIST.NUM# = NODE$->OUT$BLK.NSUBLKS;
      284     8872
      285     8873    3      DO SNLISTX = 0 TO SNLIST.NUM# - 1;
      286     8874    3         SNLIST.SN#(SNLISTX) = NODE$->OUT$BLK.SUBLK$(SNLISTX)->OUT$SYM.TEXT;
      287     8875    3         END;
      288     8876
      289     8877    2      RETURN;
      290     8878
      291     8879    2   END FLI_LT_SNLIST;
      292     8880
      293     8881        /****************************************/
      294     8882
      295     8883    1   FLI_CT_SNLIST: PROC ALTRET;
      296     8884
      297     8885        /********************/
      298     8886
      299     8887         /***
      300     8888          *** Determine if CT#xxxxn/CD#xxxxn or CT#xxxxnn/CD#xxxxnn based on number of
      301     8889          *** characters.
      302     8890          ***/
      303     8891
      304     8892    2      SNLISTX = 0;
      305     8893    2      SUBLK$ = NODE$->OUT$BLK.SUBLK$(0);
      306     8894    2      IF SUBLK$->OUT$SYM.COUNT = LENGTHC('xxxxn')
      307     8895    3       THEN DO;                            /* CT#xxxxn or CD#xxxxn               */
PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:48   
      308     8896    3         CT5FMTCHARS = SUBLK$->OUT$SYM.TEXT;
      309     8897    3         IF CT5FMT.NUBIN > ASCBIN('9') OR CT5FMT.NUBIN < ASCBIN('0')
      310     8898    4          THEN DO;
      311     8899                                                /* Format error                       */
      312     8900    4            ALTRETURN;
      313     8901    4            END;
      314     8902    4         DO N = CT5FMT.NUBIN TO ASCBIN('9');
      315     8903    4            CT5FMT.NUBIN = N;
      316     8904    4            SNLIST.SN#(SNLISTX) = CT5FMTCHARS;
      317     8905    4            SNLISTX = SNLISTX + 1;
      318     8906    4            END;
      319     8907    3         END;
      320     8908    3       ELSE DO;                            /* CT#xxxxnn or CD#xxxxnn             */
      321     8909    3         IF SUBLK$->OUT$SYM.COUNT ~= LENGTHC('xxxxnn')
      322     8910    4          THEN DO;
      323     8911                                                /* Format error                       */
      324     8912    4            ALTRETURN;
      325     8913    4            END;
      326     8914    3         CT6FMTCHARS = SUBLK$->OUT$SYM.TEXT;
      327     8915    3         IF CT6FMT.NNUBIN.N1 >ASCBIN('9') OR CT6FMT.NNUBIN.N1 < ASCBIN('0')
      328     8916    3           OR CT6FMT.NNUBIN.N2 >ASCBIN('9') OR CT6FMT.NNUBIN.N2 < ASCBIN('0')
      329     8917    4          THEN DO;
      330     8918                                                /* Format error                       */
      331     8919    4            ALTRETURN;
      332     8920    4            END;
      333     8921    3         CALL CHARBIN( NN, CT6FMT.NN );
      334     8922    4         DO N = NN TO 99;
      335     8923    4            CALL BINCHAR( CT6FMT.NN, N );
      336     8924    4            SNLIST.SN#(SNLISTX) = CT6FMTCHARS;
      337     8925    4            SNLISTX = SNLISTX + 1;
      338     8926    4            END;
      339     8927    3         END;
      340     8928    2      SNLIST.NUM# = SNLISTX;
      341     8929    2      RETURN;
      342     8930
      343     8931    2   END FLI_CT_SNLIST;
      344     8932
PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:49   
      345     8933    1   END FLI$SNLIST_NODE;
      346     8934        %EOD;

PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:50   
--  Include file information  --

   XU_MACRO_C.:E05TOU  is referenced.
   FLI_SUBS_C.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure FLI$SNLIST_NODE.

   Procedure FLI$SNLIST_NODE requires 149 words for executable code.
   Procedure FLI$SNLIST_NODE requires 16 words of local(AUTO) storage.

PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:51   

 Object Unit name= FLI$SNLIST_NODE                            File name= FLX$NODE.:E05TOU
 UTS= JUL 29 '97 16:35:23.36 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1  RoData even  UTS      4      4  FLI$SNLIST_NODE
    2   Proc  even  none   149    225  FLI$SNLIST_NODE

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes    yes     yes      Std        3  FLI$SNLIST_NODE

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_3
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  B_VECTNIL
PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:52   


      197        1        /*T***********************************************************/
      198        2        /*T*                                                         */
      199        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      200        4        /*T*                                                         */
      201        5        /*T***********************************************************/
      202        6        FLI$SNLIST_NODE: PROC( NODE$, SNLIST$, SNSIZEW ) ALTRET;

      6  2 000000   000000 700200 xent  FLI$SNLIST_* TSX0  ! X66_AUTO_3
         2 000001   000020 000003                    ZERO    16,3

      203        7        /*F*  NAME: FLI$SNLIST
      204        8              PURPOSE: Build serial number list VLP from node.
      205        9        */
      206       10
      207       11    1   DCL NODE$ PTR ALIGNED;                  /* To CT_VOL_SET or LT_VOL_SET node   */
      208       12                                                /* To CD_VOL_SET or OD_VOL_SET node   */
      209       13    1   DCL SNLIST$ PTR ALIGNED;                /* Pointer to VLP_SN area             */
      210       14    1   DCL SNSIZEW SBIN ALIGNED;          /* Returned size in words of VLP_SN built  */
      211       15
      212       16         /***
      213       17          *** INCLUDE
      214       18          ***/
      215       19
      216       20        %INCLUDE CP_6;
      217     5579        %INCLUDE FLI_SUBS_C;
      218     5608        %INCLUDE XU_MACRO_C;
      219     8714
      220     8715         /***
      221     8716          *** AUTO
      222     8717          ***/
      223     8718
      224     8719    1   DCL 1 CT5FMT AUTO,                      /* CT#xxxxn or CD#xxxxn               */
      225     8720    1         2 XXXX CHAR(4),
      226     8721    1         2 N CHAR(1),
      227     8722    1         2 NUBIN REDEF N UBIN BYTE CALIGNED;
      228     8723    1   DCL CT5FMTCHARS REDEF CT5FMT CHAR(5);
PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:53   
      229     8724    1   DCL 1 CT6FMT AUTO,                      /* CT#xxxxnn or CD#xxxxnn             */
      230     8725    1         2 XXXX CHAR(4),
      231     8726    1         2 NN CHAR(2),
      232     8727    1         2 NNUBIN REDEF NN,
      233     8728    1           3 N1 UBIN BYTE CALIGNED,
      234     8729    1           3 N2 UBIN BYTE CALIGNED;
      235     8730    1   DCL CT6FMTCHARS REDEF CT6FMT CHAR(6);
      236     8731    1   DCL SNLISTX SBIN AUTO;             /* Index of serial number list structure   */
      237     8732    1   DCL N SBIN AUTO;
      238     8733    1   DCL NN SBIN AUTO;
      239     8734    1   DCL SUBLK$ PTR AUTO;
      240     8735
      241     8736         /***
      242     8737          *** BASED
      243     8738          ***/
      244     8739
      245     8740        %PARSE$OUT( STCLASS=BASED );
      246     8785        %PARSE$SYM( STCLASS=BASED );
      247     8823
      248     8824         /***
      249     8825          *** FPT
      250     8826          ***/
      251     8827
      252     8828        %VLP_SN( FPTN=SNLIST,
      253     8829                 STCLASS="BASED(SNLIST$)" );
      254     8842
      255     8843        /****************************************/
      256     8844
      257     8845         /***
      258     8846          *** Handle CT/CD and LT/OD separately.
      259     8847          ***/
      260     8848
      261     8849    1      IF NODE$->OUT$BLK.CODE = %CT_VOL_SET OR NODE$->OUT$BLK.CODE = %CD_VOL_SET

   8849  2 000002   200003 470500                    LDP0    @NODE$,,AUTO
         2 000003   000000 471500                    LDP1    0,,PR0
         2 000004   100000 720100                    LXL0    0,,PR1
PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:54   
         2 000005   000010 600000 2                  TZE     s:8850
         2 000006   000022 100003                    CMPX0   18,DU
         2 000007   000013 601000 2                  TNZ     s:8851

      262     8850    1       THEN CALL FLI_CT_SNLIST ALTRET( JUSTALT );

   8850  2 000010   000070 701000 2                  TSX1    FLI_CT_SNLIST
         2 000011   000030 702000 2                  TSX2    JUSTALT
         2 000012   000015 710000 2                  TRA     s:8853

      263     8851    1       ELSE CALL FLI_LT_SNLIST;

   8851  2 000013   000031 701000 2                  TSX1    FLI_LT_SNLIST
         2 000014   000000 011000                    NOP     0

      264     8852
      265     8853    1      SNSIZEW = LENGTHC(SNLIST.NUM#) + SNLIST.NUM# * LENGTHC(SNLIST.SN#(0));

   8853  2 000015   200004 470500                    LDP0    @SNLIST$,,AUTO
         2 000016   000000 471500                    LDP1    0,,PR0
         2 000017   200005 473500                    LDP3    @SNSIZEW,,AUTO
         2 000020   100000 236100                    LDQ     0,,PR1
         2 000021   000006 402007                    MPY     6,DL
         2 000022   000004 036007                    ADLQ    4,DL
         2 000023   300000 756100                    STQ     0,,PR3

      266     8854    1      SNSIZEW = (SNSIZEW + 3) / 4;

   8854  2 000024   000003 036007                    ADLQ    3,DL
         2 000025   000004 506007                    DIV     4,DL
         2 000026   300000 756100                    STQ     0,,PR3

      267     8855
      268     8856    1      RETURN;

   8856  2 000027   000000 702200 xent               TSX2  ! X66_ARET

PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:55   
   8854  2 000030                       JUSTALT      null
      269     8857
      270     8858    1   JUSTALT: ;
      271     8859    1      ALTRETURN;

   8859  2 000030   000000 702200 xent               TSX2  ! X66_AALT

      272     8860
      273     8861        /****************************************/
      274     8862
      275     8863    1   FLI_LT_SNLIST: PROC;

   8863  2 000031   200016 741300       FLI_LT_SNLI* STX1  ! SUBLK$+1,,AUTO

      276     8864
      277     8865        /********************/
      278     8866
      279     8867         /***
      280     8868          *** Put each serial number in the VLP_SN.
      281     8869          ***/
      282     8870
      283     8871    2      SNLIST.NUM# = NODE$->OUT$BLK.NSUBLKS;

   8871  2 000032   200004 470500                    LDP0    @SNLIST$,,AUTO
         2 000033   000000 471500                    LDP1    0,,PR0
         2 000034   200003 473500                    LDP3    @NODE$,,AUTO
         2 000035   300000 474500                    LDP4    0,,PR3
         2 000036   400001 236100                    LDQ     1,,PR4
         2 000037   000022 772000                    QRL     18
         2 000040   100000 756100                    STQ     0,,PR1

      284     8872
      285     8873    3      DO SNLISTX = 0 TO SNLIST.NUM# - 1;

   8873  2 000041   200012 450100                    STZ     SNLISTX,,AUTO
         2 000042   000062 710000 2                  TRA     s:8875+1

PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:56   
      286     8874    3         SNLIST.SN#(SNLISTX) = NODE$->OUT$BLK.SUBLK$(SNLISTX)->OUT$SYM.TEXT;

   8874  2 000043   200004 470500                    LDP0    @SNLIST$,,AUTO
         2 000044   000000 471500                    LDP1    0,,PR0
         2 000045   200003 473500                    LDP3    @NODE$,,AUTO
         2 000046   300000 474500                    LDP4    0,,PR3
         2 000047   200012 720100                    LXL0    SNLISTX,,AUTO
         2 000050   400003 475510                    LDP5    3,X0,PR4
         2 000051   500004 236100                    LDQ     4,,PR5
         2 000052   000033 772000                    QRL     27
         2 000053   000000 621006                    EAX1    0,QL
         2 000054   200012 236100                    LDQ     SNLISTX,,AUTO
         2 000055   000006 402007                    MPY     6,DL
         2 000056   040106 100540                    MLR     fill='040'O
         2 000057   500004 200011                    ADSC9   4,,PR5                   cn=1,n=*X1
         2 000060   100001 000006                    ADSC9   1,Q,PR1                  cn=0,n=6

      287     8875    3         END;

   8875  2 000061   200012 054100                    AOS     SNLISTX,,AUTO
         2 000062   000000 471500                    LDP1    0,,PR0
         2 000063   200012 236100                    LDQ     SNLISTX,,AUTO
         2 000064   100000 116100                    CMPQ    0,,PR1
         2 000065   000043 604000 2                  TMI     s:8874

      288     8876
      289     8877    2      RETURN;

   8877  2 000066   200016 221300                    LDX1  ! SUBLK$+1,,AUTO
         2 000067   000001 702211                    TSX2  ! 1,X1

      290     8878
      291     8879    2   END FLI_LT_SNLIST;
      292     8880
      293     8881        /****************************************/
      294     8882
      295     8883    1   FLI_CT_SNLIST: PROC ALTRET;
PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:57   

   8883  2 000070   200016 741300       FLI_CT_SNLI* STX1  ! SUBLK$+1,,AUTO

      296     8884
      297     8885        /********************/
      298     8886
      299     8887         /***
      300     8888          *** Determine if CT#xxxxn/CD#xxxxn or CT#xxxxnn/CD#xxxxnn based on number of
      301     8889          *** characters.
      302     8890          ***/
      303     8891
      304     8892    2      SNLISTX = 0;

   8892  2 000071   200012 450100                    STZ     SNLISTX,,AUTO

      305     8893    2      SUBLK$ = NODE$->OUT$BLK.SUBLK$(0);

   8893  2 000072   200003 470500                    LDP0    @NODE$,,AUTO
         2 000073   000000 471500                    LDP1    0,,PR0
         2 000074   100003 236100                    LDQ     3,,PR1
         2 000075   200015 756100                    STQ     SUBLK$,,AUTO

      306     8894    2      IF SUBLK$->OUT$SYM.COUNT = LENGTHC('xxxxn')

   8894  2 000076   200015 473500                    LDP3    SUBLK$,,AUTO
         2 000077   300004 236100                    LDQ     4,,PR3
         2 000100   777000 376003                    ANQ     -512,DU
         2 000101   005000 116003                    CMPQ    2560,DU
         2 000102   000144 601000 2                  TNZ     s:8909

      307     8895    3       THEN DO;                            /* CT#xxxxn or CD#xxxxn               */

      308     8896    3         CT5FMTCHARS = SUBLK$->OUT$SYM.TEXT;

   8896  2 000103   300004 236100                    LDQ     4,,PR3
         2 000104   000033 772000                    QRL     27
         2 000105   000000 620006                    EAX0    0,QL
PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:58   
         2 000106   040100 100540                    MLR     fill='040'O
         2 000107   300004 200010                    ADSC9   4,,PR3                   cn=1,n=*X0
         2 000110   200006 000005                    ADSC9   CT5FMT,,AUTO             cn=0,n=5

      309     8897    3         IF CT5FMT.NUBIN > ASCBIN('9') OR CT5FMT.NUBIN < ASCBIN('0')

   8897  2 000111   200007 236100                    LDQ     CT5FMT+1,,AUTO
         2 000112   777000 376003                    ANQ     -512,DU
         2 000113   072000 116003                    CMPQ    29696,DU
         2 000114   000117 603000 2                  TRC     s:8900
         2 000115   060000 116003                    CMPQ    24576,DU
         2 000116   000120 603000 2                  TRC     s:8902

      310     8898    4          THEN DO;

      311     8899                                                /* Format error                       */
      312     8900    4            ALTRETURN;

   8900  2 000117   000000 702211                    TSX2  ! 0,X1

      313     8901    4            END;
      314     8902    4         DO N = CT5FMT.NUBIN TO ASCBIN('9');

   8902  2 000120   200007 236100                    LDQ     CT5FMT+1,,AUTO
         2 000121   000033 772000                    QRL     27
         2 000122   200013 756100                    STQ     N,,AUTO
         2 000123   000140 710000 2                  TRA     s:8906+1

      315     8903    4            CT5FMT.NUBIN = N;

   8903  2 000124   200013 236100                    LDQ     N,,AUTO
         2 000125   000033 736000                    QLS     27
         2 000126   200007 552140                    STBQ    CT5FMT+1,'40'O,AUTO

      316     8904    4            SNLIST.SN#(SNLISTX) = CT5FMTCHARS;

   8904  2 000127   200004 470500                    LDP0    @SNLIST$,,AUTO
PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:59   
         2 000130   000000 471500                    LDP1    0,,PR0
         2 000131   200012 236100                    LDQ     SNLISTX,,AUTO
         2 000132   000006 402007                    MPY     6,DL
         2 000133   040106 100500                    MLR     fill='040'O
         2 000134   200006 000005                    ADSC9   CT5FMT,,AUTO             cn=0,n=5
         2 000135   100001 000006                    ADSC9   1,Q,PR1                  cn=0,n=6

      317     8905    4            SNLISTX = SNLISTX + 1;

   8905  2 000136   200012 054100                    AOS     SNLISTX,,AUTO

      318     8906    4            END;

   8906  2 000137   200013 054100                    AOS     N,,AUTO
         2 000140   200013 235100                    LDA     N,,AUTO
         2 000141   000071 115007                    CMPA    57,DL
         2 000142   000124 604400 2                  TMOZ    s:8903

      319     8907    3         END;

   8907  2 000143   000217 710000 2                  TRA     s:8928

      320     8908    3       ELSE DO;                            /* CT#xxxxnn or CD#xxxxnn             */

      321     8909    3         IF SUBLK$->OUT$SYM.COUNT ~= LENGTHC('xxxxnn')

   8909  2 000144   006000 116003                    CMPQ    3072,DU
         2 000145   000147 600000 2                  TZE     s:8914

      322     8910    4          THEN DO;

      323     8911                                                /* Format error                       */
      324     8912    4            ALTRETURN;

   8912  2 000146   000000 702211                    TSX2  ! 0,X1

      325     8913    4            END;
PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:60   
      326     8914    3         CT6FMTCHARS = SUBLK$->OUT$SYM.TEXT;

   8914  2 000147   300004 236100                    LDQ     4,,PR3
         2 000150   000033 772000                    QRL     27
         2 000151   000000 620006                    EAX0    0,QL
         2 000152   040100 100540                    MLR     fill='040'O
         2 000153   300004 200010                    ADSC9   4,,PR3                   cn=1,n=*X0
         2 000154   200010 000006                    ADSC9   CT6FMT,,AUTO             cn=0,n=6

      327     8915    3         IF CT6FMT.NNUBIN.N1 >ASCBIN('9') OR CT6FMT.NNUBIN.N1 < ASCBIN('0')

   8915  2 000155   200011 236100                    LDQ     CT6FMT+1,,AUTO
         2 000156   777000 376003                    ANQ     -512,DU
         2 000157   072000 116003                    CMPQ    29696,DU
         2 000160   000171 603000 2                  TRC     s:8919
         2 000161   060000 116003                    CMPQ    24576,DU
         2 000162   000171 602000 2                  TNC     s:8919
         2 000163   200011 236100                    LDQ     CT6FMT+1,,AUTO
         2 000164   000777 376003                    ANQ     511,DU
         2 000165   000072 116003                    CMPQ    58,DU
         2 000166   000171 603000 2                  TRC     s:8919
         2 000167   000060 116003                    CMPQ    48,DU
         2 000170   000172 603000 2                  TRC     s:8921

      328     8916    3           OR CT6FMT.NNUBIN.N2 >ASCBIN('9') OR CT6FMT.NNUBIN.N2 < ASCBIN('0')
      329     8917    4          THEN DO;

      330     8918                                                /* Format error                       */
      331     8919    4            ALTRETURN;

   8919  2 000171   000000 702211                    TSX2  ! 0,X1

      332     8920    4            END;
      333     8921    3         CALL CHARBIN( NN, CT6FMT.NN );

   8921  2 000172   000100 305500                    DTB
         2 000173   200011 030002                    NDSC9   CT6FMT+1,,AUTO           cn=0,s=nosgn,sf=0,n=2
PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:61   
         2 000174   200014 000004                    NDSC9   NN,,AUTO                 cn=0,s=lsgnf,sf=0,n=4

      334     8922    4         DO N = NN TO 99;

   8922  2 000175   200014 235100                    LDA     NN,,AUTO
         2 000176   200013 755100                    STA     N,,AUTO
         2 000177   000214 710000 2                  TRA     s:8926+1

      335     8923    4            CALL BINCHAR( CT6FMT.NN, N );

   8923  2 000200   000100 301500                    BTD
         2 000201   200013 000004                    NDSC9   N,,AUTO                  cn=0,s=lsgnf,sf=0,n=4
         2 000202   200011 030002                    NDSC9   CT6FMT+1,,AUTO           cn=0,s=nosgn,sf=0,n=2

      336     8924    4            SNLIST.SN#(SNLISTX) = CT6FMTCHARS;

   8924  2 000203   200004 470500                    LDP0    @SNLIST$,,AUTO
         2 000204   000000 471500                    LDP1    0,,PR0
         2 000205   200012 236100                    LDQ     SNLISTX,,AUTO
         2 000206   000006 402007                    MPY     6,DL
         2 000207   040106 100500                    MLR     fill='040'O
         2 000210   200010 000006                    ADSC9   CT6FMT,,AUTO             cn=0,n=6
         2 000211   100001 000006                    ADSC9   1,Q,PR1                  cn=0,n=6

      337     8925    4            SNLISTX = SNLISTX + 1;

   8925  2 000212   200012 054100                    AOS     SNLISTX,,AUTO

      338     8926    4            END;

   8926  2 000213   200013 054100                    AOS     N,,AUTO
         2 000214   200013 235100                    LDA     N,,AUTO
         2 000215   000143 115007                    CMPA    99,DL
         2 000216   000200 604400 2                  TMOZ    s:8923

      339     8927    3         END;

PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:62   
      340     8928    2      SNLIST.NUM# = SNLISTX;

   8928  2 000217   200004 470500                    LDP0    @SNLIST$,,AUTO
         2 000220   000000 471500                    LDP1    0,,PR0
         2 000221   200012 236100                    LDQ     SNLISTX,,AUTO
         2 000222   100000 756100                    STQ     0,,PR1

      341     8929    2      RETURN;

   8929  2 000223   200016 221300                    LDX1  ! SUBLK$+1,,AUTO
         2 000224   000001 702211                    TSX2  ! 1,X1
      342     8930
      343     8931    2   END FLI_CT_SNLIST;
      344     8932
      345     8933    1   END FLI$SNLIST_NODE;
      346     8934        %EOD;

PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:63   
--  Include file information  --

   XU_MACRO_C.:E05TOU  is referenced.
   FLI_SUBS_C.:E05TOU  is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure FLI$SNLIST_NODE.
PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:64   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @NODE$                     4-0-0/w PTR         r     1 @SNLIST$
     5-0-0/w PTR         r     1 @SNSIZEW                   6-0-0/c STRC(45)    r     1 CT5FMT
     6-0-0/c CHAR(5)     r     1 CT5FMTCHARS               10-0-0/c STRC(54)    r     1 CT6FMT
    10-0-0/c CHAR(6)     r     1 CT6FMTCHARS               13-0-0/w SBIN        r     1 N
    14-0-0/w SBIN        r     1 NN                        *0-0-0/w PTR         r     1 NODE$
    *0-0-0/w PTR         r     1 SNLIST$                   12-0-0/w SBIN        r     1 SNLISTX
    *0-0-0/w SBIN        r     1 SNSIZEW                   15-0-0/w PTR         r     1 SUBLK$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(144)   r     1 OUT$BLK                    0-0-0/w ASTR(153)   r     1 OUT$SYM
     0-0-0/d STRC(90)    r     1 SNLIST


   Procedure FLI$SNLIST_NODE requires 149 words for executable code.
   Procedure FLI$SNLIST_NODE requires 16 words of local(AUTO) storage.
PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:65   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:66   
          MINI XREF LISTING

CT5FMT
      8719**DCL      8723--REDEF
CT5FMT.N
      8721**DCL      8722--REDEF
CT5FMT.NUBIN
      8722**DCL      8897>>IF       8897>>IF       8902>>DOINDEX  8903<<ASSIGN
CT5FMTCHARS
      8723**DCL      8896<<ASSIGN   8904>>ASSIGN
CT6FMT
      8724**DCL      8730--REDEF
CT6FMT.NN
      8726**DCL      8727--REDEF    8921>>CALLBLT  8923<<CALLBLT
CT6FMT.NNUBIN.N1
      8728**DCL      8915>>IF       8915>>IF
CT6FMT.NNUBIN.N2
      8729**DCL      8915>>IF       8915>>IF
CT6FMTCHARS
      8730**DCL      8914<<ASSIGN   8924>>ASSIGN
FLI_CT_SNLIST
      8883**PROC     8850--CALL
FLI_LT_SNLIST
      8863**PROC     8851--CALL
JUSTALT
      8854**LABEL    8850--CALLALT
N
      8732**DCL      8902<<DOINDEX  8903>>ASSIGN   8922<<DOINDEX  8923>>CALLBLT
NN
      8733**DCL      8921<<CALLBLT  8922>>DOINDEX
NODE$
        11**DCL         6--PROC     8849>>IF       8849>>IF       8871>>ASSIGN   8874>>ASSIGN   8874>>ASSIGN
      8893>>ASSIGN
OUT$BLK.CODE
PL6.E3A0      #002=FLI$SNLIST_NODE File=FLX$NODE.:E05TSI                         TUE 07/29/97 16:35 Page:67   
      8754**DCL      8849>>IF       8849>>IF
OUT$BLK.NSUBLKS
      8758**DCL      8871>>ASSIGN
OUT$BLK.SUBLK$
      8779**DCL      8874>>ASSIGN   8874>>ASSIGN   8893>>ASSIGN
OUT$SYM.COUNT
      8815**DCL      8818--IMP-SIZ  8874>>ASSIGN   8894>>IF       8896>>ASSIGN   8909>>IF       8914>>ASSIGN
OUT$SYM.TEXT
      8818**DCL      8874>>ASSIGN   8896>>ASSIGN   8914>>ASSIGN
SNLIST.NUM#
      8840**DCL      8853>>ASSIGN   8853--ASSIGN   8871<<ASSIGN   8873>>DOINDEX  8928<<ASSIGN
SNLIST.SN#
      8840**DCL      8853--ASSIGN   8874<<ASSIGN   8904<<ASSIGN   8924<<ASSIGN
SNLIST$
        13**DCL         6--PROC     8840--IMP-PTR  8853>>ASSIGN   8871>>ASSIGN   8873>>DOINDEX  8874>>ASSIGN
      8904>>ASSIGN   8924>>ASSIGN   8928>>ASSIGN
SNLISTX
      8731**DCL      8873<<DOINDEX  8874>>ASSIGN   8874>>ASSIGN   8874>>ASSIGN   8892<<ASSIGN   8904>>ASSIGN
      8905<<ASSIGN   8905>>ASSIGN   8924>>ASSIGN   8925<<ASSIGN   8925>>ASSIGN   8928>>ASSIGN
SNSIZEW
        14**DCL         6--PROC     8853<<ASSIGN   8854<<ASSIGN   8854>>ASSIGN
SUBLK$
      8734**DCL      8893<<ASSIGN   8894>>IF       8896>>ASSIGN   8896>>ASSIGN   8909>>IF       8914>>ASSIGN
      8914>>ASSIGN

PL6.E3A0      #003=FLI$USE_SNLIST_NODE File=FLX$NODE.:E05TSI                     TUE 07/29/97 16:35 Page:68   
      347        1        /*T***********************************************************/
      348        2        /*T*                                                         */
      349        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      350        4        /*T*                                                         */
      351        5        /*T***********************************************************/
      352        6        FLI$USE_SNLIST_NODE: PROC( NODE$ ) ALTRET;
      353        7        /*F*  NAME: FLI$USE_SNLIST
      354        8              PURPOSE: Inform I/O routines which serial number lists to use.
      355        9         */
      356       10
      357       11    1   DCL NODE$ PTR ALIGNED;                  /* To CT_VOL_SET or LT_VOL_SET node   */
      358       12                                                /* To CD_VOL_SET or OD_VOL_SET node   */
      359       13        /*N* This optional calling sequence should be changed to whatever
      360       14             way it will really be used.
      361       15        ***/
      362       16
      363       17         /***
      364       18          *** INCLUDE
      365       19          ***/
      366       20
      367       21        %INCLUDE CP_6;
      368     5580        %INCLUDE FLI_DATA_R;
      369     6994
      370     6995         /***
      371     6996          *** ENTRY
      372     6997          ***/
      373     6998
      374     6999    1   DCL FLI$SNLIST_NODE ENTRY(3) ALTRET; /* Builds serial number list from text   */
      375     7000    1   DCL FLI$ALLOC ENTRY(2);                 /* Get memory                         */
      376     7001
      377     7002         /***
      378     7003          *** AUTO
      379     7004          ***/
      380     7005
      381     7006    1   DCL SNSIZEW SBIN AUTO;        /* Number of words in built serial number list  */
      382     7007    1   DCL SNLIST$ PTR ALIGNED AUTO;           /* Pointer to serial number list      */
      383     7008    1   DCL SNLISTINFO$ PTR ALIGNED AUTO;       /* Pointer to serial number list info */
PL6.E3A0      #003=FLI$USE_SNLIST_NODE File=FLX$NODE.:E05TSI                     TUE 07/29/97 16:35 Page:69   
      384     7009
      385     7010         /***
      386     7011          *** BASED
      387     7012          ***/
      388     7013
      389     7014        %SNLISTINFO( STCLASS="BASED(SNLISTINFO$)" );
      390     7017
      391     7018        /***************************************/
      392     7019
      393     7020         /***
      394     7021          *** Allocate memory and build serial number list.
      395     7022          ***/
      396     7023
      397     7024    1      CALL FLI$ALLOC( %MAX_SNSIZEW, SNLIST$ );
      398     7025    1      CALL FLI$SNLIST_NODE( NODE$, SNLIST$, SNSIZEW ) ALTRET( JUSTALT );
      399     7026    1      CALL FLI$ALLOC( SNSIZEW-%MAX_SNSIZEW );
      400     7027
      401     7028    1      NBR_SNLISTS = NBR_SNLISTS + 1;
      402     7029    1      CALL FLI$ALLOC( SIZEW(SNLISTINFO), SNLISTINFO$ );
      403     7030
      404     7031    1      SNLISTINFO.SNLIST$ = SNLIST$;
      405     7032    1      SNLISTINFO.PREVINFO$ = LAST_SNLISTINFO$;
      406     7033    1      LAST_SNLISTINFO$ = SNLISTINFO$;
      407     7034    1      RETURN;
      408     7035
      409     7036    1   JUSTALT: ;
      410     7037    1      ALTRETURN;
      411     7038
      412     7039    1   END FLI$USE_SNLIST_NODE;

PL6.E3A0      #003=FLI$USE_SNLIST_NODE File=FLX$NODE.:E05TSI                     TUE 07/29/97 16:35 Page:70   
--  Include file information  --

   B_MICROPS_C.:E05TOU  is referenced.
   FLB_SUBS_C.:E05TOU  is referenced.
   FLI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure FLI$USE_SNLIST_NODE.

   Procedure FLI$USE_SNLIST_NODE requires 48 words for executable code.
   Procedure FLI$USE_SNLIST_NODE requires 12 words of local(AUTO) storage.

    No errors detected in file FLX$NODE.:E05TSI    .

PL6.E3A0      #003=FLI$USE_SNLIST_NODE File=FLX$NODE.:E05TSI                     TUE 07/29/97 16:35 Page:71   

 Object Unit name= FLI$USE_SNLIST_NODE                        File name= FLX$NODE.:E05TOU
 UTS= JUL 29 '97 16:35:51.36 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   DCB   even  none     0      0  M$PRE_RET
    2   Data  even  none     6      6  FLI$USE_SNLIST_NODE
    3   Proc  even  none    48     60  FLI$USE_SNLIST_NODE
    4  RoData even  none     3      3  FLI$USE_SNLIST_NODE

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes    yes     yes      Std        1  FLI$USE_SNLIST_NODE

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       2 FLI$ALLOC
 yes     yes           Std       3 FLI$SNLIST_NODE
                       nStd      0 X66_AUTO_1
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT
PL6.E3A0      #003=FLI$USE_SNLIST_NODE File=FLX$NODE.:E05TSI                     TUE 07/29/97 16:35 Page:72   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  LAST_SNLISTINFO$                      NBR_SNLISTS
     TAPE_DCBLIST$                         SNVECLIST$                            DPLIST$
     DPRESLIST$                            DISK_FILE_SPEC$                       SPECCHARS
     EFTWORD                               M$PRE_RET                             RET_CMDS_NAME
     B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #003=FLI$USE_SNLIST_NODE File=FLX$NODE.:E05TSI                     TUE 07/29/97 16:35 Page:73   


      347        1        /*T***********************************************************/
      348        2        /*T*                                                         */
      349        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      350        4        /*T*                                                         */
      351        5        /*T***********************************************************/
      352        6        FLI$USE_SNLIST_NODE: PROC( NODE$ ) ALTRET;

      6  3 000000   000000 700200 xent  FLI$USE_SNL* TSX0  ! X66_AUTO_1
         3 000001   000014 000001                    ZERO    12,1

      353        7        /*F*  NAME: FLI$USE_SNLIST
      354        8              PURPOSE: Inform I/O routines which serial number lists to use.
      355        9         */
      356       10
      357       11    1   DCL NODE$ PTR ALIGNED;                  /* To CT_VOL_SET or LT_VOL_SET node   */
      358       12                                                /* To CD_VOL_SET or OD_VOL_SET node   */
      359       13        /*N* This optional calling sequence should be changed to whatever
      360       14             way it will really be used.
      361       15        ***/
      362       16
      363       17         /***
      364       18          *** INCLUDE
      365       19          ***/
      366       20
      367       21        %INCLUDE CP_6;
      368     5580        %INCLUDE FLI_DATA_R;
      369     6994
      370     6995         /***
      371     6996          *** ENTRY
      372     6997          ***/
      373     6998
      374     6999    1   DCL FLI$SNLIST_NODE ENTRY(3) ALTRET; /* Builds serial number list from text   */
      375     7000    1   DCL FLI$ALLOC ENTRY(2);                 /* Get memory                         */
      376     7001
      377     7002         /***
      378     7003          *** AUTO
PL6.E3A0      #003=FLI$USE_SNLIST_NODE File=FLX$NODE.:E05TSI                     TUE 07/29/97 16:35 Page:74   
      379     7004          ***/
      380     7005
      381     7006    1   DCL SNSIZEW SBIN AUTO;        /* Number of words in built serial number list  */
      382     7007    1   DCL SNLIST$ PTR ALIGNED AUTO;           /* Pointer to serial number list      */
      383     7008    1   DCL SNLISTINFO$ PTR ALIGNED AUTO;       /* Pointer to serial number list info */
      384     7009
      385     7010         /***
      386     7011          *** BASED
      387     7012          ***/
      388     7013
      389     7014        %SNLISTINFO( STCLASS="BASED(SNLISTINFO$)" );
      390     7017
      391     7018        /***************************************/
      392     7019
      393     7020         /***
      394     7021          *** Allocate memory and build serial number list.
      395     7022          ***/
      396     7023
      397     7024    1      CALL FLI$ALLOC( %MAX_SNSIZEW, SNLIST$ );

   7024  3 000002   200005 630500                    EPPR0   SNLIST$,,AUTO
         3 000003   200011 450500                    STP0    SNLISTINFO$+3,,AUTO
         3 000004   000001 236000 4                  LDQ     1
         3 000005   200010 756100                    STQ     SNLISTINFO$+2,,AUTO
         3 000006   200010 630500                    EPPR0   SNLISTINFO$+2,,AUTO
         3 000007   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000010   000000 701000 xent               TSX1    FLI$ALLOC
         3 000011   000000 011000                    NOP     0

      398     7025    1      CALL FLI$SNLIST_NODE( NODE$, SNLIST$, SNSIZEW ) ALTRET( JUSTALT );

   7025  3 000012   200004 630500                    EPPR0   SNSIZEW,,AUTO
         3 000013   200012 450500                    STP0    SNLISTINFO$+4,,AUTO
         3 000014   200005 631500                    EPPR1   SNLIST$,,AUTO
         3 000015   200011 451500                    STP1    SNLISTINFO$+3,,AUTO
         3 000016   200003 236100                    LDQ     @NODE$,,AUTO
         3 000017   200010 756100                    STQ     SNLISTINFO$+2,,AUTO
PL6.E3A0      #003=FLI$USE_SNLIST_NODE File=FLX$NODE.:E05TSI                     TUE 07/29/97 16:35 Page:75   
         3 000020   200010 630500                    EPPR0   SNLISTINFO$+2,,AUTO
         3 000021   000021 631400 xsym               EPPR1   B_VECTNIL+17
         3 000022   000000 701000 xent               TSX1    FLI$SNLIST_NODE
         3 000023   000057 702000 3                  TSX2    JUSTALT

      399     7026    1      CALL FLI$ALLOC( SNSIZEW-%MAX_SNSIZEW );

   7026  3 000024   200004 235100                    LDA     SNSIZEW,,AUTO
         3 000025   000227 135007                    SBLA    151,DL
         3 000026   200010 755100                    STA     SNLISTINFO$+2,,AUTO
         3 000027   200010 630500                    EPPR0   SNLISTINFO$+2,,AUTO
         3 000030   200011 450500                    STP0    SNLISTINFO$+3,,AUTO
         3 000031   200011 630500                    EPPR0   SNLISTINFO$+3,,AUTO
         3 000032   000017 631400 xsym               EPPR1   B_VECTNIL+15
         3 000033   000000 701000 xent               TSX1    FLI$ALLOC
         3 000034   000000 011000                    NOP     0

      400     7027
      401     7028    1      NBR_SNLISTS = NBR_SNLISTS + 1;

   7028  3 000035   000000 054000 xsym               AOS     NBR_SNLISTS

      402     7029    1      CALL FLI$ALLOC( SIZEW(SNLISTINFO), SNLISTINFO$ );

   7029  3 000036   200006 630500                    EPPR0   SNLISTINFO$,,AUTO
         3 000037   200011 450500                    STP0    SNLISTINFO$+3,,AUTO
         3 000040   000002 236000 4                  LDQ     2
         3 000041   200010 756100                    STQ     SNLISTINFO$+2,,AUTO
         3 000042   200010 630500                    EPPR0   SNLISTINFO$+2,,AUTO
         3 000043   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000044   000000 701000 xent               TSX1    FLI$ALLOC
         3 000045   000000 011000                    NOP     0

      403     7030
      404     7031    1      SNLISTINFO.SNLIST$ = SNLIST$;

   7031  3 000046   200005 236100                    LDQ     SNLIST$,,AUTO
PL6.E3A0      #003=FLI$USE_SNLIST_NODE File=FLX$NODE.:E05TSI                     TUE 07/29/97 16:35 Page:76   
         3 000047   200006 470500                    LDP0    SNLISTINFO$,,AUTO
         3 000050   000000 756100                    STQ     0,,PR0

      405     7032    1      SNLISTINFO.PREVINFO$ = LAST_SNLISTINFO$;

   7032  3 000051   000000 236000 xsym               LDQ     LAST_SNLISTINFO$
         3 000052   200006 470500                    LDP0    SNLISTINFO$,,AUTO
         3 000053   000001 756100                    STQ     1,,PR0

      406     7033    1      LAST_SNLISTINFO$ = SNLISTINFO$;

   7033  3 000054   200006 236100                    LDQ     SNLISTINFO$,,AUTO
         3 000055   000000 756000 xsym               STQ     LAST_SNLISTINFO$

      407     7034    1      RETURN;

   7034  3 000056   000000 702200 xent               TSX2  ! X66_ARET

   7033  3 000057                       JUSTALT      null
      408     7035
      409     7036    1   JUSTALT: ;
      410     7037    1      ALTRETURN;

   7037  3 000057   000000 702200 xent               TSX2  ! X66_AALT
      411     7038
      412     7039    1   END FLI$USE_SNLIST_NODE;

PL6.E3A0      #003=FLI$USE_SNLIST_NODE File=FLX$NODE.:E05TSI                     TUE 07/29/97 16:35 Page:77   
--  Include file information  --

   B_MICROPS_C.:E05TOU  is referenced.
   FLB_SUBS_C.:E05TOU  is referenced.
   FLI_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   CP_6_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
      No diagnostics issued in procedure FLI$USE_SNLIST_NODE.
PL6.E3A0      #003=FLI$USE_SNLIST_NODE File=FLX$NODE.:E05TSI                     TUE 07/29/97 16:35 Page:78   

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @NODE$                    *0-0-0/w PTR         r     1 NODE$
     5-0-0/w PTR         r     1 SNLIST$                    6-0-0/w PTR         r     1 SNLISTINFO$
     4-0-0/w SBIN        r     1 SNSIZEW

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 DISK_FILE_SPEC$            0-0-0/w PTR         r     1 DPLIST$
     0-0-0/w PTR         r     1 DPRESLIST$                 0-0-0/w PTR         r     1 LAST_SNLISTINFO$
     0-0-0/w SBIN        r     1 NBR_SNLISTS                0-0-0/c ASTR(9)     r     1 RET_CMDS_NAME
     0-0-0/w PTR         r     1 SNVECLIST$                 0-0-0/w PTR         r     1 TAPE_DCBLIST$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(72)    r     1 SNLISTINFO


   Procedure FLI$USE_SNLIST_NODE requires 48 words for executable code.
   Procedure FLI$USE_SNLIST_NODE requires 12 words of local(AUTO) storage.

    No errors detected in file FLX$NODE.:E05TSI    .
PL6.E3A0      #003=FLI$USE_SNLIST_NODE File=FLX$NODE.:E05TSI                     TUE 07/29/97 16:35 Page:79   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #003=FLI$USE_SNLIST_NODE File=FLX$NODE.:E05TSI                     TUE 07/29/97 16:35 Page:80   
          MINI XREF LISTING

DISK_CLOSE.SN_
      6191**DCL      6191--REDEF
DISK_CLOSE.UTL_
      6192**DCL      6192--REDEF
DISK_CLOSE.V.EXPIRE#
      6206**DCL      6206--REDEF
DISK_CLOSE.V.TYPE#
      6204**DCL      6204--REDEF
DISK_CLOSE.V.XTNSIZE#
      6201**DCL      6201--REDEF    6203--REDEF
DISK_FILE_SPEC.SPEC
      6556**DCL      6558--REDEF
DISK_FILE_SPEC.SPEC.START
      6557**DCL      6557--REDEF
DISK_FILE_SPEC.SPEC.STOP
      6558**DCL      6558--REDEF
DISK_FILE_SPEC$
      6555**DCL      6556--IMP-PTR
DISK_OPEN.ACSVEH_
      6056**DCL      6057--REDEF
DISK_OPEN.ALTKEYS_
      6062**DCL      6063--REDEF    6063--REDEF
DISK_OPEN.HDR_
      6061**DCL      6062--REDEF
DISK_OPEN.TAB_
      6060**DCL      6061--REDEF
DISK_OPEN.UHL_
      6054**DCL      6055--REDEF    6055--REDEF
DISK_OPEN.V.FSN#
      6094**DCL      6094--REDEF    6094--REDEF
DISK_OPEN.WSN_
      6060**DCL      6060--REDEF
PL6.E3A0      #003=FLI$USE_SNLIST_NODE File=FLX$NODE.:E05TSI                     TUE 07/29/97 16:35 Page:81   
DISK_READ.STATION_
      6118**DCL      6119--REDEF
DISK_READ.V.DVBYTE.REREAD#
      6130**DCL      6130--REDEF
DISK_READ.V.INDX#
      6128**DCL      6128--REDEF
DISK_WRITE.STATION_
      6156**DCL      6156--REDEF
DISK_WRITE.V.DVBYTE.VFC#
      6163**DCL      6163--REDEF
DPLIST$
      6541**DCL      6553--IMP-PTR
DPRESLIST$
      6555**DCL      6555--IMP-PTR
EFTWORD
      6676**DCL      6676--REDEF
FLI$ALLOC
      7000**DCL-ENT  7024--CALL     7026--CALL     7029--CALL
FLI$SNLIST_NODE
      6999**DCL-ENT  7025--CALL
FPT_EXIT.V.STEPCC#
      5981**DCL      5981--REDEF
JUSTALT
      7033**LABEL    7025--CALLALT
LAST_SNLISTINFO$
      5964**DCL      7032>>ASSIGN   7033<<ASSIGN
NBR_SNLISTS
      5968**DCL      7028<<ASSIGN   7028>>ASSIGN
NODE$
        11**DCL         6--PROC     7025<>CALL
PRE_RET_CLOSE.SN_
      6919**DCL      6919--REDEF
PRE_RET_CLOSE.UTL_
      6920**DCL      6920--REDEF
PRE_RET_CLOSE.V.EXPIRE#
      6934**DCL      6934--REDEF
PL6.E3A0      #003=FLI$USE_SNLIST_NODE File=FLX$NODE.:E05TSI                     TUE 07/29/97 16:35 Page:82   
PRE_RET_CLOSE.V.TYPE#
      6932**DCL      6932--REDEF
PRE_RET_CLOSE.V.XTNSIZE#
      6929**DCL      6929--REDEF    6931--REDEF
PRE_RET_OPEN.ACSVEH_
      6854**DCL      6855--REDEF
PRE_RET_OPEN.ALTKEYS_
      6860**DCL      6861--REDEF    6861--REDEF
PRE_RET_OPEN.HDR_
      6859**DCL      6860--REDEF
PRE_RET_OPEN.TAB_
      6858**DCL      6859--REDEF
PRE_RET_OPEN.UHL_
      6852**DCL      6853--REDEF    6853--REDEF
PRE_RET_OPEN.V.FSN#
      6892**DCL      6892--REDEF    6892--REDEF
PRE_RET_OPEN.WSN_
      6858**DCL      6858--REDEF
PRE_RET_READ.STATION_
      6709**DCL      6710--REDEF
PRE_RET_READ.V.DVBYTE.REREAD#
      6721**DCL      6721--REDEF
PRE_RET_READ.V.INDX#
      6719**DCL      6719--REDEF
PRE_RET_WRITE.STATION_
      6747**DCL      6747--REDEF
PRE_RET_WRITE.V.DVBYTE.VFC#
      6754**DCL      6754--REDEF
RET_CMDS_NAME.L#
      6963**DCL      6963--IMP-SIZ
SNLIST$
      7007**DCL      7024<>CALL     7025<>CALL     7031>>ASSIGN
SNLISTINFO
      7015**DCL      7029--CALL
SNLISTINFO.PREVINFO$
      7015**DCL      7032<<ASSIGN
PL6.E3A0      #003=FLI$USE_SNLIST_NODE File=FLX$NODE.:E05TSI                     TUE 07/29/97 16:35 Page:83   
SNLISTINFO.SNLIST$
      7015**DCL      7031<<ASSIGN
SNLISTINFO$
      7008**DCL      7015--IMP-PTR  7029<>CALL     7031>>ASSIGN   7032>>ASSIGN   7033>>ASSIGN
SNSIZEW
      7006**DCL      7025<>CALL     7026>>CALL
SNVECLIST$
      6495**DCL      6495--IMP-PTR
SPEC.START
      6559**DCL      6560--REDEF
SPEC.STOP
      6560**DCL      6561--REDEF
SPECCHARS
      6559**DCL      6559--REDEF
TAPE_CLOSE.SN_
      6412**DCL      6412--REDEF
TAPE_CLOSE.UTL_
      6413**DCL      6413--REDEF
TAPE_CLOSE.V.EXPIRE#
      6427**DCL      6427--REDEF
TAPE_CLOSE.V.TYPE#
      6425**DCL      6425--REDEF
TAPE_CLOSE.V.XTNSIZE#
      6422**DCL      6422--REDEF    6424--REDEF
TAPE_DCBLIST$
      5968**DCL      5968--IMP-PTR
TAPE_OPEN.ACSVEH_
      6277**DCL      6278--REDEF
TAPE_OPEN.ALTKEYS_
      6283**DCL      6284--REDEF    6284--REDEF
TAPE_OPEN.HDR_
      6282**DCL      6283--REDEF
TAPE_OPEN.TAB_
      6281**DCL      6282--REDEF
TAPE_OPEN.UHL_
      6275**DCL      6276--REDEF    6276--REDEF
PL6.E3A0      #003=FLI$USE_SNLIST_NODE File=FLX$NODE.:E05TSI                     TUE 07/29/97 16:35 Page:84   
TAPE_OPEN.V.FSN#
      6315**DCL      6315--REDEF    6315--REDEF
TAPE_OPEN.WSN_
      6281**DCL      6281--REDEF
TAPE_READ.STATION_
      6339**DCL      6340--REDEF
TAPE_READ.V.DVBYTE.REREAD#
      6351**DCL      6351--REDEF
TAPE_READ.V.INDX#
      6349**DCL      6349--REDEF
TAPE_WRITE.STATION_
      6377**DCL      6377--REDEF
TAPE_WRITE.V.DVBYTE.VFC#
      6384**DCL      6384--REDEF
TVECTOR.W2
      6508**DCL      6509--REDEF
