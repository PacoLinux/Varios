VERSION E05

PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:1    
        1        1        /*M* ROUTINES TO INITIALIZE MM TABLES                */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* PLM=8,IND=2,THI=2,ENU=2,CSU=2,DTI=4,DCI=4,ECU=4,AND */
        8        8        INITM:  PROC;
        9        9        /* Build WSPTD at start of MON ISR */
       10       10        /* Build Page Table for MON */
       11       11        /**/
       12       12        %INCLUDE IS$MACROS;
       13     1287        %INCLUDE B_STRINGS_C;
       14     1416        %INCLUDE M_INFO_C;
       15     1556        %INCLUDE B$JIT_C;
       16     1870        /**/
       17     1871        %B$JIT0(STCLASS="BASED(INFOX$)");
       18     1960    1         2 * BIT(1);                       /* Just to end the macro              */
       19     1961        %DISKDIR(NAME=ADIR,STCLASS="SYMREF");
       20     2217    1   DCL INFOX$ PTR;
       21     2218        %PTR_STRUCT(NAME=INFOX_PTR,STCLASS="REDEF INFOX$");
       22     2236    1   DCL INFOY$ PTR;
       23     2237        %PTR_STRUCT(NAME=INFOY_PTR,STCLASS="REDEF INFOY$");
       24     2255    1   DCL WS0PT$ PTR SYMREF;
       25     2256    1   DCL 1 WSPTD(0:28) ALIGNED BASED(INFOX$), /* Directory                         */
       26     2257        %DIRW(LVL=2);
       27     2285    1   DCL 1 MONPT(0:0) ALIGNED BASED(INFOY$), /* MON PT                             */
       28     2286        %PTW(LVL=2);
       29     2314    1   DCL 1 WS0PT(0:0) ALIGNED BASED(WS0PT$), /* WS0 PT                             */
       30     2315        %PTW(LVL=2);
       31     2343        %AALS(STCLASS="BASED(AALS$)");          /* AARDV LSR                          */
       32     4670    1   DCL BSNLS BIT(1) SYMREF;
       33     4671    1   DCL AALS$ PTR STATIC INIT(ADDR(BSNLS));
       34     4672    1   DCL MSEGTBL BIT(1) SYMREF;
       35     4673    1   DCL MSEGTBL$ PTR STATIC INIT(ADDR(MSEGTBL));
       36     4674        %PTR_STRUCT(NAME=MSEGTBL_PTR,STCLASS="REDEF MSEGTBL$");
       37     4692    1   DCL 1 MSEGTAB BASED(MSEGTBL$),
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:2    
       38     4693    1         2 FSTPG_BYTEAD UBIN WORD,
              4693                  /* Byte index in MON PT of the frst page of overlay */
       39     4694    1         2 NODEINFO(0:14),
       40     4695    1           3 RELADDR UBIN HALF UNAL, /* Byte index in SEGTAB for this node mapwords */
       41     4696    1           3 SIZE UBIN HALF UNAL;          /* Size of mapwords for this node     */
       42     4697    1   DCL 1 BAS_PT(0:0) ALIGNED BASED(INFOX$),
       43     4698        %PTW(LVL=2);                            /* PT for overlays , build in SEGTAB  */
       44     4726    1   DCL MROREC_NODES# UBIN WORD BASED(INFOX$); /* Nodes nr on PO tape             */
       45     4727    1   DCL NUMNODES UBIN WORD;
       46     4728    1   DCL LSEG#PTWS UBIN WORD;           /* Max size in PT words of an overlay seg  */
       47     4729    1   DCL STARTPG UBIN WORD;
       48     4730    1   DCL LASTPG UBIN WORD;
       49     4731        %DIRW(NAME=DIRW0,STCLASS="BASED(INFOY$)"); /* Word 0 of Dir for S1000         */
       50     4759        %PTW(NAME=W_PTW,STCLASS="STATIC");      /* Page Table Word                    */
       51     4787        %DIRHDR(NAME=HDRMH,STCLASS="SYMREF");   /* Headers                            */
       52     4798        %DIRHDR(NAME=HDRMD,STCLASS="SYMREF");
       53     4809        %DIRHDR(NAME=HDRMP0,STCLASS="SYMREF");
       54     4820        %DIRHDR(NAME=BAS_HDR,STCLASS="BASED(HDR$)");
       55     4831    1   DCL HDRMP1 BIT(1) SYMREF;
       56     4832    1   DCL HDR$ PTR;
       57     4833        /**/
       58     4834    1   DCL PPDBR UBIN(19) ALIGNED STATIC SYMDEF;
       59     4835    1   DCL DIR_ENT0 BIT(36) ALIGNED STATIC SYMDEF; /* WSPTD0                         */
       60     4836    1   DCL MONPLL UBIN WORD SYMREF;
       61     4837    1   DCL BASEMPT UBIN WORD SYMREF;
       62     4838    1   DCL BASEJ UBIN WORD SYMREF;
       63     4839    1   DCL S1000_FLG BIT(1) SYMREF;
       64     4840    1   DCL XA_MODE BIT(1) SYMREF;
       65     4841    1   DCL RPM_FLG BIT(1) SYMREF;
       66     4842    1   DCL RCV_FLG BIT(4) SYMREF;
       67     4843        %PTW(NAME=FPMC,STCLASS="SYMREF",LVL=1); /* Free page constant                 */
       68     4871        /**/
       69     4872    1   DCL I UBIN WORD;
       70     4873    1   DCL J SBIN WORD;
       71     4874        /**/
       72     4875    1           INFOX_PTR='0'B;                 /* Build Dir Pointer                  */
       73     4876    1           INFOX_PTR.S_D_FIELD=%ALS_MONIS;
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:3    
       74     4877    2           DO I=1 TO 9;                    /* Fill Dir with filler               */
       75     4878    2             WSPTD(I)='0'B;
       76     4879    2             WSPTD.P(I)='1'B;              /* PT present                         */
       77     4880    2             WSPTD.NBLKS(I)=16;
       78     4881    2           END;                            /* DO I=                              */
       79     4882    2           IF S1000_FLG='1'B THEN DO;      /* Move page table entry for WS0      */
       80     4883    2                 INFOY_PTR='0'B;
       81     4884    2                 INFOY_PTR.S_D_FIELD=%ALS_AIS;
       82     4885    2                 INFOY_PTR.WOFFS=512;
       83     4886    2                 WSPTD(0)=DIRW0;
       84     4887    2                 DIR_ENT0=DIRW0;
       85     4888    2               END;                        /* THEN                               */
       86     4889    1             ELSE;
       87     4890        /* Init Mon page table */
       88     4891    1           INFOY_PTR='0'B;
       89     4892    1           INFOY_PTR.S_D_FIELD=%ALS_MPGTBL;
       90     4893        /* Fill with free page pattern */
       91     4894    2           DO I=0 TO 1024*11-1;
       92     4895    2             MONPT(I)=FPMC;
       93     4896    2           END;                            /* DO I=                              */
       94     4897        /* Init entry in WSPTD for MON */
       95     4898    1           IF RPM_FLG THEN WSPTD.BLKNO(%MONWSQ)=BASEMPT/1024;
       96     4899    2             ELSE IF S1000_FLG='1'B THEN DO;
       97     4900    2                   IF XA_MODE THEN WSPTD.BLKNO(%MONWSQ)=WS0PT.RPN(BASEMPT/1024);
       98     4901    2                     ELSE WSPTD.BLKNO(%MONWSQ)=WS0PT.RPN(BASEMPT/1024)*16;
              4901                              /* Make it a mod 64 address */
       99     4902    2                 END;                      /* THEN                               */
      100     4903    1               ELSE WSPTD.BLKNO(%MONWSQ)=BASEMPT/64;
      101     4904        /* Init entry in WSPTD for CG */
      102     4905    1           WSPTD(%CGWSQ)='0'B;
      103     4906    1           WSPTD.P(%CGWSQ)='1'B;
      104     4907    1           WSPTD.NBLKS(%CGWSQ)=16*10;
      105     4908    1           IF RPM_FLG THEN WSPTD.BLKNO(%CGWSQ)=(BASEMPT+1024)/1024;
      106     4909    2             ELSE IF S1000_FLG='1'B THEN DO;
      107     4910    2                   IF XA_MODE THEN WSPTD.BLKNO(%CGWSQ)=WS0PT.RPN((BASEMPT+1024)/1024);
      108     4911    2                     ELSE WSPTD.BLKNO(%CGWSQ)=WS0PT.RPN((BASEMPT+1024)/1024)*16;
              4911                              /* Make it a mod 64 address */
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:4    
      109     4912    2                 END;                      /* THEN                               */
      110     4913    1               ELSE WSPTD.BLKNO(%CGWSQ)=(BASEMPT+1024)/64;
      111     4914        /* Init PT words */
      112     4915    2           DO I=%PGTBLLO TO %PGTBLHI;
      113     4916    2             MONPT.SCTRL(I)=%SCUSER;
      114     4917    2             MONPT.CTRL(I)=%PGINMEM|%PGWRITE|%PGIOM;
      115     4918    2             IF S1000_FLG='1'B THEN MONPT.RPN(I)=WS0PT.RPN(BASEMPT/1024+I);
      116     4919    2               ELSE MONPT.RPN(I)=BASEMPT/1024+I;
      117     4920    2           END;                            /* DO I=                              */
      118     4921    2           DO I=%JITPG TO %JITEND;         /* JIT pages                          */
      119     4922    2             J=I-%JITPG;
      120     4923    2             MONPT.SCTRL(I)=%SCUSER;
      121     4924    2             MONPT.CTRL(I)=%PGINMEM|%PGWRITE|%PGIOM;
      122     4925    2             IF S1000_FLG='1'B THEN MONPT.RPN(I)=WS0PT.RPN(BASEJ/1024+J);
      123     4926    2               ELSE MONPT.RPN(I)=BASEJ/1024+J;
      124     4927    2           END;                            /* DO I=                              */
      125     4928        /* MON low real pages */
      126     4929    2           DO I=0 TO 7;
      127     4930    2             MONPT.SCTRL(%REALLO+I)=%SCUSER;
      128     4931    2             MONPT.CTRL(%REALLO+I)=%PGINMEM|%PGWRITE|%PGIOM;
      129     4932    2             IF S1000_FLG='1'B THEN MONPT.RPN(%REALLO+I)=WS0PT.RPN(I);
      130     4933    2               ELSE MONPT.RPN(%REALLO+I)=I;
      131     4934    2           END;                            /* DO I=                              */
      132     4935        /* Init Pt for MON HJIT */
      133     4936    1           J=HDRMH.SIZE;
      134     4937    1           I=0;
      135     4938    1   INITMHJ:
      136     4939    1           MONPT.SCTRL(%HJITPG+I)=%SCUSER;
      137     4940    1           MONPT.CTRL(%HJITPG+I)=%PGINMEM|%PGWRITE|%PGHKEEP|%PGIOM;
      138     4941    1           IF S1000_FLG='1'B THEN MONPT.RPN(%HJITPG+I)=WS0PT.RPN(HDRMH.BASE/1024+I);
      139     4942    1             ELSE MONPT.RPN(%HJITPG+I)=HDRMH.BASE/1024+I;
      140     4943    2           IF (J-1024)>0 THEN DO;
      141     4944    2                 J=J-1024;
      142     4945    2                 I=I+1;
      143     4946    2                 GOTO INITMHJ;
      144     4947    2               END;                        /* THEN                               */
      145     4948    1             ELSE;
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:5    
      146     4949        /* Init page table for overlay */
      147     4950    1           MONPT.SCTRL(%SEGTBL)=%SCUSER;
      148     4951    1           MONPT.CTRL(%SEGTBL)=%PGINMEM|%PGWRITE|%PGIOM;
      149     4952    1           IF S1000_FLG='1'B THEN MONPT.RPN(%SEGTBL)=WS0PT.RPN(MSEGTBL_PTR.WOFFS/1024);
      150     4953    1             ELSE MONPT.RPN(%SEGTBL)=MSEGTBL_PTR.WOFFS/1024;
      151     4954        /* Init page table for ISR */
      152     4955    1           J=HDRMD.SIZE;
      153     4956    1           I=0;
      154     4957    1   INITM1:
      155     4958    1           MONPT.SCTRL(%ISEGLO+I)=%SCUSER;
      156     4959    1           MONPT.CTRL(%ISEGLO+I)=%PGINMEM|%PGWRITE|%PGIOM;
      157     4960    1           IF S1000_FLG='1'B THEN MONPT.RPN(%ISEGLO+I)=WS0PT.RPN(HDRMD.BASE/1024+I);
      158     4961    1             ELSE MONPT.RPN(%ISEGLO+I)=HDRMD.BASE/1024+I;
      159     4962    2           IF (J-1024)>0 THEN DO;
      160     4963    2                 J=J-1024;
      161     4964    2                 I=I+1;
      162     4965    2                 GOTO INITM1;
      163     4966    2               END;                        /* THEN                               */
      164     4967    1             ELSE;
      165     4968    1           I=I+1;
      166     4969    1           MONPLL=%ISEGLO+I;          /* Save MON PROC lowest page for recovery  */
      167     4970    1           J=HDRMP0.SIZE;
      168     4971    1   INITM2:
      169     4972    1           MONPT.SCTRL(%ISEGLO+I)=%SCUSER;
      170     4973    1           MONPT.CTRL(%ISEGLO+I)=%PGINMEM|%PGHKEEP|%PGIOM;
      171     4974    1           IF S1000_FLG='1'B THEN MONPT.RPN(%ISEGLO+I)=WS0PT.RPN(HDRMD.BASE/1024+I);
      172     4975    1             ELSE MONPT.RPN(%ISEGLO+I)=HDRMD.BASE/1024+I;
      173     4976    2           IF (J-1024)>0 THEN DO;
      174     4977    2                 J=J-1024;
      175     4978    2                 I=I+1;
      176     4979    2                 GOTO INITM2;
      177     4980    2               END;                        /* THEN                               */
      178     4981    1             ELSE;
      179     4982        /* Build the overlay info */
      180     4983    1           MSEGTAB.FSTPG_BYTEAD=(%ISEGLO+I+1)*4;
      181     4984    1           INFOX_PTR='0'B;
      182     4985    1           INFOX_PTR.S_D_FIELD=%ALS_DEFDIR;
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:6    
      183     4986    1           NUMNODES=MROREC_NODES#;         /* Nr of nodes as on the PO tape      */
      184     4987    1           HDR$=ADDR(HDRMP1);
      185     4988    1           LSEG#PTWS=HDR$->BAS_HDR.SIZE;
      186     4989    2           DO I=1 TO NUMNODES-2;           /* Nodes#-root-1                      */
      187     4990    2             LSEG#PTWS=MAXIMUM(LSEG#PTWS,PINCRW(HDR$,I*4)->BAS_HDR.SIZE);
      188     4991    2           END;                            /* DO I=                              */
      189     4992    1           LSEG#PTWS=(LSEG#PTWS+1023)/1024; /* Make it a nr of pages             */
      190     4993    2           DO I=0 TO NUMNODES-2;
      191     4994    2             MSEGTAB.NODEINFO.SIZE(I)=LSEG#PTWS*4; /* Size in bytes              */
      192     4995    2           END;                            /* DO I=                              */
      193     4996    2           DO I=1 TO NUMNODES-2;
      194     4997    2             MSEGTAB.NODEINFO.RELADDR(I)=MSEGTAB.NODEINFO.RELADDR(I-1)+LSEG#PTWS*4;
      195     4998    2           END;                            /* DO I=                              */
      196     4999    2           DO I=0 TO NUMNODES-2;
      197     5000    2             STARTPG=PINCRW(HDR$,I*4)->BAS_HDR.BASE/1024;
      198     5001    2             LASTPG=STARTPG+PINCRW(HDR$,I*4)->BAS_HDR.SIZE/1024-1;
      199     5002    2             INFOX$=PINCRW(MSEGTBL$,15+I*LSEG#PTWS);
      200     5003    3             DO J=0 TO LASTPG-STARTPG;
      201     5004    3               BAS_PT.SCTRL(J)=%SCUSER;
      202     5005    3               BAS_PT.CTRL(J)=%PGINMEM|%PGHKEEP|%PGIOM;
      203     5006    3               IF S1000_FLG='1'B THEN BAS_PT.RPN(J)=WS0PT.RPN(STARTPG+J);
      204     5007    3                 ELSE BAS_PT.RPN(J)=STARTPG+J;
      205     5008    3             END;                          /* DO J=                              */
      206     5009    2           END;                            /* DO I=                              */
      207     5010    1           MSEGTAB.NODEINFO(NUMNODES-1)='0'B;
      208     5011        /**/
      209     5012    1   INITM4:
      210     5013        /* TIGR data if DB or Recovery */
      211     5014    1           IF(RCV_FLG='0'B OR ADIR.TIGRDATA.SIZE=0) THEN;
      212     5015    2             ELSE DO;
      213     5016    2                 J=ADIR.TIGRDATA.SIZE;
      214     5017    2                 I=0;
      215     5018    2   INITM5:
      216     5019    2                 MONPT.SCTRL(%TIGRLO+I)=%SCUSER;
      217     5020    2                 MONPT.CTRL(%TIGRLO+I)=%PGINMEM|%PGWRITE|%PGIOM;
      218     5021    2                 IF S1000_FLG='1'B THEN MONPT.RPN(%TIGRLO+I)=WS0PT.RPN(ADIR.TIGRDATA.
              5021                          BASE/1024+I);
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:7    
      219     5022    2                   ELSE MONPT.RPN(%TIGRLO+I)=ADIR.TIGRDATA.BASE/1024+I;
      220     5023    3                 IF (J-1024)>0 THEN DO;
      221     5024    3                       J=J-1024;
      222     5025    3                       I=I+1;
      223     5026    3                       GOTO INITM5;
      224     5027    3                     END;                  /* THEN                               */
      225     5028    2                   ELSE;
      226     5029    2               END;                        /* ELSE                               */
      227     5030        /* Put privileges in JIT */
      228     5031    1           INFOX_PTR='0'B;
      229     5032    1           INFOX_PTR.S_D_FIELD=%ALS_JIT;
      230     5033    1           B$JIT.PRIV.ACTIVE='777777777777'O;
      231     5034    1           B$JIT.PRIV.AUTH='777777777777'O;
      232     5035    1           IF RPM_FLG THEN PPDBR=HDRMD.BASE/512; /* On RPM the PDBR is 19 bits   */
      233     5036    1             ELSE IF S1000_FLG='1'B THEN PPDBR=WS0PT.RPN(HDRMD.BASE/1024)*2*4;
              5036                      /* PPDBR is a mod 512 address on 17 bits */
      234     5037    1               ELSE PPDBR=(HDRMD.BASE/512)*16; /* On DPS8 the PDBR is 15 bits long */
      235     5038    1           RETURN;
      236     5039    1   END INITM;
      237     5040        %EOD;

PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:8    
--  Include file information  --

   B$JIT_C.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure INITM.

   Procedure INITM requires 549 words for executable code.
   Procedure INITM requires 14 words of local(AUTO) storage.

PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:9    

 Object Unit name= INITM                                      File name= ISI$MM.:E05TOU
 UTS= JUL 29 '97 22:54:50.64 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none     5      5  INITM
    1   Proc  even  none   549   1045  INITM
    2  RoData even  none     6      6  INITM

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes            yes      Std        0  INITM

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    0      3  PPDBR                              0      4  DIR_ENT0

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:10   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ADIR                                  WS0PT$                                BSNLS
     MSEGTBL                               HDRMH                                 HDRMD
     HDRMP0                                HDRMP1                                MONPLL
     BASEMPT                               BASEJ                                 S1000_FLG
     XA_MODE                               RPM_FLG                               RCV_FLG
     FPMC                                  B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:11   


        1        1        /*M* ROUTINES TO INITIALIZE MM TABLES                */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* PLM=8,IND=2,THI=2,ENU=2,CSU=2,DTI=4,DCI=4,ECU=4,AND */
        8        8        INITM:  PROC;

      8  1 000000   000000 700200 xent  INITM        TSX0  ! X66_AUTO_0
         1 000001   000016 000000                    ZERO    14,0

        9        9        /* Build WSPTD at start of MON ISR */
       10       10        /* Build Page Table for MON */
       11       11        /**/
       12       12        %INCLUDE IS$MACROS;
       13     1287        %INCLUDE B_STRINGS_C;
       14     1416        %INCLUDE M_INFO_C;
       15     1556        %INCLUDE B$JIT_C;
       16     1870        /**/
       17     1871        %B$JIT0(STCLASS="BASED(INFOX$)");
       18     1960    1         2 * BIT(1);                       /* Just to end the macro              */
       19     1961        %DISKDIR(NAME=ADIR,STCLASS="SYMREF");
       20     2217    1   DCL INFOX$ PTR;
       21     2218        %PTR_STRUCT(NAME=INFOX_PTR,STCLASS="REDEF INFOX$");
       22     2236    1   DCL INFOY$ PTR;
       23     2237        %PTR_STRUCT(NAME=INFOY_PTR,STCLASS="REDEF INFOY$");
       24     2255    1   DCL WS0PT$ PTR SYMREF;
       25     2256    1   DCL 1 WSPTD(0:28) ALIGNED BASED(INFOX$), /* Directory                         */
       26     2257        %DIRW(LVL=2);
       27     2285    1   DCL 1 MONPT(0:0) ALIGNED BASED(INFOY$), /* MON PT                             */
       28     2286        %PTW(LVL=2);
       29     2314    1   DCL 1 WS0PT(0:0) ALIGNED BASED(WS0PT$), /* WS0 PT                             */
       30     2315        %PTW(LVL=2);
       31     2343        %AALS(STCLASS="BASED(AALS$)");          /* AARDV LSR                          */
       32     4670    1   DCL BSNLS BIT(1) SYMREF;
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:12   
       33     4671    1   DCL AALS$ PTR STATIC INIT(ADDR(BSNLS));
       34     4672    1   DCL MSEGTBL BIT(1) SYMREF;
       35     4673    1   DCL MSEGTBL$ PTR STATIC INIT(ADDR(MSEGTBL));
       36     4674        %PTR_STRUCT(NAME=MSEGTBL_PTR,STCLASS="REDEF MSEGTBL$");
       37     4692    1   DCL 1 MSEGTAB BASED(MSEGTBL$),
       38     4693    1         2 FSTPG_BYTEAD UBIN WORD,
              4693                  /* Byte index in MON PT of the frst page of overlay */
       39     4694    1         2 NODEINFO(0:14),
       40     4695    1           3 RELADDR UBIN HALF UNAL, /* Byte index in SEGTAB for this node mapwords */
       41     4696    1           3 SIZE UBIN HALF UNAL;          /* Size of mapwords for this node     */
       42     4697    1   DCL 1 BAS_PT(0:0) ALIGNED BASED(INFOX$),
       43     4698        %PTW(LVL=2);                            /* PT for overlays , build in SEGTAB  */
       44     4726    1   DCL MROREC_NODES# UBIN WORD BASED(INFOX$); /* Nodes nr on PO tape             */
       45     4727    1   DCL NUMNODES UBIN WORD;
       46     4728    1   DCL LSEG#PTWS UBIN WORD;           /* Max size in PT words of an overlay seg  */
       47     4729    1   DCL STARTPG UBIN WORD;
       48     4730    1   DCL LASTPG UBIN WORD;
       49     4731        %DIRW(NAME=DIRW0,STCLASS="BASED(INFOY$)"); /* Word 0 of Dir for S1000         */
       50     4759        %PTW(NAME=W_PTW,STCLASS="STATIC");      /* Page Table Word                    */
       51     4787        %DIRHDR(NAME=HDRMH,STCLASS="SYMREF");   /* Headers                            */
       52     4798        %DIRHDR(NAME=HDRMD,STCLASS="SYMREF");
       53     4809        %DIRHDR(NAME=HDRMP0,STCLASS="SYMREF");
       54     4820        %DIRHDR(NAME=BAS_HDR,STCLASS="BASED(HDR$)");
       55     4831    1   DCL HDRMP1 BIT(1) SYMREF;
       56     4832    1   DCL HDR$ PTR;
       57     4833        /**/
       58     4834    1   DCL PPDBR UBIN(19) ALIGNED STATIC SYMDEF;
       59     4835    1   DCL DIR_ENT0 BIT(36) ALIGNED STATIC SYMDEF; /* WSPTD0                         */
       60     4836    1   DCL MONPLL UBIN WORD SYMREF;
       61     4837    1   DCL BASEMPT UBIN WORD SYMREF;
       62     4838    1   DCL BASEJ UBIN WORD SYMREF;
       63     4839    1   DCL S1000_FLG BIT(1) SYMREF;
       64     4840    1   DCL XA_MODE BIT(1) SYMREF;
       65     4841    1   DCL RPM_FLG BIT(1) SYMREF;
       66     4842    1   DCL RCV_FLG BIT(4) SYMREF;
       67     4843        %PTW(NAME=FPMC,STCLASS="SYMREF",LVL=1); /* Free page constant                 */
       68     4871        /**/
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:13   
       69     4872    1   DCL I UBIN WORD;
       70     4873    1   DCL J SBIN WORD;
       71     4874        /**/
       72     4875    1           INFOX_PTR='0'B;                 /* Build Dir Pointer                  */

   4875  1 000002   200003 450100                    STZ     INFOX$,,AUTO

       73     4876    1           INFOX_PTR.S_D_FIELD=%ALS_MONIS;

   4876  1 000003   006050 236007                    LDQ     3112,DL
         1 000004   200003 752103                    STCQ    INFOX$,'03'O,AUTO

       74     4877    2           DO I=1 TO 9;                    /* Fill Dir with filler               */

   4877  1 000005   000001 235007                    LDA     1,DL
         1 000006   200012 755100                    STA     I,,AUTO

       75     4878    2             WSPTD(I)='0'B;

   4878  1 000007   200003 470500                    LDP0    INFOX$,,AUTO
         1 000010   200012 720100                    LXL0    I,,AUTO
         1 000011   000000 450110                    STZ     0,X0,PR0

       76     4879    2             WSPTD.P(I)='1'B;              /* PT present                         */

   4879  1 000012   100000 236007                    LDQ     32768,DL
         1 000013   000000 256110                    ORSQ    0,X0,PR0

       77     4880    2             WSPTD.NBLKS(I)=16;

   4880  1 000014   000000 236110                    LDQ     0,X0,PR0
         1 000015   000000 376000 2                  ANQ     0
         1 000016   000020 276007                    ORQ     16,DL
         1 000017   000000 756110                    STQ     0,X0,PR0

       78     4881    2           END;                            /* DO I=                              */

PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:14   
   4881  1 000020   200012 235100                    LDA     I,,AUTO
         1 000021   000001 035007                    ADLA    1,DL
         1 000022   200012 755100                    STA     I,,AUTO
         1 000023   000012 115007                    CMPA    10,DL
         1 000024   000007 602000 1                  TNC     s:4878

       79     4882    2           IF S1000_FLG='1'B THEN DO;      /* Move page table entry for WS0      */

   4882  1 000025   000000 234000 xsym               SZN     S1000_FLG
         1 000026   000041 605000 1                  TPL     s:4891

       80     4883    2                 INFOY_PTR='0'B;

   4883  1 000027   200004 450100                    STZ     INFOY$,,AUTO

       81     4884    2                 INFOY_PTR.S_D_FIELD=%ALS_AIS;

   4884  1 000030   006000 236007                    LDQ     3072,DL
         1 000031   200004 752103                    STCQ    INFOY$,'03'O,AUTO

       82     4885    2                 INFOY_PTR.WOFFS=512;

   4885  1 000032   001000 220003                    LDX0    512,DU
         1 000033   200004 740100                    STX0    INFOY$,,AUTO

       83     4886    2                 WSPTD(0)=DIRW0;

   4886  1 000034   200004 471500                    LDP1    INFOY$,,AUTO
         1 000035   100000 236100                    LDQ     0,,PR1
         1 000036   000000 756100                    STQ     0,,PR0

       84     4887    2                 DIR_ENT0=DIRW0;

   4887  1 000037   100000 236100                    LDQ     0,,PR1
         1 000040   000004 756000 0                  STQ     DIR_ENT0

       85     4888    2               END;                        /* THEN                               */
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:15   

       86     4889    1             ELSE;
       87     4890        /* Init Mon page table */
       88     4891    1           INFOY_PTR='0'B;

   4891  1 000041   200004 450100                    STZ     INFOY$,,AUTO

       89     4892    1           INFOY_PTR.S_D_FIELD=%ALS_MPGTBL;

   4892  1 000042   006114 236007                    LDQ     3148,DL
         1 000043   200004 752103                    STCQ    INFOY$,'03'O,AUTO

       90     4893        /* Fill with free page pattern */
       91     4894    2           DO I=0 TO 1024*11-1;

   4894  1 000044   200012 450100                    STZ     I,,AUTO
         1 000045   000055 710000 1                  TRA     s:4896+3

       92     4895    2             MONPT(I)=FPMC;

   4895  1 000046   000000 236000 xsym               LDQ     FPMC
         1 000047   200004 470500                    LDP0    INFOY$,,AUTO
         1 000050   200012 720100                    LXL0    I,,AUTO
         1 000051   000000 756110                    STQ     0,X0,PR0

       93     4896    2           END;                            /* DO I=                              */

   4896  1 000052   200012 235100                    LDA     I,,AUTO
         1 000053   000001 035007                    ADLA    1,DL
         1 000054   200012 755100                    STA     I,,AUTO
         1 000055   200012 235100                    LDA     I,,AUTO
         1 000056   026000 115007                    CMPA    11264,DL
         1 000057   000046 602000 1                  TNC     s:4895

       94     4897        /* Init entry in WSPTD for MON */
       95     4898    1           IF RPM_FLG THEN WSPTD.BLKNO(%MONWSQ)=BASEMPT/1024;

PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:16   
   4898  1 000060   000000 234000 xsym               SZN     RPM_FLG
         1 000061   000070 605000 1                  TPL     s:4899

   4898  1 000062   000000 236000 xsym               LDQ     BASEMPT
         1 000063   000012 772000                    QRL     10
         1 000064   000000 620006                    EAX0    0,QL
         1 000065   200003 470500                    LDP0    INFOX$,,AUTO
         1 000066   000001 740100                    STX0    1,,PR0
         1 000067   000122 710000 1                  TRA     s:4905

       96     4899    2             ELSE IF S1000_FLG='1'B THEN DO;

   4899  1 000070   000000 234000 xsym               SZN     S1000_FLG
         1 000071   000115 605000 1                  TPL     s:4903

       97     4900    2                   IF XA_MODE THEN WSPTD.BLKNO(%MONWSQ)=WS0PT.RPN(BASEMPT/1024);

   4900  1 000072   000000 234000 xsym               SZN     XA_MODE
         1 000073   000103 605000 1                  TPL     s:4901

   4900  1 000074   000000 236000 xsym               LDQ     BASEMPT
         1 000075   000012 772000                    QRL     10
         1 000076   000000 470400 xsym               LDP0    WS0PT$
         1 000077   000000 220106                    LDX0    0,QL,PR0
         1 000100   200003 471500                    LDP1    INFOX$,,AUTO
         1 000101   100001 740100                    STX0    1,,PR1
         1 000102   000122 710000 1                  TRA     s:4905

       98     4901    2                     ELSE WSPTD.BLKNO(%MONWSQ)=WS0PT.RPN(BASEMPT/1024)*16;
              4901                              /* Make it a mod 64 address */

   4901  1 000103   000000 236000 xsym               LDQ     BASEMPT
         1 000104   000012 772000                    QRL     10
         1 000105   000000 470400 xsym               LDP0    WS0PT$
         1 000106   000000 236106                    LDQ     0,QL,PR0
         1 000107   000016 772000                    QRL     14
         1 000110   000001 376000 2                  ANQ     1
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:17   
         1 000111   000000 620006                    EAX0    0,QL
         1 000112   200003 471500                    LDP1    INFOX$,,AUTO
         1 000113   100001 740100                    STX0    1,,PR1

       99     4902    2                 END;                      /* THEN                               */

   4902  1 000114   000122 710000 1                  TRA     s:4905

      100     4903    1               ELSE WSPTD.BLKNO(%MONWSQ)=BASEMPT/64;

   4903  1 000115   000000 236000 xsym               LDQ     BASEMPT
         1 000116   000006 772000                    QRL     6
         1 000117   000000 620006                    EAX0    0,QL
         1 000120   200003 470500                    LDP0    INFOX$,,AUTO
         1 000121   000001 740100                    STX0    1,,PR0

      101     4904        /* Init entry in WSPTD for CG */
      102     4905    1           WSPTD(%CGWSQ)='0'B;

   4905  1 000122   200003 470500                    LDP0    INFOX$,,AUTO
         1 000123   000014 450100                    STZ     12,,PR0

      103     4906    1           WSPTD.P(%CGWSQ)='1'B;

   4906  1 000124   100000 236007                    LDQ     32768,DL
         1 000125   000014 256100                    ORSQ    12,,PR0

      104     4907    1           WSPTD.NBLKS(%CGWSQ)=16*10;

   4907  1 000126   000240 236007                    LDQ     160,DL
         1 000127   000014 752103                    STCQ    12,'03'O,PR0

      105     4908    1           IF RPM_FLG THEN WSPTD.BLKNO(%CGWSQ)=(BASEMPT+1024)/1024;

   4908  1 000130   000000 234000 xsym               SZN     RPM_FLG
         1 000131   000140 605000 1                  TPL     s:4909

PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:18   
   4908  1 000132   000000 236000 xsym               LDQ     BASEMPT
         1 000133   002000 036007                    ADLQ    1024,DL
         1 000134   000012 772000                    QRL     10
         1 000135   000000 620006                    EAX0    0,QL
         1 000136   000014 740100                    STX0    12,,PR0
         1 000137   000172 710000 1                  TRA     s:4915

      106     4909    2             ELSE IF S1000_FLG='1'B THEN DO;

   4909  1 000140   000000 234000 xsym               SZN     S1000_FLG
         1 000141   000165 605000 1                  TPL     s:4913

      107     4910    2                   IF XA_MODE THEN WSPTD.BLKNO(%CGWSQ)=WS0PT.RPN((BASEMPT+1024)/1024);

   4910  1 000142   000000 234000 xsym               SZN     XA_MODE
         1 000143   000153 605000 1                  TPL     s:4911

   4910  1 000144   000000 236000 xsym               LDQ     BASEMPT
         1 000145   002000 036007                    ADLQ    1024,DL
         1 000146   000012 772000                    QRL     10
         1 000147   000000 471400 xsym               LDP1    WS0PT$
         1 000150   100000 220106                    LDX0    0,QL,PR1
         1 000151   000014 740100                    STX0    12,,PR0
         1 000152   000172 710000 1                  TRA     s:4915

      108     4911    2                     ELSE WSPTD.BLKNO(%CGWSQ)=WS0PT.RPN((BASEMPT+1024)/1024)*16;
              4911                              /* Make it a mod 64 address */

   4911  1 000153   000000 236000 xsym               LDQ     BASEMPT
         1 000154   002000 036007                    ADLQ    1024,DL
         1 000155   000012 772000                    QRL     10
         1 000156   000000 471400 xsym               LDP1    WS0PT$
         1 000157   100000 236106                    LDQ     0,QL,PR1
         1 000160   000016 772000                    QRL     14
         1 000161   000001 376000 2                  ANQ     1
         1 000162   000000 620006                    EAX0    0,QL
         1 000163   000014 740100                    STX0    12,,PR0
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:19   

      109     4912    2                 END;                      /* THEN                               */

   4912  1 000164   000172 710000 1                  TRA     s:4915

      110     4913    1               ELSE WSPTD.BLKNO(%CGWSQ)=(BASEMPT+1024)/64;

   4913  1 000165   000000 236000 xsym               LDQ     BASEMPT
         1 000166   002000 036007                    ADLQ    1024,DL
         1 000167   000006 772000                    QRL     6
         1 000170   000000 620006                    EAX0    0,QL
         1 000171   000014 740100                    STX0    12,,PR0

      111     4914        /* Init PT words */
      112     4915    2           DO I=%PGTBLLO TO %PGTBLHI;

   4915  1 000172   200012 450100                    STZ     I,,AUTO

      113     4916    2             MONPT.SCTRL(I)=%SCUSER;

   4916  1 000173   200004 470500                    LDP0    INFOY$,,AUTO
         1 000174   200012 720100                    LXL0    I,,AUTO
         1 000175   000000 236110                    LDQ     0,X0,PR0
         1 000176   000002 376000 2                  ANQ     2
         1 000177   000400 276007                    ORQ     256,DL
         1 000200   000000 756110                    STQ     0,X0,PR0

      114     4917    2             MONPT.CTRL(I)=%PGINMEM|%PGWRITE|%PGIOM;

   4917  1 000201   000000 236110                    LDQ     0,X0,PR0
         1 000202   000003 376000 2                  ANQ     3
         1 000203   000064 276007                    ORQ     52,DL
         1 000204   000000 756110                    STQ     0,X0,PR0

      115     4918    2             IF S1000_FLG='1'B THEN MONPT.RPN(I)=WS0PT.RPN(BASEMPT/1024+I);

   4918  1 000205   000000 234000 xsym               SZN     S1000_FLG
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:20   
         1 000206   000216 605000 1                  TPL     s:4919

   4918  1 000207   000000 236000 xsym               LDQ     BASEMPT
         1 000210   000012 772000                    QRL     10
         1 000211   200012 036100                    ADLQ    I,,AUTO
         1 000212   000000 471400 xsym               LDP1    WS0PT$
         1 000213   100000 221106                    LDX1    0,QL,PR1
         1 000214   000000 741110                    STX1    0,X0,PR0
         1 000215   000223 710000 1                  TRA     s:4920

      116     4919    2               ELSE MONPT.RPN(I)=BASEMPT/1024+I;

   4919  1 000216   000000 236000 xsym               LDQ     BASEMPT
         1 000217   000012 772000                    QRL     10
         1 000220   200012 036100                    ADLQ    I,,AUTO
         1 000221   000000 621006                    EAX1    0,QL
         1 000222   000000 741110                    STX1    0,X0,PR0

      117     4920    2           END;                            /* DO I=                              */

   4920  1 000223   200012 235100                    LDA     I,,AUTO
         1 000224   000001 035007                    ADLA    1,DL
         1 000225   200012 755100                    STA     I,,AUTO
         1 000226   000013 115007                    CMPA    11,DL
         1 000227   000173 602000 1                  TNC     s:4916

      118     4921    2           DO I=%JITPG TO %JITEND;         /* JIT pages                          */

   4921  1 000230   000013 236007                    LDQ     11,DL
         1 000231   200012 756100                    STQ     I,,AUTO

      119     4922    2             J=I-%JITPG;

   4922  1 000232   200012 235100                    LDA     I,,AUTO
         1 000233   000013 135007                    SBLA    11,DL
         1 000234   200013 755100                    STA     J,,AUTO

PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:21   
      120     4923    2             MONPT.SCTRL(I)=%SCUSER;

   4923  1 000235   200004 470500                    LDP0    INFOY$,,AUTO
         1 000236   200012 720100                    LXL0    I,,AUTO
         1 000237   000000 236110                    LDQ     0,X0,PR0
         1 000240   000002 376000 2                  ANQ     2
         1 000241   000400 276007                    ORQ     256,DL
         1 000242   000000 756110                    STQ     0,X0,PR0

      121     4924    2             MONPT.CTRL(I)=%PGINMEM|%PGWRITE|%PGIOM;

   4924  1 000243   000000 236110                    LDQ     0,X0,PR0
         1 000244   000003 376000 2                  ANQ     3
         1 000245   000064 276007                    ORQ     52,DL
         1 000246   000000 756110                    STQ     0,X0,PR0

      122     4925    2             IF S1000_FLG='1'B THEN MONPT.RPN(I)=WS0PT.RPN(BASEJ/1024+J);

   4925  1 000247   000000 234000 xsym               SZN     S1000_FLG
         1 000250   000260 605000 1                  TPL     s:4926

   4925  1 000251   000000 236000 xsym               LDQ     BASEJ
         1 000252   000012 772000                    QRL     10
         1 000253   200013 036100                    ADLQ    J,,AUTO
         1 000254   000000 471400 xsym               LDP1    WS0PT$
         1 000255   100000 221106                    LDX1    0,QL,PR1
         1 000256   000000 741110                    STX1    0,X0,PR0
         1 000257   000265 710000 1                  TRA     s:4927

      123     4926    2               ELSE MONPT.RPN(I)=BASEJ/1024+J;

   4926  1 000260   000000 236000 xsym               LDQ     BASEJ
         1 000261   000012 772000                    QRL     10
         1 000262   200013 036100                    ADLQ    J,,AUTO
         1 000263   000000 621006                    EAX1    0,QL
         1 000264   000000 741110                    STX1    0,X0,PR0

PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:22   
      124     4927    2           END;                            /* DO I=                              */

   4927  1 000265   200012 236100                    LDQ     I,,AUTO
         1 000266   000001 036007                    ADLQ    1,DL
         1 000267   200012 756100                    STQ     I,,AUTO
         1 000270   000015 116007                    CMPQ    13,DL
         1 000271   000232 602000 1                  TNC     s:4922

      125     4928        /* MON low real pages */
      126     4929    2           DO I=0 TO 7;

   4929  1 000272   200012 450100                    STZ     I,,AUTO

      127     4930    2             MONPT.SCTRL(%REALLO+I)=%SCUSER;

   4930  1 000273   200004 470500                    LDP0    INFOY$,,AUTO
         1 000274   200012 720100                    LXL0    I,,AUTO
         1 000275   000500 236110                    LDQ     320,X0,PR0
         1 000276   000002 376000 2                  ANQ     2
         1 000277   000400 276007                    ORQ     256,DL
         1 000300   000500 756110                    STQ     320,X0,PR0

      128     4931    2             MONPT.CTRL(%REALLO+I)=%PGINMEM|%PGWRITE|%PGIOM;

   4931  1 000301   000500 236110                    LDQ     320,X0,PR0
         1 000302   000003 376000 2                  ANQ     3
         1 000303   000064 276007                    ORQ     52,DL
         1 000304   000500 756110                    STQ     320,X0,PR0

      129     4932    2             IF S1000_FLG='1'B THEN MONPT.RPN(%REALLO+I)=WS0PT.RPN(I);

   4932  1 000305   000000 234000 xsym               SZN     S1000_FLG
         1 000306   000313 605000 1                  TPL     s:4933

   4932  1 000307   000000 471400 xsym               LDP1    WS0PT$
         1 000310   100000 221110                    LDX1    0,X0,PR1
         1 000311   000500 741110                    STX1    320,X0,PR0
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:23   
         1 000312   000314 710000 1                  TRA     s:4934

      130     4933    2               ELSE MONPT.RPN(%REALLO+I)=I;

   4933  1 000313   000500 740110                    STX0    320,X0,PR0

      131     4934    2           END;                            /* DO I=                              */

   4934  1 000314   200012 235100                    LDA     I,,AUTO
         1 000315   000001 035007                    ADLA    1,DL
         1 000316   200012 755100                    STA     I,,AUTO
         1 000317   000010 115007                    CMPA    8,DL
         1 000320   000273 602000 1                  TNC     s:4930

      132     4935        /* Init Pt for MON HJIT */
      133     4936    1           J=HDRMH.SIZE;

   4936  1 000321   000002 236000 xsym               LDQ     HDRMH+2
         1 000322   200013 756100                    STQ     J,,AUTO

      134     4937    1           I=0;

   4937  1 000323   200012 450100                    STZ     I,,AUTO

      135     4938    1   INITMHJ:
      136     4939    1           MONPT.SCTRL(%HJITPG+I)=%SCUSER;

   4939  1 000324   200004 470500       INITMHJ      LDP0    INFOY$,,AUTO
         1 000325   200012 720100                    LXL0    I,,AUTO
         1 000326   000015 236110                    LDQ     13,X0,PR0
         1 000327   000002 376000 2                  ANQ     2
         1 000330   000400 276007                    ORQ     256,DL
         1 000331   000015 756110                    STQ     13,X0,PR0

      137     4940    1           MONPT.CTRL(%HJITPG+I)=%PGINMEM|%PGWRITE|%PGHKEEP|%PGIOM;

   4940  1 000332   000015 236110                    LDQ     13,X0,PR0
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:24   
         1 000333   000003 376000 2                  ANQ     3
         1 000334   000074 276007                    ORQ     60,DL
         1 000335   000015 756110                    STQ     13,X0,PR0

      138     4941    1           IF S1000_FLG='1'B THEN MONPT.RPN(%HJITPG+I)=WS0PT.RPN(HDRMH.BASE/1024+I);

   4941  1 000336   000000 234000 xsym               SZN     S1000_FLG
         1 000337   000347 605000 1                  TPL     s:4942

   4941  1 000340   000000 236000 xsym               LDQ     HDRMH
         1 000341   002000 506007                    DIV     1024,DL
         1 000342   200012 036100                    ADLQ    I,,AUTO
         1 000343   000000 471400 xsym               LDP1    WS0PT$
         1 000344   100000 221106                    LDX1    0,QL,PR1
         1 000345   000015 741110                    STX1    13,X0,PR0
         1 000346   000354 710000 1                  TRA     s:4943

      139     4942    1             ELSE MONPT.RPN(%HJITPG+I)=HDRMH.BASE/1024+I;

   4942  1 000347   000000 236000 xsym               LDQ     HDRMH
         1 000350   002000 506007                    DIV     1024,DL
         1 000351   200012 036100                    ADLQ    I,,AUTO
         1 000352   000000 621006                    EAX1    0,QL
         1 000353   000015 741110                    STX1    13,X0,PR0

      140     4943    2           IF (J-1024)>0 THEN DO;

   4943  1 000354   200013 235100                    LDA     J,,AUTO
         1 000355   002000 115007                    CMPA    1024,DL
         1 000356   000365 604400 1                  TMOZ    s:4950

      141     4944    2                 J=J-1024;

   4944  1 000357   002000 336007                    LCQ     1024,DL
         1 000360   200013 056100                    ASQ     J,,AUTO

      142     4945    2                 I=I+1;
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:25   

   4945  1 000361   200012 235100                    LDA     I,,AUTO
         1 000362   000001 035007                    ADLA    1,DL
         1 000363   200012 755100                    STA     I,,AUTO

      143     4946    2                 GOTO INITMHJ;

   4946  1 000364   000324 710000 1                  TRA     INITMHJ

      144     4947    2               END;                        /* THEN                               */
      145     4948    1             ELSE;
      146     4949        /* Init page table for overlay */
      147     4950    1           MONPT.SCTRL(%SEGTBL)=%SCUSER;

   4950  1 000365   000077 236100                    LDQ     63,,PR0
         1 000366   000002 376000 2                  ANQ     2
         1 000367   000400 276007                    ORQ     256,DL
         1 000370   000077 756100                    STQ     63,,PR0

      148     4951    1           MONPT.CTRL(%SEGTBL)=%PGINMEM|%PGWRITE|%PGIOM;

   4951  1 000371   000064 236007                    LDQ     52,DL
         1 000372   000077 752101                    STCQ    63,'01'O,PR0

      149     4952    1          IF S1000_FLG='1'B THEN MONPT.RPN(%SEGTBL)=WS0PT.RPN(MSEGTBL_PTR.WOFFS/1024);

   4952  1 000373   000000 234000 xsym               SZN     S1000_FLG
         1 000374   000404 605000 1                  TPL     s:4953

   4952  1 000375   000001 236000 0                  LDQ     MSEGTBL$
         1 000376   000022 772000                    QRL     18
         1 000377   000012 772000                    QRL     10
         1 000400   000000 471400 xsym               LDP1    WS0PT$
         1 000401   100000 221106                    LDX1    0,QL,PR1
         1 000402   000077 741100                    STX1    63,,PR0
         1 000403   000411 710000 1                  TRA     s:4955

PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:26   
      150     4953    1             ELSE MONPT.RPN(%SEGTBL)=MSEGTBL_PTR.WOFFS/1024;

   4953  1 000404   000001 236000 0                  LDQ     MSEGTBL$
         1 000405   000022 772000                    QRL     18
         1 000406   000012 772000                    QRL     10
         1 000407   000000 621006                    EAX1    0,QL
         1 000410   000077 741100                    STX1    63,,PR0

      151     4954        /* Init page table for ISR */
      152     4955    1           J=HDRMD.SIZE;

   4955  1 000411   000002 236000 xsym               LDQ     HDRMD+2
         1 000412   200013 756100                    STQ     J,,AUTO

      153     4956    1           I=0;

   4956  1 000413   200012 450100                    STZ     I,,AUTO

      154     4957    1   INITM1:
      155     4958    1           MONPT.SCTRL(%ISEGLO+I)=%SCUSER;

   4958  1 000414   200004 470500       INITM1       LDP0    INFOY$,,AUTO
         1 000415   200012 720100                    LXL0    I,,AUTO
         1 000416   000100 236110                    LDQ     64,X0,PR0
         1 000417   000002 376000 2                  ANQ     2
         1 000420   000400 276007                    ORQ     256,DL
         1 000421   000100 756110                    STQ     64,X0,PR0

      156     4959    1           MONPT.CTRL(%ISEGLO+I)=%PGINMEM|%PGWRITE|%PGIOM;

   4959  1 000422   000100 236110                    LDQ     64,X0,PR0
         1 000423   000003 376000 2                  ANQ     3
         1 000424   000064 276007                    ORQ     52,DL
         1 000425   000100 756110                    STQ     64,X0,PR0

      157     4960    1           IF S1000_FLG='1'B THEN MONPT.RPN(%ISEGLO+I)=WS0PT.RPN(HDRMD.BASE/1024+I);

PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:27   
   4960  1 000426   000000 234000 xsym               SZN     S1000_FLG
         1 000427   000437 605000 1                  TPL     s:4961

   4960  1 000430   000000 236000 xsym               LDQ     HDRMD
         1 000431   002000 506007                    DIV     1024,DL
         1 000432   200012 036100                    ADLQ    I,,AUTO
         1 000433   000000 471400 xsym               LDP1    WS0PT$
         1 000434   100000 221106                    LDX1    0,QL,PR1
         1 000435   000100 741110                    STX1    64,X0,PR0
         1 000436   000444 710000 1                  TRA     s:4962

      158     4961    1             ELSE MONPT.RPN(%ISEGLO+I)=HDRMD.BASE/1024+I;

   4961  1 000437   000000 236000 xsym               LDQ     HDRMD
         1 000440   002000 506007                    DIV     1024,DL
         1 000441   200012 036100                    ADLQ    I,,AUTO
         1 000442   000000 621006                    EAX1    0,QL
         1 000443   000100 741110                    STX1    64,X0,PR0

      159     4962    2           IF (J-1024)>0 THEN DO;

   4962  1 000444   200013 235100                    LDA     J,,AUTO
         1 000445   002000 115007                    CMPA    1024,DL
         1 000446   000455 604400 1                  TMOZ    s:4968

      160     4963    2                 J=J-1024;

   4963  1 000447   002000 336007                    LCQ     1024,DL
         1 000450   200013 056100                    ASQ     J,,AUTO

      161     4964    2                 I=I+1;

   4964  1 000451   200012 235100                    LDA     I,,AUTO
         1 000452   000001 035007                    ADLA    1,DL
         1 000453   200012 755100                    STA     I,,AUTO

      162     4965    2                 GOTO INITM1;
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:28   

   4965  1 000454   000414 710000 1                  TRA     INITM1

      163     4966    2               END;                        /* THEN                               */
      164     4967    1             ELSE;
      165     4968    1           I=I+1;

   4968  1 000455   200012 236100                    LDQ     I,,AUTO
         1 000456   000001 036007                    ADLQ    1,DL
         1 000457   200012 756100                    STQ     I,,AUTO

      166     4969    1           MONPLL=%ISEGLO+I;          /* Save MON PROC lowest page for recovery  */

   4969  1 000460   000100 036007                    ADLQ    64,DL
         1 000461   000000 756000 xsym               STQ     MONPLL

      167     4970    1           J=HDRMP0.SIZE;

   4970  1 000462   000002 235000 xsym               LDA     HDRMP0+2
         1 000463   200013 755100                    STA     J,,AUTO

      168     4971    1   INITM2:
      169     4972    1           MONPT.SCTRL(%ISEGLO+I)=%SCUSER;

   4972  1 000464   200004 470500       INITM2       LDP0    INFOY$,,AUTO
         1 000465   200012 720100                    LXL0    I,,AUTO
         1 000466   000100 236110                    LDQ     64,X0,PR0
         1 000467   000002 376000 2                  ANQ     2
         1 000470   000400 276007                    ORQ     256,DL
         1 000471   000100 756110                    STQ     64,X0,PR0

      170     4973    1           MONPT.CTRL(%ISEGLO+I)=%PGINMEM|%PGHKEEP|%PGIOM;

   4973  1 000472   000100 236110                    LDQ     64,X0,PR0
         1 000473   000003 376000 2                  ANQ     3
         1 000474   000054 276007                    ORQ     44,DL
         1 000475   000100 756110                    STQ     64,X0,PR0
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:29   

      171     4974    1           IF S1000_FLG='1'B THEN MONPT.RPN(%ISEGLO+I)=WS0PT.RPN(HDRMD.BASE/1024+I);

   4974  1 000476   000000 234000 xsym               SZN     S1000_FLG
         1 000477   000507 605000 1                  TPL     s:4975

   4974  1 000500   000000 236000 xsym               LDQ     HDRMD
         1 000501   002000 506007                    DIV     1024,DL
         1 000502   200012 036100                    ADLQ    I,,AUTO
         1 000503   000000 471400 xsym               LDP1    WS0PT$
         1 000504   100000 221106                    LDX1    0,QL,PR1
         1 000505   000100 741110                    STX1    64,X0,PR0
         1 000506   000514 710000 1                  TRA     s:4976

      172     4975    1             ELSE MONPT.RPN(%ISEGLO+I)=HDRMD.BASE/1024+I;

   4975  1 000507   000000 236000 xsym               LDQ     HDRMD
         1 000510   002000 506007                    DIV     1024,DL
         1 000511   200012 036100                    ADLQ    I,,AUTO
         1 000512   000000 621006                    EAX1    0,QL
         1 000513   000100 741110                    STX1    64,X0,PR0

      173     4976    2           IF (J-1024)>0 THEN DO;

   4976  1 000514   200013 235100                    LDA     J,,AUTO
         1 000515   002000 115007                    CMPA    1024,DL
         1 000516   000525 604400 1                  TMOZ    s:4983

      174     4977    2                 J=J-1024;

   4977  1 000517   002000 336007                    LCQ     1024,DL
         1 000520   200013 056100                    ASQ     J,,AUTO

      175     4978    2                 I=I+1;

   4978  1 000521   200012 235100                    LDA     I,,AUTO
         1 000522   000001 035007                    ADLA    1,DL
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:30   
         1 000523   200012 755100                    STA     I,,AUTO

      176     4979    2                 GOTO INITM2;

   4979  1 000524   000464 710000 1                  TRA     INITM2

      177     4980    2               END;                        /* THEN                               */
      178     4981    1             ELSE;
      179     4982        /* Build the overlay info */
      180     4983    1           MSEGTAB.FSTPG_BYTEAD=(%ISEGLO+I+1)*4;

   4983  1 000525   000001 471400 0                  LDP1    MSEGTBL$
         1 000526   200012 236100                    LDQ     I,,AUTO
         1 000527   000002 736000                    QLS     2
         1 000530   000404 036007                    ADLQ    260,DL
         1 000531   100000 756100                    STQ     0,,PR1

      181     4984    1           INFOX_PTR='0'B;

   4984  1 000532   200003 450100                    STZ     INFOX$,,AUTO

      182     4985    1           INFOX_PTR.S_D_FIELD=%ALS_DEFDIR;

   4985  1 000533   006031 236007                    LDQ     3097,DL
         1 000534   200003 752103                    STCQ    INFOX$,'03'O,AUTO

      183     4986    1           NUMNODES=MROREC_NODES#;         /* Nr of nodes as on the PO tape      */

   4986  1 000535   200003 473500                    LDP3    INFOX$,,AUTO
         1 000536   300000 235100                    LDA     0,,PR3
         1 000537   200005 755100                    STA     NUMNODES,,AUTO

      184     4987    1           HDR$=ADDR(HDRMP1);

   4987  1 000540   000004 236000 2                  LDQ     4
         1 000541   200011 756100                    STQ     HDR$,,AUTO

PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:31   
      185     4988    1           LSEG#PTWS=HDR$->BAS_HDR.SIZE;

   4988  1 000542   200011 474500                    LDP4    HDR$,,AUTO
         1 000543   400002 235100                    LDA     2,,PR4
         1 000544   200006 755100                    STA     LSEG#PTWS,,AUTO

      186     4989    2           DO I=1 TO NUMNODES-2;           /* Nodes#-root-1                      */

   4989  1 000545   000001 235007                    LDA     1,DL
         1 000546   200012 755100                    STA     I,,AUTO
         1 000547   000563 710000 1                  TRA     s:4991+3

      187     4990    2             LSEG#PTWS=MAXIMUM(LSEG#PTWS,PINCRW(HDR$,I*4)->BAS_HDR.SIZE);

   4990  1 000550   200012 235100                    LDA     I,,AUTO
         1 000551   000002 735000                    ALS     2
         1 000552   200011 470500                    LDP0    HDR$,,AUTO
         1 000553   000002 236105                    LDQ     2,AL,PR0
         1 000554   200006 116100                    CMPQ    LSEG#PTWS,,AUTO
         1 000555   000557 603000 1                  TRC     s:4990+7
         1 000556   200006 236100                    LDQ     LSEG#PTWS,,AUTO
         1 000557   200006 756100                    STQ     LSEG#PTWS,,AUTO

      188     4991    2           END;                            /* DO I=                              */

   4991  1 000560   200012 235100                    LDA     I,,AUTO
         1 000561   000001 035007                    ADLA    1,DL
         1 000562   200012 755100                    STA     I,,AUTO
         1 000563   200005 236100                    LDQ     NUMNODES,,AUTO
         1 000564   000002 136007                    SBLQ    2,DL
         1 000565   000570 604000 1                  TMI     s:4992
         1 000566   200012 116100                    CMPQ    I,,AUTO
         1 000567   000550 603000 1                  TRC     s:4990

      189     4992    1           LSEG#PTWS=(LSEG#PTWS+1023)/1024; /* Make it a nr of pages             */

   4992  1 000570   200006 236100                    LDQ     LSEG#PTWS,,AUTO
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:32   
         1 000571   001777 036007                    ADLQ    1023,DL
         1 000572   000012 772000                    QRL     10
         1 000573   200006 756100                    STQ     LSEG#PTWS,,AUTO

      190     4993    2           DO I=0 TO NUMNODES-2;

   4993  1 000574   200012 450100                    STZ     I,,AUTO
         1 000575   000607 710000 1                  TRA     s:4995+3

      191     4994    2             MSEGTAB.NODEINFO.SIZE(I)=LSEG#PTWS*4; /* Size in bytes              */

   4994  1 000576   200006 235100                    LDA     LSEG#PTWS,,AUTO
         1 000577   000002 735000                    ALS     2
         1 000600   000000 620005                    EAX0    0,AL
         1 000601   000001 470400 0                  LDP0    MSEGTBL$
         1 000602   200012 721100                    LXL1    I,,AUTO
         1 000603   000001 440111                    SXL0    1,X1,PR0

      192     4995    2           END;                            /* DO I=                              */

   4995  1 000604   200012 236100                    LDQ     I,,AUTO
         1 000605   000001 036007                    ADLQ    1,DL
         1 000606   200012 756100                    STQ     I,,AUTO
         1 000607   200005 236100                    LDQ     NUMNODES,,AUTO
         1 000610   000002 136007                    SBLQ    2,DL
         1 000611   000614 604000 1                  TMI     s:4996
         1 000612   200012 116100                    CMPQ    I,,AUTO
         1 000613   000576 603000 1                  TRC     s:4994

      193     4996    2           DO I=1 TO NUMNODES-2;

   4996  1 000614   000001 235007                    LDA     1,DL
         1 000615   200012 755100                    STA     I,,AUTO
         1 000616   000634 710000 1                  TRA     s:4998+3

      194     4997    2             MSEGTAB.NODEINFO.RELADDR(I)=MSEGTAB.NODEINFO.RELADDR(I-1)+LSEG#PTWS*4;

PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:33   
   4997  1 000617   000001 470400 0                  LDP0    MSEGTBL$
         1 000620   200012 720100                    LXL0    I,,AUTO
         1 000621   000000 236110                    LDQ     0,X0,PR0
         1 000622   000022 772000                    QRL     18
         1 000623   200014 756100                    STQ     J+1,,AUTO
         1 000624   200006 236100                    LDQ     LSEG#PTWS,,AUTO
         1 000625   000002 736000                    QLS     2
         1 000626   200014 036100                    ADLQ    J+1,,AUTO
         1 000627   000000 621006                    EAX1    0,QL
         1 000630   000001 741110                    STX1    1,X0,PR0

      195     4998    2           END;                            /* DO I=                              */

   4998  1 000631   200012 235100                    LDA     I,,AUTO
         1 000632   000001 035007                    ADLA    1,DL
         1 000633   200012 755100                    STA     I,,AUTO
         1 000634   200005 236100                    LDQ     NUMNODES,,AUTO
         1 000635   000002 136007                    SBLQ    2,DL
         1 000636   000641 604000 1                  TMI     s:4999
         1 000637   200012 116100                    CMPQ    I,,AUTO
         1 000640   000617 603000 1                  TRC     s:4997

      196     4999    2           DO I=0 TO NUMNODES-2;

   4999  1 000641   200012 450100                    STZ     I,,AUTO
         1 000642   000726 710000 1                  TRA     s:5009+3

      197     5000    2             STARTPG=PINCRW(HDR$,I*4)->BAS_HDR.BASE/1024;

   5000  1 000643   200012 235100                    LDA     I,,AUTO
         1 000644   000002 735000                    ALS     2
         1 000645   200011 470500                    LDP0    HDR$,,AUTO
         1 000646   000000 236105                    LDQ     0,AL,PR0
         1 000647   002000 506007                    DIV     1024,DL
         1 000650   200007 756100                    STQ     STARTPG,,AUTO

      198     5001    2             LASTPG=STARTPG+PINCRW(HDR$,I*4)->BAS_HDR.SIZE/1024-1;
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:34   

   5001  1 000651   200012 235100                    LDA     I,,AUTO
         1 000652   000002 735000                    ALS     2
         1 000653   000002 236105                    LDQ     2,AL,PR0
         1 000654   000012 772000                    QRL     10
         1 000655   200007 036100                    ADLQ    STARTPG,,AUTO
         1 000656   000001 136007                    SBLQ    1,DL
         1 000657   200010 756100                    STQ     LASTPG,,AUTO

      199     5002    2             INFOX$=PINCRW(MSEGTBL$,15+I*LSEG#PTWS);

   5002  1 000660   200012 236100                    LDQ     I,,AUTO
         1 000661   200006 402100                    MPY     LSEG#PTWS,,AUTO
         1 000662   000022 736000                    QLS     18
         1 000663   000017 036003                    ADLQ    15,DU
         1 000664   000001 036000 0                  ADLQ    MSEGTBL$
         1 000665   200003 756100                    STQ     INFOX$,,AUTO

      200     5003    3             DO J=0 TO LASTPG-STARTPG;

   5003  1 000666   200013 450100                    STZ     J,,AUTO
         1 000667   000717 710000 1                  TRA     s:5008+1

      201     5004    3               BAS_PT.SCTRL(J)=%SCUSER;

   5004  1 000670   200003 470500                    LDP0    INFOX$,,AUTO
         1 000671   200013 720100                    LXL0    J,,AUTO
         1 000672   000000 236110                    LDQ     0,X0,PR0
         1 000673   000002 376000 2                  ANQ     2
         1 000674   000400 276007                    ORQ     256,DL
         1 000675   000000 756110                    STQ     0,X0,PR0

      202     5005    3               BAS_PT.CTRL(J)=%PGINMEM|%PGHKEEP|%PGIOM;

   5005  1 000676   000000 236110                    LDQ     0,X0,PR0
         1 000677   000003 376000 2                  ANQ     3
         1 000700   000054 276007                    ORQ     44,DL
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:35   
         1 000701   000000 756110                    STQ     0,X0,PR0

      203     5006    3               IF S1000_FLG='1'B THEN BAS_PT.RPN(J)=WS0PT.RPN(STARTPG+J);

   5006  1 000702   000000 234000 xsym               SZN     S1000_FLG
         1 000703   000712 605000 1                  TPL     s:5007

   5006  1 000704   200007 236100                    LDQ     STARTPG,,AUTO
         1 000705   200013 036100                    ADLQ    J,,AUTO
         1 000706   000000 471400 xsym               LDP1    WS0PT$
         1 000707   100000 221106                    LDX1    0,QL,PR1
         1 000710   000000 741110                    STX1    0,X0,PR0
         1 000711   000716 710000 1                  TRA     s:5008

      204     5007    3                 ELSE BAS_PT.RPN(J)=STARTPG+J;

   5007  1 000712   200007 236100                    LDQ     STARTPG,,AUTO
         1 000713   200013 036100                    ADLQ    J,,AUTO
         1 000714   000000 621006                    EAX1    0,QL
         1 000715   000000 741110                    STX1    0,X0,PR0

      205     5008    3             END;                          /* DO J=                              */

   5008  1 000716   200013 054100                    AOS     J,,AUTO
         1 000717   200010 236100                    LDQ     LASTPG,,AUTO
         1 000720   200007 136100                    SBLQ    STARTPG,,AUTO
         1 000721   200013 116100                    CMPQ    J,,AUTO
         1 000722   000670 605000 1                  TPL     s:5004

      206     5009    2           END;                            /* DO I=                              */

   5009  1 000723   200012 235100                    LDA     I,,AUTO
         1 000724   000001 035007                    ADLA    1,DL
         1 000725   200012 755100                    STA     I,,AUTO
         1 000726   200005 236100                    LDQ     NUMNODES,,AUTO
         1 000727   000002 136007                    SBLQ    2,DL
         1 000730   000733 604000 1                  TMI     s:5010
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:36   
         1 000731   200012 116100                    CMPQ    I,,AUTO
         1 000732   000643 603000 1                  TRC     s:5000

      207     5010    1           MSEGTAB.NODEINFO(NUMNODES-1)='0'B;

   5010  1 000733   000001 470400 0                  LDP0    MSEGTBL$
         1 000734   200005 720100                    LXL0    NUMNODES,,AUTO
         1 000735   000000 450110                    STZ     0,X0,PR0

      208     5011        /**/
      209     5012    1   INITM4:
      210     5013        /* TIGR data if DB or Recovery */
      211     5014    1           IF(RCV_FLG='0'B OR ADIR.TIGRDATA.SIZE=0) THEN;

   5014  1 000736   000000 236000 xsym  INITM4       LDQ     RCV_FLG
         1 000737   740000 316003                    CANQ    -16384,DU
         1 000740   001006 600000 1                  TZE     s:5031
         1 000741   000116 235000 xsym               LDA     ADIR+78
         1 000742   001006 600000 1                  TZE     s:5031

      212     5015    2             ELSE DO;

      213     5016    2                 J=ADIR.TIGRDATA.SIZE;

   5016  1 000743   200013 755100                    STA     J,,AUTO

      214     5017    2                 I=0;

   5017  1 000744   200012 450100                    STZ     I,,AUTO

      215     5018    2   INITM5:
      216     5019    2                 MONPT.SCTRL(%TIGRLO+I)=%SCUSER;

   5019  1 000745   200004 470500       INITM5       LDP0    INFOY$,,AUTO
         1 000746   200012 720100                    LXL0    I,,AUTO
         1 000747   000610 236110                    LDQ     392,X0,PR0
         1 000750   000002 376000 2                  ANQ     2
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:37   
         1 000751   000400 276007                    ORQ     256,DL
         1 000752   000610 756110                    STQ     392,X0,PR0

      217     5020    2                 MONPT.CTRL(%TIGRLO+I)=%PGINMEM|%PGWRITE|%PGIOM;

   5020  1 000753   000610 236110                    LDQ     392,X0,PR0
         1 000754   000003 376000 2                  ANQ     3
         1 000755   000064 276007                    ORQ     52,DL
         1 000756   000610 756110                    STQ     392,X0,PR0

      218     5021    2                 IF S1000_FLG='1'B THEN MONPT.RPN(%TIGRLO+I)=WS0PT.RPN(ADIR.TIGRDATA.
              5021                          BASE/1024+I);

   5021  1 000757   000000 234000 xsym               SZN     S1000_FLG
         1 000760   000770 605000 1                  TPL     s:5022

   5021  1 000761   000114 236000 xsym               LDQ     ADIR+76
         1 000762   000012 772000                    QRL     10
         1 000763   200012 036100                    ADLQ    I,,AUTO
         1 000764   000000 471400 xsym               LDP1    WS0PT$
         1 000765   100000 221106                    LDX1    0,QL,PR1
         1 000766   000610 741110                    STX1    392,X0,PR0
         1 000767   000775 710000 1                  TRA     s:5023

      219     5022    2                   ELSE MONPT.RPN(%TIGRLO+I)=ADIR.TIGRDATA.BASE/1024+I;

   5022  1 000770   000114 236000 xsym               LDQ     ADIR+76
         1 000771   000012 772000                    QRL     10
         1 000772   200012 036100                    ADLQ    I,,AUTO
         1 000773   000000 621006                    EAX1    0,QL
         1 000774   000610 741110                    STX1    392,X0,PR0

      220     5023    3                 IF (J-1024)>0 THEN DO;

   5023  1 000775   200013 235100                    LDA     J,,AUTO
         1 000776   002000 115007                    CMPA    1024,DL
         1 000777   001006 604400 1                  TMOZ    s:5031
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:38   

      221     5024    3                       J=J-1024;

   5024  1 001000   002000 336007                    LCQ     1024,DL
         1 001001   200013 056100                    ASQ     J,,AUTO

      222     5025    3                       I=I+1;

   5025  1 001002   200012 235100                    LDA     I,,AUTO
         1 001003   000001 035007                    ADLA    1,DL
         1 001004   200012 755100                    STA     I,,AUTO

      223     5026    3                       GOTO INITM5;

   5026  1 001005   000745 710000 1                  TRA     INITM5

      224     5027    3                     END;                  /* THEN                               */
      225     5028    2                   ELSE;
      226     5029    2               END;                        /* ELSE                               */
      227     5030        /* Put privileges in JIT */
      228     5031    1           INFOX_PTR='0'B;

   5031  1 001006   200003 450100                    STZ     INFOX$,,AUTO

      229     5032    1           INFOX_PTR.S_D_FIELD=%ALS_JIT;

   5032  1 001007   006052 236007                    LDQ     3114,DL
         1 001010   200003 752103                    STCQ    INFOX$,'03'O,AUTO

      230     5033    1           B$JIT.PRIV.ACTIVE='777777777777'O;

   5033  1 001011   000027 236000 xsym               LDQ     B_VECTNIL+23
         1 001012   200003 470500                    LDP0    INFOX$,,AUTO
         1 001013   000013 756100                    STQ     11,,PR0

      231     5034    1           B$JIT.PRIV.AUTH='777777777777'O;

PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:39   
   5034  1 001014   000014 756100                    STQ     12,,PR0

      232     5035    1           IF RPM_FLG THEN PPDBR=HDRMD.BASE/512; /* On RPM the PDBR is 19 bits   */

   5035  1 001015   000000 234000 xsym               SZN     RPM_FLG
         1 001016   001024 605000 1                  TPL     s:5036

   5035  1 001017   000000 236000 xsym               LDQ     HDRMD
         1 001020   001000 506007                    DIV     512,DL
         1 001021   000021 736000                    QLS     17
         1 001022   000003 756000 0                  STQ     PPDBR
         1 001023   001044 710000 1                  TRA     s:5038

      233     5036    1             ELSE IF S1000_FLG='1'B THEN PPDBR=WS0PT.RPN(HDRMD.BASE/1024)*2*4;
              5036                      /* PPDBR is a mod 512 address on 17 bits */

   5036  1 001024   000000 234000 xsym               SZN     S1000_FLG
         1 001025   001037 605000 1                  TPL     s:5037

   5036  1 001026   000000 236000 xsym               LDQ     HDRMD
         1 001027   002000 506007                    DIV     1024,DL
         1 001030   000000 471400 xsym               LDP1    WS0PT$
         1 001031   100000 236106                    LDQ     0,QL,PR1
         1 001032   000017 772000                    QRL     15
         1 001033   000005 376000 2                  ANQ     5
         1 001034   000021 736000                    QLS     17
         1 001035   000003 756000 0                  STQ     PPDBR
         1 001036   001044 710000 1                  TRA     s:5038

      234     5037    1               ELSE PPDBR=(HDRMD.BASE/512)*16; /* On DPS8 the PDBR is 15 bits long */

   5037  1 001037   000000 236000 xsym               LDQ     HDRMD
         1 001040   001000 506007                    DIV     512,DL
         1 001041   000004 736000                    QLS     4
         1 001042   000021 736000                    QLS     17
         1 001043   000003 756000 0                  STQ     PPDBR

PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:40   
      235     5038    1           RETURN;

   5038  1 001044   000000 702200 xent               TSX2  ! X66_ARET
      236     5039    1   END INITM;
      237     5040        %EOD;

PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:41   
--  Include file information  --

   B$JIT_C.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure INITM.
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:42   

 **** Variables and constants ****

  ****  Section 000  Data  INITM

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 AALS$                      4-0-0/w BIT         r     1 DIR_ENT0
     1-0-0/w PTR         r     1 MSEGTBL$                   1-0-0/w STRC        r     1 MSEGTBL_PTR
     3-0-0/w UBIN(19)    r     1 PPDBR

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    11-0-0/w PTR         r     1 HDR$                      12-0-0/w UBIN        r     1 I
     3-0-0/w PTR         r     1 INFOX$                     3-0-0/w STRC        r     1 INFOX_PTR
     4-0-0/w PTR         r     1 INFOY$                     4-0-0/w STRC        r     1 INFOY_PTR
    13-0-0/w SBIN        r     1 J                         10-0-0/w UBIN        r     1 LASTPG
     6-0-0/w UBIN        r     1 LSEG#PTWS                  5-0-0/w UBIN        r     1 NUMNODES
     7-0-0/w UBIN        r     1 STARTPG

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(8640)  r     1 ADIR                       0-0-0/w UBIN        r     1 BASEJ
     0-0-0/w UBIN        r     1 BASEMPT                    0-0-0/b BIT         r     1 BSNLS
     0-0-0/w STRC        r     1 FPMC                       0-0-0/w STRC(144)   r     1 HDRMD
     0-0-0/w STRC(144)   r     1 HDRMH                      0-0-0/w STRC(144)   r     1 HDRMP0
     0-0-0/b BIT         r     1 HDRMP1                     0-0-0/w UBIN        r     1 MONPLL
     0-0-0/b BIT         r     1 MSEGTBL                    0-0-0/b BIT (4)     r     1 RCV_FLG
     0-0-0/b BIT         r     1 RPM_FLG                    0-0-0/b BIT         r     1 S1000_FLG
     0-0-0/w PTR         r     1 WS0PT$                     0-0-0/b BIT         r     1 XA_MODE

PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:43   
  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(865)   r     1 B$JIT                      0-0-0/w STRC(144)   r     1 BAS_HDR
     0-0-0/w STRC        r     1 BAS_PT(0:0)                0-0-0/w STRC        r     1 DIRW0
     0-0-0/w STRC        r     1 MONPT(0:0)                 0-0-0/w UBIN        r     1 MROREC_NODES#
     0-0-0/w STRC(576)   r     1 MSEGTAB                    0-0-0/w STRC        r     1 WS0PT(0:0)
     0-0-0/w STRC        r     1 WSPTD(0:28)


   Procedure INITM requires 549 words for executable code.
   Procedure INITM requires 14 words of local(AUTO) storage.
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:44   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:45   
          MINI XREF LISTING

AALS$
      4671**DCL      2354--IMP-PTR
ADIR.FW.ADIR
      2214**DCL      2215--REDEF
ADIR.MONID.M
      2174**DCL      2177--REDEF
ADIR.TIGRDATA.BASE
      2088**DCL      5021>>ASSIGN   5022>>ASSIGN
ADIR.TIGRDATA.SIZE
      2090**DCL      5014>>IF       5016>>ASSIGN
B$JIT.ERR.MID
      1878**DCL      1878--REDEF
B$JIT.PRIV.ACTIVE
      1878**DCL      5033<<ASSIGN
B$JIT.PRIV.AUTH
      1918**DCL      5034<<ASSIGN
BASEJ
      4838**DCL      4925>>ASSIGN   4926>>ASSIGN
BASEMPT
      4837**DCL      4898>>ASSIGN   4900>>ASSIGN   4901>>ASSIGN   4903>>ASSIGN   4908>>ASSIGN   4910>>ASSIGN
      4911>>ASSIGN   4913>>ASSIGN   4918>>ASSIGN   4919>>ASSIGN
BAS_HDR.BASE
      4822**DCL      5000>>ASSIGN
BAS_HDR.DA
      4823**DCL      4824--REDEF
BAS_HDR.SIZE
      4827**DCL      4988>>ASSIGN   4990>>ASSIGN   5001>>ASSIGN
BAS_PT.CTRL
      4722**DCL      5005<<ASSIGN
BAS_PT.RPN
      4717**DCL      4718--REDEF    5006<<ASSIGN   5007<<ASSIGN
BAS_PT.SCTRL
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:46   
      4719**DCL      4720--REDEF    5004<<ASSIGN
BSNLS
      4670**DCL      4671--DCLINIT
DIRW0
      4742**DCL      4886>>ASSIGN   4887>>ASSIGN
DIR_ENT0
      4835**DCL      4887<<ASSIGN
FPMC
      4854**DCL      4895>>ASSIGN
FPMC.RPN
      4855**DCL      4856--REDEF
FPMC.SCTRL
      4857**DCL      4858--REDEF
HDR$
      4832**DCL      4821--IMP-PTR  4987<<ASSIGN   4988>>ASSIGN   4990>>ASSIGN   5000>>ASSIGN   5001>>ASSIGN
HDRMD.BASE
      4800**DCL      4960>>ASSIGN   4961>>ASSIGN   4974>>ASSIGN   4975>>ASSIGN   5035>>ASSIGN   5036>>ASSIGN
      5037>>ASSIGN
HDRMD.DA
      4801**DCL      4802--REDEF
HDRMD.SIZE
      4805**DCL      4955>>ASSIGN
HDRMH.BASE
      4789**DCL      4941>>ASSIGN   4942>>ASSIGN
HDRMH.DA
      4790**DCL      4791--REDEF
HDRMH.SIZE
      4794**DCL      4936>>ASSIGN
HDRMP0.DA
      4812**DCL      4813--REDEF
HDRMP0.SIZE
      4816**DCL      4970>>ASSIGN
HDRMP1
      4831**DCL      4987--ASSIGN
I
      4872**DCL      4877<<DOINDEX  4878>>ASSIGN   4879>>ASSIGN   4880>>ASSIGN   4894<<DOINDEX  4895>>ASSIGN
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:47   
      4915<<DOINDEX  4916>>ASSIGN   4917>>ASSIGN   4918>>ASSIGN   4918>>ASSIGN   4919>>ASSIGN   4919>>ASSIGN
      4921<<DOINDEX  4922>>ASSIGN   4923>>ASSIGN   4924>>ASSIGN   4925>>ASSIGN   4926>>ASSIGN   4929<<DOINDEX
      4930>>ASSIGN   4931>>ASSIGN   4932>>ASSIGN   4932>>ASSIGN   4933>>ASSIGN   4933>>ASSIGN   4937<<ASSIGN
      4939>>ASSIGN   4940>>ASSIGN   4941>>ASSIGN   4941>>ASSIGN   4942>>ASSIGN   4942>>ASSIGN   4945<<ASSIGN
      4945>>ASSIGN   4956<<ASSIGN   4958>>ASSIGN   4959>>ASSIGN   4960>>ASSIGN   4960>>ASSIGN   4961>>ASSIGN
      4961>>ASSIGN   4964<<ASSIGN   4964>>ASSIGN   4968<<ASSIGN   4968>>ASSIGN   4969>>ASSIGN   4972>>ASSIGN
      4973>>ASSIGN   4974>>ASSIGN   4974>>ASSIGN   4975>>ASSIGN   4975>>ASSIGN   4978<<ASSIGN   4978>>ASSIGN
      4983>>ASSIGN   4989<<DOINDEX  4990>>ASSIGN   4993<<DOINDEX  4994>>ASSIGN   4996<<DOINDEX  4997>>ASSIGN
      4997>>ASSIGN   4999<<DOINDEX  5000>>ASSIGN   5001>>ASSIGN   5002>>ASSIGN   5017<<ASSIGN   5019>>ASSIGN
      5020>>ASSIGN   5021>>ASSIGN   5021>>ASSIGN   5022>>ASSIGN   5022>>ASSIGN   5025<<ASSIGN   5025>>ASSIGN
INFOX$
      2217**DCL      1872--IMP-PTR  2229--REDEF    2256--IMP-PTR  4697--IMP-PTR  4726--IMP-PTR  4878>>ASSIGN
      4879>>ASSIGN   4880>>ASSIGN   4886>>ASSIGN   4898>>ASSIGN   4900>>ASSIGN   4901>>ASSIGN   4903>>ASSIGN
      4905>>ASSIGN   4906>>ASSIGN   4907>>ASSIGN   4908>>ASSIGN   4910>>ASSIGN   4911>>ASSIGN   4913>>ASSIGN
      4986>>ASSIGN   5002<<ASSIGN   5004>>ASSIGN   5005>>ASSIGN   5006>>ASSIGN   5007>>ASSIGN   5033>>ASSIGN
      5034>>ASSIGN
INFOX_PTR
      2229**DCL      4875<<ASSIGN   4984<<ASSIGN   5031<<ASSIGN
INFOX_PTR.S_D_FIELD
      2233**DCL      4876<<ASSIGN   4985<<ASSIGN   5032<<ASSIGN
INFOY$
      2236**DCL      2248--REDEF    2285--IMP-PTR  4742--IMP-PTR  4886>>ASSIGN   4887>>ASSIGN   4895>>ASSIGN
      4916>>ASSIGN   4917>>ASSIGN   4918>>ASSIGN   4919>>ASSIGN   4923>>ASSIGN   4924>>ASSIGN   4925>>ASSIGN
      4926>>ASSIGN   4930>>ASSIGN   4931>>ASSIGN   4932>>ASSIGN   4933>>ASSIGN   4939>>ASSIGN   4940>>ASSIGN
      4941>>ASSIGN   4942>>ASSIGN   4950>>ASSIGN   4951>>ASSIGN   4952>>ASSIGN   4953>>ASSIGN   4958>>ASSIGN
      4959>>ASSIGN   4960>>ASSIGN   4961>>ASSIGN   4972>>ASSIGN   4973>>ASSIGN   4974>>ASSIGN   4975>>ASSIGN
      5019>>ASSIGN   5020>>ASSIGN   5021>>ASSIGN   5022>>ASSIGN
INFOY_PTR
      2248**DCL      4883<<ASSIGN   4891<<ASSIGN
INFOY_PTR.S_D_FIELD
      2252**DCL      4884<<ASSIGN   4892<<ASSIGN
INFOY_PTR.WOFFS
      2249**DCL      4885<<ASSIGN
INITM1
      4958**LABEL    4965--GOTO
INITM2
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:48   
      4972**LABEL    4979--GOTO
INITM5
      5019**LABEL    5026--GOTO
INITMHJ
      4939**LABEL    4946--GOTO
J
      4873**DCL      4922<<ASSIGN   4925>>ASSIGN   4926>>ASSIGN   4936<<ASSIGN   4943>>IF       4944<<ASSIGN
      4944>>ASSIGN   4955<<ASSIGN   4962>>IF       4963<<ASSIGN   4963>>ASSIGN   4970<<ASSIGN   4976>>IF
      4977<<ASSIGN   4977>>ASSIGN   5003<<DOINDEX  5004>>ASSIGN   5005>>ASSIGN   5006>>ASSIGN   5006>>ASSIGN
      5007>>ASSIGN   5007>>ASSIGN   5016<<ASSIGN   5023>>IF       5024<<ASSIGN   5024>>ASSIGN
LASTPG
      4730**DCL      5001<<ASSIGN   5003>>DOINDEX
LSEG#PTWS
      4728**DCL      4988<<ASSIGN   4990<<ASSIGN   4990>>ASSIGN   4992<<ASSIGN   4992>>ASSIGN   4994>>ASSIGN
      4997>>ASSIGN   5002>>ASSIGN
MONPLL
      4836**DCL      4969<<ASSIGN
MONPT
      2285**DCL      4895<<ASSIGN
MONPT.CTRL
      2310**DCL      4917<<ASSIGN   4924<<ASSIGN   4931<<ASSIGN   4940<<ASSIGN   4951<<ASSIGN   4959<<ASSIGN
      4973<<ASSIGN   5020<<ASSIGN
MONPT.RPN
      2305**DCL      2306--REDEF    4918<<ASSIGN   4919<<ASSIGN   4925<<ASSIGN   4926<<ASSIGN   4932<<ASSIGN
      4933<<ASSIGN   4941<<ASSIGN   4942<<ASSIGN   4952<<ASSIGN   4953<<ASSIGN   4960<<ASSIGN   4961<<ASSIGN
      4974<<ASSIGN   4975<<ASSIGN   5021<<ASSIGN   5022<<ASSIGN
MONPT.SCTRL
      2307**DCL      2308--REDEF    4916<<ASSIGN   4923<<ASSIGN   4930<<ASSIGN   4939<<ASSIGN   4950<<ASSIGN
      4958<<ASSIGN   4972<<ASSIGN   5019<<ASSIGN
MROREC_NODES#
      4726**DCL      4986>>ASSIGN
MSEGTAB.FSTPG_BYTEAD
      4693**DCL      4983<<ASSIGN
MSEGTAB.NODEINFO
      4694**DCL      5010<<ASSIGN
MSEGTAB.NODEINFO.RELADDR
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:49   
      4695**DCL      4997<<ASSIGN   4997>>ASSIGN
MSEGTAB.NODEINFO.SIZE
      4696**DCL      4994<<ASSIGN
MSEGTBL
      4672**DCL      4673--DCLINIT
MSEGTBL$
      4673**DCL      4685--REDEF    4692--IMP-PTR  4983>>ASSIGN   4994>>ASSIGN   4997>>ASSIGN   4997>>ASSIGN
      5002>>ASSIGN   5010>>ASSIGN
MSEGTBL_PTR.WOFFS
      4686**DCL      4952>>ASSIGN   4953>>ASSIGN
NUMNODES
      4727**DCL      4986<<ASSIGN   4989>>DOINDEX  4993>>DOINDEX  4996>>DOINDEX  4999>>DOINDEX  5010>>ASSIGN
PPDBR
      4834**DCL      5035<<ASSIGN   5036<<ASSIGN   5037<<ASSIGN
RCV_FLG
      4842**DCL      5014>>IF
RPM_FLG
      4841**DCL      4898>>IF       4908>>IF       5035>>IF
S1000_FLG
      4839**DCL      4882>>IF       4899>>IF       4909>>IF       4918>>IF       4925>>IF       4932>>IF
      4941>>IF       4952>>IF       4960>>IF       4974>>IF       5006>>IF       5021>>IF       5036>>IF
STARTPG
      4729**DCL      5000<<ASSIGN   5001>>ASSIGN   5003>>DOINDEX  5006>>ASSIGN   5007>>ASSIGN
WS0PT.RPN
      2334**DCL      2335--REDEF    4900>>ASSIGN   4901>>ASSIGN   4910>>ASSIGN   4911>>ASSIGN   4918>>ASSIGN
      4925>>ASSIGN   4932>>ASSIGN   4941>>ASSIGN   4952>>ASSIGN   4960>>ASSIGN   4974>>ASSIGN   5006>>ASSIGN
      5021>>ASSIGN   5036>>ASSIGN
WS0PT.SCTRL
      2336**DCL      2337--REDEF
WS0PT$
      2255**DCL      2314--IMP-PTR  4900>>ASSIGN   4901>>ASSIGN   4910>>ASSIGN   4911>>ASSIGN   4918>>ASSIGN
      4925>>ASSIGN   4932>>ASSIGN   4941>>ASSIGN   4952>>ASSIGN   4960>>ASSIGN   4974>>ASSIGN   5006>>ASSIGN
      5021>>ASSIGN   5036>>ASSIGN
WSPTD
      2256**DCL      4878<<ASSIGN   4886<<ASSIGN   4905<<ASSIGN
WSPTD.BLKNO
PL6.E3A0      #001=INITM File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:54 Page:50   
      2276**DCL      4898<<ASSIGN   4900<<ASSIGN   4901<<ASSIGN   4903<<ASSIGN   4908<<ASSIGN   4910<<ASSIGN
      4911<<ASSIGN   4913<<ASSIGN
WSPTD.NBLKS
      2281**DCL      4880<<ASSIGN   4907<<ASSIGN
WSPTD.P
      2278**DCL      4879<<ASSIGN   4906<<ASSIGN
W_PTW.RPN
      4771**DCL      4772--REDEF
W_PTW.SCTRL
      4773**DCL      4774--REDEF
XA_MODE
      4840**DCL      4900>>IF       4910>>IF

PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:51   
      238        1        /*T***********************************************************/
      239        2        /*T*                                                         */
      240        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      241        4        /*T*                                                         */
      242        5        /*T***********************************************************/
      243        6        INIT1:  PROC;
      244        7        /* Build GHOST1 page table */
      245        8        /**/
      246        9        %INCLUDE IS$MACROS;
      247     1284        %INCLUDE B_STRINGS_C;
      248     1413        %INCLUDE M_INFO_C;
      249     1553        %INCLUDE B$JIT_C;
      250     1867        %INCLUDE B_LSDATA_C;
      251     5073        %INCLUDE B_UHJMAC_C;
      252     5402        /**/
      253     5403        %B$JIT0(STCLASS="BASED(INFOY$)");
      254     5492        %U$JIT1;
      255     5566        %M$JIT2;
      256     5576        %F$JIT3;
      257     5581        %S$JIT4;
      258     5587        %J$JIT5;
      259     5675        %A$JIT6;
      260     5685        %DIRHDR(NAME=HDRGD,STCLASS="SYMREF");
      261     5696        %DIRHDR(NAME=HDRGP,STCLASS="SYMREF");
      262     5707    1   DCL INFOX$ PTR;
      263     5708        %PTR_STRUCT(NAME=INFOX_PTR,STCLASS="REDEF INFOX$");
      264     5726    1   DCL INFOY$ PTR;
      265     5727        %PTR_STRUCT(NAME=INFOY_PTR,STCLASS="REDEF INFOY$");
      266     5745    1   DCL WS0PT$ PTR SYMREF;
      267     5746        %PTR_STRUCT(NAME=WS0PT_PTR,STCLASS="REDEF WS0PT$");
      268     5764    1   DCL 1 WSPTD(0:28) ALIGNED BASED(INFOY$), /* Directory                         */
      269     5765        %DIRW(LVL=2);
      270     5793    1   DCL 1 WS0PT(0:0) ALIGNED BASED(WS0PT$), /* WS0 PT                             */
      271     5794        %PTW(LVL=2);
      272     5822        %AALS(STCLASS="BASED(AALS$)");          /* AARDV LSR                          */
      273     8149    1   DCL BSNLS BIT(1) SYMREF;
      274     8150    1   DCL AALS$ PTR STATIC INIT(ADDR(BSNLS));
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:52   
      275     8151    1   DCL 1 G1PT(0:0) ALIGNED BASED(INFOX$),  /* MON PT                             */
      276     8152        %PTW(LVL=2);
      277     8180        /**/
      278     8181    1   DCL PAG_PPH UBIN HALF STATIC SYMDEF;    /* Phisical page head                 */
      279     8182    1   DCL PAG_PPT UBIN HALF STATIC SYMDEF;    /* Phisical page tail                 */
      280     8183    1   DCL PAG_PPC UBIN HALF STATIC SYMDEF;    /* Phisical page count                */
      281     8184    1   DCL BASEH1 UBIN WORD SYMREF;
      282     8185    1   DCL BASEJ1 UBIN WORD SYMREF;
      283     8186    1   DCL BASEGPT UBIN WORD SYMREF;
      284     8187    1   DCL S1000_FLG BIT(1) SYMREF;
      285     8188    1   DCL XA_MODE BIT(1) SYMREF;
      286     8189    1   DCL RPM_FLG BIT(1) SYMREF;
      287     8190    1   DCL FPMC BIT(36) SYMREF;
      288     8191        /**/
      289     8192    1   DCL I UBIN WORD;
      290     8193    1   DCL J SBIN WORD;
      291     8194    1   DCL K UBIN WORD;
      292     8195        /**/
      293     8196    1           INFOX_PTR='0'B;
      294     8197    1           INFOX_PTR.S_D_FIELD=%ALS_G1PGTBL; /* Frame GHOST1 PT                  */
      295     8198    2           DO I=0 TO 1023;                 /* Fill with free page pattern        */
      296     8199    2             G1PT(I)=FPMC;
      297     8200    2           END;                            /* DO I=                              */
      298     8201        /* Fill WSPTD entry */
      299     8202    1           INFOY_PTR='0'B;
      300     8203    1           INFOY_PTR.S_D_FIELD=%ALS_MONIS; /* Frame WSPTD                        */
      301     8204    1           WSPTD(%USERWSQ)='0'B;
      302     8205    1           WSPTD.P(%USERWSQ)='1'B;
      303     8206    1           WSPTD.NBLKS(%USERWSQ)=16;
      304     8207    1           IF RPM_FLG THEN WSPTD.BLKNO(%USERWSQ)=BASEGPT/1024;
      305     8208    2             ELSE IF S1000_FLG='1'B THEN DO;
      306     8209    2                   IF XA_MODE THEN WSPTD.BLKNO(%USERWSQ)=WS0PT.RPN(BASEGPT/1024);
      307     8210    2                     ELSE WSPTD.BLKNO(%USERWSQ)=WS0PT.RPN(BASEGPT/1024)*16;
              8210                              /* Make it a MOD 64 address */
      308     8211    2                 END;                      /*THEN                                */
      309     8212    1               ELSE WSPTD.BLKNO(%USERWSQ)=BASEGPT/64; /* Make it a MOD 64 address */
      310     8213        /* Fill 1'st page */
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:53   
      311     8214    1           G1PT.SCTRL(%PGTBLLO)=%SCUSER;
      312     8215    1           G1PT.CTRL(%PGTBLLO)=%PGINMEM|%PGWRITE|%PGIOM;
      313     8216    1           IF S1000_FLG='1'B THEN G1PT.RPN(%PGTBLLO)=WS0PT.RPN(BASEGPT/1024);
      314     8217    1             ELSE G1PT.RPN(%PGTBLLO)=BASEGPT/1024;
      315     8218    2           DO I=%JITPG TO %JITEND;         /* JIT pages                          */
      316     8219    2             J=I-%JITPG;
      317     8220    2             G1PT.SCTRL(I)=%SCUSER;
      318     8221    2             G1PT.CTRL(I)=%PGINMEM|%PGWRITE|%PGIOM;
      319     8222    2             IF S1000_FLG='1'B THEN G1PT.RPN(I)=WS0PT.RPN(BASEJ1/1024+J);
      320     8223    2               ELSE G1PT.RPN(I)=BASEJ1/1024+J;
      321     8224    2           END;                            /* DO I=                              */
      322     8225    1           INFOY_PTR='0'B;
      323     8226    1           INFOY_PTR.S_D_FIELD=%ALS_JIT1;  /* Frame GHOST1 JIT                   */
      324     8227    1           B$JIT='0'B;
      325     8228    1           B$JIT.PRIOCORE=BASEJ1/1024+J;
      326     8229    1           B$JIT.USERWORD(0)=HDRGP.START;  /* GHOST1 start address               */
      327     8230    1           PAG_PPT=BASEJ1/1024+J;
      328     8231        /* Fix GHOST1 Roseg PT words */
      329     8232    1           J=AALS.DESCGR.BOUND/4;          /* Size in words                      */
      330     8233    1           I=0;
      331     8234    1   INITGR1:
      332     8235    2           IF J>0 THEN DO;
      333     8236    2                 G1PT.SCTRL(%ROSEGLO+I)=%SCUSER;
      334     8237    2                 G1PT.CTRL(%ROSEGLO+I)=%PGINMEM|%PGWRITE|%PGIOM;
      335     8238    2                 IF S1000_FLG='1'B THEN G1PT.RPN(%ROSEGLO+I)=WS0PT.RPN(AALS.DESCGR.BASE
              8238                          /4/1024+I);
      336     8239    2                   ELSE G1PT.RPN(%ROSEGLO+I)=AALS.DESCGR.BASE/4/1024+I;
      337     8240    2                 J=J-1024;
      338     8241    2                 I=I+1;
      339     8242    2                 GOTO INITGR1;
      340     8243    2               END;                        /* THEN                               */
      341     8244    1             ELSE;
      342     8245    1           B$JIT.PCROS=I;                  /* Page count Roseg                   */
      343     8246    1           IF BASEH1=0 THEN RETURN;
      344     8247    1             ELSE;
      345     8248    1           G1PT.SCTRL(%HJITPG)=%SCUSER;
      346     8249    1           G1PT.CTRL(%HJITPG)=%PGINMEM|%PGWRITE|%PGIOM|%PGHKEEP;
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:54   
      347     8250    1           IF S1000_FLG='1'B THEN G1PT.RPN(%HJITPG)=WS0PT.RPN(BASEH1/1024);
      348     8251    1             ELSE G1PT.RPN(%HJITPG)=BASEH1/1024;
      349     8252    1           PAG_PPH=BASEH1/1024;            /* Physical page head                 */
      350     8253    1           J=HDRGD.SIZE;                   /*GHOST1 data, size in words          */
      351     8254    1           I=0;
      352     8255    1   INITGD1:
      353     8256    2           IF J>0 THEN DO;
      354     8257    2                 G1PT.SCTRL(%ISEGLO+I)=%SCUSER;
      355     8258    2                 G1PT.CTRL(%ISEGLO+I)=%PGINMEM|%PGWRITE|%PGIOM;
      356     8259    2                 IF S1000_FLG='1'B THEN G1PT.RPN(%ISEGLO+I)=WS0PT.RPN(HDRGD.BASE/1024+I
              8259                          );
      357     8260    2                   ELSE G1PT.RPN(%ISEGLO+I)=HDRGD.BASE/1024+I;
      358     8261    2                 J=J-1024;
      359     8262    2                 I=I+1;
      360     8263    2                 GOTO INITGD1;
      361     8264    2               END;                        /* THEN                               */
      362     8265    1             ELSE;
      363     8266    1           B$JIT.PCD=I;                    /* Page count for data                */
      364     8267    1           J=HDRGP.SIZE;                   /*GHOST1 proc, size in words          */
      365     8268    1           K=0;
      366     8269    1   INITGP1:
      367     8270    2           IF J>0 THEN DO;
      368     8271    2                 G1PT.SCTRL(%ISEGLO+I)=%SCUSER;
      369     8272    2                 G1PT.CTRL(%ISEGLO+I)=%PGINMEM|%PGIOM;
      370     8273    2                 IF S1000_FLG='1'B THEN G1PT.RPN(%ISEGLO+I)=WS0PT.RPN(HDRGP.BASE/1024+K
              8273                          );
      371     8274    2                   ELSE G1PT.RPN(%ISEGLO+I)=HDRGP.BASE/1024+K;
      372     8275    2                 J=J-1024;
      373     8276    2                 I=I+1;
      374     8277    2                 K=K+1;
      375     8278    2                 GOTO INITGP1;
      376     8279    2               END;                        /* THEN                               */
      377     8280    1             ELSE;
      378     8281    1           B$JIT.PCP=K;                    /* Page count for proc                */
      379     8282        /* Compute Physical page count */
      380     8283    1           B$JIT.PPC=PAG_PPT-PAG_PPH+1;
      381     8284    1           PAG_PPC=PAG_PPT-PAG_PPH+1;
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:55   
      382     8285    1           B$JIT.PCC=5;               /* 1 page HJIT, 2 pages JIT, 1 page PT     */
      383     8286        /* Compute virtual page limits */
      384     8287    1           B$JIT.DLL=%ISEGLO;         /* Virtual page# of ISR=data lower limit   */
      385     8288    1           B$JIT.PLL=B$JIT.PCD+B$JIT.DLL;
              8288                    /* Proc lower limit=data lower limit+data count */
      386     8289    1           B$JIT.DUL=B$JIT.PLL-1;     /* Data upper limit= proc lower limit-1    */
      387     8290    1           B$JIT.PUL=B$JIT.DUL+B$JIT.PCP;  /* Proc upper limit                   */
      388     8291    1           B$JIT.TDP=B$JIT.PUL+1;          /* Top dynamic page                   */
      389     8292    1           B$JIT.DDLL=B$JIT.TDP;           /* Dynamic data lower limit           */
      390     8293    1           B$JIT.DDUL=%ISEGLO+255;         /* Dynamic data upper limit           */
      391     8294    1           B$JIT.EUP=B$JIT.DDUL;           /* End user page in ISR               */
      392     8295    1           B$JIT.PTSIZ=1023;               /* Size of users page table           */
      393     8296        /* Turn on all privilege bits */
      394     8297    1           B$JIT.PRIV.ACTIVE='777777777777'O;
      395     8298    1           B$JIT.PRIV.AUTH='777777777777'O;
      396     8299    1           B$JIT.PRIV.JOB='777777777777'O;
      397     8300        /* Set mode to GHOST1 */
      398     8301    1           B$JIT.FBUL=31;
      399     8302    1           B$JIT.MAXCORE=512;              /* #FPOOLS                            */
      400     8303    1           B$JIT.UNAME='GHOST1';
      401     8304    1           B$JIT.FACCN=':SYS';
      402     8305    1           B$JIT.ACCN=':SYS';
      403     8306    1           B$JIT.WOO='LOCAL';
      404     8307    1           B$JIT.REMLO=-1;
      405     8308    1           B$JIT.REMDO=-1;
      406     8309    1           B$JIT.MAXENQ = 255;
      407     8310    1           RETURN;
      408     8311    1   END INIT1;
      409     8312        %EOD;

PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:56   
--  Include file information  --

   B_UHJMAC_C.:E05TOU  is referenced.
   B_MLSMAC_C.:E05TOU  is referenced.
   B_ULSMAC_C.:E05TOU  is referenced.
   B_LSDATA_C.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure INIT1.

   Procedure INIT1 requires 347 words for executable code.
   Procedure INIT1 requires 10 words of local(AUTO) storage.

PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:57   

 Object Unit name= INIT1                                      File name= ISI$MM.:E05TOU
 UTS= JUL 29 '97 22:55:10.20 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none     4      4  INIT1
    1  RoData even  UTS      5      5  INIT1
    2   Proc  even  none   347    533  INIT1
    3  RoData even  none     3      3  INIT1

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes            yes      Std        0  INIT1

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    0      1  PAG_PPH                            0      2  PAG_PPT
    0      3  PAG_PPC

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:58   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     HDRGD                                 HDRGP                                 WS0PT$
     BSNLS                                 BASEH1                                BASEJ1
     BASEGPT                               S1000_FLG                             XA_MODE
     RPM_FLG                               FPMC                                  B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:59   


      238        1        /*T***********************************************************/
      239        2        /*T*                                                         */
      240        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      241        4        /*T*                                                         */
      242        5        /*T***********************************************************/
      243        6        INIT1:  PROC;

      6  2 000000   000000 700200 xent  INIT1        TSX0  ! X66_AUTO_0
         2 000001   000012 000000                    ZERO    10,0

      244        7        /* Build GHOST1 page table */
      245        8        /**/
      246        9        %INCLUDE IS$MACROS;
      247     1284        %INCLUDE B_STRINGS_C;
      248     1413        %INCLUDE M_INFO_C;
      249     1553        %INCLUDE B$JIT_C;
      250     1867        %INCLUDE B_LSDATA_C;
      251     5073        %INCLUDE B_UHJMAC_C;
      252     5402        /**/
      253     5403        %B$JIT0(STCLASS="BASED(INFOY$)");
      254     5492        %U$JIT1;
      255     5566        %M$JIT2;
      256     5576        %F$JIT3;
      257     5581        %S$JIT4;
      258     5587        %J$JIT5;
      259     5675        %A$JIT6;
      260     5685        %DIRHDR(NAME=HDRGD,STCLASS="SYMREF");
      261     5696        %DIRHDR(NAME=HDRGP,STCLASS="SYMREF");
      262     5707    1   DCL INFOX$ PTR;
      263     5708        %PTR_STRUCT(NAME=INFOX_PTR,STCLASS="REDEF INFOX$");
      264     5726    1   DCL INFOY$ PTR;
      265     5727        %PTR_STRUCT(NAME=INFOY_PTR,STCLASS="REDEF INFOY$");
      266     5745    1   DCL WS0PT$ PTR SYMREF;
      267     5746        %PTR_STRUCT(NAME=WS0PT_PTR,STCLASS="REDEF WS0PT$");
      268     5764    1   DCL 1 WSPTD(0:28) ALIGNED BASED(INFOY$), /* Directory                         */
      269     5765        %DIRW(LVL=2);
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:60   
      270     5793    1   DCL 1 WS0PT(0:0) ALIGNED BASED(WS0PT$), /* WS0 PT                             */
      271     5794        %PTW(LVL=2);
      272     5822        %AALS(STCLASS="BASED(AALS$)");          /* AARDV LSR                          */
      273     8149    1   DCL BSNLS BIT(1) SYMREF;
      274     8150    1   DCL AALS$ PTR STATIC INIT(ADDR(BSNLS));
      275     8151    1   DCL 1 G1PT(0:0) ALIGNED BASED(INFOX$),  /* MON PT                             */
      276     8152        %PTW(LVL=2);
      277     8180        /**/
      278     8181    1   DCL PAG_PPH UBIN HALF STATIC SYMDEF;    /* Phisical page head                 */
      279     8182    1   DCL PAG_PPT UBIN HALF STATIC SYMDEF;    /* Phisical page tail                 */
      280     8183    1   DCL PAG_PPC UBIN HALF STATIC SYMDEF;    /* Phisical page count                */
      281     8184    1   DCL BASEH1 UBIN WORD SYMREF;
      282     8185    1   DCL BASEJ1 UBIN WORD SYMREF;
      283     8186    1   DCL BASEGPT UBIN WORD SYMREF;
      284     8187    1   DCL S1000_FLG BIT(1) SYMREF;
      285     8188    1   DCL XA_MODE BIT(1) SYMREF;
      286     8189    1   DCL RPM_FLG BIT(1) SYMREF;
      287     8190    1   DCL FPMC BIT(36) SYMREF;
      288     8191        /**/
      289     8192    1   DCL I UBIN WORD;
      290     8193    1   DCL J SBIN WORD;
      291     8194    1   DCL K UBIN WORD;
      292     8195        /**/
      293     8196    1           INFOX_PTR='0'B;

   8196  2 000002   200003 450100                    STZ     INFOX$,,AUTO

      294     8197    1           INFOX_PTR.S_D_FIELD=%ALS_G1PGTBL; /* Frame GHOST1 PT                  */

   8197  2 000003   006115 236007                    LDQ     3149,DL
         2 000004   200003 752103                    STCQ    INFOX$,'03'O,AUTO

      295     8198    2           DO I=0 TO 1023;                 /* Fill with free page pattern        */

   8198  2 000005   200005 450100                    STZ     I,,AUTO

      296     8199    2             G1PT(I)=FPMC;
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:61   

   8199  2 000006   000000 236000 xsym               LDQ     FPMC
         2 000007   200003 470500                    LDP0    INFOX$,,AUTO
         2 000010   200005 720100                    LXL0    I,,AUTO
         2 000011   000000 756110                    STQ     0,X0,PR0

      297     8200    2           END;                            /* DO I=                              */

   8200  2 000012   200005 235100                    LDA     I,,AUTO
         2 000013   000001 035007                    ADLA    1,DL
         2 000014   200005 755100                    STA     I,,AUTO
         2 000015   002000 115007                    CMPA    1024,DL
         2 000016   000006 602000 2                  TNC     s:8199

      298     8201        /* Fill WSPTD entry */
      299     8202    1           INFOY_PTR='0'B;

   8202  2 000017   200004 450100                    STZ     INFOY$,,AUTO

      300     8203    1           INFOY_PTR.S_D_FIELD=%ALS_MONIS; /* Frame WSPTD                        */

   8203  2 000020   006050 236007                    LDQ     3112,DL
         2 000021   200004 752103                    STCQ    INFOY$,'03'O,AUTO

      301     8204    1           WSPTD(%USERWSQ)='0'B;

   8204  2 000022   200004 471500                    LDP1    INFOY$,,AUTO
         2 000023   100010 450100                    STZ     8,,PR1

      302     8205    1           WSPTD.P(%USERWSQ)='1'B;

   8205  2 000024   100000 236007                    LDQ     32768,DL
         2 000025   100010 256100                    ORSQ    8,,PR1

      303     8206    1           WSPTD.NBLKS(%USERWSQ)=16;

   8206  2 000026   000020 236007                    LDQ     16,DL
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:62   
         2 000027   100010 752103                    STCQ    8,'03'O,PR1

      304     8207    1           IF RPM_FLG THEN WSPTD.BLKNO(%USERWSQ)=BASEGPT/1024;

   8207  2 000030   000000 234000 xsym               SZN     RPM_FLG
         2 000031   000037 605000 2                  TPL     s:8208

   8207  2 000032   000000 236000 xsym               LDQ     BASEGPT
         2 000033   000012 772000                    QRL     10
         2 000034   000000 620006                    EAX0    0,QL
         2 000035   100010 740100                    STX0    8,,PR1
         2 000036   000066 710000 2                  TRA     s:8214

      305     8208    2             ELSE IF S1000_FLG='1'B THEN DO;

   8208  2 000037   000000 234000 xsym               SZN     S1000_FLG
         2 000040   000062 605000 2                  TPL     s:8212

      306     8209    2                   IF XA_MODE THEN WSPTD.BLKNO(%USERWSQ)=WS0PT.RPN(BASEGPT/1024);

   8209  2 000041   000000 234000 xsym               SZN     XA_MODE
         2 000042   000051 605000 2                  TPL     s:8210

   8209  2 000043   000000 236000 xsym               LDQ     BASEGPT
         2 000044   000012 772000                    QRL     10
         2 000045   000000 473400 xsym               LDP3    WS0PT$
         2 000046   300000 220106                    LDX0    0,QL,PR3
         2 000047   100010 740100                    STX0    8,,PR1
         2 000050   000066 710000 2                  TRA     s:8214

      307     8210    2                     ELSE WSPTD.BLKNO(%USERWSQ)=WS0PT.RPN(BASEGPT/1024)*16;
              8210                              /* Make it a MOD 64 address */

   8210  2 000051   000000 236000 xsym               LDQ     BASEGPT
         2 000052   000012 772000                    QRL     10
         2 000053   000000 473400 xsym               LDP3    WS0PT$
         2 000054   300000 236106                    LDQ     0,QL,PR3
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:63   
         2 000055   000016 772000                    QRL     14
         2 000056   000000 376000 3                  ANQ     0
         2 000057   000000 620006                    EAX0    0,QL
         2 000060   100010 740100                    STX0    8,,PR1

      308     8211    2                 END;                      /*THEN                                */

   8211  2 000061   000066 710000 2                  TRA     s:8214

      309     8212    1               ELSE WSPTD.BLKNO(%USERWSQ)=BASEGPT/64; /* Make it a MOD 64 address */

   8212  2 000062   000000 236000 xsym               LDQ     BASEGPT
         2 000063   000006 772000                    QRL     6
         2 000064   000000 620006                    EAX0    0,QL
         2 000065   100010 740100                    STX0    8,,PR1

      310     8213        /* Fill 1'st page */
      311     8214    1           G1PT.SCTRL(%PGTBLLO)=%SCUSER;

   8214  2 000066   000000 236100                    LDQ     0,,PR0
         2 000067   000001 376000 3                  ANQ     1
         2 000070   000400 276007                    ORQ     256,DL
         2 000071   000000 756100                    STQ     0,,PR0

      312     8215    1           G1PT.CTRL(%PGTBLLO)=%PGINMEM|%PGWRITE|%PGIOM;

   8215  2 000072   000064 236007                    LDQ     52,DL
         2 000073   000000 752101                    STCQ    0,'01'O,PR0

      313     8216    1           IF S1000_FLG='1'B THEN G1PT.RPN(%PGTBLLO)=WS0PT.RPN(BASEGPT/1024);

   8216  2 000074   000000 234000 xsym               SZN     S1000_FLG
         2 000075   000104 605000 2                  TPL     s:8217

   8216  2 000076   000000 236000 xsym               LDQ     BASEGPT
         2 000077   000012 772000                    QRL     10
         2 000100   000000 473400 xsym               LDP3    WS0PT$
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:64   
         2 000101   300000 220106                    LDX0    0,QL,PR3
         2 000102   000000 740100                    STX0    0,,PR0
         2 000103   000110 710000 2                  TRA     s:8218

      314     8217    1             ELSE G1PT.RPN(%PGTBLLO)=BASEGPT/1024;

   8217  2 000104   000000 236000 xsym               LDQ     BASEGPT
         2 000105   000012 772000                    QRL     10
         2 000106   000000 620006                    EAX0    0,QL
         2 000107   000000 740100                    STX0    0,,PR0

      315     8218    2           DO I=%JITPG TO %JITEND;         /* JIT pages                          */

   8218  2 000110   000013 236007                    LDQ     11,DL
         2 000111   200005 756100                    STQ     I,,AUTO

      316     8219    2             J=I-%JITPG;

   8219  2 000112   200005 235100                    LDA     I,,AUTO
         2 000113   000013 135007                    SBLA    11,DL
         2 000114   200006 755100                    STA     J,,AUTO

      317     8220    2             G1PT.SCTRL(I)=%SCUSER;

   8220  2 000115   200003 470500                    LDP0    INFOX$,,AUTO
         2 000116   200005 720100                    LXL0    I,,AUTO
         2 000117   000000 236110                    LDQ     0,X0,PR0
         2 000120   000001 376000 3                  ANQ     1
         2 000121   000400 276007                    ORQ     256,DL
         2 000122   000000 756110                    STQ     0,X0,PR0

      318     8221    2             G1PT.CTRL(I)=%PGINMEM|%PGWRITE|%PGIOM;

   8221  2 000123   000000 236110                    LDQ     0,X0,PR0
         2 000124   000002 376000 3                  ANQ     2
         2 000125   000064 276007                    ORQ     52,DL
         2 000126   000000 756110                    STQ     0,X0,PR0
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:65   

      319     8222    2             IF S1000_FLG='1'B THEN G1PT.RPN(I)=WS0PT.RPN(BASEJ1/1024+J);

   8222  2 000127   000000 234000 xsym               SZN     S1000_FLG
         2 000130   000140 605000 2                  TPL     s:8223

   8222  2 000131   000000 236000 xsym               LDQ     BASEJ1
         2 000132   000012 772000                    QRL     10
         2 000133   200006 036100                    ADLQ    J,,AUTO
         2 000134   000000 471400 xsym               LDP1    WS0PT$
         2 000135   100000 221106                    LDX1    0,QL,PR1
         2 000136   000000 741110                    STX1    0,X0,PR0
         2 000137   000145 710000 2                  TRA     s:8224

      320     8223    2               ELSE G1PT.RPN(I)=BASEJ1/1024+J;

   8223  2 000140   000000 236000 xsym               LDQ     BASEJ1
         2 000141   000012 772000                    QRL     10
         2 000142   200006 036100                    ADLQ    J,,AUTO
         2 000143   000000 621006                    EAX1    0,QL
         2 000144   000000 741110                    STX1    0,X0,PR0

      321     8224    2           END;                            /* DO I=                              */

   8224  2 000145   200005 236100                    LDQ     I,,AUTO
         2 000146   000001 036007                    ADLQ    1,DL
         2 000147   200005 756100                    STQ     I,,AUTO
         2 000150   000015 116007                    CMPQ    13,DL
         2 000151   000112 602000 2                  TNC     s:8219

      322     8225    1           INFOY_PTR='0'B;

   8225  2 000152   200004 450100                    STZ     INFOY$,,AUTO

      323     8226    1           INFOY_PTR.S_D_FIELD=%ALS_JIT1;  /* Frame GHOST1 JIT                   */

   8226  2 000153   006053 236007                    LDQ     3115,DL
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:66   
         2 000154   200004 752103                    STCQ    INFOY$,'03'O,AUTO

      324     8227    1           B$JIT='0'B;

   8227  2 000155   200004 471500                    LDP1    INFOY$,,AUTO
         2 000156   000100 100400                    MLR     fill='000'O
         2 000157   000002 000001 xsym               ADSC9   B_VECTNIL+2              cn=0,n=1
         2 000160   100000 001730                    ADSC9   0,,PR1                   cn=0,n=984

      325     8228    1           B$JIT.PRIOCORE=BASEJ1/1024+J;

   8228  2 000161   000000 236000 xsym               LDQ     BASEJ1
         2 000162   000012 772000                    QRL     10
         2 000163   200006 036100                    ADLQ    J,,AUTO
         2 000164   000000 620006                    EAX0    0,QL
         2 000165   100207 740100                    STX0    135,,PR1

      326     8229    1           B$JIT.USERWORD(0)=HDRGP.START;  /* GHOST1 start address               */

   8229  2 000166   000003 721000 xsym               LXL1    HDRGP+3
         2 000167   100133 741100                    STX1    91,,PR1

      327     8230    1           PAG_PPT=BASEJ1/1024+J;

   8230  2 000170   000000 236000 xsym               LDQ     BASEJ1
         2 000171   000012 772000                    QRL     10
         2 000172   200006 036100                    ADLQ    J,,AUTO
         2 000173   000000 622006                    EAX2    0,QL
         2 000174   000002 742000 0                  STX2    PAG_PPT

      328     8231        /* Fix GHOST1 Roseg PT words */
      329     8232    1           J=AALS.DESCGR.BOUND/4;          /* Size in words                      */

   8232  2 000175   000000 473400 0                  LDP3    AALS$
         2 000176   300042 236100                    LDQ     34,,PR3
         2 000177   000020 772000                    QRL     16
         2 000200   000002 772000                    QRL     2
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:67   
         2 000201   200006 756100                    STQ     J,,AUTO

      330     8233    1           I=0;

   8233  2 000202   200005 450100                    STZ     I,,AUTO

      331     8234    1   INITGR1:
      332     8235    2           IF J>0 THEN DO;

   8235  2 000203   200006 235100       INITGR1      LDA     J,,AUTO
         2 000204   000247 604400 2                  TMOZ    s:8245

      333     8236    2                 G1PT.SCTRL(%ROSEGLO+I)=%SCUSER;

   8236  2 000205   200003 470500                    LDP0    INFOX$,,AUTO
         2 000206   200005 720100                    LXL0    I,,AUTO
         2 000207   000057 236110                    LDQ     47,X0,PR0
         2 000210   000001 376000 3                  ANQ     1
         2 000211   000400 276007                    ORQ     256,DL
         2 000212   000057 756110                    STQ     47,X0,PR0

      334     8237    2                 G1PT.CTRL(%ROSEGLO+I)=%PGINMEM|%PGWRITE|%PGIOM;

   8237  2 000213   000057 236110                    LDQ     47,X0,PR0
         2 000214   000002 376000 3                  ANQ     2
         2 000215   000064 276007                    ORQ     52,DL
         2 000216   000057 756110                    STQ     47,X0,PR0

      335     8238    2                IF S1000_FLG='1'B THEN G1PT.RPN(%ROSEGLO+I)=WS0PT.RPN(AALS.DESCGR.BASE
              8238                          /4/1024+I);

   8238  2 000217   000000 234000 xsym               SZN     S1000_FLG
         2 000220   000232 605000 2                  TPL     s:8239

   8238  2 000221   000000 471400 0                  LDP1    AALS$
         2 000222   100043 236100                    LDQ     35,,PR1
         2 000223   000004 506007                    DIV     4,DL
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:68   
         2 000224   002000 506007                    DIV     1024,DL
         2 000225   200005 036100                    ADLQ    I,,AUTO
         2 000226   000000 473400 xsym               LDP3    WS0PT$
         2 000227   300000 221106                    LDX1    0,QL,PR3
         2 000230   000057 741110                    STX1    47,X0,PR0
         2 000231   000241 710000 2                  TRA     s:8240

      336     8239    2                   ELSE G1PT.RPN(%ROSEGLO+I)=AALS.DESCGR.BASE/4/1024+I;

   8239  2 000232   000000 471400 0                  LDP1    AALS$
         2 000233   100043 236100                    LDQ     35,,PR1
         2 000234   000004 506007                    DIV     4,DL
         2 000235   002000 506007                    DIV     1024,DL
         2 000236   200005 036100                    ADLQ    I,,AUTO
         2 000237   000000 621006                    EAX1    0,QL
         2 000240   000057 741110                    STX1    47,X0,PR0

      337     8240    2                 J=J-1024;

   8240  2 000241   002000 336007                    LCQ     1024,DL
         2 000242   200006 056100                    ASQ     J,,AUTO

      338     8241    2                 I=I+1;

   8241  2 000243   200005 235100                    LDA     I,,AUTO
         2 000244   000001 035007                    ADLA    1,DL
         2 000245   200005 755100                    STA     I,,AUTO

      339     8242    2                 GOTO INITGR1;

   8242  2 000246   000203 710000 2                  TRA     INITGR1

      340     8243    2               END;                        /* THEN                               */
      341     8244    1             ELSE;
      342     8245    1           B$JIT.PCROS=I;                  /* Page count Roseg                   */

   8245  2 000247   200005 720100                    LXL0    I,,AUTO
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:69   
         2 000250   200004 470500                    LDP0    INFOY$,,AUTO
         2 000251   000203 740100                    STX0    131,,PR0

      343     8246    1           IF BASEH1=0 THEN RETURN;

   8246  2 000252   000000 236000 xsym               LDQ     BASEH1
         2 000253   000255 601000 2                  TNZ     s:8248

   8246  2 000254   000000 702200 xent               TSX2  ! X66_ARET

      344     8247    1             ELSE;
      345     8248    1           G1PT.SCTRL(%HJITPG)=%SCUSER;

   8248  2 000255   200003 471500                    LDP1    INFOX$,,AUTO
         2 000256   100015 236100                    LDQ     13,,PR1
         2 000257   000001 376000 3                  ANQ     1
         2 000260   000400 276007                    ORQ     256,DL
         2 000261   100015 756100                    STQ     13,,PR1

      346     8249    1           G1PT.CTRL(%HJITPG)=%PGINMEM|%PGWRITE|%PGIOM|%PGHKEEP;

   8249  2 000262   000074 236007                    LDQ     60,DL
         2 000263   100015 752101                    STCQ    13,'01'O,PR1

      347     8250    1           IF S1000_FLG='1'B THEN G1PT.RPN(%HJITPG)=WS0PT.RPN(BASEH1/1024);

   8250  2 000264   000000 234000 xsym               SZN     S1000_FLG
         2 000265   000274 605000 2                  TPL     s:8251

   8250  2 000266   000000 236000 xsym               LDQ     BASEH1
         2 000267   000012 772000                    QRL     10
         2 000270   000000 473400 xsym               LDP3    WS0PT$
         2 000271   300000 221106                    LDX1    0,QL,PR3
         2 000272   100015 741100                    STX1    13,,PR1
         2 000273   000300 710000 2                  TRA     s:8252

      348     8251    1             ELSE G1PT.RPN(%HJITPG)=BASEH1/1024;
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:70   

   8251  2 000274   000000 236000 xsym               LDQ     BASEH1
         2 000275   000012 772000                    QRL     10
         2 000276   000000 621006                    EAX1    0,QL
         2 000277   100015 741100                    STX1    13,,PR1

      349     8252    1           PAG_PPH=BASEH1/1024;            /* Physical page head                 */

   8252  2 000300   000000 236000 xsym               LDQ     BASEH1
         2 000301   000012 772000                    QRL     10
         2 000302   000000 622006                    EAX2    0,QL
         2 000303   000001 742000 0                  STX2    PAG_PPH

      350     8253    1           J=HDRGD.SIZE;                   /*GHOST1 data, size in words          */

   8253  2 000304   000002 236000 xsym               LDQ     HDRGD+2
         2 000305   200006 756100                    STQ     J,,AUTO

      351     8254    1           I=0;

   8254  2 000306   200005 450100                    STZ     I,,AUTO

      352     8255    1   INITGD1:
      353     8256    2           IF J>0 THEN DO;

   8256  2 000307   200006 235100       INITGD1      LDA     J,,AUTO
         2 000310   000347 604400 2                  TMOZ    s:8266

      354     8257    2                 G1PT.SCTRL(%ISEGLO+I)=%SCUSER;

   8257  2 000311   200003 470500                    LDP0    INFOX$,,AUTO
         2 000312   200005 720100                    LXL0    I,,AUTO
         2 000313   000100 236110                    LDQ     64,X0,PR0
         2 000314   000001 376000 3                  ANQ     1
         2 000315   000400 276007                    ORQ     256,DL
         2 000316   000100 756110                    STQ     64,X0,PR0

PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:71   
      355     8258    2                 G1PT.CTRL(%ISEGLO+I)=%PGINMEM|%PGWRITE|%PGIOM;

   8258  2 000317   000100 236110                    LDQ     64,X0,PR0
         2 000320   000002 376000 3                  ANQ     2
         2 000321   000064 276007                    ORQ     52,DL
         2 000322   000100 756110                    STQ     64,X0,PR0

      356     8259    2                IF S1000_FLG='1'B THEN G1PT.RPN(%ISEGLO+I)=WS0PT.RPN(HDRGD.BASE/1024+I
              8259                          );

   8259  2 000323   000000 234000 xsym               SZN     S1000_FLG
         2 000324   000334 605000 2                  TPL     s:8260

   8259  2 000325   000000 236000 xsym               LDQ     HDRGD
         2 000326   002000 506007                    DIV     1024,DL
         2 000327   200005 036100                    ADLQ    I,,AUTO
         2 000330   000000 471400 xsym               LDP1    WS0PT$
         2 000331   100000 221106                    LDX1    0,QL,PR1
         2 000332   000100 741110                    STX1    64,X0,PR0
         2 000333   000341 710000 2                  TRA     s:8261

      357     8260    2                   ELSE G1PT.RPN(%ISEGLO+I)=HDRGD.BASE/1024+I;

   8260  2 000334   000000 236000 xsym               LDQ     HDRGD
         2 000335   002000 506007                    DIV     1024,DL
         2 000336   200005 036100                    ADLQ    I,,AUTO
         2 000337   000000 621006                    EAX1    0,QL
         2 000340   000100 741110                    STX1    64,X0,PR0

      358     8261    2                 J=J-1024;

   8261  2 000341   002000 336007                    LCQ     1024,DL
         2 000342   200006 056100                    ASQ     J,,AUTO

      359     8262    2                 I=I+1;

   8262  2 000343   200005 235100                    LDA     I,,AUTO
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:72   
         2 000344   000001 035007                    ADLA    1,DL
         2 000345   200005 755100                    STA     I,,AUTO

      360     8263    2                 GOTO INITGD1;

   8263  2 000346   000307 710000 2                  TRA     INITGD1

      361     8264    2               END;                        /* THEN                               */
      362     8265    1             ELSE;
      363     8266    1           B$JIT.PCD=I;                    /* Page count for data                */

   8266  2 000347   200005 720100                    LXL0    I,,AUTO
         2 000350   200004 470500                    LDP0    INFOY$,,AUTO
         2 000351   000201 440100                    SXL0    129,,PR0

      364     8267    1           J=HDRGP.SIZE;                   /*GHOST1 proc, size in words          */

   8267  2 000352   000002 236000 xsym               LDQ     HDRGP+2
         2 000353   200006 756100                    STQ     J,,AUTO

      365     8268    1           K=0;

   8268  2 000354   200007 450100                    STZ     K,,AUTO

      366     8269    1   INITGP1:
      367     8270    2           IF J>0 THEN DO;

   8270  2 000355   200006 235100       INITGP1      LDA     J,,AUTO
         2 000356   000420 604400 2                  TMOZ    s:8281

      368     8271    2                 G1PT.SCTRL(%ISEGLO+I)=%SCUSER;

   8271  2 000357   200003 470500                    LDP0    INFOX$,,AUTO
         2 000360   200005 720100                    LXL0    I,,AUTO
         2 000361   000100 236110                    LDQ     64,X0,PR0
         2 000362   000001 376000 3                  ANQ     1
         2 000363   000400 276007                    ORQ     256,DL
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:73   
         2 000364   000100 756110                    STQ     64,X0,PR0

      369     8272    2                 G1PT.CTRL(%ISEGLO+I)=%PGINMEM|%PGIOM;

   8272  2 000365   000100 236110                    LDQ     64,X0,PR0
         2 000366   000002 376000 3                  ANQ     2
         2 000367   000044 276007                    ORQ     36,DL
         2 000370   000100 756110                    STQ     64,X0,PR0

      370     8273    2                IF S1000_FLG='1'B THEN G1PT.RPN(%ISEGLO+I)=WS0PT.RPN(HDRGP.BASE/1024+K
              8273                          );

   8273  2 000371   000000 234000 xsym               SZN     S1000_FLG
         2 000372   000402 605000 2                  TPL     s:8274

   8273  2 000373   000000 236000 xsym               LDQ     HDRGP
         2 000374   002000 506007                    DIV     1024,DL
         2 000375   200007 036100                    ADLQ    K,,AUTO
         2 000376   000000 471400 xsym               LDP1    WS0PT$
         2 000377   100000 221106                    LDX1    0,QL,PR1
         2 000400   000100 741110                    STX1    64,X0,PR0
         2 000401   000407 710000 2                  TRA     s:8275

      371     8274    2                   ELSE G1PT.RPN(%ISEGLO+I)=HDRGP.BASE/1024+K;

   8274  2 000402   000000 236000 xsym               LDQ     HDRGP
         2 000403   002000 506007                    DIV     1024,DL
         2 000404   200007 036100                    ADLQ    K,,AUTO
         2 000405   000000 621006                    EAX1    0,QL
         2 000406   000100 741110                    STX1    64,X0,PR0

      372     8275    2                 J=J-1024;

   8275  2 000407   002000 336007                    LCQ     1024,DL
         2 000410   200006 056100                    ASQ     J,,AUTO

      373     8276    2                 I=I+1;
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:74   

   8276  2 000411   200005 235100                    LDA     I,,AUTO
         2 000412   000001 035007                    ADLA    1,DL
         2 000413   200005 755100                    STA     I,,AUTO

      374     8277    2                 K=K+1;

   8277  2 000414   200007 235100                    LDA     K,,AUTO
         2 000415   000001 035007                    ADLA    1,DL
         2 000416   200007 755100                    STA     K,,AUTO

      375     8278    2                 GOTO INITGP1;

   8278  2 000417   000355 710000 2                  TRA     INITGP1

      376     8279    2               END;                        /* THEN                               */
      377     8280    1             ELSE;
      378     8281    1           B$JIT.PCP=K;                    /* Page count for proc                */

   8281  2 000420   200007 720100                    LXL0    K,,AUTO
         2 000421   200004 470500                    LDP0    INFOY$,,AUTO
         2 000422   000201 740100                    STX0    129,,PR0

      379     8282        /* Compute Physical page count */
      380     8283    1           B$JIT.PPC=PAG_PPT-PAG_PPH+1;

   8283  2 000423   000001 236000 0                  LDQ     PAG_PPH
         2 000424   000022 772000                    QRL     18
         2 000425   200010 756100                    STQ     K+1,,AUTO
         2 000426   000002 236000 0                  LDQ     PAG_PPT
         2 000427   000022 772000                    QRL     18
         2 000430   200010 136100                    SBLQ    K+1,,AUTO
         2 000431   000001 621006                    EAX1    1,QL
         2 000432   000207 441100                    SXL1    135,,PR0

      381     8284    1           PAG_PPC=PAG_PPT-PAG_PPH+1;

PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:75   
   8284  2 000433   000001 236000 0                  LDQ     PAG_PPH
         2 000434   000022 772000                    QRL     18
         2 000435   200010 756100                    STQ     K+1,,AUTO
         2 000436   000002 236000 0                  LDQ     PAG_PPT
         2 000437   000022 772000                    QRL     18
         2 000440   200010 136100                    SBLQ    K+1,,AUTO
         2 000441   000001 622006                    EAX2    1,QL
         2 000442   000003 742000 0                  STX2    PAG_PPC

      382     8285    1           B$JIT.PCC=5;               /* 1 page HJIT, 2 pages JIT, 1 page PT     */

   8285  2 000443   000005 223003                    LDX3    5,DU
         2 000444   000202 443100                    SXL3    130,,PR0

      383     8286        /* Compute virtual page limits */
      384     8287    1           B$JIT.DLL=%ISEGLO;         /* Virtual page# of ISR=data lower limit   */

   8287  2 000445   000100 224003                    LDX4    64,DU
         2 000446   000177 744100                    STX4    127,,PR0

      385     8288    1           B$JIT.PLL=B$JIT.PCD+B$JIT.DLL;
              8288                    /* Proc lower limit=data lower limit+data count */

   8288  2 000447   000177 236100                    LDQ     127,,PR0
         2 000450   000022 772000                    QRL     18
         2 000451   200010 756100                    STQ     K+1,,AUTO
         2 000452   000201 236100                    LDQ     129,,PR0
         2 000453   777777 376007                    ANQ     -1,DL
         2 000454   200010 036100                    ADLQ    K+1,,AUTO
         2 000455   000000 625006                    EAX5    0,QL
         2 000456   000176 745100                    STX5    126,,PR0

      386     8289    1           B$JIT.DUL=B$JIT.PLL-1;     /* Data upper limit= proc lower limit-1    */

   8289  2 000457   777777 626015                    EAX6    -1,X5
         2 000460   000177 446100                    SXL6    127,,PR0

PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:76   
      387     8290    1           B$JIT.PUL=B$JIT.DUL+B$JIT.PCP;  /* Proc upper limit                   */

   8290  2 000461   000201 236100                    LDQ     129,,PR0
         2 000462   000022 772000                    QRL     18
         2 000463   200010 756100                    STQ     K+1,,AUTO
         2 000464   000177 236100                    LDQ     127,,PR0
         2 000465   777777 376007                    ANQ     -1,DL
         2 000466   200010 036100                    ADLQ    K+1,,AUTO
         2 000467   000000 627006                    EAX7    0,QL
         2 000470   000176 447100                    SXL7    126,,PR0

      388     8291    1           B$JIT.TDP=B$JIT.PUL+1;          /* Top dynamic page                   */

   8291  2 000471   000001 620017                    EAX0    1,X7
         2 000472   000204 740100                    STX0    132,,PR0

      389     8292    1           B$JIT.DDLL=B$JIT.TDP;           /* Dynamic data lower limit           */

   8292  2 000473   000200 740100                    STX0    128,,PR0

      390     8293    1           B$JIT.DDUL=%ISEGLO+255;         /* Dynamic data upper limit           */

   8293  2 000474   000477 220003                    LDX0    319,DU
         2 000475   000200 440100                    SXL0    128,,PR0

      391     8294    1           B$JIT.EUP=B$JIT.DDUL;           /* End user page in ISR               */

   8294  2 000476   000204 440100                    SXL0    132,,PR0

      392     8295    1           B$JIT.PTSIZ=1023;               /* Size of users page table           */

   8295  2 000477   001777 220003                    LDX0    1023,DU
         2 000500   000216 440100                    SXL0    142,,PR0

      393     8296        /* Turn on all privilege bits */
      394     8297    1           B$JIT.PRIV.ACTIVE='777777777777'O;

PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:77   
   8297  2 000501   000027 236000 xsym               LDQ     B_VECTNIL+23
         2 000502   000013 756100                    STQ     11,,PR0

      395     8298    1           B$JIT.PRIV.AUTH='777777777777'O;

   8298  2 000503   000014 756100                    STQ     12,,PR0

      396     8299    1           B$JIT.PRIV.JOB='777777777777'O;

   8299  2 000504   000015 756100                    STQ     13,,PR0

      397     8300        /* Set mode to GHOST1 */
      398     8301    1           B$JIT.FBUL=31;

   8301  2 000505   000037 220003                    LDX0    31,DU
         2 000506   000205 440100                    SXL0    133,,PR0

      399     8302    1           B$JIT.MAXCORE=512;              /* #FPOOLS                            */

   8302  2 000507   001000 220003                    LDX0    512,DU
         2 000510   000210 740100                    STX0    136,,PR0

      400     8303    1           B$JIT.UNAME='GHOST1';

   8303  2 000511   040100 100400                    MLR     fill='040'O
         2 000512   000000 000006 1                  ADSC9   0                        cn=0,n=6
         2 000513   000003 000014                    ADSC9   3,,PR0                   cn=0,n=12

      401     8304    1           B$JIT.FACCN=':SYS';

   8304  2 000514   000002 235000 1                  LDA     2
         2 000515   000035 236000 xsym               LDQ     B_VECTNIL+29
         2 000516   000006 757100                    STAQ    6,,PR0

      402     8305    1           B$JIT.ACCN=':SYS';

   8305  2 000517   040100 100400                    MLR     fill='040'O
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:78   
         2 000520   000002 000004 1                  ADSC9   2                        cn=0,n=4
         2 000521   000001 000010                    ADSC9   1,,PR0                   cn=0,n=8

      403     8306    1           B$JIT.WOO='LOCAL';

   8306  2 000522   040100 100400                    MLR     fill='040'O
         2 000523   000003 000005 1                  ADSC9   3                        cn=0,n=5
         2 000524   000010 000010                    ADSC9   8,,PR0                   cn=0,n=8

      404     8307    1           B$JIT.REMLO=-1;

   8307  2 000525   000001 335007                    LCA     1,DL
         2 000526   000361 755100                    STA     241,,PR0

      405     8308    1           B$JIT.REMDO=-1;

   8308  2 000527   000362 755100                    STA     242,,PR0

      406     8309    1           B$JIT.MAXENQ = 255;

   8309  2 000530   000377 222003                    LDX2    255,DU
         2 000531   000363 742100                    STX2    243,,PR0

      407     8310    1           RETURN;

   8310  2 000532   000000 702200 xent               TSX2  ! X66_ARET
      408     8311    1   END INIT1;
      409     8312        %EOD;

PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:79   
--  Include file information  --

   B_UHJMAC_C.:E05TOU  is referenced.
   B_MLSMAC_C.:E05TOU  is referenced.
   B_ULSMAC_C.:E05TOU  is referenced.
   B_LSDATA_C.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure INIT1.
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:80   

 **** Variables and constants ****

  ****  Section 000  Data  INIT1

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 AALS$                      3-0-0/w UBIN(18)    r     1 PAG_PPC
     1-0-0/w UBIN(18)    r     1 PAG_PPH                    2-0-0/w UBIN(18)    r     1 PAG_PPT

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     5-0-0/w UBIN        r     1 I                          3-0-0/w PTR         r     1 INFOX$
     3-0-0/w STRC        r     1 INFOX_PTR                  4-0-0/w PTR         r     1 INFOY$
     4-0-0/w STRC        r     1 INFOY_PTR                  6-0-0/w SBIN        r     1 J
     7-0-0/w UBIN        r     1 K

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w UBIN        r     1 BASEGPT                    0-0-0/w UBIN        r     1 BASEH1
     0-0-0/w UBIN        r     1 BASEJ1                     0-0-0/b BIT         r     1 BSNLS
     0-0-0/b BIT         r     1 FPMC                       0-0-0/w STRC(144)   r     1 HDRGD
     0-0-0/w STRC(144)   r     1 HDRGP                      0-0-0/b BIT         r     1 RPM_FLG
     0-0-0/b BIT         r     1 S1000_FLG                  0-0-0/w PTR         r     1 WS0PT$
     0-0-0/b BIT         r     1 XA_MODE

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:81   
     0-0-0/d STRC(7560)  r     1 AALS                       0-0-0/d STRC(8856)  r     1 B$JIT
     0-0-0/w STRC        r     1 G1PT(0:0)                  0-0-0/w STRC        r     1 WS0PT(0:0)
     0-0-0/w STRC        r     1 WSPTD(0:28)


   Procedure INIT1 requires 347 words for executable code.
   Procedure INIT1 requires 10 words of local(AUTO) storage.
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:82   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:83   
          MINI XREF LISTING

AALS.DESCGR.BASE
      6227**DCL      8238>>ASSIGN   8239>>ASSIGN
AALS.DESCGR.BOUND
      6223**DCL      8232>>ASSIGN
AALS$
      8150**DCL      5833--IMP-PTR  8232>>ASSIGN   8238>>ASSIGN   8239>>ASSIGN
B$JIT
      5404**DCL      8227<<ASSIGN
B$JIT.ACCN
      5409**DCL      8305<<ASSIGN
B$JIT.CPFLAGS1.SLEAZE
      5503**DCL      5503--REDEF
B$JIT.DDLL
      5567**DCL      8292<<ASSIGN
B$JIT.DDUL
      5567**DCL      8293<<ASSIGN   8294>>ASSIGN
B$JIT.DLL
      5567**DCL      8287<<ASSIGN   8288>>ASSIGN
B$JIT.DUL
      5567**DCL      8289<<ASSIGN   8290>>ASSIGN
B$JIT.ERR.MID
      5410**DCL      5410--REDEF
B$JIT.EUP
      5569**DCL      8294<<ASSIGN
B$JIT.FACCN
      5409**DCL      8304<<ASSIGN
B$JIT.FBUL
      5569**DCL      8301<<ASSIGN
B$JIT.JRESPEAK
      5571**DCL      5572--REDEF
B$JIT.MAXCORE
      5570**DCL      8302<<ASSIGN
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:84   
B$JIT.MAXENQ
      5682**DCL      8309<<ASSIGN
B$JIT.ORIGINATOR_PORT.FROM_CR
      5680**DCL      5680--REDEF    5681--REDEF
B$JIT.PCC
      5568**DCL      8285<<ASSIGN
B$JIT.PCD
      5568**DCL      8266<<ASSIGN   8288>>ASSIGN
B$JIT.PCP
      5568**DCL      8281<<ASSIGN   8290>>ASSIGN
B$JIT.PCROS
      5568**DCL      8245<<ASSIGN
B$JIT.PLL
      5567**DCL      8288<<ASSIGN   8289>>ASSIGN
B$JIT.PNR
      5584**DCL      5584--REDEF
B$JIT.PPC
      5570**DCL      8283<<ASSIGN
B$JIT.PRIOCORE
      5570**DCL      8228<<ASSIGN
B$JIT.PRIV.ACTIVE
      5410**DCL      8297<<ASSIGN
B$JIT.PRIV.AUTH
      5450**DCL      8298<<ASSIGN
B$JIT.PRIV.JOB
      5453**DCL      8299<<ASSIGN
B$JIT.PTSIZ
      5573**DCL      8295<<ASSIGN
B$JIT.PUL
      5567**DCL      8290<<ASSIGN   8291>>ASSIGN
B$JIT.REMDO
      5682**DCL      8308<<ASSIGN
B$JIT.REMLO
      5682**DCL      8307<<ASSIGN
B$JIT.TDP
      5569**DCL      8291<<ASSIGN   8292>>ASSIGN
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:85   
B$JIT.TSLINE
      5678**DCL      5679--REDEF
B$JIT.UNAME
      5409**DCL      8303<<ASSIGN
B$JIT.USERWORD
      5497**DCL      8229<<ASSIGN
B$JIT.WOO
      5409**DCL      8306<<ASSIGN
BASEGPT
      8186**DCL      8207>>ASSIGN   8209>>ASSIGN   8210>>ASSIGN   8212>>ASSIGN   8216>>ASSIGN   8217>>ASSIGN
BASEH1
      8184**DCL      8246>>IF       8250>>ASSIGN   8251>>ASSIGN   8252>>ASSIGN
BASEJ1
      8185**DCL      8222>>ASSIGN   8223>>ASSIGN   8228>>ASSIGN   8230>>ASSIGN
BSNLS
      8149**DCL      8150--DCLINIT
FPMC
      8190**DCL      8199>>ASSIGN
G1PT
      8151**DCL      8199<<ASSIGN
G1PT.CTRL
      8176**DCL      8215<<ASSIGN   8221<<ASSIGN   8237<<ASSIGN   8249<<ASSIGN   8258<<ASSIGN   8272<<ASSIGN
G1PT.RPN
      8171**DCL      8172--REDEF    8216<<ASSIGN   8217<<ASSIGN   8222<<ASSIGN   8223<<ASSIGN   8238<<ASSIGN
      8239<<ASSIGN   8250<<ASSIGN   8251<<ASSIGN   8259<<ASSIGN   8260<<ASSIGN   8273<<ASSIGN   8274<<ASSIGN
G1PT.SCTRL
      8173**DCL      8174--REDEF    8214<<ASSIGN   8220<<ASSIGN   8236<<ASSIGN   8248<<ASSIGN   8257<<ASSIGN
      8271<<ASSIGN
HDRGD.BASE
      5687**DCL      8259>>ASSIGN   8260>>ASSIGN
HDRGD.DA
      5688**DCL      5689--REDEF
HDRGD.SIZE
      5692**DCL      8253>>ASSIGN
HDRGP.BASE
      5698**DCL      8273>>ASSIGN   8274>>ASSIGN
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:86   
HDRGP.DA
      5699**DCL      5700--REDEF
HDRGP.SIZE
      5703**DCL      8267>>ASSIGN
HDRGP.START
      5705**DCL      8229>>ASSIGN
I
      8192**DCL      8198<<DOINDEX  8199>>ASSIGN   8218<<DOINDEX  8219>>ASSIGN   8220>>ASSIGN   8221>>ASSIGN
      8222>>ASSIGN   8223>>ASSIGN   8233<<ASSIGN   8236>>ASSIGN   8237>>ASSIGN   8238>>ASSIGN   8238>>ASSIGN
      8239>>ASSIGN   8239>>ASSIGN   8241<<ASSIGN   8241>>ASSIGN   8245>>ASSIGN   8254<<ASSIGN   8257>>ASSIGN
      8258>>ASSIGN   8259>>ASSIGN   8259>>ASSIGN   8260>>ASSIGN   8260>>ASSIGN   8262<<ASSIGN   8262>>ASSIGN
      8266>>ASSIGN   8271>>ASSIGN   8272>>ASSIGN   8273>>ASSIGN   8274>>ASSIGN   8276<<ASSIGN   8276>>ASSIGN
INFOX$
      5707**DCL      5719--REDEF    8151--IMP-PTR  8199>>ASSIGN   8214>>ASSIGN   8215>>ASSIGN   8216>>ASSIGN
      8217>>ASSIGN   8220>>ASSIGN   8221>>ASSIGN   8222>>ASSIGN   8223>>ASSIGN   8236>>ASSIGN   8237>>ASSIGN
      8238>>ASSIGN   8239>>ASSIGN   8248>>ASSIGN   8249>>ASSIGN   8250>>ASSIGN   8251>>ASSIGN   8257>>ASSIGN
      8258>>ASSIGN   8259>>ASSIGN   8260>>ASSIGN   8271>>ASSIGN   8272>>ASSIGN   8273>>ASSIGN   8274>>ASSIGN
INFOX_PTR
      5719**DCL      8196<<ASSIGN
INFOX_PTR.S_D_FIELD
      5723**DCL      8197<<ASSIGN
INFOY$
      5726**DCL      5404--IMP-PTR  5738--REDEF    5764--IMP-PTR  8204>>ASSIGN   8205>>ASSIGN   8206>>ASSIGN
      8207>>ASSIGN   8209>>ASSIGN   8210>>ASSIGN   8212>>ASSIGN   8227>>ASSIGN   8228>>ASSIGN   8229>>ASSIGN
      8245>>ASSIGN   8266>>ASSIGN   8281>>ASSIGN   8283>>ASSIGN   8285>>ASSIGN   8287>>ASSIGN   8288>>ASSIGN
      8288>>ASSIGN   8288>>ASSIGN   8289>>ASSIGN   8289>>ASSIGN   8290>>ASSIGN   8290>>ASSIGN   8290>>ASSIGN
      8291>>ASSIGN   8291>>ASSIGN   8292>>ASSIGN   8292>>ASSIGN   8293>>ASSIGN   8294>>ASSIGN   8294>>ASSIGN
      8295>>ASSIGN   8297>>ASSIGN   8298>>ASSIGN   8299>>ASSIGN   8301>>ASSIGN   8302>>ASSIGN   8303>>ASSIGN
      8304>>ASSIGN   8305>>ASSIGN   8306>>ASSIGN   8307>>ASSIGN   8308>>ASSIGN   8309>>ASSIGN
INFOY_PTR
      5738**DCL      8202<<ASSIGN   8225<<ASSIGN
INFOY_PTR.S_D_FIELD
      5742**DCL      8203<<ASSIGN   8226<<ASSIGN
INITGD1
      8256**LABEL    8263--GOTO
INITGP1
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:87   
      8270**LABEL    8278--GOTO
INITGR1
      8235**LABEL    8242--GOTO
J
      8193**DCL      8219<<ASSIGN   8222>>ASSIGN   8223>>ASSIGN   8228>>ASSIGN   8230>>ASSIGN   8232<<ASSIGN
      8235>>IF       8240<<ASSIGN   8240>>ASSIGN   8253<<ASSIGN   8256>>IF       8261<<ASSIGN   8261>>ASSIGN
      8267<<ASSIGN   8270>>IF       8275<<ASSIGN   8275>>ASSIGN
K
      8194**DCL      8268<<ASSIGN   8273>>ASSIGN   8274>>ASSIGN   8277<<ASSIGN   8277>>ASSIGN   8281>>ASSIGN
PAG_PPC
      8183**DCL      8284<<ASSIGN
PAG_PPH
      8181**DCL      8252<<ASSIGN   8283>>ASSIGN   8284>>ASSIGN
PAG_PPT
      8182**DCL      8230<<ASSIGN   8283>>ASSIGN   8284>>ASSIGN
RPM_FLG
      8189**DCL      8207>>IF
S1000_FLG
      8187**DCL      8208>>IF       8216>>IF       8222>>IF       8238>>IF       8250>>IF       8259>>IF
      8273>>IF
WS0PT.RPN
      5813**DCL      5814--REDEF    8209>>ASSIGN   8210>>ASSIGN   8216>>ASSIGN   8222>>ASSIGN   8238>>ASSIGN
      8250>>ASSIGN   8259>>ASSIGN   8273>>ASSIGN
WS0PT.SCTRL
      5815**DCL      5816--REDEF
WS0PT$
      5745**DCL      5757--REDEF    5793--IMP-PTR  8209>>ASSIGN   8210>>ASSIGN   8216>>ASSIGN   8222>>ASSIGN
      8238>>ASSIGN   8250>>ASSIGN   8259>>ASSIGN   8273>>ASSIGN
WSPTD
      5764**DCL      8204<<ASSIGN
WSPTD.BLKNO
      5784**DCL      8207<<ASSIGN   8209<<ASSIGN   8210<<ASSIGN   8212<<ASSIGN
WSPTD.NBLKS
      5789**DCL      8206<<ASSIGN
WSPTD.P
      5786**DCL      8205<<ASSIGN
PL6.E3A0      #002=INIT1 File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:88   
XA_MODE
      8188**DCL      8209>>IF

PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:89   
      410        1        /*T***********************************************************/
      411        2        /*T*                                                         */
      412        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      413        4        /*T*                                                         */
      414        5        /*T***********************************************************/
      415        6        INITP:  PROC;
      416        7        /*F*   NAME:   INITP
      417        8               PURPOSE:  Build MM_PPUT and for and DPS90 the Physical->Real map
      418        9        */
      419       10        /*D*   NAME:     INITP
      420       11               CALL:     CALL INITP;
      421       12               ENVIRONMENT: AARDVARK Linkage Segment
      422       13               INPUT:    None
      423       14               OUTPUT:   None
      424       15               DESCRIPTION:
      425       16                  This routine is called to build PPUT and the DPS90
      426       17                  Physical to real map.  It uses IS_PPUT_SIZE to determine how
      427       18                  big PPUT should be.  PPUT is initially
      428       19                  all zeroes.  The GHOST1 pages are marked as user pages and
      429       20                  user number is set to 1.  On all hardware except the DPS800,
      430       21                  all pages in the range NAVPG/1024 to IS_PPUT_SIZE are marked free
      431       22                  and linked together.  On the DPS8000 if there is no gap in
      432       23                  Physical memory (GAP_SZ = 0), then PPUT is build in the same
      433       24                  manner as other hardware.  If there is a gap, the pages in
      434       25                  the range, NAVPG/1024 to the upper bound of low memory are
      435       26                  set to free and linked together along with the pages in the
      436       27                  range high memory lower bound to HIAVPG.  The pages in the
      437       28                  gap, low memory upper bound to high memory lower bound are
      438       29                  marked as STOLEN with a user number of 511. On DPS90 hardware
      439       30                  the Physical to Real map is also build.  On DPS8000,
      440       31                  IS_PPUT_SIZE includes memory that has been released.
      441       32        */
      442       33        /**/
      443       34
      444       35        %INCLUDE IS$MACROS;
      445     1310        %INCLUDE MM_DATA_R;
      446     1830        /**/
PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:90   
      447     1831    1   DCL INFOX$ PTR;
      448     1832        %PTR_STRUCT(NAME=INFOX_PTR,STCLASS="REDEF INFOX$");
      449     1850    1   DCL 1 WS0PT(0:0) ALIGNED BASED(WS0PT$), /* WS0 PT                             */
      450     1851        %PTW(LVL=2);
      451     1879    1   DCL WS0PT$ PTR SYMREF;
      452     1880    1   DCL IPHY_MAP(0:0) BASED(INFOX$) SBIN HALF HALIGNED;
      453     1881    1   DCL HIPAGE UBIN WORD SYMREF;
      454     1882    1   DCL HIAVPG UBIN WORD SYMREF;            /* Highest avail page on S1000        */
      455     1883    1   DCL IS_PPUT_SIZE UBIN WORD SYMREF;      /* size of pput usually HIPAGE        */
      456     1884    1   DCL PHYMEM_SZ UBIN WORD SYMREF;         /* Size of Physical mem for S1000     */
      457     1885    1   DCL IPHYPG UBIN WORD SYMREF;            /* Address of Physical->Real map      */
      458     1886    1   DCL B$IPHYMAP$ PTR STATIC SYMDEF;
      459     1887    1   DCL NAVPG UBIN WORD SYMREF;
      460     1888    1   DCL PAG_PPH UBIN HALF SYMREF;           /* Physical page head of GHOST1       */
      461     1889    1   DCL PAG_PPT UBIN HALF SYMREF;           /* Physical page tail of GHOST1       */
      462     1890    1   DCL S1000_FLG BIT(1) SYMREF;
      463     1891    1   DCL GAP_SZ UBIN WORD SYMREF;            /*Size of the eventual gap on RPM*/
      464     1892    1   DCL 1 LOWER_SCU SYMREF,
      465     1893    1         2 LOW_BND UBIN WORD,
      466     1894    1         2 UPP_BND UBIN WORD;
      467     1895    1   DCL 1 UPPER_SCU SYMREF,
      468     1896    1         2 LOW_BND UBIN WORD,
      469     1897    1         2 UPP_BND UBIN WORD;
      470     1898    1   DCL I UBIN WORD;
      471     1899        /**/
      472     1900    1           INFOX_PTR='0'B;
      473     1901    1           INFOX_PTR.S_D_FIELD=%ALS_PPUT;  /* Frame PPUT                         */
      474     1902        /* Clean the table */
      475     1903    2           DO I=0 TO IS_PPUT_SIZE-1;
      476     1904    2             INFOX$->MM$PPUT(I)='0'B;
      477     1905    2           END;                            /* DO I=                              */
      478     1906        /* Do GHOST1 pages */
      479     1907    2           DO I=0 TO PAG_PPT-PAG_PPH;
      480     1908    2             INFOX$->MM$PPUT.USER(PAG_PPH+I)='1'B; /* User page                  */
      481     1909    2             INFOX$->MM$PPUT.USER#(PAG_PPH+I)=1; /* User#                        */
      482     1910    2           END;                            /* DO I=                              */
      483     1911        /* Do free pages */
PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:91   
      484     1912    2           IF GAP_SZ~=0 THEN DO;           /* We are on RPM and we have a gap    */
      485     1913    3                 DO I=NAVPG/1024 TO LOWER_SCU.UPP_BND-1;
      486     1914    3                   INFOX$->MM$PPUT.FREE(I)='1'B;
      487     1915    3                   INFOX$->MM$PPUT.PPNO(I)=I+1; /* Next available page           */
      488     1916    3                 END;
      489     1917    2                 INFOX$->MM$PPUT.FREE(LOWER_SCU.UPP_BND)='1'B;
      490     1918    2                 INFOX$->MM$PPUT.PPNO(LOWER_SCU.UPP_BND)=UPPER_SCU.LOW_BND;
      491     1919                                                /* Do the gap                         */
      492     1920    3                 DO I=LOWER_SCU.UPP_BND+1 TO UPPER_SCU.LOW_BND-1;
      493     1921    3                   INFOX$->MM$PPUT.STOLEN(I)='1'B;
      494     1922    3                   INFOX$->MM$PPUT.USER#(I)=511; /* Convention for the gap       */
      495     1923    3                 END;
      496     1924    3                 DO I=UPPER_SCU.LOW_BND TO HIAVPG-1;
      497     1925    3                   INFOX$->MM$PPUT.FREE(I)='1'B;
      498     1926    3                   INFOX$->MM$PPUT.PPNO(I)=I+1; /* Next available page           */
      499     1927    3                 END;
      500     1928    2               END;
      501     1929    2             ELSE DO I=NAVPG/1024 TO HIAVPG-1;
      502     1930    2                 INFOX$->MM$PPUT.FREE(I)='1'B; /* Page free                      */
      503     1931    2                 INFOX$->MM$PPUT.PPNO(I)=I+1; /* Next available page             */
      504     1932    2               END;                        /* DO I=                              */
      505     1933    2           IF IS_PPUT_SIZE > HIPAGE THEN DO;
      506     1934    3                 DO I = UPPER_SCU.LOW_BND TO UPPER_SCU.UPP_BND;
      507     1935    3                   INFOX$->MM$PPUT.STOLEN(I) = '1'B;
      508     1936    3                   INFOX$->MM$PPUT.USER#(I) = 511;
      509     1937    3                 END;
      510     1938    2               END;
      511     1939        /* Do the tail */
      512     1940    1           INFOX$->MM$PPUT.FREE(HIAVPG)='1'B;
      513     1941    1           IF S1000_FLG='0'B THEN RETURN;
      514     1942    1             ELSE;
      515     1943    1           INFOX_PTR.S_D_FIELD=%ALS_AIS;
      516     1944    1           INFOX_PTR.WOFFS=IPHYPG;         /* Frame map                          */
      517     1945    2           DO I=0 TO PHYMEM_SZ;
      518     1946    2             IPHY_MAP(I)=-1;               /* Free pattern                       */
      519     1947    2           END;                            /* DO I=                              */
      520     1948    2           DO I=0 TO IS_PPUT_SIZE;
PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:92   
      521     1949    2             IPHY_MAP(WS0PT.RPN(I))=I;
      522     1950    2           END;                            /* DO I=                              */
      523     1951
      524     1952    1           B$IPHYMAP$ = INFOX$;
      525     1953    1           RETURN;
      526     1954    1   END INITP;
      527     1955        %EOD;

PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:93   
--  Include file information  --

   MM_MACRO_M.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   MM$SYSGEN.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   MM_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure INITP.

   Procedure INITP requires 181 words for executable code.
   Procedure INITP requires 8 words of local(AUTO) storage.

PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:94   

 Object Unit name= INITP                                      File name= ISI$MM.:E05TOU
 UTS= JUL 29 '97 22:55:35.08 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none     1      1  INITP
    1   Proc  even  none   181    265  INITP
    2  RoData even  none     1      1  INITP

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes            yes      Std        0  INITP

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    0      0  B$IPHYMAP$

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET
                       Std       0 B_CONSPOOL_D
PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:95   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    MM_BYP$                               WS0PT$                                HIPAGE
     HIAVPG                                IS_PPUT_SIZE                          PHYMEM_SZ
     IPHYPG                                NAVPG                                 PAG_PPH
     PAG_PPT                               S1000_FLG                             GAP_SZ
     LOWER_SCU                             UPPER_SCU                             B_VECTNIL
PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:96   


      410        1        /*T***********************************************************/
      411        2        /*T*                                                         */
      412        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      413        4        /*T*                                                         */
      414        5        /*T***********************************************************/
      415        6        INITP:  PROC;

      6  1 000000   000000 700200 xent  INITP        TSX0  ! X66_AUTO_0
         1 000001   000010 000000                    ZERO    8,0

      416        7        /*F*   NAME:   INITP
      417        8               PURPOSE:  Build MM_PPUT and for and DPS90 the Physical->Real map
      418        9        */
      419       10        /*D*   NAME:     INITP
      420       11               CALL:     CALL INITP;
      421       12               ENVIRONMENT: AARDVARK Linkage Segment
      422       13               INPUT:    None
      423       14               OUTPUT:   None
      424       15               DESCRIPTION:
      425       16                  This routine is called to build PPUT and the DPS90
      426       17                  Physical to real map.  It uses IS_PPUT_SIZE to determine how
      427       18                  big PPUT should be.  PPUT is initially
      428       19                  all zeroes.  The GHOST1 pages are marked as user pages and
      429       20                  user number is set to 1.  On all hardware except the DPS800,
      430       21                  all pages in the range NAVPG/1024 to IS_PPUT_SIZE are marked free
      431       22                  and linked together.  On the DPS8000 if there is no gap in
      432       23                  Physical memory (GAP_SZ = 0), then PPUT is build in the same
      433       24                  manner as other hardware.  If there is a gap, the pages in
      434       25                  the range, NAVPG/1024 to the upper bound of low memory are
      435       26                  set to free and linked together along with the pages in the
      436       27                  range high memory lower bound to HIAVPG.  The pages in the
      437       28                  gap, low memory upper bound to high memory lower bound are
      438       29                  marked as STOLEN with a user number of 511. On DPS90 hardware
      439       30                  the Physical to Real map is also build.  On DPS8000,
      440       31                  IS_PPUT_SIZE includes memory that has been released.
      441       32        */
PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:97   
      442       33        /**/
      443       34
      444       35        %INCLUDE IS$MACROS;
      445     1310        %INCLUDE MM_DATA_R;
      446     1830        /**/
      447     1831    1   DCL INFOX$ PTR;
      448     1832        %PTR_STRUCT(NAME=INFOX_PTR,STCLASS="REDEF INFOX$");
      449     1850    1   DCL 1 WS0PT(0:0) ALIGNED BASED(WS0PT$), /* WS0 PT                             */
      450     1851        %PTW(LVL=2);
      451     1879    1   DCL WS0PT$ PTR SYMREF;
      452     1880    1   DCL IPHY_MAP(0:0) BASED(INFOX$) SBIN HALF HALIGNED;
      453     1881    1   DCL HIPAGE UBIN WORD SYMREF;
      454     1882    1   DCL HIAVPG UBIN WORD SYMREF;            /* Highest avail page on S1000        */
      455     1883    1   DCL IS_PPUT_SIZE UBIN WORD SYMREF;      /* size of pput usually HIPAGE        */
      456     1884    1   DCL PHYMEM_SZ UBIN WORD SYMREF;         /* Size of Physical mem for S1000     */
      457     1885    1   DCL IPHYPG UBIN WORD SYMREF;            /* Address of Physical->Real map      */
      458     1886    1   DCL B$IPHYMAP$ PTR STATIC SYMDEF;
      459     1887    1   DCL NAVPG UBIN WORD SYMREF;
      460     1888    1   DCL PAG_PPH UBIN HALF SYMREF;           /* Physical page head of GHOST1       */
      461     1889    1   DCL PAG_PPT UBIN HALF SYMREF;           /* Physical page tail of GHOST1       */
      462     1890    1   DCL S1000_FLG BIT(1) SYMREF;
      463     1891    1   DCL GAP_SZ UBIN WORD SYMREF;            /*Size of the eventual gap on RPM*/
      464     1892    1   DCL 1 LOWER_SCU SYMREF,
      465     1893    1         2 LOW_BND UBIN WORD,
      466     1894    1         2 UPP_BND UBIN WORD;
      467     1895    1   DCL 1 UPPER_SCU SYMREF,
      468     1896    1         2 LOW_BND UBIN WORD,
      469     1897    1         2 UPP_BND UBIN WORD;
      470     1898    1   DCL I UBIN WORD;
      471     1899        /**/
      472     1900    1           INFOX_PTR='0'B;

   1900  1 000002   200003 450100                    STZ     INFOX$,,AUTO

      473     1901    1           INFOX_PTR.S_D_FIELD=%ALS_PPUT;  /* Frame PPUT                         */

   1901  1 000003   006003 236007                    LDQ     3075,DL
PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:98   
         1 000004   200003 752103                    STCQ    INFOX$,'03'O,AUTO

      474     1902        /* Clean the table */
      475     1903    2           DO I=0 TO IS_PPUT_SIZE-1;

   1903  1 000005   200004 450100                    STZ     I,,AUTO
         1 000006   000015 710000 1                  TRA     s:1905+3

      476     1904    2             INFOX$->MM$PPUT(I)='0'B;

   1904  1 000007   200003 470500                    LDP0    INFOX$,,AUTO
         1 000010   200004 720100                    LXL0    I,,AUTO
         1 000011   000000 450110                    STZ     0,X0,PR0

      477     1905    2           END;                            /* DO I=                              */

   1905  1 000012   200004 235100                    LDA     I,,AUTO
         1 000013   000001 035007                    ADLA    1,DL
         1 000014   200004 755100                    STA     I,,AUTO
         1 000015   200004 236100                    LDQ     I,,AUTO
         1 000016   000000 116000 xsym               CMPQ    IS_PPUT_SIZE
         1 000017   000007 602000 1                  TNC     s:1904

      478     1906        /* Do GHOST1 pages */
      479     1907    2           DO I=0 TO PAG_PPT-PAG_PPH;

   1907  1 000020   200004 450100                    STZ     I,,AUTO
         1 000021   000044 710000 1                  TRA     s:1910+3

      480     1908    2             INFOX$->MM$PPUT.USER(PAG_PPH+I)='1'B; /* User page                  */

   1908  1 000022   000000 236000 xsym               LDQ     PAG_PPH
         1 000023   000022 772000                    QRL     18
         1 000024   200004 036100                    ADLQ    I,,AUTO
         1 000025   200003 470500                    LDP0    INFOX$,,AUTO
         1 000026   000000 620006                    EAX0    0,QL
         1 000027   020000 236003                    LDQ     8192,DU
PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:99   
         1 000030   000000 256110                    ORSQ    0,X0,PR0

      481     1909    2             INFOX$->MM$PPUT.USER#(PAG_PPH+I)=1; /* User#                        */

   1909  1 000031   000000 236000 xsym               LDQ     PAG_PPH
         1 000032   000022 772000                    QRL     18
         1 000033   200004 036100                    ADLQ    I,,AUTO
         1 000034   000000 620006                    EAX0    0,QL
         1 000035   000000 236106                    LDQ     0,QL,PR0
         1 000036   000000 376000 2                  ANQ     0
         1 000037   000001 276003                    ORQ     1,DU
         1 000040   000000 756110                    STQ     0,X0,PR0

      482     1910    2           END;                            /* DO I=                              */

   1910  1 000041   200004 235100                    LDA     I,,AUTO
         1 000042   000001 035007                    ADLA    1,DL
         1 000043   200004 755100                    STA     I,,AUTO
         1 000044   000000 235000 xsym               LDA     PAG_PPH
         1 000045   000022 771000                    ARL     18
         1 000046   200006 755100                    STA     I+2,,AUTO
         1 000047   000000 236000 xsym               LDQ     PAG_PPT
         1 000050   000022 772000                    QRL     18
         1 000051   200006 136100                    SBLQ    I+2,,AUTO
         1 000052   000055 604000 1                  TMI     s:1912
         1 000053   200004 116100                    CMPQ    I,,AUTO
         1 000054   000022 603000 1                  TRC     s:1908

      483     1911        /* Do free pages */
      484     1912    2           IF GAP_SZ~=0 THEN DO;           /* We are on RPM and we have a gap    */

   1912  1 000055   000000 236000 xsym               LDQ     GAP_SZ
         1 000056   000146 600000 1                  TZE     s:1929

      485     1913    3                 DO I=NAVPG/1024 TO LOWER_SCU.UPP_BND-1;

   1913  1 000057   000000 236000 xsym               LDQ     NAVPG
PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:100  
         1 000060   000012 772000                    QRL     10
         1 000061   200004 756100                    STQ     I,,AUTO
         1 000062   000074 710000 1                  TRA     s:1916+3

      486     1914    3                   INFOX$->MM$PPUT.FREE(I)='1'B;

   1914  1 000063   200003 470500                    LDP0    INFOX$,,AUTO
         1 000064   200004 720100                    LXL0    I,,AUTO
         1 000065   040000 236003                    LDQ     16384,DU
         1 000066   000000 256110                    ORSQ    0,X0,PR0

      487     1915    3                   INFOX$->MM$PPUT.PPNO(I)=I+1; /* Next available page           */

   1915  1 000067   000001 621010                    EAX1    1,X0
         1 000070   000000 441110                    SXL1    0,X0,PR0

      488     1916    3                 END;

   1916  1 000071   200004 235100                    LDA     I,,AUTO
         1 000072   000001 035007                    ADLA    1,DL
         1 000073   200004 755100                    STA     I,,AUTO
         1 000074   200004 236100                    LDQ     I,,AUTO
         1 000075   000001 116000 xsym               CMPQ    LOWER_SCU+1
         1 000076   000063 602000 1                  TNC     s:1914

      489     1917    2                 INFOX$->MM$PPUT.FREE(LOWER_SCU.UPP_BND)='1'B;

   1917  1 000077   200003 470500                    LDP0    INFOX$,,AUTO
         1 000100   000001 720000 xsym               LXL0    LOWER_SCU+1
         1 000101   040000 236003                    LDQ     16384,DU
         1 000102   000000 256110                    ORSQ    0,X0,PR0

      490     1918    2                 INFOX$->MM$PPUT.PPNO(LOWER_SCU.UPP_BND)=UPPER_SCU.LOW_BND;

   1918  1 000103   000000 720000 xsym               LXL0    UPPER_SCU
         1 000104   000001 721000 xsym               LXL1    LOWER_SCU+1
         1 000105   000000 440111                    SXL0    0,X1,PR0
PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:101  

      491     1919                                                /* Do the gap                         */
      492     1920    3                 DO I=LOWER_SCU.UPP_BND+1 TO UPPER_SCU.LOW_BND-1;

   1920  1 000106   000001 235000 xsym               LDA     LOWER_SCU+1
         1 000107   000001 035007                    ADLA    1,DL
         1 000110   200004 755100                    STA     I,,AUTO
         1 000111   000123 710000 1                  TRA     s:1923+3

      493     1921    3                   INFOX$->MM$PPUT.STOLEN(I)='1'B;

   1921  1 000112   200003 470500                    LDP0    INFOX$,,AUTO
         1 000113   200004 720100                    LXL0    I,,AUTO
         1 000114   002000 236003                    LDQ     1024,DU
         1 000115   000000 256110                    ORSQ    0,X0,PR0

      494     1922    3                   INFOX$->MM$PPUT.USER#(I)=511; /* Convention for the gap       */

   1922  1 000116   000777 236003                    LDQ     511,DU
         1 000117   000000 256110                    ORSQ    0,X0,PR0

      495     1923    3                 END;

   1923  1 000120   200004 235100                    LDA     I,,AUTO
         1 000121   000001 035007                    ADLA    1,DL
         1 000122   200004 755100                    STA     I,,AUTO
         1 000123   200004 236100                    LDQ     I,,AUTO
         1 000124   000000 116000 xsym               CMPQ    UPPER_SCU
         1 000125   000112 602000 1                  TNC     s:1921

      496     1924    3                 DO I=UPPER_SCU.LOW_BND TO HIAVPG-1;

   1924  1 000126   000000 235000 xsym               LDA     UPPER_SCU
         1 000127   200004 755100                    STA     I,,AUTO
         1 000130   000142 710000 1                  TRA     s:1927+3

      497     1925    3                   INFOX$->MM$PPUT.FREE(I)='1'B;
PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:102  

   1925  1 000131   200003 470500                    LDP0    INFOX$,,AUTO
         1 000132   200004 720100                    LXL0    I,,AUTO
         1 000133   040000 236003                    LDQ     16384,DU
         1 000134   000000 256110                    ORSQ    0,X0,PR0

      498     1926    3                   INFOX$->MM$PPUT.PPNO(I)=I+1; /* Next available page           */

   1926  1 000135   000001 621010                    EAX1    1,X0
         1 000136   000000 441110                    SXL1    0,X0,PR0

      499     1927    3                 END;

   1927  1 000137   200004 235100                    LDA     I,,AUTO
         1 000140   000001 035007                    ADLA    1,DL
         1 000141   200004 755100                    STA     I,,AUTO
         1 000142   200004 236100                    LDQ     I,,AUTO
         1 000143   000000 116000 xsym               CMPQ    HIAVPG
         1 000144   000131 602000 1                  TNC     s:1925

      500     1928    2               END;

   1928  1 000145   000166 710000 1                  TRA     s:1933

      501     1929    2             ELSE DO I=NAVPG/1024 TO HIAVPG-1;

   1929  1 000146   000000 236000 xsym               LDQ     NAVPG
         1 000147   000012 772000                    QRL     10
         1 000150   200004 756100                    STQ     I,,AUTO
         1 000151   000163 710000 1                  TRA     s:1932+3

      502     1930    2                 INFOX$->MM$PPUT.FREE(I)='1'B; /* Page free                      */

   1930  1 000152   200003 470500                    LDP0    INFOX$,,AUTO
         1 000153   200004 720100                    LXL0    I,,AUTO
         1 000154   040000 236003                    LDQ     16384,DU
         1 000155   000000 256110                    ORSQ    0,X0,PR0
PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:103  

      503     1931    2                 INFOX$->MM$PPUT.PPNO(I)=I+1; /* Next available page             */

   1931  1 000156   000001 621010                    EAX1    1,X0
         1 000157   000000 441110                    SXL1    0,X0,PR0

      504     1932    2               END;                        /* DO I=                              */

   1932  1 000160   200004 235100                    LDA     I,,AUTO
         1 000161   000001 035007                    ADLA    1,DL
         1 000162   200004 755100                    STA     I,,AUTO
         1 000163   200004 236100                    LDQ     I,,AUTO
         1 000164   000000 116000 xsym               CMPQ    HIAVPG
         1 000165   000152 602000 1                  TNC     s:1930

      505     1933    2           IF IS_PPUT_SIZE > HIPAGE THEN DO;

   1933  1 000166   000000 236000 xsym               LDQ     HIPAGE
         1 000167   000000 116000 xsym               CMPQ    IS_PPUT_SIZE
         1 000170   000210 603000 1                  TRC     s:1940

      506     1934    3                 DO I = UPPER_SCU.LOW_BND TO UPPER_SCU.UPP_BND;

   1934  1 000171   000000 235000 xsym               LDA     UPPER_SCU
         1 000172   200004 755100                    STA     I,,AUTO
         1 000173   000205 710000 1                  TRA     s:1937+3

      507     1935    3                   INFOX$->MM$PPUT.STOLEN(I) = '1'B;

   1935  1 000174   200003 470500                    LDP0    INFOX$,,AUTO
         1 000175   200004 720100                    LXL0    I,,AUTO
         1 000176   002000 236003                    LDQ     1024,DU
         1 000177   000000 256110                    ORSQ    0,X0,PR0

      508     1936    3                   INFOX$->MM$PPUT.USER#(I) = 511;

   1936  1 000200   000777 236003                    LDQ     511,DU
PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:104  
         1 000201   000000 256110                    ORSQ    0,X0,PR0

      509     1937    3                 END;

   1937  1 000202   200004 235100                    LDA     I,,AUTO
         1 000203   000001 035007                    ADLA    1,DL
         1 000204   200004 755100                    STA     I,,AUTO
         1 000205   000001 236000 xsym               LDQ     UPPER_SCU+1
         1 000206   200004 116100                    CMPQ    I,,AUTO
         1 000207   000174 603000 1                  TRC     s:1935

      510     1938    2               END;

      511     1939        /* Do the tail */
      512     1940    1           INFOX$->MM$PPUT.FREE(HIAVPG)='1'B;

   1940  1 000210   200003 470500                    LDP0    INFOX$,,AUTO
         1 000211   000000 720000 xsym               LXL0    HIAVPG
         1 000212   040000 236003                    LDQ     16384,DU
         1 000213   000000 256110                    ORSQ    0,X0,PR0

      513     1941    1           IF S1000_FLG='0'B THEN RETURN;

   1941  1 000214   000000 234000 xsym               SZN     S1000_FLG
         1 000215   000217 604000 1                  TMI     s:1943

   1941  1 000216   000000 702200 xent               TSX2  ! X66_ARET

      514     1942    1             ELSE;
      515     1943    1           INFOX_PTR.S_D_FIELD=%ALS_AIS;

   1943  1 000217   006000 236007                    LDQ     3072,DL
         1 000220   200003 752103                    STCQ    INFOX$,'03'O,AUTO

      516     1944    1           INFOX_PTR.WOFFS=IPHYPG;         /* Frame map                          */

   1944  1 000221   000000 720000 xsym               LXL0    IPHYPG
PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:105  
         1 000222   200003 740100                    STX0    INFOX$,,AUTO

      517     1945    2           DO I=0 TO PHYMEM_SZ;

   1945  1 000223   200004 450100                    STZ     I,,AUTO
         1 000224   000236 710000 1                  TRA     s:1947+3

      518     1946    2             IPHY_MAP(I)=-1;               /* Free pattern                       */

   1946  1 000225   200004 235100                    LDA     I,,AUTO
         1 000226   000001 735000                    ALS     1
         1 000227   200003 470500                    LDP0    INFOX$,,AUTO
         1 000230   000105 101400                    MRL     fill='000'O
         1 000231   000027 000004 xsym               ADSC9   B_VECTNIL+23             cn=0,n=4
         1 000232   000000 000002                    ADSC9   0,A,PR0                  cn=0,n=2

      519     1947    2           END;                            /* DO I=                              */

   1947  1 000233   200004 236100                    LDQ     I,,AUTO
         1 000234   000001 036007                    ADLQ    1,DL
         1 000235   200004 756100                    STQ     I,,AUTO
         1 000236   000000 236000 xsym               LDQ     PHYMEM_SZ
         1 000237   200004 116100                    CMPQ    I,,AUTO
         1 000240   000225 603000 1                  TRC     s:1946

      520     1948    2           DO I=0 TO IS_PPUT_SIZE;

   1948  1 000241   200004 450100                    STZ     I,,AUTO
         1 000242   000257 710000 1                  TRA     s:1950+3

      521     1949    2             IPHY_MAP(WS0PT.RPN(I))=I;

   1949  1 000243   000000 470400 xsym               LDP0    WS0PT$
         1 000244   200004 720100                    LXL0    I,,AUTO
         1 000245   000000 236110                    LDQ     0,X0,PR0
         1 000246   000022 772000                    QRL     18
         1 000247   000001 736000                    QLS     1
PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:106  
         1 000250   200003 471500                    LDP1    INFOX$,,AUTO
         1 000251   000106 101500                    MRL     fill='000'O
         1 000252   200004 000004                    ADSC9   I,,AUTO                  cn=0,n=4
         1 000253   100000 000002                    ADSC9   0,Q,PR1                  cn=0,n=2

      522     1950    2           END;                            /* DO I=                              */

   1950  1 000254   200004 235100                    LDA     I,,AUTO
         1 000255   000001 035007                    ADLA    1,DL
         1 000256   200004 755100                    STA     I,,AUTO
         1 000257   000000 236000 xsym               LDQ     IS_PPUT_SIZE
         1 000260   200004 116100                    CMPQ    I,,AUTO
         1 000261   000243 603000 1                  TRC     s:1949

      523     1951
      524     1952    1           B$IPHYMAP$ = INFOX$;

   1952  1 000262   200003 236100                    LDQ     INFOX$,,AUTO
         1 000263   000000 756000 0                  STQ     B$IPHYMAP$

      525     1953    1           RETURN;

   1953  1 000264   000000 702200 xent               TSX2  ! X66_ARET
      526     1954    1   END INITP;
      527     1955        %EOD;

PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:107  
--  Include file information  --

   MM_MACRO_M.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   MM$SYSGEN.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   MM_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure INITP.
PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:108  

 **** Variables and constants ****

  ****  Section 000  Data  INITP

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$IPHYMAP$

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w UBIN        r     1 I                          3-0-0/w PTR         r     1 INFOX$
     3-0-0/w STRC        r     1 INFOX_PTR

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w UBIN        r     1 GAP_SZ                     0-0-0/w UBIN        r     1 HIAVPG
     0-0-0/w UBIN        r     1 HIPAGE                     0-0-0/w UBIN        r     1 IPHYPG
     0-0-0/w UBIN        r     1 IS_PPUT_SIZE               0-0-0/w STRC(72)    r     1 LOWER_SCU
     0-0-0/w PTR         r     1 MM_BYP$                    0-0-0/w UBIN        r     1 NAVPG
     0-0-0/w UBIN(18)    r     1 PAG_PPH                    0-0-0/w UBIN(18)    r     1 PAG_PPT
     0-0-0/w UBIN        r     1 PHYMEM_SZ                  0-0-0/b BIT         r     1 S1000_FLG
     0-0-0/w STRC(72)    r     1 UPPER_SCU                  0-0-0/w PTR         r     1 WS0PT$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/h SBIN(18)    r     1 IPHY_MAP(0:0)
     0-0-0/w STRC        r     1 MM$PPUT(0:0)
PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:109  
     0-0-0/w STRC        r     1 WS0PT(0:0)


   Procedure INITP requires 181 words for executable code.
   Procedure INITP requires 8 words of local(AUTO) storage.
PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:110  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:111  
          MINI XREF LISTING

B$IPHYMAP$
      1886**DCL      1952<<ASSIGN
GAP_SZ
      1891**DCL      1912>>IF
HIAVPG
      1882**DCL      1924>>DOINDEX  1929>>DOINDEX  1940>>ASSIGN
HIPAGE
      1881**DCL      1933>>IF
I
      1898**DCL      1903<<DOINDEX  1904>>ASSIGN   1907<<DOINDEX  1908>>ASSIGN   1909>>ASSIGN   1913<<DOINDEX
      1914>>ASSIGN   1915>>ASSIGN   1915>>ASSIGN   1920<<DOINDEX  1921>>ASSIGN   1922>>ASSIGN   1924<<DOINDEX
      1925>>ASSIGN   1926>>ASSIGN   1926>>ASSIGN   1929<<DOINDEX  1930>>ASSIGN   1931>>ASSIGN   1931>>ASSIGN
      1934<<DOINDEX  1935>>ASSIGN   1936>>ASSIGN   1945<<DOINDEX  1946>>ASSIGN   1948<<DOINDEX  1949>>ASSIGN
      1949>>ASSIGN
INFOX$
      1831**DCL      1843--REDEF    1880--IMP-PTR  1904>>ASSIGN   1908>>ASSIGN   1909>>ASSIGN   1914>>ASSIGN
      1915>>ASSIGN   1917>>ASSIGN   1918>>ASSIGN   1921>>ASSIGN   1922>>ASSIGN   1925>>ASSIGN   1926>>ASSIGN
      1930>>ASSIGN   1931>>ASSIGN   1935>>ASSIGN   1936>>ASSIGN   1940>>ASSIGN   1946>>ASSIGN   1949>>ASSIGN
      1952>>ASSIGN
INFOX_PTR
      1843**DCL      1900<<ASSIGN
INFOX_PTR.S_D_FIELD
      1847**DCL      1901<<ASSIGN   1943<<ASSIGN
INFOX_PTR.WOFFS
      1844**DCL      1944<<ASSIGN
IPHYPG
      1885**DCL      1944>>ASSIGN
IPHY_MAP
      1880**DCL      1946<<ASSIGN   1949<<ASSIGN
IS_PPUT_SIZE
      1883**DCL      1903>>DOINDEX  1933>>IF       1948>>DOINDEX
LOWER_SCU.UPP_BND
PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:112  
      1894**DCL      1913>>DOINDEX  1917>>ASSIGN   1918>>ASSIGN   1920>>DOINDEX
MM$DESC.BOUND
      1781**DCL      1782--REDEF
MM$DESC.FLGS
      1782**DCL      1782--REDEF
MM$PPUT
      1768**DCL      1904<<ASSIGN
MM$PPUT.FREE
      1769**DCL      1914<<ASSIGN   1917<<ASSIGN   1925<<ASSIGN   1930<<ASSIGN   1940<<ASSIGN
MM$PPUT.PPNO
      1770**DCL      1915<<ASSIGN   1918<<ASSIGN   1926<<ASSIGN   1931<<ASSIGN
MM$PPUT.STOLEN
      1769**DCL      1921<<ASSIGN   1935<<ASSIGN
MM$PPUT.USER
      1769**DCL      1908<<ASSIGN
MM$PPUT.USER#
      1770**DCL      1770--REDEF    1909<<ASSIGN   1922<<ASSIGN   1936<<ASSIGN
MM_BYP$
      1701**DCL      1701--IMP-PTR
NAVPG
      1887**DCL      1913>>DOINDEX  1929>>DOINDEX
PAG_PPH
      1888**DCL      1907>>DOINDEX  1908>>ASSIGN   1909>>ASSIGN
PAG_PPT
      1889**DCL      1907>>DOINDEX
PHYMEM_SZ
      1884**DCL      1945>>DOINDEX
S1000_FLG
      1890**DCL      1941>>IF
UPPER_SCU.LOW_BND
      1896**DCL      1918>>ASSIGN   1920>>DOINDEX  1924>>DOINDEX  1934>>DOINDEX
UPPER_SCU.UPP_BND
      1897**DCL      1934>>DOINDEX
WS0PT.RPN
      1870**DCL      1871--REDEF    1949>>ASSIGN
WS0PT.SCTRL
PL6.E3A0      #003=INITP File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:113  
      1872**DCL      1873--REDEF
WS0PT$
      1879**DCL      1850--IMP-PTR  1949>>ASSIGN

PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:114  
      528        1        /*T***********************************************************/
      529        2        /*T*                                                         */
      530        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      531        4        /*T*                                                         */
      532        5        /*T***********************************************************/
      533        6        INITX:  PROC;
      534        7        /* Fix up XDELTA LS */
      535        8        %INCLUDE IS$MACROS;
      536     1283        %INCLUDE B$SS;
      537     1462        %INCLUDE B_STRINGS_C;
      538     1591        %INCLUDE M_INFO_C;
      539     1731        %INCLUDE B_LSDATA_C;
      540     4937        /**/
      541     4938        %B_MLS(STCLASS="BASED(INFOX$)");        /* MON LS                             */
      542     5753    1   DCL 1 AB_MLS(0:0) BASED(INFOX$),        /* MON LS as an array                 */
      543     5754    1         2 BOUND UBIN(20) UNAL,
      544     5755    1         2 FLGS BIT(9),
      545     5756    1         2 WSR UBIN(3) UNAL,
      546     5757    1         2 TYP UBIN(4) UNAL,
      547     5758    1         2 BASE UBIN(36);
      548     5759    1   DCL 1 BAS_LS(0:0) BASED(WSQ3LS$),       /* Copy of MON LS in WSQ3 page        */
      549     5760    1         2 BOUND UBIN(20) UNAL,
      550     5761    1         2 FLGS BIT(9),
      551     5762    1         2 WSR UBIN(3) UNAL,
      552     5763    1         2 TYP UBIN(4) UNAL,
      553     5764    1         2 BASE UBIN(36);
      554     5765    1   DCL INFOX$ PTR;
      555     5766        %PTR_STRUCT(NAME=INFOX_PTR,STCLASS="REDEF INFOX$");
      556     5784    1   DCL INFOY$ PTR;
      557     5785        %PTR_STRUCT(NAME=INFOY_PTR,STCLASS="REDEF INFOY$");
      558     5803    1   DCL EW$ EPTR;
      559     5804        %PTR_STRUCT(NAME=EW_PTR,STCLASS="REDEF EW$");
      560     5822        %AALS(STCLASS="BASED(AALS$)");          /* AARDV LS                           */
      561     8149    1   DCL AALS$ PTR SYMREF;
      562     8150        %DIRHDR(NAME=HDRXIS,STCLASS="SYMREF");
      563     8161        %DIRHDR(NAME=HDRXLS,STCLASS="SYMREF");
      564     8172    1   DCL 1 XDEL_LS(0:0) BASED(XDEL_LS$),     /* XDELTA LS                          */
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:115  
      565     8173    1         2 BOUND UBIN(20) UNAL,
      566     8174    1         2 FLGS BIT(9),
      567     8175    1         2 WSR UBIN(3) UNAL,
      568     8176    1         2 TYP UBIN(4) UNAL,
      569     8177    1         2 BASE UBIN(36);
      570     8178        %PTR_STRUCT(NAME=XDEL_LS_PTR);
      571     8196    1   DCL XDEL_LS$ REDEF XDEL_LS_PTR PTR;
      572     8197        %DESCR(NAME=SSDMONX,STCLASS="SYMREF",LVL=1,LAST=";");
      573     8219        %DESCR(NAME=BAS_DESCR,STCLASS="BASED",LVL=1,LAST=";");
      574     8241    1   DCL WS0PT$ PTR SYMREF;
      575     8242    1   DCL 1 WSPTD(0:28) ALIGNED BASED(INFOY$), /* Directory                         */
      576     8243        %DIRW(LVL=2);
      577     8271    1   DCL 1 MONPT(0:0) ALIGNED BASED(INFOX$), /* MON PT                             */
      578     8272        %PTW(LVL=2);
      579     8300    1   DCL 1 WS0PT(0:0) ALIGNED BASED(WS0PT$), /* WS0 PT                             */
      580     8301        %PTW(LVL=2);
      581     8329    1   DCL 1 WSQ3PT(0:0) ALIGNED BASED(WSQ3PT$), /* WSQ3 PT                          */
      582     8330        %PTW(LVL=2);
      583     8358        %PTR_STRUCT(NAME=WSQ3PT_PTR);
      584     8376    1   DCL WSQ3PT$ REDEF WSQ3PT_PTR PTR;
      585     8377    1   DCL WSQ3LS$ PTR;                        /* Pointer to second page of WSQ3     */
      586     8378        %PTR_STRUCT(NAME=SSR_PTR);
      587     8396    1   DCL SSR$ REDEF SSR_PTR PTR;
      588     8397        %TEXTC(N#=DELTAQM,M#="' Do you want XDELTA (Y/N) ?'");
      589     8402        %TEXTC(N#=NIANS,M#="'N'");
      590     8407    1   DCL XDFLAG UBIN WORD SYMREF;
      591     8408    1   DCL BX0 BIT(18) HALIGNED STATIC INIT('400000'O); /* Val of X0 in ret frame    */
      592     8409    1   DCL UX0 REDEF BX0 UBIN HALF UNAL;
      593     8410        /**/
      594     8411    1   DCL AAFLTD BIT(72) SYMREF;
      595     8412    1   DCL RCV_FLG BIT(4) SYMREF;
      596     8413    1   DCL 1 ANSBUF SYMREF,
      597     8414    1         2 CNT UBIN WORD,
      598     8415    1         2 TXT CHAR(16);
      599     8416    1   DCL FLTSW UBIN WORD SYMREF;
      600     8417    1   DCL WSQ3PG UBIN WORD SYMREF;
      601     8418    1   DCL IPHYPG UBIN WORD SYMREF;
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:116  
      602     8419    1   DCL PHYMEM_SZ UBIN WORD SYMREF;
      603     8420    1   DCL S1000_FLG BIT(1) SYMREF;
      604     8421    1   DCL XA_MODE BIT(1) SYMREF;
      605     8422    1   DCL RPM_FLG BIT(1) SYMREF;
      606     8423        /**/
      607     8424    1   DCL PREPRE ENTRY;
      608     8425    1   DCL IRR$RECOVER ENTRY;
      609     8426    1   DCL KEYINX ENTRY(3);
      610     8427    1   DCL LOAD_SSR ENTRY(1);
      611     8428    1   DCL MYSELFX ENTRY;
      612     8429    1   DCL MYSELFM ENTRY;
      613     8430        /**/
      614     8431    1   DCL I UBIN WORD;
      615     8432    1   DCL 1 ENTLOC,
      616     8433    1         2 IC UBIN(18) UNAL,
      617     8434    1         2 * BIT(54);
      618     8435        /**/
      619     8436        /* Fix up XDELTA LS and SSS*/
      620     8437    1           XDEL_LS_PTR.WOFFS=HDRXLS.BASE;  /* Frame XDELTA LS                    */
      621     8438    1           INFOX_PTR='0'B;
      622     8439    1           INFOX_PTR.S_D_FIELD=%ALS_HJIT;  /* Frame MON LS                       */
      623     8440    1           B_MLS.AARDV=AAFLTD;             /* AARDVARK fault entry descriptor    */
      624     8441    1           EW$=ENTADDR(PREPRE);
      625     8442    1           B_MLS.AARDV.ENTLOC=EW_PTR.WOFFS;
      626     8443    1           B_MLS.RCVENT=AAFLTD;            /* AARDVARK fault entry descriptor    */
      627     8444    1           EW$=ENTADDR(IRR$RECOVER);
      628     8445    1           B_MLS.RCVENT.ENTLOC=EW_PTR.WOFFS;
      629     8446    1           B_MLS.AARDV2=AALS.DESCMI;       /* real MON ISR                       */
      630     8447    1           B_MLS.WSQ0PT.BASE=AALS.DESCWS#0.BASE; /* WS0 PT descriptor            */
      631     8448    1           B_MLS.WSQ0PT.BOUND=AALS.DESCWS#0.BOUND;
      632     8449    1           B_MLS.PPUT.BASE=AALS.DESCPPUT.BASE; /* PPUT descriptor                */
      633     8450    1           B_MLS.PPUT.BOUND=AALS.DESCPPUT.BOUND;
      634     8451    1           B_MLS.IPHY_MAP.BASE=IPHYPG*4;   /* Physical->Real map                 */
      635     8452    1           B_MLS.IPHY_MAP.BOUND=PHYMEM_SZ*4+3;
      636     8453        /* Build an entry descriptor in MOM LS for AARDVARK's CLIMB */
      637     8454    1           ENTLOC=AAFLTD;
      638     8455    1           EW$=ENTADDR(MYSELFM);
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:117  
      639     8456    1           ENTLOC.IC=EW_PTR.WOFFS;
      640     8457    1           B_MLS.MINIQ_ENT=ENTLOC;
      641     8458        /**/
      642     8459    1           IF HDRXIS.BASE=0 THEN RETURN;   /* No XDELTA                          */
      643     8460    1             ELSE;
      644     8461    2           IF RCV_FLG~='0'B THEN DO;
      645     8462    2   INITX0:
      646     8463    2                 CALL KEYINX(DELTAQM,ANSBUF,NIANS);
      647     8464    3                 DO SELECT(SUBSTR(ANSBUF.TXT,0,1));
      648     8465    3                   SELECT('Y','y');
      649     8466    3                   XDFLAG=1;
      650     8467    3                   SELECT('N','n');
      651     8468    3                   SELECT(ELSE);
      652     8469    3                 GOTO INITX0;
      653     8470    3                 END;                      /* DO SELECT                          */
      654     8471    2               END;                        /* THEN                               */
      655     8472    2             ELSE DO;                      /* TB                                 */
      656     8473    2                 FLTSW=0;                  /* Zap fault handler                  */
      657     8474    2                 XDEL_LS.BASE(%XL_ISR)=XDEL_LS.BASE(%XL_ISR)+HDRXIS.BASE*4;
      658     8475    2                 XDEL_LS.BOUND(%XL_ISR)=(HDRXIS.SIZE-1)*4+3;
      659     8476    2                 XDEL_LS.BASE(%XL_LSR)=XDEL_LS.BASE(%XL_LSR)+XDEL_LS_PTR.WOFFS*4;
      660     8477    2                 XDEL_LS.BASE(%XL_SSR)=XDEL_LS.BASE(%XL_SSR)+XDEL_LS_PTR.WOFFS*4;
      661     8478    2                 XDEL_LS.BASE(%XL_IPHY)=IPHYPG*4; /* Physical->real map          */
      662     8479    2                 XDEL_LS.BOUND(%XL_IPHY)=PHYMEM_SZ*4+3;
      663     8480    2               END;                        /* ELSE                               */
      664     8481    1   INITX4:
      665     8482        /* Move base and bound */
      666     8483    1           XDEL_LS.BASE(%XL_ENT)=AALS.DESCENT.BASE;
      667     8484    1           XDEL_LS.BOUND(%XL_ENT)=AALS.DESCENT.BOUND;
      668     8485    1           XDEL_LS.BASE(%XL_SYM)=AALS.DESCSYM.BASE;
      669     8486    1           XDEL_LS.BOUND(%XL_SYM)=AALS.DESCSYM.BOUND;
      670     8487    1           XDEL_LS.BASE(%XL_DEF)=AALS.DESCDEF.BASE;
      671     8488    1           XDEL_LS.BOUND(%XL_DEF)=AALS.DESCDEF.BOUND;
      672     8489    1           XDEL_LS.BASE(%XL_SCH)=AALS.DESCSCH.BASE;
      673     8490    1           XDEL_LS.BOUND(%XL_SCH)=AALS.DESCSCH.BOUND;
      674     8491    1           XDEL_LS.BASE(%XL_SCH0)=AALS.DESCSCH0.BASE;
      675     8492    1           XDEL_LS.BOUND(%XL_SCH0)=AALS.DESCSCH0.BOUND;
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:118  
      676     8493    1           XDEL_LS.BASE(%XL_SCH1)=AALS.DESCSCH1.BASE;
      677     8494    1           XDEL_LS.BOUND(%XL_SCH1)=AALS.DESCSCH1.BOUND;
      678     8495    1           XDEL_LS.BASE(%XL_SCH2)=AALS.DESCSCH2.BASE;
      679     8496    1           XDEL_LS.BOUND(%XL_SCH2)=AALS.DESCSCH2.BOUND;
      680     8497    1           XDEL_LS.BASE(%XL_SCH3)=AALS.DESCSCH3.BASE;
      681     8498    1           XDEL_LS.BOUND(%XL_SCH3)=AALS.DESCSCH3.BOUND;
      682     8499    1           XDEL_LS.BASE(%XL_SCH4)=AALS.DESCSCH4.BASE;
      683     8500    1           XDEL_LS.BOUND(%XL_SCH4)=AALS.DESCSCH4.BOUND;
      684     8501    1           XDEL_LS.BASE(%XL_SCH5)=AALS.DESCSCH5.BASE;
      685     8502    1           XDEL_LS.BOUND(%XL_SCH5)=AALS.DESCSCH5.BOUND;
      686     8503    1           XDEL_LS.BASE(%XL_SCH6)=AALS.DESCSCH6.BASE;
      687     8504    1           XDEL_LS.BOUND(%XL_SCH6)=AALS.DESCSCH6.BOUND;
      688     8505    1           XDEL_LS.BASE(%XL_SCH7)=AALS.DESCSCH7.BASE;
      689     8506    1           XDEL_LS.BOUND(%XL_SCH7)=AALS.DESCSCH7.BOUND;
      690     8507    1           XDEL_LS.BASE(%XL_SCH8)=AALS.DESCSCH8.BASE;
      691     8508    1           XDEL_LS.BOUND(%XL_SCH8)=AALS.DESCSCH8.BOUND;
      692     8509    1           XDEL_LS.BASE(%XL_SCH9)=AALS.DESCSCH9.BASE;
      693     8510    1           XDEL_LS.BOUND(%XL_SCH9)=AALS.DESCSCH9.BOUND;
      694     8511    1           XDEL_LS.BASE(%XL_SCH10)=AALS.DESCSCH10.BASE;
      695     8512    1           XDEL_LS.BOUND(%XL_SCH10)=AALS.DESCSCH10.BOUND;
      696     8513    1           XDEL_LS.BASE(%XL_SCH11)=AALS.DESCSCH11.BASE;
      697     8514    1           XDEL_LS.BOUND(%XL_SCH11)=AALS.DESCSCH11.BOUND;
      698     8515    1           XDEL_LS.BASE(%XL_ASCH)=AALS.DESCASCH.BASE;
      699     8516    1           XDEL_LS.BOUND(%XL_ASCH)=AALS.DESCASCH.BOUND;
      700     8517    1           XDEL_LS.BASE(%XL_ASCH0)=AALS.DESCASCH0.BASE;
      701     8518    1           XDEL_LS.BOUND(%XL_ASCH0)=AALS.DESCASCH0.BOUND;
      702     8519    1           XDEL_LS.BASE(%XL_ASCH1)=AALS.DESCASCH1.BASE;
      703     8520    1           XDEL_LS.BOUND(%XL_ASCH1)=AALS.DESCASCH1.BOUND;
      704     8521    1           XDEL_LS.BASE(%XL_ASCH2)=AALS.DESCASCH2.BASE;
      705     8522    1           XDEL_LS.BOUND(%XL_ASCH2)=AALS.DESCASCH2.BOUND;
      706     8523    1           XDEL_LS.BASE(%XL_ASCH3)=AALS.DESCASCH3.BASE;
      707     8524    1           XDEL_LS.BOUND(%XL_ASCH3)=AALS.DESCASCH3.BOUND;
      708     8525    1           XDEL_LS.BASE(%XL_ASCH4)=AALS.DESCASCH4.BASE;
      709     8526    1           XDEL_LS.BOUND(%XL_ASCH4)=AALS.DESCASCH4.BOUND;
      710     8527    1           XDEL_LS.BASE(%XL_ASCH5)=AALS.DESCASCH5.BASE;
      711     8528    1           XDEL_LS.BOUND(%XL_ASCH5)=AALS.DESCASCH5.BOUND;
      712     8529    1           XDEL_LS.BASE(%XL_ASCH6)=AALS.DESCASCH6.BASE;
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:119  
      713     8530    1           XDEL_LS.BOUND(%XL_ASCH6)=AALS.DESCASCH6.BOUND;
      714     8531    1           XDEL_LS.BASE(%XL_ASCH7)=AALS.DESCASCH7.BASE;
      715     8532    1           XDEL_LS.BOUND(%XL_ASCH7)=AALS.DESCASCH7.BOUND;
      716     8533    1           XDEL_LS.BASE(%XL_ASCH8)=AALS.DESCASCH8.BASE;
      717     8534    1           XDEL_LS.BOUND(%XL_ASCH8)=AALS.DESCASCH8.BOUND;
      718     8535    1           XDEL_LS.BASE(%XL_ASCH9)=AALS.DESCASCH9.BASE;
      719     8536    1           XDEL_LS.BOUND(%XL_ASCH9)=AALS.DESCASCH9.BOUND;
      720     8537    1           XDEL_LS.BASE(%XL_ASCH10)=AALS.DESCASCH10.BASE;
      721     8538    1           XDEL_LS.BOUND(%XL_ASCH10)=AALS.DESCASCH10.BOUND;
      722     8539    1           XDEL_LS.BASE(%XL_ASCH11)=AALS.DESCASCH11.BASE;
      723     8540    1           XDEL_LS.BOUND(%XL_ASCH11)=AALS.DESCASCH11.BOUND;
      724     8541    1           XDEL_LS.BASE(%XL_ENT1)=AALS.DESCENT1.BASE;
      725     8542    1           XDEL_LS.BOUND(%XL_ENT1)=AALS.DESCENT1.BOUND;
      726     8543    1           XDEL_LS.BASE(%XL_SYM1)=AALS.DESCSYM1.BASE;
      727     8544    1           XDEL_LS.BOUND(%XL_SYM1)=AALS.DESCSYM1.BOUND;
      728     8545    1           XDEL_LS.BASE(%XL_DEF1)=AALS.DESCDEF1.BASE;
      729     8546    1           XDEL_LS.BOUND(%XL_DEF1)=AALS.DESCDEF1.BOUND;
      730     8547    1           XDEL_LS.BASE(%XL_DEFDIR)=AALS.DESCDDIR.BASE;
      731     8548    1           XDEL_LS.BOUND(%XL_DEFDIR)=AALS.DESCDDIR.BOUND;
      732     8549    1           XDEL_LS.BASE(%XL_SEGTBL)=AALS.DESCSGT.BASE;
      733     8550    1           XDEL_LS.BOUND(%XL_SEGTBL)=AALS.DESCSGT.BOUND;
      734     8551    2           IF RCV_FLG='0'B THEN DO;
      735     8552    2                 XDEL_LS(%XL_MINIQ)=AALS.AARDIS;
      736     8553    2                 XDEL_LS(%XL_MSS)=SSDMONX; /* Initial SSR descriptor             */
      737     8554        /* Build an entry descriptor in XDELTA LS */
      738     8555    2                 ENTLOC=AAFLTD;
      739     8556    2                 EW$=ENTADDR(MYSELFX);
      740     8557    2                 ENTLOC.IC=EW_PTR.WOFFS;
      741     8558    2                 XDEL_LS(%XL_AENT)=ENTLOC;
      742     8559        /**/
      743     8560    2                 SSR_PTR.WOFFS=XDEL_LS.BASE(%XL_SSR)/4-16; /* Base of overflow frame */
      744     8561    2                 SSR$->B$SS.ISR=XDEL_LS(%XL_ISR); /* Copy XDELTA ISR descriptor  */
      745     8562    2                 PINCRW(SSR$,16)->B$SS.ISR=XDEL_LS(%XL_ISR);
              8562                          /* Copy XDELTA ISR descriptor */
      746     8563    2                 SSR$->B$SS.LSR.BASE=XDEL_LS.BASE(%XL_LSR);
      747     8564    2                 PINCRW(SSR$,16)->B$SS.LSR.BASE=XDEL_LS.BASE(%XL_LSR);
      748     8565    2                 XDFLAG=XDFLAG+1;
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:120  
      749     8566    2                 PINCRW(SSR$,16)->B$SS.X0=UX0;
      750     8567    3                 IF S1000_FLG THEN DO;
      751     8568    3                       IF XA_MODE THEN PINCRW(SSR$,16)->B$SS.X1=5;
              8568                                /*S1000 AND XA mode */
      752     8569    3                         ELSE
      753     8570    3                         PINCRW(SSR$,16)->B$SS.X1=4;
              8570                                  /* Tell XDELTA we are on S1000 BASIC */
      754     8571    3                     END;
      755     8572    2                   ELSE
      756     8573    2                   IF RPM_FLG THEN
      757     8574    2                     PINCRW(SSR$,16)->B$SS.X1= 6; /* Tell XDELTA we are on RPM*/
      758     8575    2                     ELSE PINCRW(SSR$,16)->B$SS.X1=0; /* All other CPUS          */
      759     8576    2                 CALL LOAD_SSR(XDEL_LS(%XL_SSR));
      760     8577    2                 PINCRW(SSR$,16)->B$SS.IC=HDRXIS.START; /* Start address of XDELTA */
      761     8578    2               END;                        /* THEN                               */
      762     8579    1             ELSE;
      763     8580        /* Set up WSQ3 PT in WSQ3PG for user DELTA */
      764     8581    1   INITX3:
      765     8582    1           INFOX_PTR.S_D_FIELD=%ALS_MPGTBL; /* Frame MON PT                      */
      766     8583    1           WSQ3PT_PTR.WOFFS=WSQ3PG;
      767     8584    2           DO I=0 TO 1023;
      768     8585    2             WSQ3PT(I)=MONPT(I);
      769     8586    2             WSQ3PT.CTRL(I)=WSQ3PT.CTRL(I)&'67'O|%PGWRITE;
              8586                      /* Turn off housekeeping bit and on write bit */
      770     8587    2           END;                            /* DO I=                              */
      771     8588        /* Make page 0 to point at itself */
      772     8589    1           WSQ3PT(0)='0'B;
      773     8590    1           WSQ3PT.SCTRL(0)=%SCUSER;
      774     8591    1           WSQ3PT.CTRL(0)=%PGINMEM|%PGWRITE|%PGHKEEP|%PGIOM;
      775     8592    1           IF S1000_FLG='1'B THEN WSQ3PT.RPN(0)=WS0PT.RPN(WSQ3PG/1024);
      776     8593    1             ELSE WSQ3PT.RPN(0)=WSQ3PG/1024;
      777     8594    1           INFOY_PTR='0'B;
      778     8595    1           INFOY_PTR.S_D_FIELD=%ALS_MONIS; /* Frame directory                    */
      779     8596    1           IF RPM_FLG THEN WSPTD.BLKNO(%UDELWSQ)=WSQ3PG/1024;
      780     8597    2             ELSE IF S1000_FLG='1'B THEN DO;
      781     8598    2                   IF XA_MODE THEN WSPTD.BLKNO(%UDELWSQ)=WS0PT.RPN(WSQ3PG/1024);
      782     8599    2                     ELSE WSPTD.BLKNO(%UDELWSQ)=WS0PT.RPN(WSQ3PG/1024)*16;
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:121  
      783     8600    2                 END;                      /* THEN                               */
      784     8601    1               ELSE WSPTD.BLKNO(%UDELWSQ)=WSQ3PG/64;
      785     8602        /* Map page 1 too */
      786     8603    1           WSQ3PT(1)=WSQ3PT(0);
      787     8604    1           IF S1000_FLG='1'B THEN WSQ3PT.RPN(1)=WS0PT.RPN(WSQ3PG/1024+1);
              8604                    /* Bump page by 1 */
      788     8605    1             ELSE WSQ3PT.RPN(1)=WSQ3PG/1024+1;
      789     8606        /* Set up MLS IS words 0-255 of page 2 in WSQ3
      790     8607           with WSR=1 for user DELTA           */
      791     8608        /* Set up another copy in words 256-511
      792     8609           of page 2 of WSQ3 with write flag off      */
      793     8610    1           INFOX_PTR.S_D_FIELD=%ALS_HJIT;
      794     8611    1           WSQ3LS$=PINCRW(WSQ3PT$,1024);   /* Pointer to page 2                  */
      795     8612    2           DO I=0 TO 127;
      796     8613    2             BAS_LS(I)=AB_MLS(I);/* A MON LS descriptor->page 2 of WSQ3 0-255    */
      797     8614    2             IF(BAS_LS.WSR(I)=0 OR BAS_LS.WSR(I)=1) AND
      798     8615    3               (BAS_LS.TYP(I)=0 OR BAS_LS.TYP(I)=1) THEN DO CASE(I);
      799     8616    3                   CASE(0,13,35,36,40,43);
              8616                      /* ISR,Privileged ISR,MON JIT,  MON HJIT,ISR bypass cache,Arg Stack */
      800     8617    3                     BAS_LS.FLGS(I)=BAS_LS.FLGS(I)&'700'O; /* Make it            */
      801     8618    3                     BAS_LS.WSR(I)=3;      /*  WSQN3                             */
      802     8619    3                     IF BAS_LS.TYP(I)=0 THEN BAS_LS.TYP(I)=2;
      803     8620    3                       ELSE BAS_LS.TYP(I)=3; /* And type 2 or 3                  */
      804     8621    3                   CASE(ELSE);
      805     8622    3                     BAS_LS.WSR(I)=1;      /* Make it WSR1                       */
      806     8623    3                 END;                      /* DO CASE                            */
      807     8624    2               ELSE;
      808     8625        /* Make a second copy in words 256-511 with write bit off */
      809     8626    2             PINCRW(WSQ3LS$,256)->BAS_LS(I)=BAS_LS(I);
      810     8627    2             PINCRW(WSQ3LS$,256)->BAS_LS.FLGS(I)=
      811     8628    2               PINCRW(WSQ3LS$,256)->BAS_LS.FLGS(I)&'577'O;
      812     8629    2           END;                            /* DO I=                              */
      813     8630        /* Set maximum bound for DS1 to DS8 */
      814     8631    2           DO I=4 TO 11;         /* DS1 is the 4'th entry in LS; loop to DS7     */
      815     8632    2             BAS_LS.BOUND(I)=BAS_LS.BASE(I+1)-BAS_LS.BASE(I)-1;
      816     8633    2             BAS_LS.FLGS(I)=BAS_LS.FLGS(I)|'703'O; /* R+W+S                      */
      817     8634        /* and make the copy with write bit off */
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:122  
      818     8635    2             PINCRW(WSQ3LS$,256)->BAS_LS(I)=BAS_LS(I);
      819     8636    2             PINCRW(WSQ3LS$,256)->BAS_LS.FLGS(I)=
      820     8637    2               PINCRW(WSQ3LS$,256)->BAS_LS.FLGS(I)&'577'O;
      821     8638    2           END;                            /* DO I=                              */
      822     8639        /* Do DS8 */
      823     8640    1           BAS_LS.BOUND(11)=48*1024*4-1;   /* Bound 48 Kw                        */
      824     8641    1           BAS_LS.FLGS(11)=BAS_LS.FLGS(11)|'703'O; /* R+W+S                      */
      825     8642        /* and make the copy with write bit off */
      826     8643    1           PINCRW(WSQ3LS$,256)->BAS_LS(11)=BAS_LS(11);
      827     8644    1           PINCRW(WSQ3LS$,256)->BAS_LS.FLGS(11)=
      828     8645    1             PINCRW(WSQ3LS$,256)->BAS_LS.FLGS(11)&'577'O;
      829     8646    1           RETURN;
      830     8647    1   END INITX;
      831     8648        %EOD;

PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:123  
--  Include file information  --

   B_MLSMAC_C.:E05TOU  is referenced.
   B_ULSMAC_C.:E05TOU  is referenced.
   B_LSDATA_C.:E05TOU  cannot be made into a system file and is referenced.
   M_INFO_C.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   B$SS.:E05TOU  cannot be made into a system file and is referenced.
   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure INITX.

   Procedure INITX requires 702 words for executable code.
   Procedure INITX requires 12 words of local(AUTO) storage.

PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:124  

 Object Unit name= INITX                                      File name= ISI$MM.:E05TOU
 UTS= JUL 29 '97 22:55:41.52 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none    14     16  INITX
    1   Proc  even  none   702   1276  INITX
    2  RoData even  none     8     10  INITX

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes            yes      Std        0  INITX

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    0      0  XDEL_LS_PTR                        0      1  WSQ3PT_PTR
    0      2  SSR_PTR                            0      3  DELTAQM
    0     13  NIANS
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:125  

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       0 PREPRE
         yes           Std       0 MYSELFX
         yes           Std       0 IRR$RECOVER
         yes           Std       0 MYSELFM
         yes           Std       3 KEYINX
         yes           Std       1 LOAD_SSR
                       nStd      0 X66_AUTO_0
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     AALS$                                 HDRXIS                                HDRXLS
     SSDMONX                               WS0PT$                                XDFLAG
     AAFLTD                                RCV_FLG                               ANSBUF
     FLTSW                                 WSQ3PG                                IPHYPG
     PHYMEM_SZ                             S1000_FLG                             XA_MODE
     RPM_FLG                               B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:126  


      528        1        /*T***********************************************************/
      529        2        /*T*                                                         */
      530        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      531        4        /*T*                                                         */
      532        5        /*T***********************************************************/
      533        6        INITX:  PROC;

      6  1 000000   000000 700200 xent  INITX        TSX0  ! X66_AUTO_0
         1 000001   000014 000000                    ZERO    12,0

      534        7        /* Fix up XDELTA LS */
      535        8        %INCLUDE IS$MACROS;
      536     1283        %INCLUDE B$SS;
      537     1462        %INCLUDE B_STRINGS_C;
      538     1591        %INCLUDE M_INFO_C;
      539     1731        %INCLUDE B_LSDATA_C;
      540     4937        /**/
      541     4938        %B_MLS(STCLASS="BASED(INFOX$)");        /* MON LS                             */
      542     5753    1   DCL 1 AB_MLS(0:0) BASED(INFOX$),        /* MON LS as an array                 */
      543     5754    1         2 BOUND UBIN(20) UNAL,
      544     5755    1         2 FLGS BIT(9),
      545     5756    1         2 WSR UBIN(3) UNAL,
      546     5757    1         2 TYP UBIN(4) UNAL,
      547     5758    1         2 BASE UBIN(36);
      548     5759    1   DCL 1 BAS_LS(0:0) BASED(WSQ3LS$),       /* Copy of MON LS in WSQ3 page        */
      549     5760    1         2 BOUND UBIN(20) UNAL,
      550     5761    1         2 FLGS BIT(9),
      551     5762    1         2 WSR UBIN(3) UNAL,
      552     5763    1         2 TYP UBIN(4) UNAL,
      553     5764    1         2 BASE UBIN(36);
      554     5765    1   DCL INFOX$ PTR;
      555     5766        %PTR_STRUCT(NAME=INFOX_PTR,STCLASS="REDEF INFOX$");
      556     5784    1   DCL INFOY$ PTR;
      557     5785        %PTR_STRUCT(NAME=INFOY_PTR,STCLASS="REDEF INFOY$");
      558     5803    1   DCL EW$ EPTR;
      559     5804        %PTR_STRUCT(NAME=EW_PTR,STCLASS="REDEF EW$");
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:127  
      560     5822        %AALS(STCLASS="BASED(AALS$)");          /* AARDV LS                           */
      561     8149    1   DCL AALS$ PTR SYMREF;
      562     8150        %DIRHDR(NAME=HDRXIS,STCLASS="SYMREF");
      563     8161        %DIRHDR(NAME=HDRXLS,STCLASS="SYMREF");
      564     8172    1   DCL 1 XDEL_LS(0:0) BASED(XDEL_LS$),     /* XDELTA LS                          */
      565     8173    1         2 BOUND UBIN(20) UNAL,
      566     8174    1         2 FLGS BIT(9),
      567     8175    1         2 WSR UBIN(3) UNAL,
      568     8176    1         2 TYP UBIN(4) UNAL,
      569     8177    1         2 BASE UBIN(36);
      570     8178        %PTR_STRUCT(NAME=XDEL_LS_PTR);
      571     8196    1   DCL XDEL_LS$ REDEF XDEL_LS_PTR PTR;
      572     8197        %DESCR(NAME=SSDMONX,STCLASS="SYMREF",LVL=1,LAST=";");
      573     8219        %DESCR(NAME=BAS_DESCR,STCLASS="BASED",LVL=1,LAST=";");
      574     8241    1   DCL WS0PT$ PTR SYMREF;
      575     8242    1   DCL 1 WSPTD(0:28) ALIGNED BASED(INFOY$), /* Directory                         */
      576     8243        %DIRW(LVL=2);
      577     8271    1   DCL 1 MONPT(0:0) ALIGNED BASED(INFOX$), /* MON PT                             */
      578     8272        %PTW(LVL=2);
      579     8300    1   DCL 1 WS0PT(0:0) ALIGNED BASED(WS0PT$), /* WS0 PT                             */
      580     8301        %PTW(LVL=2);
      581     8329    1   DCL 1 WSQ3PT(0:0) ALIGNED BASED(WSQ3PT$), /* WSQ3 PT                          */
      582     8330        %PTW(LVL=2);
      583     8358        %PTR_STRUCT(NAME=WSQ3PT_PTR);
      584     8376    1   DCL WSQ3PT$ REDEF WSQ3PT_PTR PTR;
      585     8377    1   DCL WSQ3LS$ PTR;                        /* Pointer to second page of WSQ3     */
      586     8378        %PTR_STRUCT(NAME=SSR_PTR);
      587     8396    1   DCL SSR$ REDEF SSR_PTR PTR;
      588     8397        %TEXTC(N#=DELTAQM,M#="' Do you want XDELTA (Y/N) ?'");
      589     8402        %TEXTC(N#=NIANS,M#="'N'");
      590     8407    1   DCL XDFLAG UBIN WORD SYMREF;
      591     8408    1   DCL BX0 BIT(18) HALIGNED STATIC INIT('400000'O); /* Val of X0 in ret frame    */
      592     8409    1   DCL UX0 REDEF BX0 UBIN HALF UNAL;
      593     8410        /**/
      594     8411    1   DCL AAFLTD BIT(72) SYMREF;
      595     8412    1   DCL RCV_FLG BIT(4) SYMREF;
      596     8413    1   DCL 1 ANSBUF SYMREF,
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:128  
      597     8414    1         2 CNT UBIN WORD,
      598     8415    1         2 TXT CHAR(16);
      599     8416    1   DCL FLTSW UBIN WORD SYMREF;
      600     8417    1   DCL WSQ3PG UBIN WORD SYMREF;
      601     8418    1   DCL IPHYPG UBIN WORD SYMREF;
      602     8419    1   DCL PHYMEM_SZ UBIN WORD SYMREF;
      603     8420    1   DCL S1000_FLG BIT(1) SYMREF;
      604     8421    1   DCL XA_MODE BIT(1) SYMREF;
      605     8422    1   DCL RPM_FLG BIT(1) SYMREF;
      606     8423        /**/
      607     8424    1   DCL PREPRE ENTRY;
      608     8425    1   DCL IRR$RECOVER ENTRY;
      609     8426    1   DCL KEYINX ENTRY(3);
      610     8427    1   DCL LOAD_SSR ENTRY(1);
      611     8428    1   DCL MYSELFX ENTRY;
      612     8429    1   DCL MYSELFM ENTRY;
      613     8430        /**/
      614     8431    1   DCL I UBIN WORD;
      615     8432    1   DCL 1 ENTLOC,
      616     8433    1         2 IC UBIN(18) UNAL,
      617     8434    1         2 * BIT(54);
      618     8435        /**/
      619     8436        /* Fix up XDELTA LS and SSS*/
      620     8437    1           XDEL_LS_PTR.WOFFS=HDRXLS.BASE;  /* Frame XDELTA LS                    */

   8437  1 000002   000000 720000 xsym               LXL0    HDRXLS
         1 000003   000000 740000 0                  STX0    XDEL_LS_PTR

      621     8438    1           INFOX_PTR='0'B;

   8438  1 000004   200003 450100                    STZ     INFOX$,,AUTO

      622     8439    1           INFOX_PTR.S_D_FIELD=%ALS_HJIT;  /* Frame MON LS                       */

   8439  1 000005   006012 236007                    LDQ     3082,DL
         1 000006   200003 752103                    STCQ    INFOX$,'03'O,AUTO

PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:129  
      623     8440    1           B_MLS.AARDV=AAFLTD;             /* AARDVARK fault entry descriptor    */

   8440  1 000007   200003 470500                    LDP0    INFOX$,,AUTO
         1 000010   000100 100400                    MLR     fill='000'O
         1 000011   000000 000010 xsym               ADSC9   AAFLTD                   cn=0,n=8
         1 000012   000332 000010                    ADSC9   218,,PR0                 cn=0,n=8

      624     8441    1           EW$=ENTADDR(PREPRE);

   8441  1 000013   000000 636000 xent               EAQ     PREPRE
         1 000014   200005 756100                    STQ     EW$,,AUTO

      625     8442    1           B_MLS.AARDV.ENTLOC=EW_PTR.WOFFS;

   8442  1 000015   200005 221100                    LDX1    EW$,,AUTO
         1 000016   000332 741100                    STX1    218,,PR0

      626     8443    1           B_MLS.RCVENT=AAFLTD;            /* AARDVARK fault entry descriptor    */

   8443  1 000017   000100 100400                    MLR     fill='000'O
         1 000020   000000 000010 xsym               ADSC9   AAFLTD                   cn=0,n=8
         1 000021   000262 000010                    ADSC9   178,,PR0                 cn=0,n=8

      627     8444    1           EW$=ENTADDR(IRR$RECOVER);

   8444  1 000022   000000 636000 xent               EAQ     IRR$RECOVER
         1 000023   200005 756100                    STQ     EW$,,AUTO

      628     8445    1           B_MLS.RCVENT.ENTLOC=EW_PTR.WOFFS;

   8445  1 000024   200005 222100                    LDX2    EW$,,AUTO
         1 000025   000262 742100                    STX2    178,,PR0

      629     8446    1           B_MLS.AARDV2=AALS.DESCMI;       /* real MON ISR                       */

   8446  1 000026   000000 471400 xsym               LDP1    AALS$
         1 000027   100120 237100                    LDAQ    80,,PR1
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:130  
         1 000030   000334 757100                    STAQ    220,,PR0

      630     8447    1           B_MLS.WSQ0PT.BASE=AALS.DESCWS#0.BASE; /* WS0 PT descriptor            */

   8447  1 000031   100311 235100                    LDA     201,,PR1
         1 000032   000373 755100                    STA     251,,PR0

      631     8448    1           B_MLS.WSQ0PT.BOUND=AALS.DESCWS#0.BOUND;

   8448  1 000033   100310 236100                    LDQ     200,,PR1
         1 000034   000372 676100                    ERQ     250,,PR0
         1 000035   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000036   000372 656100                    ERSQ    250,,PR0

      632     8449    1           B_MLS.PPUT.BASE=AALS.DESCPPUT.BASE; /* PPUT descriptor                */

   8449  1 000037   100007 235100                    LDA     7,,PR1
         1 000040   000235 755100                    STA     157,,PR0

      633     8450    1           B_MLS.PPUT.BOUND=AALS.DESCPPUT.BOUND;

   8450  1 000041   100006 236100                    LDQ     6,,PR1
         1 000042   000234 676100                    ERQ     156,,PR0
         1 000043   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000044   000234 656100                    ERSQ    156,,PR0

      634     8451    1           B_MLS.IPHY_MAP.BASE=IPHYPG*4;   /* Physical->Real map                 */

   8451  1 000045   000000 236000 xsym               LDQ     IPHYPG
         1 000046   000002 736000                    QLS     2
         1 000047   000375 756100                    STQ     253,,PR0

      635     8452    1           B_MLS.IPHY_MAP.BOUND=PHYMEM_SZ*4+3;

   8452  1 000050   000000 236000 xsym               LDQ     PHYMEM_SZ
         1 000051   000002 736000                    QLS     2
         1 000052   000003 036007                    ADLQ    3,DL
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:131  
         1 000053   000020 736000                    QLS     16
         1 000054   000374 676100                    ERQ     252,,PR0
         1 000055   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000056   000374 656100                    ERSQ    252,,PR0

      636     8453        /* Build an entry descriptor in MOM LS for AARDVARK's CLIMB */
      637     8454    1           ENTLOC=AAFLTD;

   8454  1 000057   000100 100400                    MLR     fill='000'O
         1 000060   000000 000010 xsym               ADSC9   AAFLTD                   cn=0,n=8
         1 000061   200010 000010                    ADSC9   ENTLOC,,AUTO             cn=0,n=8

      638     8455    1           EW$=ENTADDR(MYSELFM);

   8455  1 000062   000000 636000 xent               EAQ     MYSELFM
         1 000063   200005 756100                    STQ     EW$,,AUTO

      639     8456    1           ENTLOC.IC=EW_PTR.WOFFS;

   8456  1 000064   200005 223100                    LDX3    EW$,,AUTO
         1 000065   200010 743100                    STX3    ENTLOC,,AUTO

      640     8457    1           B_MLS.MINIQ_ENT=ENTLOC;

   8457  1 000066   200010 237100                    LDAQ    ENTLOC,,AUTO
         1 000067   000376 757100                    STAQ    254,,PR0

      641     8458        /**/
      642     8459    1           IF HDRXIS.BASE=0 THEN RETURN;   /* No XDELTA                          */

   8459  1 000070   000000 235000 xsym               LDA     HDRXIS
         1 000071   000073 601000 1                  TNZ     s:8461

   8459  1 000072   000000 702200 xent               TSX2  ! X66_ARET

      643     8460    1             ELSE;
      644     8461    2           IF RCV_FLG~='0'B THEN DO;
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:132  

   8461  1 000073   000000 236000 xsym               LDQ     RCV_FLG
         1 000074   740000 316003                    CANQ    -16384,DU
         1 000075   000142 600000 1                  TZE     s:8473

      645     8462    2   INITX0:
      646     8463    2                 CALL KEYINX(DELTAQM,ANSBUF,NIANS);

   8463  1 000076   000000 630400 2     INITX0       EPPR0   0
         1 000077   000021 631400 xsym               EPPR1   B_VECTNIL+17
         1 000100   000000 701000 xent               TSX1    KEYINX
         1 000101   000000 011000                    NOP     0

      647     8464    3                 DO SELECT(SUBSTR(ANSBUF.TXT,0,1));

   8464  1 000102   000001 236000 xsym               LDQ     ANSBUF+1
         1 000103   777000 376003                    ANQ     -512,DU
         1 000104   131000 116003                    CMPQ    45568,DU
         1 000105   000130 602000 1                  TNC     s:8464+22
         1 000106   000001 236000 xsym               LDQ     ANSBUF+1
         1 000107   777000 376003                    ANQ     -512,DU
         1 000110   131000 116003                    CMPQ    45568,DU
         1 000111   000135 600000 1                  TZE     s:8466
         1 000112   000001 236000 xsym               LDQ     ANSBUF+1
         1 000113   777000 376003                    ANQ     -512,DU
         1 000114   171000 116003                    CMPQ    61952,DU
         1 000115   000123 602000 1                  TNC     s:8464+17
         1 000116   000001 236000 xsym               LDQ     ANSBUF+1
         1 000117   777000 376003                    ANQ     -512,DU
         1 000120   171000 116003                    CMPQ    61952,DU
         1 000121   000135 600000 1                  TZE     s:8466
         1 000122   000141 710000 1                  TRA     s:8469
         1 000123   000001 236000 xsym               LDQ     ANSBUF+1
         1 000124   777000 376003                    ANQ     -512,DU
         1 000125   156000 116003                    CMPQ    56320,DU
         1 000126   000141 601000 1                  TNZ     s:8469
         1 000127   000140 710000 1                  TRA     s:8467
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:133  
         1 000130   000001 236000 xsym               LDQ     ANSBUF+1
         1 000131   777000 376003                    ANQ     -512,DU
         1 000132   116000 116003                    CMPQ    39936,DU
         1 000133   000141 601000 1                  TNZ     s:8469
         1 000134   000140 710000 1                  TRA     s:8467

      648     8465    3                   SELECT('Y','y');

      649     8466    3                   XDFLAG=1;

   8466  1 000135   000001 235007                    LDA     1,DL
         1 000136   000000 755000 xsym               STA     XDFLAG
         1 000137   000204 710000 1                  TRA     INITX4

      650     8467    3                   SELECT('N','n');

   8467  1 000140   000204 710000 1                  TRA     INITX4

      651     8468    3                   SELECT(ELSE);

      652     8469    3                 GOTO INITX0;

   8469  1 000141   000076 710000 1                  TRA     INITX0

      653     8470    3                 END;                      /* DO SELECT                          */

      654     8471    2               END;                        /* THEN                               */
      655     8472    2             ELSE DO;                      /* TB                                 */

      656     8473    2                 FLTSW=0;                  /* Zap fault handler                  */

   8473  1 000142   000000 450000 xsym               STZ     FLTSW

      657     8474    2                 XDEL_LS.BASE(%XL_ISR)=XDEL_LS.BASE(%XL_ISR)+HDRXIS.BASE*4;

   8474  1 000143   000000 473400 0                  LDP3    XDEL_LS_PTR
         1 000144   000000 236000 xsym               LDQ     HDRXIS
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:134  
         1 000145   000002 736000                    QLS     2
         1 000146   300001 036100                    ADLQ    1,,PR3
         1 000147   300001 756100                    STQ     1,,PR3

      658     8475    2                 XDEL_LS.BOUND(%XL_ISR)=(HDRXIS.SIZE-1)*4+3;

   8475  1 000150   000002 236000 xsym               LDQ     HDRXIS+2
         1 000151   000002 736000                    QLS     2
         1 000152   000001 136007                    SBLQ    1,DL
         1 000153   000020 736000                    QLS     16
         1 000154   300000 676100                    ERQ     0,,PR3
         1 000155   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000156   300000 656100                    ERSQ    0,,PR3

      659     8476    2                 XDEL_LS.BASE(%XL_LSR)=XDEL_LS.BASE(%XL_LSR)+XDEL_LS_PTR.WOFFS*4;

   8476  1 000157   000000 471400 0                  LDP1    XDEL_LS_PTR
         1 000160   000000 236000 0                  LDQ     XDEL_LS_PTR
         1 000161   777777 376003                    ANQ     -1,DU
         1 000162   000020 772000                    QRL     16
         1 000163   100003 036100                    ADLQ    3,,PR1
         1 000164   100003 756100                    STQ     3,,PR1

      660     8477    2                 XDEL_LS.BASE(%XL_SSR)=XDEL_LS.BASE(%XL_SSR)+XDEL_LS_PTR.WOFFS*4;

   8477  1 000165   000000 236000 0                  LDQ     XDEL_LS_PTR
         1 000166   777777 376003                    ANQ     -1,DU
         1 000167   000020 772000                    QRL     16
         1 000170   100005 036100                    ADLQ    5,,PR1
         1 000171   100005 756100                    STQ     5,,PR1

      661     8478    2                 XDEL_LS.BASE(%XL_IPHY)=IPHYPG*4; /* Physical->real map          */

   8478  1 000172   000000 235000 xsym               LDA     IPHYPG
         1 000173   000002 735000                    ALS     2
         1 000174   100211 755100                    STA     137,,PR1

PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:135  
      662     8479    2                 XDEL_LS.BOUND(%XL_IPHY)=PHYMEM_SZ*4+3;

   8479  1 000175   000000 236000 xsym               LDQ     PHYMEM_SZ
         1 000176   000002 736000                    QLS     2
         1 000177   000003 036007                    ADLQ    3,DL
         1 000200   000020 736000                    QLS     16
         1 000201   100210 676100                    ERQ     136,,PR1
         1 000202   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000203   100210 656100                    ERSQ    136,,PR1

      663     8480    2               END;                        /* ELSE                               */

      664     8481    1   INITX4:
      665     8482        /* Move base and bound */
      666     8483    1           XDEL_LS.BASE(%XL_ENT)=AALS.DESCENT.BASE;

   8483  1 000204   000000 470400 xsym  INITX4       LDP0    AALS$
         1 000205   000033 235100                    LDA     27,,PR0
         1 000206   000000 471400 0                  LDP1    XDEL_LS_PTR
         1 000207   100011 755100                    STA     9,,PR1

      667     8484    1           XDEL_LS.BOUND(%XL_ENT)=AALS.DESCENT.BOUND;

   8484  1 000210   000032 236100                    LDQ     26,,PR0
         1 000211   100010 676100                    ERQ     8,,PR1
         1 000212   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000213   100010 656100                    ERSQ    8,,PR1

      668     8485    1           XDEL_LS.BASE(%XL_SYM)=AALS.DESCSYM.BASE;

   8485  1 000214   000035 235100                    LDA     29,,PR0
         1 000215   100013 755100                    STA     11,,PR1

      669     8486    1           XDEL_LS.BOUND(%XL_SYM)=AALS.DESCSYM.BOUND;

   8486  1 000216   000034 236100                    LDQ     28,,PR0
         1 000217   100012 676100                    ERQ     10,,PR1
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:136  
         1 000220   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000221   100012 656100                    ERSQ    10,,PR1

      670     8487    1           XDEL_LS.BASE(%XL_DEF)=AALS.DESCDEF.BASE;

   8487  1 000222   000037 235100                    LDA     31,,PR0
         1 000223   100015 755100                    STA     13,,PR1

      671     8488    1           XDEL_LS.BOUND(%XL_DEF)=AALS.DESCDEF.BOUND;

   8488  1 000224   000036 236100                    LDQ     30,,PR0
         1 000225   100014 676100                    ERQ     12,,PR1
         1 000226   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000227   100014 656100                    ERSQ    12,,PR1

      672     8489    1           XDEL_LS.BASE(%XL_SCH)=AALS.DESCSCH.BASE;

   8489  1 000230   000041 235100                    LDA     33,,PR0
         1 000231   100017 755100                    STA     15,,PR1

      673     8490    1           XDEL_LS.BOUND(%XL_SCH)=AALS.DESCSCH.BOUND;

   8490  1 000232   000040 236100                    LDQ     32,,PR0
         1 000233   100016 676100                    ERQ     14,,PR1
         1 000234   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000235   100016 656100                    ERSQ    14,,PR1

      674     8491    1           XDEL_LS.BASE(%XL_SCH0)=AALS.DESCSCH0.BASE;

   8491  1 000236   000151 235100                    LDA     105,,PR0
         1 000237   100115 755100                    STA     77,,PR1

      675     8492    1           XDEL_LS.BOUND(%XL_SCH0)=AALS.DESCSCH0.BOUND;

   8492  1 000240   000150 236100                    LDQ     104,,PR0
         1 000241   100114 676100                    ERQ     76,,PR1
         1 000242   000034 376000 xsym               ANQ     B_VECTNIL+28
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:137  
         1 000243   100114 656100                    ERSQ    76,,PR1

      676     8493    1           XDEL_LS.BASE(%XL_SCH1)=AALS.DESCSCH1.BASE;

   8493  1 000244   000153 235100                    LDA     107,,PR0
         1 000245   100117 755100                    STA     79,,PR1

      677     8494    1           XDEL_LS.BOUND(%XL_SCH1)=AALS.DESCSCH1.BOUND;

   8494  1 000246   000152 236100                    LDQ     106,,PR0
         1 000247   100116 676100                    ERQ     78,,PR1
         1 000250   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000251   100116 656100                    ERSQ    78,,PR1

      678     8495    1           XDEL_LS.BASE(%XL_SCH2)=AALS.DESCSCH2.BASE;

   8495  1 000252   000155 235100                    LDA     109,,PR0
         1 000253   100121 755100                    STA     81,,PR1

      679     8496    1           XDEL_LS.BOUND(%XL_SCH2)=AALS.DESCSCH2.BOUND;

   8496  1 000254   000154 236100                    LDQ     108,,PR0
         1 000255   100120 676100                    ERQ     80,,PR1
         1 000256   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000257   100120 656100                    ERSQ    80,,PR1

      680     8497    1           XDEL_LS.BASE(%XL_SCH3)=AALS.DESCSCH3.BASE;

   8497  1 000260   000157 235100                    LDA     111,,PR0
         1 000261   100123 755100                    STA     83,,PR1

      681     8498    1           XDEL_LS.BOUND(%XL_SCH3)=AALS.DESCSCH3.BOUND;

   8498  1 000262   000156 236100                    LDQ     110,,PR0
         1 000263   100122 676100                    ERQ     82,,PR1
         1 000264   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000265   100122 656100                    ERSQ    82,,PR1
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:138  

      682     8499    1           XDEL_LS.BASE(%XL_SCH4)=AALS.DESCSCH4.BASE;

   8499  1 000266   000161 235100                    LDA     113,,PR0
         1 000267   100125 755100                    STA     85,,PR1

      683     8500    1           XDEL_LS.BOUND(%XL_SCH4)=AALS.DESCSCH4.BOUND;

   8500  1 000270   000160 236100                    LDQ     112,,PR0
         1 000271   100124 676100                    ERQ     84,,PR1
         1 000272   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000273   100124 656100                    ERSQ    84,,PR1

      684     8501    1           XDEL_LS.BASE(%XL_SCH5)=AALS.DESCSCH5.BASE;

   8501  1 000274   000163 235100                    LDA     115,,PR0
         1 000275   100127 755100                    STA     87,,PR1

      685     8502    1           XDEL_LS.BOUND(%XL_SCH5)=AALS.DESCSCH5.BOUND;

   8502  1 000276   000162 236100                    LDQ     114,,PR0
         1 000277   100126 676100                    ERQ     86,,PR1
         1 000300   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000301   100126 656100                    ERSQ    86,,PR1

      686     8503    1           XDEL_LS.BASE(%XL_SCH6)=AALS.DESCSCH6.BASE;

   8503  1 000302   000165 235100                    LDA     117,,PR0
         1 000303   100131 755100                    STA     89,,PR1

      687     8504    1           XDEL_LS.BOUND(%XL_SCH6)=AALS.DESCSCH6.BOUND;

   8504  1 000304   000164 236100                    LDQ     116,,PR0
         1 000305   100130 676100                    ERQ     88,,PR1
         1 000306   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000307   100130 656100                    ERSQ    88,,PR1

PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:139  
      688     8505    1           XDEL_LS.BASE(%XL_SCH7)=AALS.DESCSCH7.BASE;

   8505  1 000310   000167 235100                    LDA     119,,PR0
         1 000311   100133 755100                    STA     91,,PR1

      689     8506    1           XDEL_LS.BOUND(%XL_SCH7)=AALS.DESCSCH7.BOUND;

   8506  1 000312   000166 236100                    LDQ     118,,PR0
         1 000313   100132 676100                    ERQ     90,,PR1
         1 000314   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000315   100132 656100                    ERSQ    90,,PR1

      690     8507    1           XDEL_LS.BASE(%XL_SCH8)=AALS.DESCSCH8.BASE;

   8507  1 000316   000171 235100                    LDA     121,,PR0
         1 000317   100135 755100                    STA     93,,PR1

      691     8508    1           XDEL_LS.BOUND(%XL_SCH8)=AALS.DESCSCH8.BOUND;

   8508  1 000320   000170 236100                    LDQ     120,,PR0
         1 000321   100134 676100                    ERQ     92,,PR1
         1 000322   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000323   100134 656100                    ERSQ    92,,PR1

      692     8509    1           XDEL_LS.BASE(%XL_SCH9)=AALS.DESCSCH9.BASE;

   8509  1 000324   000173 235100                    LDA     123,,PR0
         1 000325   100137 755100                    STA     95,,PR1

      693     8510    1           XDEL_LS.BOUND(%XL_SCH9)=AALS.DESCSCH9.BOUND;

   8510  1 000326   000172 236100                    LDQ     122,,PR0
         1 000327   100136 676100                    ERQ     94,,PR1
         1 000330   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000331   100136 656100                    ERSQ    94,,PR1

      694     8511    1           XDEL_LS.BASE(%XL_SCH10)=AALS.DESCSCH10.BASE;
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:140  

   8511  1 000332   000175 235100                    LDA     125,,PR0
         1 000333   100141 755100                    STA     97,,PR1

      695     8512    1           XDEL_LS.BOUND(%XL_SCH10)=AALS.DESCSCH10.BOUND;

   8512  1 000334   000174 236100                    LDQ     124,,PR0
         1 000335   100140 676100                    ERQ     96,,PR1
         1 000336   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000337   100140 656100                    ERSQ    96,,PR1

      696     8513    1           XDEL_LS.BASE(%XL_SCH11)=AALS.DESCSCH11.BASE;

   8513  1 000340   000177 235100                    LDA     127,,PR0
         1 000341   100143 755100                    STA     99,,PR1

      697     8514    1           XDEL_LS.BOUND(%XL_SCH11)=AALS.DESCSCH11.BOUND;

   8514  1 000342   000176 236100                    LDQ     126,,PR0
         1 000343   100142 676100                    ERQ     98,,PR1
         1 000344   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000345   100142 656100                    ERSQ    98,,PR1

      698     8515    1           XDEL_LS.BASE(%XL_ASCH)=AALS.DESCASCH.BASE;

   8515  1 000346   000057 235100                    LDA     47,,PR0
         1 000347   100153 755100                    STA     107,,PR1

      699     8516    1           XDEL_LS.BOUND(%XL_ASCH)=AALS.DESCASCH.BOUND;

   8516  1 000350   000056 236100                    LDQ     46,,PR0
         1 000351   100152 676100                    ERQ     106,,PR1
         1 000352   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000353   100152 656100                    ERSQ    106,,PR1

      700     8517    1           XDEL_LS.BASE(%XL_ASCH0)=AALS.DESCASCH0.BASE;

PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:141  
   8517  1 000354   000201 235100                    LDA     129,,PR0
         1 000355   100155 755100                    STA     109,,PR1

      701     8518    1           XDEL_LS.BOUND(%XL_ASCH0)=AALS.DESCASCH0.BOUND;

   8518  1 000356   000200 236100                    LDQ     128,,PR0
         1 000357   100154 676100                    ERQ     108,,PR1
         1 000360   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000361   100154 656100                    ERSQ    108,,PR1

      702     8519    1           XDEL_LS.BASE(%XL_ASCH1)=AALS.DESCASCH1.BASE;

   8519  1 000362   000203 235100                    LDA     131,,PR0
         1 000363   100157 755100                    STA     111,,PR1

      703     8520    1           XDEL_LS.BOUND(%XL_ASCH1)=AALS.DESCASCH1.BOUND;

   8520  1 000364   000202 236100                    LDQ     130,,PR0
         1 000365   100156 676100                    ERQ     110,,PR1
         1 000366   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000367   100156 656100                    ERSQ    110,,PR1

      704     8521    1           XDEL_LS.BASE(%XL_ASCH2)=AALS.DESCASCH2.BASE;

   8521  1 000370   000205 235100                    LDA     133,,PR0
         1 000371   100161 755100                    STA     113,,PR1

      705     8522    1           XDEL_LS.BOUND(%XL_ASCH2)=AALS.DESCASCH2.BOUND;

   8522  1 000372   000204 236100                    LDQ     132,,PR0
         1 000373   100160 676100                    ERQ     112,,PR1
         1 000374   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000375   100160 656100                    ERSQ    112,,PR1

      706     8523    1           XDEL_LS.BASE(%XL_ASCH3)=AALS.DESCASCH3.BASE;

   8523  1 000376   000207 235100                    LDA     135,,PR0
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:142  
         1 000377   100163 755100                    STA     115,,PR1

      707     8524    1           XDEL_LS.BOUND(%XL_ASCH3)=AALS.DESCASCH3.BOUND;

   8524  1 000400   000206 236100                    LDQ     134,,PR0
         1 000401   100162 676100                    ERQ     114,,PR1
         1 000402   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000403   100162 656100                    ERSQ    114,,PR1

      708     8525    1           XDEL_LS.BASE(%XL_ASCH4)=AALS.DESCASCH4.BASE;

   8525  1 000404   000211 235100                    LDA     137,,PR0
         1 000405   100165 755100                    STA     117,,PR1

      709     8526    1           XDEL_LS.BOUND(%XL_ASCH4)=AALS.DESCASCH4.BOUND;

   8526  1 000406   000210 236100                    LDQ     136,,PR0
         1 000407   100164 676100                    ERQ     116,,PR1
         1 000410   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000411   100164 656100                    ERSQ    116,,PR1

      710     8527    1           XDEL_LS.BASE(%XL_ASCH5)=AALS.DESCASCH5.BASE;

   8527  1 000412   000213 235100                    LDA     139,,PR0
         1 000413   100167 755100                    STA     119,,PR1

      711     8528    1           XDEL_LS.BOUND(%XL_ASCH5)=AALS.DESCASCH5.BOUND;

   8528  1 000414   000212 236100                    LDQ     138,,PR0
         1 000415   100166 676100                    ERQ     118,,PR1
         1 000416   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000417   100166 656100                    ERSQ    118,,PR1

      712     8529    1           XDEL_LS.BASE(%XL_ASCH6)=AALS.DESCASCH6.BASE;

   8529  1 000420   000215 235100                    LDA     141,,PR0
         1 000421   100171 755100                    STA     121,,PR1
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:143  

      713     8530    1           XDEL_LS.BOUND(%XL_ASCH6)=AALS.DESCASCH6.BOUND;

   8530  1 000422   000214 236100                    LDQ     140,,PR0
         1 000423   100170 676100                    ERQ     120,,PR1
         1 000424   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000425   100170 656100                    ERSQ    120,,PR1

      714     8531    1           XDEL_LS.BASE(%XL_ASCH7)=AALS.DESCASCH7.BASE;

   8531  1 000426   000217 235100                    LDA     143,,PR0
         1 000427   100173 755100                    STA     123,,PR1

      715     8532    1           XDEL_LS.BOUND(%XL_ASCH7)=AALS.DESCASCH7.BOUND;

   8532  1 000430   000216 236100                    LDQ     142,,PR0
         1 000431   100172 676100                    ERQ     122,,PR1
         1 000432   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000433   100172 656100                    ERSQ    122,,PR1

      716     8533    1           XDEL_LS.BASE(%XL_ASCH8)=AALS.DESCASCH8.BASE;

   8533  1 000434   000221 235100                    LDA     145,,PR0
         1 000435   100175 755100                    STA     125,,PR1

      717     8534    1           XDEL_LS.BOUND(%XL_ASCH8)=AALS.DESCASCH8.BOUND;

   8534  1 000436   000220 236100                    LDQ     144,,PR0
         1 000437   100174 676100                    ERQ     124,,PR1
         1 000440   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000441   100174 656100                    ERSQ    124,,PR1

      718     8535    1           XDEL_LS.BASE(%XL_ASCH9)=AALS.DESCASCH9.BASE;

   8535  1 000442   000223 235100                    LDA     147,,PR0
         1 000443   100177 755100                    STA     127,,PR1

PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:144  
      719     8536    1           XDEL_LS.BOUND(%XL_ASCH9)=AALS.DESCASCH9.BOUND;

   8536  1 000444   000222 236100                    LDQ     146,,PR0
         1 000445   100176 676100                    ERQ     126,,PR1
         1 000446   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000447   100176 656100                    ERSQ    126,,PR1

      720     8537    1           XDEL_LS.BASE(%XL_ASCH10)=AALS.DESCASCH10.BASE;

   8537  1 000450   000225 235100                    LDA     149,,PR0
         1 000451   100201 755100                    STA     129,,PR1

      721     8538    1           XDEL_LS.BOUND(%XL_ASCH10)=AALS.DESCASCH10.BOUND;

   8538  1 000452   000224 236100                    LDQ     148,,PR0
         1 000453   100200 676100                    ERQ     128,,PR1
         1 000454   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000455   100200 656100                    ERSQ    128,,PR1

      722     8539    1           XDEL_LS.BASE(%XL_ASCH11)=AALS.DESCASCH11.BASE;

   8539  1 000456   000227 235100                    LDA     151,,PR0
         1 000457   100203 755100                    STA     131,,PR1

      723     8540    1           XDEL_LS.BOUND(%XL_ASCH11)=AALS.DESCASCH11.BOUND;

   8540  1 000460   000226 236100                    LDQ     150,,PR0
         1 000461   100202 676100                    ERQ     130,,PR1
         1 000462   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000463   100202 656100                    ERSQ    130,,PR1

      724     8541    1           XDEL_LS.BASE(%XL_ENT1)=AALS.DESCENT1.BASE;

   8541  1 000464   000051 235100                    LDA     41,,PR0
         1 000465   100145 755100                    STA     101,,PR1

      725     8542    1           XDEL_LS.BOUND(%XL_ENT1)=AALS.DESCENT1.BOUND;
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:145  

   8542  1 000466   000050 236100                    LDQ     40,,PR0
         1 000467   100144 676100                    ERQ     100,,PR1
         1 000470   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000471   100144 656100                    ERSQ    100,,PR1

      726     8543    1           XDEL_LS.BASE(%XL_SYM1)=AALS.DESCSYM1.BASE;

   8543  1 000472   000053 235100                    LDA     43,,PR0
         1 000473   100147 755100                    STA     103,,PR1

      727     8544    1           XDEL_LS.BOUND(%XL_SYM1)=AALS.DESCSYM1.BOUND;

   8544  1 000474   000052 236100                    LDQ     42,,PR0
         1 000475   100146 676100                    ERQ     102,,PR1
         1 000476   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000477   100146 656100                    ERSQ    102,,PR1

      728     8545    1           XDEL_LS.BASE(%XL_DEF1)=AALS.DESCDEF1.BASE;

   8545  1 000500   000055 235100                    LDA     45,,PR0
         1 000501   100151 755100                    STA     105,,PR1

      729     8546    1           XDEL_LS.BOUND(%XL_DEF1)=AALS.DESCDEF1.BOUND;

   8546  1 000502   000054 236100                    LDQ     44,,PR0
         1 000503   100150 676100                    ERQ     104,,PR1
         1 000504   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000505   100150 656100                    ERSQ    104,,PR1

      730     8547    1           XDEL_LS.BASE(%XL_DEFDIR)=AALS.DESCDDIR.BASE;

   8547  1 000506   000063 235100                    LDA     51,,PR0
         1 000507   100207 755100                    STA     135,,PR1

      731     8548    1           XDEL_LS.BOUND(%XL_DEFDIR)=AALS.DESCDDIR.BOUND;

PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:146  
   8548  1 000510   000062 236100                    LDQ     50,,PR0
         1 000511   100206 676100                    ERQ     134,,PR1
         1 000512   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000513   100206 656100                    ERSQ    134,,PR1

      732     8549    1           XDEL_LS.BASE(%XL_SEGTBL)=AALS.DESCSGT.BASE;

   8549  1 000514   000313 235100                    LDA     203,,PR0
         1 000515   100205 755100                    STA     133,,PR1

      733     8550    1           XDEL_LS.BOUND(%XL_SEGTBL)=AALS.DESCSGT.BOUND;

   8550  1 000516   000312 236100                    LDQ     202,,PR0
         1 000517   100204 676100                    ERQ     132,,PR1
         1 000520   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 000521   100204 656100                    ERSQ    132,,PR1

      734     8551    2           IF RCV_FLG='0'B THEN DO;

   8551  1 000522   000000 236000 xsym               LDQ     RCV_FLG
         1 000523   740000 316003                    CANQ    -16384,DU
         1 000524   000624 601000 1                  TNZ     INITX3

      735     8552    2                 XDEL_LS(%XL_MINIQ)=AALS.AARDIS;

   8552  1 000525   000000 237100                    LDAQ    0,,PR0
         1 000526   100032 755100                    STA     26,,PR1
         1 000527   100033 756100                    STQ     27,,PR1

      736     8553    2                 XDEL_LS(%XL_MSS)=SSDMONX; /* Initial SSR descriptor             */

   8553  1 000530   000000 237000 xsym               LDAQ    SSDMONX
         1 000531   100026 755100                    STA     22,,PR1
         1 000532   100027 756100                    STQ     23,,PR1

      737     8554        /* Build an entry descriptor in XDELTA LS */
      738     8555    2                 ENTLOC=AAFLTD;
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:147  

   8555  1 000533   000100 100400                    MLR     fill='000'O
         1 000534   000000 000010 xsym               ADSC9   AAFLTD                   cn=0,n=8
         1 000535   200010 000010                    ADSC9   ENTLOC,,AUTO             cn=0,n=8

      739     8556    2                 EW$=ENTADDR(MYSELFX);

   8556  1 000536   000000 636000 xent               EAQ     MYSELFX
         1 000537   200005 756100                    STQ     EW$,,AUTO

      740     8557    2                 ENTLOC.IC=EW_PTR.WOFFS;

   8557  1 000540   200005 220100                    LDX0    EW$,,AUTO
         1 000541   200010 740100                    STX0    ENTLOC,,AUTO

      741     8558    2                 XDEL_LS(%XL_AENT)=ENTLOC;

   8558  1 000542   200010 237100                    LDAQ    ENTLOC,,AUTO
         1 000543   100056 755100                    STA     46,,PR1
         1 000544   100057 756100                    STQ     47,,PR1

      742     8559        /**/
      743     8560    2                SSR_PTR.WOFFS=XDEL_LS.BASE(%XL_SSR)/4-16; /* Base of overflow frame */

   8560  1 000545   100005 236100                    LDQ     5,,PR1
         1 000546   000002 772000                    QRL     2
         1 000547   777760 621006                    EAX1    -16,QL
         1 000550   000002 741000 0                  STX1    SSR_PTR

      744     8561    2                 SSR$->B$SS.ISR=XDEL_LS(%XL_ISR); /* Copy XDELTA ISR descriptor  */

   8561  1 000551   000002 473400 0                  LDP3    SSR_PTR
         1 000552   000100 100500                    MLR     fill='000'O
         1 000553   100000 000010                    ADSC9   0,,PR1                   cn=0,n=8
         1 000554   300010 000010                    ADSC9   8,,PR3                   cn=0,n=8

      745     8562    2                 PINCRW(SSR$,16)->B$SS.ISR=XDEL_LS(%XL_ISR);
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:148  
              8562                          /* Copy XDELTA ISR descriptor */

   8562  1 000555   000100 100500                    MLR     fill='000'O
         1 000556   100000 000010                    ADSC9   0,,PR1                   cn=0,n=8
         1 000557   300030 000010                    ADSC9   24,,PR3                  cn=0,n=8

      746     8563    2                 SSR$->B$SS.LSR.BASE=XDEL_LS.BASE(%XL_LSR);

   8563  1 000560   100003 235100                    LDA     3,,PR1
         1 000561   300015 755100                    STA     13,,PR3

      747     8564    2                 PINCRW(SSR$,16)->B$SS.LSR.BASE=XDEL_LS.BASE(%XL_LSR);

   8564  1 000562   100003 235100                    LDA     3,,PR1
         1 000563   300035 755100                    STA     29,,PR3

      748     8565    2                 XDFLAG=XDFLAG+1;

   8565  1 000564   000000 236000 xsym               LDQ     XDFLAG
         1 000565   000001 036007                    ADLQ    1,DL
         1 000566   000000 756000 xsym               STQ     XDFLAG

      749     8566    2                 PINCRW(SSR$,16)->B$SS.X0=UX0;

   8566  1 000567   000015 222000 0                  LDX2    BX0
         1 000570   300070 742100                    STX2    56,,PR3

      750     8567    3                 IF S1000_FLG THEN DO;

   8567  1 000571   000000 234000 xsym               SZN     S1000_FLG
         1 000572   000603 605000 1                  TPL     s:8573

      751     8568    3                       IF XA_MODE THEN PINCRW(SSR$,16)->B$SS.X1=5;
              8568                                /*S1000 AND XA mode */

   8568  1 000573   000000 234000 xsym               SZN     XA_MODE
         1 000574   000600 605000 1                  TPL     s:8570
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:149  

   8568  1 000575   000005 223003                    LDX3    5,DU
         1 000576   300070 443100                    SXL3    56,,PR3
         1 000577   000612 710000 1                  TRA     s:8576

      752     8569    3                         ELSE
      753     8570    3                         PINCRW(SSR$,16)->B$SS.X1=4;
              8570                                  /* Tell XDELTA we are on S1000 BASIC */

   8570  1 000600   000004 223003                    LDX3    4,DU
         1 000601   300070 443100                    SXL3    56,,PR3

      754     8571    3                     END;

   8571  1 000602   000612 710000 1                  TRA     s:8576

      755     8572    2                   ELSE
      756     8573    2                   IF RPM_FLG THEN

   8573  1 000603   000000 234000 xsym               SZN     RPM_FLG
         1 000604   000610 605000 1                  TPL     s:8575

      757     8574    2                     PINCRW(SSR$,16)->B$SS.X1= 6; /* Tell XDELTA we are on RPM*/

   8574  1 000605   000006 223003                    LDX3    6,DU
         1 000606   300070 443100                    SXL3    56,,PR3
         1 000607   000612 710000 1                  TRA     s:8576

      758     8575    2                     ELSE PINCRW(SSR$,16)->B$SS.X1=0; /* All other CPUS          */

   8575  1 000610   000000 223003                    LDX3    0,DU
         1 000611   300070 443100                    SXL3    56,,PR3

      759     8576    2                 CALL LOAD_SSR(XDEL_LS(%XL_SSR));

   8576  1 000612   000000 236000 0                  LDQ     XDEL_LS_PTR
         1 000613   000004 036003                    ADLQ    4,DU
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:150  
         1 000614   200012 756100                    STQ     ENTLOC+2,,AUTO
         1 000615   200012 630500                    EPPR0   ENTLOC+2,,AUTO
         1 000616   000017 631400 xsym               EPPR1   B_VECTNIL+15
         1 000617   000000 701000 xent               TSX1    LOAD_SSR
         1 000620   000000 011000                    NOP     0

      760     8577    2                 PINCRW(SSR$,16)->B$SS.IC=HDRXIS.START; /* Start address of XDELTA */

   8577  1 000621   000003 720000 xsym               LXL0    HDRXIS+3
         1 000622   000002 470400 0                  LDP0    SSR_PTR
         1 000623   000024 740100                    STX0    20,,PR0

      761     8578    2               END;                        /* THEN                               */

      762     8579    1             ELSE;
      763     8580        /* Set up WSQ3 PT in WSQ3PG for user DELTA */
      764     8581    1   INITX3:
      765     8582    1           INFOX_PTR.S_D_FIELD=%ALS_MPGTBL; /* Frame MON PT                      */

   8582  1 000624   006114 236007       INITX3       LDQ     3148,DL
         1 000625   200003 752103                    STCQ    INFOX$,'03'O,AUTO

      766     8583    1           WSQ3PT_PTR.WOFFS=WSQ3PG;

   8583  1 000626   000000 720000 xsym               LXL0    WSQ3PG
         1 000627   000001 740000 0                  STX0    WSQ3PT_PTR

      767     8584    2           DO I=0 TO 1023;

   8584  1 000630   200007 450100                    STZ     I,,AUTO

      768     8585    2             WSQ3PT(I)=MONPT(I);

   8585  1 000631   200003 470500                    LDP0    INFOX$,,AUTO
         1 000632   200007 720100                    LXL0    I,,AUTO
         1 000633   000000 236110                    LDQ     0,X0,PR0
         1 000634   000001 471400 0                  LDP1    WSQ3PT_PTR
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:151  
         1 000635   100000 756110                    STQ     0,X0,PR1

      769     8586    2             WSQ3PT.CTRL(I)=WSQ3PT.CTRL(I)&'67'O|%PGWRITE;
              8586                      /* Turn off housekeeping bit and on write bit */

   8586  1 000636   000001 471400 0                  LDP1    WSQ3PT_PTR
         1 000637   100000 236110                    LDQ     0,X0,PR1
         1 000640   000036 736000                    QLS     30
         1 000641   670000 376003                    ANQ     -36864,DU
         1 000642   000022 772000                    QRL     18
         1 000643   000000 621006                    EAX1    0,QL
         1 000644   200000 261003                    ORX1    65536,DU
         1 000645   000000 636011                    EAQ     0,X1
         1 000646   000036 772000                    QRL     30
         1 000647   100000 676110                    ERQ     0,X0,PR1
         1 000650   000077 376007                    ANQ     63,DL
         1 000651   100000 656110                    ERSQ    0,X0,PR1

      770     8587    2           END;                            /* DO I=                              */

   8587  1 000652   200007 235100                    LDA     I,,AUTO
         1 000653   000001 035007                    ADLA    1,DL
         1 000654   200007 755100                    STA     I,,AUTO
         1 000655   002000 115007                    CMPA    1024,DL
         1 000656   000631 602000 1                  TNC     s:8585

      771     8588        /* Make page 0 to point at itself */
      772     8589    1           WSQ3PT(0)='0'B;

   8589  1 000657   000001 471400 0                  LDP1    WSQ3PT_PTR
         1 000660   100000 450100                    STZ     0,,PR1

      773     8590    1           WSQ3PT.SCTRL(0)=%SCUSER;

   8590  1 000661   000001 471400 0                  LDP1    WSQ3PT_PTR
         1 000662   100000 236100                    LDQ     0,,PR1
         1 000663   000003 376000 2                  ANQ     3
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:152  
         1 000664   000400 276007                    ORQ     256,DL
         1 000665   100000 756100                    STQ     0,,PR1

      774     8591    1           WSQ3PT.CTRL(0)=%PGINMEM|%PGWRITE|%PGHKEEP|%PGIOM;

   8591  1 000666   000001 471400 0                  LDP1    WSQ3PT_PTR
         1 000667   000074 236007                    LDQ     60,DL
         1 000670   100000 752101                    STCQ    0,'01'O,PR1

      775     8592    1           IF S1000_FLG='1'B THEN WSQ3PT.RPN(0)=WS0PT.RPN(WSQ3PG/1024);

   8592  1 000671   000000 234000 xsym               SZN     S1000_FLG
         1 000672   000702 605000 1                  TPL     s:8593

   8592  1 000673   000000 236000 xsym               LDQ     WSQ3PG
         1 000674   000012 772000                    QRL     10
         1 000675   000000 471400 xsym               LDP1    WS0PT$
         1 000676   100000 220106                    LDX0    0,QL,PR1
         1 000677   000001 473400 0                  LDP3    WSQ3PT_PTR
         1 000700   300000 740100                    STX0    0,,PR3
         1 000701   000707 710000 1                  TRA     s:8594

      776     8593    1             ELSE WSQ3PT.RPN(0)=WSQ3PG/1024;

   8593  1 000702   000000 236000 xsym               LDQ     WSQ3PG
         1 000703   000012 772000                    QRL     10
         1 000704   000000 620006                    EAX0    0,QL
         1 000705   000001 471400 0                  LDP1    WSQ3PT_PTR
         1 000706   100000 740100                    STX0    0,,PR1

      777     8594    1           INFOY_PTR='0'B;

   8594  1 000707   200004 450100                    STZ     INFOY$,,AUTO

      778     8595    1           INFOY_PTR.S_D_FIELD=%ALS_MONIS; /* Frame directory                    */

   8595  1 000710   006050 236007                    LDQ     3112,DL
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:153  
         1 000711   200004 752103                    STCQ    INFOY$,'03'O,AUTO

      779     8596    1           IF RPM_FLG THEN WSPTD.BLKNO(%UDELWSQ)=WSQ3PG/1024;

   8596  1 000712   000000 234000 xsym               SZN     RPM_FLG
         1 000713   000722 605000 1                  TPL     s:8597

   8596  1 000714   000000 236000 xsym               LDQ     WSQ3PG
         1 000715   000012 772000                    QRL     10
         1 000716   000000 620006                    EAX0    0,QL
         1 000717   200004 471500                    LDP1    INFOY$,,AUTO
         1 000720   100003 740100                    STX0    3,,PR1
         1 000721   000754 710000 1                  TRA     s:8603

      780     8597    2             ELSE IF S1000_FLG='1'B THEN DO;

   8597  1 000722   000000 234000 xsym               SZN     S1000_FLG
         1 000723   000747 605000 1                  TPL     s:8601

      781     8598    2                   IF XA_MODE THEN WSPTD.BLKNO(%UDELWSQ)=WS0PT.RPN(WSQ3PG/1024);

   8598  1 000724   000000 234000 xsym               SZN     XA_MODE
         1 000725   000735 605000 1                  TPL     s:8599

   8598  1 000726   000000 236000 xsym               LDQ     WSQ3PG
         1 000727   000012 772000                    QRL     10
         1 000730   000000 471400 xsym               LDP1    WS0PT$
         1 000731   100000 220106                    LDX0    0,QL,PR1
         1 000732   200004 473500                    LDP3    INFOY$,,AUTO
         1 000733   300003 740100                    STX0    3,,PR3
         1 000734   000754 710000 1                  TRA     s:8603

      782     8599    2                     ELSE WSPTD.BLKNO(%UDELWSQ)=WS0PT.RPN(WSQ3PG/1024)*16;

   8599  1 000735   000000 236000 xsym               LDQ     WSQ3PG
         1 000736   000012 772000                    QRL     10
         1 000737   000000 471400 xsym               LDP1    WS0PT$
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:154  
         1 000740   100000 236106                    LDQ     0,QL,PR1
         1 000741   000016 772000                    QRL     14
         1 000742   000004 376000 2                  ANQ     4
         1 000743   000000 620006                    EAX0    0,QL
         1 000744   200004 473500                    LDP3    INFOY$,,AUTO
         1 000745   300003 740100                    STX0    3,,PR3

      783     8600    2                 END;                      /* THEN                               */

   8600  1 000746   000754 710000 1                  TRA     s:8603

      784     8601    1               ELSE WSPTD.BLKNO(%UDELWSQ)=WSQ3PG/64;

   8601  1 000747   000000 236000 xsym               LDQ     WSQ3PG
         1 000750   000006 772000                    QRL     6
         1 000751   000000 620006                    EAX0    0,QL
         1 000752   200004 471500                    LDP1    INFOY$,,AUTO
         1 000753   100003 740100                    STX0    3,,PR1

      785     8602        /* Map page 1 too */
      786     8603    1           WSQ3PT(1)=WSQ3PT(0);

   8603  1 000754   000001 471400 0                  LDP1    WSQ3PT_PTR
         1 000755   100000 236100                    LDQ     0,,PR1
         1 000756   100001 756100                    STQ     1,,PR1

      787     8604    1           IF S1000_FLG='1'B THEN WSQ3PT.RPN(1)=WS0PT.RPN(WSQ3PG/1024+1);
              8604                    /* Bump page by 1 */

   8604  1 000757   000000 234000 xsym               SZN     S1000_FLG
         1 000760   000770 605000 1                  TPL     s:8605

   8604  1 000761   000000 236000 xsym               LDQ     WSQ3PG
         1 000762   000012 772000                    QRL     10
         1 000763   000000 471400 xsym               LDP1    WS0PT$
         1 000764   100001 220106                    LDX0    1,QL,PR1
         1 000765   000001 473400 0                  LDP3    WSQ3PT_PTR
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:155  
         1 000766   300001 740100                    STX0    1,,PR3
         1 000767   000775 710000 1                  TRA     s:8610

      788     8605    1             ELSE WSQ3PT.RPN(1)=WSQ3PG/1024+1;

   8605  1 000770   000000 236000 xsym               LDQ     WSQ3PG
         1 000771   000012 772000                    QRL     10
         1 000772   000001 620006                    EAX0    1,QL
         1 000773   000001 471400 0                  LDP1    WSQ3PT_PTR
         1 000774   100001 740100                    STX0    1,,PR1

      789     8606        /* Set up MLS IS words 0-255 of page 2 in WSQ3
      790     8607           with WSR=1 for user DELTA           */
      791     8608        /* Set up another copy in words 256-511
      792     8609           of page 2 of WSQ3 with write flag off      */
      793     8610    1           INFOX_PTR.S_D_FIELD=%ALS_HJIT;

   8610  1 000775   006012 236007                    LDQ     3082,DL
         1 000776   200003 752103                    STCQ    INFOX$,'03'O,AUTO

      794     8611    1           WSQ3LS$=PINCRW(WSQ3PT$,1024);   /* Pointer to page 2                  */

   8611  1 000777   000001 236000 0                  LDQ     WSQ3PT_PTR
         1 001000   002000 036003                    ADLQ    1024,DU
         1 001001   200006 756100                    STQ     WSQ3LS$,,AUTO

      795     8612    2           DO I=0 TO 127;

   8612  1 001002   200007 450100                    STZ     I,,AUTO

      796     8613    2             BAS_LS(I)=AB_MLS(I);/* A MON LS descriptor->page 2 of WSQ3 0-255    */

   8613  1 001003   200007 235100                    LDA     I,,AUTO
         1 001004   000001 735000                    ALS     1
         1 001005   200007 236100                    LDQ     I,,AUTO
         1 001006   000003 736000                    QLS     3
         1 001007   000002 735000                    ALS     2
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:156  
         1 001010   200003 470500                    LDP0    INFOX$,,AUTO
         1 001011   200006 471500                    LDP1    WSQ3LS$,,AUTO
         1 001012   000105 100506                    MLR     fill='000'O
         1 001013   000000 000010                    ADSC9   0,Q,PR0                  cn=0,n=8
         1 001014   100000 000010                    ADSC9   0,A,PR1                  cn=0,n=8

      797     8614    2             IF(BAS_LS.WSR(I)=0 OR BAS_LS.WSR(I)=1) AND

   8614  1 001015   200007 235100                    LDA     I,,AUTO
         1 001016   000001 735000                    ALS     1
         1 001017   100000 236105                    LDQ     0,AL,PR1
         1 001020   000160 316007                    CANQ    112,DL
         1 001021   001026 600000 1                  TZE     s:8614+9
         1 001022   100000 236105                    LDQ     0,AL,PR1
         1 001023   000160 376007                    ANQ     112,DL
         1 001024   000020 116007                    CMPQ    16,DL
         1 001025   001150 601000 1                  TNZ     s:8626
         1 001026   100000 236105                    LDQ     0,AL,PR1
         1 001027   000017 316007                    CANQ    15,DL
         1 001030   001035 600000 1                  TZE     s:8615
         1 001031   100000 236105                    LDQ     0,AL,PR1
         1 001032   000017 376007                    ANQ     15,DL
         1 001033   000001 116007                    CMPQ    1,DL
         1 001034   001150 601000 1                  TNZ     s:8626

      798     8615    3               (BAS_LS.TYP(I)=0 OR BAS_LS.TYP(I)=1) THEN DO CASE(I);

   8615  1 001035   200007 236100                    LDQ     I,,AUTO
         1 001036   000054 116007                    CMPQ    44,DL
         1 001037   001041 602006 1                  TNC     s:8615+4,QL
         1 001040   001144 710000 1                  TRA     s:8622
         1 001041   001115 710000 1                  TRA     s:8617
         1 001042   001144 710000 1                  TRA     s:8622
         1 001043   001144 710000 1                  TRA     s:8622
         1 001044   001144 710000 1                  TRA     s:8622
         1 001045   001144 710000 1                  TRA     s:8622
         1 001046   001144 710000 1                  TRA     s:8622
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:157  
         1 001047   001144 710000 1                  TRA     s:8622
         1 001050   001144 710000 1                  TRA     s:8622
         1 001051   001144 710000 1                  TRA     s:8622
         1 001052   001144 710000 1                  TRA     s:8622
         1 001053   001144 710000 1                  TRA     s:8622
         1 001054   001144 710000 1                  TRA     s:8622
         1 001055   001144 710000 1                  TRA     s:8622
         1 001056   001115 710000 1                  TRA     s:8617
         1 001057   001144 710000 1                  TRA     s:8622
         1 001060   001144 710000 1                  TRA     s:8622
         1 001061   001144 710000 1                  TRA     s:8622
         1 001062   001144 710000 1                  TRA     s:8622
         1 001063   001144 710000 1                  TRA     s:8622
         1 001064   001144 710000 1                  TRA     s:8622
         1 001065   001144 710000 1                  TRA     s:8622
         1 001066   001144 710000 1                  TRA     s:8622
         1 001067   001144 710000 1                  TRA     s:8622
         1 001070   001144 710000 1                  TRA     s:8622
         1 001071   001144 710000 1                  TRA     s:8622
         1 001072   001144 710000 1                  TRA     s:8622
         1 001073   001144 710000 1                  TRA     s:8622
         1 001074   001144 710000 1                  TRA     s:8622
         1 001075   001144 710000 1                  TRA     s:8622
         1 001076   001144 710000 1                  TRA     s:8622
         1 001077   001144 710000 1                  TRA     s:8622
         1 001100   001144 710000 1                  TRA     s:8622
         1 001101   001144 710000 1                  TRA     s:8622
         1 001102   001144 710000 1                  TRA     s:8622
         1 001103   001144 710000 1                  TRA     s:8622
         1 001104   001115 710000 1                  TRA     s:8617
         1 001105   001115 710000 1                  TRA     s:8617
         1 001106   001144 710000 1                  TRA     s:8622
         1 001107   001144 710000 1                  TRA     s:8622
         1 001110   001144 710000 1                  TRA     s:8622
         1 001111   001115 710000 1                  TRA     s:8617
         1 001112   001144 710000 1                  TRA     s:8622
         1 001113   001144 710000 1                  TRA     s:8622
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:158  
         1 001114   001115 710000 1                  TRA     s:8617

      799     8616    3                   CASE(0,13,35,36,40,43);
              8616                      /* ISR,Privileged ISR,MON JIT, MON HJIT,ISR bypass cache,Arg Stack */

      800     8617    3                     BAS_LS.FLGS(I)=BAS_LS.FLGS(I)&'700'O; /* Make it            */

   8617  1 001115   100000 236105                    LDQ     0,AL,PR1
         1 001116   000024 736000                    QLS     20
         1 001117   777000 376003                    ANQ     -512,DU
         1 001120   700000 376003                    ANQ     -32768,DU
         1 001121   000024 772000                    QRL     20
         1 001122   100000 676105                    ERQ     0,AL,PR1
         1 001123   177600 376007                    ANQ     65408,DL
         1 001124   100000 656105                    ERSQ    0,AL,PR1

      801     8618    3                     BAS_LS.WSR(I)=3;      /*  WSQN3                             */

   8618  1 001125   100000 236105                    LDQ     0,AL,PR1
         1 001126   000005 376000 2                  ANQ     5
         1 001127   000060 276007                    ORQ     48,DL
         1 001130   100000 756105                    STQ     0,AL,PR1

      802     8619    3                     IF BAS_LS.TYP(I)=0 THEN BAS_LS.TYP(I)=2;

   8619  1 001131   100000 236105                    LDQ     0,AL,PR1
         1 001132   000017 316007                    CANQ    15,DL
         1 001133   001140 601000 1                  TNZ     s:8620

   8619  1 001134   000006 376000 2                  ANQ     6
         1 001135   000002 276007                    ORQ     2,DL
         1 001136   100000 756105                    STQ     0,AL,PR1
         1 001137   001150 710000 1                  TRA     s:8626

      803     8620    3                       ELSE BAS_LS.TYP(I)=3; /* And type 2 or 3                  */

   8620  1 001140   000006 376000 2                  ANQ     6
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:159  
         1 001141   000003 276007                    ORQ     3,DL
         1 001142   100000 756105                    STQ     0,AL,PR1
         1 001143   001150 710000 1                  TRA     s:8626

      804     8621    3                   CASE(ELSE);

      805     8622    3                     BAS_LS.WSR(I)=1;      /* Make it WSR1                       */

   8622  1 001144   100000 236105                    LDQ     0,AL,PR1
         1 001145   000005 376000 2                  ANQ     5
         1 001146   000020 276007                    ORQ     16,DL
         1 001147   100000 756105                    STQ     0,AL,PR1

      806     8623    3                 END;                      /* DO CASE                            */

      807     8624    2               ELSE;
      808     8625        /* Make a second copy in words 256-511 with write bit off */
      809     8626    2             PINCRW(WSQ3LS$,256)->BAS_LS(I)=BAS_LS(I);

   8626  1 001150   200007 236100                    LDQ     I,,AUTO
         1 001151   000003 736000                    QLS     3
         1 001152   000002 735000                    ALS     2
         1 001153   000105 100506                    MLR     fill='000'O
         1 001154   100000 000010                    ADSC9   0,Q,PR1                  cn=0,n=8
         1 001155   100400 000010                    ADSC9   256,A,PR1                cn=0,n=8

      810     8627    2             PINCRW(WSQ3LS$,256)->BAS_LS.FLGS(I)=

   8627  1 001156   200007 235100                    LDA     I,,AUTO
         1 001157   000001 735000                    ALS     1
         1 001160   100400 236105                    LDQ     256,AL,PR1
         1 001161   000024 736000                    QLS     20
         1 001162   777000 376003                    ANQ     -512,DU
         1 001163   577000 376003                    ANQ     -66048,DU
         1 001164   000024 772000                    QRL     20
         1 001165   100400 676105                    ERQ     256,AL,PR1
         1 001166   177600 376007                    ANQ     65408,DL
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:160  
         1 001167   100400 656105                    ERSQ    256,AL,PR1

      811     8628    2               PINCRW(WSQ3LS$,256)->BAS_LS.FLGS(I)&'577'O;
      812     8629    2           END;                            /* DO I=                              */

   8629  1 001170   200007 236100                    LDQ     I,,AUTO
         1 001171   000001 036007                    ADLQ    1,DL
         1 001172   200007 756100                    STQ     I,,AUTO
         1 001173   000200 116007                    CMPQ    128,DL
         1 001174   001003 602000 1                  TNC     s:8613

      813     8630        /* Set maximum bound for DS1 to DS8 */
      814     8631    2           DO I=4 TO 11;         /* DS1 is the 4'th entry in LS; loop to DS7     */

   8631  1 001175   000004 235007                    LDA     4,DL
         1 001176   200007 755100                    STA     I,,AUTO

      815     8632    2             BAS_LS.BOUND(I)=BAS_LS.BASE(I+1)-BAS_LS.BASE(I)-1;

   8632  1 001177   200007 235100                    LDA     I,,AUTO
         1 001200   000001 735000                    ALS     1
         1 001201   200006 470500                    LDP0    WSQ3LS$,,AUTO
         1 001202   000003 236105                    LDQ     3,AL,PR0
         1 001203   000001 136105                    SBLQ    1,AL,PR0
         1 001204   000001 136007                    SBLQ    1,DL
         1 001205   000020 736000                    QLS     16
         1 001206   000000 676105                    ERQ     0,AL,PR0
         1 001207   000034 376000 xsym               ANQ     B_VECTNIL+28
         1 001210   000000 656105                    ERSQ    0,AL,PR0

      816     8633    2             BAS_LS.FLGS(I)=BAS_LS.FLGS(I)|'703'O; /* R+W+S                      */

   8633  1 001211   000000 236105                    LDQ     0,AL,PR0
         1 001212   000024 736000                    QLS     20
         1 001213   777000 376003                    ANQ     -512,DU
         1 001214   703000 276003                    ORQ     -31232,DU
         1 001215   000024 772000                    QRL     20
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:161  
         1 001216   000000 676105                    ERQ     0,AL,PR0
         1 001217   177600 376007                    ANQ     65408,DL
         1 001220   000000 656105                    ERSQ    0,AL,PR0

      817     8634        /* and make the copy with write bit off */
      818     8635    2             PINCRW(WSQ3LS$,256)->BAS_LS(I)=BAS_LS(I);

   8635  1 001221   200007 236100                    LDQ     I,,AUTO
         1 001222   000003 736000                    QLS     3
         1 001223   000002 735000                    ALS     2
         1 001224   000105 100506                    MLR     fill='000'O
         1 001225   000000 000010                    ADSC9   0,Q,PR0                  cn=0,n=8
         1 001226   000400 000010                    ADSC9   256,A,PR0                cn=0,n=8

      819     8636    2             PINCRW(WSQ3LS$,256)->BAS_LS.FLGS(I)=

   8636  1 001227   200007 235100                    LDA     I,,AUTO
         1 001230   000001 735000                    ALS     1
         1 001231   000400 236105                    LDQ     256,AL,PR0
         1 001232   000024 736000                    QLS     20
         1 001233   777000 376003                    ANQ     -512,DU
         1 001234   577000 376003                    ANQ     -66048,DU
         1 001235   000024 772000                    QRL     20
         1 001236   000400 676105                    ERQ     256,AL,PR0
         1 001237   177600 376007                    ANQ     65408,DL
         1 001240   000400 656105                    ERSQ    256,AL,PR0

      820     8637    2               PINCRW(WSQ3LS$,256)->BAS_LS.FLGS(I)&'577'O;
      821     8638    2           END;                            /* DO I=                              */

   8638  1 001241   200007 236100                    LDQ     I,,AUTO
         1 001242   000001 036007                    ADLQ    1,DL
         1 001243   200007 756100                    STQ     I,,AUTO
         1 001244   000014 116007                    CMPQ    12,DL
         1 001245   001177 602000 1                  TNC     s:8632

      822     8639        /* Do DS8 */
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:162  
      823     8640    1           BAS_LS.BOUND(11)=48*1024*4-1;   /* Bound 48 Kw                        */

   8640  1 001246   000026 236100                    LDQ     22,,PR0
         1 001247   177777 376007                    ANQ     65535,DL
         1 001250   000007 276000 2                  ORQ     7
         1 001251   000026 756100                    STQ     22,,PR0

      824     8641    1           BAS_LS.FLGS(11)=BAS_LS.FLGS(11)|'703'O; /* R+W+S                      */

   8641  1 001252   000026 236100                    LDQ     22,,PR0
         1 001253   000024 736000                    QLS     20
         1 001254   777000 376003                    ANQ     -512,DU
         1 001255   703000 276003                    ORQ     -31232,DU
         1 001256   000024 772000                    QRL     20
         1 001257   000026 676100                    ERQ     22,,PR0
         1 001260   177600 376007                    ANQ     65408,DL
         1 001261   000026 656100                    ERSQ    22,,PR0

      825     8642        /* and make the copy with write bit off */
      826     8643    1           PINCRW(WSQ3LS$,256)->BAS_LS(11)=BAS_LS(11);

   8643  1 001262   000100 100500                    MLR     fill='000'O
         1 001263   000026 000010                    ADSC9   22,,PR0                  cn=0,n=8
         1 001264   000426 000010                    ADSC9   278,,PR0                 cn=0,n=8

      827     8644    1           PINCRW(WSQ3LS$,256)->BAS_LS.FLGS(11)=

   8644  1 001265   000426 236100                    LDQ     278,,PR0
         1 001266   000024 736000                    QLS     20
         1 001267   777000 376003                    ANQ     -512,DU
         1 001270   577000 376003                    ANQ     -66048,DU
         1 001271   000024 772000                    QRL     20
         1 001272   000426 676100                    ERQ     278,,PR0
         1 001273   177600 376007                    ANQ     65408,DL
         1 001274   000426 656100                    ERSQ    278,,PR0

      828     8645    1             PINCRW(WSQ3LS$,256)->BAS_LS.FLGS(11)&'577'O;
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:163  
      829     8646    1           RETURN;

   8646  1 001275   000000 702200 xent               TSX2  ! X66_ARET
      830     8647    1   END INITX;
      831     8648        %EOD;

PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:164  
--  Include file information  --

   B_MLSMAC_C.:E05TOU  is referenced.
   B_ULSMAC_C.:E05TOU  is referenced.
   B_LSDATA_C.:E05TOU  cannot be made into a system file and is referenced.
   M_INFO_C.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   B$SS.:E05TOU  cannot be made into a system file and is referenced.
   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure INITX.
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:165  

 **** Variables and constants ****

  ****  Section 000  Data  INITX

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    15-0-0/h BIT (18)    r     1 BX0                        3-0-0/w STRC(279)   r     1 DELTAQM
    13-0-0/w STRC(45)    r     1 NIANS                      2-0-0/w PTR         r     1 SSR$
     2-0-0/w STRC        r     1 SSR_PTR                   15-0-0/h UBIN(18)    r     1 UX0
     1-0-0/w PTR         r     1 WSQ3PT$                    1-0-0/w STRC        r     1 WSQ3PT_PTR
     0-0-0/w PTR         r     1 XDEL_LS$                   0-0-0/w STRC        r     1 XDEL_LS_PTR

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    10-0-0/b STRC(72)    r     1 ENTLOC                     5-0-0/w EPTR        r     1 EW$
     5-0-0/w STRC        r     1 EW_PTR                     7-0-0/w UBIN        r     1 I
     3-0-0/w PTR         r     1 INFOX$                     3-0-0/w STRC        r     1 INFOX_PTR
     4-0-0/w PTR         r     1 INFOY$                     4-0-0/w STRC        r     1 INFOY_PTR
     6-0-0/w PTR         r     1 WSQ3LS$

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/b BIT (72)    r     1 AAFLTD                     0-0-0/w PTR         r     1 AALS$
     0-0-0/w STRC(180)   r     1 ANSBUF                     0-0-0/w UBIN        r     1 FLTSW
     0-0-0/w STRC(144)   r     1 HDRXIS                     0-0-0/w STRC(144)   r     1 HDRXLS
     0-0-0/w UBIN        r     1 IPHYPG                     0-0-0/w UBIN        r     1 PHYMEM_SZ
     0-0-0/b BIT (4)     r     1 RCV_FLG                    0-0-0/b BIT         r     1 RPM_FLG
     0-0-0/b BIT         r     1 S1000_FLG                  0-0-0/d STRC(72)    r     1 SSDMONX
     0-0-0/w PTR         r     1 WS0PT$                     0-0-0/w UBIN        r     1 WSQ3PG
     0-0-0/b BIT         r     1 XA_MODE                    0-0-0/w UBIN        r     1 XDFLAG
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:166  

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(7560)  r     1 AALS                       0-0-0/w STRC(72)    r     1 AB_MLS(0:0)
     0-0-0/d STRC(2304)  r     1 B$SS                       0-0-0/w STRC(72)    r     1 BAS_LS(0:0)
     0-0-0/d STRC(10368) r     1 B_MLS                      0-0-0/w STRC        r     1 MONPT(0:0)
     0-0-0/w STRC        r     1 WS0PT(0:0)                 0-0-0/w STRC        r     1 WSPTD(0:28)
     0-0-0/w STRC        r     1 WSQ3PT(0:0)
     0-0-0/w STRC(72)    r     1 XDEL_LS(0:0)


   Procedure INITX requires 702 words for executable code.
   Procedure INITX requires 12 words of local(AUTO) storage.
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:167  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:168  
          MINI XREF LISTING

AAFLTD
      8411**DCL      8440>>ASSIGN   8443>>ASSIGN   8454>>ASSIGN   8555>>ASSIGN
AALS.AARDIS
      5847**DCL      8552>>ASSIGN
AALS.DESCASCH.BASE
      6359**DCL      8515>>ASSIGN
AALS.DESCASCH.BOUND
      6355**DCL      8516>>ASSIGN
AALS.DESCASCH0.BASE
      7263**DCL      8517>>ASSIGN
AALS.DESCASCH0.BOUND
      7259**DCL      8518>>ASSIGN
AALS.DESCASCH1.BASE
      7285**DCL      8519>>ASSIGN
AALS.DESCASCH1.BOUND
      7281**DCL      8520>>ASSIGN
AALS.DESCASCH10.BASE
      7483**DCL      8537>>ASSIGN
AALS.DESCASCH10.BOUND
      7479**DCL      8538>>ASSIGN
AALS.DESCASCH11.BASE
      7505**DCL      8539>>ASSIGN
AALS.DESCASCH11.BOUND
      7501**DCL      8540>>ASSIGN
AALS.DESCASCH2.BASE
      7307**DCL      8521>>ASSIGN
AALS.DESCASCH2.BOUND
      7303**DCL      8522>>ASSIGN
AALS.DESCASCH3.BASE
      7329**DCL      8523>>ASSIGN
AALS.DESCASCH3.BOUND
      7325**DCL      8524>>ASSIGN
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:169  
AALS.DESCASCH4.BASE
      7351**DCL      8525>>ASSIGN
AALS.DESCASCH4.BOUND
      7347**DCL      8526>>ASSIGN
AALS.DESCASCH5.BASE
      7373**DCL      8527>>ASSIGN
AALS.DESCASCH5.BOUND
      7369**DCL      8528>>ASSIGN
AALS.DESCASCH6.BASE
      7395**DCL      8529>>ASSIGN
AALS.DESCASCH6.BOUND
      7391**DCL      8530>>ASSIGN
AALS.DESCASCH7.BASE
      7417**DCL      8531>>ASSIGN
AALS.DESCASCH7.BOUND
      7413**DCL      8532>>ASSIGN
AALS.DESCASCH8.BASE
      7439**DCL      8533>>ASSIGN
AALS.DESCASCH8.BOUND
      7435**DCL      8534>>ASSIGN
AALS.DESCASCH9.BASE
      7461**DCL      8535>>ASSIGN
AALS.DESCASCH9.BOUND
      7457**DCL      8536>>ASSIGN
AALS.DESCDDIR.BASE
      6403**DCL      8547>>ASSIGN
AALS.DESCDDIR.BOUND
      6399**DCL      8548>>ASSIGN
AALS.DESCDEF.BASE
      6183**DCL      8487>>ASSIGN
AALS.DESCDEF.BOUND
      6179**DCL      8488>>ASSIGN
AALS.DESCDEF1.BASE
      6337**DCL      8545>>ASSIGN
AALS.DESCDEF1.BOUND
      6333**DCL      8546>>ASSIGN
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:170  
AALS.DESCENT.BASE
      6139**DCL      8483>>ASSIGN
AALS.DESCENT.BOUND
      6135**DCL      8484>>ASSIGN
AALS.DESCENT1.BASE
      6293**DCL      8541>>ASSIGN
AALS.DESCENT1.BOUND
      6289**DCL      8542>>ASSIGN
AALS.DESCMI
      6727**DCL      8446>>ASSIGN
AALS.DESCPPUT.BASE
      5919**DCL      8449>>ASSIGN
AALS.DESCPPUT.BOUND
      5915**DCL      8450>>ASSIGN
AALS.DESCSCH.BASE
      6205**DCL      8489>>ASSIGN
AALS.DESCSCH.BOUND
      6201**DCL      8490>>ASSIGN
AALS.DESCSCH0.BASE
      6998**DCL      8491>>ASSIGN
AALS.DESCSCH0.BOUND
      6994**DCL      8492>>ASSIGN
AALS.DESCSCH1.BASE
      7020**DCL      8493>>ASSIGN
AALS.DESCSCH1.BOUND
      7016**DCL      8494>>ASSIGN
AALS.DESCSCH10.BASE
      7218**DCL      8511>>ASSIGN
AALS.DESCSCH10.BOUND
      7214**DCL      8512>>ASSIGN
AALS.DESCSCH11.BASE
      7240**DCL      8513>>ASSIGN
AALS.DESCSCH11.BOUND
      7236**DCL      8514>>ASSIGN
AALS.DESCSCH2.BASE
      7042**DCL      8495>>ASSIGN
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:171  
AALS.DESCSCH2.BOUND
      7038**DCL      8496>>ASSIGN
AALS.DESCSCH3.BASE
      7064**DCL      8497>>ASSIGN
AALS.DESCSCH3.BOUND
      7060**DCL      8498>>ASSIGN
AALS.DESCSCH4.BASE
      7086**DCL      8499>>ASSIGN
AALS.DESCSCH4.BOUND
      7082**DCL      8500>>ASSIGN
AALS.DESCSCH5.BASE
      7108**DCL      8501>>ASSIGN
AALS.DESCSCH5.BOUND
      7104**DCL      8502>>ASSIGN
AALS.DESCSCH6.BASE
      7130**DCL      8503>>ASSIGN
AALS.DESCSCH6.BOUND
      7126**DCL      8504>>ASSIGN
AALS.DESCSCH7.BASE
      7152**DCL      8505>>ASSIGN
AALS.DESCSCH7.BOUND
      7148**DCL      8506>>ASSIGN
AALS.DESCSCH8.BASE
      7174**DCL      8507>>ASSIGN
AALS.DESCSCH8.BOUND
      7170**DCL      8508>>ASSIGN
AALS.DESCSCH9.BASE
      7196**DCL      8509>>ASSIGN
AALS.DESCSCH9.BOUND
      7192**DCL      8510>>ASSIGN
AALS.DESCSGT.BASE
      8078**DCL      8549>>ASSIGN
AALS.DESCSGT.BOUND
      8074**DCL      8550>>ASSIGN
AALS.DESCSYM.BASE
      6161**DCL      8485>>ASSIGN
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:172  
AALS.DESCSYM.BOUND
      6157**DCL      8486>>ASSIGN
AALS.DESCSYM1.BASE
      6315**DCL      8543>>ASSIGN
AALS.DESCSYM1.BOUND
      6311**DCL      8544>>ASSIGN
AALS.DESCWS#0.BASE
      8056**DCL      8447>>ASSIGN
AALS.DESCWS#0.BOUND
      8052**DCL      8448>>ASSIGN
AALS$
      8149**DCL      5833--IMP-PTR  8446>>ASSIGN   8447>>ASSIGN   8448>>ASSIGN   8449>>ASSIGN   8450>>ASSIGN
      8483>>ASSIGN   8484>>ASSIGN   8485>>ASSIGN   8486>>ASSIGN   8487>>ASSIGN   8488>>ASSIGN   8489>>ASSIGN
      8490>>ASSIGN   8491>>ASSIGN   8492>>ASSIGN   8493>>ASSIGN   8494>>ASSIGN   8495>>ASSIGN   8496>>ASSIGN
      8497>>ASSIGN   8498>>ASSIGN   8499>>ASSIGN   8500>>ASSIGN   8501>>ASSIGN   8502>>ASSIGN   8503>>ASSIGN
      8504>>ASSIGN   8505>>ASSIGN   8506>>ASSIGN   8507>>ASSIGN   8508>>ASSIGN   8509>>ASSIGN   8510>>ASSIGN
      8511>>ASSIGN   8512>>ASSIGN   8513>>ASSIGN   8514>>ASSIGN   8515>>ASSIGN   8516>>ASSIGN   8517>>ASSIGN
      8518>>ASSIGN   8519>>ASSIGN   8520>>ASSIGN   8521>>ASSIGN   8522>>ASSIGN   8523>>ASSIGN   8524>>ASSIGN
      8525>>ASSIGN   8526>>ASSIGN   8527>>ASSIGN   8528>>ASSIGN   8529>>ASSIGN   8530>>ASSIGN   8531>>ASSIGN
      8532>>ASSIGN   8533>>ASSIGN   8534>>ASSIGN   8535>>ASSIGN   8536>>ASSIGN   8537>>ASSIGN   8538>>ASSIGN
      8539>>ASSIGN   8540>>ASSIGN   8541>>ASSIGN   8542>>ASSIGN   8543>>ASSIGN   8544>>ASSIGN   8545>>ASSIGN
      8546>>ASSIGN   8547>>ASSIGN   8548>>ASSIGN   8549>>ASSIGN   8550>>ASSIGN   8552>>ASSIGN
AB_MLS
      5753**DCL      8613>>ASSIGN
ANSBUF
      8413**DCL      8463<>CALL
ANSBUF.TXT
      8415**DCL      8464>>DOSELCT
B$SS.IC
      1302**DCL      8577<<ASSIGN
B$SS.ISR
      1337**DCL      8561<<ASSIGN   8562<<ASSIGN
B$SS.LSR.BASE
      1354**DCL      8563<<ASSIGN   8564<<ASSIGN
B$SS.RVA
      1335**DCL      1336--REDEF
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:173  
B$SS.X0
      1433**DCL      8566<<ASSIGN
B$SS.X1
      1434**DCL      8568<<ASSIGN   8570<<ASSIGN   8574<<ASSIGN   8575<<ASSIGN
BAS_LS
      5759**DCL      8613<<ASSIGN   8626<<ASSIGN   8626>>ASSIGN   8635<<ASSIGN   8635>>ASSIGN   8643<<ASSIGN
      8643>>ASSIGN
BAS_LS.BASE
      5764**DCL      8632>>ASSIGN   8632>>ASSIGN
BAS_LS.BOUND
      5760**DCL      8632<<ASSIGN   8640<<ASSIGN
BAS_LS.FLGS
      5761**DCL      8617<<ASSIGN   8617>>ASSIGN   8627<<ASSIGN   8627>>ASSIGN   8633<<ASSIGN   8633>>ASSIGN
      8636<<ASSIGN   8636>>ASSIGN   8641<<ASSIGN   8641>>ASSIGN   8644<<ASSIGN   8644>>ASSIGN
BAS_LS.TYP
      5763**DCL      8614>>IF       8614>>IF       8619>>IF       8619<<ASSIGN   8620<<ASSIGN
BAS_LS.WSR
      5762**DCL      8614>>IF       8614>>IF       8618<<ASSIGN   8622<<ASSIGN
BX0
      8408**DCL      8409--REDEF
B_MLS.AARDV
      5646**DCL      8440<<ASSIGN
B_MLS.AARDV.ENTLOC
      5647**DCL      8442<<ASSIGN
B_MLS.AARDV2
      5654**DCL      8446<<ASSIGN
B_MLS.IPHY_MAP.BASE
      5726**DCL      8451<<ASSIGN
B_MLS.IPHY_MAP.BOUND
      5722**DCL      8452<<ASSIGN
B_MLS.MINIQ_ENT
      5727**DCL      8457<<ASSIGN
B_MLS.PPUT.BASE
      5459**DCL      8449<<ASSIGN
B_MLS.PPUT.BOUND
      5455**DCL      8450<<ASSIGN
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:174  
B_MLS.RCVENT
      5524**DCL      8443<<ASSIGN
B_MLS.RCVENT.ENTLOC
      5525**DCL      8445<<ASSIGN
B_MLS.WSQ0PT.BASE
      5720**DCL      8447<<ASSIGN
B_MLS.WSQ0PT.BOUND
      5716**DCL      8448<<ASSIGN
DELTAQM
      8398**DCL      8463<>CALL
ENTLOC
      8432**DCL      8454<<ASSIGN   8457>>ASSIGN   8555<<ASSIGN   8558>>ASSIGN
ENTLOC.IC
      8433**DCL      8456<<ASSIGN   8557<<ASSIGN
EW$
      5803**DCL      5815--REDEF    8441<<ASSIGN   8444<<ASSIGN   8455<<ASSIGN   8556<<ASSIGN
EW_PTR.WOFFS
      5816**DCL      8442>>ASSIGN   8445>>ASSIGN   8456>>ASSIGN   8557>>ASSIGN
FLTSW
      8416**DCL      8473<<ASSIGN
HDRXIS.BASE
      8152**DCL      8459>>IF       8474>>ASSIGN
HDRXIS.DA
      8153**DCL      8154--REDEF
HDRXIS.SIZE
      8157**DCL      8475>>ASSIGN
HDRXIS.START
      8159**DCL      8577>>ASSIGN
HDRXLS.BASE
      8163**DCL      8437>>ASSIGN
HDRXLS.DA
      8164**DCL      8165--REDEF
I
      8431**DCL      8584<<DOINDEX  8585>>ASSIGN   8585>>ASSIGN   8586>>ASSIGN   8586>>ASSIGN   8612<<DOINDEX
      8613>>ASSIGN   8613>>ASSIGN   8614>>IF       8614>>IF       8614>>IF       8614>>IF       8615>>DOCASE
      8617>>ASSIGN   8617>>ASSIGN   8618>>ASSIGN   8619>>IF       8619>>ASSIGN   8620>>ASSIGN   8622>>ASSIGN
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:175  
      8626>>ASSIGN   8626>>ASSIGN   8627>>ASSIGN   8627>>ASSIGN   8631<<DOINDEX  8632>>ASSIGN   8632>>ASSIGN
      8632>>ASSIGN   8633>>ASSIGN   8633>>ASSIGN   8635>>ASSIGN   8635>>ASSIGN   8636>>ASSIGN   8636>>ASSIGN
INFOX$
      5765**DCL      4974--IMP-PTR  5753--IMP-PTR  5777--REDEF    8271--IMP-PTR  8440>>ASSIGN   8442>>ASSIGN
      8443>>ASSIGN   8445>>ASSIGN   8446>>ASSIGN   8447>>ASSIGN   8448>>ASSIGN   8449>>ASSIGN   8450>>ASSIGN
      8451>>ASSIGN   8452>>ASSIGN   8457>>ASSIGN   8585>>ASSIGN   8613>>ASSIGN
INFOX_PTR
      5777**DCL      8438<<ASSIGN
INFOX_PTR.S_D_FIELD
      5781**DCL      8439<<ASSIGN   8582<<ASSIGN   8610<<ASSIGN
INFOY$
      5784**DCL      5796--REDEF    8242--IMP-PTR  8596>>ASSIGN   8598>>ASSIGN   8599>>ASSIGN   8601>>ASSIGN
INFOY_PTR
      5796**DCL      8594<<ASSIGN
INFOY_PTR.S_D_FIELD
      5800**DCL      8595<<ASSIGN
INITX0
      8463**LABEL    8469--GOTO
IPHYPG
      8418**DCL      8451>>ASSIGN   8478>>ASSIGN
IRR$RECOVER
      8425**DCL-ENT  8444--ASSIGN
KEYINX
      8426**DCL-ENT  8463--CALL
LOAD_SSR
      8427**DCL-ENT  8576--CALL
MONPT
      8271**DCL      8585>>ASSIGN
MONPT.RPN
      8291**DCL      8292--REDEF
MONPT.SCTRL
      8293**DCL      8294--REDEF
MYSELFM
      8429**DCL-ENT  8455--ASSIGN
MYSELFX
      8428**DCL-ENT  8556--ASSIGN
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:176  
NIANS
      8403**DCL      8463<>CALL
PHYMEM_SZ
      8419**DCL      8452>>ASSIGN   8479>>ASSIGN
PREPRE
      8424**DCL-ENT  8441--ASSIGN
RCV_FLG
      8412**DCL      8461>>IF       8551>>IF
RPM_FLG
      8422**DCL      8573>>IF       8596>>IF
S1000_FLG
      8420**DCL      8567>>IF       8592>>IF       8597>>IF       8604>>IF
SSDMONX
      8208**DCL      8553>>ASSIGN
SSR$
      8396**DCL      8561>>ASSIGN   8562>>ASSIGN   8563>>ASSIGN   8564>>ASSIGN   8566>>ASSIGN   8568>>ASSIGN
      8570>>ASSIGN   8574>>ASSIGN   8575>>ASSIGN   8577>>ASSIGN
SSR_PTR
      8389**DCL      8396--REDEF
SSR_PTR.WOFFS
      8390**DCL      8560<<ASSIGN
UX0
      8409**DCL      8566>>ASSIGN
WS0PT.RPN
      8320**DCL      8321--REDEF    8592>>ASSIGN   8598>>ASSIGN   8599>>ASSIGN   8604>>ASSIGN
WS0PT.SCTRL
      8322**DCL      8323--REDEF
WS0PT$
      8241**DCL      8300--IMP-PTR  8592>>ASSIGN   8598>>ASSIGN   8599>>ASSIGN   8604>>ASSIGN
WSPTD.BLKNO
      8262**DCL      8596<<ASSIGN   8598<<ASSIGN   8599<<ASSIGN   8601<<ASSIGN
WSQ3LS$
      8377**DCL      5759--IMP-PTR  8611<<ASSIGN   8613>>ASSIGN   8614>>IF       8614>>IF       8614>>IF
      8614>>IF       8617>>ASSIGN   8617>>ASSIGN   8618>>ASSIGN   8619>>IF       8619>>ASSIGN   8620>>ASSIGN
      8622>>ASSIGN   8626>>ASSIGN   8626>>ASSIGN   8627>>ASSIGN   8627>>ASSIGN   8632>>ASSIGN   8632>>ASSIGN
      8632>>ASSIGN   8633>>ASSIGN   8633>>ASSIGN   8635>>ASSIGN   8635>>ASSIGN   8636>>ASSIGN   8636>>ASSIGN
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:177  
      8640>>ASSIGN   8641>>ASSIGN   8641>>ASSIGN   8643>>ASSIGN   8643>>ASSIGN   8644>>ASSIGN   8644>>ASSIGN
WSQ3PG
      8417**DCL      8583>>ASSIGN   8592>>ASSIGN   8593>>ASSIGN   8596>>ASSIGN   8598>>ASSIGN   8599>>ASSIGN
      8601>>ASSIGN   8604>>ASSIGN   8605>>ASSIGN
WSQ3PT
      8329**DCL      8585<<ASSIGN   8589<<ASSIGN   8603<<ASSIGN   8603>>ASSIGN
WSQ3PT.CTRL
      8354**DCL      8586<<ASSIGN   8586>>ASSIGN   8591<<ASSIGN
WSQ3PT.RPN
      8349**DCL      8350--REDEF    8592<<ASSIGN   8593<<ASSIGN   8604<<ASSIGN   8605<<ASSIGN
WSQ3PT.SCTRL
      8351**DCL      8352--REDEF    8590<<ASSIGN
WSQ3PT$
      8376**DCL      8329--IMP-PTR  8585>>ASSIGN   8586>>ASSIGN   8586>>ASSIGN   8589>>ASSIGN   8590>>ASSIGN
      8591>>ASSIGN   8592>>ASSIGN   8593>>ASSIGN   8603>>ASSIGN   8603>>ASSIGN   8604>>ASSIGN   8605>>ASSIGN
      8611>>ASSIGN
WSQ3PT_PTR
      8369**DCL      8376--REDEF
WSQ3PT_PTR.WOFFS
      8370**DCL      8583<<ASSIGN
XA_MODE
      8421**DCL      8568>>IF       8598>>IF
XDEL_LS
      8172**DCL      8552<<ASSIGN   8553<<ASSIGN   8558<<ASSIGN   8561>>ASSIGN   8562>>ASSIGN   8576<>CALL
XDEL_LS.BASE
      8177**DCL      8474<<ASSIGN   8474>>ASSIGN   8476<<ASSIGN   8476>>ASSIGN   8477<<ASSIGN   8477>>ASSIGN
      8478<<ASSIGN   8483<<ASSIGN   8485<<ASSIGN   8487<<ASSIGN   8489<<ASSIGN   8491<<ASSIGN   8493<<ASSIGN
      8495<<ASSIGN   8497<<ASSIGN   8499<<ASSIGN   8501<<ASSIGN   8503<<ASSIGN   8505<<ASSIGN   8507<<ASSIGN
      8509<<ASSIGN   8511<<ASSIGN   8513<<ASSIGN   8515<<ASSIGN   8517<<ASSIGN   8519<<ASSIGN   8521<<ASSIGN
      8523<<ASSIGN   8525<<ASSIGN   8527<<ASSIGN   8529<<ASSIGN   8531<<ASSIGN   8533<<ASSIGN   8535<<ASSIGN
      8537<<ASSIGN   8539<<ASSIGN   8541<<ASSIGN   8543<<ASSIGN   8545<<ASSIGN   8547<<ASSIGN   8549<<ASSIGN
      8560>>ASSIGN   8563>>ASSIGN   8564>>ASSIGN
XDEL_LS.BOUND
      8173**DCL      8475<<ASSIGN   8479<<ASSIGN   8484<<ASSIGN   8486<<ASSIGN   8488<<ASSIGN   8490<<ASSIGN
      8492<<ASSIGN   8494<<ASSIGN   8496<<ASSIGN   8498<<ASSIGN   8500<<ASSIGN   8502<<ASSIGN   8504<<ASSIGN
      8506<<ASSIGN   8508<<ASSIGN   8510<<ASSIGN   8512<<ASSIGN   8514<<ASSIGN   8516<<ASSIGN   8518<<ASSIGN
PL6.E3A0      #004=INITX File=ISI$MM.:E05TSI                                     TUE 07/29/97 22:55 Page:178  
      8520<<ASSIGN   8522<<ASSIGN   8524<<ASSIGN   8526<<ASSIGN   8528<<ASSIGN   8530<<ASSIGN   8532<<ASSIGN
      8534<<ASSIGN   8536<<ASSIGN   8538<<ASSIGN   8540<<ASSIGN   8542<<ASSIGN   8544<<ASSIGN   8546<<ASSIGN
      8548<<ASSIGN   8550<<ASSIGN
XDEL_LS$
      8196**DCL      8172--IMP-PTR  8474>>ASSIGN   8474>>ASSIGN   8475>>ASSIGN   8476>>ASSIGN   8476>>ASSIGN
      8477>>ASSIGN   8477>>ASSIGN   8478>>ASSIGN   8479>>ASSIGN   8483>>ASSIGN   8484>>ASSIGN   8485>>ASSIGN
      8486>>ASSIGN   8487>>ASSIGN   8488>>ASSIGN   8489>>ASSIGN   8490>>ASSIGN   8491>>ASSIGN   8492>>ASSIGN
      8493>>ASSIGN   8494>>ASSIGN   8495>>ASSIGN   8496>>ASSIGN   8497>>ASSIGN   8498>>ASSIGN   8499>>ASSIGN
      8500>>ASSIGN   8501>>ASSIGN   8502>>ASSIGN   8503>>ASSIGN   8504>>ASSIGN   8505>>ASSIGN   8506>>ASSIGN
      8507>>ASSIGN   8508>>ASSIGN   8509>>ASSIGN   8510>>ASSIGN   8511>>ASSIGN   8512>>ASSIGN   8513>>ASSIGN
      8514>>ASSIGN   8515>>ASSIGN   8516>>ASSIGN   8517>>ASSIGN   8518>>ASSIGN   8519>>ASSIGN   8520>>ASSIGN
      8521>>ASSIGN   8522>>ASSIGN   8523>>ASSIGN   8524>>ASSIGN   8525>>ASSIGN   8526>>ASSIGN   8527>>ASSIGN
      8528>>ASSIGN   8529>>ASSIGN   8530>>ASSIGN   8531>>ASSIGN   8532>>ASSIGN   8533>>ASSIGN   8534>>ASSIGN
      8535>>ASSIGN   8536>>ASSIGN   8537>>ASSIGN   8538>>ASSIGN   8539>>ASSIGN   8540>>ASSIGN   8541>>ASSIGN
      8542>>ASSIGN   8543>>ASSIGN   8544>>ASSIGN   8545>>ASSIGN   8546>>ASSIGN   8547>>ASSIGN   8548>>ASSIGN
      8549>>ASSIGN   8550>>ASSIGN   8552>>ASSIGN   8553>>ASSIGN   8558>>ASSIGN   8560>>ASSIGN   8561>>ASSIGN
      8562>>ASSIGN   8563>>ASSIGN   8564>>ASSIGN   8576>>CALL
XDEL_LS_PTR
      8189**DCL      8196--REDEF
XDEL_LS_PTR.WOFFS
      8190**DCL      8437<<ASSIGN   8476>>ASSIGN   8477>>ASSIGN
XDFLAG
      8407**DCL      8466<<ASSIGN   8565<<ASSIGN   8565>>ASSIGN

PL6.E3A0      #005=ITIG File=ISI$MM.:E05TSI                                      TUE 07/29/97 22:56 Page:179  
      832        1        /*T***********************************************************/
      833        2        /*T*                                                         */
      834        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      835        4        /*T*                                                         */
      836        5        /*T***********************************************************/
      837        6        ITIG:   PROC;
      838        7        /* This program initializes TIGR config table */
      839        8        %INCLUDE IS$MACROS;
      840     1283        %INCLUDE IT$CONFIG;                     /* TIGR config table                  */
      841     1352        /**/
      842     1353        %DEVINFO(STCLASS="SYMREF");
      843     1422        %IOM_TAB(NAME=IOMTAB,STCLASS="SYMREF");
      844     1439        /* Firmware information */
      845     1440        %FW_TAB(NAME=TAPE_FW,STCLASS="SYMREF",ENT#=3);
      846     1457        %FW_TAB(NAME=DISK_FW,STCLASS="SYMREF",ENT#=2);
      847     1474        %FW_TAB(NAME=UR_FW,STCLASS="SYMREF",ENT#=3);
      848     1491        %FW_TAB(NAME=LP_FW,STCLASS="SYMREF",ENT#=1);
      849     1508        %FW_TAB(NAME=CRP_FW,STCLASS="SYMREF",ENT#=1);
      850     1525        /**/
      851     1526        %IT$CONFIG(STCLASS="BASED(INFOX$)");
      852     1587    1   DCL IT_CONFIG BIT(1) SYMREF;
      853     1588    1   DCL INFOX$ PTR;
      854     1589        %PTR_STRUCT(NAME=INFOX_PTR,STCLASS="REDEF INFOX$");
      855     1607    1   DCL SYS_DPX UBIN WORD SYMREF;
      856     1608    1   DCL PO_INDX UBIN WORD SYMREF;
      857     1609    1   DCL FWTINDX UBIN WORD SYMREF;
      858     1610    1   DCL FEPCHAN UBIN WORD SYMREF;
      859     1611    1   DCL DPCNF UBIN(9) UNAL SYMREF;
      860     1612    1   DCL S1000_FLG BIT(1) SYMREF;
      861     1613        /**/
      862     1614    1           INFOX$=ADDR(IT_CONFIG);
      863     1615    1           INFOX_PTR.S_D_FIELD=%ALS_MONIS; /* Frame config table                 */
      864     1616    1           IT$CONFIG.TC01.IOM =DEVINFO.IOM#(PO_INDX); /* Tape IOM                */
      865     1617    1           IT$CONFIG.TC01.CHAN=DEVINFO.CHN#(PO_INDX); /* Tape channel            */
      866     1618    1           IT$CONFIG.MT01.DVN=DEVINFO.DEV#(PO_INDX); /* PO tape dev#             */
      867     1619    1           IF FWTINDX=0 THEN IT$CONFIG.MT02.DVN=0; /* No FW tape                 */
      868     1620    1             ELSE IT$CONFIG.MT02.DVN=DEVINFO.DEV#(FWTINDX); /* FW tape dev#      */
PL6.E3A0      #005=ITIG File=ISI$MM.:E05TSI                                      TUE 07/29/97 22:56 Page:180  
      869     1621    1           IT$CONFIG.DC01.IOM =DEVINFO.IOM#(SYS_DPX); /* System disk IOM         */
      870     1622    1           IT$CONFIG.DC01.CHAN=DEVINFO.CHN#(SYS_DPX); /* System disk channel     */
      871     1623    1           IT$CONFIG.DP01.DVN=DEVINFO.DEV#(SYS_DPX); /* System disk dev#         */
      872     1624    1           IT$CONFIG.UC01.IOM=DEVINFO.IOM#(%FRSTLP);
      873     1625    1           IT$CONFIG.LP01.IOM =DEVINFO.IOM#(%FRSTLP); /* LP                      */
      874     1626    1           IT$CONFIG.LP01.CHAN=DEVINFO.CHN#(%FRSTLP); /* LP                      */
      875     1627    1           IT$CONFIG.CR01.IOM =DEVINFO.IOM#(%FRSTCR); /* CR                      */
      876     1628    1           IT$CONFIG.CR01.CHAN=DEVINFO.CHN#(%FRSTCR); /* CR                      */
      877     1629    1           IT$CONFIG.SC01.IOM =DEVINFO.IOM#(0); /* Console                       */
      878     1630    1           IT$CONFIG.SC01.CHAN=DEVINFO.CHN#(0); /* Console                       */
      879     1631    1           IT$CONFIG.IOM.PORT=IOMTAB.PORT#(DEVINFO.IOM#(0)); /* Port#            */
      880     1632    1           IT$CONFIG.DP01.DVC_CODE=DPCNF;  /* Disk type                          */
      881     1633    1           IT$CONFIG.FEP1.CHAN=FEPCHAN;    /* FEP                                */
      882     1634    1           IF S1000_FLG THEN RETURN;       /* No FW on an S1000                  */
      883     1635    1             ELSE;
      884     1636        /* Fill up firmware info */
      885     1637    1           IF TAPE_FW.FW_INDX >= 0 THEN
      886     1638    1             IT$CONFIG.TC01.FWNAME=TAPE_FW.MODN(TAPE_FW.FW_INDX);
      887     1639    1           IF DISK_FW.FW_INDX >= 0 THEN
      888     1640    1             IT$CONFIG.DC01.FWNAME=DISK_FW.MODN(DISK_FW.FW_INDX);
      889     1641    1           IF UR_FW.FW_INDX >= 0 THEN
      890     1642    1             IT$CONFIG.UC01.FWNAME=UR_FW.MODN(UR_FW.FW_INDX);
      891     1643    1           IF LP_FW.FW_INDX >= 0 THEN
      892     1644    1             IT$CONFIG.UC01.LPNAME=LP_FW.MODN(LP_FW.FW_INDX);
      893     1645    1           IF CRP_FW.FW_INDX >= 0 THEN
      894     1646    1             IT$CONFIG.UC01.CRPNAME=CRP_FW.MODN(CRP_FW.FW_INDX);
      895     1647    1           RETURN;
      896     1648    1   END ITIG;
      897     1649        %EOD;

PL6.E3A0      #005=ITIG File=ISI$MM.:E05TSI                                      TUE 07/29/97 22:56 Page:181  
--  Include file information  --

   IT$CONFIG.:E05TOU  is referenced.
   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure ITIG.

   Procedure ITIG requires 111 words for executable code.
   Procedure ITIG requires 4 words of local(AUTO) storage.

PL6.E3A0      #005=ITIG File=ISI$MM.:E05TSI                                      TUE 07/29/97 22:56 Page:182  

 Object Unit name= ITIG                                       File name= ISI$MM.:E05TOU
 UTS= JUL 29 '97 22:56:16.48 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none   111    157  ITIG
    1  RoData even  none     1      1  ITIG

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes            yes      Std        0  ITIG

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     DEVINFO                               IOMTAB                                TAPE_FW
     DISK_FW                               UR_FW                                 LP_FW
     CRP_FW                                IT_CONFIG                             SYS_DPX
     PO_INDX                               FWTINDX                               FEPCHAN
     DPCNF                                 S1000_FLG
PL6.E3A0      #005=ITIG File=ISI$MM.:E05TSI                                      TUE 07/29/97 22:56 Page:183  

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #005=ITIG File=ISI$MM.:E05TSI                                      TUE 07/29/97 22:56 Page:184  


      832        1        /*T***********************************************************/
      833        2        /*T*                                                         */
      834        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      835        4        /*T*                                                         */
      836        5        /*T***********************************************************/
      837        6        ITIG:   PROC;

      6  0 000000   000000 700200 xent  ITIG         TSX0  ! X66_AUTO_0
         0 000001   000004 000000                    ZERO    4,0

      838        7        /* This program initializes TIGR config table */
      839        8        %INCLUDE IS$MACROS;
      840     1283        %INCLUDE IT$CONFIG;                     /* TIGR config table                  */
      841     1352        /**/
      842     1353        %DEVINFO(STCLASS="SYMREF");
      843     1422        %IOM_TAB(NAME=IOMTAB,STCLASS="SYMREF");
      844     1439        /* Firmware information */
      845     1440        %FW_TAB(NAME=TAPE_FW,STCLASS="SYMREF",ENT#=3);
      846     1457        %FW_TAB(NAME=DISK_FW,STCLASS="SYMREF",ENT#=2);
      847     1474        %FW_TAB(NAME=UR_FW,STCLASS="SYMREF",ENT#=3);
      848     1491        %FW_TAB(NAME=LP_FW,STCLASS="SYMREF",ENT#=1);
      849     1508        %FW_TAB(NAME=CRP_FW,STCLASS="SYMREF",ENT#=1);
      850     1525        /**/
      851     1526        %IT$CONFIG(STCLASS="BASED(INFOX$)");
      852     1587    1   DCL IT_CONFIG BIT(1) SYMREF;
      853     1588    1   DCL INFOX$ PTR;
      854     1589        %PTR_STRUCT(NAME=INFOX_PTR,STCLASS="REDEF INFOX$");
      855     1607    1   DCL SYS_DPX UBIN WORD SYMREF;
      856     1608    1   DCL PO_INDX UBIN WORD SYMREF;
      857     1609    1   DCL FWTINDX UBIN WORD SYMREF;
      858     1610    1   DCL FEPCHAN UBIN WORD SYMREF;
      859     1611    1   DCL DPCNF UBIN(9) UNAL SYMREF;
      860     1612    1   DCL S1000_FLG BIT(1) SYMREF;
      861     1613        /**/
      862     1614    1           INFOX$=ADDR(IT_CONFIG);

PL6.E3A0      #005=ITIG File=ISI$MM.:E05TSI                                      TUE 07/29/97 22:56 Page:185  
   1614  0 000002   000000 236000 1                  LDQ     0
         0 000003   200003 756100                    STQ     INFOX$,,AUTO

      863     1615    1           INFOX_PTR.S_D_FIELD=%ALS_MONIS; /* Frame config table                 */

   1615  0 000004   006050 236007                    LDQ     3112,DL
         0 000005   200003 752103                    STCQ    INFOX$,'03'O,AUTO

      864     1616    1           IT$CONFIG.TC01.IOM =DEVINFO.IOM#(PO_INDX); /* Tape IOM                */

   1616  0 000006   000000 236000 xsym               LDQ     PO_INDX
         0 000007   000014 402007                    MPY     12,DL
         0 000010   200003 470500                    LDP0    INFOX$,,AUTO
         0 000011   000000 236006 xsym               LDQ     DEVINFO,QL
         0 000012   000023 772000                    QRL     19
         0 000013   000003 376007                    ANQ     3,DL
         0 000014   000014 756100                    STQ     12,,PR0

      865     1617    1           IT$CONFIG.TC01.CHAN=DEVINFO.CHN#(PO_INDX); /* Tape channel            */

   1617  0 000015   000000 236000 xsym               LDQ     PO_INDX
         0 000016   000014 402007                    MPY     12,DL
         0 000017   000000 236006 xsym               LDQ     DEVINFO,QL
         0 000020   000033 772000                    QRL     27
         0 000021   000015 756100                    STQ     13,,PR0

      866     1618    1           IT$CONFIG.MT01.DVN=DEVINFO.DEV#(PO_INDX); /* PO tape dev#             */

   1618  0 000022   000000 236000 xsym               LDQ     PO_INDX
         0 000023   000014 402007                    MPY     12,DL
         0 000024   000000 236006 xsym               LDQ     DEVINFO,QL
         0 000025   000025 772000                    QRL     21
         0 000026   000077 376007                    ANQ     63,DL
         0 000027   000017 756100                    STQ     15,,PR0

      867     1619    1           IF FWTINDX=0 THEN IT$CONFIG.MT02.DVN=0; /* No FW tape                 */

PL6.E3A0      #005=ITIG File=ISI$MM.:E05TSI                                      TUE 07/29/97 22:56 Page:186  
   1619  0 000030   000000 235000 xsym               LDA     FWTINDX
         0 000031   000034 601000 0                  TNZ     s:1620

   1619  0 000032   000020 450100                    STZ     16,,PR0
         0 000033   000042 710000 0                  TRA     s:1621

      868     1620    1             ELSE IT$CONFIG.MT02.DVN=DEVINFO.DEV#(FWTINDX); /* FW tape dev#      */

   1620  0 000034   000000 236000 xsym               LDQ     FWTINDX
         0 000035   000014 402007                    MPY     12,DL
         0 000036   000000 236006 xsym               LDQ     DEVINFO,QL
         0 000037   000025 772000                    QRL     21
         0 000040   000077 376007                    ANQ     63,DL
         0 000041   000020 756100                    STQ     16,,PR0

      869     1621    1           IT$CONFIG.DC01.IOM =DEVINFO.IOM#(SYS_DPX); /* System disk IOM         */

   1621  0 000042   000000 236000 xsym               LDQ     SYS_DPX
         0 000043   000014 402007                    MPY     12,DL
         0 000044   000000 236006 xsym               LDQ     DEVINFO,QL
         0 000045   000023 772000                    QRL     19
         0 000046   000003 376007                    ANQ     3,DL
         0 000047   000021 756100                    STQ     17,,PR0

      870     1622    1           IT$CONFIG.DC01.CHAN=DEVINFO.CHN#(SYS_DPX); /* System disk channel     */

   1622  0 000050   000000 236000 xsym               LDQ     SYS_DPX
         0 000051   000014 402007                    MPY     12,DL
         0 000052   000000 236006 xsym               LDQ     DEVINFO,QL
         0 000053   000033 772000                    QRL     27
         0 000054   000022 756100                    STQ     18,,PR0

      871     1623    1           IT$CONFIG.DP01.DVN=DEVINFO.DEV#(SYS_DPX); /* System disk dev#         */

   1623  0 000055   000000 236000 xsym               LDQ     SYS_DPX
         0 000056   000014 402007                    MPY     12,DL
         0 000057   000000 236006 xsym               LDQ     DEVINFO,QL
PL6.E3A0      #005=ITIG File=ISI$MM.:E05TSI                                      TUE 07/29/97 22:56 Page:187  
         0 000060   000025 772000                    QRL     21
         0 000061   000077 376007                    ANQ     63,DL
         0 000062   000024 756100                    STQ     20,,PR0

      872     1624    1           IT$CONFIG.UC01.IOM=DEVINFO.IOM#(%FRSTLP);

   1624  0 000063   000014 236000 xsym               LDQ     DEVINFO+12
         0 000064   000023 772000                    QRL     19
         0 000065   000003 376007                    ANQ     3,DL
         0 000066   000003 756100                    STQ     3,,PR0

      873     1625    1           IT$CONFIG.LP01.IOM =DEVINFO.IOM#(%FRSTLP); /* LP                      */

   1625  0 000067   000014 236000 xsym               LDQ     DEVINFO+12
         0 000070   000023 772000                    QRL     19
         0 000071   000003 376007                    ANQ     3,DL
         0 000072   000010 756100                    STQ     8,,PR0

      874     1626    1           IT$CONFIG.LP01.CHAN=DEVINFO.CHN#(%FRSTLP); /* LP                      */

   1626  0 000073   000014 236000 xsym               LDQ     DEVINFO+12
         0 000074   000033 772000                    QRL     27
         0 000075   000011 756100                    STQ     9,,PR0

      875     1627    1           IT$CONFIG.CR01.IOM =DEVINFO.IOM#(%FRSTCR); /* CR                      */

   1627  0 000076   000030 236000 xsym               LDQ     DEVINFO+24
         0 000077   000023 772000                    QRL     19
         0 000100   000003 376007                    ANQ     3,DL
         0 000101   000012 756100                    STQ     10,,PR0

      876     1628    1           IT$CONFIG.CR01.CHAN=DEVINFO.CHN#(%FRSTCR); /* CR                      */

   1628  0 000102   000030 236000 xsym               LDQ     DEVINFO+24
         0 000103   000033 772000                    QRL     27
         0 000104   000013 756100                    STQ     11,,PR0

PL6.E3A0      #005=ITIG File=ISI$MM.:E05TSI                                      TUE 07/29/97 22:56 Page:188  
      877     1629    1           IT$CONFIG.SC01.IOM =DEVINFO.IOM#(0); /* Console                       */

   1629  0 000105   000000 236000 xsym               LDQ     DEVINFO
         0 000106   000023 772000                    QRL     19
         0 000107   000003 376007                    ANQ     3,DL
         0 000110   000001 756100                    STQ     1,,PR0

      878     1630    1           IT$CONFIG.SC01.CHAN=DEVINFO.CHN#(0); /* Console                       */

   1630  0 000111   000000 236000 xsym               LDQ     DEVINFO
         0 000112   000033 772000                    QRL     27
         0 000113   000002 756100                    STQ     2,,PR0

      879     1631    1           IT$CONFIG.IOM.PORT=IOMTAB.PORT#(DEVINFO.IOM#(0)); /* Port#            */

   1631  0 000114   000000 236000 xsym               LDQ     DEVINFO
         0 000115   000023 772000                    QRL     19
         0 000116   000003 376007                    ANQ     3,DL
         0 000117   000000 236006 xsym               LDQ     IOMTAB,QL
         0 000120   000007 376007                    ANQ     7,DL
         0 000121   000000 756100                    STQ     0,,PR0

      880     1632    1           IT$CONFIG.DP01.DVC_CODE=DPCNF;  /* Disk type                          */

   1632  0 000122   000000 236000 xsym               LDQ     DPCNF
         0 000123   000033 772000                    QRL     27
         0 000124   000025 756100                    STQ     21,,PR0

      881     1633    1           IT$CONFIG.FEP1.CHAN=FEPCHAN;    /* FEP                                */

   1633  0 000125   000000 235000 xsym               LDA     FEPCHAN
         0 000126   000026 755100                    STA     22,,PR0

      882     1634    1           IF S1000_FLG THEN RETURN;       /* No FW on an S1000                  */

   1634  0 000127   000000 234000 xsym               SZN     S1000_FLG
         0 000130   000132 605000 0                  TPL     s:1637
PL6.E3A0      #005=ITIG File=ISI$MM.:E05TSI                                      TUE 07/29/97 22:56 Page:189  

   1634  0 000131   000000 702200 xent               TSX2  ! X66_ARET

      883     1635    1             ELSE;
      884     1636        /* Fill up firmware info */
      885     1637    1           IF TAPE_FW.FW_INDX >= 0 THEN

   1637  0 000132   000001 235000 xsym               LDA     TAPE_FW+1
         0 000133   000136 604000 0                  TMI     s:1639

      886     1638    1             IT$CONFIG.TC01.FWNAME=TAPE_FW.MODN(TAPE_FW.FW_INDX);

   1638  0 000134   000002 236005 xsym               LDQ     TAPE_FW+2,AL
         0 000135   000016 756100                    STQ     14,,PR0

      887     1639    1           IF DISK_FW.FW_INDX >= 0 THEN

   1639  0 000136   000001 235000 xsym               LDA     DISK_FW+1
         0 000137   000142 604000 0                  TMI     s:1641

      888     1640    1             IT$CONFIG.DC01.FWNAME=DISK_FW.MODN(DISK_FW.FW_INDX);

   1640  0 000140   000002 236005 xsym               LDQ     DISK_FW+2,AL
         0 000141   000023 756100                    STQ     19,,PR0

      889     1641    1           IF UR_FW.FW_INDX >= 0 THEN

   1641  0 000142   000001 235000 xsym               LDA     UR_FW+1
         0 000143   000146 604000 0                  TMI     s:1643

      890     1642    1             IT$CONFIG.UC01.FWNAME=UR_FW.MODN(UR_FW.FW_INDX);

   1642  0 000144   000002 236005 xsym               LDQ     UR_FW+2,AL
         0 000145   000005 756100                    STQ     5,,PR0

      891     1643    1           IF LP_FW.FW_INDX >= 0 THEN

PL6.E3A0      #005=ITIG File=ISI$MM.:E05TSI                                      TUE 07/29/97 22:56 Page:190  
   1643  0 000146   000001 235000 xsym               LDA     LP_FW+1
         0 000147   000152 604000 0                  TMI     s:1645

      892     1644    1             IT$CONFIG.UC01.LPNAME=LP_FW.MODN(LP_FW.FW_INDX);

   1644  0 000150   000002 236005 xsym               LDQ     LP_FW+2,AL
         0 000151   000006 756100                    STQ     6,,PR0

      893     1645    1           IF CRP_FW.FW_INDX >= 0 THEN

   1645  0 000152   000001 235000 xsym               LDA     CRP_FW+1
         0 000153   000156 604000 0                  TMI     s:1647

      894     1646    1             IT$CONFIG.UC01.CRPNAME=CRP_FW.MODN(CRP_FW.FW_INDX);

   1646  0 000154   000002 236005 xsym               LDQ     CRP_FW+2,AL
         0 000155   000007 756100                    STQ     7,,PR0

      895     1647    1           RETURN;

   1647  0 000156   000000 702200 xent               TSX2  ! X66_ARET
      896     1648    1   END ITIG;
      897     1649        %EOD;

PL6.E3A0      #005=ITIG File=ISI$MM.:E05TSI                                      TUE 07/29/97 22:56 Page:191  
--  Include file information  --

   IT$CONFIG.:E05TOU  is referenced.
   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure ITIG.
PL6.E3A0      #005=ITIG File=ISI$MM.:E05TSI                                      TUE 07/29/97 22:56 Page:192  

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 INFOX$                     3-0-0/w STRC        r     1 INFOX_PTR

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(108)   r     1 CRP_FW                     0-0-0/d STRC(396)   r     1 DEVINFO(0:21)
     0-0-0/w STRC(144)   r     1 DISK_FW                    0-0-0/b UBIN(9)     r     1 DPCNF
     0-0-0/w UBIN        r     1 FEPCHAN                    0-0-0/w UBIN        r     1 FWTINDX
     0-0-0/w STRC        r     1 IOMTAB(0:3)                0-0-0/b BIT         r     1 IT_CONFIG
     0-0-0/w STRC(108)   r     1 LP_FW                      0-0-0/w UBIN        r     1 PO_INDX
     0-0-0/b BIT         r     1 S1000_FLG                  0-0-0/w UBIN        r     1 SYS_DPX
     0-0-0/w STRC(180)   r     1 TAPE_FW                    0-0-0/w STRC(180)   r     1 UR_FW

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(936)   r     1 IT$CONFIG


   Procedure ITIG requires 111 words for executable code.
   Procedure ITIG requires 4 words of local(AUTO) storage.
PL6.E3A0      #005=ITIG File=ISI$MM.:E05TSI                                      TUE 07/29/97 22:56 Page:193  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #005=ITIG File=ISI$MM.:E05TSI                                      TUE 07/29/97 22:56 Page:194  
          MINI XREF LISTING

CRP_FW.FW_INDX
      1521**DCL      1645>>IF       1646>>ASSIGN
CRP_FW.MODN
      1522**DCL      1646>>ASSIGN
DEVINFO.CHN#
      1365**DCL      1617>>ASSIGN   1622>>ASSIGN   1626>>ASSIGN   1628>>ASSIGN   1630>>ASSIGN
DEVINFO.DEV#
      1366**DCL      1618>>ASSIGN   1620>>ASSIGN   1623>>ASSIGN
DEVINFO.IOM#
      1367**DCL      1616>>ASSIGN   1621>>ASSIGN   1624>>ASSIGN   1625>>ASSIGN   1627>>ASSIGN   1629>>ASSIGN
      1631>>ASSIGN
DEVINFO.PCWS
      1369**DCL      1380--REDEF
DEVINFO.RPM_PTRS.EF_DCWS$
      1382**DCL      1383--REDEF
DEVINFO.STATUS
      1386**DCL      1405--REDEF
DISK_FW.FW_INDX
      1470**DCL      1639>>IF       1640>>ASSIGN
DISK_FW.MODN
      1471**DCL      1640>>ASSIGN
DPCNF
      1611**DCL      1632>>ASSIGN
FEPCHAN
      1610**DCL      1633>>ASSIGN
FWTINDX
      1609**DCL      1619>>IF       1620>>ASSIGN
INFOX$
      1588**DCL      1549--IMP-PTR  1600--REDEF    1614<<ASSIGN   1616>>ASSIGN   1617>>ASSIGN   1618>>ASSIGN
      1619>>ASSIGN   1620>>ASSIGN   1621>>ASSIGN   1622>>ASSIGN   1623>>ASSIGN   1624>>ASSIGN   1625>>ASSIGN
      1626>>ASSIGN   1627>>ASSIGN   1628>>ASSIGN   1629>>ASSIGN   1630>>ASSIGN   1631>>ASSIGN   1632>>ASSIGN
      1633>>ASSIGN   1638>>ASSIGN   1640>>ASSIGN   1642>>ASSIGN   1644>>ASSIGN   1646>>ASSIGN
PL6.E3A0      #005=ITIG File=ISI$MM.:E05TSI                                      TUE 07/29/97 22:56 Page:195  
INFOX_PTR.S_D_FIELD
      1604**DCL      1615<<ASSIGN
IOMTAB.PORT#
      1436**DCL      1631>>ASSIGN
IT$CONFIG.CR01.CHAN
      1566**DCL      1628<<ASSIGN
IT$CONFIG.CR01.IOM
      1565**DCL      1627<<ASSIGN
IT$CONFIG.DC01.CHAN
      1577**DCL      1622<<ASSIGN
IT$CONFIG.DC01.FWNAME
      1578**DCL      1640<<ASSIGN
IT$CONFIG.DC01.IOM
      1576**DCL      1621<<ASSIGN
IT$CONFIG.DP01.DVC_CODE
      1581**DCL      1632<<ASSIGN
IT$CONFIG.DP01.DVN
      1580**DCL      1623<<ASSIGN
IT$CONFIG.FEP1.CHAN
      1584**DCL      1633<<ASSIGN
IT$CONFIG.IOM.PORT
      1551**DCL      1631<<ASSIGN
IT$CONFIG.LP01.CHAN
      1563**DCL      1626<<ASSIGN
IT$CONFIG.LP01.IOM
      1562**DCL      1625<<ASSIGN
IT$CONFIG.MT01.DVN
      1572**DCL      1618<<ASSIGN
IT$CONFIG.MT02.DVN
      1574**DCL      1619<<ASSIGN   1620<<ASSIGN
IT$CONFIG.SC01.CHAN
      1554**DCL      1630<<ASSIGN
IT$CONFIG.SC01.IOM
      1553**DCL      1629<<ASSIGN
IT$CONFIG.TC01.CHAN
      1569**DCL      1617<<ASSIGN
PL6.E3A0      #005=ITIG File=ISI$MM.:E05TSI                                      TUE 07/29/97 22:56 Page:196  
IT$CONFIG.TC01.FWNAME
      1570**DCL      1638<<ASSIGN
IT$CONFIG.TC01.IOM
      1568**DCL      1616<<ASSIGN
IT$CONFIG.UC01.CRPNAME
      1560**DCL      1646<<ASSIGN
IT$CONFIG.UC01.FWNAME
      1558**DCL      1642<<ASSIGN
IT$CONFIG.UC01.IOM
      1556**DCL      1624<<ASSIGN
IT$CONFIG.UC01.LPNAME
      1559**DCL      1644<<ASSIGN
IT_CONFIG
      1587**DCL      1614--ASSIGN
LP_FW.FW_INDX
      1504**DCL      1643>>IF       1644>>ASSIGN
LP_FW.MODN
      1505**DCL      1644>>ASSIGN
PO_INDX
      1608**DCL      1616>>ASSIGN   1617>>ASSIGN   1618>>ASSIGN
S1000_FLG
      1612**DCL      1634>>IF
SYS_DPX
      1607**DCL      1621>>ASSIGN   1622>>ASSIGN   1623>>ASSIGN
TAPE_FW.FW_INDX
      1453**DCL      1637>>IF       1638>>ASSIGN
TAPE_FW.MODN
      1454**DCL      1638>>ASSIGN
UR_FW.FW_INDX
      1487**DCL      1641>>IF       1642>>ASSIGN
UR_FW.MODN
      1488**DCL      1642>>ASSIGN

PL6.E3A0      #006=ACONFIG File=ISI$MM.:E05TSI                                   TUE 07/29/97 22:56 Page:197  
      898        1        /*T***********************************************************/
      899        2        /*T*                                                         */
      900        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      901        4        /*T*                                                         */
      902        5        /*T***********************************************************/
      903        6        ACONFIG: PROC ALTRET;
      904        7        /* This program is changing AARDVARK configuration
      905        8           according to device addresses in IT$CONFIG    */
      906        9        %INCLUDE IS$MACROS;
      907     1284        %INCLUDE IT$CONFIG;
      908     1353        /**/
      909     1354        %DEVINFO(STCLASS="SYMREF");
      910     1423        %IOM_TAB(NAME=IOMTAB,STCLASS="SYMREF");
      911     1440        %IT$CONFIG(STCLASS="BASED(INFOX$)");
      912     1501        /**/
      913     1502    1   DCL RWAARD ENTRY ALTRET;
      914     1503    1   DCL IT_CONFIG BIT(1) SYMREF;
      915     1504    1   DCL INFOX$ PTR;
      916     1505        %PTR_STRUCT(NAME=INFOX_PTR,STCLASS="REDEF INFOX$");
      917     1523    1   DCL SYS_DPX UBIN WORD SYMREF;
      918     1524    1   DCL PO_INDX UBIN WORD SYMREF;
      919     1525    1   DCL 1 DISK_BOOTINFO SYMREF ,            /* Boot info as booting from disk     */
      920     1526    1         2 BCHN# UBIN(9) UNAL,
      921     1527    1         2 * BIT(24) ,
      922     1528    1         2 BPORT# UBIN(3) UNAL,
      923     1529    1         2 BIOMAD UBIN(18) UNAL,
      924     1530    1         2 BIMWAD UBIN(13) UNAL,
      925     1531    1         2 * BIT(3),
      926     1532    1         2 BIOM# UBIN(2) UNAL;
      927     1533    1   DCL 1 RPM_DISK_BOOTINFO SYMREF,
      928     1534    1         2 CC BIT(9),
      929     1535    1         2 * BIT(9),
      930     1536    1         2 BCHN# UBIN HALF UNAL;
      931     1537    1   DCL RPM_FLG BIT(1) SYMREF;
      932     1538        /**/
      933     1539    1           INFOX$=ADDR(IT_CONFIG);
      934     1540    1           INFOX_PTR.S_D_FIELD=%ALS_MONIS; /* Frame CONFIG table                 */
PL6.E3A0      #006=ACONFIG File=ISI$MM.:E05TSI                                   TUE 07/29/97 22:56 Page:198  
      935     1541        /* Reset console info */
      936     1542    1           DEVINFO.IOM#(0)=IT$CONFIG.SC01.IOM;
      937     1543    1           DEVINFO.CHN#(0)=IT$CONFIG.SC01.CHAN;
      938     1544        /* Reset System disk info */
      939     1545    1           DEVINFO.IOM#(SYS_DPX)=IT$CONFIG.DC01.IOM;
      940     1546    1           DEVINFO.CHN#(SYS_DPX)=IT$CONFIG.DC01.CHAN;
      941     1547    1           CALL BINCHAR(SUBSTR(DEVINFO.DEVNAME(SYS_DPX),0,1),DEVINFO.IOM#(SYS_DPX));
      942     1548    1           CALL BINCHAR(SUBSTR(DEVINFO.DEVNAME(SYS_DPX),2,3),DEVINFO.CHN#(SYS_DPX));
      943     1549        /* Reset LP info */
      944     1550    1           DEVINFO.IOM#(%FRSTLP)=IT$CONFIG.LP01.IOM;
      945     1551    1           DEVINFO.CHN#(%FRSTLP)=IT$CONFIG.LP01.CHAN;
      946     1552    1           CALL BINCHAR(SUBSTR(DEVINFO.DEVNAME(%FRSTLP),3,1),DEVINFO.IOM#(%FRSTLP));
      947     1553    1           CALL BINCHAR(SUBSTR(DEVINFO.DEVNAME(%FRSTLP),5,3),DEVINFO.CHN#(%FRSTLP));
      948     1554        /* Reset CR info */
      949     1555    1           DEVINFO.IOM#(%FRSTCR)=IT$CONFIG.CR01.IOM;
      950     1556    1           DEVINFO.CHN#(%FRSTCR)=IT$CONFIG.CR01.CHAN;
      951     1557    1           CALL BINCHAR(SUBSTR(DEVINFO.DEVNAME(%FRSTCR),3,1),DEVINFO.IOM#(%FRSTCR));
      952     1558    1           CALL BINCHAR(SUBSTR(DEVINFO.DEVNAME(%FRSTCR),5,3),DEVINFO.CHN#(%FRSTCR));
      953     1559        /* Change Boot info */
      954     1560    1           IF RPM_FLG THEN RPM_DISK_BOOTINFO.BCHN#=DEVINFO.IOM#(SYS_DPX)*128+DEVINFO.
              1560                    CHN#(SYS_DPX)+8;
      955     1561    2             ELSE DO;
      956     1562    2                 DISK_BOOTINFO.BCHN#=DEVINFO.CHN#(SYS_DPX);
      957     1563    2                 DISK_BOOTINFO.BPORT#=IOMTAB.PORT#(DEVINFO.IOM#(SYS_DPX));
      958     1564    2                 DISK_BOOTINFO.BIOMAD=IOMTAB.MAILBAD(DEVINFO.IOM#(SYS_DPX));
      959     1565    2                 DISK_BOOTINFO.BIOM#=DEVINFO.IOM#(SYS_DPX);
      960     1566    2               END;
      961     1567    2           CALL RWAARD WHENALTRETURN DO;   /* Rewrite AARDVARK on disk           */
      962     1568    2                 ALTRETURN;
      963     1569    2               END;
      964     1570    1           RETURN;
      965     1571    1   END ACONFIG;
      966     1572        %EOD;

PL6.E3A0      #006=ACONFIG File=ISI$MM.:E05TSI                                   TUE 07/29/97 22:56 Page:199  
--  Include file information  --

   IT$CONFIG.:E05TOU  is referenced.
   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure ACONFIG.

   Procedure ACONFIG requires 134 words for executable code.
   Procedure ACONFIG requires 8 words of local(AUTO) storage.

PL6.E3A0      #006=ACONFIG File=ISI$MM.:E05TSI                                   TUE 07/29/97 22:56 Page:200  

 Object Unit name= ACONFIG                                    File name= ISI$MM.:E05TOU
 UTS= JUL 29 '97 22:56:21.60 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none   134    206  ACONFIG
    1  RoData even  none     1      1  ACONFIG

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes    yes     yes      Std        0  ACONFIG

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       0 RWAARD
                       nStd      0 X66_AUTO_0
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     DEVINFO                               IOMTAB                                IT_CONFIG
     SYS_DPX                               DISK_BOOTINFO                         RPM_DISK_BOOTINFO
     RPM_FLG                               B_VECTNIL
PL6.E3A0      #006=ACONFIG File=ISI$MM.:E05TSI                                   TUE 07/29/97 22:56 Page:201  

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #006=ACONFIG File=ISI$MM.:E05TSI                                   TUE 07/29/97 22:56 Page:202  


      898        1        /*T***********************************************************/
      899        2        /*T*                                                         */
      900        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      901        4        /*T*                                                         */
      902        5        /*T***********************************************************/
      903        6        ACONFIG: PROC ALTRET;

      6  0 000000   000000 700200 xent  ACONFIG      TSX0  ! X66_AUTO_0
         0 000001   000010 000000                    ZERO    8,0

      904        7        /* This program is changing AARDVARK configuration
      905        8           according to device addresses in IT$CONFIG    */
      906        9        %INCLUDE IS$MACROS;
      907     1284        %INCLUDE IT$CONFIG;
      908     1353        /**/
      909     1354        %DEVINFO(STCLASS="SYMREF");
      910     1423        %IOM_TAB(NAME=IOMTAB,STCLASS="SYMREF");
      911     1440        %IT$CONFIG(STCLASS="BASED(INFOX$)");
      912     1501        /**/
      913     1502    1   DCL RWAARD ENTRY ALTRET;
      914     1503    1   DCL IT_CONFIG BIT(1) SYMREF;
      915     1504    1   DCL INFOX$ PTR;
      916     1505        %PTR_STRUCT(NAME=INFOX_PTR,STCLASS="REDEF INFOX$");
      917     1523    1   DCL SYS_DPX UBIN WORD SYMREF;
      918     1524    1   DCL PO_INDX UBIN WORD SYMREF;
      919     1525    1   DCL 1 DISK_BOOTINFO SYMREF ,            /* Boot info as booting from disk     */
      920     1526    1         2 BCHN# UBIN(9) UNAL,
      921     1527    1         2 * BIT(24) ,
      922     1528    1         2 BPORT# UBIN(3) UNAL,
      923     1529    1         2 BIOMAD UBIN(18) UNAL,
      924     1530    1         2 BIMWAD UBIN(13) UNAL,
      925     1531    1         2 * BIT(3),
      926     1532    1         2 BIOM# UBIN(2) UNAL;
      927     1533    1   DCL 1 RPM_DISK_BOOTINFO SYMREF,
      928     1534    1         2 CC BIT(9),
      929     1535    1         2 * BIT(9),
PL6.E3A0      #006=ACONFIG File=ISI$MM.:E05TSI                                   TUE 07/29/97 22:56 Page:203  
      930     1536    1         2 BCHN# UBIN HALF UNAL;
      931     1537    1   DCL RPM_FLG BIT(1) SYMREF;
      932     1538        /**/
      933     1539    1           INFOX$=ADDR(IT_CONFIG);

   1539  0 000002   000000 236000 1                  LDQ     0
         0 000003   200003 756100                    STQ     INFOX$,,AUTO

      934     1540    1           INFOX_PTR.S_D_FIELD=%ALS_MONIS; /* Frame CONFIG table                 */

   1540  0 000004   006050 236007                    LDQ     3112,DL
         0 000005   200003 752103                    STCQ    INFOX$,'03'O,AUTO

      935     1541        /* Reset console info */
      936     1542    1           DEVINFO.IOM#(0)=IT$CONFIG.SC01.IOM;

   1542  0 000006   200003 470500                    LDP0    INFOX$,,AUTO
         0 000007   000001 236100                    LDQ     1,,PR0
         0 000010   000023 736000                    QLS     19
         0 000011   000000 676000 xsym               ERQ     DEVINFO
         0 000012   000006 376003                    ANQ     6,DU
         0 000013   000000 656000 xsym               ERSQ    DEVINFO

      937     1543    1           DEVINFO.CHN#(0)=IT$CONFIG.SC01.CHAN;

   1543  0 000014   000002 236100                    LDQ     2,,PR0
         0 000015   000033 736000                    QLS     27
         0 000016   000000 552040 xsym               STBQ    DEVINFO,'40'O

      938     1544        /* Reset System disk info */
      939     1545    1           DEVINFO.IOM#(SYS_DPX)=IT$CONFIG.DC01.IOM;

   1545  0 000017   000000 236000 xsym               LDQ     SYS_DPX
         0 000020   000014 402007                    MPY     12,DL
         0 000021   000000 620006                    EAX0    0,QL
         0 000022   000021 236100                    LDQ     17,,PR0
         0 000023   000023 736000                    QLS     19
PL6.E3A0      #006=ACONFIG File=ISI$MM.:E05TSI                                   TUE 07/29/97 22:56 Page:204  
         0 000024   000000 676010 xsym               ERQ     DEVINFO,X0
         0 000025   000006 376003                    ANQ     6,DU
         0 000026   000000 656010 xsym               ERSQ    DEVINFO,X0

      940     1546    1           DEVINFO.CHN#(SYS_DPX)=IT$CONFIG.DC01.CHAN;

   1546  0 000027   000022 236100                    LDQ     18,,PR0
         0 000030   000033 736000                    QLS     27
         0 000031   000000 676010 xsym               ERQ     DEVINFO,X0
         0 000032   777000 376003                    ANQ     -512,DU
         0 000033   000000 656010 xsym               ERSQ    DEVINFO,X0

      941     1547    1           CALL BINCHAR(SUBSTR(DEVINFO.DEVNAME(SYS_DPX),0,1),DEVINFO.IOM#(SYS_DPX));

   1547  0 000034   000000 236000 xsym               LDQ     SYS_DPX
         0 000035   000060 402007                    MPY     48,DL
         0 000036   200004 756100                    STQ     INFOX$+1,,AUTO
         0 000037   000000 236010 xsym               LDQ     DEVINFO,X0
         0 000040   000023 772000                    QRL     19
         0 000041   000003 376007                    ANQ     3,DL
         0 000042   000000 235003                    LDA     0,DU
         0 000043   200006 757100                    STAQ    INFOX$+3,,AUTO
         0 000044   200004 235100                    LDA     INFOX$+1,,AUTO
         0 000045   000005 301500                    BTD
         0 000046   200006 000010                    NDSC9   INFOX$+3,,AUTO           cn=0,s=lsgnf,sf=0,n=8
         0 000047   000006 030001 xsym               NDSC9   DEVINFO+6,A              cn=0,s=nosgn,sf=0,n=1

      942     1548    1           CALL BINCHAR(SUBSTR(DEVINFO.DEVNAME(SYS_DPX),2,3),DEVINFO.CHN#(SYS_DPX));

   1548  0 000050   000000 236000 xsym               LDQ     SYS_DPX
         0 000051   000060 402007                    MPY     48,DL
         0 000052   200004 756100                    STQ     INFOX$+1,,AUTO
         0 000053   000000 236010 xsym               LDQ     DEVINFO,X0
         0 000054   000033 772000                    QRL     27
         0 000055   000000 235003                    LDA     0,DU
         0 000056   200006 757100                    STAQ    INFOX$+3,,AUTO
         0 000057   200004 235100                    LDA     INFOX$+1,,AUTO
PL6.E3A0      #006=ACONFIG File=ISI$MM.:E05TSI                                   TUE 07/29/97 22:56 Page:205  
         0 000060   000005 301500                    BTD
         0 000061   200006 000010                    NDSC9   INFOX$+3,,AUTO           cn=0,s=lsgnf,sf=0,n=8
         0 000062   000006 430003 xsym               NDSC9   DEVINFO+6,A              cn=2,s=nosgn,sf=0,n=3

      943     1549        /* Reset LP info */
      944     1550    1           DEVINFO.IOM#(%FRSTLP)=IT$CONFIG.LP01.IOM;

   1550  0 000063   000010 236100                    LDQ     8,,PR0
         0 000064   000023 736000                    QLS     19
         0 000065   000014 676000 xsym               ERQ     DEVINFO+12
         0 000066   000006 376003                    ANQ     6,DU
         0 000067   000014 656000 xsym               ERSQ    DEVINFO+12

      945     1551    1           DEVINFO.CHN#(%FRSTLP)=IT$CONFIG.LP01.CHAN;

   1551  0 000070   000011 236100                    LDQ     9,,PR0
         0 000071   000033 736000                    QLS     27
         0 000072   000014 552040 xsym               STBQ    DEVINFO+12,'40'O

      946     1552    1           CALL BINCHAR(SUBSTR(DEVINFO.DEVNAME(%FRSTLP),3,1),DEVINFO.IOM#(%FRSTLP));

   1552  0 000073   000014 236000 xsym               LDQ     DEVINFO+12
         0 000074   000023 772000                    QRL     19
         0 000075   000003 376007                    ANQ     3,DL
         0 000076   000000 235003                    LDA     0,DU
         0 000077   200004 757100                    STAQ    INFOX$+1,,AUTO
         0 000100   000000 301500                    BTD
         0 000101   200004 000010                    NDSC9   INFOX$+1,,AUTO           cn=0,s=lsgnf,sf=0,n=8
         0 000102   000022 630001 xsym               NDSC9   DEVINFO+18               cn=3,s=nosgn,sf=0,n=1

      947     1553    1           CALL BINCHAR(SUBSTR(DEVINFO.DEVNAME(%FRSTLP),5,3),DEVINFO.CHN#(%FRSTLP));

   1553  0 000103   000014 236000 xsym               LDQ     DEVINFO+12
         0 000104   000033 772000                    QRL     27
         0 000105   000000 235003                    LDA     0,DU
         0 000106   200004 757100                    STAQ    INFOX$+1,,AUTO
         0 000107   000000 301500                    BTD
PL6.E3A0      #006=ACONFIG File=ISI$MM.:E05TSI                                   TUE 07/29/97 22:56 Page:206  
         0 000110   200004 000010                    NDSC9   INFOX$+1,,AUTO           cn=0,s=lsgnf,sf=0,n=8
         0 000111   000023 230003 xsym               NDSC9   DEVINFO+19               cn=1,s=nosgn,sf=0,n=3

      948     1554        /* Reset CR info */
      949     1555    1           DEVINFO.IOM#(%FRSTCR)=IT$CONFIG.CR01.IOM;

   1555  0 000112   000012 236100                    LDQ     10,,PR0
         0 000113   000023 736000                    QLS     19
         0 000114   000030 676000 xsym               ERQ     DEVINFO+24
         0 000115   000006 376003                    ANQ     6,DU
         0 000116   000030 656000 xsym               ERSQ    DEVINFO+24

      950     1556    1           DEVINFO.CHN#(%FRSTCR)=IT$CONFIG.CR01.CHAN;

   1556  0 000117   000013 236100                    LDQ     11,,PR0
         0 000120   000033 736000                    QLS     27
         0 000121   000030 552040 xsym               STBQ    DEVINFO+24,'40'O

      951     1557    1           CALL BINCHAR(SUBSTR(DEVINFO.DEVNAME(%FRSTCR),3,1),DEVINFO.IOM#(%FRSTCR));

   1557  0 000122   000030 236000 xsym               LDQ     DEVINFO+24
         0 000123   000023 772000                    QRL     19
         0 000124   000003 376007                    ANQ     3,DL
         0 000125   000000 235003                    LDA     0,DU
         0 000126   200004 757100                    STAQ    INFOX$+1,,AUTO
         0 000127   000000 301500                    BTD
         0 000130   200004 000010                    NDSC9   INFOX$+1,,AUTO           cn=0,s=lsgnf,sf=0,n=8
         0 000131   000036 630001 xsym               NDSC9   DEVINFO+30               cn=3,s=nosgn,sf=0,n=1

      952     1558    1           CALL BINCHAR(SUBSTR(DEVINFO.DEVNAME(%FRSTCR),5,3),DEVINFO.CHN#(%FRSTCR));

   1558  0 000132   000030 236000 xsym               LDQ     DEVINFO+24
         0 000133   000033 772000                    QRL     27
         0 000134   000000 235003                    LDA     0,DU
         0 000135   200004 757100                    STAQ    INFOX$+1,,AUTO
         0 000136   000000 301500                    BTD
         0 000137   200004 000010                    NDSC9   INFOX$+1,,AUTO           cn=0,s=lsgnf,sf=0,n=8
PL6.E3A0      #006=ACONFIG File=ISI$MM.:E05TSI                                   TUE 07/29/97 22:56 Page:207  
         0 000140   000037 230003 xsym               NDSC9   DEVINFO+31               cn=1,s=nosgn,sf=0,n=3

      953     1559        /* Change Boot info */
      954     1560    1           IF RPM_FLG THEN RPM_DISK_BOOTINFO.BCHN#=DEVINFO.IOM#(SYS_DPX)*128+DEVINFO.
              1560                    CHN#(SYS_DPX)+8;

   1560  0 000141   000000 234000 xsym               SZN     RPM_FLG
         0 000142   000155 605000 0                  TPL     s:1562

   1560  0 000143   000000 236010 xsym               LDQ     DEVINFO,X0
         0 000144   000033 772000                    QRL     27
         0 000145   200004 756100                    STQ     INFOX$+1,,AUTO
         0 000146   000000 236010 xsym               LDQ     DEVINFO,X0
         0 000147   000014 772000                    QRL     12
         0 000150   000600 376007                    ANQ     384,DL
         0 000151   200004 036100                    ADLQ    INFOX$+1,,AUTO
         0 000152   000010 621006                    EAX1    8,QL
         0 000153   000000 441000 xsym               SXL1    RPM_DISK_BOOTINFO
         0 000154   000200 710000 0                  TRA     s:1567

      955     1561    2             ELSE DO;

      956     1562    2                 DISK_BOOTINFO.BCHN#=DEVINFO.CHN#(SYS_DPX);

   1562  0 000155   000000 236010 xsym               LDQ     DEVINFO,X0
         0 000156   000000 552040 xsym               STBQ    DISK_BOOTINFO,'40'O

      957     1563    2                 DISK_BOOTINFO.BPORT#=IOMTAB.PORT#(DEVINFO.IOM#(SYS_DPX));

   1563  0 000157   000000 236010 xsym               LDQ     DEVINFO,X0
         0 000160   000023 772000                    QRL     19
         0 000161   000003 376007                    ANQ     3,DL
         0 000162   000000 236006 xsym               LDQ     IOMTAB,QL
         0 000163   000000 676000 xsym               ERQ     DISK_BOOTINFO
         0 000164   000007 376007                    ANQ     7,DL
         0 000165   000000 656000 xsym               ERSQ    DISK_BOOTINFO

PL6.E3A0      #006=ACONFIG File=ISI$MM.:E05TSI                                   TUE 07/29/97 22:56 Page:208  
      958     1564    2                 DISK_BOOTINFO.BIOMAD=IOMTAB.MAILBAD(DEVINFO.IOM#(SYS_DPX));

   1564  0 000166   000000 236010 xsym               LDQ     DEVINFO,X0
         0 000167   000023 772000                    QRL     19
         0 000170   000003 376007                    ANQ     3,DL
         0 000171   000000 221006 xsym               LDX1    IOMTAB,QL
         0 000172   000001 741000 xsym               STX1    DISK_BOOTINFO+1

      959     1565    2                 DISK_BOOTINFO.BIOM#=DEVINFO.IOM#(SYS_DPX);

   1565  0 000173   000000 236010 xsym               LDQ     DEVINFO,X0
         0 000174   000023 772000                    QRL     19
         0 000175   000001 676000 xsym               ERQ     DISK_BOOTINFO+1
         0 000176   000003 376007                    ANQ     3,DL
         0 000177   000001 656000 xsym               ERSQ    DISK_BOOTINFO+1

      960     1566    2               END;

      961     1567    2           CALL RWAARD WHENALTRETURN DO;   /* Rewrite AARDVARK on disk           */

   1567  0 000200   000002 631400 xsym               EPPR1   B_VECTNIL+2
         0 000201   000000 701000 xent               TSX1    RWAARD
         0 000202   000204 702000 0                  TSX2    s:1568
         0 000203   000205 710000 0                  TRA     s:1570

      962     1568    2                 ALTRETURN;

   1568  0 000204   000000 702200 xent               TSX2  ! X66_AALT

      963     1569    2               END;
      964     1570    1           RETURN;

   1570  0 000205   000000 702200 xent               TSX2  ! X66_ARET
      965     1571    1   END ACONFIG;
      966     1572        %EOD;

PL6.E3A0      #006=ACONFIG File=ISI$MM.:E05TSI                                   TUE 07/29/97 22:56 Page:209  
--  Include file information  --

   IT$CONFIG.:E05TOU  is referenced.
   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure ACONFIG.
PL6.E3A0      #006=ACONFIG File=ISI$MM.:E05TSI                                   TUE 07/29/97 22:56 Page:210  

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 INFOX$                     3-0-0/w STRC        r     1 INFOX_PTR

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(396)   r     1 DEVINFO(0:21)              0-0-0/b STRC(72)    r     1 DISK_BOOTINFO
     0-0-0/w STRC        r     1 IOMTAB(0:3)                0-0-0/b BIT         r     1 IT_CONFIG
     0-0-0/b STRC        r     1 RPM_DISK_BOOTINFO          0-0-0/b BIT         r     1 RPM_FLG
     0-0-0/w UBIN        r     1 SYS_DPX

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(936)   r     1 IT$CONFIG


   Procedure ACONFIG requires 134 words for executable code.
   Procedure ACONFIG requires 8 words of local(AUTO) storage.
PL6.E3A0      #006=ACONFIG File=ISI$MM.:E05TSI                                   TUE 07/29/97 22:56 Page:211  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #006=ACONFIG File=ISI$MM.:E05TSI                                   TUE 07/29/97 22:56 Page:212  
          MINI XREF LISTING

DEVINFO.CHN#
      1366**DCL      1543<<ASSIGN   1546<<ASSIGN   1548>>CALLBLT  1551<<ASSIGN   1553>>CALLBLT  1556<<ASSIGN
      1558>>CALLBLT  1560>>ASSIGN   1562>>ASSIGN
DEVINFO.DEVNAME
      1413**DCL      1547<<CALLBLT  1548<<CALLBLT  1552<<CALLBLT  1553<<CALLBLT  1557<<CALLBLT  1558<<CALLBLT
DEVINFO.IOM#
      1368**DCL      1542<<ASSIGN   1545<<ASSIGN   1547>>CALLBLT  1550<<ASSIGN   1552>>CALLBLT  1555<<ASSIGN
      1557>>CALLBLT  1560>>ASSIGN   1563>>ASSIGN   1564>>ASSIGN   1565>>ASSIGN
DEVINFO.PCWS
      1370**DCL      1381--REDEF
DEVINFO.RPM_PTRS.EF_DCWS$
      1383**DCL      1384--REDEF
DEVINFO.STATUS
      1387**DCL      1406--REDEF
DISK_BOOTINFO.BCHN#
      1526**DCL      1562<<ASSIGN
DISK_BOOTINFO.BIOM#
      1532**DCL      1565<<ASSIGN
DISK_BOOTINFO.BIOMAD
      1529**DCL      1564<<ASSIGN
DISK_BOOTINFO.BPORT#
      1528**DCL      1563<<ASSIGN
INFOX$
      1504**DCL      1463--IMP-PTR  1516--REDEF    1539<<ASSIGN   1542>>ASSIGN   1543>>ASSIGN   1545>>ASSIGN
      1546>>ASSIGN   1550>>ASSIGN   1551>>ASSIGN   1555>>ASSIGN   1556>>ASSIGN
INFOX_PTR.S_D_FIELD
      1520**DCL      1540<<ASSIGN
IOMTAB.MAILBAD
      1435**DCL      1564>>ASSIGN
IOMTAB.PORT#
      1437**DCL      1563>>ASSIGN
IT$CONFIG.CR01.CHAN
PL6.E3A0      #006=ACONFIG File=ISI$MM.:E05TSI                                   TUE 07/29/97 22:56 Page:213  
      1480**DCL      1556>>ASSIGN
IT$CONFIG.CR01.IOM
      1479**DCL      1555>>ASSIGN
IT$CONFIG.DC01.CHAN
      1491**DCL      1546>>ASSIGN
IT$CONFIG.DC01.IOM
      1490**DCL      1545>>ASSIGN
IT$CONFIG.LP01.CHAN
      1477**DCL      1551>>ASSIGN
IT$CONFIG.LP01.IOM
      1476**DCL      1550>>ASSIGN
IT$CONFIG.SC01.CHAN
      1468**DCL      1543>>ASSIGN
IT$CONFIG.SC01.IOM
      1467**DCL      1542>>ASSIGN
IT_CONFIG
      1503**DCL      1539--ASSIGN
RPM_DISK_BOOTINFO.BCHN#
      1536**DCL      1560<<ASSIGN
RPM_FLG
      1537**DCL      1560>>IF
RWAARD
      1502**DCL-ENT  1567--CALL
SYS_DPX
      1523**DCL      1545>>ASSIGN   1546>>ASSIGN   1547>>CALLBLT  1547>>CALLBLT  1548>>CALLBLT  1548>>CALLBLT
      1560>>ASSIGN   1560>>ASSIGN   1562>>ASSIGN   1563>>ASSIGN   1564>>ASSIGN   1565>>ASSIGN

PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:214  
      967        1        /*T***********************************************************/
      968        2        /*T*                                                         */
      969        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      970        4        /*T*                                                         */
      971        5        /*T***********************************************************/
      972        6        FREEXD: PROC(COUNT);
      973        7        /* This program frees XDELTA and firmware pages */
      974        8        /* When entered  COUNT=previous count of free pages
      975        9           at return COUNT=updated count of free pages */
      976       10        %INCLUDE IS$MACROS;
      977     1285        %INCLUDE MM_DATA_R;
      978     1805        %AALS(STCLASS="BASED(AALS$)");
      979     4132    1   DCL AALS$ PTR SYMREF;
      980     4133    1   DCL HIPAGE UBIN SYMREF;
      981     4134    1   DCL IS_PPUT_SIZE UBIN SYMREF;
      982     4135    1   DCL PHYMEM_SZ UBIN SYMREF;
      983     4136    1   DCL IPHYPG UBIN SYMREF;
      984     4137    1   DCL RPM_FLG BIT(1) ALIGNED SYMREF;
      985     4138    1   DCL S1000_FLG BIT(1) ALIGNED SYMREF;
      986     4139    1   DCL COUNT UBIN WORD;
      987     4140    1   DCL BASE UBIN WORD;                     /* Base of space to free (page#)      */
      988     4141    1   DCL SIZE UBIN WORD;                     /* Size of space to free (page#)      */
      989     4142    1   DCL FP_TAIL UBIN WORD;                  /* Free page chain tail               */
      990     4143    1   DCL BAS_UBIN UBIN WORD BASED;
      991     4144    1   DCL INFOX$ PTR;
      992     4145        %PTR_STRUCT(NAME=INFOX_PTR,STCLASS="REDEF INFOX$");
      993     4163    1   DCL WMON$ PTR;
      994     4164        %PTR_STRUCT(NAME=WMON_PTR,STCLASS="REDEF WMON$");
      995     4182        %PTR_STRUCT(NAME=FWSTART_PTR,STCLASS="SYMREF"); /* FW Start address           */
      996     4200    1   DCL FW$ PTR SYMREF;                     /* FW end address                     */
      997     4201        %PTR_STRUCT(NAME=FW_PTR,STCLASS="REDEF FW$");
      998     4219        %DIRHDR(NAME=HDRXLS,STCLASS="SYMREF");  /* XDELTA LS                          */
      999     4230        %DIRHDR(NAME=HDRXIS,STCLASS="SYMREF");  /* XDELTA IS                          */
     1000     4241        %DIRHDR(NAME=HDRME,STCLASS="SYMREF");   /* MON Entdefs                        */
     1001     4252        %DIRHDR(NAME=HDRMS,STCLASS="SYMREF");   /* MON Symdefs                        */
     1002     4263        %DIRHDR(NAME=HDRMN,STCLASS="SYMREF");   /* MON Def names                      */
     1003     4274        %DIRHDR(NAME=HDRDBS,STCLASS="SYMREF");  /* MON Deb schema                     */
PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:215  
     1004     4285    1   DCL FREE_PGS ENTRY(4);
     1005     4286        /**/
     1006     4287    1           INFOX_PTR='0'B;
     1007     4288    1           INFOX_PTR.S_D_FIELD=%ALS_MONIS; /* Frame Mon IS                       */
     1008     4289    1           WMON$=ADDR(MM_XDEL);
     1009     4290    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=0; /* Zero size of XDELTA     */
     1010     4291    1           WMON$=ADDR(MM_FPPT);            /* Tail of current free page chain    */
     1011     4292    1           FP_TAIL=PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN;
     1012     4293    1           BASE=HDRXLS.BASE/1024;
     1013     4294    1           SIZE=(HDRXLS.BASE+HDRXLS.SIZE+1023)/1024-BASE;
     1014     4295    1           CALL FREE_PGS(BASE,SIZE,COUNT,FP_TAIL); /* Free pages                 */
     1015     4296    1           BASE=HDRXIS.BASE/1024;
     1016     4297    1           SIZE=(HDRXIS.BASE+HDRXIS.SIZE+1023)/1024-BASE;
     1017     4298    1           CALL FREE_PGS(BASE,SIZE,COUNT,FP_TAIL); /* Free pages                 */
     1018     4299    1           BASE=HDRME.BASE/1024;
     1019     4300    1           SIZE=(HDRME.BASE+HDRME.SIZE+1023)/1024-BASE;
     1020     4301    1           CALL FREE_PGS(BASE,SIZE,COUNT,FP_TAIL); /* Free pages                 */
     1021     4302    1           BASE=HDRMS.BASE/1024;
     1022     4303    1           SIZE=(HDRMS.BASE+HDRMS.SIZE+1023)/1024-BASE;
     1023     4304    1           CALL FREE_PGS(BASE,SIZE,COUNT,FP_TAIL); /* Free pages                 */
     1024     4305    1           BASE=HDRMN.BASE/1024;
     1025     4306    1           SIZE=(HDRMN.BASE+HDRMN.SIZE+1023)/1024-BASE;
     1026     4307    1           CALL FREE_PGS(BASE,SIZE,COUNT,FP_TAIL); /* Free pages                 */
     1027     4308    1           BASE=HDRDBS.BASE/1024;
     1028     4309    1           SIZE=(HDRDBS.BASE+HDRDBS.SIZE+1023)/1024-BASE;
     1029     4310    1           CALL FREE_PGS(BASE,SIZE,COUNT,FP_TAIL); /* Free pages                 */
     1030     4311    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=FP_TAIL;
              4311                    /* Update tail of free page chain */
     1031     4312    1           RETURN;
     1032     4313    1   FREEFW: ENTRY(COUNT);
     1033     4314        /* Free FW pages */
     1034     4315    1           INFOX_PTR='0'B;
     1035     4316    1           INFOX_PTR.S_D_FIELD=%ALS_MONIS; /* Frame Mon IS                       */
     1036     4317    1           WMON$=ADDR(MM_FPPT);            /* Tail of current free page chain    */
     1037     4318    1           FP_TAIL=PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN;
     1038     4319    1           BASE=FWSTART_PTR.WOFFS/1024;
     1039     4320    1           SIZE=(FW_PTR.WOFFS+1023)/1024-BASE;
PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:216  
     1040     4321    1           CALL FREE_PGS(BASE,SIZE,COUNT,FP_TAIL); /* Free pages                 */
     1041     4322    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=FP_TAIL;
              4322                    /* Update tail of free page chain */
     1042     4323    1           RETURN;
     1043     4324    1   FREETABLES: ENTRY(COUNT);
     1044     4325        /* Free PPUT and reverse map unused pages */
     1045     4326    1           INFOX_PTR='0'B;
     1046     4327    1           INFOX_PTR.S_D_FIELD=%ALS_MONIS; /* Frame Mon IS                       */
     1047     4328    1           WMON$=ADDR(MM_FPPT);            /* Tail of current free page chain    */
     1048     4329    1           FP_TAIL=PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN;
     1049     4330    1           BASE=AALS.DESCPPUT.BASE/4/1024+(IS_PPUT_SIZE+1+1023)/1024;
     1050     4331    1           IF S1000_FLG THEN SIZE=(%S1000_MAXMEMPG-IS_PPUT_SIZE)/1024;
     1051     4332    1             ELSE
     1052     4333    1             IF RPM_FLG THEN
     1053     4334    1               SIZE=(%RPM_MAXMEMPG-IS_PPUT_SIZE)/1024;
     1054     4335    1               ELSE SIZE=(%MAXMEMPG-IS_PPUT_SIZE)/1024;
     1055     4336    1           CALL FREE_PGS(BASE,SIZE,COUNT,FP_TAIL); /* Free pages                 */
     1056     4337    2           IF S1000_FLG THEN DO;           /* On S1000 release reverse map pages */
     1057     4338    2                 BASE=IPHYPG/1024+(PHYMEM_SZ/2+1+1023)/1024;
     1058     4339    2                 SIZE=(%S1000_MAXMEMPG-PHYMEM_SZ)/2048;
     1059     4340    2                 CALL FREE_PGS(BASE,SIZE,COUNT,FP_TAIL); /* Free pages           */
     1060     4341    2               END;                        /* THEN                               */
     1061     4342    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=FP_TAIL;
              4342                    /* Update tail of free page chain */
     1062     4343    1           RETURN;
     1063     4344    1   END FREEXD;
     1064     4345        %EOD;

PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:217  
--  Include file information  --

   MM_MACRO_M.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   MM$SYSGEN.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   MM_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure FREEXD.

   Procedure FREEXD requires 267 words for executable code.
   Procedure FREEXD requires 14 words of local(AUTO) storage.

PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:218  

 Object Unit name= FREEXD                                     File name= ISI$MM.:E05TOU
 UTS= JUL 29 '97 22:56:26.40 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none   267    413  FREEXD
    1  RoData even  none     2      2  FREEXD

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes            yes      Std        1  FREEXD
     0    222                  yes      Std        1  FREEFW
     0    270                  yes      Std        1  FREETABLES

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       4 FREE_PGS
                       nStd      0 X66_AUTO_1
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:219  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     MM_FPPT                          r    MM_BYP$                               MM_XDEL
     AALS$                                 IS_PPUT_SIZE                          PHYMEM_SZ
     IPHYPG                                RPM_FLG                               S1000_FLG
     FWSTART_PTR                           FW$                                   HDRXLS
     HDRXIS                                HDRME                                 HDRMS
     HDRMN                                 HDRDBS                                B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:220  


      967        1        /*T***********************************************************/
      968        2        /*T*                                                         */
      969        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      970        4        /*T*                                                         */
      971        5        /*T***********************************************************/
      972        6        FREEXD: PROC(COUNT);

      6  0 000000   000000 700200 xent  FREEXD       TSX0  ! X66_AUTO_1
         0 000001   000016 000001                    ZERO    14,1

      973        7        /* This program frees XDELTA and firmware pages */
      974        8        /* When entered  COUNT=previous count of free pages
      975        9           at return COUNT=updated count of free pages */
      976       10        %INCLUDE IS$MACROS;
      977     1285        %INCLUDE MM_DATA_R;
      978     1805        %AALS(STCLASS="BASED(AALS$)");
      979     4132    1   DCL AALS$ PTR SYMREF;
      980     4133    1   DCL HIPAGE UBIN SYMREF;
      981     4134    1   DCL IS_PPUT_SIZE UBIN SYMREF;
      982     4135    1   DCL PHYMEM_SZ UBIN SYMREF;
      983     4136    1   DCL IPHYPG UBIN SYMREF;
      984     4137    1   DCL RPM_FLG BIT(1) ALIGNED SYMREF;
      985     4138    1   DCL S1000_FLG BIT(1) ALIGNED SYMREF;
      986     4139    1   DCL COUNT UBIN WORD;
      987     4140    1   DCL BASE UBIN WORD;                     /* Base of space to free (page#)      */
      988     4141    1   DCL SIZE UBIN WORD;                     /* Size of space to free (page#)      */
      989     4142    1   DCL FP_TAIL UBIN WORD;                  /* Free page chain tail               */
      990     4143    1   DCL BAS_UBIN UBIN WORD BASED;
      991     4144    1   DCL INFOX$ PTR;
      992     4145        %PTR_STRUCT(NAME=INFOX_PTR,STCLASS="REDEF INFOX$");
      993     4163    1   DCL WMON$ PTR;
      994     4164        %PTR_STRUCT(NAME=WMON_PTR,STCLASS="REDEF WMON$");
      995     4182        %PTR_STRUCT(NAME=FWSTART_PTR,STCLASS="SYMREF"); /* FW Start address           */
      996     4200    1   DCL FW$ PTR SYMREF;                     /* FW end address                     */
      997     4201        %PTR_STRUCT(NAME=FW_PTR,STCLASS="REDEF FW$");
      998     4219        %DIRHDR(NAME=HDRXLS,STCLASS="SYMREF");  /* XDELTA LS                          */
PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:221  
      999     4230        %DIRHDR(NAME=HDRXIS,STCLASS="SYMREF");  /* XDELTA IS                          */
     1000     4241        %DIRHDR(NAME=HDRME,STCLASS="SYMREF");   /* MON Entdefs                        */
     1001     4252        %DIRHDR(NAME=HDRMS,STCLASS="SYMREF");   /* MON Symdefs                        */
     1002     4263        %DIRHDR(NAME=HDRMN,STCLASS="SYMREF");   /* MON Def names                      */
     1003     4274        %DIRHDR(NAME=HDRDBS,STCLASS="SYMREF");  /* MON Deb schema                     */
     1004     4285    1   DCL FREE_PGS ENTRY(4);
     1005     4286        /**/
     1006     4287    1           INFOX_PTR='0'B;

   4287  0 000002   200007 450100                    STZ     INFOX$,,AUTO

     1007     4288    1           INFOX_PTR.S_D_FIELD=%ALS_MONIS; /* Frame Mon IS                       */

   4288  0 000003   006050 236007                    LDQ     3112,DL
         0 000004   200007 752103                    STCQ    INFOX$,'03'O,AUTO

     1008     4289    1           WMON$=ADDR(MM_XDEL);

   4289  0 000005   000000 236000 1                  LDQ     0
         0 000006   200010 756100                    STQ     WMON$,,AUTO

     1009     4290    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=0; /* Zero size of XDELTA     */

   4290  0 000007   200007 470500                    LDP0    INFOX$,,AUTO
         0 000010   200010 220100                    LDX0    WMON$,,AUTO
         0 000011   000000 450110                    STZ     0,X0,PR0

     1010     4291    1           WMON$=ADDR(MM_FPPT);            /* Tail of current free page chain    */

   4291  0 000012   000001 236000 1                  LDQ     1
         0 000013   200010 756100                    STQ     WMON$,,AUTO

     1011     4292    1           FP_TAIL=PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN;

   4292  0 000014   200010 220100                    LDX0    WMON$,,AUTO
         0 000015   000000 235110                    LDA     0,X0,PR0
         0 000016   200006 755100                    STA     FP_TAIL,,AUTO
PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:222  

     1012     4293    1           BASE=HDRXLS.BASE/1024;

   4293  0 000017   000000 236000 xsym               LDQ     HDRXLS
         0 000020   002000 506007                    DIV     1024,DL
         0 000021   200004 756100                    STQ     BASE,,AUTO

     1013     4294    1           SIZE=(HDRXLS.BASE+HDRXLS.SIZE+1023)/1024-BASE;

   4294  0 000022   000000 236000 xsym               LDQ     HDRXLS
         0 000023   000002 036000 xsym               ADLQ    HDRXLS+2
         0 000024   001777 036007                    ADLQ    1023,DL
         0 000025   002000 506007                    DIV     1024,DL
         0 000026   200004 136100                    SBLQ    BASE,,AUTO
         0 000027   200005 756100                    STQ     SIZE,,AUTO

     1014     4295    1           CALL FREE_PGS(BASE,SIZE,COUNT,FP_TAIL); /* Free pages                 */

   4295  0 000030   200006 631500                    EPPR1   FP_TAIL,,AUTO
         0 000031   200015 451500                    STP1    WMON$+5,,AUTO
         0 000032   200003 236100                    LDQ     @COUNT,,AUTO
         0 000033   200014 756100                    STQ     WMON$+4,,AUTO
         0 000034   200005 633500                    EPPR3   SIZE,,AUTO
         0 000035   200013 453500                    STP3    WMON$+3,,AUTO
         0 000036   200004 634500                    EPPR4   BASE,,AUTO
         0 000037   200012 454500                    STP4    WMON$+2,,AUTO
         0 000040   200012 630500                    EPPR0   WMON$+2,,AUTO
         0 000041   000022 631400 xsym               EPPR1   B_VECTNIL+18
         0 000042   000000 701000 xent               TSX1    FREE_PGS
         0 000043   000000 011000                    NOP     0

     1015     4296    1           BASE=HDRXIS.BASE/1024;

   4296  0 000044   000000 236000 xsym               LDQ     HDRXIS
         0 000045   002000 506007                    DIV     1024,DL
         0 000046   200004 756100                    STQ     BASE,,AUTO

PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:223  
     1016     4297    1           SIZE=(HDRXIS.BASE+HDRXIS.SIZE+1023)/1024-BASE;

   4297  0 000047   000000 236000 xsym               LDQ     HDRXIS
         0 000050   000002 036000 xsym               ADLQ    HDRXIS+2
         0 000051   001777 036007                    ADLQ    1023,DL
         0 000052   002000 506007                    DIV     1024,DL
         0 000053   200004 136100                    SBLQ    BASE,,AUTO
         0 000054   200005 756100                    STQ     SIZE,,AUTO

     1017     4298    1           CALL FREE_PGS(BASE,SIZE,COUNT,FP_TAIL); /* Free pages                 */

   4298  0 000055   200006 630500                    EPPR0   FP_TAIL,,AUTO
         0 000056   200015 450500                    STP0    WMON$+5,,AUTO
         0 000057   200003 236100                    LDQ     @COUNT,,AUTO
         0 000060   200014 756100                    STQ     WMON$+4,,AUTO
         0 000061   200005 631500                    EPPR1   SIZE,,AUTO
         0 000062   200013 451500                    STP1    WMON$+3,,AUTO
         0 000063   200004 633500                    EPPR3   BASE,,AUTO
         0 000064   200012 453500                    STP3    WMON$+2,,AUTO
         0 000065   200012 630500                    EPPR0   WMON$+2,,AUTO
         0 000066   000022 631400 xsym               EPPR1   B_VECTNIL+18
         0 000067   000000 701000 xent               TSX1    FREE_PGS
         0 000070   000000 011000                    NOP     0

     1018     4299    1           BASE=HDRME.BASE/1024;

   4299  0 000071   000000 236000 xsym               LDQ     HDRME
         0 000072   002000 506007                    DIV     1024,DL
         0 000073   200004 756100                    STQ     BASE,,AUTO

     1019     4300    1           SIZE=(HDRME.BASE+HDRME.SIZE+1023)/1024-BASE;

   4300  0 000074   000000 236000 xsym               LDQ     HDRME
         0 000075   000002 036000 xsym               ADLQ    HDRME+2
         0 000076   001777 036007                    ADLQ    1023,DL
         0 000077   002000 506007                    DIV     1024,DL
         0 000100   200004 136100                    SBLQ    BASE,,AUTO
PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:224  
         0 000101   200005 756100                    STQ     SIZE,,AUTO

     1020     4301    1           CALL FREE_PGS(BASE,SIZE,COUNT,FP_TAIL); /* Free pages                 */

   4301  0 000102   200006 630500                    EPPR0   FP_TAIL,,AUTO
         0 000103   200015 450500                    STP0    WMON$+5,,AUTO
         0 000104   200003 236100                    LDQ     @COUNT,,AUTO
         0 000105   200014 756100                    STQ     WMON$+4,,AUTO
         0 000106   200005 631500                    EPPR1   SIZE,,AUTO
         0 000107   200013 451500                    STP1    WMON$+3,,AUTO
         0 000110   200004 633500                    EPPR3   BASE,,AUTO
         0 000111   200012 453500                    STP3    WMON$+2,,AUTO
         0 000112   200012 630500                    EPPR0   WMON$+2,,AUTO
         0 000113   000022 631400 xsym               EPPR1   B_VECTNIL+18
         0 000114   000000 701000 xent               TSX1    FREE_PGS
         0 000115   000000 011000                    NOP     0

     1021     4302    1           BASE=HDRMS.BASE/1024;

   4302  0 000116   000000 236000 xsym               LDQ     HDRMS
         0 000117   002000 506007                    DIV     1024,DL
         0 000120   200004 756100                    STQ     BASE,,AUTO

     1022     4303    1           SIZE=(HDRMS.BASE+HDRMS.SIZE+1023)/1024-BASE;

   4303  0 000121   000000 236000 xsym               LDQ     HDRMS
         0 000122   000002 036000 xsym               ADLQ    HDRMS+2
         0 000123   001777 036007                    ADLQ    1023,DL
         0 000124   002000 506007                    DIV     1024,DL
         0 000125   200004 136100                    SBLQ    BASE,,AUTO
         0 000126   200005 756100                    STQ     SIZE,,AUTO

     1023     4304    1           CALL FREE_PGS(BASE,SIZE,COUNT,FP_TAIL); /* Free pages                 */

   4304  0 000127   200006 630500                    EPPR0   FP_TAIL,,AUTO
         0 000130   200015 450500                    STP0    WMON$+5,,AUTO
         0 000131   200003 236100                    LDQ     @COUNT,,AUTO
PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:225  
         0 000132   200014 756100                    STQ     WMON$+4,,AUTO
         0 000133   200005 631500                    EPPR1   SIZE,,AUTO
         0 000134   200013 451500                    STP1    WMON$+3,,AUTO
         0 000135   200004 633500                    EPPR3   BASE,,AUTO
         0 000136   200012 453500                    STP3    WMON$+2,,AUTO
         0 000137   200012 630500                    EPPR0   WMON$+2,,AUTO
         0 000140   000022 631400 xsym               EPPR1   B_VECTNIL+18
         0 000141   000000 701000 xent               TSX1    FREE_PGS
         0 000142   000000 011000                    NOP     0

     1024     4305    1           BASE=HDRMN.BASE/1024;

   4305  0 000143   000000 236000 xsym               LDQ     HDRMN
         0 000144   002000 506007                    DIV     1024,DL
         0 000145   200004 756100                    STQ     BASE,,AUTO

     1025     4306    1           SIZE=(HDRMN.BASE+HDRMN.SIZE+1023)/1024-BASE;

   4306  0 000146   000000 236000 xsym               LDQ     HDRMN
         0 000147   000002 036000 xsym               ADLQ    HDRMN+2
         0 000150   001777 036007                    ADLQ    1023,DL
         0 000151   002000 506007                    DIV     1024,DL
         0 000152   200004 136100                    SBLQ    BASE,,AUTO
         0 000153   200005 756100                    STQ     SIZE,,AUTO

     1026     4307    1           CALL FREE_PGS(BASE,SIZE,COUNT,FP_TAIL); /* Free pages                 */

   4307  0 000154   200006 630500                    EPPR0   FP_TAIL,,AUTO
         0 000155   200015 450500                    STP0    WMON$+5,,AUTO
         0 000156   200003 236100                    LDQ     @COUNT,,AUTO
         0 000157   200014 756100                    STQ     WMON$+4,,AUTO
         0 000160   200005 631500                    EPPR1   SIZE,,AUTO
         0 000161   200013 451500                    STP1    WMON$+3,,AUTO
         0 000162   200004 633500                    EPPR3   BASE,,AUTO
         0 000163   200012 453500                    STP3    WMON$+2,,AUTO
         0 000164   200012 630500                    EPPR0   WMON$+2,,AUTO
         0 000165   000022 631400 xsym               EPPR1   B_VECTNIL+18
PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:226  
         0 000166   000000 701000 xent               TSX1    FREE_PGS
         0 000167   000000 011000                    NOP     0

     1027     4308    1           BASE=HDRDBS.BASE/1024;

   4308  0 000170   000000 236000 xsym               LDQ     HDRDBS
         0 000171   002000 506007                    DIV     1024,DL
         0 000172   200004 756100                    STQ     BASE,,AUTO

     1028     4309    1           SIZE=(HDRDBS.BASE+HDRDBS.SIZE+1023)/1024-BASE;

   4309  0 000173   000000 236000 xsym               LDQ     HDRDBS
         0 000174   000002 036000 xsym               ADLQ    HDRDBS+2
         0 000175   001777 036007                    ADLQ    1023,DL
         0 000176   002000 506007                    DIV     1024,DL
         0 000177   200004 136100                    SBLQ    BASE,,AUTO
         0 000200   200005 756100                    STQ     SIZE,,AUTO

     1029     4310    1           CALL FREE_PGS(BASE,SIZE,COUNT,FP_TAIL); /* Free pages                 */

   4310  0 000201   200006 630500                    EPPR0   FP_TAIL,,AUTO
         0 000202   200015 450500                    STP0    WMON$+5,,AUTO
         0 000203   200003 236100                    LDQ     @COUNT,,AUTO
         0 000204   200014 756100                    STQ     WMON$+4,,AUTO
         0 000205   200005 631500                    EPPR1   SIZE,,AUTO
         0 000206   200013 451500                    STP1    WMON$+3,,AUTO
         0 000207   200004 633500                    EPPR3   BASE,,AUTO
         0 000210   200012 453500                    STP3    WMON$+2,,AUTO
         0 000211   200012 630500                    EPPR0   WMON$+2,,AUTO
         0 000212   000022 631400 xsym               EPPR1   B_VECTNIL+18
         0 000213   000000 701000 xent               TSX1    FREE_PGS
         0 000214   000000 011000                    NOP     0

     1030     4311    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=FP_TAIL;
              4311                    /* Update tail of free page chain */

   4311  0 000215   200007 470500                    LDP0    INFOX$,,AUTO
PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:227  
         0 000216   200010 220100                    LDX0    WMON$,,AUTO
         0 000217   200006 235100                    LDA     FP_TAIL,,AUTO
         0 000220   000000 755110                    STA     0,X0,PR0

     1031     4312    1           RETURN;

   4312  0 000221   000000 702200 xent               TSX2  ! X66_ARET

     1032     4313    1   FREEFW: ENTRY(COUNT);

   4313  0 000222   000000 700200 xent  FREEFW       TSX0  ! X66_AUTO_1
         0 000223   000016 000001                    ZERO    14,1

     1033     4314        /* Free FW pages */
     1034     4315    1           INFOX_PTR='0'B;

   4315  0 000224   200007 450100                    STZ     INFOX$,,AUTO

     1035     4316    1           INFOX_PTR.S_D_FIELD=%ALS_MONIS; /* Frame Mon IS                       */

   4316  0 000225   006050 236007                    LDQ     3112,DL
         0 000226   200007 752103                    STCQ    INFOX$,'03'O,AUTO

     1036     4317    1           WMON$=ADDR(MM_FPPT);            /* Tail of current free page chain    */

   4317  0 000227   000001 236000 1                  LDQ     1
         0 000230   200010 756100                    STQ     WMON$,,AUTO

     1037     4318    1           FP_TAIL=PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN;

   4318  0 000231   200007 470500                    LDP0    INFOX$,,AUTO
         0 000232   200010 220100                    LDX0    WMON$,,AUTO
         0 000233   000000 235110                    LDA     0,X0,PR0
         0 000234   200006 755100                    STA     FP_TAIL,,AUTO

     1038     4319    1           BASE=FWSTART_PTR.WOFFS/1024;

PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:228  
   4319  0 000235   000000 236000 xsym               LDQ     FWSTART_PTR
         0 000236   000022 772000                    QRL     18
         0 000237   000012 772000                    QRL     10
         0 000240   200004 756100                    STQ     BASE,,AUTO

     1039     4320    1           SIZE=(FW_PTR.WOFFS+1023)/1024-BASE;

   4320  0 000241   000000 236000 xsym               LDQ     FW$
         0 000242   000022 772000                    QRL     18
         0 000243   001777 036007                    ADLQ    1023,DL
         0 000244   000012 772000                    QRL     10
         0 000245   200004 136100                    SBLQ    BASE,,AUTO
         0 000246   200005 756100                    STQ     SIZE,,AUTO

     1040     4321    1           CALL FREE_PGS(BASE,SIZE,COUNT,FP_TAIL); /* Free pages                 */

   4321  0 000247   200006 631500                    EPPR1   FP_TAIL,,AUTO
         0 000250   200015 451500                    STP1    WMON$+5,,AUTO
         0 000251   200003 236100                    LDQ     @COUNT,,AUTO
         0 000252   200014 756100                    STQ     WMON$+4,,AUTO
         0 000253   200005 633500                    EPPR3   SIZE,,AUTO
         0 000254   200013 453500                    STP3    WMON$+3,,AUTO
         0 000255   200004 634500                    EPPR4   BASE,,AUTO
         0 000256   200012 454500                    STP4    WMON$+2,,AUTO
         0 000257   200012 630500                    EPPR0   WMON$+2,,AUTO
         0 000260   000022 631400 xsym               EPPR1   B_VECTNIL+18
         0 000261   000000 701000 xent               TSX1    FREE_PGS
         0 000262   000000 011000                    NOP     0

     1041     4322    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=FP_TAIL;
              4322                    /* Update tail of free page chain */

   4322  0 000263   200007 470500                    LDP0    INFOX$,,AUTO
         0 000264   200010 220100                    LDX0    WMON$,,AUTO
         0 000265   200006 235100                    LDA     FP_TAIL,,AUTO
         0 000266   000000 755110                    STA     0,X0,PR0

PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:229  
     1042     4323    1           RETURN;

   4323  0 000267   000000 702200 xent               TSX2  ! X66_ARET

     1043     4324    1   FREETABLES: ENTRY(COUNT);

   4324  0 000270   000000 700200 xent  FREETABLES   TSX0  ! X66_AUTO_1
         0 000271   000016 000001                    ZERO    14,1

     1044     4325        /* Free PPUT and reverse map unused pages */
     1045     4326    1           INFOX_PTR='0'B;

   4326  0 000272   200007 450100                    STZ     INFOX$,,AUTO

     1046     4327    1           INFOX_PTR.S_D_FIELD=%ALS_MONIS; /* Frame Mon IS                       */

   4327  0 000273   006050 236007                    LDQ     3112,DL
         0 000274   200007 752103                    STCQ    INFOX$,'03'O,AUTO

     1047     4328    1           WMON$=ADDR(MM_FPPT);            /* Tail of current free page chain    */

   4328  0 000275   000001 236000 1                  LDQ     1
         0 000276   200010 756100                    STQ     WMON$,,AUTO

     1048     4329    1           FP_TAIL=PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN;

   4329  0 000277   200007 470500                    LDP0    INFOX$,,AUTO
         0 000300   200010 220100                    LDX0    WMON$,,AUTO
         0 000301   000000 235110                    LDA     0,X0,PR0
         0 000302   200006 755100                    STA     FP_TAIL,,AUTO

     1049     4330    1           BASE=AALS.DESCPPUT.BASE/4/1024+(IS_PPUT_SIZE+1+1023)/1024;

   4330  0 000303   000000 471400 xsym               LDP1    AALS$
         0 000304   100007 236100                    LDQ     7,,PR1
         0 000305   000004 506007                    DIV     4,DL
         0 000306   002000 506007                    DIV     1024,DL
PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:230  
         0 000307   200012 756100                    STQ     WMON$+2,,AUTO
         0 000310   000000 236000 xsym               LDQ     IS_PPUT_SIZE
         0 000311   002000 036007                    ADLQ    1024,DL
         0 000312   000012 772000                    QRL     10
         0 000313   200012 036100                    ADLQ    WMON$+2,,AUTO
         0 000314   200004 756100                    STQ     BASE,,AUTO

     1050     4331    1           IF S1000_FLG THEN SIZE=(%S1000_MAXMEMPG-IS_PPUT_SIZE)/1024;

   4331  0 000315   000000 234000 xsym               SZN     S1000_FLG
         0 000316   000324 605000 0                  TPL     s:4333

   4331  0 000317   177777 236007                    LDQ     65535,DL
         0 000320   000000 136000 xsym               SBLQ    IS_PPUT_SIZE
         0 000321   002000 506007                    DIV     1024,DL
         0 000322   200005 756100                    STQ     SIZE,,AUTO
         0 000323   000337 710000 0                  TRA     s:4336

     1051     4332    1             ELSE
     1052     4333    1             IF RPM_FLG THEN

   4333  0 000324   000000 234000 xsym               SZN     RPM_FLG
         0 000325   000333 605000 0                  TPL     s:4335

     1053     4334    1               SIZE=(%RPM_MAXMEMPG-IS_PPUT_SIZE)/1024;

   4334  0 000326   177777 236007                    LDQ     65535,DL
         0 000327   000000 136000 xsym               SBLQ    IS_PPUT_SIZE
         0 000330   002000 506007                    DIV     1024,DL
         0 000331   200005 756100                    STQ     SIZE,,AUTO
         0 000332   000337 710000 0                  TRA     s:4336

     1054     4335    1               ELSE SIZE=(%MAXMEMPG-IS_PPUT_SIZE)/1024;

   4335  0 000333   037777 236007                    LDQ     16383,DL
         0 000334   000000 136000 xsym               SBLQ    IS_PPUT_SIZE
         0 000335   002000 506007                    DIV     1024,DL
PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:231  
         0 000336   200005 756100                    STQ     SIZE,,AUTO

     1055     4336    1           CALL FREE_PGS(BASE,SIZE,COUNT,FP_TAIL); /* Free pages                 */

   4336  0 000337   200006 633500                    EPPR3   FP_TAIL,,AUTO
         0 000340   200015 453500                    STP3    WMON$+5,,AUTO
         0 000341   200003 236100                    LDQ     @COUNT,,AUTO
         0 000342   200014 756100                    STQ     WMON$+4,,AUTO
         0 000343   200005 634500                    EPPR4   SIZE,,AUTO
         0 000344   200013 454500                    STP4    WMON$+3,,AUTO
         0 000345   200004 635500                    EPPR5   BASE,,AUTO
         0 000346   200012 455500                    STP5    WMON$+2,,AUTO
         0 000347   200012 630500                    EPPR0   WMON$+2,,AUTO
         0 000350   000022 631400 xsym               EPPR1   B_VECTNIL+18
         0 000351   000000 701000 xent               TSX1    FREE_PGS
         0 000352   000000 011000                    NOP     0

     1056     4337    2           IF S1000_FLG THEN DO;           /* On S1000 release reverse map pages */

   4337  0 000353   000000 234000 xsym               SZN     S1000_FLG
         0 000354   000406 605000 0                  TPL     s:4342

     1057     4338    2                 BASE=IPHYPG/1024+(PHYMEM_SZ/2+1+1023)/1024;

   4338  0 000355   000000 236000 xsym               LDQ     PHYMEM_SZ
         0 000356   000001 772000                    QRL     1
         0 000357   002000 036007                    ADLQ    1024,DL
         0 000360   000012 772000                    QRL     10
         0 000361   200012 756100                    STQ     WMON$+2,,AUTO
         0 000362   000000 236000 xsym               LDQ     IPHYPG
         0 000363   000012 772000                    QRL     10
         0 000364   200012 036100                    ADLQ    WMON$+2,,AUTO
         0 000365   200004 756100                    STQ     BASE,,AUTO

     1058     4339    2                 SIZE=(%S1000_MAXMEMPG-PHYMEM_SZ)/2048;

   4339  0 000366   177777 236007                    LDQ     65535,DL
PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:232  
         0 000367   000000 136000 xsym               SBLQ    PHYMEM_SZ
         0 000370   004000 506007                    DIV     2048,DL
         0 000371   200005 756100                    STQ     SIZE,,AUTO

     1059     4340    2                 CALL FREE_PGS(BASE,SIZE,COUNT,FP_TAIL); /* Free pages           */

   4340  0 000372   200006 630500                    EPPR0   FP_TAIL,,AUTO
         0 000373   200015 450500                    STP0    WMON$+5,,AUTO
         0 000374   200003 236100                    LDQ     @COUNT,,AUTO
         0 000375   200014 756100                    STQ     WMON$+4,,AUTO
         0 000376   200005 631500                    EPPR1   SIZE,,AUTO
         0 000377   200013 451500                    STP1    WMON$+3,,AUTO
         0 000400   200004 633500                    EPPR3   BASE,,AUTO
         0 000401   200012 453500                    STP3    WMON$+2,,AUTO
         0 000402   200012 630500                    EPPR0   WMON$+2,,AUTO
         0 000403   000022 631400 xsym               EPPR1   B_VECTNIL+18
         0 000404   000000 701000 xent               TSX1    FREE_PGS
         0 000405   000000 011000                    NOP     0

     1060     4341    2               END;                        /* THEN                               */

     1061     4342    1           PINCRW(INFOX$,WMON_PTR.WOFFS)->BAS_UBIN=FP_TAIL;
              4342                    /* Update tail of free page chain */

   4342  0 000406   200007 470500                    LDP0    INFOX$,,AUTO
         0 000407   200010 220100                    LDX0    WMON$,,AUTO
         0 000410   200006 235100                    LDA     FP_TAIL,,AUTO
         0 000411   000000 755110                    STA     0,X0,PR0

     1062     4343    1           RETURN;

   4343  0 000412   000000 702200 xent               TSX2  ! X66_ARET
     1063     4344    1   END FREEXD;
     1064     4345        %EOD;

PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:233  
--  Include file information  --

   MM_MACRO_M.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   MM$SYSGEN.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   MM_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure FREEXD.
PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:234  

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @COUNT                     4-0-0/w UBIN        r     1 BASE
    *0-0-0/w UBIN        r     1 COUNT                      6-0-0/w UBIN        r     1 FP_TAIL
     7-0-0/w PTR         r     1 INFOX$                     7-0-0/w STRC        r     1 INFOX_PTR
     5-0-0/w UBIN        r     1 SIZE                      10-0-0/w PTR         r     1 WMON$
    10-0-0/w STRC        r     1 WMON_PTR

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 AALS$                      0-0-0/w PTR         r     1 FW$
     0-0-0/w STRC        r     1 FWSTART_PTR                0-0-0/w STRC        r     1 FW_PTR
     0-0-0/w STRC(144)   r     1 HDRDBS                     0-0-0/w STRC(144)   r     1 HDRME
     0-0-0/w STRC(144)   r     1 HDRMN                      0-0-0/w STRC(144)   r     1 HDRMS
     0-0-0/w STRC(144)   r     1 HDRXIS                     0-0-0/w STRC(144)   r     1 HDRXLS
     0-0-0/w UBIN        r     1 IPHYPG                     0-0-0/w UBIN        r     1 IS_PPUT_SIZE
     0-0-0/w PTR         r     1 MM_BYP$                    0-0-0/w SBIN        r     1 MM_FPPT
     0-0-0/w UBIN        r     1 MM_XDEL                    0-0-0/w UBIN        r     1 PHYMEM_SZ
     0-0-0/w BIT         r     1 RPM_FLG                    0-0-0/w BIT         r     1 S1000_FLG

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(7560)  r     1 AALS                       0-0-0/w UBIN        r     1 BAS_UBIN

PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:235  

   Procedure FREEXD requires 267 words for executable code.
   Procedure FREEXD requires 14 words of local(AUTO) storage.
PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:236  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:237  
          MINI XREF LISTING

AALS.DESCPPUT.BASE
      1902**DCL      4330>>ASSIGN
AALS$
      4132**DCL      1816--IMP-PTR  4330>>ASSIGN
BASE
      4140**DCL      4293<<ASSIGN   4294>>ASSIGN   4295<>CALL     4296<<ASSIGN   4297>>ASSIGN   4298<>CALL
      4299<<ASSIGN   4300>>ASSIGN   4301<>CALL     4302<<ASSIGN   4303>>ASSIGN   4304<>CALL     4305<<ASSIGN
      4306>>ASSIGN   4307<>CALL     4308<<ASSIGN   4309>>ASSIGN   4310<>CALL     4319<<ASSIGN   4320>>ASSIGN
      4321<>CALL     4330<<ASSIGN   4336<>CALL     4338<<ASSIGN   4340<>CALL
BAS_UBIN
      4143**DCL      4290<<ASSIGN   4292>>ASSIGN   4311<<ASSIGN   4318>>ASSIGN   4322<<ASSIGN   4329>>ASSIGN
      4342<<ASSIGN
COUNT
      4139**DCL         6--PROC     4295<>CALL     4298<>CALL     4301<>CALL     4304<>CALL     4307<>CALL
      4310<>CALL     4313--ENTRY    4321<>CALL     4324--ENTRY    4336<>CALL     4340<>CALL
FP_TAIL
      4142**DCL      4292<<ASSIGN   4295<>CALL     4298<>CALL     4301<>CALL     4304<>CALL     4307<>CALL
      4310<>CALL     4311>>ASSIGN   4318<<ASSIGN   4321<>CALL     4322>>ASSIGN   4329<<ASSIGN   4336<>CALL
      4340<>CALL     4342>>ASSIGN
FREE_PGS
      4285**DCL-ENT  4295--CALL     4298--CALL     4301--CALL     4304--CALL     4307--CALL     4310--CALL
      4321--CALL     4336--CALL     4340--CALL
FW$
      4200**DCL      4212--REDEF
FWSTART_PTR.WOFFS
      4194**DCL      4319>>ASSIGN
FW_PTR.WOFFS
      4213**DCL      4320>>ASSIGN
HDRDBS.BASE
      4276**DCL      4308>>ASSIGN   4309>>ASSIGN
HDRDBS.DA
      4277**DCL      4278--REDEF
PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:238  
HDRDBS.SIZE
      4281**DCL      4309>>ASSIGN
HDRME.BASE
      4243**DCL      4299>>ASSIGN   4300>>ASSIGN
HDRME.DA
      4244**DCL      4245--REDEF
HDRME.SIZE
      4248**DCL      4300>>ASSIGN
HDRMN.BASE
      4265**DCL      4305>>ASSIGN   4306>>ASSIGN
HDRMN.DA
      4266**DCL      4267--REDEF
HDRMN.SIZE
      4270**DCL      4306>>ASSIGN
HDRMS.BASE
      4254**DCL      4302>>ASSIGN   4303>>ASSIGN
HDRMS.DA
      4255**DCL      4256--REDEF
HDRMS.SIZE
      4259**DCL      4303>>ASSIGN
HDRXIS.BASE
      4232**DCL      4296>>ASSIGN   4297>>ASSIGN
HDRXIS.DA
      4233**DCL      4234--REDEF
HDRXIS.SIZE
      4237**DCL      4297>>ASSIGN
HDRXLS.BASE
      4221**DCL      4293>>ASSIGN   4294>>ASSIGN
HDRXLS.DA
      4222**DCL      4223--REDEF
HDRXLS.SIZE
      4226**DCL      4294>>ASSIGN
INFOX$
      4144**DCL      4156--REDEF    4290>>ASSIGN   4292>>ASSIGN   4311>>ASSIGN   4318>>ASSIGN   4322>>ASSIGN
      4329>>ASSIGN   4342>>ASSIGN
INFOX_PTR
PL6.E3A0      #007=FREEXD File=ISI$MM.:E05TSI                                    TUE 07/29/97 22:56 Page:239  
      4156**DCL      4287<<ASSIGN   4315<<ASSIGN   4326<<ASSIGN
INFOX_PTR.S_D_FIELD
      4160**DCL      4288<<ASSIGN   4316<<ASSIGN   4327<<ASSIGN
IPHYPG
      4136**DCL      4338>>ASSIGN
IS_PPUT_SIZE
      4134**DCL      4330>>ASSIGN   4331>>ASSIGN   4334>>ASSIGN   4335>>ASSIGN
MM$DESC.BOUND
      1756**DCL      1757--REDEF
MM$DESC.FLGS
      1757**DCL      1757--REDEF
MM$PPUT.USER#
      1745**DCL      1745--REDEF
MM_BYP$
      1676**DCL      1676--IMP-PTR
MM_FPPT
      1673**DCL      4291--ASSIGN   4317--ASSIGN   4328--ASSIGN
MM_XDEL
      1680**DCL      4289--ASSIGN
PHYMEM_SZ
      4135**DCL      4338>>ASSIGN   4339>>ASSIGN
RPM_FLG
      4137**DCL      4333>>IF
S1000_FLG
      4138**DCL      4331>>IF       4337>>IF
SIZE
      4141**DCL      4294<<ASSIGN   4295<>CALL     4297<<ASSIGN   4298<>CALL     4300<<ASSIGN   4301<>CALL
      4303<<ASSIGN   4304<>CALL     4306<<ASSIGN   4307<>CALL     4309<<ASSIGN   4310<>CALL     4320<<ASSIGN
      4321<>CALL     4331<<ASSIGN   4334<<ASSIGN   4335<<ASSIGN   4336<>CALL     4339<<ASSIGN   4340<>CALL
WMON$
      4163**DCL      4175--REDEF    4289<<ASSIGN   4291<<ASSIGN   4317<<ASSIGN   4328<<ASSIGN
WMON_PTR.WOFFS
      4176**DCL      4290>>ASSIGN   4292>>ASSIGN   4311>>ASSIGN   4318>>ASSIGN   4322>>ASSIGN   4329>>ASSIGN
      4342>>ASSIGN

PL6.E3A0      #008=FREE_PGS File=ISI$MM.:E05TSI                                  TUE 07/29/97 22:56 Page:240  
     1065        1        /*T***********************************************************/
     1066        2        /*T*                                                         */
     1067        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1068        4        /*T*                                                         */
     1069        5        /*T***********************************************************/
     1070        6        FREE_PGS: PROC(BASE,SIZE,COUNT,FP_TAIL);
     1071        7        /* This program frees  pages */
     1072        8        /* When entered  COUNT=previous count of free pages
     1073        9                         FP_TAIL=tail of free page chain
     1074       10           at return COUNT=updated count of free pages
     1075       11                     FP_TAIL= updated tail of free pages chain */
     1076       12        %INCLUDE IS$MACROS;
     1077     1287        %INCLUDE MM_DATA_R;
     1078     1807    1   DCL COUNT UBIN WORD;
     1079     1808    1   DCL BASE UBIN WORD;                     /* First pg# to free                  */
     1080     1809    1   DCL SIZE UBIN WORD;                     /*  pg# to free                       */
     1081     1810    1   DCL FP_TAIL UBIN WORD;
     1082     1811    1   DCL PPUT$ PTR;                          /* Pointer to PPUT                    */
     1083     1812        %PTR_STRUCT(NAME=PPUT_PTR,STCLASS="REDEF PPUT$");
     1084     1830        /**/
     1085     1831    1           PPUT_PTR='0'B;
     1086     1832    1           PPUT_PTR.S_D_FIELD=%ALS_PPUT;   /* Frame PPUT                         */
     1087     1833    2           DO WHILE (SIZE > 0);
     1088     1834    3             IF BASE~=FP_TAIL THEN DO;
     1089     1835    3                   PPUT$->MM$PPUT(FP_TAIL)='0'B;
     1090     1836    3                   PPUT$->MM$PPUT.PPNO(FP_TAIL)=BASE; /* Next page in link       */
     1091     1837    3                   PPUT$->MM$PPUT.FREE(FP_TAIL)='1'B; /* Mark it free            */
     1092     1838    3                   FP_TAIL=BASE;
     1093     1839    3                   COUNT=COUNT+1;
     1094     1840    3                 END;
     1095     1841    2             SIZE=SIZE-1;
     1096     1842    2             BASE=BASE+1;
     1097     1843    2           END;
     1098     1844    1           PPUT$->MM$PPUT(FP_TAIL)='0'B;
     1099     1845    1           PPUT$->MM$PPUT.FREE(FP_TAIL)='1'B; /* Mark it free                    */
     1100     1846    1           RETURN;
     1101     1847    1   END FREE_PGS;
PL6.E3A0      #008=FREE_PGS File=ISI$MM.:E05TSI                                  TUE 07/29/97 22:56 Page:241  

PL6.E3A0      #008=FREE_PGS File=ISI$MM.:E05TSI                                  TUE 07/29/97 22:56 Page:242  
--  Include file information  --

   MM_MACRO_M.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   MM$SYSGEN.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   MM_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure FREE_PGS.

   Procedure FREE_PGS requires 45 words for executable code.
   Procedure FREE_PGS requires 8 words of local(AUTO) storage.

    No errors detected in file ISI$MM.:E05TSI    .

PL6.E3A0      #008=FREE_PGS File=ISI$MM.:E05TSI                                  TUE 07/29/97 22:56 Page:243  

 Object Unit name= FREE_PGS                                   File name= ISI$MM.:E05TOU
 UTS= JUL 29 '97 22:56:39.80 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none    45     55  FREE_PGS

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes            yes      Std        4  FREE_PGS

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_4
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
r    MM_BYP$
PL6.E3A0      #008=FREE_PGS File=ISI$MM.:E05TSI                                  TUE 07/29/97 22:56 Page:244  


     1065        1        /*T***********************************************************/
     1066        2        /*T*                                                         */
     1067        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1068        4        /*T*                                                         */
     1069        5        /*T***********************************************************/
     1070        6        FREE_PGS: PROC(BASE,SIZE,COUNT,FP_TAIL);

      6  0 000000   000000 700200 xent  FREE_PGS     TSX0  ! X66_AUTO_4
         0 000001   000010 000004                    ZERO    8,4

     1071        7        /* This program frees  pages */
     1072        8        /* When entered  COUNT=previous count of free pages
     1073        9                         FP_TAIL=tail of free page chain
     1074       10           at return COUNT=updated count of free pages
     1075       11                     FP_TAIL= updated tail of free pages chain */
     1076       12        %INCLUDE IS$MACROS;
     1077     1287        %INCLUDE MM_DATA_R;
     1078     1807    1   DCL COUNT UBIN WORD;
     1079     1808    1   DCL BASE UBIN WORD;                     /* First pg# to free                  */
     1080     1809    1   DCL SIZE UBIN WORD;                     /*  pg# to free                       */
     1081     1810    1   DCL FP_TAIL UBIN WORD;
     1082     1811    1   DCL PPUT$ PTR;                          /* Pointer to PPUT                    */
     1083     1812        %PTR_STRUCT(NAME=PPUT_PTR,STCLASS="REDEF PPUT$");
     1084     1830        /**/
     1085     1831    1           PPUT_PTR='0'B;

   1831  0 000002   200007 450100                    STZ     PPUT$,,AUTO

     1086     1832    1           PPUT_PTR.S_D_FIELD=%ALS_PPUT;   /* Frame PPUT                         */

   1832  0 000003   006003 236007                    LDQ     3075,DL
         0 000004   200007 752103                    STCQ    PPUT$,'03'O,AUTO

     1087     1833    2           DO WHILE (SIZE > 0);

   1833  0 000005   200004 470500                    LDP0    @SIZE,,AUTO
PL6.E3A0      #008=FREE_PGS File=ISI$MM.:E05TSI                                  TUE 07/29/97 22:56 Page:245  
         0 000006   000000 235100                    LDA     0,,PR0
         0 000007   000045 600000 0                  TZE     s:1844

     1088     1834    3             IF BASE~=FP_TAIL THEN DO;

   1834  0 000010   200003 470500                    LDP0    @BASE,,AUTO
         0 000011   200006 471500                    LDP1    @FP_TAIL,,AUTO
         0 000012   000000 236100                    LDQ     0,,PR0
         0 000013   100000 116100                    CMPQ    0,,PR1
         0 000014   000034 600000 0                  TZE     s:1841

     1089     1835    3                   PPUT$->MM$PPUT(FP_TAIL)='0'B;

   1835  0 000015   100000 720100                    LXL0    0,,PR1
         0 000016   200007 473500                    LDP3    PPUT$,,AUTO
         0 000017   300000 450110                    STZ     0,X0,PR3

     1090     1836    3                   PPUT$->MM$PPUT.PPNO(FP_TAIL)=BASE; /* Next page in link       */

   1836  0 000020   100000 720100                    LXL0    0,,PR1
         0 000021   000000 721100                    LXL1    0,,PR0
         0 000022   300000 441110                    SXL1    0,X0,PR3

     1091     1837    3                   PPUT$->MM$PPUT.FREE(FP_TAIL)='1'B; /* Mark it free            */

   1837  0 000023   100000 720100                    LXL0    0,,PR1
         0 000024   040000 236003                    LDQ     16384,DU
         0 000025   300000 256110                    ORSQ    0,X0,PR3

     1092     1838    3                   FP_TAIL=BASE;

   1838  0 000026   000000 235100                    LDA     0,,PR0
         0 000027   100000 755100                    STA     0,,PR1

     1093     1839    3                   COUNT=COUNT+1;

   1839  0 000030   200005 474500                    LDP4    @COUNT,,AUTO
PL6.E3A0      #008=FREE_PGS File=ISI$MM.:E05TSI                                  TUE 07/29/97 22:56 Page:246  
         0 000031   400000 235100                    LDA     0,,PR4
         0 000032   000001 035007                    ADLA    1,DL
         0 000033   400000 755100                    STA     0,,PR4

     1094     1840    3                 END;

     1095     1841    2             SIZE=SIZE-1;

   1841  0 000034   200004 473500                    LDP3    @SIZE,,AUTO
         0 000035   300000 235100                    LDA     0,,PR3
         0 000036   000001 135007                    SBLA    1,DL
         0 000037   300000 755100                    STA     0,,PR3

     1096     1842    2             BASE=BASE+1;

   1842  0 000040   000000 235100                    LDA     0,,PR0
         0 000041   000001 035007                    ADLA    1,DL
         0 000042   000000 755100                    STA     0,,PR0

     1097     1843    2           END;

   1843  0 000043   300000 235100                    LDA     0,,PR3
         0 000044   000010 601000 0                  TNZ     s:1834

     1098     1844    1           PPUT$->MM$PPUT(FP_TAIL)='0'B;

   1844  0 000045   200006 470500                    LDP0    @FP_TAIL,,AUTO
         0 000046   000000 720100                    LXL0    0,,PR0
         0 000047   200007 471500                    LDP1    PPUT$,,AUTO
         0 000050   100000 450110                    STZ     0,X0,PR1

     1099     1845    1           PPUT$->MM$PPUT.FREE(FP_TAIL)='1'B; /* Mark it free                    */

   1845  0 000051   000000 720100                    LXL0    0,,PR0
         0 000052   040000 236003                    LDQ     16384,DU
         0 000053   100000 256110                    ORSQ    0,X0,PR1

PL6.E3A0      #008=FREE_PGS File=ISI$MM.:E05TSI                                  TUE 07/29/97 22:56 Page:247  
     1100     1846    1           RETURN;

   1846  0 000054   000000 702200 xent               TSX2  ! X66_ARET
     1101     1847    1   END FREE_PGS;

PL6.E3A0      #008=FREE_PGS File=ISI$MM.:E05TSI                                  TUE 07/29/97 22:56 Page:248  
--  Include file information  --

   MM_MACRO_M.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   MM$SYSGEN.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   MM_DATA_R.:E05TOU  cannot be made into a system file and is referenced.
   IS$MACROS.:E05TOU  is referenced.
      No diagnostics issued in procedure FREE_PGS.
PL6.E3A0      #008=FREE_PGS File=ISI$MM.:E05TSI                                  TUE 07/29/97 22:56 Page:249  

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @BASE                      5-0-0/w PTR         r     1 @COUNT
     6-0-0/w PTR         r     1 @FP_TAIL                   4-0-0/w PTR         r     1 @SIZE
    *0-0-0/w UBIN        r     1 BASE                      *0-0-0/w UBIN        r     1 COUNT
    *0-0-0/w UBIN        r     1 FP_TAIL                    7-0-0/w PTR         r     1 PPUT$
     7-0-0/w STRC        r     1 PPUT_PTR                  *0-0-0/w UBIN        r     1 SIZE

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 MM_BYP$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC        r     1 MM$PPUT(0:0)


   Procedure FREE_PGS requires 45 words for executable code.
   Procedure FREE_PGS requires 8 words of local(AUTO) storage.

    No errors detected in file ISI$MM.:E05TSI    .
PL6.E3A0      #008=FREE_PGS File=ISI$MM.:E05TSI                                  TUE 07/29/97 22:56 Page:250  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #008=FREE_PGS File=ISI$MM.:E05TSI                                  TUE 07/29/97 22:56 Page:251  
          MINI XREF LISTING

BASE
      1808**DCL         6--PROC     1834>>IF       1836>>ASSIGN   1838>>ASSIGN   1842<<ASSIGN   1842>>ASSIGN
COUNT
      1807**DCL         6--PROC     1839<<ASSIGN   1839>>ASSIGN
FP_TAIL
      1810**DCL         6--PROC     1834>>IF       1835>>ASSIGN   1836>>ASSIGN   1837>>ASSIGN   1838<<ASSIGN
      1844>>ASSIGN   1845>>ASSIGN
MM$DESC.BOUND
      1758**DCL      1759--REDEF
MM$DESC.FLGS
      1759**DCL      1759--REDEF
MM$PPUT
      1745**DCL      1835<<ASSIGN   1844<<ASSIGN
MM$PPUT.FREE
      1746**DCL      1837<<ASSIGN   1845<<ASSIGN
MM$PPUT.PPNO
      1747**DCL      1836<<ASSIGN
MM$PPUT.USER#
      1747**DCL      1747--REDEF
MM_BYP$
      1678**DCL      1678--IMP-PTR
PPUT$
      1811**DCL      1823--REDEF    1835>>ASSIGN   1836>>ASSIGN   1837>>ASSIGN   1844>>ASSIGN   1845>>ASSIGN
PPUT_PTR
      1823**DCL      1831<<ASSIGN
PPUT_PTR.S_D_FIELD
      1827**DCL      1832<<ASSIGN
SIZE
      1809**DCL         6--PROC     1833>>DOWHILE  1841<<ASSIGN   1841>>ASSIGN
