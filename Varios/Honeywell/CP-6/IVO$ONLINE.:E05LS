VERSION E05

PL6.E3A0      #001=VOLINIT File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:12 Page:1    
        1        1        /*M* On-Line Version of VOLINIT Subroutines */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DMR */
        8        8        /**/
        9        9        VOLINIT: PROC MAIN;
       10       10        /**/
       11       11    1   DCL IVV$VOLINIT ENTRY;
       12       12        /**/
       13       13    1   DCL B$JIT$ PTR SYMREF;
       14       14        %INCLUDE B$JIT;
       15      304        %INCLUDE CP_6;
       16      385        %FPT_PRIV (PPRIV=YES,PRIV=%PPR_VOLINIT#);
       17      400        %FPT_MERC (JERR=ERRCD);
       18      413    1   DCL ERRCD BIT(36) STATIC ALIGNED;
       19      414    1   DCL IV_IO$ PTR STATIC SYMDEF;
       20      415    1   DCL B$TCB$ PTR SYMREF;
       21      416        %B$TCB;
       22      419        %B$ALT;
       23      427        /**/
       24      428        /**/
       25      429        /**/
       26      430    1           CALL M$SPRIV(FPT_PRIV) ALTRET(NO_PRIV);
       27      431    1           CALL IVV$VOLINIT;
       28      432    1           RETURN;
       29      433    1   NO_PRIV:
       30      434    1           ERRCD=B$TCB$->B$TCB.ALT$->B$ALT.ERR | '000000000007'O;
       31      435    1           CALL M$MERC(FPT_MERC);
       32      436    1   END VOLINIT;
       33      437        %EOD;

PL6.E3A0      #001=VOLINIT File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:12 Page:2    
--  Include file information  --

   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure VOLINIT.

   Procedure VOLINIT requires 19 words for executable code.
   Procedure VOLINIT requires 4 words of local(AUTO) storage.

PL6.E3A0      #001=VOLINIT File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:12 Page:3    

 Object Unit name= VOLINIT                                    File name= IVO$ONLINE.:E05TOU
 UTS= JUL 29 '97 23:12:32.76 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none     8     10  VOLINIT
    2   Proc  even  none    19     23  VOLINIT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes            yes      Main       0  VOLINIT

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    1      7  IV_IO$

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       0 IVV$VOLINIT
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_MAUTO
                       nStd      0 X66_MARET
PL6.E3A0      #001=VOLINIT File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:12 Page:4    

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     B$JIT$                                M$UC                                  B$TCB$
     B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #001=VOLINIT File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:12 Page:5    


        1        1        /*M* On-Line Version of VOLINIT Subroutines */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DMR */
        8        8        /**/
        9        9        VOLINIT: PROC MAIN;

      9  2 000000   000000 700200 xent  VOLINIT      TSX0  ! X66_MAUTO
         2 000001   000004 000000                    ZERO    4,0

       10       10        /**/
       11       11    1   DCL IVV$VOLINIT ENTRY;
       12       12        /**/
       13       13    1   DCL B$JIT$ PTR SYMREF;
       14       14        %INCLUDE B$JIT;
       15      304        %INCLUDE CP_6;
       16      385        %FPT_PRIV (PPRIV=YES,PRIV=%PPR_VOLINIT#);
       17      400        %FPT_MERC (JERR=ERRCD);
       18      413    1   DCL ERRCD BIT(36) STATIC ALIGNED;
       19      414    1   DCL IV_IO$ PTR STATIC SYMDEF;
       20      415    1   DCL B$TCB$ PTR SYMREF;
       21      416        %B$TCB;
       22      419        %B$ALT;
       23      427        /**/
       24      428        /**/
       25      429        /**/
       26      430    1           CALL M$SPRIV(FPT_PRIV) ALTRET(NO_PRIV);

    430  2 000002   000000 630400 1                  EPPR0   FPT_PRIV
         2 000003   420012 713400                    CLIMB   alt,+8202
         2 000004   400000 401760                    pmme    nvectors=1
         2 000005   000012 702000 2                  TSX2    NO_PRIV

PL6.E3A0      #001=VOLINIT File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:12 Page:6    
       27      431    1           CALL IVV$VOLINIT;

    431  2 000006   000002 631400 xsym               EPPR1   B_VECTNIL+2
         2 000007   000000 701000 xent               TSX1    IVV$VOLINIT
         2 000010   000000 011000                    NOP     0

       28      432    1           RETURN;

    432  2 000011   000000 702200 xent               TSX2  ! X66_MARET

       29      433    1   NO_PRIV:
       30      434    1           ERRCD=B$TCB$->B$TCB.ALT$->B$ALT.ERR | '000000000007'O;

    434  2 000012   000000 470400 xsym  NO_PRIV      LDP0    B$TCB$
         2 000013   000000 471500                    LDP1    0,,PR0
         2 000014   100102 236100                    LDQ     66,,PR1
         2 000015   000011 276000 xsym               ORQ     B_VECTNIL+9
         2 000016   000006 756000 1                  STQ     ERRCD

       31      435    1           CALL M$MERC(FPT_MERC);

    435  2 000017   000004 630400 1                  EPPR0   FPT_MERC
         2 000020   010007 713400                    CLIMB   4103
         2 000021   400000 401760                    pmme    nvectors=1

       32      436    1   END VOLINIT;

    436  2 000022   000000 702200 xent               TSX2  ! X66_MARET
       33      437        %EOD;

PL6.E3A0      #001=VOLINIT File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:12 Page:7    
--  Include file information  --

   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure VOLINIT.
PL6.E3A0      #001=VOLINIT File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:12 Page:8    

 **** Variables and constants ****

  ****  Section 001  Data  VOLINIT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     6-0-0/w BIT         r     1 ERRCD                      4-0-0/d STRC(72)    r     1 FPT_MERC
     0-0-0/d STRC(144)   r     1 FPT_PRIV

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$JIT$                     0-0-0/w PTR         r     1 B$TCB$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2448)  r     1 B$ALT                      0-0-0/w STRC(144)   r     1 B$TCB


   Procedure VOLINIT requires 19 words for executable code.
   Procedure VOLINIT requires 4 words of local(AUTO) storage.
PL6.E3A0      #001=VOLINIT File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:12 Page:9    
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=VOLINIT File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:12 Page:10   
          MINI XREF LISTING

B$ALT.CODE
       421**DCL       421--REDEF     422--REDEF     422--REDEF
B$ALT.ERR
       422**DCL       434>>ASSIGN
B$ALT.ERR.ERR#
       423**DCL       423--REDEF
B$ALT.EVID
       422**DCL       422--REDEF     422--REDEF
B$JIT.CPFLAGS1.SLEAZE
       122**DCL       122--REDEF
B$JIT.ERR.MID
        29**DCL        29--REDEF
B$JIT.JRESPEAK
       190**DCL       191--REDEF
B$JIT.ORIGINATOR_PORT.FROM_CR
       299**DCL       299--REDEF     300--REDEF
B$JIT.PNR
       203**DCL       203--REDEF
B$JIT.TSLINE
       297**DCL       298--REDEF
B$JIT$
        13**DCL        23--IMP-PTR
B$TCB.ALT$
       417**DCL       434>>ASSIGN
B$TCB$
       415**DCL       434>>ASSIGN
ERRCD
       413**DCL       411--DCLINIT   434<<ASSIGN
FPT_MERC
       411**DCL       435<>CALL
FPT_PRIV
       396**DCL       430<>CALL
PL6.E3A0      #001=VOLINIT File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:12 Page:11   
FPT_PRIV.V
       396**DCL       396--DCLINIT
IVV$VOLINIT
        11**DCL-ENT   431--CALL
M$MERC
       369**DCL-ENT   435--CALL
M$SPRIV
       372**DCL-ENT   430--CALL
NO_PRIV
       434**LABEL     430--CALLALT

PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:12   
       34        1        /*T***********************************************************/
       35        2        /*T*                                                         */
       36        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       37        4        /*T*                                                         */
       38        5        /*T***********************************************************/
       39        6        /**/
       40        7        /* FIND DVT FOR THIS DEVICE */
       41        8        /**/
       42        9        IVO$FINDDVT: PROC (VIP,DVT$) ALTRET;
       43       10        /**/
       44       11        /* INCLUDE FILES */
       45       12        /**/
       46       13        %INCLUDE B_SEGIDS_C;
       47      552        %INCLUDE CP_6;
       48      633        %INCLUDE IV$MACROS;
       49      803        %INCLUDE NI$TABLES;
       50     1019        %INCLUDE NI_DATA_C;
       51     1132        %INCLUDE IT_SUBS_C;
       52     1399        %INCLUDE IV_SUBS_C;
       53     1462        /**/
       54     1463        /* PARAMETERS */
       55     1464        /**/
       56     1465        %IV$VIP(NAME=VIP,STCLASS="");
       57     1529    1   DCL DVT$ PTR;
       58     1530        /**/
       59     1531        /* EXTERNAL REFERENCES */
       60     1532        /**/
       61     1533        /**/
       62     1534        /* DATA STRUCTURES */
       63     1535        /**/
       64     1536        %NI$DCT(NAME=DCT,STCLASS="BASED(DCT$)");
       65     1584        %NI$DVT(NAME=DVT,STCLASS="BASED(DVT$)");
       66     1591        %NI$SQH(NAME=SQH,STCLASS="BASED(SQH$)");
       67     1604        %NI$DVT(NAME=MPC_DVT,STCLASS="BASED(MPC_DVT$)");
       68     1611    1   DCL P$(0:0) PTR BASED ALIGNED;
       69     1612    1   DCL N SBIN BASED;
       70     1613        /**/
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:13   
       71     1614        /* FPTS */
       72     1615        /**/
       73     1616        %FPT_SAD(FPTN=MONIS1,STCLASS=CONSTANT,USERSID=%SPCL1SID,MONSID=%ISSID);
       74     1631        %FPT_SAD(FPTN=TIGRS2,STCLASS=CONSTANT,USERSID=%SPCL2SID,MONSID=%TIGRSID);
       75     1646        %FPT_SAD(FPTN=DVTSS3,STCLASS=CONSTANT,USERSID=%SPCL3SID,MONSID=%DVTTBLSID);
       76     1661        %FPT_MONINFO (MONPTRS=VLR_MONPTRS);
       77     1676        %VLR_MONPTRS;
       78     1691        /**/
       79     1692        /* AUTO STACK */
       80     1693        /**/
       81     1694    1   DCL DCT$ PTR;
       82     1695    1   DCL SQH$ PTR;
       83     1696    1   DCL DCT$$ PTR;
       84     1697    1   DCL DVT$$ PTR;
       85     1698    1   DCL I SBIN;
       86     1699    1   DCL MAX$ PTR;
       87     1700    1   DCL MPC_DVT$ PTR;
       88     1701        /**/
       89     1702        /* FIND DCT FOR DISK DRIVE */
       90     1703        /**/
       91     1704    1           CALL M$SAD(MONIS1);
       92     1705    1           CALL M$SAD(TIGRS2);
       93     1706    1           CALL M$SAD(DVTSS3);
       94     1707    1           CALL M$MONINFO(FPT_MONINFO) ALTRET(BADPTR);
       95     1708    1           DCT$$=VLR_MONPTRS.N$DCT$$;
       96     1709    1           CALL CONVPTR(DCT$$) ALTRET(BADPTR);
       97     1710    1           DVT$$=VLR_MONPTRS.NI$DVT$$;
       98     1711    1           CALL CONVPTR(DVT$$) ALTRET(BADPTR);
       99     1712    1           I=1;
      100     1713    2           DO WHILE('1'B);
      101     1714    2              DCT$=DCT$$->P$(I);
      102     1715    2              CALL CONVPTR(DCT$) ALTRET(BADPTR);
      103     1716    3              IF VIP.DEVID=SUBSTR(DCT.DEVNM,0,4) THEN DO;
      104     1717    3                 IF NOT DCT.STATUS.DOWN THEN ALTRETURN;
      105     1718    3                 VIP.DCTX=I;
      106     1719    3                 DVT$=DCT.DVT$;
      107     1720    3                 CALL CONVPTR(DVT$) ALTRET(BADDCT);
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:14   
      108     1721    3                 VIP.MODEL=DVT.MODEL(DCT.MODX);
      109     1722    4                 IF DVT.TYPE=%DV_DP THEN DO;
      110     1723    4                    VIP.DVN = DCT.DVN;
      111     1724    4                    SQH$ = DCT.SQH$;
      112     1725    4                    CALL CONVPTR (SQH$) ALTRET (BADDCT);
      113     1726    4                    DCT$ = SQH.MPC$(0);    /* The first one */
      114     1727    4                    CALL CONVPTR (DCT$) ALTRET (BADDCT);
      115     1728    4                    IF DCT.STATUS.DOWN
      116     1729    5                    THEN DO;
      117     1730    5                       DCT$ = SQH.MPC$(1);
      118     1731    5                       CALL CONVPTR(DCT$) ALTRET(BADDCT);
      119     1732    5                       IF DCT.STATUS.DOWN THEN GOTO BADDCT;
      120     1733    5                       END;
      121     1734    4                    VIP.MPC_DCTX = DCT.DCTX; /* SAVE DCTX OF MPC */
      122     1735    4                    MPC_DVT$ = DCT.DVT$;
      123     1736    4                    CALL CONVPTR(MPC_DVT$) ALTRET(BADDCT);
      124     1737    5                    DO SELECT ( MPC_DVT.MODEL(DCT.MODX) );
      125     1738    5                       SELECT ( 'MSP8021 ', 'MSP8022 ', 'MSP8023 ' );
      126     1739    5                       VIP.MPC_TYPE = #DAU;
      127     1740    5                       SELECT ( 'MSP3881 ', 'MSP3885 ', 'MSP3882 ',
      128     1741    5                         'MSP3886 ', 'MSP3991 ', 'MSP3993 ',
      129     1742    5                         'MSP3992 ', 'MSP3994 ' );
      130     1743    5                       VIP.MPC_TYPE = #FIPS;
      131     1744    5                       SELECT ( 'MSS8080 ', 'MSS8090 ', 'MSP8080 ', 'MSP8090 ' );
      132     1745    5                       VIP.MPC_TYPE = #MDS;
      133     1746    5                       SELECT ( ELSE );
      134     1747    5                    VIP.MPC_TYPE = #MPC;
      135     1748    5                       END;                /* DO SELECT */
      136     1749    5                 DO I = 0 TO %N_CHANSPERMPC-1;
      137     1750    6                    IF DCT.MPC.IOCHANX(I) ~= 0 THEN DO;
      138     1751    6                       VIP.IOCHAN.IOM = DCT.MPC.IOCHAN.IOM(I);
      139     1752    6                       VIP.IOCHAN.CHAN = DCT.MPC.IOCHAN.CHAN(I);
      140     1753    6                       RETURN;
      141     1754    6                       END;
      142     1755    5                    END;
      143     1756    4                 ALTRETURN;                /* If not connected to anything */
      144     1757    4                    END;
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:15   
      145     1758    3                 END;
      146     1759    2   BADDCT:
      147     1760    2              I=I+1;
      148     1761    2              END;
      149     1762    1   BADPTR:
      150     1763    1           ALTRETURN;                      /* DISK NOT FOUND */
      151     1764        /**/
      152     1765        /* CONVERT MONITOR POINTER TO SPECIAL SID */
      153     1766        /**/
      154     1767    1   CONVPTR: PROC (P$) ALTRET;
      155     1768        /**/
      156     1769        /* PARAMETER */
      157     1770        /**/
      158     1771    2   DCL 1 P$ ALIGNED,
      159     1772    2         2 ADR BIT(24),
      160     1773    2         2 SEGID BIT(12);
      161     1774        /**/
      162     1775    2           IF P$.SEGID=%ISSID THEN P$.SEGID=%SPCL1SID;
      163     1776    2           ELSE IF P$.SEGID=%TIGRSID THEN P$.SEGID=%SPCL2SID;
      164     1777    2              ELSE IF P$.SEGID = %DVTTBLSID THEN P$.SEGID = %SPCL3SID;
      165     1778    2                 ELSE ALTRETURN;
      166     1779    2           RETURN;
      167     1780    2   END CONVPTR;
      168     1781    1   END IVO$FINDDVT;
      169     1782        %EOD;

PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:16   
--  Include file information  --

   IV_SUBS_C.:E05TOU  is referenced.
   IT_SUBS_C.:E05TOU  is referenced.
   NI_DATA_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   IV$MACROS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IVO$FINDDVT.

   Procedure IVO$FINDDVT requires 344 words for executable code.
   Procedure IVO$FINDDVT requires 16 words of local(AUTO) storage.

PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:17   

 Object Unit name= IVO$FINDDVT                                File name= IVO$ONLINE.:E05TOU
 UTS= JUL 29 '97 23:12:54.96 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1  RoData even  UTS     42     52  IVO$FINDDVT
    2   Data  even  none    26     32  IVO$FINDDVT
    3   Proc  even  none   344    530  IVO$FINDDVT
    4  RoData even  none     1      1  IVO$FINDDVT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes    yes     yes      Std        2  IVO$FINDDVT

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_2
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:18   

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:19   


       34        1        /*T***********************************************************/
       35        2        /*T*                                                         */
       36        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
       37        4        /*T*                                                         */
       38        5        /*T***********************************************************/
       39        6        /**/
       40        7        /* FIND DVT FOR THIS DEVICE */
       41        8        /**/
       42        9        IVO$FINDDVT: PROC (VIP,DVT$) ALTRET;

      9  3 000000   000000 700200 xent  IVO$FINDDVT  TSX0  ! X66_AUTO_2
         3 000001   000020 000002                    ZERO    16,2

       43       10        /**/
       44       11        /* INCLUDE FILES */
       45       12        /**/
       46       13        %INCLUDE B_SEGIDS_C;
       47      552        %INCLUDE CP_6;
       48      633        %INCLUDE IV$MACROS;
       49      803        %INCLUDE NI$TABLES;
       50     1019        %INCLUDE NI_DATA_C;
       51     1132        %INCLUDE IT_SUBS_C;
       52     1399        %INCLUDE IV_SUBS_C;
       53     1462        /**/
       54     1463        /* PARAMETERS */
       55     1464        /**/
       56     1465        %IV$VIP(NAME=VIP,STCLASS="");
       57     1529    1   DCL DVT$ PTR;
       58     1530        /**/
       59     1531        /* EXTERNAL REFERENCES */
       60     1532        /**/
       61     1533        /**/
       62     1534        /* DATA STRUCTURES */
       63     1535        /**/
       64     1536        %NI$DCT(NAME=DCT,STCLASS="BASED(DCT$)");
       65     1584        %NI$DVT(NAME=DVT,STCLASS="BASED(DVT$)");
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:20   
       66     1591        %NI$SQH(NAME=SQH,STCLASS="BASED(SQH$)");
       67     1604        %NI$DVT(NAME=MPC_DVT,STCLASS="BASED(MPC_DVT$)");
       68     1611    1   DCL P$(0:0) PTR BASED ALIGNED;
       69     1612    1   DCL N SBIN BASED;
       70     1613        /**/
       71     1614        /* FPTS */
       72     1615        /**/
       73     1616        %FPT_SAD(FPTN=MONIS1,STCLASS=CONSTANT,USERSID=%SPCL1SID,MONSID=%ISSID);
       74     1631        %FPT_SAD(FPTN=TIGRS2,STCLASS=CONSTANT,USERSID=%SPCL2SID,MONSID=%TIGRSID);
       75     1646        %FPT_SAD(FPTN=DVTSS3,STCLASS=CONSTANT,USERSID=%SPCL3SID,MONSID=%DVTTBLSID);
       76     1661        %FPT_MONINFO (MONPTRS=VLR_MONPTRS);
       77     1676        %VLR_MONPTRS;
       78     1691        /**/
       79     1692        /* AUTO STACK */
       80     1693        /**/
       81     1694    1   DCL DCT$ PTR;
       82     1695    1   DCL SQH$ PTR;
       83     1696    1   DCL DCT$$ PTR;
       84     1697    1   DCL DVT$$ PTR;
       85     1698    1   DCL I SBIN;
       86     1699    1   DCL MAX$ PTR;
       87     1700    1   DCL MPC_DVT$ PTR;
       88     1701        /**/
       89     1702        /* FIND DCT FOR DISK DRIVE */
       90     1703        /**/
       91     1704    1           CALL M$SAD(MONIS1);

   1704  3 000002   000000 630400 1                  EPPR0   MONIS1
         3 000003   030015 713400                    CLIMB   12301
         3 000004   400000 401760                    pmme    nvectors=1

       92     1705    1           CALL M$SAD(TIGRS2);

   1705  3 000005   000004 630400 1                  EPPR0   TIGRS2
         3 000006   030015 713400                    CLIMB   12301
         3 000007   400000 401760                    pmme    nvectors=1

PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:21   
       93     1706    1           CALL M$SAD(DVTSS3);

   1706  3 000010   000010 630400 1                  EPPR0   DVTSS3
         3 000011   030015 713400                    CLIMB   12301
         3 000012   400000 401760                    pmme    nvectors=1

       94     1707    1           CALL M$MONINFO(FPT_MONINFO) ALTRET(BADPTR);

   1707  3 000013   000000 630400 2                  EPPR0   FPT_MONINFO
         3 000014   420023 713400                    CLIMB   alt,+8211
         3 000015   402400 401760                    pmme    nvectors=6
         3 000016   000475 702000 3                  TSX2    BADPTR

       95     1708    1           DCT$$=VLR_MONPTRS.N$DCT$$;

   1708  3 000017   000014 236000 2                  LDQ     VLR_MONPTRS
         3 000020   200007 756100                    STQ     DCT$$,,AUTO

       96     1709    1           CALL CONVPTR(DCT$$) ALTRET(BADPTR);

   1709  3 000021   200007 630500                    EPPR0   DCT$$,,AUTO
         3 000022   200015 450500                    STP0    MPC_DVT$+2,,AUTO
         3 000023   000476 701000 3                  TSX1    CONVPTR
         3 000024   000475 702000 3                  TSX2    BADPTR

       97     1710    1           DVT$$=VLR_MONPTRS.NI$DVT$$;

   1710  3 000025   000016 236000 2                  LDQ     VLR_MONPTRS+2
         3 000026   200010 756100                    STQ     DVT$$,,AUTO

       98     1711    1           CALL CONVPTR(DVT$$) ALTRET(BADPTR);

   1711  3 000027   200010 630500                    EPPR0   DVT$$,,AUTO
         3 000030   200015 450500                    STP0    MPC_DVT$+2,,AUTO
         3 000031   000476 701000 3                  TSX1    CONVPTR
         3 000032   000475 702000 3                  TSX2    BADPTR

PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:22   
       99     1712    1           I=1;

   1712  3 000033   000001 235007                    LDA     1,DL
         3 000034   200011 755100                    STA     I,,AUTO

      100     1713    2           DO WHILE('1'B);

      101     1714    2              DCT$=DCT$$->P$(I);

   1714  3 000035   200007 470500                    LDP0    DCT$$,,AUTO
         3 000036   200011 720100                    LXL0    I,,AUTO
         3 000037   000000 236110                    LDQ     0,X0,PR0
         3 000040   200005 756100                    STQ     DCT$,,AUTO

      102     1715    2              CALL CONVPTR(DCT$) ALTRET(BADPTR);

   1715  3 000041   200005 631500                    EPPR1   DCT$,,AUTO
         3 000042   200015 451500                    STP1    MPC_DVT$+2,,AUTO
         3 000043   000476 701000 3                  TSX1    CONVPTR
         3 000044   000475 702000 3                  TSX2    BADPTR

      103     1716    3              IF VIP.DEVID=SUBSTR(DCT.DEVNM,0,4) THEN DO;

   1716  3 000045   200003 470500                    LDP0    @VIP,,AUTO
         3 000046   200005 471500                    LDP1    DCT$,,AUTO
         3 000047   040100 106500                    CMPC    fill='040'O
         3 000050   000005 000010                    ADSC9   5,,PR0                   cn=0,n=8
         3 000051   100002 000004                    ADSC9   2,,PR1                   cn=0,n=4
         3 000052   000473 601000 3                  TNZ     BADDCT

      104     1717    3                 IF NOT DCT.STATUS.DOWN THEN ALTRETURN;

   1717  3 000053   100027 234100                    SZN     23,,PR1
         3 000054   000056 604000 3                  TMI     s:1718

   1717  3 000055   000000 702200 xent               TSX2  ! X66_AALT

PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:23   
      105     1718    3                 VIP.DCTX=I;

   1718  3 000056   200011 236100                    LDQ     I,,AUTO
         3 000057   000025 736000                    QLS     21
         3 000060   000017 676100                    ERQ     15,,PR0
         3 000061   777770 376003                    ANQ     -8,DU
         3 000062   000017 656100                    ERSQ    15,,PR0

      106     1719    3                 DVT$=DCT.DVT$;

   1719  3 000063   100024 236100                    LDQ     20,,PR1
         3 000064   200004 473500                    LDP3    @DVT$,,AUTO
         3 000065   300000 756100                    STQ     0,,PR3

      107     1720    3                 CALL CONVPTR(DVT$) ALTRET(BADDCT);

   1720  3 000066   200004 236100                    LDQ     @DVT$,,AUTO
         3 000067   200015 756100                    STQ     MPC_DVT$+2,,AUTO
         3 000070   000476 701000 3                  TSX1    CONVPTR
         3 000071   000473 702000 3                  TSX2    BADDCT

      108     1721    3                 VIP.MODEL=DVT.MODEL(DCT.MODX);

   1721  3 000072   200004 470500                    LDP0    @DVT$,,AUTO
         3 000073   000000 471500                    LDP1    0,,PR0
         3 000074   200005 473500                    LDP3    DCT$,,AUTO
         3 000075   300007 236100                    LDQ     7,,PR3
         3 000076   000021 772000                    QRL     17
         3 000077   000176 376007                    ANQ     126,DL
         3 000100   000002 736000                    QLS     2
         3 000101   200003 474500                    LDP4    @VIP,,AUTO
         3 000102   040100 100506                    MLR     fill='040'O
         3 000103   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
         3 000104   400007 000010                    ADSC9   7,,PR4                   cn=0,n=8

      109     1722    4                 IF DVT.TYPE=%DV_DP THEN DO;

PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:24   
   1722  3 000105   000000 471500                    LDP1    0,,PR0
         3 000106   100053 236100                    LDQ     43,,PR1
         3 000107   777000 376003                    ANQ     -512,DU
         3 000110   006000 116003                    CMPQ    3072,DU
         3 000111   000473 601000 3                  TNZ     BADDCT

      110     1723    4                    VIP.DVN = DCT.DVN;

   1723  3 000112   300007 236100                    LDQ     7,,PR3
         3 000113   007700 376003                    ANQ     4032,DU
         3 000114   000003 736000                    QLS     3
         3 000115   400021 552140                    STBQ    17,'40'O,PR4

      111     1724    4                    SQH$ = DCT.SQH$;

   1724  3 000116   300022 236100                    LDQ     18,,PR3
         3 000117   200006 756100                    STQ     SQH$,,AUTO

      112     1725    4                    CALL CONVPTR (SQH$) ALTRET (BADDCT);

   1725  3 000120   200006 631500                    EPPR1   SQH$,,AUTO
         3 000121   200015 451500                    STP1    MPC_DVT$+2,,AUTO
         3 000122   000476 701000 3                  TSX1    CONVPTR
         3 000123   000473 702000 3                  TSX2    BADDCT

      113     1726    4                    DCT$ = SQH.MPC$(0);    /* The first one */

   1726  3 000124   200006 470500                    LDP0    SQH$,,AUTO
         3 000125   000005 236100                    LDQ     5,,PR0
         3 000126   200005 756100                    STQ     DCT$,,AUTO

      114     1727    4                    CALL CONVPTR (DCT$) ALTRET (BADDCT);

   1727  3 000127   200005 631500                    EPPR1   DCT$,,AUTO
         3 000130   200015 451500                    STP1    MPC_DVT$+2,,AUTO
         3 000131   000476 701000 3                  TSX1    CONVPTR
         3 000132   000473 702000 3                  TSX2    BADDCT
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:25   

      115     1728    4                    IF DCT.STATUS.DOWN

   1728  3 000133   200005 470500                    LDP0    DCT$,,AUTO
         3 000134   000027 234100                    SZN     23,,PR0
         3 000135   000150 605000 3                  TPL     s:1734

      116     1729    5                    THEN DO;

      117     1730    5                       DCT$ = SQH.MPC$(1);

   1730  3 000136   200006 471500                    LDP1    SQH$,,AUTO
         3 000137   100006 236100                    LDQ     6,,PR1
         3 000140   200005 756100                    STQ     DCT$,,AUTO

      118     1731    5                       CALL CONVPTR(DCT$) ALTRET(BADDCT);

   1731  3 000141   200005 630500                    EPPR0   DCT$,,AUTO
         3 000142   200015 450500                    STP0    MPC_DVT$+2,,AUTO
         3 000143   000476 701000 3                  TSX1    CONVPTR
         3 000144   000473 702000 3                  TSX2    BADDCT

      119     1732    5                       IF DCT.STATUS.DOWN THEN GOTO BADDCT;

   1732  3 000145   200005 470500                    LDP0    DCT$,,AUTO
         3 000146   000027 234100                    SZN     23,,PR0
         3 000147   000473 604000 3                  TMI     BADDCT

      120     1733    5                       END;

      121     1734    4                    VIP.MPC_DCTX = DCT.DCTX; /* SAVE DCTX OF MPC */

   1734  3 000150   200003 471500                    LDP1    @VIP,,AUTO
         3 000151   000006 236100                    LDQ     6,,PR0
         3 000152   000011 772000                    QRL     9
         3 000153   100021 676100                    ERQ     17,,PR1
         3 000154   000000 376000 4                  ANQ     0
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:26   
         3 000155   100021 656100                    ERSQ    17,,PR1

      122     1735    4                    MPC_DVT$ = DCT.DVT$;

   1735  3 000156   000024 236100                    LDQ     20,,PR0
         3 000157   200013 756100                    STQ     MPC_DVT$,,AUTO

      123     1736    4                    CALL CONVPTR(MPC_DVT$) ALTRET(BADDCT);

   1736  3 000160   200013 633500                    EPPR3   MPC_DVT$,,AUTO
         3 000161   200015 453500                    STP3    MPC_DVT$+2,,AUTO
         3 000162   000476 701000 3                  TSX1    CONVPTR
         3 000163   000473 702000 3                  TSX2    BADDCT

      124     1737    5                    DO SELECT ( MPC_DVT.MODEL(DCT.MODX) );

   1737  3 000164   200005 470500                    LDP0    DCT$,,AUTO
         3 000165   000007 236100                    LDQ     7,,PR0
         3 000166   000021 772000                    QRL     17
         3 000167   000176 376007                    ANQ     126,DL
         3 000170   000000 620006                    EAX0    0,QL
         3 000171   000002 736000                    QLS     2
         3 000172   200013 471500                    LDP1    MPC_DVT$,,AUTO
         3 000173   040000 106506                    CMPC    fill='040'O
         3 000174   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
         3 000175   000014 000010 1                  ADSC9   DVTSS3+4                 cn=0,n=8
         3 000176   000345 602000 3                  TNC     s:1737+113
         3 000177   000000 635010                    EAA     0,X0
         3 000200   000020 771000                    ARL     16
         3 000201   040000 106505                    CMPC    fill='040'O
         3 000202   100003 000010                    ADSC9   3,A,PR1                  cn=0,n=8
         3 000203   000014 000010 1                  ADSC9   DVTSS3+4                 cn=0,n=8
         3 000204   000417 600000 3                  TZE     s:1743
         3 000205   000000 636010                    EAQ     0,X0
         3 000206   000020 772000                    QRL     16
         3 000207   040000 106506                    CMPC    fill='040'O
         3 000210   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:27   
         3 000211   000016 000010 1                  ADSC9   DVTSS3+6                 cn=0,n=8
         3 000212   000313 602000 3                  TNC     s:1737+87
         3 000213   000000 636010                    EAQ     0,X0
         3 000214   000020 772000                    QRL     16
         3 000215   040000 106506                    CMPC    fill='040'O
         3 000216   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
         3 000217   000016 000010 1                  ADSC9   DVTSS3+6                 cn=0,n=8
         3 000220   000413 600000 3                  TZE     s:1739
         3 000221   000000 636010                    EAQ     0,X0
         3 000222   000020 772000                    QRL     16
         3 000223   040000 106506                    CMPC    fill='040'O
         3 000224   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
         3 000225   000020 000010 1                  ADSC9   DVTSS3+8                 cn=0,n=8
         3 000226   000267 602000 3                  TNC     s:1737+67
         3 000227   000000 636010                    EAQ     0,X0
         3 000230   000020 772000                    QRL     16
         3 000231   040000 106506                    CMPC    fill='040'O
         3 000232   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
         3 000233   000020 000010 1                  ADSC9   DVTSS3+8                 cn=0,n=8
         3 000234   000423 600000 3                  TZE     s:1745
         3 000235   000000 636010                    EAQ     0,X0
         3 000236   000020 772000                    QRL     16
         3 000237   040000 106506                    CMPC    fill='040'O
         3 000240   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
         3 000241   000022 000010 1                  ADSC9   DVTSS3+10                cn=0,n=8
         3 000242   000260 602000 3                  TNC     s:1737+60
         3 000243   000000 636010                    EAQ     0,X0
         3 000244   000020 772000                    QRL     16
         3 000245   040000 106506                    CMPC    fill='040'O
         3 000246   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
         3 000247   000022 000010 1                  ADSC9   DVTSS3+10                cn=0,n=8
         3 000250   000423 600000 3                  TZE     s:1745
         3 000251   000000 636010                    EAQ     0,X0
         3 000252   000020 772000                    QRL     16
         3 000253   040000 106506                    CMPC    fill='040'O
         3 000254   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
         3 000255   000024 000010 1                  ADSC9   DVTSS3+12                cn=0,n=8
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:28   
         3 000256   000427 601000 3                  TNZ     s:1747
         3 000257   000423 710000 3                  TRA     s:1745
         3 000260   000000 636010                    EAQ     0,X0
         3 000261   000020 772000                    QRL     16
         3 000262   040000 106506                    CMPC    fill='040'O
         3 000263   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
         3 000264   000026 000010 1                  ADSC9   DVTSS3+14                cn=0,n=8
         3 000265   000427 601000 3                  TNZ     s:1747
         3 000266   000423 710000 3                  TRA     s:1745
         3 000267   000000 636010                    EAQ     0,X0
         3 000270   000020 772000                    QRL     16
         3 000271   040000 106506                    CMPC    fill='040'O
         3 000272   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
         3 000273   000030 000010 1                  ADSC9   DVTSS3+16                cn=0,n=8
         3 000274   000304 602000 3                  TNC     s:1737+80
         3 000275   000000 636010                    EAQ     0,X0
         3 000276   000020 772000                    QRL     16
         3 000277   040000 106506                    CMPC    fill='040'O
         3 000300   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
         3 000301   000030 000010 1                  ADSC9   DVTSS3+16                cn=0,n=8
         3 000302   000413 600000 3                  TZE     s:1739
         3 000303   000427 710000 3                  TRA     s:1747
         3 000304   000000 636010                    EAQ     0,X0
         3 000305   000020 772000                    QRL     16
         3 000306   040000 106506                    CMPC    fill='040'O
         3 000307   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
         3 000310   000032 000010 1                  ADSC9   DVTSS3+18                cn=0,n=8
         3 000311   000427 601000 3                  TNZ     s:1747
         3 000312   000413 710000 3                  TRA     s:1739
         3 000313   000000 636010                    EAQ     0,X0
         3 000314   000020 772000                    QRL     16
         3 000315   040000 106506                    CMPC    fill='040'O
         3 000316   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
         3 000317   000034 000010 1                  ADSC9   DVTSS3+20                cn=0,n=8
         3 000320   000336 602000 3                  TNC     s:1737+106
         3 000321   000000 636010                    EAQ     0,X0
         3 000322   000020 772000                    QRL     16
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:29   
         3 000323   040000 106506                    CMPC    fill='040'O
         3 000324   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
         3 000325   000034 000010 1                  ADSC9   DVTSS3+20                cn=0,n=8
         3 000326   000417 600000 3                  TZE     s:1743
         3 000327   000000 636010                    EAQ     0,X0
         3 000330   000020 772000                    QRL     16
         3 000331   040000 106506                    CMPC    fill='040'O
         3 000332   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
         3 000333   000036 000010 1                  ADSC9   DVTSS3+22                cn=0,n=8
         3 000334   000427 601000 3                  TNZ     s:1747
         3 000335   000417 710000 3                  TRA     s:1743
         3 000336   000000 636010                    EAQ     0,X0
         3 000337   000020 772000                    QRL     16
         3 000340   040000 106506                    CMPC    fill='040'O
         3 000341   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
         3 000342   000040 000010 1                  ADSC9   DVTSS3+24                cn=0,n=8
         3 000343   000427 601000 3                  TNZ     s:1747
         3 000344   000417 710000 3                  TRA     s:1743
         3 000345   000000 635010                    EAA     0,X0
         3 000346   000020 771000                    ARL     16
         3 000347   040000 106505                    CMPC    fill='040'O
         3 000350   100003 000010                    ADSC9   3,A,PR1                  cn=0,n=8
         3 000351   000042 000010 1                  ADSC9   DVTSS3+26                cn=0,n=8
         3 000352   000370 602000 3                  TNC     s:1737+132
         3 000353   000000 636010                    EAQ     0,X0
         3 000354   000020 772000                    QRL     16
         3 000355   040000 106506                    CMPC    fill='040'O
         3 000356   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
         3 000357   000042 000010 1                  ADSC9   DVTSS3+26                cn=0,n=8
         3 000360   000417 600000 3                  TZE     s:1743
         3 000361   000000 636010                    EAQ     0,X0
         3 000362   000020 772000                    QRL     16
         3 000363   040000 106506                    CMPC    fill='040'O
         3 000364   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
         3 000365   000044 000010 1                  ADSC9   DVTSS3+28                cn=0,n=8
         3 000366   000427 601000 3                  TNZ     s:1747
         3 000367   000417 710000 3                  TRA     s:1743
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:30   
         3 000370   000000 636010                    EAQ     0,X0
         3 000371   000020 772000                    QRL     16
         3 000372   040000 106506                    CMPC    fill='040'O
         3 000373   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
         3 000374   000046 000010 1                  ADSC9   DVTSS3+30                cn=0,n=8
         3 000375   000427 602000 3                  TNC     s:1747
         3 000376   000000 636010                    EAQ     0,X0
         3 000377   000020 772000                    QRL     16
         3 000400   040000 106506                    CMPC    fill='040'O
         3 000401   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
         3 000402   000046 000010 1                  ADSC9   DVTSS3+30                cn=0,n=8
         3 000403   000417 600000 3                  TZE     s:1743
         3 000404   000000 636010                    EAQ     0,X0
         3 000405   000020 772000                    QRL     16
         3 000406   040000 106506                    CMPC    fill='040'O
         3 000407   100003 000010                    ADSC9   3,Q,PR1                  cn=0,n=8
         3 000410   000050 000010 1                  ADSC9   DVTSS3+32                cn=0,n=8
         3 000411   000427 601000 3                  TNZ     s:1747
         3 000412   000417 710000 3                  TRA     s:1743

      125     1738    5                       SELECT ( 'MSP8021 ', 'MSP8022 ', 'MSP8023 ' );

      126     1739    5                       VIP.MPC_TYPE = #DAU;

   1739  3 000413   200003 473500                    LDP3    @VIP,,AUTO
         3 000414   000001 236007                    LDQ     1,DL
         3 000415   300021 552104                    STBQ    17,'04'O,PR3
         3 000416   000432 710000 3                  TRA     s:1749

      127     1740    5                       SELECT ( 'MSP3881 ', 'MSP3885 ', 'MSP3882 ',

      128     1741    5                         'MSP3886 ', 'MSP3991 ', 'MSP3993 ',
      129     1742    5                         'MSP3992 ', 'MSP3994 ' );
      130     1743    5                       VIP.MPC_TYPE = #FIPS;

   1743  3 000417   200003 473500                    LDP3    @VIP,,AUTO
         3 000420   000002 236007                    LDQ     2,DL
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:31   
         3 000421   300021 552104                    STBQ    17,'04'O,PR3
         3 000422   000432 710000 3                  TRA     s:1749

      131     1744    5                       SELECT ( 'MSS8080 ', 'MSS8090 ', 'MSP8080 ', 'MSP8090 ' );

      132     1745    5                       VIP.MPC_TYPE = #MDS;

   1745  3 000423   200003 473500                    LDP3    @VIP,,AUTO
         3 000424   000003 236007                    LDQ     3,DL
         3 000425   300021 552104                    STBQ    17,'04'O,PR3
         3 000426   000432 710000 3                  TRA     s:1749

      133     1746    5                       SELECT ( ELSE );

      134     1747    5                    VIP.MPC_TYPE = #MPC;

   1747  3 000427   200003 473500                    LDP3    @VIP,,AUTO
         3 000430   000000 236003                    LDQ     0,DU
         3 000431   300021 552104                    STBQ    17,'04'O,PR3

      135     1748    5                       END;                /* DO SELECT */

      136     1749    5                 DO I = 0 TO %N_CHANSPERMPC-1;

   1749  3 000432   200011 450100                    STZ     I,,AUTO
         3 000433   000467 710000 3                  TRA     s:1755+1

      137     1750    6                    IF DCT.MPC.IOCHANX(I) ~= 0 THEN DO;

   1750  3 000434   200005 470500                    LDP0    DCT$,,AUTO
         3 000435   200011 235100                    LDA     I,,AUTO
         3 000436   000100 101505                    MRL     fill='000'O
         3 000437   000031 000001                    ADSC9   25,A,PR0                 cn=0,n=1
         3 000440   200016 000004                    ADSC9   @P$+1,,AUTO              cn=0,n=4
         3 000441   200016 236100                    LDQ     @P$+1,,AUTO
         3 000442   000000 116003                    CMPQ    0,DU
         3 000443   000466 600000 3                  TZE     s:1755
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:32   

      138     1751    6                       VIP.IOCHAN.IOM = DCT.MPC.IOCHAN.IOM(I);

   1751  3 000444   200011 236100                    LDQ     I,,AUTO
         3 000445   000011 402007                    MPY     9,DL
         3 000446   000000 116003                    CMPQ    0,DU
         3 000447   000451 605000 3                  TPL     s:1751+5
         3 000450   000044 036003                    ADLQ    36,DU
         3 000451   200003 471500                    LDP1    @VIP,,AUTO
         3 000452   003100 060506                    CSL     bolr='003'O
         3 000453   000031 000002                    BDSC    25,Q,PR0                 by=0,bit=0,n=2
         3 000454   100020 600002                    BDSC    16,,PR1                  by=3,bit=0,n=2

      139     1752    6                       VIP.IOCHAN.CHAN = DCT.MPC.IOCHAN.CHAN(I);

   1752  3 000455   200011 236100                    LDQ     I,,AUTO
         3 000456   000011 402007                    MPY     9,DL
         3 000457   000000 116003                    CMPQ    0,DU
         3 000460   000462 605000 3                  TPL     s:1752+5
         3 000461   000044 036003                    ADLQ    36,DU
         3 000462   003100 060506                    CSL     bolr='003'O
         3 000463   000031 020007                    BDSC    25,Q,PR0                 by=0,bit=2,n=7
         3 000464   100020 620007                    BDSC    16,,PR1                  by=3,bit=2,n=7

      140     1753    6                       RETURN;

   1753  3 000465   000000 702200 xent               TSX2  ! X66_ARET

      141     1754    6                       END;
      142     1755    5                    END;

   1755  3 000466   200011 054100                    AOS     I,,AUTO
         3 000467   200011 235100                    LDA     I,,AUTO
         3 000470   000017 115007                    CMPA    15,DL
         3 000471   000434 604400 3                  TMOZ    s:1750

      143     1756    4                 ALTRETURN;                /* If not connected to anything */
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:33   

   1756  3 000472   000000 702200 xent               TSX2  ! X66_AALT

      144     1757    4                    END;
      145     1758    3                 END;
      146     1759    2   BADDCT:
      147     1760    2              I=I+1;

   1760  3 000473   200011 054100       BADDCT       AOS     I,,AUTO

      148     1761    2              END;

   1761  3 000474   000035 710000 3                  TRA     s:1714

      149     1762    1   BADPTR:
      150     1763    1           ALTRETURN;                      /* DISK NOT FOUND */

   1763  3 000475   000000 702200 xent  BADPTR       TSX2  ! X66_AALT

      151     1764        /**/
      152     1765        /* CONVERT MONITOR POINTER TO SPECIAL SID */
      153     1766        /**/
      154     1767    1   CONVPTR: PROC (P$) ALTRET;

   1767  3 000476   200014 741300       CONVPTR      STX1  ! MPC_DVT$+1,,AUTO

      155     1768        /**/
      156     1769        /* PARAMETER */
      157     1770        /**/
      158     1771    2   DCL 1 P$ ALIGNED,
      159     1772    2         2 ADR BIT(24),
      160     1773    2         2 SEGID BIT(12);
      161     1774        /**/
      162     1775    2           IF P$.SEGID=%ISSID THEN P$.SEGID=%SPCL1SID;

   1775  3 000477   200015 470500                    LDP0    @P$,,AUTO
         3 000500   000000 236100                    LDQ     0,,PR0
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:34   
         3 000501   007777 376007                    ANQ     4095,DL
         3 000502   006000 116007                    CMPQ    3072,DL
         3 000503   000507 601000 3                  TNZ     s:1776

   1775  3 000504   006021 236007                    LDQ     3089,DL
         3 000505   000000 752103                    STCQ    0,'03'O,PR0
         3 000506   000526 710000 3                  TRA     s:1779

      163     1776    2           ELSE IF P$.SEGID=%TIGRSID THEN P$.SEGID=%SPCL2SID;

   1776  3 000507   000000 236100                    LDQ     0,,PR0
         3 000510   007777 376007                    ANQ     4095,DL
         3 000511   006123 116007                    CMPQ    3155,DL
         3 000512   000516 601000 3                  TNZ     s:1777

   1776  3 000513   006022 236007                    LDQ     3090,DL
         3 000514   000000 752103                    STCQ    0,'03'O,PR0
         3 000515   000526 710000 3                  TRA     s:1779

      164     1777    2              ELSE IF P$.SEGID = %DVTTBLSID THEN P$.SEGID = %SPCL3SID;

   1777  3 000516   000000 236100                    LDQ     0,,PR0
         3 000517   007777 376007                    ANQ     4095,DL
         3 000520   006202 116007                    CMPQ    3202,DL
         3 000521   000525 601000 3                  TNZ     s:1778

   1777  3 000522   006023 236007                    LDQ     3091,DL
         3 000523   000000 752103                    STCQ    0,'03'O,PR0
         3 000524   000526 710000 3                  TRA     s:1779

      165     1778    2                 ELSE ALTRETURN;

   1778  3 000525   000000 702211                    TSX2  ! 0,X1

      166     1779    2           RETURN;

   1779  3 000526   200014 221300                    LDX1  ! MPC_DVT$+1,,AUTO
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:35   
         3 000527   000001 702211                    TSX2  ! 1,X1
      167     1780    2   END CONVPTR;
      168     1781    1   END IVO$FINDDVT;
      169     1782        %EOD;

PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:36   
--  Include file information  --

   IV_SUBS_C.:E05TOU  is referenced.
   IT_SUBS_C.:E05TOU  is referenced.
   NI_DATA_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   IV$MACROS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IVO$FINDDVT.
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:37   

 **** Variables and constants ****

  ****  Section 001 RoData IVO$FINDDVT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    10-0-0/d STRC(144)   r     1 DVTSS3                     0-0-0/d STRC(144)   r     1 MONIS1
     4-0-0/d STRC(144)   r     1 TIGRS2

  ****  Section 002  Data  IVO$FINDDVT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(432)   r     1 FPT_MONINFO               14-0-0/d STRC(468)   r     1 VLR_MONPTRS

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @DVT$                     15-0-0/w PTR         r     1 @P$
     3-0-0/w PTR         r     1 @VIP                       5-0-0/w PTR         r     1 DCT$
     7-0-0/w PTR         r     1 DCT$$                     *0-0-0/w PTR         r     1 DVT$
    10-0-0/w PTR         r     1 DVT$$                     11-0-0/w SBIN        r     1 I
    13-0-0/w PTR         r     1 MPC_DVT$                  *0-0-0/w STRC        r     1 P$
     6-0-0/w PTR         r     1 SQH$                      *0-0-0/w STRC(3024)  r     1 VIP

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(1332)  r     1 DCT                        0-0-0/w STRC(2844)  r     1 DVT
     0-0-0/w STRC(2844)  r     1 MPC_DVT                    0-0-0/w PTR         r     1 P$(0:0)
     0-0-0/w STRC(252)   r     1 SQH
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:38   


   Procedure IVO$FINDDVT requires 344 words for executable code.
   Procedure IVO$FINDDVT requires 16 words of local(AUTO) storage.
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:39   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:40   
          MINI XREF LISTING

BADDCT
      1760**LABEL    1720--CALLALT  1725--CALLALT  1727--CALLALT  1731--CALLALT  1732--GOTO     1736--CALLALT
BADPTR
      1763**LABEL    1707--CALLALT  1709--CALLALT  1711--CALLALT  1715--CALLALT
CONVPTR
      1767**PROC     1709--CALL     1711--CALL     1715--CALL     1720--CALL     1725--CALL     1727--CALL
      1731--CALL     1736--CALL
DCT.DCTX
      1546**DCL      1734>>ASSIGN
DCT.DEVNM
      1545**DCL      1716>>IF
DCT.DP
      1565**DCL      1572--REDEF    1575--REDEF    1576--REDEF    1578--REDEF    1578--REDEF    1579--REDEF
      1580--REDEF    1580--REDEF
DCT.DVN
      1554**DCL      1723>>ASSIGN
DCT.DVT$
      1561**DCL      1719>>ASSIGN   1735>>ASSIGN
DCT.MODX
      1554**DCL      1721>>ASSIGN   1737>>DOSELCT
DCT.MPC.IOCHAN.CHAN
      1573**DCL      1752>>ASSIGN
DCT.MPC.IOCHAN.IOM
      1573**DCL      1751>>ASSIGN
DCT.MPC.IOCHANX
      1573**DCL      1573--REDEF    1750>>IF
DCT.SQH$
      1560**DCL      1724>>ASSIGN
DCT.STATUS.DOWN
      1562**DCL      1717>>IF       1728>>IF       1732>>IF
DCT$
      1694**DCL      1545--IMP-PTR  1714<<ASSIGN   1715<>CALL     1716>>IF       1717>>IF       1719>>ASSIGN
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:41   
      1721>>ASSIGN   1723>>ASSIGN   1724>>ASSIGN   1726<<ASSIGN   1727<>CALL     1728>>IF       1730<<ASSIGN
      1731<>CALL     1732>>IF       1734>>ASSIGN   1735>>ASSIGN   1737>>DOSELCT  1750>>IF       1751>>ASSIGN
      1752>>ASSIGN
DCT$$
      1696**DCL      1708<<ASSIGN   1709<>CALL     1714>>ASSIGN
DVT.MODEL
      1585**DCL      1721>>ASSIGN
DVT.MPC
      1587**DCL      1588--REDEF
DVT.TYPE
      1585**DCL      1722>>IF
DVT$
      1529**DCL         9--PROC     1585--IMP-PTR  1719<<ASSIGN   1720<>CALL     1721>>ASSIGN   1722>>IF
DVT$$
      1697**DCL      1710<<ASSIGN   1711<>CALL
DVTSS3
      1657**DCL      1706<>CALL
DVTSS3.V
      1657**DCL      1657--DCLINIT
FPT_MONINFO
      1672**DCL      1707<>CALL
I
      1698**DCL      1712<<ASSIGN   1714>>ASSIGN   1718>>ASSIGN   1749<<DOINDEX  1750>>IF       1751>>ASSIGN
      1752>>ASSIGN   1760<<ASSIGN   1760>>ASSIGN
M$MONINFO
       629**DCL-ENT  1707--CALL
M$SAD
       600**DCL-ENT  1704--CALL     1705--CALL     1706--CALL
MONIS1
      1627**DCL      1704<>CALL
MONIS1.V
      1627**DCL      1627--DCLINIT
MPC_DVT.MODEL
      1605**DCL      1737>>DOSELCT
MPC_DVT.MPC
      1607**DCL      1608--REDEF
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:42   
MPC_DVT$
      1700**DCL      1605--IMP-PTR  1735<<ASSIGN   1736<>CALL     1737>>DOSELCT
P$
      1611**DCL      1714>>ASSIGN
P$ IN PROCEDURE CONVPTR
      1771**DCL      1767--PROC
P$.SEGID IN PROCEDURE CONVPTR
      1773**DCL      1775>>IF       1775<<ASSIGN   1776>>IF       1776<<ASSIGN   1777>>IF       1777<<ASSIGN
SQH.DOOR
      1600**DCL      1600--REDEF
SQH.MPC$
      1602**DCL      1726>>ASSIGN   1730>>ASSIGN
SQH$
      1695**DCL      1600--IMP-PTR  1724<<ASSIGN   1725<>CALL     1726>>ASSIGN   1730>>ASSIGN
TIGRS2
      1642**DCL      1705<>CALL
TIGRS2.V
      1642**DCL      1642--DCLINIT
VIP
      1466**DCL         9--PROC
VIP.CTRACK
      1482**DCL      1483--REDEF
VIP.DCTX
      1487**DCL      1718<<ASSIGN
VIP.DEVID
      1472**DCL      1716>>IF
VIP.DVN
      1512**DCL      1723<<ASSIGN
VIP.IOCHAN.CHAN
      1511**DCL      1752<<ASSIGN
VIP.IOCHAN.IOM
      1510**DCL      1751<<ASSIGN
VIP.MODEL
      1473**DCL      1721<<ASSIGN
VIP.MPC_DCTX
      1513**DCL      1734<<ASSIGN
PL6.E3A0      #002=IVO$FINDDVT File=IVO$ONLINE.:E05TSI                           TUE 07/29/97 23:12 Page:43   
VIP.MPC_TYPE
      1514**DCL      1739<<ASSIGN   1743<<ASSIGN   1745<<ASSIGN   1747<<ASSIGN
VIP.RANGE.FTRACK
      1520**DCL      1521--REDEF
VIP.RANGE.LTRACK
      1524**DCL      1525--REDEF
VLR_MONPTRS
      1687**DCL      1673--DCLINIT
VLR_MONPTRS.N$DCT$$
      1687**DCL      1708>>ASSIGN
VLR_MONPTRS.NI$DVT$$
      1687**DCL      1710>>ASSIGN

PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:44   
      170        1        /*T***********************************************************/
      171        2        /*T*                                                         */
      172        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      173        4        /*T*                                                         */
      174        5        /*T***********************************************************/
      175        6        /**/
      176        7        /* GET AND FREE DYNAMIC DATA SPACE */
      177        8        /**/
      178        9        IVO$GET: PROC(D$,NWP) ALTRET;
      179       10        /**/
      180       11        /* PARAMETERS */
      181       12        /**/
      182       13    1   DCL D$ PTR;
      183       14    1   DCL NWP SBIN;
      184       15    1   DCL NW SBIN;
      185       16        /**/
      186       17        /* INCLUDE FILES */
      187       18        /**/
      188       19        %INCLUDE B_SEGIDS_C;
      189      558        %INCLUDE CP_6;
      190      639        /**/
      191      640        /* DATA STRUCTURES */
      192      641        /**/
      193      642    1   DCL 1 F BASED(F$) DALIGNED,             /* FREE SPACE PACKET */
      194      643    1         2 FREE BIT(1),
      195      644    1         2 NW UBIN(17) UNAL,
      196      645    1         2 PFREE BIT(1),
      197      646    1         2 PNW UBIN(17) UNAL,
      198      647    1         2 FL$ PTR;
      199      648    1   DCL FW SBIN BASED(F$);
      200      649        /**/
      201      650        /* STATIC DATA */
      202      651        /**/
      203      652    1   DCL 1 FREE STATIC DALIGNED,             /* FREE SPACE HEAD */
      204      653    1         2 * SBIN,
      205      654    1         2 FL$ PTR INIT(ADDR(FREE));
      206      655        %FPT_GDS(FPTN=GDS,RESULTS=GDS_VEC,FREE=YES);
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:45   
      207      671    1   DCL 1 GDS_VEC STATIC DALIGNED,          /* GDS RESULTS VECTOR */
      208      672    1         2 BD UBIN(18) INIT(0),
      209      673    1         2 P ALIGNED,
      210      674    1           3 * BIT(24),
      211      675    1           3 SEGID BIT(12) INIT(%DS8SID),
      212      676    1         2 P$ REDEF P PTR;
      213      677        /**/
      214      678        /* AUTO STACK */
      215      679        /**/
      216      680    1   DCL C$ PTR;
      217      681    1   DCL F$ PTR;
      218      682    1   DCL I SBIN;
      219      683    1   DCL N SBIN;
      220      684    1   DCL P$ PTR;
      221      685        /**/
      222      686        /* GET NW WORDS OF DYNAMIC SPACE */
      223      687        /* RETURN POINTER IN D$ */
      224      688        /**/
      225      689    1           NW=NWP+MOD(NWP,2);
      226      690    1           N=NW+2;
      227      691    1           CALL FIND(N) ALTRET(FOUND);
      228      692    2           IF GDS_VEC.BD=0 THEN DO;
      229      693    2              F$=ADDR(NIL);
      230      694    2              GDS.V.SEGSIZE#=N+2;
      231      695    2              END;
      232      696    2           ELSE DO;
      233      697    2              F$=PINCRW(GDS_VEC.P$,GDS_VEC.BD-1);
      234      698    2              GDS.V.SEGSIZE#=N;
      235      699    2              END;
      236      700    1           GDS_VEC.P.SEGID=%DS8SID;
      237      701    1           CALL M$GDS(GDS) ALTRET(GDS_ERR);
      238      702    2           IF F$=ADDR(NIL) THEN DO;
      239      703    2              F$=GDS_VEC.P$;
      240      704    2              FW=0;
      241      705    2              END;
      242      706    1           F.FREE='0'B;
      243      707    1           F.NW=N;
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:46   
      244      708    1           C$=PINCRW(F$,N);
      245      709    1           C$->FW=0;
      246      710    1           C$->F.PNW=N;
      247      711    1           D$=PINCRW(F$,2);
      248      712    1           RETURN;
      249      713        /**/
      250      714    1   FOUND:
      251      715    1           CALL DELINK;
      252      716    1           D$=PINCRW(F$,2);
      253      717    1           N=F.NW-N;
      254      718    1           IF N<4 THEN RETURN;
      255      719    1           F.NW=NW+2;
      256      720    1           C$=PINCRW(F$,F.NW);
      257      721    1           C$->F.PFREE='0'B;
      258      722    1           C$->F.PNW=F.NW;
      259      723    1           GOTO RELINK;
      260      724        /**/
      261      725    1   GDS_ERR:
      262      726    1           ALTRETURN;
      263      727        /**/
      264      728        /* FREE NW WORDS AT D$ */
      265      729        /**/
      266      730    1   IVO$FREE: ENTRY (D$) ALTRET;
      267      731    1           F$=PINCRW(D$,-2);
      268      732    1           N=F.NW;
      269      733    2           DO WHILE (F.PFREE);
      270      734    2              N=N+F.PNW;
      271      735    2              F$=PINCRW(F$,-F.PNW);
      272      736    2              CALL FINDPREV;
      273      737    2              CALL DELINK;
      274      738    2              END;
      275      739    1           C$=F$;
      276      740    2   AGGLUT: DO;
      277      741    2              F$=PINCRW(C$,N);
      278      742    2              IF NOT F.FREE THEN GOTO NO_MORE;
      279      743    2              N=N+F.NW;
      280      744    2              CALL FINDPREV;
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:47   
      281      745    2              CALL DELINK;
      282      746    2              GOTO AGGLUT;
      283      747    2              END AGGLUT;
      284      748    1   NO_MORE:
      285      749    2           IF GDS_VEC.BD=POFFW(C$,GDS_VEC.P$)+N+1 THEN DO;
      286      750    3              IF C$=GDS_VEC.P$ THEN DO;
      287      751    3                 N=N+2;
      288      752    3                 FREE.FL$=ADDR(FREE);
      289      753    3                 END;
      290      754    2              ELSE
      291      755    2                 C$->F.FREE='0'B;
      292      756    2              GDS.V.SEGSIZE#=N;
      293      757    2              CALL M$FDS(GDS) ALTRET(GDS_ERR);
      294      758    2              END;
      295      759    2           ELSE DO;
      296      760    2   RELINK:
      297      761    2              CALL FIND(N);
      298      762    2              C$->F.FREE='1'B;
      299      763    2              C$->F.NW=N;
      300      764    2              C$->F.FL$=F$;
      301      765    2              P$->F.FL$=C$;
      302      766    2              F$=PINCRW(C$,N);
      303      767    2              F.PFREE='1'B;
      304      768    2              F.PNW=N;
      305      769    2              END;
      306      770    1           RETURN;
      307      771        /**/
      308      772        /* INITIALIZE FREE SPACE */
      309      773        /**/
      310      774    1   IVO$GET_INIT: ENTRY ALTRET;
      311      775    1           FREE.FL$=ADDR(FREE);
      312      776        /**/
      313      777        /* CLEAN UP FREE SPACE */
      314      778        /**/
      315      779    1   IVO$GET_CLEANUP: ENTRY ALTRET;
      316      780    2           IF GDS_VEC.BD~=0 THEN DO;
      317      781    2              GDS.V.SEGSIZE#=GDS_VEC.BD+1;
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:48   
      318      782    2              CALL M$FDS(GDS) ALTRET(GDS_ERR);
      319      783    2              END;
      320      784    1           RETURN;
      321      785        %EJECT;
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:49   
      322      786        /**/
      323      787        /* FIND FREE SPACE FOR ENTRY WITH AT LEAST SN WORDS */
      324      788        /*     RETURN IF NOT FOUND */
      325      789        /*     ALTRET IF FOUND */
      326      790        /**/
      327      791    1   FIND:   PROC (SN) ALTRET;
      328      792    2   DCL SN SBIN;
      329      793        /**/
      330      794    2           F$=FREE.FL$;
      331      795    2           P$=ADDR(FREE);
      332      796    3           DO WHILE (F$~=ADDR(FREE));
      333      797    3              IF SN<=F.NW THEN ALTRETURN;
      334      798    3              P$=F$;
      335      799    3              F$=F.FL$;
      336      800    3              END;
      337      801    2           RETURN;
      338      802    2   END FIND;
      339      803        /**/
      340      804        /* FIND PREVIOUS ENTRY IN FREE SPACE LIST, RETURN IN P$ */
      341      805        /**/
      342      806    1   FINDPREV: PROC;
      343      807    2           P$=ADDR(FREE);
      344      808    3           DO WHILE(P$->F.FL$~=F$);
      345      809    3              P$=P$->F.FL$;
      346      810    3              END;
      347      811    2   END FINDPREV;
      348      812        /**/
      349      813        /* DELINK F$->SPACE FROM FREE SPACE LIST */
      350      814        /**/
      351      815    1   DELINK: PROC;
      352      816    2           F.FREE='0'B;
      353      817    2           P$->F.FL$=F.FL$;
      354      818    2           PINCRW(F$,F.NW)->F.PFREE='0'B;
      355      819    2           RETURN;
      356      820    2   END DELINK;
      357      821    1   END IVO$GET;
      358      822        %EOD;
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:50   

PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:51   
--  Include file information  --

   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IVO$GET.

   Procedure IVO$GET requires 282 words for executable code.
   Procedure IVO$GET requires 16 words of local(AUTO) storage.

PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:52   

 Object Unit name= IVO$GET                                    File name= IVO$ONLINE.:E05TOU
 UTS= JUL 29 '97 23:13:38.40 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none    10     12  IVO$GET
    2   Proc  even  none   282    432  IVO$GET
    3  RoData even  none     2      2  IVO$GET

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes    yes     yes      Std        2  IVO$GET
     2    145          yes     yes      Std        1  IVO$FREE
     2    325          yes     yes      Std        0  IVO$GET_INIT
     2    332          yes     yes      Std        0  IVO$GET_CLEANUP

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_2
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:53   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:54   


      170        1        /*T***********************************************************/
      171        2        /*T*                                                         */
      172        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      173        4        /*T*                                                         */
      174        5        /*T***********************************************************/
      175        6        /**/
      176        7        /* GET AND FREE DYNAMIC DATA SPACE */
      177        8        /**/
      178        9        IVO$GET: PROC(D$,NWP) ALTRET;

      9  2 000000   000000 700200 xent  IVO$GET      TSX0  ! X66_AUTO_2
         2 000001   000020 000002                    ZERO    16,2

      179       10        /**/
      180       11        /* PARAMETERS */
      181       12        /**/
      182       13    1   DCL D$ PTR;
      183       14    1   DCL NWP SBIN;
      184       15    1   DCL NW SBIN;
      185       16        /**/
      186       17        /* INCLUDE FILES */
      187       18        /**/
      188       19        %INCLUDE B_SEGIDS_C;
      189      558        %INCLUDE CP_6;
      190      639        /**/
      191      640        /* DATA STRUCTURES */
      192      641        /**/
      193      642    1   DCL 1 F BASED(F$) DALIGNED,             /* FREE SPACE PACKET */
      194      643    1         2 FREE BIT(1),
      195      644    1         2 NW UBIN(17) UNAL,
      196      645    1         2 PFREE BIT(1),
      197      646    1         2 PNW UBIN(17) UNAL,
      198      647    1         2 FL$ PTR;
      199      648    1   DCL FW SBIN BASED(F$);
      200      649        /**/
      201      650        /* STATIC DATA */
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:55   
      202      651        /**/
      203      652    1   DCL 1 FREE STATIC DALIGNED,             /* FREE SPACE HEAD */
      204      653    1         2 * SBIN,
      205      654    1         2 FL$ PTR INIT(ADDR(FREE));
      206      655        %FPT_GDS(FPTN=GDS,RESULTS=GDS_VEC,FREE=YES);
      207      671    1   DCL 1 GDS_VEC STATIC DALIGNED,          /* GDS RESULTS VECTOR */
      208      672    1         2 BD UBIN(18) INIT(0),
      209      673    1         2 P ALIGNED,
      210      674    1           3 * BIT(24),
      211      675    1           3 SEGID BIT(12) INIT(%DS8SID),
      212      676    1         2 P$ REDEF P PTR;
      213      677        /**/
      214      678        /* AUTO STACK */
      215      679        /**/
      216      680    1   DCL C$ PTR;
      217      681    1   DCL F$ PTR;
      218      682    1   DCL I SBIN;
      219      683    1   DCL N SBIN;
      220      684    1   DCL P$ PTR;
      221      685        /**/
      222      686        /* GET NW WORDS OF DYNAMIC SPACE */
      223      687        /* RETURN POINTER IN D$ */
      224      688        /**/
      225      689    1           NW=NWP+MOD(NWP,2);

    689  2 000002   200004 470500                    LDP0    @NWP,,AUTO
         2 000003   000000 236100                    LDQ     0,,PR0
         2 000004   000002 506007                    DIV     2,DL
         2 000005   000044 733000                    LRS     36
         2 000006   000000 036100                    ADLQ    0,,PR0
         2 000007   200005 756100                    STQ     NW,,AUTO

      226      690    1           N=NW+2;

    690  2 000010   000002 036007                    ADLQ    2,DL
         2 000011   200011 756100                    STQ     N,,AUTO

PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:56   
      227      691    1           CALL FIND(N) ALTRET(FOUND);

    691  2 000012   200011 631500                    EPPR1   N,,AUTO
         2 000013   200015 451500                    STP1    P$+3,,AUTO
         2 000014   000345 701000 2                  TSX1    FIND
         2 000015   000101 702000 2                  TSX2    FOUND

      228      692    2           IF GDS_VEC.BD=0 THEN DO;

    692  2 000016   000010 220000 1                  LDX0    GDS_VEC
         2 000017   000026 601000 2                  TNZ     s:697

      229      693    2              F$=ADDR(NIL);

    693  2 000020   000001 236000 xsym               LDQ     B_VECTNIL+1
         2 000021   200007 756100                    STQ     F$,,AUTO

      230      694    2              GDS.V.SEGSIZE#=N+2;

    694  2 000022   200011 721100                    LXL1    N,,AUTO
         2 000023   000002 622011                    EAX2    2,X1
         2 000024   000006 442000 1                  SXL2    GDS+4

      231      695    2              END;

    695  2 000025   000035 710000 2                  TRA     s:700

      232      696    2           ELSE DO;

      233      697    2              F$=PINCRW(GDS_VEC.P$,GDS_VEC.BD-1);

    697  2 000026   000010 236000 1                  LDQ     GDS_VEC
         2 000027   777777 376003                    ANQ     -1,DU
         2 000030   000001 136003                    SBLQ    1,DU
         2 000031   000011 036000 1                  ADLQ    GDS_VEC+1
         2 000032   200007 756100                    STQ     F$,,AUTO

PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:57   
      234      698    2              GDS.V.SEGSIZE#=N;

    698  2 000033   200011 721100                    LXL1    N,,AUTO
         2 000034   000006 441000 1                  SXL1    GDS+4

      235      699    2              END;

      236      700    1           GDS_VEC.P.SEGID=%DS8SID;

    700  2 000035   006013 236007                    LDQ     3083,DL
         2 000036   000011 752003 1                  STCQ    GDS_VEC+1,'03'O

      237      701    1           CALL M$GDS(GDS) ALTRET(GDS_ERR);

    701  2 000037   000002 630400 1                  EPPR0   GDS
         2 000040   430001 713400                    CLIMB   alt,gds
         2 000041   400400 401760                    pmme    nvectors=2
         2 000042   000144 702000 2                  TSX2    GDS_ERR

      238      702    2           IF F$=ADDR(NIL) THEN DO;

    702  2 000043   200007 236100                    LDQ     F$,,AUTO
         2 000044   000001 116000 xsym               CMPQ    B_VECTNIL+1
         2 000045   000052 601000 2                  TNZ     s:706

      239      703    2              F$=GDS_VEC.P$;

    703  2 000046   000011 236000 1                  LDQ     GDS_VEC+1
         2 000047   200007 756100                    STQ     F$,,AUTO

      240      704    2              FW=0;

    704  2 000050   200007 470500                    LDP0    F$,,AUTO
         2 000051   000000 450100                    STZ     0,,PR0

      241      705    2              END;

PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:58   
      242      706    1           F.FREE='0'B;

    706  2 000052   200007 470500                    LDP0    F$,,AUTO
         2 000053   000031 236000 xsym               LDQ     B_VECTNIL+25
         2 000054   000000 356100                    ANSQ    0,,PR0

      243      707    1           F.NW=N;

    707  2 000055   200011 236100                    LDQ     N,,AUTO
         2 000056   000022 736000                    QLS     18
         2 000057   000000 676100                    ERQ     0,,PR0
         2 000060   377777 376003                    ANQ     131071,DU
         2 000061   000000 656100                    ERSQ    0,,PR0

      244      708    1           C$=PINCRW(F$,N);

    708  2 000062   200011 236100                    LDQ     N,,AUTO
         2 000063   000022 736000                    QLS     18
         2 000064   200007 036100                    ADLQ    F$,,AUTO
         2 000065   200006 756100                    STQ     C$,,AUTO

      245      709    1           C$->FW=0;

    709  2 000066   200006 471500                    LDP1    C$,,AUTO
         2 000067   100000 450100                    STZ     0,,PR1

      246      710    1           C$->F.PNW=N;

    710  2 000070   200011 236100                    LDQ     N,,AUTO
         2 000071   100000 676100                    ERQ     0,,PR1
         2 000072   377777 376007                    ANQ     131071,DL
         2 000073   100000 656100                    ERSQ    0,,PR1

      247      711    1           D$=PINCRW(F$,2);

    711  2 000074   200007 236100                    LDQ     F$,,AUTO
         2 000075   000002 036003                    ADLQ    2,DU
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:59   
         2 000076   200003 473500                    LDP3    @D$,,AUTO
         2 000077   300000 756100                    STQ     0,,PR3

      248      712    1           RETURN;

    712  2 000100   000000 702200 xent               TSX2  ! X66_ARET

      249      713        /**/
      250      714    1   FOUND:
      251      715    1           CALL DELINK;

    715  2 000101   000415 701000 2     FOUND        TSX1    DELINK
         2 000102   000000 011000                    NOP     0

      252      716    1           D$=PINCRW(F$,2);

    716  2 000103   200007 236100                    LDQ     F$,,AUTO
         2 000104   000002 036003                    ADLQ    2,DU
         2 000105   200003 470500                    LDP0    @D$,,AUTO
         2 000106   000000 756100                    STQ     0,,PR0

      253      717    1           N=F.NW-N;

    717  2 000107   200007 471500                    LDP1    F$,,AUTO
         2 000110   100000 236100                    LDQ     0,,PR1
         2 000111   000022 772000                    QRL     18
         2 000112   377777 376007                    ANQ     131071,DL
         2 000113   200011 136100                    SBLQ    N,,AUTO
         2 000114   200011 756100                    STQ     N,,AUTO

      254      718    1           IF N<4 THEN RETURN;

    718  2 000115   000004 116007                    CMPQ    4,DL
         2 000116   000120 605000 2                  TPL     s:719

    718  2 000117   000000 702200 xent               TSX2  ! X66_ARET

PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:60   
      255      719    1           F.NW=NW+2;

    719  2 000120   200005 236100                    LDQ     NW,,AUTO
         2 000121   000002 036007                    ADLQ    2,DL
         2 000122   000022 736000                    QLS     18
         2 000123   100000 676100                    ERQ     0,,PR1
         2 000124   377777 376003                    ANQ     131071,DU
         2 000125   100000 656100                    ERSQ    0,,PR1

      256      720    1           C$=PINCRW(F$,F.NW);

    720  2 000126   100000 220100                    LDX0    0,,PR1
         2 000127   377777 360003                    ANX0    131071,DU
         2 000130   000000 636010                    EAQ     0,X0
         2 000131   200007 036100                    ADLQ    F$,,AUTO
         2 000132   200006 756100                    STQ     C$,,AUTO

      257      721    1           C$->F.PFREE='0'B;

    721  2 000133   200006 473500                    LDP3    C$,,AUTO
         2 000134   000000 236000 3                  LDQ     0
         2 000135   300000 356100                    ANSQ    0,,PR3

      258      722    1           C$->F.PNW=F.NW;

    722  2 000136   100000 236100                    LDQ     0,,PR1
         2 000137   000022 772000                    QRL     18
         2 000140   300000 676100                    ERQ     0,,PR3
         2 000141   377777 376007                    ANQ     131071,DL
         2 000142   300000 656100                    ERSQ    0,,PR3

      259      723    1           GOTO RELINK;

    723  2 000143   000270 710000 2                  TRA     RELINK

      260      724        /**/
      261      725    1   GDS_ERR:
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:61   
      262      726    1           ALTRETURN;

    726  2 000144   000000 702200 xent  GDS_ERR      TSX2  ! X66_AALT

      263      727        /**/
      264      728        /* FREE NW WORDS AT D$ */
      265      729        /**/
      266      730    1   IVO$FREE: ENTRY (D$) ALTRET;

    730  2 000145   000000 700200 xent  IVO$FREE     TSX0  ! X66_AUTO_2
         2 000146   000020 000002                    ZERO    16,2

      267      731    1           F$=PINCRW(D$,-2);

    731  2 000147   200003 470500                    LDP0    @D$,,AUTO
         2 000150   000000 236100                    LDQ     0,,PR0
         2 000151   777776 036003                    ADLQ    -2,DU
         2 000152   200007 756100                    STQ     F$,,AUTO

      268      732    1           N=F.NW;

    732  2 000153   200007 471500                    LDP1    F$,,AUTO
         2 000154   100000 236100                    LDQ     0,,PR1
         2 000155   000022 772000                    QRL     18
         2 000156   377777 376007                    ANQ     131071,DL
         2 000157   200011 756100                    STQ     N,,AUTO

      269      733    2           DO WHILE (F.PFREE);

    733  2 000160   100000 236100                    LDQ     0,,PR1
         2 000161   400000 316007                    CANQ    -131072,DL
         2 000162   000206 600000 2                  TZE     s:739

      270      734    2              N=N+F.PNW;

    734  2 000163   200007 470500                    LDP0    F$,,AUTO
         2 000164   000000 236100                    LDQ     0,,PR0
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:62   
         2 000165   377777 376007                    ANQ     131071,DL
         2 000166   200011 036100                    ADLQ    N,,AUTO
         2 000167   200011 756100                    STQ     N,,AUTO

      271      735    2              F$=PINCRW(F$,-F.PNW);

    735  2 000170   000000 720100                    LXL0    0,,PR0
         2 000171   377777 360003                    ANX0    131071,DU
         2 000172   777777 636010                    EAQ     -1,X0
         2 000173   777777 676003                    ERQ     -1,DU
         2 000174   200007 036100                    ADLQ    F$,,AUTO
         2 000175   200007 756100                    STQ     F$,,AUTO

      272      736    2              CALL FINDPREV;

    736  2 000176   000375 701000 2                  TSX1    FINDPREV
         2 000177   000000 011000                    NOP     0

      273      737    2              CALL DELINK;

    737  2 000200   000415 701000 2                  TSX1    DELINK
         2 000201   000000 011000                    NOP     0

      274      738    2              END;

    738  2 000202   200007 470500                    LDP0    F$,,AUTO
         2 000203   000000 236100                    LDQ     0,,PR0
         2 000204   400000 316007                    CANQ    -131072,DL
         2 000205   000163 601000 2                  TNZ     s:734

      275      739    1           C$=F$;

    739  2 000206   200007 236100                    LDQ     F$,,AUTO
         2 000207   200006 756100                    STQ     C$,,AUTO

      276      740    2   AGGLUT: DO;

PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:63   
    740  2 000210                       AGGLUT       null
      277      741    2              F$=PINCRW(C$,N);

    741  2 000210   200011 236100                    LDQ     N,,AUTO
         2 000211   000022 736000                    QLS     18
         2 000212   200006 036100                    ADLQ    C$,,AUTO
         2 000213   200007 756100                    STQ     F$,,AUTO

      278      742    2              IF NOT F.FREE THEN GOTO NO_MORE;

    742  2 000214   200007 470500                    LDP0    F$,,AUTO
         2 000215   000000 234100                    SZN     0,,PR0
         2 000216   000231 605000 2                  TPL     NO_MORE

      279      743    2              N=N+F.NW;

    743  2 000217   000000 236100                    LDQ     0,,PR0
         2 000220   000022 772000                    QRL     18
         2 000221   377777 376007                    ANQ     131071,DL
         2 000222   200011 036100                    ADLQ    N,,AUTO
         2 000223   200011 756100                    STQ     N,,AUTO

      280      744    2              CALL FINDPREV;

    744  2 000224   000375 701000 2                  TSX1    FINDPREV
         2 000225   000000 011000                    NOP     0

      281      745    2              CALL DELINK;

    745  2 000226   000415 701000 2                  TSX1    DELINK
         2 000227   000000 011000                    NOP     0

      282      746    2              GOTO AGGLUT;

    746  2 000230   000210 710000 2                  TRA     AGGLUT

      283      747    2              END AGGLUT;
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:64   
      284      748    1   NO_MORE:
      285      749    2           IF GDS_VEC.BD=POFFW(C$,GDS_VEC.P$)+N+1 THEN DO;

    749  2 000231   000011 235000 1     NO_MORE      LDA     GDS_VEC+1
         2 000232   000022 771000                    ARL     18
         2 000233   200016 755100                    STA     @SN+1,,AUTO
         2 000234   200006 236100                    LDQ     C$,,AUTO
         2 000235   000022 772000                    QRL     18
         2 000236   200016 136100                    SBLQ    @SN+1,,AUTO
         2 000237   200011 036100                    ADLQ    N,,AUTO
         2 000240   000001 036007                    ADLQ    1,DL
         2 000241   200017 756100                    STQ     @SN+2,,AUTO
         2 000242   000010 236000 1                  LDQ     GDS_VEC
         2 000243   000022 772000                    QRL     18
         2 000244   200017 116100                    CMPQ    @SN+2,,AUTO
         2 000245   000270 601000 2                  TNZ     RELINK

      286      750    3              IF C$=GDS_VEC.P$ THEN DO;

    750  2 000246   200006 236100                    LDQ     C$,,AUTO
         2 000247   000011 116000 1                  CMPQ    GDS_VEC+1
         2 000250   000256 601000 2                  TNZ     s:755

      287      751    3                 N=N+2;

    751  2 000251   000002 236007                    LDQ     2,DL
         2 000252   200011 056100                    ASQ     N,,AUTO

      288      752    3                 FREE.FL$=ADDR(FREE);

    752  2 000253   000001 236000 3                  LDQ     1
         2 000254   000001 756000 1                  STQ     FREE+1

      289      753    3                 END;

    753  2 000255   000261 710000 2                  TRA     s:756

PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:65   
      290      754    2              ELSE
      291      755    2                 C$->F.FREE='0'B;

    755  2 000256   200006 471500                    LDP1    C$,,AUTO
         2 000257   000031 236000 xsym               LDQ     B_VECTNIL+25
         2 000260   100000 356100                    ANSQ    0,,PR1

      292      756    2              GDS.V.SEGSIZE#=N;

    756  2 000261   200011 720100                    LXL0    N,,AUTO
         2 000262   000006 440000 1                  SXL0    GDS+4

      293      757    2              CALL M$FDS(GDS) ALTRET(GDS_ERR);

    757  2 000263   000002 630400 1                  EPPR0   GDS
         2 000264   430002 713400                    CLIMB   alt,fds
         2 000265   400400 401760                    pmme    nvectors=2
         2 000266   000144 702000 2                  TSX2    GDS_ERR

      294      758    2              END;

    758  2 000267   000324 710000 2                  TRA     s:770

      295      759    2           ELSE DO;

      296      760    2   RELINK:
      297      761    2              CALL FIND(N);

    761  2 000270   200011 630500       RELINK       EPPR0   N,,AUTO
         2 000271   200015 450500                    STP0    P$+3,,AUTO
         2 000272   000345 701000 2                  TSX1    FIND
         2 000273   000000 011000                    NOP     0

      298      762    2              C$->F.FREE='1'B;

    762  2 000274   200006 470500                    LDP0    C$,,AUTO
         2 000275   400000 236003                    LDQ     -131072,DU
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:66   
         2 000276   000000 256100                    ORSQ    0,,PR0

      299      763    2              C$->F.NW=N;

    763  2 000277   200011 236100                    LDQ     N,,AUTO
         2 000300   000022 736000                    QLS     18
         2 000301   000000 676100                    ERQ     0,,PR0
         2 000302   377777 376003                    ANQ     131071,DU
         2 000303   000000 656100                    ERSQ    0,,PR0

      300      764    2              C$->F.FL$=F$;

    764  2 000304   200007 236100                    LDQ     F$,,AUTO
         2 000305   000001 756100                    STQ     1,,PR0

      301      765    2              P$->F.FL$=C$;

    765  2 000306   200006 236100                    LDQ     C$,,AUTO
         2 000307   200012 471500                    LDP1    P$,,AUTO
         2 000310   100001 756100                    STQ     1,,PR1

      302      766    2              F$=PINCRW(C$,N);

    766  2 000311   200011 236100                    LDQ     N,,AUTO
         2 000312   000022 736000                    QLS     18
         2 000313   200006 036100                    ADLQ    C$,,AUTO
         2 000314   200007 756100                    STQ     F$,,AUTO

      303      767    2              F.PFREE='1'B;

    767  2 000315   200007 473500                    LDP3    F$,,AUTO
         2 000316   400000 236007                    LDQ     -131072,DL
         2 000317   300000 256100                    ORSQ    0,,PR3

      304      768    2              F.PNW=N;

    768  2 000320   200011 236100                    LDQ     N,,AUTO
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:67   
         2 000321   300000 676100                    ERQ     0,,PR3
         2 000322   377777 376007                    ANQ     131071,DL
         2 000323   300000 656100                    ERSQ    0,,PR3

      305      769    2              END;

      306      770    1           RETURN;

    770  2 000324   000000 702200 xent               TSX2  ! X66_ARET

      307      771        /**/
      308      772        /* INITIALIZE FREE SPACE */
      309      773        /**/
      310      774    1   IVO$GET_INIT: ENTRY ALTRET;

    774  2 000325   000000 700200 xent  IVO$GET_INIT TSX0  ! X66_AUTO_2
         2 000326   000020 000002                    ZERO    16,2

      311      775    1           FREE.FL$=ADDR(FREE);

    775  2 000327   000001 236000 3                  LDQ     1
         2 000330   000001 756000 1                  STQ     FREE+1
         2 000331   000334 710000 2                  TRA     s:780

      312      776        /**/
      313      777        /* CLEAN UP FREE SPACE */
      314      778        /**/
      315      779    1   IVO$GET_CLEANUP: ENTRY ALTRET;

    779  2 000332   000000 700200 xent  IVO$GET_CLE* TSX0  ! X66_AUTO_2
         2 000333   000020 000002                    ZERO    16,2

      316      780    2           IF GDS_VEC.BD~=0 THEN DO;

    780  2 000334   000010 220000 1                  LDX0    GDS_VEC
         2 000335   000344 600000 2                  TZE     s:784

PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:68   
      317      781    2              GDS.V.SEGSIZE#=GDS_VEC.BD+1;

    781  2 000336   000001 621010                    EAX1    1,X0
         2 000337   000006 441000 1                  SXL1    GDS+4

      318      782    2              CALL M$FDS(GDS) ALTRET(GDS_ERR);

    782  2 000340   000002 630400 1                  EPPR0   GDS
         2 000341   430002 713400                    CLIMB   alt,fds
         2 000342   400400 401760                    pmme    nvectors=2
         2 000343   000144 702000 2                  TSX2    GDS_ERR

      319      783    2              END;

      320      784    1           RETURN;

    784  2 000344   000000 702200 xent               TSX2  ! X66_ARET

      321      785        %EJECT;
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:69   
      322      786        /**/
      323      787        /* FIND FREE SPACE FOR ENTRY WITH AT LEAST SN WORDS */
      324      788        /*     RETURN IF NOT FOUND */
      325      789        /*     ALTRET IF FOUND */
      326      790        /**/
      327      791    1   FIND:   PROC (SN) ALTRET;

    791  2 000345   200014 741300       FIND         STX1  ! P$+2,,AUTO

      328      792    2   DCL SN SBIN;
      329      793        /**/
      330      794    2           F$=FREE.FL$;

    794  2 000346   000001 236000 1                  LDQ     FREE+1
         2 000347   200007 756100                    STQ     F$,,AUTO

      331      795    2           P$=ADDR(FREE);

    795  2 000350   000001 236000 3                  LDQ     1
         2 000351   200012 756100                    STQ     P$,,AUTO

      332      796    3           DO WHILE (F$~=ADDR(FREE));

    796  2 000352   000370 710000 2                  TRA     s:800

      333      797    3              IF SN<=F.NW THEN ALTRETURN;

    797  2 000353   200015 470500                    LDP0    @SN,,AUTO
         2 000354   200007 471500                    LDP1    F$,,AUTO
         2 000355   100000 236100                    LDQ     0,,PR1
         2 000356   000022 772000                    QRL     18
         2 000357   377777 376007                    ANQ     131071,DL
         2 000360   000000 116100                    CMPQ    0,,PR0
         2 000361   000364 604000 2                  TMI     s:798

    797  2 000362   200014 221300                    LDX1  ! P$+2,,AUTO
         2 000363   000000 702211                    TSX2  ! 0,X1
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:70   

      334      798    3              P$=F$;

    798  2 000364   200007 236100                    LDQ     F$,,AUTO
         2 000365   200012 756100                    STQ     P$,,AUTO

      335      799    3              F$=F.FL$;

    799  2 000366   100001 236100                    LDQ     1,,PR1
         2 000367   200007 756100                    STQ     F$,,AUTO

      336      800    3              END;

    800  2 000370   000001 236000 3                  LDQ     1
         2 000371   200007 116100                    CMPQ    F$,,AUTO
         2 000372   000353 601000 2                  TNZ     s:797

      337      801    2           RETURN;

    801  2 000373   200014 221300                    LDX1  ! P$+2,,AUTO
         2 000374   000001 702211                    TSX2  ! 1,X1

      338      802    2   END FIND;
      339      803        /**/
      340      804        /* FIND PREVIOUS ENTRY IN FREE SPACE LIST, RETURN IN P$ */
      341      805        /**/
      342      806    1   FINDPREV: PROC;

    806  2 000375   200014 741300       FINDPREV     STX1  ! P$+2,,AUTO

      343      807    2           P$=ADDR(FREE);

    807  2 000376   000001 236000 3                  LDQ     1
         2 000377   200012 756100                    STQ     P$,,AUTO

      344      808    3           DO WHILE(P$->F.FL$~=F$);

PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:71   
    808  2 000400   200012 470500                    LDP0    P$,,AUTO
         2 000401   000001 236100                    LDQ     1,,PR0
         2 000402   200007 116100                    CMPQ    F$,,AUTO
         2 000403   000413 600000 2                  TZE     s:811

      345      809    3              P$=P$->F.FL$;

    809  2 000404   200012 470500                    LDP0    P$,,AUTO
         2 000405   000001 236100                    LDQ     1,,PR0
         2 000406   200012 756100                    STQ     P$,,AUTO

      346      810    3              END;

    810  2 000407   200012 470500                    LDP0    P$,,AUTO
         2 000410   000001 236100                    LDQ     1,,PR0
         2 000411   200007 116100                    CMPQ    F$,,AUTO
         2 000412   000404 601000 2                  TNZ     s:809

      347      811    2   END FINDPREV;

    811  2 000413   200014 221300                    LDX1  ! P$+2,,AUTO
         2 000414   000001 702211                    TSX2  ! 1,X1

      348      812        /**/
      349      813        /* DELINK F$->SPACE FROM FREE SPACE LIST */
      350      814        /**/
      351      815    1   DELINK: PROC;

    815  2 000415   200014 741300       DELINK       STX1  ! P$+2,,AUTO

      352      816    2           F.FREE='0'B;

    816  2 000416   200007 470500                    LDP0    F$,,AUTO
         2 000417   000031 236000 xsym               LDQ     B_VECTNIL+25
         2 000420   000000 356100                    ANSQ    0,,PR0

      353      817    2           P$->F.FL$=F.FL$;
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:72   

    817  2 000421   000001 236100                    LDQ     1,,PR0
         2 000422   200012 471500                    LDP1    P$,,AUTO
         2 000423   100001 756100                    STQ     1,,PR1

      354      818    2           PINCRW(F$,F.NW)->F.PFREE='0'B;

    818  2 000424   000000 220100                    LDX0    0,,PR0
         2 000425   377777 360003                    ANX0    131071,DU
         2 000426   000000 236000 3                  LDQ     0
         2 000427   000000 356110                    ANSQ    0,X0,PR0

      355      819    2           RETURN;

    819  2 000430   200014 221300                    LDX1  ! P$+2,,AUTO
         2 000431   000001 702211                    TSX2  ! 1,X1
      356      820    2   END DELINK;
      357      821    1   END IVO$GET;
      358      822        %EOD;

PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:73   
--  Include file information  --

   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IVO$GET.
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:74   

 **** Variables and constants ****

  ****  Section 001  Data  IVO$GET

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(72)    r     1 FREE                       2-0-0/d STRC(216)   r     1 GDS
    10-0-0/d STRC(72)    r     1 GDS_VEC

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @D$                        4-0-0/w PTR         r     1 @NWP
    15-0-0/w PTR         r     1 @SN                        6-0-0/w PTR         r     1 C$
    *0-0-0/w PTR         r     1 D$                         7-0-0/w PTR         r     1 F$
    11-0-0/w SBIN        r     1 N                          5-0-0/w SBIN        r     1 NW
    *0-0-0/w SBIN        r     1 NWP                       12-0-0/w PTR         r     1 P$
    *0-0-0/w SBIN        r     1 SN

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(72)    r     1 F                          0-0-0/w SBIN        r     1 FW


   Procedure IVO$GET requires 282 words for executable code.
   Procedure IVO$GET requires 16 words of local(AUTO) storage.
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:75   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:76   
          MINI XREF LISTING

AGGLUT
       740**LABEL     746--GOTO
C$
       680**DCL       708<<ASSIGN    709>>ASSIGN    710>>ASSIGN    720<<ASSIGN    721>>ASSIGN    722>>ASSIGN
       739<<ASSIGN    741>>ASSIGN    749>>IF        750>>IF        755>>ASSIGN    762>>ASSIGN    763>>ASSIGN
       764>>ASSIGN    765>>ASSIGN    766>>ASSIGN
D$
        13**DCL         9--PROC      711<<ASSIGN    716<<ASSIGN    730--ENTRY     731>>ASSIGN
DELINK
       815**PROC      715--CALL      737--CALL      745--CALL
F.FL$
       647**DCL       764<<ASSIGN    765<<ASSIGN    799>>ASSIGN    808>>DOWHILE   809>>ASSIGN    817<<ASSIGN
       817>>ASSIGN
F.FREE
       643**DCL       706<<ASSIGN    742>>IF        755<<ASSIGN    762<<ASSIGN    816<<ASSIGN
F.NW
       644**DCL       707<<ASSIGN    717>>ASSIGN    719<<ASSIGN    720>>ASSIGN    722>>ASSIGN    732>>ASSIGN
       743>>ASSIGN    763<<ASSIGN    797>>IF        818>>ASSIGN
F.PFREE
       645**DCL       721<<ASSIGN    733>>DOWHILE   767<<ASSIGN    818<<ASSIGN
F.PNW
       646**DCL       710<<ASSIGN    722<<ASSIGN    734>>ASSIGN    735>>ASSIGN    768<<ASSIGN
F$
       681**DCL       642--IMP-PTR   648--IMP-PTR   693<<ASSIGN    697<<ASSIGN    702>>IF        703<<ASSIGN
       704>>ASSIGN    706>>ASSIGN    707>>ASSIGN    708>>ASSIGN    711>>ASSIGN    716>>ASSIGN    717>>ASSIGN
       719>>ASSIGN    720>>ASSIGN    720>>ASSIGN    722>>ASSIGN    731<<ASSIGN    732>>ASSIGN    733>>DOWHILE
       734>>ASSIGN    735<<ASSIGN    735>>ASSIGN    735>>ASSIGN    739>>ASSIGN    741<<ASSIGN    742>>IF
       743>>ASSIGN    764>>ASSIGN    766<<ASSIGN    767>>ASSIGN    768>>ASSIGN    794<<ASSIGN    796>>DOWHILE
       797>>IF        798>>ASSIGN    799<<ASSIGN    799>>ASSIGN    808>>DOWHILE   816>>ASSIGN    817>>ASSIGN
       818>>ASSIGN    818>>ASSIGN
FIND
       791**PROC      691--CALL      761--CALL
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:77   
FINDPREV
       806**PROC      736--CALL      744--CALL
FOUND
       715**LABEL     691--CALLALT
FREE
       652**DCL       654--DCLINIT   752--ASSIGN    775--ASSIGN    795--ASSIGN    796--DOWHILE   807--ASSIGN
FREE.FL$
       654**DCL       752<<ASSIGN    775<<ASSIGN    794>>ASSIGN
FW
       648**DCL       704<<ASSIGN    709<<ASSIGN
GDS
       666**DCL       701<>CALL      757<>CALL      782<>CALL
GDS.V
       666**DCL       666--DCLINIT
GDS.V.SEGSIZE#
       669**DCL       694<<ASSIGN    698<<ASSIGN    756<<ASSIGN    781<<ASSIGN
GDS_ERR
       726**LABEL     701--CALLALT   757--CALLALT   782--CALLALT
GDS_VEC
       671**DCL       666--DCLINIT
GDS_VEC.BD
       672**DCL       692>>IF        697>>ASSIGN    749>>IF        780>>IF        781>>ASSIGN
GDS_VEC.P
       673**DCL       676--REDEF
GDS_VEC.P.SEGID
       675**DCL       700<<ASSIGN
GDS_VEC.P$
       676**DCL       697>>ASSIGN    703>>ASSIGN    749>>IF        750>>IF
M$FDS
       602**DCL-ENT   757--CALL      782--CALL
M$GDS
       602**DCL-ENT   701--CALL
N
       683**DCL       690<<ASSIGN    691<>CALL      694>>ASSIGN    698>>ASSIGN    707>>ASSIGN    708>>ASSIGN
       710>>ASSIGN    717<<ASSIGN    717>>ASSIGN    718>>IF        732<<ASSIGN    734<<ASSIGN    734>>ASSIGN
       741>>ASSIGN    743<<ASSIGN    743>>ASSIGN    749>>IF        751<<ASSIGN    751>>ASSIGN    756>>ASSIGN
PL6.E3A0      #003=IVO$GET File=IVO$ONLINE.:E05TSI                               TUE 07/29/97 23:13 Page:78   
       761<>CALL      763>>ASSIGN    766>>ASSIGN    768>>ASSIGN
NO_MORE
       749**LABEL     742--GOTO
NW
        15**DCL       689<<ASSIGN    690>>ASSIGN    719>>ASSIGN
NWP
        14**DCL         9--PROC      689>>ASSIGN    689>>ASSIGN
P$
       684**DCL       765>>ASSIGN    795<<ASSIGN    798<<ASSIGN    807<<ASSIGN    808>>DOWHILE   809<<ASSIGN
       809>>ASSIGN    817>>ASSIGN
RELINK
       761**LABEL     723--GOTO
SN IN PROCEDURE FIND
       792**DCL       791--PROC      797>>IF

PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:79   
      359        1        /*T***********************************************************/
      360        2        /*T*                                                         */
      361        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      362        4        /*T*                                                         */
      363        5        /*T***********************************************************/
      364        6        /**/
      365        7        /* INITIALIZATION ROUTINE */
      366        8        /**/
      367        9        IVO$INIT: PROC (PARAME,DIAG) ALTRET;
      368       10        /**/
      369       11        /* INCLUDE FILES */
      370       12        /**/
      371       13 S      %INCLUDE B$JIT_C;
      372       14        %INCLUDE B$TABLES_C;
      373      122        %INCLUDE B_SEGIDS_C;
      374      661        %INCLUDE CP_6;
      375      742        %INCLUDE XU_MACRO_C;
      376     3848        %INCLUDE XUR_ENTRY;
      377     3880        /**/
      378     3881        /* PARAMETERS */
      379     3882        /**/
      380     3883        %PARSE$PARAM(NAME=PARAME,STCLASS="");
      381     3964    1   DCL 1 SWP REDEF PARAME,
      382     3965    1         2 DEVID CHAR(8),
      383     3966    1         2 *(0:5) SBIN;
      384     3967    1   DCL 1 OUT REDEF PARAME,
      385     3968    1         2 LEN SBIN,
      386     3969    1         2 MSG CHAR(24),
      387     3970    1         2 * UBIN WORD;
      388     3971    1   DCL 1 PROMPT REDEF PARAME,
      389     3972    1         2 CHR CHAR(1),
      390     3973    1         2 * CHAR(3),
      391     3974    1         2 *(0:6) SBIN;
      392     3975    1   DCL DIAG BIT(1) UNAL;                   /* DIAGNOSTIC OUTPUT */
      393     3976    1   DCL IV_ONLINE BIT(1) ALIGNED CONSTANT SYMDEF INIT('1'B);
      394     3977        /**/
      395     3978        /* SUBSTITUTIONS */
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:80   
      396     3979        /**/
      397     3980        %EQU CMDBUFSZ=256;
      398     3981        %EQU WORKSZ=768;
      399     3982        /**/
      400     3983        /* STATIC DATA */
      401     3984        /**/
      402     3985    1   DCL CMDBUF CHAR(%CMDBUFSZ) STATIC;
      403     3986        %FPT_CORRES(DCB1=M$LO,DCB2=M$DO);
      404     4000        %FPT_EVENT(UENTRY=IVO$EVENT);
      405     4014        %FPT_INT(UENTRY=IVO$OPINT);
      406     4028        %FPT_PROMPT;
      407     4056        %FPT_READ(DCB=M$SI);
      408     4095        %FPT_WRITE(DCB=M$LO,VFC=YES);
      409     4126        %XUR_INIT (GOODCMD=YES,PASS=MODE);
      410     4225    1   DCL PCB$ PTR STATIC;
      411     4226    1   DCL PRCHAR CHAR(1) STATIC;
      412     4227    1   DCL WORK(0:%(WORKSZ-1)) SBIN STATIC;
      413     4228        /**/
      414     4229        /* EXTERNAL REFERENCES */
      415     4230        /**/
      416     4231    1   DCL IVO$EVENT ENTRY ASYNC ALTRET;
      417     4232    1   DCL IVO$GET_CLEANUP ENTRY ALTRET;
      418     4233    1   DCL IVO$GET_INIT ENTRY ALTRET;
      419     4234    1   DCL IVO$OPINT ENTRY ASYNC ALTRET;
      420     4235    1   DCL IVV$ERROR ENTRY (3);
      421     4236    1   DCL M$DO DCB;
      422     4237    1   DCL M$LO DCB;
      423     4238    1   DCL M$SI DCB;
      424     4239        /**/
      425     4240        /* DATA STRUCTURES */
      426     4241        /**/
      427     4242        %B$JIT0;
      428     4331        %A$JIT6X;
      429     4334        %F$DCB;
      430     4391        %P$PCB(NAME=PCB,STCLASS="BASED(PCB$)");
      431     4592    1   DCL PRBUF CHAR(1) BASED ALIGNED;
      432     4593    1   DCL TEXT CHAR(%CMDBUFSZ) BASED ALIGNED;
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:81   
      433     4594        %VLP_VECTOR(STCLASS=BASED);
      434     4609        /**/
      435     4610        /* CONSTANT DATA */
      436     4611        /**/
      437     4612    1   DCL B$JIT$ PTR SYMREF;
      438     4613    1   DCL CONTPR CHAR(1) CONSTANT INIT('+');
      439     4614        /**/
      440     4615        /* AUTO STACK */
      441     4616        /**/
      442     4617    1   DCL ARS SBIN;
      443     4618    1   DCL CP SBIN;
      444     4619    1   DCL IVO$NOEXIT ENTRY ASYNC;
      445     4620        %FPT_XCON (UENTRY=IVO$NOEXIT);
      446     4634        /**/
      447     4635        /* INITIALIZATION ROUTINE */
      448     4636        /**/
      449     4637    1           PCB$=ADDR(PARAME);
      450     4638    1           PCB.TEXT$=ADDR(CMDBUF);
      451     4639    1           PCB.NCHARS=0;
      452     4640    1           PCB.WORK$=ADDR(WORK);
      453     4641    1           PCB.WKSZ=%WORKSZ;
      454     4642    1           CALL           M$XCON(FPT_XCON);/* IGNORE USER/OPERATOR ABORT-$NOEXIT*/
      455     4643    1           CALL XUR$INIT (XUR_INIT);
      456     4644    1           CALL IVO$GET_INIT;
      457     4645    1           CALL M$EVENT(FPT_EVENT);
      458     4646    1           CALL M$INT(FPT_INT);
      459     4647    1           RETURN;
      460     4648        %EJECT;
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:82   
      461     4649        /**/
      462     4650        /* ALTRETURN IF BATCH */
      463     4651        /**/
      464     4652    1   IVO$BATCH: ENTRY ALTRET;
      465     4653    1           IF B$JIT.MODE=%M_BATCH# THEN ALTRETURN;
      466     4654    1           RETURN;
      467     4655        %EJECT;
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:83   
      468     4656        /**/
      469     4657        /* CLEAN-UP ROUTINE */
      470     4658        /**/
      471     4659    1   IVO$CLEANUP: ENTRY ALTRET;
      472     4660    1           CALL IVO$GET_CLEANUP;
      473     4661    1           RETURN;
      474     4662        %EJECT;
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:84   
      475     4663        /**/
      476     4664        /* READ CONTINUATION OF COMMAND */
      477     4665        /**/
      478     4666    1   IVO$CONT: ENTRY (PARAME) ALTRET;
      479     4667    1           PRCHAR=ADDR(FPT_PROMPT.PROMPT_)->VLP_VECTOR.PTR$->PRBUF;
      480     4668    1           FPT_PROMPT.PROMPT_=VECTOR(CONTPR);
      481     4669    1           CALL M$PROMPT(FPT_PROMPT);
      482     4670    1           CP=((PARAME.CHARPOS+3)/4)*4;
      483     4671    1           CALL INSERT(PCB.TEXT$->TEXT,PARAME.CHARPOS,CP-PARAME.CHARPOS,'   ');
      484     4672    1           PARAME.CHARPOS=CP;
      485     4673    1           FPT_READ.BUF_=VECTOR(SUBSTR(CMDBUF,CP));
      486     4674    1           CALL READ ALTRET(CONT_ERR);
      487     4675    2           DO WHILE ('0'B);
      488     4676    2   CONT_ERR:
      489     4677    2              CALL IVV$ERROR(,11);
      490     4678    2              CALL INSERT(CMDBUF,CP,,' ');
      491     4679    2              ARS=1;
      492     4680    2              END;
      493     4681    1           PCB.NCHARS=PARAME.CHARPOS+ARS;
      494     4682    1           FPT_PROMPT.PROMPT_=VECTOR(PRCHAR);
      495     4683    1           CALL M$PROMPT(FPT_PROMPT);
      496     4684    1           RETURN;
      497     4685        %EJECT;
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:85   
      498     4686        /**/
      499     4687        /* INVOKE DELTA OR KEYIN */
      500     4688        /**/
      501     4689    1   IVO$KEYIN: ENTRY (PARAME) ALTRET;
      502     4690    1           CALL IVV$ERROR(,17);
      503     4691    1           ALTRETURN;
      504     4692        %EJECT;
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:86   
      505     4693        /**/
      506     4694        /* PRINT OUTPUT */
      507     4695        /**/
      508     4696    1   IVO$PRINT: ENTRY (PARAME,DIAG) ALTRET;
      509     4697    1           FPT_WRITE.BUF_=VECTOR(SUBSTR(OUT.MSG,0,OUT.LEN));
      510     4698    1           CALL M$WRITE(FPT_WRITE);
      511     4699    2           IF DIAG THEN DO;
      512     4700    2              CALL M$CORRES(FPT_CORRES) ALTRET(DIAGEND);
      513     4701    2              FPT_WRITE.V.DCB#=DCBNUM(M$DO);
      514     4702    2              CALL M$WRITE(FPT_WRITE);
      515     4703    2              FPT_WRITE.V.DCB#=DCBNUM(M$LO);
      516     4704    2   DIAGEND:
      517     4705    2              END/* IF DIAG */;
      518     4706    1           RETURN;
      519     4707        %EJECT;
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:87   
      520     4708        /**/
      521     4709        /* READ COMMAND */
      522     4710        /**/
      523     4711    1   IVO$READ: ENTRY ALTRET;
      524     4712    1           FPT_READ.BUF_=VECTOR(CMDBUF);
      525     4713    1           CALL READ ALTRET(READ_ERR);
      526     4714    1           PCB.NCHARS=ARS;
      527     4715    1           RETURN;
      528     4716        /**/
      529     4717    1   READ_ERR:
      530     4718    1           CALL IVV$ERROR(,11);
      531     4719    1           ALTRETURN;
      532     4720        %EJECT;
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:88   
      533     4721        /**/
      534     4722        /* SET PROMPT CHARACTER */
      535     4723        /**/
      536     4724    1   IVO$SETPC: ENTRY (PARAME) ALTRET;
      537     4725    1           FPT_PROMPT.PROMPT_=VECTOR(PROMPT.CHR);
      538     4726    1           CALL M$PROMPT(FPT_PROMPT);
      539     4727    1           RETURN;
      540     4728        %EJECT;
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:89   
      541     4729        /**/
      542     4730        /* SWAP INPUT */
      543     4731        /**/
      544     4732    1   IVO$SWIN: ENTRY (PARAME) ALTRET;
      545     4733        /**/
      546     4734        /* SWAP OUTPUT */
      547     4735        /**/
      548     4736    1   IVO$SWOUT: ENTRY (PARAME) ALTRET;
      549     4737    1           CALL IVV$ERROR(,17);
      550     4738    1           ALTRETURN;
      551     4739        %EJECT;
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:90   
      552     4740        /**/
      553     4741        /* READ AND EDIT INPUT BUFFER */
      554     4742        /**/
      555     4743    1   READ:   PROC ALTRET;
      556     4744        /**/
      557     4745        /* LOCAL DATA */
      558     4746        /**/
      559     4747    2   DCL CMDPRBUF CHAR(%CMDBUFSZ) ALIGNED;
      560     4748        %FPT_CORRES(DCB1=M$SI,DCB2=M$LO);
      561     4762        %B$XL_UPPER_UR(NAME=UC);
      562     4766        /**/
      563     4767    2           CALL M$READ(FPT_READ) ALTRET(READ_ERR);
      564     4768    2           ARS=DCBADDR(DCBNUM(M$SI))->F$DCB.ARS#;
      565     4769    2           CALL XLATE(SUBSTR(FPT_READ.BUF_.BUF$->TEXT,0,ARS),UC,SUBSTR(FPT_READ.BUF_.
              4769                    BUF$->TEXT,0,ARS));
      566     4770    2           CALL M$CORRES(FPT_CORRES) ALTRET(NOECHO);
      567     4771    2           CALL INSERT(CMDPRBUF,0,,'A',ADDR(FPT_PROMPT.PROMPT_)->VLP_VECTOR.PTR$->PRBUF
              4771                    ,SUBSTR(FPT_READ.BUF_.BUF$->TEXT,0,ARS));
      568     4772    2           FPT_WRITE.BUF_=VECTOR(SUBSTR(CMDPRBUF,0,ARS+2));
      569     4773    2           IF ARS>%(CMDBUFSZ-2) THEN FPT_WRITE.BUF_.BOUND=%(CMDBUFSZ-1);
      570     4774    2           CALL M$WRITE(FPT_WRITE);
      571     4775    2   NOECHO:
      572     4776    2           RETURN;
      573     4777        /**/
      574     4778    2   READ_ERR:
      575     4779    2           ALTRETURN;
      576     4780    2   END READ;
      577     4781    1   END IVO$INIT;
      578     4782        %EOD;

PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:91   
--  Include file information  --

   XUR_ENTRY.:E05TOU  cannot be made into a system file and is referenced.
   XU_MACRO_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   B$TABLES_C.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IVO$INIT.

   Procedure IVO$INIT requires 246 words for executable code.
   Procedure IVO$INIT requires 76 words of local(AUTO) storage.

PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:92   

 Object Unit name= IVO$INIT                                   File name= IVO$ONLINE.:E05TOU
 UTS= JUL 29 '97 23:14:10.88 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1  RoData even  UTS      3      3  IVO$INIT
    2   Data  even  none   932   1644  IVO$INIT
    3   DCB   even  none     0      0  M$DO
    4   DCB   even  none     0      0  M$LO
    5   DCB   even  none     0      0  M$SI
    6   Proc  even  none   246    366  IVO$INIT
    7  RoData even  none    16     20  IVO$INIT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     6      0   yes    yes     yes      Std        2  IVO$INIT
     6     35          yes     yes      Std        0  IVO$BATCH
     6     46          yes     yes      Std        0  IVO$CLEANUP
     6     54          yes     yes      Std        1  IVO$CONT
     6    155          yes     yes      Std        1  IVO$KEYIN
     6    167          yes     yes      Std        2  IVO$PRINT
     6    227          yes     yes      Std        0  IVO$READ
     6    251          yes     yes      Std        1  IVO$SETPC
     6    262          yes     yes      Std        1  IVO$SWIN
     6    265          yes     yes      Std        1  IVO$SWOUT

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    1      0  IV_ONLINE
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:93   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes          ~proc      0 B_POINTER
 yes     yes          Async      0 IVO$EVENT
         yes          Async      0 IVO$NOEXIT
         yes           Std       3 IVV$ERROR
 yes     yes           Std       0 IVO$GET_CLEANUP
 yes     yes          Async      0 IVO$OPINT
 yes     yes           Std       2 XTX$ADAPT
 yes     yes           Std       0 IVO$GET_INIT
 yes     yes           Std       3 XUR$INIT
                       nStd      0 X66_AUTO_2
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  M$DO                                  M$LO
     M$SI                                  B$JIT$                           r    B$XL_UPPER_UR$
     B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID                               ROSID
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:94   


      359        1        /*T***********************************************************/
      360        2        /*T*                                                         */
      361        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      362        4        /*T*                                                         */
      363        5        /*T***********************************************************/
      364        6        /**/
      365        7        /* INITIALIZATION ROUTINE */
      366        8        /**/
      367        9        IVO$INIT: PROC (PARAME,DIAG) ALTRET;

      9  6 000000   000000 700200 xent  IVO$INIT     TSX0  ! X66_AUTO_2
         6 000001   000114 000002                    ZERO    76,2

      368       10        /**/
      369       11        /* INCLUDE FILES */
      370       12        /**/
      371       13 S      %INCLUDE B$JIT_C;
      372       14        %INCLUDE B$TABLES_C;
      373      122        %INCLUDE B_SEGIDS_C;
      374      661        %INCLUDE CP_6;
      375      742        %INCLUDE XU_MACRO_C;
      376     3848        %INCLUDE XUR_ENTRY;
      377     3880        /**/
      378     3881        /* PARAMETERS */
      379     3882        /**/
      380     3883        %PARSE$PARAM(NAME=PARAME,STCLASS="");
      381     3964    1   DCL 1 SWP REDEF PARAME,
      382     3965    1         2 DEVID CHAR(8),
      383     3966    1         2 *(0:5) SBIN;
      384     3967    1   DCL 1 OUT REDEF PARAME,
      385     3968    1         2 LEN SBIN,
      386     3969    1         2 MSG CHAR(24),
      387     3970    1         2 * UBIN WORD;
      388     3971    1   DCL 1 PROMPT REDEF PARAME,
      389     3972    1         2 CHR CHAR(1),
      390     3973    1         2 * CHAR(3),
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:95   
      391     3974    1         2 *(0:6) SBIN;
      392     3975    1   DCL DIAG BIT(1) UNAL;                   /* DIAGNOSTIC OUTPUT */
      393     3976    1   DCL IV_ONLINE BIT(1) ALIGNED CONSTANT SYMDEF INIT('1'B);
      394     3977        /**/
      395     3978        /* SUBSTITUTIONS */
      396     3979        /**/
      397     3980        %EQU CMDBUFSZ=256;
      398     3981        %EQU WORKSZ=768;
      399     3982        /**/
      400     3983        /* STATIC DATA */
      401     3984        /**/
      402     3985    1   DCL CMDBUF CHAR(%CMDBUFSZ) STATIC;
      403     3986        %FPT_CORRES(DCB1=M$LO,DCB2=M$DO);
      404     4000        %FPT_EVENT(UENTRY=IVO$EVENT);
      405     4014        %FPT_INT(UENTRY=IVO$OPINT);
      406     4028        %FPT_PROMPT;
      407     4056        %FPT_READ(DCB=M$SI);
      408     4095        %FPT_WRITE(DCB=M$LO,VFC=YES);
      409     4126        %XUR_INIT (GOODCMD=YES,PASS=MODE);
      410     4225    1   DCL PCB$ PTR STATIC;
      411     4226    1   DCL PRCHAR CHAR(1) STATIC;
      412     4227    1   DCL WORK(0:%(WORKSZ-1)) SBIN STATIC;
      413     4228        /**/
      414     4229        /* EXTERNAL REFERENCES */
      415     4230        /**/
      416     4231    1   DCL IVO$EVENT ENTRY ASYNC ALTRET;
      417     4232    1   DCL IVO$GET_CLEANUP ENTRY ALTRET;
      418     4233    1   DCL IVO$GET_INIT ENTRY ALTRET;
      419     4234    1   DCL IVO$OPINT ENTRY ASYNC ALTRET;
      420     4235    1   DCL IVV$ERROR ENTRY (3);
      421     4236    1   DCL M$DO DCB;
      422     4237    1   DCL M$LO DCB;
      423     4238    1   DCL M$SI DCB;
      424     4239        /**/
      425     4240        /* DATA STRUCTURES */
      426     4241        /**/
      427     4242        %B$JIT0;
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:96   
      428     4331        %A$JIT6X;
      429     4334        %F$DCB;
      430     4391        %P$PCB(NAME=PCB,STCLASS="BASED(PCB$)");
      431     4592    1   DCL PRBUF CHAR(1) BASED ALIGNED;
      432     4593    1   DCL TEXT CHAR(%CMDBUFSZ) BASED ALIGNED;
      433     4594        %VLP_VECTOR(STCLASS=BASED);
      434     4609        /**/
      435     4610        /* CONSTANT DATA */
      436     4611        /**/
      437     4612    1   DCL B$JIT$ PTR SYMREF;
      438     4613    1   DCL CONTPR CHAR(1) CONSTANT INIT('+');
      439     4614        /**/
      440     4615        /* AUTO STACK */
      441     4616        /**/
      442     4617    1   DCL ARS SBIN;
      443     4618    1   DCL CP SBIN;
      444     4619    1   DCL IVO$NOEXIT ENTRY ASYNC;
      445     4620        %FPT_XCON (UENTRY=IVO$NOEXIT);
      446     4634        /**/
      447     4635        /* INITIALIZATION ROUTINE */
      448     4636        /**/
      449     4637    1           PCB$=ADDR(PARAME);

   4637  6 000002   200003 236100                    LDQ     @PARAME,,AUTO
         6 000003   000230 756000 2                  STQ     PCB$

      450     4638    1           PCB.TEXT$=ADDR(CMDBUF);

   4638  6 000004   000000 236000 7                  LDQ     0
         6 000005   000230 470400 2                  LDP0    PCB$
         6 000006   000000 756100                    STQ     0,,PR0

      451     4639    1           PCB.NCHARS=0;

   4639  6 000007   000011 450100                    STZ     9,,PR0

      452     4640    1           PCB.WORK$=ADDR(WORK);
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:97   

   4640  6 000010   000001 236000 7                  LDQ     1
         6 000011   000002 756100                    STQ     2,,PR0

      453     4641    1           PCB.WKSZ=%WORKSZ;

   4641  6 000012   001400 220003                    LDX0    768,DU
         6 000013   000005 740100                    STX0    5,,PR0

      454     4642    1           CALL           M$XCON(FPT_XCON);/* IGNORE USER/OPERATOR ABORT-$NOEXIT*/

   4642  6 000014   001632 630400 2                  EPPR0   FPT_XCON
         6 000015   010003 713400                    CLIMB   4099
         6 000016   400400 401760                    pmme    nvectors=2

      455     4643    1           CALL XUR$INIT (XUR_INIT);

   4643  6 000017   000002 630400 7                  EPPR0   2
         6 000020   000017 631400 xsym               EPPR1   B_VECTNIL+15
         6 000021   000000 701000 xent               TSX1    XUR$INIT
         6 000022   000000 011000                    NOP     0

      456     4644    1           CALL IVO$GET_INIT;

   4644  6 000023   000002 631400 xsym               EPPR1   B_VECTNIL+2
         6 000024   000000 701000 xent               TSX1    IVO$GET_INIT
         6 000025   000000 011000                    NOP     0

      457     4645    1           CALL M$EVENT(FPT_EVENT);

   4645  6 000026   000104 630400 2                  EPPR0   FPT_EVENT
         6 000027   010001 713400                    CLIMB   4097
         6 000030   400000 401760                    pmme    nvectors=1

      458     4646    1           CALL M$INT(FPT_INT);

   4646  6 000031   000110 630400 2                  EPPR0   FPT_INT
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:98   
         6 000032   010002 713400                    CLIMB   4098
         6 000033   400000 401760                    pmme    nvectors=1

      459     4647    1           RETURN;

   4647  6 000034   000000 702200 xent               TSX2  ! X66_ARET

      460     4648        %EJECT;
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:99   
      461     4649        /**/
      462     4650        /* ALTRETURN IF BATCH */
      463     4651        /**/
      464     4652    1   IVO$BATCH: ENTRY ALTRET;

   4652  6 000035   000000 700200 xent  IVO$BATCH    TSX0  ! X66_AUTO_2
         6 000036   000114 000002                    ZERO    76,2

      465     4653    1           IF B$JIT.MODE=%M_BATCH# THEN ALTRETURN;

   4653  6 000037   000000 470400 xsym               LDP0    B$JIT$
         6 000040   000000 236100                    LDQ     0,,PR0
         6 000041   740000 376003                    ANQ     -16384,DU
         6 000042   040000 116003                    CMPQ    16384,DU
         6 000043   000045 601000 6                  TNZ     s:4654

   4653  6 000044   000000 702200 xent               TSX2  ! X66_AALT

      466     4654    1           RETURN;

   4654  6 000045   000000 702200 xent               TSX2  ! X66_ARET

      467     4655        %EJECT;
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:100  
      468     4656        /**/
      469     4657        /* CLEAN-UP ROUTINE */
      470     4658        /**/
      471     4659    1   IVO$CLEANUP: ENTRY ALTRET;

   4659  6 000046   000000 700200 xent  IVO$CLEANUP  TSX0  ! X66_AUTO_2
         6 000047   000114 000002                    ZERO    76,2

      472     4660    1           CALL IVO$GET_CLEANUP;

   4660  6 000050   000002 631400 xsym               EPPR1   B_VECTNIL+2
         6 000051   000000 701000 xent               TSX1    IVO$GET_CLEANUP
         6 000052   000000 011000                    NOP     0

      473     4661    1           RETURN;

   4661  6 000053   000000 702200 xent               TSX2  ! X66_ARET

      474     4662        %EJECT;
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:101  
      475     4663        /**/
      476     4664        /* READ CONTINUATION OF COMMAND */
      477     4665        /**/
      478     4666    1   IVO$CONT: ENTRY (PARAME) ALTRET;

   4666  6 000054   000000 700200 xent  IVO$CONT     TSX0  ! X66_AUTO_2
         6 000055   000114 000002                    ZERO    76,2

      479     4667    1           PRCHAR=ADDR(FPT_PROMPT.PROMPT_)->VLP_VECTOR.PTR$->PRBUF;

   4667  6 000056   000121 470400 2                  LDP0    FPT_PROMPT+5
         6 000057   000000 236100                    LDQ     0,,PR0
         6 000060   777000 376003                    ANQ     -512,DU
         6 000061   000003 276000 7                  ORQ     3
         6 000062   000231 756000 2                  STQ     PRCHAR

      480     4668    1           FPT_PROMPT.PROMPT_=VECTOR(CONTPR);

   4668  6 000063   000004 237000 7                  LDAQ    4
         6 000064   000120 757000 2                  STAQ    FPT_PROMPT+4

      481     4669    1           CALL M$PROMPT(FPT_PROMPT);

   4669  6 000065   000114 630400 2                  EPPR0   FPT_PROMPT
         6 000066   160002 713400                    CLIMB   57346
         6 000067   401000 401760                    pmme    nvectors=3

      482     4670    1           CP=((PARAME.CHARPOS+3)/4)*4;

   4670  6 000070   200003 470500                    LDP0    @PARAME,,AUTO
         6 000071   000004 236100                    LDQ     4,,PR0
         6 000072   000003 036007                    ADLQ    3,DL
         6 000073   000002 772000                    QRL     2
         6 000074   000002 736000                    QLS     2
         6 000075   200006 756100                    STQ     CP,,AUTO

      483     4671    1           CALL INSERT(PCB.TEXT$->TEXT,PARAME.CHARPOS,CP-PARAME.CHARPOS,'   ');
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:102  

   4671  6 000076   000230 471400 2                  LDP1    PCB$
         6 000077   100000 473500                    LDP3    0,,PR1
         6 000100   000004 136100                    SBLQ    4,,PR0
         6 000101   000004 235100                    LDA     4,,PR0
         6 000102   000000 620006                    EAX0    0,QL
         6 000103   040145 100400                    MLR     fill='040'O
         6 000104   000002 000003 1                  ADSC9   CONTPR+1                 cn=0,n=3
         6 000105   300000 000010                    ADSC9   0,A,PR3                  cn=0,n=*X0

      484     4672    1           PARAME.CHARPOS=CP;

   4672  6 000106   200006 235100                    LDA     CP,,AUTO
         6 000107   000004 755100                    STA     4,,PR0

      485     4673    1           FPT_READ.BUF_=VECTOR(SUBSTR(CMDBUF,CP));

   4673  6 000110   000020 735000                    ALS     16
         6 000111   000027 675000 xsym               ERA     B_VECTNIL+23
         6 000112   000006 035000 7                  ADLA    6
         6 000113   200006 236100                    LDQ     CP,,AUTO
         6 000114   000020 736000                    QLS     16
         6 000115   000000 036000 7                  ADLQ    0
         6 000116   000132 757000 2                  STAQ    FPT_READ+4

      486     4674    1           CALL READ ALTRET(CONT_ERR);

   4674  6 000117   000277 701000 6                  TSX1    READ
         6 000120   000122 702000 6                  TSX2    CONT_ERR

      487     4675    2           DO WHILE ('0'B);

   4675  6 000121   000142 710000 6                  TRA     s:4681

      488     4676    2   CONT_ERR:
      489     4677    2              CALL IVV$ERROR(,11);

PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:103  
   4677  6 000122   000007 236000 7     CONT_ERR     LDQ     7
         6 000123   000001 235000 xsym               LDA     B_VECTNIL+1
         6 000124   200112 757100                    STAQ    CMDPRBUF+65,,AUTO
         6 000125   200112 630500                    EPPR0   CMDPRBUF+65,,AUTO
         6 000126   000020 631400 xsym               EPPR1   B_VECTNIL+16
         6 000127   000000 701000 xent               TSX1    IVV$ERROR
         6 000130   000000 011000                    NOP     0

      490     4678    2              CALL INSERT(CMDBUF,CP,,' ');

   4678  6 000131   200006 720100                    LXL0    CP,,AUTO
         6 000132   777377 620010                    EAX0    -257,X0
         6 000133   777777 660003                    ERX0    -1,DU
         6 000134   200006 235100                    LDA     CP,,AUTO
         6 000135   040045 100400                    MLR     fill='040'O
         6 000136   000035 000001 xsym               ADSC9   B_VECTNIL+29             cn=0,n=1
         6 000137   000000 000010 2                  ADSC9   CMDBUF,A                 cn=0,n=*X0

      491     4679    2              ARS=1;

   4679  6 000140   000001 236007                    LDQ     1,DL
         6 000141   200005 756100                    STQ     ARS,,AUTO

      492     4680    2              END;

      493     4681    1           PCB.NCHARS=PARAME.CHARPOS+ARS;

   4681  6 000142   200003 470500                    LDP0    @PARAME,,AUTO
         6 000143   000004 236100                    LDQ     4,,PR0
         6 000144   200005 036100                    ADLQ    ARS,,AUTO
         6 000145   000230 471400 2                  LDP1    PCB$
         6 000146   100011 756100                    STQ     9,,PR1

      494     4682    1           FPT_PROMPT.PROMPT_=VECTOR(PRCHAR);

   4682  6 000147   000010 237000 7                  LDAQ    8
         6 000150   000120 757000 2                  STAQ    FPT_PROMPT+4
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:104  

      495     4683    1           CALL M$PROMPT(FPT_PROMPT);

   4683  6 000151   000114 630400 2                  EPPR0   FPT_PROMPT
         6 000152   160002 713400                    CLIMB   57346
         6 000153   401000 401760                    pmme    nvectors=3

      496     4684    1           RETURN;

   4684  6 000154   000000 702200 xent               TSX2  ! X66_ARET

      497     4685        %EJECT;
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:105  
      498     4686        /**/
      499     4687        /* INVOKE DELTA OR KEYIN */
      500     4688        /**/
      501     4689    1   IVO$KEYIN: ENTRY (PARAME) ALTRET;

   4689  6 000155   000000 700200 xent  IVO$KEYIN    TSX0  ! X66_AUTO_2
         6 000156   000114 000002                    ZERO    76,2

      502     4690    1           CALL IVV$ERROR(,17);

   4690  6 000157   000013 236000 7                  LDQ     11
         6 000160   000001 235000 xsym               LDA     B_VECTNIL+1
         6 000161   200112 757100                    STAQ    CMDPRBUF+65,,AUTO
         6 000162   200112 630500                    EPPR0   CMDPRBUF+65,,AUTO
         6 000163   000020 631400 xsym               EPPR1   B_VECTNIL+16
         6 000164   000000 701000 xent               TSX1    IVV$ERROR
         6 000165   000000 011000                    NOP     0

      503     4691    1           ALTRETURN;

   4691  6 000166   000000 702200 xent               TSX2  ! X66_AALT

      504     4692        %EJECT;
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:106  
      505     4693        /**/
      506     4694        /* PRINT OUTPUT */
      507     4695        /**/
      508     4696    1   IVO$PRINT: ENTRY (PARAME,DIAG) ALTRET;

   4696  6 000167   000000 700200 xent  IVO$PRINT    TSX0  ! X66_AUTO_2
         6 000170   000114 000002                    ZERO    76,2

      509     4697    1           FPT_WRITE.BUF_=VECTOR(SUBSTR(OUT.MSG,0,OUT.LEN));

   4697  6 000171   200003 470500                    LDP0    @PARAME,,AUTO
         6 000172   000000 720100                    LXL0    0,,PR0
         6 000173   000000 635010                    EAA     0,X0
         6 000174   000002 771000                    ARL     2
         6 000175   000140 135007                    SBLA    96,DL
         6 000176   200003 236100                    LDQ     @PARAME,,AUTO
         6 000177   000001 036003                    ADLQ    1,DU
         6 000200   000150 757000 2                  STAQ    FPT_WRITE+4

      510     4698    1           CALL M$WRITE(FPT_WRITE);

   4698  6 000201   000144 630400 2                  EPPR0   FPT_WRITE
         6 000202   040001 713400                    CLIMB   write
         6 000203   401400 401760                    pmme    nvectors=4

      511     4699    2           IF DIAG THEN DO;

   4699  6 000204   200004 470500                    LDP0    @DIAG,,AUTO
         6 000205   000000 066500                    CMPB    filb='0'B
         6 000206   000000 000001                    BDSC    0,,PR0                   by=0,bit=0,n=1
         6 000207   000002 000022 xsym               BDSC    B_VECTNIL+2              by=0,bit=0,n=18
         6 000210   000226 600000 6                  TZE     DIAGEND

      512     4700    2              CALL M$CORRES(FPT_CORRES) ALTRET(DIAGEND);

   4700  6 000211   000100 630400 2                  EPPR0   FPT_CORRES
         6 000212   460000 713400                    CLIMB   alt,+24576
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:107  
         6 000213   400000 401760                    pmme    nvectors=1
         6 000214   000226 702000 6                  TSX2    DIAGEND

      513     4701    2              FPT_WRITE.V.DCB#=DCBNUM(M$DO);

   4701  6 000215   000000 236007 xsym               LDQ     M$DO,DL
         6 000216   000000 620006                    EAX0    0,QL
         6 000217   000154 740000 2                  STX0    FPT_WRITE+8

      514     4702    2              CALL M$WRITE(FPT_WRITE);

   4702  6 000220   000144 630400 2                  EPPR0   FPT_WRITE
         6 000221   040001 713400                    CLIMB   write
         6 000222   401400 401760                    pmme    nvectors=4

      515     4703    2              FPT_WRITE.V.DCB#=DCBNUM(M$LO);

   4703  6 000223   000000 236007 xsym               LDQ     M$LO,DL
         6 000224   000000 620006                    EAX0    0,QL
         6 000225   000154 740000 2                  STX0    FPT_WRITE+8

      516     4704    2   DIAGEND:
      517     4705    2              END/* IF DIAG */;

   4705  6 000226                       DIAGEND      null
      518     4706    1           RETURN;

   4706  6 000226   000000 702200 xent               TSX2  ! X66_ARET

      519     4707        %EJECT;
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:108  
      520     4708        /**/
      521     4709        /* READ COMMAND */
      522     4710        /**/
      523     4711    1   IVO$READ: ENTRY ALTRET;

   4711  6 000227   000000 700200 xent  IVO$READ     TSX0  ! X66_AUTO_2
         6 000230   000114 000002                    ZERO    76,2

      524     4712    1           FPT_READ.BUF_=VECTOR(CMDBUF);

   4712  6 000231   000014 237000 7                  LDAQ    12
         6 000232   000132 757000 2                  STAQ    FPT_READ+4

      525     4713    1           CALL READ ALTRET(READ_ERR);

   4713  6 000233   000277 701000 6                  TSX1    READ
         6 000234   000241 702000 6                  TSX2    READ_ERR

      526     4714    1           PCB.NCHARS=ARS;

   4714  6 000235   200005 235100                    LDA     ARS,,AUTO
         6 000236   000230 470400 2                  LDP0    PCB$
         6 000237   000011 755100                    STA     9,,PR0

      527     4715    1           RETURN;

   4715  6 000240   000000 702200 xent               TSX2  ! X66_ARET

      528     4716        /**/
      529     4717    1   READ_ERR:
      530     4718    1           CALL IVV$ERROR(,11);

   4718  6 000241   000007 236000 7     READ_ERR     LDQ     7
         6 000242   000001 235000 xsym               LDA     B_VECTNIL+1
         6 000243   200112 757100                    STAQ    CMDPRBUF+65,,AUTO
         6 000244   200112 630500                    EPPR0   CMDPRBUF+65,,AUTO
         6 000245   000020 631400 xsym               EPPR1   B_VECTNIL+16
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:109  
         6 000246   000000 701000 xent               TSX1    IVV$ERROR
         6 000247   000000 011000                    NOP     0

      531     4719    1           ALTRETURN;

   4719  6 000250   000000 702200 xent               TSX2  ! X66_AALT

      532     4720        %EJECT;
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:110  
      533     4721        /**/
      534     4722        /* SET PROMPT CHARACTER */
      535     4723        /**/
      536     4724    1   IVO$SETPC: ENTRY (PARAME) ALTRET;

   4724  6 000251   000000 700200 xent  IVO$SETPC    TSX0  ! X66_AUTO_2
         6 000252   000114 000002                    ZERO    76,2

      537     4725    1           FPT_PROMPT.PROMPT_=VECTOR(PROMPT.CHR);

   4725  6 000253   177640 235007                    LDA     65440,DL
         6 000254   200003 236100                    LDQ     @PARAME,,AUTO
         6 000255   000120 757000 2                  STAQ    FPT_PROMPT+4

      538     4726    1           CALL M$PROMPT(FPT_PROMPT);

   4726  6 000256   000114 630400 2                  EPPR0   FPT_PROMPT
         6 000257   160002 713400                    CLIMB   57346
         6 000260   401000 401760                    pmme    nvectors=3

      539     4727    1           RETURN;

   4727  6 000261   000000 702200 xent               TSX2  ! X66_ARET

      540     4728        %EJECT;
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:111  
      541     4729        /**/
      542     4730        /* SWAP INPUT */
      543     4731        /**/
      544     4732    1   IVO$SWIN: ENTRY (PARAME) ALTRET;

   4732  6 000262   000000 700200 xent  IVO$SWIN     TSX0  ! X66_AUTO_2
         6 000263   000114 000002                    ZERO    76,2
         6 000264   000267 710000 6                  TRA     s:4737

      545     4733        /**/
      546     4734        /* SWAP OUTPUT */
      547     4735        /**/
      548     4736    1   IVO$SWOUT: ENTRY (PARAME) ALTRET;

   4736  6 000265   000000 700200 xent  IVO$SWOUT    TSX0  ! X66_AUTO_2
         6 000266   000114 000002                    ZERO    76,2

      549     4737    1           CALL IVV$ERROR(,17);

   4737  6 000267   000013 236000 7                  LDQ     11
         6 000270   000001 235000 xsym               LDA     B_VECTNIL+1
         6 000271   200112 757100                    STAQ    CMDPRBUF+65,,AUTO
         6 000272   200112 630500                    EPPR0   CMDPRBUF+65,,AUTO
         6 000273   000020 631400 xsym               EPPR1   B_VECTNIL+16
         6 000274   000000 701000 xent               TSX1    IVV$ERROR
         6 000275   000000 011000                    NOP     0

      550     4738    1           ALTRETURN;

   4738  6 000276   000000 702200 xent               TSX2  ! X66_AALT

      551     4739        %EJECT;
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:112  
      552     4740        /**/
      553     4741        /* READ AND EDIT INPUT BUFFER */
      554     4742        /**/
      555     4743    1   READ:   PROC ALTRET;

   4743  6 000277   200010 741300       READ         STX1  ! CP+2,,AUTO

      556     4744        /**/
      557     4745        /* LOCAL DATA */
      558     4746        /**/
      559     4747    2   DCL CMDPRBUF CHAR(%CMDBUFSZ) ALIGNED;
      560     4748        %FPT_CORRES(DCB1=M$SI,DCB2=M$LO);
      561     4762        %B$XL_UPPER_UR(NAME=UC);
      562     4766        /**/
      563     4767    2           CALL M$READ(FPT_READ) ALTRET(READ_ERR);

   4767  6 000300   000126 630400 2                  EPPR0   FPT_READ
         6 000301   440000 713400                    CLIMB   alt,read
         6 000302   401400 401760                    pmme    nvectors=4
         6 000303   000364 702000 6                  TSX2    READ_ERR

      564     4768    2           ARS=DCBADDR(DCBNUM(M$SI))->F$DCB.ARS#;

   4768  6 000304   000000 236007 xsym               LDQ     M$SI,DL
         6 000305   000016 470400 7                  LDP0    14
         6 000306   000000 471500                    LDP1    0,,PR0
         6 000307   100000 473506                    LDP3    0,QL,PR1
         6 000310   300000 235100                    LDA     0,,PR3
         6 000311   200005 755100                    STA     ARS,,AUTO

      565     4769    2           CALL XLATE(SUBSTR(FPT_READ.BUF_.BUF$->TEXT,0,ARS),UC,SUBSTR(FPT_READ.BUF_.
              4769                    BUF$->TEXT,0,ARS));

   4769  6 000312   000133 473400 2                  LDP3    FPT_READ+5
         6 000313   000000 620005                    EAX0    0,AL
         6 000314   000000 474400 xsym               LDP4    B$XL_UPPER_UR$
         6 000315   200005 721100                    LXL1    ARS,,AUTO
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:113  
         6 000316   040140 160540                    MVT     fill='040'O
         6 000317   300000 000010                    ADSC9   0,,PR3                   cn=0,n=*X0
         6 000320   300000 000011                    ADSC9   0,,PR3                   cn=0,n=*X1
         6 000321   400000 000100                    ARG     0,,PR4

      566     4770    2           CALL M$CORRES(FPT_CORRES) ALTRET(NOECHO);

   4770  6 000322   001640 630400 2                  EPPR0   FPT_CORRES
         6 000323   460000 713400                    CLIMB   alt,+24576
         6 000324   400000 401760                    pmme    nvectors=1
         6 000325   000362 702000 6                  TSX2    NOECHO

      567     4771    2          CALL INSERT(CMDPRBUF,0,,'A',ADDR(FPT_PROMPT.PROMPT_)->VLP_VECTOR.PTR$->PRBUF
              4771                    ,SUBSTR(FPT_READ.BUF_.BUF$->TEXT,0,ARS));

   4771  6 000326   101000 236003                    LDQ     33280,DU
         6 000327   200011 552140                    STBQ    CMDPRBUF,'40'O,AUTO
         6 000330   000121 470400 2                  LDP0    FPT_PROMPT+5
         6 000331   000000 236100                    LDQ     0,,PR0
         6 000332   000011 772000                    QRL     9
         6 000333   200011 552120                    STBQ    CMDPRBUF,'20'O,AUTO
         6 000334   000133 471400 2                  LDP1    FPT_READ+5
         6 000335   200005 720100                    LXL0    ARS,,AUTO
         6 000336   040100 100540                    MLR     fill='040'O
         6 000337   100000 000010                    ADSC9   0,,PR1                   cn=0,n=*X0
         6 000340   200011 400376                    ADSC9   CMDPRBUF,,AUTO           cn=2,n=254

      568     4772    2           FPT_WRITE.BUF_=VECTOR(SUBSTR(CMDPRBUF,0,ARS+2));

   4772  6 000341   200005 235100                    LDA     ARS,,AUTO
         6 000342   000020 735000                    ALS     16
         6 000343   377640 035007                    ADLA    130976,DL
         6 000344   200112 452500                    STP2    CMDPRBUF+65,,AUTO
         6 000345   200112 236100                    LDQ     CMDPRBUF+65,,AUTO
         6 000346   000011 036003                    ADLQ    9,DU
         6 000347   000150 757000 2                  STAQ    FPT_WRITE+4

PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:114  
      569     4773    2           IF ARS>%(CMDBUFSZ-2) THEN FPT_WRITE.BUF_.BOUND=%(CMDBUFSZ-1);

   4773  6 000350   200005 235100                    LDA     ARS,,AUTO
         6 000351   000376 115007                    CMPA    254,DL
         6 000352   000357 604400 6                  TMOZ    s:4774

   4773  6 000353   000150 236000 2                  LDQ     FPT_WRITE+4
         6 000354   177777 376007                    ANQ     65535,DL
         6 000355   000017 276000 7                  ORQ     15
         6 000356   000150 756000 2                  STQ     FPT_WRITE+4

      570     4774    2           CALL M$WRITE(FPT_WRITE);

   4774  6 000357   000144 630400 2                  EPPR0   FPT_WRITE
         6 000360   040001 713400                    CLIMB   write
         6 000361   401400 401760                    pmme    nvectors=4

      571     4775    2   NOECHO:
      572     4776    2           RETURN;

   4776  6 000362   200010 221300       NOECHO       LDX1  ! CP+2,,AUTO
         6 000363   000001 702211                    TSX2  ! 1,X1

      573     4777        /**/
      574     4778    2   READ_ERR:
      575     4779    2           ALTRETURN;

   4779  6 000364   200010 221300       READ_ERR     LDX1  ! CP+2,,AUTO
         6 000365   000000 702211                    TSX2  ! 0,X1
      576     4780    2   END READ;
      577     4781    1   END IVO$INIT;
      578     4782        %EOD;

PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:115  
--  Include file information  --

   XUR_ENTRY.:E05TOU  cannot be made into a system file and is referenced.
   XU_MACRO_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   B$TABLES_C.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IVO$INIT.
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:116  

 **** Variables and constants ****

  ****  Section 001 RoData IVO$INIT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     1-0-0/c CHAR        r     1 CONTPR

  ****  Section 002  Data  IVO$INIT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(256)   r     1 CMDBUF                   100-0-0/d STRC(144)   r     1 FPT_CORRES
  1640-0-0/d STRC(144)   r     1 FPT_CORRES               104-0-0/d STRC(144)   r     1 FPT_EVENT
   110-0-0/d STRC(144)   r     1 FPT_INT                  114-0-0/d STRC(360)   r     1 FPT_PROMPT
   126-0-0/d STRC(504)   r     1 FPT_READ                 144-0-0/d STRC(432)   r     1 FPT_WRITE
  1632-0-0/d STRC(216)   r     1 FPT_XCON                 230-0-0/w PTR         r     1 PCB$
   231-0-0/c CHAR        r     1 PRCHAR                   232-0-0/w SBIN        r     1 WORK(0:767)
   160-0-0/d STRC(1404)  r     1 XUR_INIT

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @DIAG                      3-0-0/w PTR         r     1 @PARAME
     5-0-0/w SBIN        r     1 ARS                       11-0-0/w CHAR(256)   r     1 CMDPRBUF
     6-0-0/w SBIN        r     1 CP                        *0-0-0/b BIT         r     1 DIAG
    *0-0-0/w STRC(288)   r     1 OUT                       *0-0-0/w STRC(270)   r     1 PARAME
    *0-0-0/w STRC(288)   r     1 PROMPT

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:117  

     0-0-0/w PTR         r     1 B$JIT$                     0-0-0/w PTR         r     1 B$XL_UPPER_UR$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(2088)  r     1 B$JIT                      0-0-0/d ASTR(3528)  r     1 F$DCB
     0-0-0N  NULL        r     1 M$DO                       0-0-0N  NULL        r     1 M$LO
     0-0-0N  NULL        r     1 M$SI                       0-0-0N  NULL        r     1 M$UC
     0-0-0/w STRC(504)   r     1 PCB                        0-0-0/w CHAR        r     1 PRBUF
     0-0-0/w CHAR(256)   r     1 TEXT                       0-0-0/d STRC(4608)  r     1 UC
     0-0-0/d STRC(72)    r     1 VLP_VECTOR


   Procedure IVO$INIT requires 246 words for executable code.
   Procedure IVO$INIT requires 76 words of local(AUTO) storage.
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:118  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:119  
          MINI XREF LISTING

ARS
      4617**DCL      4679<<ASSIGN   4681>>ASSIGN   4714>>ASSIGN   4768<<ASSIGN   4769>>CALLBLT  4769>>CALLBLT
      4771>>CALLBLT  4772>>ASSIGN   4773>>IF
B$JIT.ERR.MID
      4249**DCL      4249--REDEF
B$JIT.MODE
      4243**DCL      4653>>IF
B$JIT$
      4612**DCL      4243--IMP-PTR  4653>>IF
B$XL_UPPER_UR$ IN PROCEDURE READ
      4763**DCL      4764--IMP-PTR  4769>>CALLBLT
CMDBUF
      3985**DCL      4638--ASSIGN   4673--ASSIGN   4678<<CALLBLT  4712--ASSIGN
CMDPRBUF IN PROCEDURE READ
      4747**DCL      4771<<CALLBLT  4772--ASSIGN
CONTPR
      4613**DCL      4668--ASSIGN
CONT_ERR
      4677**LABEL    4674--CALLALT
CP
      4618**DCL      4670<<ASSIGN   4671>>CALLBLT  4672>>ASSIGN   4673>>ASSIGN   4678>>CALLBLT
DIAG
      3975**DCL         9--PROC     4696--ENTRY    4699>>IF
DIAGEND
      4705**LABEL    4700--CALLALT
F$DCB.ACTPOS
      4367**DCL      4367--REDEF
F$DCB.ARS#
      4341**DCL      4341--REDEF    4768>>ASSIGN
F$DCB.ATTR
      4360**DCL      4361--REDEF
F$DCB.BORROW
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:120  
      4375**DCL      4375--REDEF    4375--REDEF    4375--REDEF
F$DCB.DCBNAME.L
      4389**DCL      4389--IMP-SIZ
F$DCB.EOMCHAR#
      4345**DCL      4345--REDEF
F$DCB.FLDID
      4370**DCL      4370--REDEF
F$DCB.FORM$
      4364**DCL      4364--REDEF
F$DCB.FSECT
      4380**DCL      4380--REDEF
F$DCB.FSN#
      4357**DCL      4357--REDEF    4357--REDEF    4358--REDEF
F$DCB.HEADER$
      4363**DCL      4363--REDEF
F$DCB.IXTNSIZE#
      4361**DCL      4361--REDEF
F$DCB.LASTSTA$
      4350**DCL      4350--REDEF
F$DCB.LVL
      4376**DCL      4376--REDEF
F$DCB.NAME#.C
      4351**DCL      4351--REDEF
F$DCB.NOEOF
      4373**DCL      4373--REDEF
F$DCB.NRECS#
      4362**DCL      4362--REDEF
F$DCB.NRECX
      4381**DCL      4381--REDEF
F$DCB.OHDR
      4373**DCL      4373--REDEF
F$DCB.ORG#
      4356**DCL      4356--REDEF
F$DCB.PRECNO
      4379**DCL      4379--REDEF
F$DCB.RCSZ
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:121  
      4385**DCL      4385--REDEF
F$DCB.RES#
      4352**DCL      4352--REDEF
F$DCB.SETX
      4364**DCL      4364--REDEF
F$DCB.TAB$
      4364**DCL      4364--REDEF
F$DCB.TDA
      4378**DCL      4379--REDEF
F$DCB.WSN#
      4352**DCL      4352--REDEF
FPT_CORRES
      3997**DCL      4700<>CALL
FPT_CORRES.V
      3997**DCL      3997--DCLINIT
FPT_CORRES IN PROCEDURE READ
      4759**DCL      4770<>CALL
FPT_CORRES.V IN PROCEDURE READ
      4759**DCL      4759--DCLINIT
FPT_EVENT
      4011**DCL      4645<>CALL
FPT_EVENT.V
      4011**DCL      4011--DCLINIT
FPT_INT
      4025**DCL      4646<>CALL
FPT_INT.V
      4025**DCL      4025--DCLINIT
FPT_PROMPT
      4044**DCL      4669<>CALL     4683<>CALL     4726<>CALL
FPT_PROMPT.PROMPT_
      4050**DCL      4667--ASSIGN   4668<<ASSIGN   4682<<ASSIGN   4725<<ASSIGN   4771--CALLBLT
FPT_PROMPT.V
      4052**DCL      4046--DCLINIT
FPT_READ
      4073**DCL      4767<>CALL
FPT_READ.BUF_
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:122  
      4075**DCL      4673<<ASSIGN   4712<<ASSIGN
FPT_READ.BUF_.BUF$
      4076**DCL      4769>>CALLBLT  4769>>CALLBLT  4771>>CALLBLT
FPT_READ.STATION_
      4076**DCL      4077--REDEF
FPT_READ.V
      4077**DCL      4073--DCLINIT
FPT_READ.V.DVBYTE.REREAD#
      4088**DCL      4088--REDEF
FPT_READ.V.INDX#
      4086**DCL      4086--REDEF
FPT_WRITE
      4112**DCL      4698<>CALL     4702<>CALL     4774<>CALL
FPT_WRITE.BUF_
      4112**DCL      4697<<ASSIGN   4772<<ASSIGN
FPT_WRITE.BUF_.BOUND
      4112**DCL      4773<<ASSIGN
FPT_WRITE.STATION_
      4114**DCL      4114--REDEF
FPT_WRITE.V
      4115**DCL      4112--DCLINIT
FPT_WRITE.V.DCB#
      4115**DCL      4701<<ASSIGN   4703<<ASSIGN
FPT_WRITE.V.DVBYTE.VFC#
      4121**DCL      4121--REDEF
FPT_XCON
      4631**DCL      4642<>CALL
FPT_XCON.V
      4632**DCL      4631--DCLINIT
IVO$EVENT
      4231**DCL-ENT  4011--DCLINIT
IVO$GET_CLEANUP
      4232**DCL-ENT  4660--CALL
IVO$GET_INIT
      4233**DCL-ENT  4644--CALL
IVO$NOEXIT
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:123  
      4619**DCL-ENT  4632--DCLINIT
IVO$OPINT
      4234**DCL-ENT  4025--DCLINIT
IVV$ERROR
      4235**DCL-ENT  4677--CALL     4690--CALL     4718--CALL     4737--CALL
M$CORRES
       675**DCL-ENT  4700--CALL     4770--CALL
M$DO
      4236**DCL      4701>>ASSIGN
M$EVENT
       725**DCL-ENT  4645--CALL
M$INT
       725**DCL-ENT  4646--CALL
M$LO
      4237**DCL      4703>>ASSIGN
M$PROMPT
       694**DCL-ENT  4669--CALL     4683--CALL     4726--CALL
M$READ
       671**DCL-ENT  4767--CALL
M$SI
      4238**DCL      4768--ASSIGN
M$WRITE
       671**DCL-ENT  4698--CALL     4702--CALL     4774--CALL
M$XCON
       725**DCL-ENT  4642--CALL
NOECHO IN PROCEDURE READ
      4776**LABEL    4770--CALLALT
OUT.LEN
      3968**DCL      4697>>ASSIGN
OUT.MSG
      3969**DCL      4697--ASSIGN
PARAME
      3902**DCL         9--PROC     3964--REDEF    3967--REDEF    3971--REDEF    4637--ASSIGN   4666--ENTRY
      4689--ENTRY    4696--ENTRY    4724--ENTRY    4732--ENTRY    4736--ENTRY
PARAME.CHARPOS
      3940**DCL      4670>>ASSIGN   4671>>CALLBLT  4671>>CALLBLT  4672<<ASSIGN   4681>>ASSIGN
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:124  
PCB.NCHARS
      4557**DCL      4639<<ASSIGN   4681<<ASSIGN   4714<<ASSIGN
PCB.TEXT$
      4411**DCL      4638<<ASSIGN   4671>>CALLBLT
PCB.WKSZ
      4440**DCL      4641<<ASSIGN
PCB.WORK$
      4419**DCL      4640<<ASSIGN
PCB$
      4225**DCL      4410--IMP-PTR  4637<<ASSIGN   4638>>ASSIGN   4639>>ASSIGN   4640>>ASSIGN   4641>>ASSIGN
      4671>>CALLBLT  4681>>ASSIGN   4714>>ASSIGN
PRBUF
      4592**DCL      4667>>ASSIGN   4771>>CALLBLT
PRCHAR
      4226**DCL      4667<<ASSIGN   4682--ASSIGN
PROMPT.CHR
      3972**DCL      4725--ASSIGN
READ
      4743**PROC     4674--CALL     4713--CALL
READ_ERR
      4718**LABEL    4713--CALLALT
READ_ERR IN PROCEDURE READ
      4779**LABEL    4767--CALLALT
TEXT
      4593**DCL      4671<<CALLBLT  4769<<CALLBLT  4769>>CALLBLT  4771>>CALLBLT
UC IN PROCEDURE READ
      4764**DCL      4769>>CALLBLT
VLP_VECTOR.PTR$
      4607**DCL      4667>>ASSIGN   4771>>CALLBLT
VLP_VECTOR.W2
      4606**DCL      4607--REDEF
WORK
      4227**DCL      4640--ASSIGN
XTX$ADAPT
      4143**DCL-ENT  4222--DCLINIT
XUR$INIT
PL6.E3A0      #004=IVO$INIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:14 Page:125  
      3860**DCL-ENT  4643--CALL
XUR_INIT
      4148**DCL      4643<>CALL
XUR_INIT.WORKR_
      4162**DCL      4163--REDEF

PL6.E3A0      #005=IVO$GETCMD File=IVO$ONLINE.:E05TSI                            TUE 07/29/97 23:15 Page:126  
      579        1        /*T***********************************************************/
      580        2        /*T*                                                         */
      581        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      582        4        /*T*                                                         */
      583        5        /*T***********************************************************/
      584        6        IVO$GETCMD: PROC (NODE, OUT$, V_) ALTRET;
      585        7    1   DCL NODE UBIN;
      586        8    1   DCL OUT$ PTR;
      587        9    1   DCL V_ VECTOR;
      588       10    1   DCL XUR$GETCMD ENTRY(6) ALTRET;
      589       11    1           CALL XUR$GETCMD (NODE, OUT$, V_) ALTRET (ALT);
      590       12    1           RETURN;
      591       13    1   ALT:    ALTRETURN;
      592       14    1   END IVO$GETCMD;
      593       15        %EOD;

PL6.E3A0      #005=IVO$GETCMD File=IVO$ONLINE.:E05TSI                            TUE 07/29/97 23:15 Page:127  
--  Include file information  --

   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure IVO$GETCMD.

   Procedure IVO$GETCMD requires 8 words for executable code.
   Procedure IVO$GETCMD requires 6 words of local(AUTO) storage.

PL6.E3A0      #005=IVO$GETCMD File=IVO$ONLINE.:E05TSI                            TUE 07/29/97 23:15 Page:128  

 Object Unit name= IVO$GETCMD                                 File name= IVO$ONLINE.:E05TOU
 UTS= JUL 29 '97 23:15:18.40 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none     8     10  IVO$GETCMD

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes    yes     yes      Std        3  IVO$GETCMD

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       6 XUR$GETCMD
                       nStd      0 X66_AUTO_3
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     B_VECTNIL
PL6.E3A0      #005=IVO$GETCMD File=IVO$ONLINE.:E05TSI                            TUE 07/29/97 23:15 Page:129  


      579        1        /*T***********************************************************/
      580        2        /*T*                                                         */
      581        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      582        4        /*T*                                                         */
      583        5        /*T***********************************************************/
      584        6        IVO$GETCMD: PROC (NODE, OUT$, V_) ALTRET;

      6  0 000000   000000 700200 xent  IVO$GETCMD   TSX0  ! X66_AUTO_3
         0 000001   000006 000003                    ZERO    6,3

      585        7    1   DCL NODE UBIN;
      586        8    1   DCL OUT$ PTR;
      587        9    1   DCL V_ VECTOR;
      588       10    1   DCL XUR$GETCMD ENTRY(6) ALTRET;
      589       11    1           CALL XUR$GETCMD (NODE, OUT$, V_) ALTRET (ALT);

     11  0 000002   200003 630500                    EPPR0   @NODE,,AUTO
         0 000003   000021 631400 xsym               EPPR1   B_VECTNIL+17
         0 000004   000000 701000 xent               TSX1    XUR$GETCMD
         0 000005   000007 702000 0                  TSX2    ALT

      590       12    1           RETURN;

     12  0 000006   000000 702200 xent               TSX2  ! X66_ARET

      591       13    1   ALT:    ALTRETURN;

     13  0 000007   000000 702200 xent  ALT          TSX2  ! X66_AALT
      592       14    1   END IVO$GETCMD;
      593       15        %EOD;

PL6.E3A0      #005=IVO$GETCMD File=IVO$ONLINE.:E05TSI                            TUE 07/29/97 23:15 Page:130  
--  Include file information  --

   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure IVO$GETCMD.
PL6.E3A0      #005=IVO$GETCMD File=IVO$ONLINE.:E05TSI                            TUE 07/29/97 23:15 Page:131  

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @NODE                      4-0-0/w PTR         r     1 @OUT$
     5-0-0/w PTR         r     1 @V_                       *0-0-0/w UBIN        r     1 NODE
    *0-0-0/w PTR         r     1 OUT$                      *0-0-0/d VECT        r     1 V_


   Procedure IVO$GETCMD requires 8 words for executable code.
   Procedure IVO$GETCMD requires 6 words of local(AUTO) storage.
PL6.E3A0      #005=IVO$GETCMD File=IVO$ONLINE.:E05TSI                            TUE 07/29/97 23:15 Page:132  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #005=IVO$GETCMD File=IVO$ONLINE.:E05TSI                            TUE 07/29/97 23:15 Page:133  
          MINI XREF LISTING

ALT
        13**LABEL      11--CALLALT
NODE
         7**DCL         6--PROC       11<>CALL
OUT$
         8**DCL         6--PROC       11<>CALL
V_
         9**DCL         6--PROC       11<>CALL
XUR$GETCMD
        10**DCL-ENT    11--CALL

PL6.E3A0      #006=IVO$NOEXIT File=IVO$ONLINE.:E05TSI                            TUE 07/29/97 23:15 Page:134  
      594        1        /*T***********************************************************/
      595        2        /*T*                                                         */
      596        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      597        4        /*T*                                                         */
      598        5        /*T***********************************************************/
      599        6        IVO$NOEXIT: PROC ASYNC;            /* RCVE CTRL FOR USER OR OPERATOR ABORT */
      600        7        %INCLUDE CP_6;
      601       88    1   DCL MSG CHAR(0) CONSTANT INIT('I/O operation may be PENDING, CONTROL-Y/QUIT ignored'
                88            );
      602       89    1   DCL M$LO DCB;
      603       90        %FPT_WRITE (DCB=M$LO,BUF=MSG);
      604      121        %B$TCB;
      605      124        %B$EXCFR;
      606      142    1   DCL B$TCB$ PTR SYMREF;
      607      143        %B$XCON;
      608      153        %FPT_XCON;
      609      167    2           IF B$TCB$->B$TCB.STK$->B$XCON.RNST.OPERR THEN DO;
      610      168    2              CALL M$WRITE(FPT_WRITE);
      611      169    2              END;
      612      170    2           ELSE DO;
      613      171    2              CALL M$XCON(FPT_XCON);
      614      172    2              END;
      615      173    1           RETURN;
      616      174    1   END IVO$NOEXIT;
      617      175        %EOD;

PL6.E3A0      #006=IVO$NOEXIT File=IVO$ONLINE.:E05TSI                            TUE 07/29/97 23:15 Page:135  
--  Include file information  --

   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IVO$NOEXIT.

   Procedure IVO$NOEXIT requires 15 words for executable code.
   Procedure IVO$NOEXIT requires 4 words of local(AUTO) storage.

PL6.E3A0      #006=IVO$NOEXIT File=IVO$ONLINE.:E05TSI                            TUE 07/29/97 23:15 Page:136  

 Object Unit name= IVO$NOEXIT                                 File name= IVO$ONLINE.:E05TOU
 UTS= JUL 29 '97 23:15:23.08 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1  RoData even  UTS     13     15  IVO$NOEXIT
    2   DCB   even  none     0      0  M$LO
    3   Data  even  none    18     22  IVO$NOEXIT
    4   Proc  even  none    15     17  IVO$NOEXIT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     4      0   yes            yes     Async       0  IVO$NOEXIT

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AAUTO
                       nStd      0 X66_AARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  M$LO                                  B$TCB$
PL6.E3A0      #006=IVO$NOEXIT File=IVO$ONLINE.:E05TSI                            TUE 07/29/97 23:15 Page:137  

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #006=IVO$NOEXIT File=IVO$ONLINE.:E05TSI                            TUE 07/29/97 23:15 Page:138  


      594        1        /*T***********************************************************/
      595        2        /*T*                                                         */
      596        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      597        4        /*T*                                                         */
      598        5        /*T***********************************************************/
      599        6        IVO$NOEXIT: PROC ASYNC;            /* RCVE CTRL FOR USER OR OPERATOR ABORT */

      6  4 000000   000000 700200 xent  IVO$NOEXIT   TSX0  ! X66_AAUTO
         4 000001   000004 000000                    ZERO    4,0

      600        7        %INCLUDE CP_6;
      601       88    1  DCL MSG CHAR(0) CONSTANT INIT('I/O operation may be PENDING, CONTROL-Y/QUIT ignored'
                88            );
      602       89    1   DCL M$LO DCB;
      603       90        %FPT_WRITE (DCB=M$LO,BUF=MSG);
      604      121        %B$TCB;
      605      124        %B$EXCFR;
      606      142    1   DCL B$TCB$ PTR SYMREF;
      607      143        %B$XCON;
      608      153        %FPT_XCON;
      609      167    2           IF B$TCB$->B$TCB.STK$->B$XCON.RNST.OPERR THEN DO;

    167  4 000002   000000 470400 xsym               LDP0    B$TCB$
         4 000003   000001 471500                    LDP1    1,,PR0
         4 000004   100101 236100                    LDQ     65,,PR1
         4 000005   020000 316003                    CANQ    8192,DU
         4 000006   000013 600000 4                  TZE     s:171

      610      168    2              CALL M$WRITE(FPT_WRITE);

    168  4 000007   000000 630400 3                  EPPR0   FPT_WRITE
         4 000010   040001 713400                    CLIMB   write
         4 000011   401400 401760                    pmme    nvectors=4

      611      169    2              END;

PL6.E3A0      #006=IVO$NOEXIT File=IVO$ONLINE.:E05TSI                            TUE 07/29/97 23:15 Page:139  
    169  4 000012   000016 710000 4                  TRA     s:173

      612      170    2           ELSE DO;

      613      171    2              CALL M$XCON(FPT_XCON);

    171  4 000013   000014 630400 3                  EPPR0   FPT_XCON
         4 000014   010003 713400                    CLIMB   4099
         4 000015   400400 401760                    pmme    nvectors=2

      614      172    2              END;

      615      173    1           RETURN;

    173  4 000016   000000 702200 xent               TSX2  ! X66_AARET
      616      174    1   END IVO$NOEXIT;
      617      175        %EOD;

PL6.E3A0      #006=IVO$NOEXIT File=IVO$ONLINE.:E05TSI                            TUE 07/29/97 23:15 Page:140  
--  Include file information  --

   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IVO$NOEXIT.
PL6.E3A0      #006=IVO$NOEXIT File=IVO$ONLINE.:E05TSI                            TUE 07/29/97 23:15 Page:141  

 **** Variables and constants ****

  ****  Section 001 RoData IVO$NOEXIT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/c CHAR(52)    r     1 MSG

  ****  Section 003  Data  IVO$NOEXIT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(432)   r     1 FPT_WRITE                 14-0-0/d STRC(216)   r     1 FPT_XCON

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$TCB$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(144)   r     1 B$TCB                      0-0-0/w STRC(2448)  r     1 B$XCON
     0-0-0N  NULL        r     1 M$LO


   Procedure IVO$NOEXIT requires 15 words for executable code.
   Procedure IVO$NOEXIT requires 4 words of local(AUTO) storage.
PL6.E3A0      #006=IVO$NOEXIT File=IVO$ONLINE.:E05TSI                            TUE 07/29/97 23:15 Page:142  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #006=IVO$NOEXIT File=IVO$ONLINE.:E05TSI                            TUE 07/29/97 23:15 Page:143  
          MINI XREF LISTING

B$EXCFR.ASL
       125**DCL       125--REDEF
B$EXCFR.ERR.ERR#
       139**DCL       139--REDEF
B$EXCFR.EVID
       138**DCL       138--REDEF     139--REDEF
B$EXCFR.IR
       126**DCL       126--REDEF
B$EXCFR.PREVSZ
       125**DCL       125--REDEF
B$EXCFR.SUBC
       137**DCL       137--REDEF     138--REDEF     138--REDEF
B$TCB.STK$
       122**DCL       167>>IF
B$TCB$
       142**DCL       167>>IF
B$XCON.ERR.ERR#
       150**DCL       150--REDEF
B$XCON.LIMIT.MEM
       148**DCL       148--REDEF
B$XCON.RNST.OPERR
       146**DCL       167>>IF
FPT_WRITE
       107**DCL       168<>CALL
FPT_WRITE.STATION_
       109**DCL       109--REDEF
FPT_WRITE.V
       110**DCL       107--DCLINIT
FPT_WRITE.V.DVBYTE.VFC#
       116**DCL       116--REDEF
FPT_XCON
       164**DCL       171<>CALL
PL6.E3A0      #006=IVO$NOEXIT File=IVO$ONLINE.:E05TSI                            TUE 07/29/97 23:15 Page:144  
FPT_XCON.V
       165**DCL       164--DCLINIT
M$WRITE
        17**DCL-ENT   168--CALL
M$XCON
        71**DCL-ENT   171--CALL
MSG
        88**DCL       108--DCLINIT   109--DCLINIT

PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:145  
      618        1        /*T***********************************************************/
      619        2        /*T*                                                         */
      620        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      621        4        /*T*                                                         */
      622        5        /*T***********************************************************/
      623        6        /**/
      624        7        /* DISK I/O ROUTINES */
      625        8        /**/
      626        9        IVO$QUEIO: PROC (VIP) ALTRET;
      627       10        /**/
      628       11        /* INCLUDE FILES */
      629       12        /**/
      630       13        %INCLUDE B_SEGIDS_C;
      631      552        %INCLUDE CP_6;
      632      633        %INCLUDE CP_6_SUBS;
      633     1173        %INCLUDE IV$MACROS;
      634     1343        %INCLUDE N_FC_C;
      635     1380        %INCLUDE NI$TABLES;
      636     1596        %INCLUDE FM$GRAN;
      637     1665        %INCLUDE IV_SUBS_C;
      638     1728        /**/
      639     1729        /* EXTERNAL REFERENCES */
      640     1730        /**/
      641     1731    1   DCL IVV$ERROR ENTRY(3);
      642     1732        /**/
      643     1733        /* PARAMETER */
      644     1734        /**/
      645     1735        %IV$VIP(NAME=VIP,STCLASS="");
      646     1799        /**/
      647     1800        /* DATA STRUCTURES */
      648     1801        /**/
      649     1802        %F$DCB;
      650     1859        %IV$FMT(NAME=FMT,STCLASS="BASED(FMT$)");
      651     1915        %IV$FMT(NAME=ELT,STCLASS="BASED(VIP.ELT$)");
      652     1971        %NI$DVT(NAME=DVT,STCLASS="BASED(VIP.DVT$)");
      653     1978        %FM$VID(FM$VID=VID,BASED="BASED(VIP.VID$)");
      654     1984        /**/
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:146  
      655     1985        /* STATIC DATA */
      656     1986        /**/
      657     1987        %FPT_IOQ(FPTN=FPT_IOQ,BPMIR=YES);
      658     2005    1   DCL 1 IOQBUF DALIGNED STATIC,
      659     2006    1         2 IDCW BIT(36) INIT('240000702100'O) ALIGNED, /* READ CONFIG CMD */
      660     2007    1         2 DCW ALIGNED,
      661     2008    1           3 OFFSET UBIN(18) UNAL INIT(0),
      662     2009    1           3 TALLY UBIN(18) UNAL INIT(140),
      663     2010    1         2 DATA(0:139) UBIN WORD ALIGNED,
      664     2011    1         2 DATA_MPC REDEF DATA,            /* MPC CONFIGURATION TABLE */
      665     2012    1           3 TABLE_ENTRY(0:279),
      666     2013    1             4 DEV_TYPE UBIN BYTE CALIGNED,
      667     2014    1             4 DEV_NUM UBIN BYTE CALIGNED;
      668     2015    1   DCL 1 MDS_ENTRY BASED(PTR$) ALIGNED,    /* MDS CONFIG TABLE ENTRY */
      669     2016    1         2 STATUS UBIN BYTE CALIGNED,
      670     2017    1         2 TYPE UBIN BYTE CALIGNED,
      671     2018    1         2 FORMAT UBIN BYTE CALIGNED,
      672     2019    1         2 * UBIN BYTE CALIGNED;
      673     2020    1   DCL 1 FIPS_ENTRY BASED(PTR$) ALIGNED,   /* FIPS CONFIG TABLE ENTRY */
      674     2021    1         2 STATUS UBIN BYTE CALIGNED,
      675     2022    1         2 DEV_TYPE UBIN BYTE CALIGNED,
      676     2023    1         2 FORMAT UBIN BYTE CALIGNED,
      677     2024    1         2 * UBIN BYTE CALIGNED;
      678     2025    1   DCL 1 DAU_ENTRY BASED(PTR$) ALIGNED,    /* DAU CONFIG TABLE ENTRY */
      679     2026    1         2 DEV_TYPE UBIN BYTE CALIGNED,
      680     2027    1         2 DEV_NUM UBIN BYTE CALIGNED,
      681     2028    1         2 * UBIN(18) UNAL;
      682     2029        /**/
      683     2030        /* AUTO STACK */
      684     2031        /**/
      685     2032    1   DCL I SBIN;
      686     2033    1   DCL J SBIN;
      687     2034    1   DCL PTR$ PTR;
      688     2035    1   DCL 1 DEV_NUM UBIN(9) CALIGNED;
      689     2036    1   DCL 1 MDS_ADDR REDEF DEV_NUM,
      690     2037    1         2 * BIT(3) UNAL,
      691     2038    1         2 CM# BIT(3) UNAL,
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:147  
      692     2039    1         2 DEV# BIT(3) UNAL;
      693     2040    1   DCL FC SBIN;
      694     2041    1   DCL FMT$ PTR;
      695     2042    1   DCL TEMP SBIN;
      696     2043    1   DCL TEMP$ REDEF TEMP PTR;
      697     2044        /**/
      698     2045    1   DCL SECTSTRT(0:25) UBIN;
      699     2046    1   DCL DTT(0:63) UBIN;
      700     2047    1   DCL DGT(0:63) UBIN;
      701     2048        /**/
      702     2049        /* INITIATE FORMATTING OF DISK */
      703     2050        /**/
      704     2051    1           IF VIP.DCBNO=0 THEN CALL GETDCB ALTRET(DISK_ERR);
      705     2052    1           FPT_IOQ.V.DCB#=VIP.DCBNO;
      706     2053    1           FPT_IOQ.V.DLA.DCTX#=VIP.DCTX;
      707     2054    1           FPT_IOQ.V.DLA.DRELADDR#=0;
      708     2055    1           FPT_IOQ.V.FC#=%N_DCWLIST;
      709     2056    1           FMT$=VIP.FMT$;
      710     2057    1           FPT_IOQ.BUF_.BOUND=FMT.BOUND;
      711     2058    1           FPT_IOQ.BUF_.BUF$=FMT$;
      712     2059    1           FPT_IOQ.V.WAIT#='0'B;
      713     2060    1           TEMP$=ADDR(VIP);
      714     2061    1           FPT_IOQ.V.EVENT#=TEMP;
      715     2062    1           CALL M$IOQ(FPT_IOQ) ALTRET(DISK_ERR);
      716     2063    1           RETURN;
      717     2064        %EJECT;
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:148  
      718     2065        /**/
      719     2066        /* READ VID */
      720     2067        /**/
      721     2068    1   IVO$READ_VID: ENTRY (VIP) ALTRET;
      722     2069    1           FC=%N_RDBIN;
      723     2070    1           GOTO VID_CMN;
      724     2071        /**/
      725     2072        /* WRITE VID */
      726     2073        /**/
      727     2074    1   IVO$WRITE_VID: ENTRY (VIP) ALTRET;
      728     2075    1           FC=%N_WRBIN;
      729     2076    1   VID_CMN:
      730     2077    1           IF VIP.DCBNO=0 THEN CALL GETDCB ALTRET(DISK_ERR);
      731     2078    1           FPT_IOQ.V.DCB#=VIP.DCBNO;
      732     2079    1           FPT_IOQ.V.DLA.DCTX#=VIP.DCTX;
      733     2080    1           FPT_IOQ.BUF_.BOUND=4095;
      734     2081    1           FPT_IOQ.V.FC#=FC;
      735     2082    1           FPT_IOQ.BUF_.BUF$=VIP.VID$;
      736     2083    1           FPT_IOQ.V.WAIT#='1'B;
      737     2084    1           FPT_IOQ.V.EVENT#=0;
      738     2085    1           CALL M$IOQ(FPT_IOQ) ALTRET(DISK_ERR);
      739     2086    2           IF DCBADDR(VIP.DCBNO)->F$DCB.TYC&~%TYC_EGV THEN DO;
      740     2087    2   DISK_ERR:
      741     2088    2              ALTRETURN;
      742     2089    2              END;
      743     2090    1           IF FC=%N_RDBIN THEN RETURN;
      744     2091    1           SECTSTRT = VID.SECTSTRT;
      745     2092    1           DTT = VID.DTT;
      746     2093    1           DGT = VID.DGT;
      747     2094    2           DO I = 1 TO 25;                 /* Need to put DDT on *ALL* VIDs */
      748     2095    2              IF SECTSTRT(I) = 0 OR SECTSTRT(I)>=DVT.PACKSIZE THEN GOTO RET;
      749     2096    2              FPT_IOQ.V.FC# = %N_RDBIN;
      750     2097    2              FPT_IOQ.V.DLA.DRELADDR# = SECTSTRT(I);
      751     2098    2              CALL M$IOQ(FPT_IOQ) ALTRET (DISK_ERR);
      752     2099    2              FPT_IOQ.V.FC# = %N_WRBIN;
      753     2100    2              VID.DTT = DTT;
      754     2101    2              VID.DGT = DGT;
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:149  
      755     2102    2              CALL M$IOQ(FPT_IOQ) ALTRET (DISK_ERR);
      756     2103    2              END;
      757     2104    1   RET:    FPT_IOQ.V.DLA.DRELADDR# = 0;
      758     2105    1           RETURN;
      759     2106        /**/
      760     2107        /* RELEASE DCB */
      761     2108        /**/
      762     2109    1   IVO$RELDCB: ENTRY(VIP) ALTRET;
      763     2110    1           IF VIP.DCBNO ~= 0 THEN CALL RELDCB;
      764     2111    1           RETURN;
      765     2112        %EJECT;
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:150  
      766     2113        /**/
      767     2114        /* READ ELT */
      768     2115        /**/
      769     2116    1   IVO$READ_ELT: ENTRY (VIP) ALTRET;
      770     2117    1           FC=%N_DCWLIST;
      771     2118    1           GOTO ELT_CMN;
      772     2119        /**/
      773     2120        /* WRITE ELT */
      774     2121        /**/
      775     2122    1   IVO$WRITE_ELT: ENTRY (VIP) ALTRET;
      776     2123    1           FC=%N_WRBIN;
      777     2124    1   ELT_CMN:
      778     2125    1           IF VIP.DCBNO=0 THEN CALL GETDCB ALTRET(DISK_ERR);
      779     2126    1           FPT_IOQ.V.DCB#=VIP.DCBNO;
      780     2127    1           FPT_IOQ.V.DLA.DCTX#=VIP.DCTX;
      781     2128    1           FPT_IOQ.BUF_.BOUND=ELT.BOUND;
      782     2129    1           FPT_IOQ.V.FC#=FC;
      783     2130    1           FPT_IOQ.BUF_.BUF$=VIP.ELT$;
      784     2131    1           FPT_IOQ.V.WAIT#='1'B;
      785     2132    1           FPT_IOQ.V.EVENT#=0;
      786     2133    1           CALL M$IOQ(FPT_IOQ) ALTRET(DISK_ERR);
      787     2134    2           IF DCBADDR(VIP.DCBNO)->F$DCB.TYC&~%TYC_EGV THEN DO;
      788     2135    2              ALTRETURN;
      789     2136    2              END;
      790     2137    1           RETURN;
      791     2138        %EJECT;
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:151  
      792     2139        /**/
      793     2140        /* VERIFY FORMAT */
      794     2141        /**/
      795     2142    1   IVO$VERIFY_FMT: ENTRY(VIP) ALTRET;
      796     2143    2           DO I = 0 TO 139;
      797     2144    2              IOQBUF.DATA(I) = 0;          /* CLEAR BUFFER */
      798     2145    2              END;
      799     2146    1           IF VIP.DCBNO = 0 THEN CALL GETDCB ALTRET(DISK_ERR);
      800     2147    1           FPT_IOQ.V.DCB# = VIP.DCBNO;
      801     2148    1           FPT_IOQ.V.DLA.DCTX# = VIP.MPC_DCTX;
      802     2149    1           FPT_IOQ.V.FC# = %N_DCWLIST;
      803     2150    1           FPT_IOQ.BUF_ = VECTOR(IOQBUF);
      804     2151    1           IOQBUF.DCW.OFFSET = POFFW( ADDR(IOQBUF.DATA), ADDR(IOQBUF));
      805     2152    1           CALL M$IOQ(FPT_IOQ) ALTRET(DISK_ERR);
      806     2153    2           DO SELECT (VIP.MODEL);
      807     2154    2              SELECT('MSU8082 ', 'MSU8092 '); /* MDS DISKS */
      808     2155    2              DEV_NUM = VIP.DVN;
      809     2156    2              I = BITBIN(MDS_ADDR.CM#);    /* I = CM# */
      810     2157    2              J = BITBIN(MDS_ADDR.DEV#);   /* J = REL DEVICE # */
      811     2158    2              PTR$ = PINCRW( ADDR(IOQBUF.DATA), (I*17 + J + 1) );
      812     2159    2              IF MDS_ENTRY.STATUS ~= BITBIN('377'O) /* DEVICE ON-LINE? */
      813     2160    3              THEN DO;
      814     2161    3                 CALL IVV$ERROR(VIP.DEVID,34);
      815     2162    3                 ALTRETURN;
      816     2163    3                 END;
      817     2164    2              IF MDS_ENTRY.FORMAT ~= BITBIN('002'O) /* 512 WORDS/SECTOR ? */
      818     2165    3              THEN DO;
      819     2166    3                 CALL IVV$ERROR(VIP.DEVID, 29);
      820     2167    3                 ALTRETURN;
      821     2168    3                 END;
      822     2169    2              SELECT ('MSU3380 ', 'MSU3382 ', 'MSU3390 ', /* FIPS DISKS */
      823     2170    2                'MSU3392 ', 'MSU3391 ', 'MSU3393 ',
      824     2171    2                'MSU3381 ', 'MSU3383 ');
      825     2172    2              I = VIP.DVN;                 /* I = DEVICE # */
      826     2173    2              PTR$ = PINCRW( ADDR(IOQBUF.DATA), I);
      827     2174    2              IF FIPS_ENTRY.STATUS ~= BITBIN('377'O) /* DEVICE ON-LINE? */
      828     2175    3              THEN DO;
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:152  
      829     2176    3                 CALL IVV$ERROR(VIP.DEVID,34);
      830     2177    3                 ALTRETURN;
      831     2178    3                 END;
      832     2179    2              IF FIPS_ENTRY.FORMAT ~= BITBIN('002'O) /* 512 WORDS/SECTOR? */
      833     2180    3              THEN DO;
      834     2181    3                 CALL IVV$ERROR(VIP.DEVID, 30);
      835     2182    3                 ALTRETURN;
      836     2183    3                 END;
      837     2184    2              SELECT ('MSU0501 ', 'MSU0509 '); /* 501 DISKS */
      838     2185    2              IF VIP.MPC_TYPE = #DAU
      839     2186    3              THEN DO;                     /* DAU CONTROLLER */
      840     2187    4                 DO I = 1 TO 32;
      841     2188    4                    PTR$ = PINCRW (ADDR(IOQBUF.DATA), I);
      842     2189    4                    IF DAU_ENTRY.DEV_NUM = VIP.DVN
      843     2190    4                    THEN GOTO DEVICE_MATCH1;
      844     2191    4                    END;                   /*  DO I */
      845     2192    3                 CALL IVV$ERROR(VIP.DEVID, 34); /* DEVICE NOT CONFIGURED */
      846     2193    3                 ALTRETURN;
      847     2194    3   DEVICE_MATCH1:
      848     2195    3                 IF NOT (DAU_ENTRY.DEV_TYPE = BITBIN(#501N_SP) OR
      849     2196    3                   DAU_ENTRY.DEV_TYPE = BITBIN(#501N_DP))
      850     2197    4                 THEN DO;
      851     2198    4                    CALL IVV$ERROR(VIP.DEVID, 31); /* NOT A 501N DEVICE */
      852     2199    4                    ALTRETURN;
      853     2200    4                    END;
      854     2201    3                 END;
      855     2202    3              ELSE DO;                     /* MPC CONTROLLER */
      856     2203    4                 DO I = 0 TO 65;
      857     2204    4                    IF IOQBUF.DATA_MPC.TABLE_ENTRY.DEV_NUM(I) = VIP.DVN
      858     2205    4                    THEN GOTO DEVICE_MATCH2;
      859     2206    4                    END;
      860     2207    3                 CALL IVV$ERROR(VIP.DEVID, 34); /* DEVICE NOT CONFIGURED */
      861     2208    3                 ALTRETURN;
      862     2209    3   DEVICE_MATCH2:
      863     2210    3                 IF NOT (IOQBUF.DATA_MPC.TABLE_ENTRY.DEV_TYPE(I) = BITBIN(#501N_SP) OR
      864     2211    3                   IOQBUF.DATA_MPC.TABLE_ENTRY.DEV_TYPE(I) = BITBIN(#501N_DP))
      865     2212    4                 THEN DO;                  /* NOT A 501N DEVICE */
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:153  
      866     2213    4                    CALL IVV$ERROR(VIP.DEVID, 31);
      867     2214    4                    ALTRETURN;
      868     2215    4                    END;
      869     2216    3                 END;                      /* ELSE DO */
      870     2217    2              END;                         /* DO SELECT */
      871     2218    1           RETURN;
      872     2219        %EJECT;
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:154  
      873     2220        /**/
      874     2221        /* GET AND RELEASE DCB FOR DISK ACCESS */
      875     2222        /**/
      876     2223    1   GETDCB: PROC ALTRET;
      877     2224        /**/
      878     2225        /* STATIC DATA */
      879     2226        /**/
      880     2227    2   DCL 1 F$DP STATIC,
      881     2228    2         2 LEN UBIN BYTE UNAL,
      882     2229    2         2 TEXT CHAR(11) INIT('F$');
      883     2230    2   DCL 1 T$DP STATIC,
      884     2231    2         2 LEN UBIN BYTE UNAL INIT(5),
      885     2232    2         2 TEXT CHAR(5) INIT('T$TND');
      886     2233        %FPT_GETDCB(FPTN=GET_IO_DCB, DCBNAME=F$DP);
      887     2248        %FPT_GETDCB(FPTN=GET_TD_DCB, DCBNAME=T$DP);
      888     2263        %FPT_TDOPEN (TEST=POLTS);
      889     2280        %FPT_TDCLOSE;
      890     2294        %FPT_RELDCB;
      891     2308        /**/
      892     2309        /* AUTO STACK */
      893     2310        /**/
      894     2311    2   DCL I SBIN;
      895     2312        /**/
      896     2313        /* GET DCB */
      897     2314        /**/
      898     2315    2           CALL INSERT(F$DP.TEXT,2,,VIP.DEVID);
      899     2316    2           CALL INDEX(I,' ',F$DP.TEXT);
      900     2317    2           F$DP.LEN=I;
      901     2318    2           CALL M$GETDCB(GET_IO_DCB) ALTRET(NODCB);
      902     2319    2           VIP.DCBNO=GET_IO_DCB.V.DCB#;
      903     2320    2           IF GET_TD_DCB.V.DCB# = 0   /* DO WE ALREADY HAVE A DCB# FOR TND I/O? */
      904     2321    3           THEN DO;                        /* NO- GET ONE */
      905     2322    3              CALL M$GETDCB (GET_TD_DCB) ALTRET (NODCB);
      906     2323    3              FPT_TDOPEN.V.DCB# = GET_TD_DCB.V.DCB#;
      907     2324    3              FPT_TDCLOSE.V.DCB# = GET_TD_DCB.V.DCB#;
      908     2325    3              END;
      909     2326    2           ELSE CALL M$TDCLOSE (FPT_TDCLOSE);
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:155  
              2326                    /* YES- USE THE SAME DCB# FOR THIS DEVICE */
      910     2327    2           FPT_TDOPEN.V.DEVICE.IOM# = VIP.IOCHAN.IOM;
      911     2328    2           FPT_TDOPEN.V.DEVICE.CHAN# = VIP.IOCHAN.CHAN;
      912     2329    2           FPT_TDOPEN.V.DEVICE.DVN# = VIP.DVN;
      913     2330    2           CALL M$TDOPEN (FPT_TDOPEN) ALTRET (NODCB);
      914     2331    2           RETURN;
      915     2332        /**/
      916     2333    2   NODCB:
      917     2334    2           ALTRETURN;
      918     2335        /**/
      919     2336        /* RELEASE DCB */
      920     2337        /**/
      921     2338    2   RELDCB: ENTRY ALTRET;
      922     2339    2           FPT_RELDCB.V.DCB#=VIP.DCBNO;
      923     2340    2           CALL M$RELDCB(FPT_RELDCB);
      924     2341    2           RETURN;
      925     2342    2   END GETDCB;
      926     2343    1   END IVO$QUEIO;
      927     2344        %EOD;

PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:156  
--  Include file information  --

   IV_SUBS_C.:E05TOU  is referenced.
   FM$GRAN.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N_FC_C.:E05TOU  is referenced.
   IV$MACROS.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IVO$QUEIO.

   Procedure IVO$QUEIO requires 534 words for executable code.
   Procedure IVO$QUEIO requires 170 words of local(AUTO) storage.

PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:157  

 Object Unit name= IVO$QUEIO                                  File name= IVO$ONLINE.:E05TOU
 UTS= JUL 29 '97 23:15:39.72 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none   192    300  IVO$QUEIO
    2  RoData even  UTS     24     30  IVO$QUEIO
    3   Proc  even  none   534   1026  IVO$QUEIO
    4  RoData even  none    15     17  IVO$QUEIO

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes    yes     yes      Std        1  IVO$QUEIO
     3     47          yes     yes      Std        1  IVO$READ_VID
     3     54          yes     yes      Std        1  IVO$WRITE_VID
     3    216          yes     yes      Std        1  IVO$RELDCB
     3    226          yes     yes      Std        1  IVO$READ_ELT
     3    232          yes     yes      Std        1  IVO$WRITE_ELT
     3    307          yes     yes      Std        1  IVO$VERIFY_FMT

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       3 IVV$ERROR
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AUTO_1
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:158  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID                               ROSID
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:159  


      618        1        /*T***********************************************************/
      619        2        /*T*                                                         */
      620        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      621        4        /*T*                                                         */
      622        5        /*T***********************************************************/
      623        6        /**/
      624        7        /* DISK I/O ROUTINES */
      625        8        /**/
      626        9        IVO$QUEIO: PROC (VIP) ALTRET;

      9  3 000000   000000 700200 xent  IVO$QUEIO    TSX0  ! X66_AUTO_1
         3 000001   000252 000001                    ZERO    170,1

      627       10        /**/
      628       11        /* INCLUDE FILES */
      629       12        /**/
      630       13        %INCLUDE B_SEGIDS_C;
      631      552        %INCLUDE CP_6;
      632      633        %INCLUDE CP_6_SUBS;
      633     1173        %INCLUDE IV$MACROS;
      634     1343        %INCLUDE N_FC_C;
      635     1380        %INCLUDE NI$TABLES;
      636     1596        %INCLUDE FM$GRAN;
      637     1665        %INCLUDE IV_SUBS_C;
      638     1728        /**/
      639     1729        /* EXTERNAL REFERENCES */
      640     1730        /**/
      641     1731    1   DCL IVV$ERROR ENTRY(3);
      642     1732        /**/
      643     1733        /* PARAMETER */
      644     1734        /**/
      645     1735        %IV$VIP(NAME=VIP,STCLASS="");
      646     1799        /**/
      647     1800        /* DATA STRUCTURES */
      648     1801        /**/
      649     1802        %F$DCB;
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:160  
      650     1859        %IV$FMT(NAME=FMT,STCLASS="BASED(FMT$)");
      651     1915        %IV$FMT(NAME=ELT,STCLASS="BASED(VIP.ELT$)");
      652     1971        %NI$DVT(NAME=DVT,STCLASS="BASED(VIP.DVT$)");
      653     1978        %FM$VID(FM$VID=VID,BASED="BASED(VIP.VID$)");
      654     1984        /**/
      655     1985        /* STATIC DATA */
      656     1986        /**/
      657     1987        %FPT_IOQ(FPTN=FPT_IOQ,BPMIR=YES);
      658     2005    1   DCL 1 IOQBUF DALIGNED STATIC,
      659     2006    1         2 IDCW BIT(36) INIT('240000702100'O) ALIGNED, /* READ CONFIG CMD */
      660     2007    1         2 DCW ALIGNED,
      661     2008    1           3 OFFSET UBIN(18) UNAL INIT(0),
      662     2009    1           3 TALLY UBIN(18) UNAL INIT(140),
      663     2010    1         2 DATA(0:139) UBIN WORD ALIGNED,
      664     2011    1         2 DATA_MPC REDEF DATA,            /* MPC CONFIGURATION TABLE */
      665     2012    1           3 TABLE_ENTRY(0:279),
      666     2013    1             4 DEV_TYPE UBIN BYTE CALIGNED,
      667     2014    1             4 DEV_NUM UBIN BYTE CALIGNED;
      668     2015    1   DCL 1 MDS_ENTRY BASED(PTR$) ALIGNED,    /* MDS CONFIG TABLE ENTRY */
      669     2016    1         2 STATUS UBIN BYTE CALIGNED,
      670     2017    1         2 TYPE UBIN BYTE CALIGNED,
      671     2018    1         2 FORMAT UBIN BYTE CALIGNED,
      672     2019    1         2 * UBIN BYTE CALIGNED;
      673     2020    1   DCL 1 FIPS_ENTRY BASED(PTR$) ALIGNED,   /* FIPS CONFIG TABLE ENTRY */
      674     2021    1         2 STATUS UBIN BYTE CALIGNED,
      675     2022    1         2 DEV_TYPE UBIN BYTE CALIGNED,
      676     2023    1         2 FORMAT UBIN BYTE CALIGNED,
      677     2024    1         2 * UBIN BYTE CALIGNED;
      678     2025    1   DCL 1 DAU_ENTRY BASED(PTR$) ALIGNED,    /* DAU CONFIG TABLE ENTRY */
      679     2026    1         2 DEV_TYPE UBIN BYTE CALIGNED,
      680     2027    1         2 DEV_NUM UBIN BYTE CALIGNED,
      681     2028    1         2 * UBIN(18) UNAL;
      682     2029        /**/
      683     2030        /* AUTO STACK */
      684     2031        /**/
      685     2032    1   DCL I SBIN;
      686     2033    1   DCL J SBIN;
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:161  
      687     2034    1   DCL PTR$ PTR;
      688     2035    1   DCL 1 DEV_NUM UBIN(9) CALIGNED;
      689     2036    1   DCL 1 MDS_ADDR REDEF DEV_NUM,
      690     2037    1         2 * BIT(3) UNAL,
      691     2038    1         2 CM# BIT(3) UNAL,
      692     2039    1         2 DEV# BIT(3) UNAL;
      693     2040    1   DCL FC SBIN;
      694     2041    1   DCL FMT$ PTR;
      695     2042    1   DCL TEMP SBIN;
      696     2043    1   DCL TEMP$ REDEF TEMP PTR;
      697     2044        /**/
      698     2045    1   DCL SECTSTRT(0:25) UBIN;
      699     2046    1   DCL DTT(0:63) UBIN;
      700     2047    1   DCL DGT(0:63) UBIN;
      701     2048        /**/
      702     2049        /* INITIATE FORMATTING OF DISK */
      703     2050        /**/
      704     2051    1           IF VIP.DCBNO=0 THEN CALL GETDCB ALTRET(DISK_ERR);

   2051  3 000002   200003 470500                    LDP0    @VIP,,AUTO
         3 000003   000016 720100                    LXL0    14,,PR0
         3 000004   000007 601000 3                  TNZ     s:2052

   2051  3 000005   000730 701000 3                  TSX1    GETDCB
         3 000006   000125 702000 3                  TSX2    DISK_ERR

      705     2052    1           FPT_IOQ.V.DCB#=VIP.DCBNO;

   2052  3 000007   200003 470500                    LDP0    @VIP,,AUTO
         3 000010   000016 720100                    LXL0    14,,PR0
         3 000011   000004 740000 1                  STX0    FPT_IOQ+4

      706     2053    1           FPT_IOQ.V.DLA.DCTX#=VIP.DCTX;

   2053  3 000012   000017 236100                    LDQ     15,,PR0
         3 000013   000005 676000 1                  ERQ     FPT_IOQ+5
         3 000014   777770 376003                    ANQ     -8,DU
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:162  
         3 000015   000005 656000 1                  ERSQ    FPT_IOQ+5

      707     2054    1           FPT_IOQ.V.DLA.DRELADDR#=0;

   2054  3 000016   777770 236003                    LDQ     -8,DU
         3 000017   000005 356000 1                  ANSQ    FPT_IOQ+5

      708     2055    1           FPT_IOQ.V.FC#=%N_DCWLIST;

   2055  3 000020   000000 236003                    LDQ     0,DU
         3 000021   000004 752004 1                  STCQ    FPT_IOQ+4,'04'O

      709     2056    1           FMT$=VIP.FMT$;

   2056  3 000022   000013 236100                    LDQ     11,,PR0
         3 000023   200011 756100                    STQ     FMT$,,AUTO

      710     2057    1           FPT_IOQ.BUF_.BOUND=FMT.BOUND;

   2057  3 000024   200011 471500                    LDP1    FMT$,,AUTO
         3 000025   100010 236100                    LDQ     8,,PR1
         3 000026   000020 736000                    QLS     16
         3 000027   000002 676000 1                  ERQ     FPT_IOQ+2
         3 000030   000034 376000 xsym               ANQ     B_VECTNIL+28
         3 000031   000002 656000 1                  ERSQ    FPT_IOQ+2

      711     2058    1           FPT_IOQ.BUF_.BUF$=FMT$;

   2058  3 000032   200011 236100                    LDQ     FMT$,,AUTO
         3 000033   000003 756000 1                  STQ     FPT_IOQ+3

      712     2059    1           FPT_IOQ.V.WAIT#='0'B;

   2059  3 000034   000000 236000 4                  LDQ     0
         3 000035   000004 356000 1                  ANSQ    FPT_IOQ+4

      713     2060    1           TEMP$=ADDR(VIP);
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:163  

   2060  3 000036   200003 236100                    LDQ     @VIP,,AUTO
         3 000037   200012 756100                    STQ     TEMP,,AUTO

      714     2061    1           FPT_IOQ.V.EVENT#=TEMP;

   2061  3 000040   200012 235100                    LDA     TEMP,,AUTO
         3 000041   000006 755000 1                  STA     FPT_IOQ+6

      715     2062    1           CALL M$IOQ(FPT_IOQ) ALTRET(DISK_ERR);

   2062  3 000042   000000 630400 1                  EPPR0   FPT_IOQ
         3 000043   470006 713400                    CLIMB   alt,+28678
         3 000044   400400 401760                    pmme    nvectors=2
         3 000045   000125 702000 3                  TSX2    DISK_ERR

      716     2063    1           RETURN;

   2063  3 000046   000000 702200 xent               TSX2  ! X66_ARET

      717     2064        %EJECT;
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:164  
      718     2065        /**/
      719     2066        /* READ VID */
      720     2067        /**/
      721     2068    1   IVO$READ_VID: ENTRY (VIP) ALTRET;

   2068  3 000047   000000 700200 xent  IVO$READ_VID TSX0  ! X66_AUTO_1
         3 000050   000252 000001                    ZERO    170,1

      722     2069    1           FC=%N_RDBIN;

   2069  3 000051   000002 235007                    LDA     2,DL
         3 000052   200010 755100                    STA     FC,,AUTO

      723     2070    1           GOTO VID_CMN;

   2070  3 000053   000060 710000 3                  TRA     VID_CMN

      724     2071        /**/
      725     2072        /* WRITE VID */
      726     2073        /**/
      727     2074    1   IVO$WRITE_VID: ENTRY (VIP) ALTRET;

   2074  3 000054   000000 700200 xent  IVO$WRITE_V* TSX0  ! X66_AUTO_1
         3 000055   000252 000001                    ZERO    170,1

      728     2075    1           FC=%N_WRBIN;

   2075  3 000056   000003 235007                    LDA     3,DL
         3 000057   200010 755100                    STA     FC,,AUTO

      729     2076    1   VID_CMN:
      730     2077    1           IF VIP.DCBNO=0 THEN CALL GETDCB ALTRET(DISK_ERR);

   2077  3 000060   200003 470500       VID_CMN      LDP0    @VIP,,AUTO
         3 000061   000016 720100                    LXL0    14,,PR0
         3 000062   000065 601000 3                  TNZ     s:2078

PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:165  
   2077  3 000063   000730 701000 3                  TSX1    GETDCB
         3 000064   000125 702000 3                  TSX2    DISK_ERR

      731     2078    1           FPT_IOQ.V.DCB#=VIP.DCBNO;

   2078  3 000065   200003 470500                    LDP0    @VIP,,AUTO
         3 000066   000016 720100                    LXL0    14,,PR0
         3 000067   000004 740000 1                  STX0    FPT_IOQ+4

      732     2079    1           FPT_IOQ.V.DLA.DCTX#=VIP.DCTX;

   2079  3 000070   000017 236100                    LDQ     15,,PR0
         3 000071   000005 676000 1                  ERQ     FPT_IOQ+5
         3 000072   777770 376003                    ANQ     -8,DU
         3 000073   000005 656000 1                  ERSQ    FPT_IOQ+5

      733     2080    1           FPT_IOQ.BUF_.BOUND=4095;

   2080  3 000074   000002 236000 1                  LDQ     FPT_IOQ+2
         3 000075   177777 376007                    ANQ     65535,DL
         3 000076   000001 276000 4                  ORQ     1
         3 000077   000002 756000 1                  STQ     FPT_IOQ+2

      734     2081    1           FPT_IOQ.V.FC#=FC;

   2081  3 000100   200010 236100                    LDQ     FC,,AUTO
         3 000101   000014 736000                    QLS     12
         3 000102   000004 752004 1                  STCQ    FPT_IOQ+4,'04'O

      735     2082    1           FPT_IOQ.BUF_.BUF$=VIP.VID$;

   2082  3 000103   000012 236100                    LDQ     10,,PR0
         3 000104   000003 756000 1                  STQ     FPT_IOQ+3

      736     2083    1           FPT_IOQ.V.WAIT#='1'B;

   2083  3 000105   004000 236007                    LDQ     2048,DL
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:166  
         3 000106   000004 256000 1                  ORSQ    FPT_IOQ+4

      737     2084    1           FPT_IOQ.V.EVENT#=0;

   2084  3 000107   000006 450000 1                  STZ     FPT_IOQ+6

      738     2085    1           CALL M$IOQ(FPT_IOQ) ALTRET(DISK_ERR);

   2085  3 000110   000000 630400 1                  EPPR0   FPT_IOQ
         3 000111   470006 713400                    CLIMB   alt,+28678
         3 000112   400400 401760                    pmme    nvectors=2
         3 000113   000125 702000 3                  TSX2    DISK_ERR

      739     2086    2           IF DCBADDR(VIP.DCBNO)->F$DCB.TYC&~%TYC_EGV THEN DO;

   2086  3 000114   000002 470400 4                  LDP0    2
         3 000115   000000 471500                    LDP1    0,,PR0
         3 000116   200003 473500                    LDP3    @VIP,,AUTO
         3 000117   300016 720100                    LXL0    14,,PR3
         3 000120   100000 474510                    LDP4    0,X0,PR1
         3 000121   000030 236000 xsym               LDQ     B_VECTNIL+24
         3 000122   000027 676000 xsym               ERQ     B_VECTNIL+23
         3 000123   400002 376100                    ANQ     2,,PR4
         3 000124   000126 600000 3                  TZE     s:2090

      740     2087    2   DISK_ERR:
      741     2088    2              ALTRETURN;

   2088  3 000125   000000 702200 xent  DISK_ERR     TSX2  ! X66_AALT

      742     2089    2              END;
      743     2090    1           IF FC=%N_RDBIN THEN RETURN;

   2090  3 000126   200010 235100                    LDA     FC,,AUTO
         3 000127   000002 115007                    CMPA    2,DL
         3 000130   000132 601000 3                  TNZ     s:2091

PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:167  
   2090  3 000131   000000 702200 xent               TSX2  ! X66_ARET

      744     2091    1           SECTSTRT = VID.SECTSTRT;

   2091  3 000132   300012 475500                    LDP5    10,,PR3
         3 000133   000100 100500                    MLR     fill='000'O
         3 000134   500010 000150                    ADSC9   8,,PR5                   cn=0,n=104
         3 000135   200013 000150                    ADSC9   SECTSTRT,,AUTO           cn=0,n=104

      745     2092    1           DTT = VID.DTT;

   2092  3 000136   000100 100500                    MLR     fill='000'O
         3 000137   500400 000376                    ADSC9   256,,PR5                 cn=0,n=254
         3 000140   200045 000400                    ADSC9   DTT,,AUTO                cn=0,n=256

      746     2093    1           DGT = VID.DGT;

   2093  3 000141   000100 100500                    MLR     fill='000'O
         3 000142   500300 000400                    ADSC9   192,,PR5                 cn=0,n=256
         3 000143   200145 000400                    ADSC9   DGT,,AUTO                cn=0,n=256

      747     2094    2           DO I = 1 TO 25;                 /* Need to put DDT on *ALL* VIDs */

   2094  3 000144   000001 236007                    LDQ     1,DL
         3 000145   200004 756100                    STQ     I,,AUTO

      748     2095    2              IF SECTSTRT(I) = 0 OR SECTSTRT(I)>=DVT.PACKSIZE THEN GOTO RET;

   2095  3 000146   200004 720100                    LXL0    I,,AUTO
         3 000147   200013 235110                    LDA     SECTSTRT,X0,AUTO
         3 000150   000213 600000 3                  TZE     RET
         3 000151   200003 470500                    LDP0    @VIP,,AUTO
         3 000152   000002 471500                    LDP1    2,,PR0
         3 000153   200013 236110                    LDQ     SECTSTRT,X0,AUTO
         3 000154   100054 116100                    CMPQ    44,,PR1
         3 000155   000213 603000 3                  TRC     RET

PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:168  
      749     2096    2              FPT_IOQ.V.FC# = %N_RDBIN;

   2096  3 000156   020000 236007                    LDQ     8192,DL
         3 000157   000004 752004 1                  STCQ    FPT_IOQ+4,'04'O

      750     2097    2              FPT_IOQ.V.DLA.DRELADDR# = SECTSTRT(I);

   2097  3 000160   200013 236110                    LDQ     SECTSTRT,X0,AUTO
         3 000161   000005 676000 1                  ERQ     FPT_IOQ+5
         3 000162   000003 376000 4                  ANQ     3
         3 000163   000005 656000 1                  ERSQ    FPT_IOQ+5

      751     2098    2              CALL M$IOQ(FPT_IOQ) ALTRET (DISK_ERR);

   2098  3 000164   000000 630400 1                  EPPR0   FPT_IOQ
         3 000165   470006 713400                    CLIMB   alt,+28678
         3 000166   400400 401760                    pmme    nvectors=2
         3 000167   000125 702000 3                  TSX2    DISK_ERR

      752     2099    2              FPT_IOQ.V.FC# = %N_WRBIN;

   2099  3 000170   030000 236007                    LDQ     12288,DL
         3 000171   000004 752004 1                  STCQ    FPT_IOQ+4,'04'O

      753     2100    2              VID.DTT = DTT;

   2100  3 000172   200003 470500                    LDP0    @VIP,,AUTO
         3 000173   000012 471500                    LDP1    10,,PR0
         3 000174   000100 100500                    MLR     fill='000'O
         3 000175   200045 000376                    ADSC9   DTT,,AUTO                cn=0,n=254
         3 000176   100400 000376                    ADSC9   256,,PR1                 cn=0,n=254

      754     2101    2              VID.DGT = DGT;

   2101  3 000177   000012 471500                    LDP1    10,,PR0
         3 000200   000100 100500                    MLR     fill='000'O
         3 000201   200145 000400                    ADSC9   DGT,,AUTO                cn=0,n=256
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:169  
         3 000202   100300 000400                    ADSC9   192,,PR1                 cn=0,n=256

      755     2102    2              CALL M$IOQ(FPT_IOQ) ALTRET (DISK_ERR);

   2102  3 000203   000000 630400 1                  EPPR0   FPT_IOQ
         3 000204   470006 713400                    CLIMB   alt,+28678
         3 000205   400400 401760                    pmme    nvectors=2
         3 000206   000125 702000 3                  TSX2    DISK_ERR

      756     2103    2              END;

   2103  3 000207   200004 054100                    AOS     I,,AUTO
         3 000210   200004 235100                    LDA     I,,AUTO
         3 000211   000031 115007                    CMPA    25,DL
         3 000212   000146 604400 3                  TMOZ    s:2095

      757     2104    1   RET:    FPT_IOQ.V.DLA.DRELADDR# = 0;

   2104  3 000213   777770 236003       RET          LDQ     -8,DU
         3 000214   000005 356000 1                  ANSQ    FPT_IOQ+5

      758     2105    1           RETURN;

   2105  3 000215   000000 702200 xent               TSX2  ! X66_ARET

      759     2106        /**/
      760     2107        /* RELEASE DCB */
      761     2108        /**/
      762     2109    1   IVO$RELDCB: ENTRY(VIP) ALTRET;

   2109  3 000216   000000 700200 xent  IVO$RELDCB   TSX0  ! X66_AUTO_1
         3 000217   000252 000001                    ZERO    170,1

      763     2110    1           IF VIP.DCBNO ~= 0 THEN CALL RELDCB;

   2110  3 000220   200003 470500                    LDP0    @VIP,,AUTO
         3 000221   000016 720100                    LXL0    14,,PR0
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:170  
         3 000222   000225 600000 3                  TZE     s:2111

   2110  3 000223   001015 701000 3                  TSX1    RELDCB
         3 000224   000000 011000                    NOP     0

      764     2111    1           RETURN;

   2111  3 000225   000000 702200 xent               TSX2  ! X66_ARET

      765     2112        %EJECT;
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:171  
      766     2113        /**/
      767     2114        /* READ ELT */
      768     2115        /**/
      769     2116    1   IVO$READ_ELT: ENTRY (VIP) ALTRET;

   2116  3 000226   000000 700200 xent  IVO$READ_ELT TSX0  ! X66_AUTO_1
         3 000227   000252 000001                    ZERO    170,1

      770     2117    1           FC=%N_DCWLIST;

   2117  3 000230   200010 450100                    STZ     FC,,AUTO

      771     2118    1           GOTO ELT_CMN;

   2118  3 000231   000236 710000 3                  TRA     ELT_CMN

      772     2119        /**/
      773     2120        /* WRITE ELT */
      774     2121        /**/
      775     2122    1   IVO$WRITE_ELT: ENTRY (VIP) ALTRET;

   2122  3 000232   000000 700200 xent  IVO$WRITE_E* TSX0  ! X66_AUTO_1
         3 000233   000252 000001                    ZERO    170,1

      776     2123    1           FC=%N_WRBIN;

   2123  3 000234   000003 235007                    LDA     3,DL
         3 000235   200010 755100                    STA     FC,,AUTO

      777     2124    1   ELT_CMN:
      778     2125    1           IF VIP.DCBNO=0 THEN CALL GETDCB ALTRET(DISK_ERR);

   2125  3 000236   200003 470500       ELT_CMN      LDP0    @VIP,,AUTO
         3 000237   000016 720100                    LXL0    14,,PR0
         3 000240   000243 601000 3                  TNZ     s:2126

   2125  3 000241   000730 701000 3                  TSX1    GETDCB
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:172  
         3 000242   000125 702000 3                  TSX2    DISK_ERR

      779     2126    1           FPT_IOQ.V.DCB#=VIP.DCBNO;

   2126  3 000243   200003 470500                    LDP0    @VIP,,AUTO
         3 000244   000016 720100                    LXL0    14,,PR0
         3 000245   000004 740000 1                  STX0    FPT_IOQ+4

      780     2127    1           FPT_IOQ.V.DLA.DCTX#=VIP.DCTX;

   2127  3 000246   000017 236100                    LDQ     15,,PR0
         3 000247   000005 676000 1                  ERQ     FPT_IOQ+5
         3 000250   777770 376003                    ANQ     -8,DU
         3 000251   000005 656000 1                  ERSQ    FPT_IOQ+5

      781     2128    1           FPT_IOQ.BUF_.BOUND=ELT.BOUND;

   2128  3 000252   000003 471500                    LDP1    3,,PR0
         3 000253   100010 236100                    LDQ     8,,PR1
         3 000254   000020 736000                    QLS     16
         3 000255   000002 676000 1                  ERQ     FPT_IOQ+2
         3 000256   000034 376000 xsym               ANQ     B_VECTNIL+28
         3 000257   000002 656000 1                  ERSQ    FPT_IOQ+2

      782     2129    1           FPT_IOQ.V.FC#=FC;

   2129  3 000260   200010 236100                    LDQ     FC,,AUTO
         3 000261   000014 736000                    QLS     12
         3 000262   000004 752004 1                  STCQ    FPT_IOQ+4,'04'O

      783     2130    1           FPT_IOQ.BUF_.BUF$=VIP.ELT$;

   2130  3 000263   000003 236100                    LDQ     3,,PR0
         3 000264   000003 756000 1                  STQ     FPT_IOQ+3

      784     2131    1           FPT_IOQ.V.WAIT#='1'B;

PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:173  
   2131  3 000265   004000 236007                    LDQ     2048,DL
         3 000266   000004 256000 1                  ORSQ    FPT_IOQ+4

      785     2132    1           FPT_IOQ.V.EVENT#=0;

   2132  3 000267   000006 450000 1                  STZ     FPT_IOQ+6

      786     2133    1           CALL M$IOQ(FPT_IOQ) ALTRET(DISK_ERR);

   2133  3 000270   000000 630400 1                  EPPR0   FPT_IOQ
         3 000271   470006 713400                    CLIMB   alt,+28678
         3 000272   400400 401760                    pmme    nvectors=2
         3 000273   000125 702000 3                  TSX2    DISK_ERR

      787     2134    2           IF DCBADDR(VIP.DCBNO)->F$DCB.TYC&~%TYC_EGV THEN DO;

   2134  3 000274   000002 470400 4                  LDP0    2
         3 000275   000000 471500                    LDP1    0,,PR0
         3 000276   200003 473500                    LDP3    @VIP,,AUTO
         3 000277   300016 720100                    LXL0    14,,PR3
         3 000300   100000 474510                    LDP4    0,X0,PR1
         3 000301   000030 236000 xsym               LDQ     B_VECTNIL+24
         3 000302   000027 676000 xsym               ERQ     B_VECTNIL+23
         3 000303   400002 376100                    ANQ     2,,PR4
         3 000304   000306 600000 3                  TZE     s:2137

      788     2135    2              ALTRETURN;

   2135  3 000305   000000 702200 xent               TSX2  ! X66_AALT

      789     2136    2              END;
      790     2137    1           RETURN;

   2137  3 000306   000000 702200 xent               TSX2  ! X66_ARET

      791     2138        %EJECT;
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:174  
      792     2139        /**/
      793     2140        /* VERIFY FORMAT */
      794     2141        /**/
      795     2142    1   IVO$VERIFY_FMT: ENTRY(VIP) ALTRET;

   2142  3 000307   000000 700200 xent  IVO$VERIFY_* TSX0  ! X66_AUTO_1
         3 000310   000252 000001                    ZERO    170,1

      796     2143    2           DO I = 0 TO 139;

   2143  3 000311   200004 450100                    STZ     I,,AUTO

      797     2144    2              IOQBUF.DATA(I) = 0;          /* CLEAR BUFFER */

   2144  3 000312   200004 720100                    LXL0    I,,AUTO
         3 000313   000012 450010 1                  STZ     IOQBUF+2,X0

      798     2145    2              END;

   2145  3 000314   200004 054100                    AOS     I,,AUTO
         3 000315   200004 235100                    LDA     I,,AUTO
         3 000316   000213 115007                    CMPA    139,DL
         3 000317   000312 604400 3                  TMOZ    s:2144

      799     2146    1           IF VIP.DCBNO = 0 THEN CALL GETDCB ALTRET(DISK_ERR);

   2146  3 000320   200003 470500                    LDP0    @VIP,,AUTO
         3 000321   000016 720100                    LXL0    14,,PR0
         3 000322   000325 601000 3                  TNZ     s:2147

   2146  3 000323   000730 701000 3                  TSX1    GETDCB
         3 000324   000125 702000 3                  TSX2    DISK_ERR

      800     2147    1           FPT_IOQ.V.DCB# = VIP.DCBNO;

   2147  3 000325   200003 470500                    LDP0    @VIP,,AUTO
         3 000326   000016 720100                    LXL0    14,,PR0
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:175  
         3 000327   000004 740000 1                  STX0    FPT_IOQ+4

      801     2148    1           FPT_IOQ.V.DLA.DCTX# = VIP.MPC_DCTX;

   2148  3 000330   000021 236100                    LDQ     17,,PR0
         3 000331   000011 736000                    QLS     9
         3 000332   000005 676000 1                  ERQ     FPT_IOQ+5
         3 000333   777770 376003                    ANQ     -8,DU
         3 000334   000005 656000 1                  ERSQ    FPT_IOQ+5

      802     2149    1           FPT_IOQ.V.FC# = %N_DCWLIST;

   2149  3 000335   000000 236003                    LDQ     0,DU
         3 000336   000004 752004 1                  STCQ    FPT_IOQ+4,'04'O

      803     2150    1           FPT_IOQ.BUF_ = VECTOR(IOQBUF);

   2150  3 000337   000004 237000 4                  LDAQ    4
         3 000340   000002 757000 1                  STAQ    FPT_IOQ+2

      804     2151    1           IOQBUF.DCW.OFFSET = POFFW( ADDR(IOQBUF.DATA), ADDR(IOQBUF));

   2151  3 000341   000005 236000 4                  LDQ     5
         3 000342   000022 772000                    QRL     18
         3 000343   200250 756100                    STQ     I+1,,AUTO
         3 000344   000006 236000 4                  LDQ     6
         3 000345   000022 772000                    QRL     18
         3 000346   200250 136100                    SBLQ    I+1,,AUTO
         3 000347   000000 620006                    EAX0    0,QL
         3 000350   000011 740000 1                  STX0    IOQBUF+1

      805     2152    1           CALL M$IOQ(FPT_IOQ) ALTRET(DISK_ERR);

   2152  3 000351   000000 630400 1                  EPPR0   FPT_IOQ
         3 000352   470006 713400                    CLIMB   alt,+28678
         3 000353   400400 401760                    pmme    nvectors=2
         3 000354   000125 702000 3                  TSX2    DISK_ERR
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:176  

      806     2153    2           DO SELECT (VIP.MODEL);

   2153  3 000355   200003 470500                    LDP0    @VIP,,AUTO
         3 000356   040000 106500                    CMPC    fill='040'O
         3 000357   000007 000010                    ADSC9   7,,PR0                   cn=0,n=8
         3 000360   000000 000010 2                  ADSC9   0                        cn=0,n=8
         3 000361   000414 602000 3                  TNC     s:2153+31
         3 000362   000525 600000 3                  TZE     s:2172
         3 000363   040000 106500                    CMPC    fill='040'O
         3 000364   000007 000010                    ADSC9   7,,PR0                   cn=0,n=8
         3 000365   000002 000010 2                  ADSC9   2                        cn=0,n=8
         3 000366   000375 602000 3                  TNC     s:2153+16
         3 000367   000452 600000 3                  TZE     s:2155
         3 000370   040000 106500                    CMPC    fill='040'O
         3 000371   000007 000010                    ADSC9   7,,PR0                   cn=0,n=8
         3 000372   000004 000010 2                  ADSC9   4                        cn=0,n=8
         3 000373   000727 601000 3                  TNZ     s:2218
         3 000374   000452 710000 3                  TRA     s:2155
         3 000375   040000 106500                    CMPC    fill='040'O
         3 000376   000007 000010                    ADSC9   7,,PR0                   cn=0,n=8
         3 000377   000006 000010 2                  ADSC9   6                        cn=0,n=8
         3 000400   000407 602000 3                  TNC     s:2153+26
         3 000401   000525 600000 3                  TZE     s:2172
         3 000402   040000 106500                    CMPC    fill='040'O
         3 000403   000007 000010                    ADSC9   7,,PR0                   cn=0,n=8
         3 000404   000010 000010 2                  ADSC9   8                        cn=0,n=8
         3 000405   000727 601000 3                  TNZ     s:2218
         3 000406   000525 710000 3                  TRA     s:2172
         3 000407   040000 106500                    CMPC    fill='040'O
         3 000410   000007 000010                    ADSC9   7,,PR0                   cn=0,n=8
         3 000411   000012 000010 2                  ADSC9   10                       cn=0,n=8
         3 000412   000727 601000 3                  TNZ     s:2218
         3 000413   000525 710000 3                  TRA     s:2172
         3 000414   040000 106500                    CMPC    fill='040'O
         3 000415   000007 000010                    ADSC9   7,,PR0                   cn=0,n=8
         3 000416   000014 000010 2                  ADSC9   12                       cn=0,n=8
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:177  
         3 000417   000433 602000 3                  TNC     s:2153+46
         3 000420   000525 600000 3                  TZE     s:2172
         3 000421   040000 106500                    CMPC    fill='040'O
         3 000422   000007 000010                    ADSC9   7,,PR0                   cn=0,n=8
         3 000423   000016 000010 2                  ADSC9   14                       cn=0,n=8
         3 000424   000727 602000 3                  TNC     s:2218
         3 000425   000525 600000 3                  TZE     s:2172
         3 000426   040000 106500                    CMPC    fill='040'O
         3 000427   000007 000010                    ADSC9   7,,PR0                   cn=0,n=8
         3 000430   000020 000010 2                  ADSC9   16                       cn=0,n=8
         3 000431   000727 601000 3                  TNZ     s:2218
         3 000432   000525 710000 3                  TRA     s:2172
         3 000433   040000 106500                    CMPC    fill='040'O
         3 000434   000007 000010                    ADSC9   7,,PR0                   cn=0,n=8
         3 000435   000022 000010 2                  ADSC9   18                       cn=0,n=8
         3 000436   000445 602000 3                  TNC     s:2153+56
         3 000437   000566 600000 3                  TZE     s:2185
         3 000440   040000 106500                    CMPC    fill='040'O
         3 000441   000007 000010                    ADSC9   7,,PR0                   cn=0,n=8
         3 000442   000024 000010 2                  ADSC9   20                       cn=0,n=8
         3 000443   000727 601000 3                  TNZ     s:2218
         3 000444   000525 710000 3                  TRA     s:2172
         3 000445   040000 106500                    CMPC    fill='040'O
         3 000446   000007 000010                    ADSC9   7,,PR0                   cn=0,n=8
         3 000447   000026 000010 2                  ADSC9   22                       cn=0,n=8
         3 000450   000727 601000 3                  TNZ     s:2218
         3 000451   000566 710000 3                  TRA     s:2185

      807     2154    2              SELECT('MSU8082 ', 'MSU8092 '); /* MDS DISKS */

      808     2155    2              DEV_NUM = VIP.DVN;

   2155  3 000452   000021 236100                    LDQ     17,,PR0
         3 000453   200007 552140                    STBQ    DEV_NUM,'40'O,AUTO

      809     2156    2              I = BITBIN(MDS_ADDR.CM#);    /* I = CM# */

PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:178  
   2156  3 000454   200007 236100                    LDQ     DEV_NUM,,AUTO
         3 000455   000036 772000                    QRL     30
         3 000456   000007 376007                    ANQ     7,DL
         3 000457   200004 756100                    STQ     I,,AUTO

      810     2157    2              J = BITBIN(MDS_ADDR.DEV#);   /* J = REL DEVICE # */

   2157  3 000460   200007 236100                    LDQ     DEV_NUM,,AUTO
         3 000461   000033 772000                    QRL     27
         3 000462   000007 376007                    ANQ     7,DL
         3 000463   200005 756100                    STQ     J,,AUTO

      811     2158    2              PTR$ = PINCRW( ADDR(IOQBUF.DATA), (I*17 + J + 1) );

   2158  3 000464   200004 236100                    LDQ     I,,AUTO
         3 000465   000021 402007                    MPY     17,DL
         3 000466   200005 036100                    ADLQ    J,,AUTO
         3 000467   000013 631406 1                  EPPR1   IOQBUF+3,QL
         3 000470   200006 451500                    STP1    PTR$,,AUTO

      812     2159    2              IF MDS_ENTRY.STATUS ~= BITBIN('377'O) /* DEVICE ON-LINE? */

   2159  3 000471   100000 236100                    LDQ     0,,PR1
         3 000472   777000 376003                    ANQ     -512,DU
         3 000473   377000 116003                    CMPQ    130560,DU
         3 000474   000507 600000 3                  TZE     s:2164

      813     2160    3              THEN DO;

      814     2161    3                 CALL IVV$ERROR(VIP.DEVID,34);

   2161  3 000475   000010 236000 4                  LDQ     8
         3 000476   200251 756100                    STQ     I+2,,AUTO
         3 000477   200003 236100                    LDQ     @VIP,,AUTO
         3 000500   000005 036003                    ADLQ    5,DU
         3 000501   200250 756100                    STQ     I+1,,AUTO
         3 000502   200250 630500                    EPPR0   I+1,,AUTO
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:179  
         3 000503   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000504   000000 701000 xent               TSX1    IVV$ERROR
         3 000505   000000 011000                    NOP     0

      815     2162    3                 ALTRETURN;

   2162  3 000506   000000 702200 xent               TSX2  ! X66_AALT

      816     2163    3                 END;
      817     2164    2              IF MDS_ENTRY.FORMAT ~= BITBIN('002'O) /* 512 WORDS/SECTOR ? */

   2164  3 000507   100000 236100                    LDQ     0,,PR1
         3 000510   777000 376007                    ANQ     -512,DL
         3 000511   002000 116007                    CMPQ    1024,DL
         3 000512   000727 600000 3                  TZE     s:2218

      818     2165    3              THEN DO;

      819     2166    3                 CALL IVV$ERROR(VIP.DEVID, 29);

   2166  3 000513   000012 236000 4                  LDQ     10
         3 000514   200251 756100                    STQ     I+2,,AUTO
         3 000515   200003 236100                    LDQ     @VIP,,AUTO
         3 000516   000005 036003                    ADLQ    5,DU
         3 000517   200250 756100                    STQ     I+1,,AUTO
         3 000520   200250 630500                    EPPR0   I+1,,AUTO
         3 000521   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000522   000000 701000 xent               TSX1    IVV$ERROR
         3 000523   000000 011000                    NOP     0

      820     2167    3                 ALTRETURN;

   2167  3 000524   000000 702200 xent               TSX2  ! X66_AALT

      821     2168    3                 END;
      822     2169    2              SELECT ('MSU3380 ', 'MSU3382 ', 'MSU3390 ', /* FIPS DISKS */

PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:180  
      823     2170    2                'MSU3392 ', 'MSU3391 ', 'MSU3393 ',
      824     2171    2                'MSU3381 ', 'MSU3383 ');
      825     2172    2              I = VIP.DVN;                 /* I = DEVICE # */

   2172  3 000525   000021 236100                    LDQ     17,,PR0
         3 000526   000033 772000                    QRL     27
         3 000527   200004 756100                    STQ     I,,AUTO

      826     2173    2              PTR$ = PINCRW( ADDR(IOQBUF.DATA), I);

   2173  3 000530   000012 631406 1                  EPPR1   IOQBUF+2,QL
         3 000531   200006 451500                    STP1    PTR$,,AUTO

      827     2174    2              IF FIPS_ENTRY.STATUS ~= BITBIN('377'O) /* DEVICE ON-LINE? */

   2174  3 000532   100000 236100                    LDQ     0,,PR1
         3 000533   777000 376003                    ANQ     -512,DU
         3 000534   377000 116003                    CMPQ    130560,DU
         3 000535   000550 600000 3                  TZE     s:2179

      828     2175    3              THEN DO;

      829     2176    3                 CALL IVV$ERROR(VIP.DEVID,34);

   2176  3 000536   000010 236000 4                  LDQ     8
         3 000537   200251 756100                    STQ     I+2,,AUTO
         3 000540   200003 236100                    LDQ     @VIP,,AUTO
         3 000541   000005 036003                    ADLQ    5,DU
         3 000542   200250 756100                    STQ     I+1,,AUTO
         3 000543   200250 630500                    EPPR0   I+1,,AUTO
         3 000544   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000545   000000 701000 xent               TSX1    IVV$ERROR
         3 000546   000000 011000                    NOP     0

      830     2177    3                 ALTRETURN;

   2177  3 000547   000000 702200 xent               TSX2  ! X66_AALT
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:181  

      831     2178    3                 END;
      832     2179    2              IF FIPS_ENTRY.FORMAT ~= BITBIN('002'O) /* 512 WORDS/SECTOR? */

   2179  3 000550   100000 236100                    LDQ     0,,PR1
         3 000551   777000 376007                    ANQ     -512,DL
         3 000552   002000 116007                    CMPQ    1024,DL
         3 000553   000727 600000 3                  TZE     s:2218

      833     2180    3              THEN DO;

      834     2181    3                 CALL IVV$ERROR(VIP.DEVID, 30);

   2181  3 000554   000014 236000 4                  LDQ     12
         3 000555   200251 756100                    STQ     I+2,,AUTO
         3 000556   200003 236100                    LDQ     @VIP,,AUTO
         3 000557   000005 036003                    ADLQ    5,DU
         3 000560   200250 756100                    STQ     I+1,,AUTO
         3 000561   200250 630500                    EPPR0   I+1,,AUTO
         3 000562   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000563   000000 701000 xent               TSX1    IVV$ERROR
         3 000564   000000 011000                    NOP     0

      835     2182    3                 ALTRETURN;

   2182  3 000565   000000 702200 xent               TSX2  ! X66_AALT

      836     2183    3                 END;
      837     2184    2              SELECT ('MSU0501 ', 'MSU0509 '); /* 501 DISKS */

      838     2185    2              IF VIP.MPC_TYPE = #DAU

   2185  3 000566   000021 236100                    LDQ     17,,PR0
         3 000567   000777 376007                    ANQ     511,DL
         3 000570   000001 116007                    CMPQ    1,DL
         3 000571   000646 601000 3                  TNZ     s:2203

PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:182  
      839     2186    3              THEN DO;                     /* DAU CONTROLLER */

      840     2187    4                 DO I = 1 TO 32;

   2187  3 000572   000001 235007                    LDA     1,DL
         3 000573   200004 755100                    STA     I,,AUTO

      841     2188    4                    PTR$ = PINCRW (ADDR(IOQBUF.DATA), I);

   2188  3 000574   200004 720100                    LXL0    I,,AUTO
         3 000575   000012 630410 1                  EPPR0   IOQBUF+2,X0
         3 000576   200006 450500                    STP0    PTR$,,AUTO

      842     2189    4                    IF DAU_ENTRY.DEV_NUM = VIP.DVN

   2189  3 000577   200003 471500                    LDP1    @VIP,,AUTO
         3 000600   100021 236100                    LDQ     17,,PR1
         3 000601   000033 772000                    QRL     27
         3 000602   200250 756100                    STQ     I+1,,AUTO
         3 000603   000000 236100                    LDQ     0,,PR0
         3 000604   000022 772000                    QRL     18
         3 000605   000777 376007                    ANQ     511,DL
         3 000606   200250 116100                    CMPQ    I+1,,AUTO
         3 000607   000626 600000 3                  TZE     DEVICE_MATCH1

      843     2190    4                    THEN GOTO DEVICE_MATCH1;
      844     2191    4                    END;                   /*  DO I */

   2191  3 000610   200004 054100                    AOS     I,,AUTO
         3 000611   200004 235100                    LDA     I,,AUTO
         3 000612   000040 115007                    CMPA    32,DL
         3 000613   000574 604400 3                  TMOZ    s:2188

      845     2192    3                 CALL IVV$ERROR(VIP.DEVID, 34); /* DEVICE NOT CONFIGURED */

   2192  3 000614   000010 236000 4                  LDQ     8
         3 000615   200251 756100                    STQ     I+2,,AUTO
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:183  
         3 000616   200003 236100                    LDQ     @VIP,,AUTO
         3 000617   000005 036003                    ADLQ    5,DU
         3 000620   200250 756100                    STQ     I+1,,AUTO
         3 000621   200250 630500                    EPPR0   I+1,,AUTO
         3 000622   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000623   000000 701000 xent               TSX1    IVV$ERROR
         3 000624   000000 011000                    NOP     0

      846     2193    3                 ALTRETURN;

   2193  3 000625   000000 702200 xent               TSX2  ! X66_AALT

      847     2194    3   DEVICE_MATCH1:
      848     2195    3                 IF NOT (DAU_ENTRY.DEV_TYPE = BITBIN(#501N_SP) OR

   2195  3 000626   000000 236100       DEVICE_MATC* LDQ     0,,PR0
         3 000627   777000 376003                    ANQ     -512,DU
         3 000630   331000 116003                    CMPQ    111104,DU
         3 000631   000727 600000 3                  TZE     s:2218
         3 000632   333000 116003                    CMPQ    112128,DU
         3 000633   000727 600000 3                  TZE     s:2218

      849     2196    3                   DAU_ENTRY.DEV_TYPE = BITBIN(#501N_DP))
      850     2197    4                 THEN DO;

      851     2198    4                    CALL IVV$ERROR(VIP.DEVID, 31); /* NOT A 501N DEVICE */

   2198  3 000634   000016 236000 4                  LDQ     14
         3 000635   200251 756100                    STQ     I+2,,AUTO
         3 000636   200003 236100                    LDQ     @VIP,,AUTO
         3 000637   000005 036003                    ADLQ    5,DU
         3 000640   200250 756100                    STQ     I+1,,AUTO
         3 000641   200250 630500                    EPPR0   I+1,,AUTO
         3 000642   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000643   000000 701000 xent               TSX1    IVV$ERROR
         3 000644   000000 011000                    NOP     0

PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:184  
      852     2199    4                    ALTRETURN;

   2199  3 000645   000000 702200 xent               TSX2  ! X66_AALT

      853     2200    4                    END;
      854     2201    3                 END;
      855     2202    3              ELSE DO;                     /* MPC CONTROLLER */

      856     2203    4                 DO I = 0 TO 65;

   2203  3 000646   200004 450100                    STZ     I,,AUTO

      857     2204    4                    IF IOQBUF.DATA_MPC.TABLE_ENTRY.DEV_NUM(I) = VIP.DVN

   2204  3 000647   200003 470500                    LDP0    @VIP,,AUTO
         3 000650   000021 236100                    LDQ     17,,PR0
         3 000651   000033 772000                    QRL     27
         3 000652   200250 756100                    STQ     I+1,,AUTO
         3 000653   200004 235100                    LDA     I,,AUTO
         3 000654   000001 735000                    ALS     1
         3 000655   000100 101405                    MRL     fill='000'O
         3 000656   000012 200001 1                  ADSC9   IOQBUF+2,A               cn=1,n=1
         3 000657   200251 000004                    ADSC9   I+2,,AUTO                cn=0,n=4
         3 000660   200251 236100                    LDQ     I+2,,AUTO
         3 000661   200250 116100                    CMPQ    I+1,,AUTO
         3 000662   000701 600000 3                  TZE     DEVICE_MATCH2

      858     2205    4                    THEN GOTO DEVICE_MATCH2;
      859     2206    4                    END;

   2206  3 000663   200004 054100                    AOS     I,,AUTO
         3 000664   200004 235100                    LDA     I,,AUTO
         3 000665   000101 115007                    CMPA    65,DL
         3 000666   000647 604400 3                  TMOZ    s:2204

      860     2207    3                 CALL IVV$ERROR(VIP.DEVID, 34); /* DEVICE NOT CONFIGURED */

PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:185  
   2207  3 000667   000010 236000 4                  LDQ     8
         3 000670   200251 756100                    STQ     I+2,,AUTO
         3 000671   200003 236100                    LDQ     @VIP,,AUTO
         3 000672   000005 036003                    ADLQ    5,DU
         3 000673   200250 756100                    STQ     I+1,,AUTO
         3 000674   200250 630500                    EPPR0   I+1,,AUTO
         3 000675   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000676   000000 701000 xent               TSX1    IVV$ERROR
         3 000677   000000 011000                    NOP     0

      861     2208    3                 ALTRETURN;

   2208  3 000700   000000 702200 xent               TSX2  ! X66_AALT

      862     2209    3   DEVICE_MATCH2:
      863     2210    3                 IF NOT (IOQBUF.DATA_MPC.TABLE_ENTRY.DEV_TYPE(I) = BITBIN(#501N_SP) OR

   2210  3 000701   000100 101405       DEVICE_MATC* MRL     fill='000'O
         3 000702   000012 000001 1                  ADSC9   IOQBUF+2,A               cn=0,n=1
         3 000703   200250 000004                    ADSC9   I+1,,AUTO                cn=0,n=4
         3 000704   200250 236100                    LDQ     I+1,,AUTO
         3 000705   000331 116007                    CMPQ    217,DL
         3 000706   000727 600000 3                  TZE     s:2218
         3 000707   000100 101405                    MRL     fill='000'O
         3 000710   000012 000001 1                  ADSC9   IOQBUF+2,A               cn=0,n=1
         3 000711   200251 000004                    ADSC9   I+2,,AUTO                cn=0,n=4
         3 000712   200251 236100                    LDQ     I+2,,AUTO
         3 000713   000333 116007                    CMPQ    219,DL
         3 000714   000727 600000 3                  TZE     s:2218

      864     2211    3                   IOQBUF.DATA_MPC.TABLE_ENTRY.DEV_TYPE(I) = BITBIN(#501N_DP))
      865     2212    4                 THEN DO;                  /* NOT A 501N DEVICE */

      866     2213    4                    CALL IVV$ERROR(VIP.DEVID, 31);

   2213  3 000715   000016 236000 4                  LDQ     14
         3 000716   200251 756100                    STQ     I+2,,AUTO
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:186  
         3 000717   200003 236100                    LDQ     @VIP,,AUTO
         3 000720   000005 036003                    ADLQ    5,DU
         3 000721   200250 756100                    STQ     I+1,,AUTO
         3 000722   200250 630500                    EPPR0   I+1,,AUTO
         3 000723   000020 631400 xsym               EPPR1   B_VECTNIL+16
         3 000724   000000 701000 xent               TSX1    IVV$ERROR
         3 000725   000000 011000                    NOP     0

      867     2214    4                    ALTRETURN;

   2214  3 000726   000000 702200 xent               TSX2  ! X66_AALT

      868     2215    4                    END;
      869     2216    3                 END;                      /* ELSE DO */
      870     2217    2              END;                         /* DO SELECT */

      871     2218    1           RETURN;

   2218  3 000727   000000 702200 xent               TSX2  ! X66_ARET

      872     2219        %EJECT;
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:187  
      873     2220        /**/
      874     2221        /* GET AND RELEASE DCB FOR DISK ACCESS */
      875     2222        /**/
      876     2223    1   GETDCB: PROC ALTRET;

   2223  3 000730   200246 741300       GETDCB       STX1  ! DGT+65,,AUTO

      877     2224        /**/
      878     2225        /* STATIC DATA */
      879     2226        /**/
      880     2227    2   DCL 1 F$DP STATIC,
      881     2228    2         2 LEN UBIN BYTE UNAL,
      882     2229    2         2 TEXT CHAR(11) INIT('F$');
      883     2230    2   DCL 1 T$DP STATIC,
      884     2231    2         2 LEN UBIN BYTE UNAL INIT(5),
      885     2232    2         2 TEXT CHAR(5) INIT('T$TND');
      886     2233        %FPT_GETDCB(FPTN=GET_IO_DCB, DCBNAME=F$DP);
      887     2248        %FPT_GETDCB(FPTN=GET_TD_DCB, DCBNAME=T$DP);
      888     2263        %FPT_TDOPEN (TEST=POLTS);
      889     2280        %FPT_TDCLOSE;
      890     2294        %FPT_RELDCB;
      891     2308        /**/
      892     2309        /* AUTO STACK */
      893     2310        /**/
      894     2311    2   DCL I SBIN;
      895     2312        /**/
      896     2313        /* GET DCB */
      897     2314        /**/
      898     2315    2           CALL INSERT(F$DP.TEXT,2,,VIP.DEVID);

   2315  3 000731   200003 470500                    LDP0    @VIP,,AUTO
         3 000732   040000 100500                    MLR     fill='040'O
         3 000733   000005 000010                    ADSC9   5,,PR0                   cn=0,n=8
         3 000734   000226 600011 1                  ADSC9   F$DP                     cn=3,n=9

      899     2316    2           CALL INDEX(I,' ',F$DP.TEXT);

PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:188  
   2316  3 000735   000000 124400                    SCM     mask='000'O
         3 000736   000226 200013 1                  ADSC9   F$DP                     cn=1,n=11
         3 000737   000035 000001 xsym               ADSC9   B_VECTNIL+29             cn=0,n=1
         3 000740   200247 000100                    ARG     I,,AUTO

      900     2317    2           F$DP.LEN=I;

   2317  3 000741   200247 236100                    LDQ     I,,AUTO
         3 000742   000033 736000                    QLS     27
         3 000743   000226 552040 1                  STBQ    F$DP,'40'O

      901     2318    2           CALL M$GETDCB(GET_IO_DCB) ALTRET(NODCB);

   2318  3 000744   000234 630400 1                  EPPR0   GET_IO_DCB
         3 000745   460002 713400                    CLIMB   alt,+24578
         3 000746   401000 401760                    pmme    nvectors=3
         3 000747   001013 702000 3                  TSX2    NODCB

      902     2319    2           VIP.DCBNO=GET_IO_DCB.V.DCB#;

   2319  3 000750   000242 220000 1                  LDX0    GET_IO_DCB+6
         3 000751   200003 470500                    LDP0    @VIP,,AUTO
         3 000752   000016 440100                    SXL0    14,,PR0

      903     2320    2           IF GET_TD_DCB.V.DCB# = 0   /* DO WE ALREADY HAVE A DCB# FOR TND I/O? */

   2320  3 000753   000252 221000 1                  LDX1    GET_TD_DCB+6
         3 000754   000765 601000 3                  TNZ     s:2326

      904     2321    3           THEN DO;                        /* NO- GET ONE */

      905     2322    3              CALL M$GETDCB (GET_TD_DCB) ALTRET (NODCB);

   2322  3 000755   000244 630400 1                  EPPR0   GET_TD_DCB
         3 000756   460002 713400                    CLIMB   alt,+24578
         3 000757   401000 401760                    pmme    nvectors=3
         3 000760   001013 702000 3                  TSX2    NODCB
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:189  

      906     2323    3              FPT_TDOPEN.V.DCB# = GET_TD_DCB.V.DCB#;

   2323  3 000761   000252 220000 1                  LDX0    GET_TD_DCB+6
         3 000762   000264 740000 1                  STX0    FPT_TDOPEN+8

      907     2324    3              FPT_TDCLOSE.V.DCB# = GET_TD_DCB.V.DCB#;

   2324  3 000763   000272 740000 1                  STX0    FPT_TDCLOSE+2

      908     2325    3              END;

   2325  3 000764   000770 710000 3                  TRA     s:2327

      909     2326    2           ELSE CALL M$TDCLOSE (FPT_TDCLOSE);
              2326                    /* YES- USE THE SAME DCB# FOR THIS DEVICE */

   2326  3 000765   000270 630400 1                  EPPR0   FPT_TDCLOSE
         3 000766   070003 713400                    CLIMB   28675
         3 000767   400000 401760                    pmme    nvectors=1

      910     2327    2           FPT_TDOPEN.V.DEVICE.IOM# = VIP.IOCHAN.IOM;

   2327  3 000770   200003 470500                    LDP0    @VIP,,AUTO
         3 000771   000020 236100                    LDQ     16,,PR0
         3 000772   000600 376007                    ANQ     384,DL
         3 000773   000002 736000                    QLS     2
         3 000774   000264 676000 1                  ERQ     FPT_TDOPEN+8
         3 000775   007000 376007                    ANQ     3584,DL
         3 000776   000264 656000 1                  ERSQ    FPT_TDOPEN+8

      911     2328    2           FPT_TDOPEN.V.DEVICE.CHAN# = VIP.IOCHAN.CHAN;

   2328  3 000777   000020 236100                    LDQ     16,,PR0
         3 001000   000177 376007                    ANQ     127,DL
         3 001001   000264 552004 1                  STBQ    FPT_TDOPEN+8,'04'O

PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:190  
      912     2329    2           FPT_TDOPEN.V.DEVICE.DVN# = VIP.DVN;

   2329  3 001002   000021 236100                    LDQ     17,,PR0
         3 001003   000017 772000                    QRL     15
         3 001004   000264 752004 1                  STCQ    FPT_TDOPEN+8,'04'O

      913     2330    2           CALL M$TDOPEN (FPT_TDOPEN) ALTRET (NODCB);

   2330  3 001005   000254 630400 1                  EPPR0   FPT_TDOPEN
         3 001006   470002 713400                    CLIMB   alt,+28674
         3 001007   401400 401760                    pmme    nvectors=4
         3 001010   001013 702000 3                  TSX2    NODCB

      914     2331    2           RETURN;

   2331  3 001011   200246 221300                    LDX1  ! DGT+65,,AUTO
         3 001012   000001 702211                    TSX2  ! 1,X1

      915     2332        /**/
      916     2333    2   NODCB:
      917     2334    2           ALTRETURN;

   2334  3 001013   200246 221300       NODCB        LDX1  ! DGT+65,,AUTO
         3 001014   000000 702211                    TSX2  ! 0,X1

      918     2335        /**/
      919     2336        /* RELEASE DCB */
      920     2337        /**/
      921     2338    2   RELDCB: ENTRY ALTRET;

   2338  3 001015   200246 741300       RELDCB       STX1  ! DGT+65,,AUTO

      922     2339    2           FPT_RELDCB.V.DCB#=VIP.DCBNO;

   2339  3 001016   200003 470500                    LDP0    @VIP,,AUTO
         3 001017   000016 720100                    LXL0    14,,PR0
         3 001020   000276 740000 1                  STX0    FPT_RELDCB+2
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:191  

      923     2340    2           CALL M$RELDCB(FPT_RELDCB);

   2340  3 001021   000274 630400 1                  EPPR0   FPT_RELDCB
         3 001022   060003 713400                    CLIMB   24579
         3 001023   400000 401760                    pmme    nvectors=1

      924     2341    2           RETURN;

   2341  3 001024   200246 221300                    LDX1  ! DGT+65,,AUTO
         3 001025   000001 702211                    TSX2  ! 1,X1
      925     2342    2   END GETDCB;
      926     2343    1   END IVO$QUEIO;
      927     2344        %EOD;

PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:192  
--  Include file information  --

   IV_SUBS_C.:E05TOU  is referenced.
   FM$GRAN.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   N_FC_C.:E05TOU  is referenced.
   IV$MACROS.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IVO$QUEIO.
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:193  

 **** Variables and constants ****

  ****  Section 001  Data  IVO$QUEIO

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

   226-0-0/c STRC(108)   r     1 F$DP                       0-0-0/d STRC(288)   r     1 FPT_IOQ
   274-0-0/d STRC(144)   r     1 FPT_RELDCB               270-0-0/d STRC(144)   r     1 FPT_TDCLOSE
   254-0-0/d STRC(432)   r     1 FPT_TDOPEN               234-0-0/d STRC(288)   r     1 GET_IO_DCB
   244-0-0/d STRC(288)   r     1 GET_TD_DCB                10-0-0/d STRC(5112)  r     1 IOQBUF
   231-0-0/c STRC(54)    r     1 T$DP

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @VIP                       7-0-0/c UBIN(9)     r     1 DEV_NUM
   145-0-0/w UBIN        r     1 DGT(0:63)                 45-0-0/w UBIN        r     1 DTT(0:63)
    10-0-0/w SBIN        r     1 FC                        11-0-0/w PTR         r     1 FMT$
     4-0-0/w SBIN        r     1 I                        247-0-0/w SBIN        r     1 I
     5-0-0/w SBIN        r     1 J                          7-0-0/c STRC(9)     r     1 MDS_ADDR
     6-0-0/w PTR         r     1 PTR$
    13-0-0/w UBIN        r     1 SECTSTRT(0:25)
    12-0-0/w SBIN        r     1 TEMP                      12-0-0/w PTR         r     1 TEMP$
    *0-0-0/w STRC(3024)  r     1 VIP

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC        r     1 DAU_ENTRY                  0-0-0/w STRC(2844)  r     1 DVT
     0-0-0/w STRC(828)   r     1 ELT                        0-0-0/d ASTR(3528)  r     1 F$DCB
     0-0-0/w STRC        r     1 FIPS_ENTRY                 0-0-0/w STRC(828)   r     1 FMT
     0-0-0/w STRC        r     1 MDS_ENTRY                  0-0-0/w STRC(36864) r     1 VID
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:194  


   Procedure IVO$QUEIO requires 534 words for executable code.
   Procedure IVO$QUEIO requires 170 words of local(AUTO) storage.
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:195  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:196  
          MINI XREF LISTING

DAU_ENTRY.DEV_NUM
      2027**DCL      2189>>IF
DAU_ENTRY.DEV_TYPE
      2026**DCL      2195>>IF       2195>>IF
DEVICE_MATCH1
      2195**LABEL    2190--GOTO
DEVICE_MATCH2
      2210**LABEL    2205--GOTO
DEV_NUM
      2035**DCL      2036--REDEF    2155<<ASSIGN
DGT
      2047**DCL      2093<<ASSIGN   2101>>ASSIGN
DISK_ERR
      2088**LABEL    2051--CALLALT  2062--CALLALT  2077--CALLALT  2085--CALLALT  2098--CALLALT  2102--CALLALT
      2125--CALLALT  2133--CALLALT  2146--CALLALT  2152--CALLALT
DTT
      2046**DCL      2092<<ASSIGN   2100>>ASSIGN
DVT.MPC
      1974**DCL      1975--REDEF
DVT.PACKSIZE
      1973**DCL      2095>>IF
ELT.BOUND
      1943**DCL      2128>>ASSIGN
ELT.HEADER
      1952**DCL      1968--REDEF    1969--REDEF
ELT.SEEK.SECTOR
      1936**DCL      1937--REDEF
ELT_CMN
      2125**LABEL    2118--GOTO
F$DCB.ACTPOS
      1835**DCL      1835--REDEF
F$DCB.ARS#
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:197  
      1809**DCL      1809--REDEF
F$DCB.ATTR
      1828**DCL      1829--REDEF
F$DCB.BORROW
      1843**DCL      1843--REDEF    1843--REDEF    1843--REDEF
F$DCB.DCBNAME.L
      1857**DCL      1857--IMP-SIZ
F$DCB.EOMCHAR#
      1813**DCL      1813--REDEF
F$DCB.FLDID
      1838**DCL      1838--REDEF
F$DCB.FORM$
      1832**DCL      1832--REDEF
F$DCB.FSECT
      1848**DCL      1848--REDEF
F$DCB.FSN#
      1825**DCL      1825--REDEF    1825--REDEF    1826--REDEF
F$DCB.HEADER$
      1831**DCL      1831--REDEF
F$DCB.IXTNSIZE#
      1829**DCL      1829--REDEF
F$DCB.LASTSTA$
      1818**DCL      1818--REDEF
F$DCB.LVL
      1844**DCL      1844--REDEF
F$DCB.NAME#.C
      1819**DCL      1819--REDEF
F$DCB.NOEOF
      1841**DCL      1841--REDEF
F$DCB.NRECS#
      1830**DCL      1830--REDEF
F$DCB.NRECX
      1849**DCL      1849--REDEF
F$DCB.OHDR
      1841**DCL      1841--REDEF
F$DCB.ORG#
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:198  
      1824**DCL      1824--REDEF
F$DCB.PRECNO
      1847**DCL      1847--REDEF
F$DCB.RCSZ
      1853**DCL      1853--REDEF
F$DCB.RES#
      1820**DCL      1820--REDEF
F$DCB.SETX
      1832**DCL      1832--REDEF
F$DCB.TAB$
      1832**DCL      1832--REDEF
F$DCB.TDA
      1846**DCL      1847--REDEF
F$DCB.TYC
      1809**DCL      2086>>IF       2134>>IF
F$DCB.WSN#
      1820**DCL      1820--REDEF
F$DP IN PROCEDURE GETDCB
      2227**DCL      2244--DCLINIT
F$DP.LEN IN PROCEDURE GETDCB
      2228**DCL      2317<<ASSIGN
F$DP.TEXT IN PROCEDURE GETDCB
      2229**DCL      2315<<CALLBLT  2316>>CALLBLT
FC
      2040**DCL      2069<<ASSIGN   2075<<ASSIGN   2081>>ASSIGN   2090>>IF       2117<<ASSIGN   2123<<ASSIGN
      2129>>ASSIGN
FIPS_ENTRY.FORMAT
      2023**DCL      2179>>IF
FIPS_ENTRY.STATUS
      2021**DCL      2174>>IF
FMT.BOUND
      1887**DCL      2057>>ASSIGN
FMT.HEADER
      1896**DCL      1912--REDEF    1913--REDEF
FMT.SEEK.SECTOR
      1880**DCL      1881--REDEF
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:199  
FMT$
      2041**DCL      1860--IMP-PTR  2056<<ASSIGN   2057>>ASSIGN   2058>>ASSIGN
FPT_IOQ
      1998**DCL      2062<>CALL     2085<>CALL     2098<>CALL     2102<>CALL     2133<>CALL     2152<>CALL
FPT_IOQ.BUF_
      1998**DCL      2150<<ASSIGN
FPT_IOQ.BUF_.BOUND
      1998**DCL      2057<<ASSIGN   2080<<ASSIGN   2128<<ASSIGN
FPT_IOQ.BUF_.BUF$
      1999**DCL      2058<<ASSIGN   2082<<ASSIGN   2130<<ASSIGN
FPT_IOQ.V
      2000**DCL      1998--DCLINIT
FPT_IOQ.V.DCB#
      2000**DCL      2052<<ASSIGN   2078<<ASSIGN   2126<<ASSIGN   2147<<ASSIGN
FPT_IOQ.V.DLA.DCTX#
      2002**DCL      2053<<ASSIGN   2079<<ASSIGN   2127<<ASSIGN   2148<<ASSIGN
FPT_IOQ.V.DLA.DRELADDR#
      2002**DCL      2054<<ASSIGN   2097<<ASSIGN   2104<<ASSIGN
FPT_IOQ.V.EVENT#
      2002**DCL      2061<<ASSIGN   2084<<ASSIGN   2132<<ASSIGN
FPT_IOQ.V.FC#
      2000**DCL      2055<<ASSIGN   2081<<ASSIGN   2096<<ASSIGN   2099<<ASSIGN   2129<<ASSIGN   2149<<ASSIGN
FPT_IOQ.V.WAIT#
      2000**DCL      2059<<ASSIGN   2083<<ASSIGN   2131<<ASSIGN
FPT_RELDCB IN PROCEDURE GETDCB
      2305**DCL      2340<>CALL
FPT_RELDCB.V IN PROCEDURE GETDCB
      2305**DCL      2305--DCLINIT
FPT_RELDCB.V.DCB# IN PROCEDURE GETDCB
      2305**DCL      2339<<ASSIGN
FPT_TDCLOSE IN PROCEDURE GETDCB
      2291**DCL      2326<>CALL
FPT_TDCLOSE.V IN PROCEDURE GETDCB
      2291**DCL      2291--DCLINIT
FPT_TDCLOSE.V.DCB# IN PROCEDURE GETDCB
      2291**DCL      2324<<ASSIGN
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:200  
FPT_TDOPEN IN PROCEDURE GETDCB
      2274**DCL      2330<>CALL
FPT_TDOPEN.V IN PROCEDURE GETDCB
      2275**DCL      2274--DCLINIT
FPT_TDOPEN.V.DCB# IN PROCEDURE GETDCB
      2275**DCL      2323<<ASSIGN
FPT_TDOPEN.V.DEVICE.CHAN# IN PROCEDURE GETDCB
      2277**DCL      2328<<ASSIGN
FPT_TDOPEN.V.DEVICE.DVN# IN PROCEDURE GETDCB
      2276**DCL      2329<<ASSIGN
FPT_TDOPEN.V.DEVICE.IOM# IN PROCEDURE GETDCB
      2276**DCL      2327<<ASSIGN
GETDCB
      2223**PROC     2051--CALL     2077--CALL     2125--CALL     2146--CALL
GET_IO_DCB IN PROCEDURE GETDCB
      2244**DCL      2318<>CALL
GET_IO_DCB.V IN PROCEDURE GETDCB
      2245**DCL      2244--DCLINIT
GET_IO_DCB.V.DCB# IN PROCEDURE GETDCB
      2245**DCL      2319>>ASSIGN
GET_TD_DCB IN PROCEDURE GETDCB
      2259**DCL      2322<>CALL
GET_TD_DCB.V IN PROCEDURE GETDCB
      2260**DCL      2259--DCLINIT
GET_TD_DCB.V.DCB# IN PROCEDURE GETDCB
      2260**DCL      2320>>IF       2323>>ASSIGN   2324>>ASSIGN
I
      2032**DCL      2094<<DOINDEX  2095>>IF       2095>>IF       2097>>ASSIGN   2143<<DOINDEX  2144>>ASSIGN
      2156<<ASSIGN   2158>>ASSIGN   2172<<ASSIGN   2173>>ASSIGN   2187<<DOINDEX  2188>>ASSIGN   2203<<DOINDEX
      2204>>IF       2210>>IF       2210>>IF
I IN PROCEDURE GETDCB
      2311**DCL      2316<<CALLBLT  2317>>ASSIGN
IOQBUF
      2005**DCL      2150--ASSIGN   2151--ASSIGN
IOQBUF.DATA
      2010**DCL      2011--REDEF    2144<<ASSIGN   2151--ASSIGN   2158--ASSIGN   2173--ASSIGN   2188--ASSIGN
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:201  
IOQBUF.DATA_MPC.TABLE_ENTRY.DEV_NUM
      2014**DCL      2204>>IF
IOQBUF.DATA_MPC.TABLE_ENTRY.DEV_TYPE
      2013**DCL      2210>>IF       2210>>IF
IOQBUF.DCW.OFFSET
      2008**DCL      2151<<ASSIGN
IVV$ERROR
      1731**DCL-ENT  2161--CALL     2166--CALL     2176--CALL     2181--CALL     2192--CALL     2198--CALL
      2207--CALL     2213--CALL
J
      2033**DCL      2157<<ASSIGN   2158>>ASSIGN
M$GETDCB
       567**DCL-ENT  2318--CALL     2322--CALL
M$IOQ
       612**DCL-ENT  2062--CALL     2085--CALL     2098--CALL     2102--CALL     2133--CALL     2152--CALL
M$RELDCB
       567**DCL-ENT  2340--CALL
M$TDCLOSE
       611**DCL-ENT  2326--CALL
M$TDOPEN
       610**DCL-ENT  2330--CALL
MDS_ADDR.CM#
      2038**DCL      2156>>ASSIGN
MDS_ADDR.DEV#
      2039**DCL      2157>>ASSIGN
MDS_ENTRY.FORMAT
      2018**DCL      2164>>IF
MDS_ENTRY.STATUS
      2016**DCL      2159>>IF
NODCB IN PROCEDURE GETDCB
      2334**LABEL    2318--CALLALT  2322--CALLALT  2330--CALLALT
PTR$
      2034**DCL      2015--IMP-PTR  2020--IMP-PTR  2025--IMP-PTR  2158<<ASSIGN   2159>>IF       2164>>IF
      2173<<ASSIGN   2174>>IF       2179>>IF       2188<<ASSIGN   2189>>IF       2195>>IF       2195>>IF
RELDCB IN PROCEDURE GETDCB
      2338**ENTRY    2110--CALL
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:202  
RET
      2104**LABEL    2095--GOTO
SECTSTRT
      2045**DCL      2091<<ASSIGN   2095>>IF       2095>>IF       2097>>ASSIGN
T$DP IN PROCEDURE GETDCB
      2230**DCL      2259--DCLINIT
TEMP
      2042**DCL      2043--REDEF    2061>>ASSIGN
TEMP$
      2043**DCL      2060<<ASSIGN
VID.DGT
      1981**DCL      2093>>ASSIGN   2101<<ASSIGN
VID.DTT
      1981**DCL      1981--REDEF    2092>>ASSIGN   2100<<ASSIGN
VID.SECTSTRT
      1980**DCL      2091>>ASSIGN
VID_CMN
      2077**LABEL    2070--GOTO
VIP
      1736**DCL         9--PROC     2060--ASSIGN   2068--ENTRY    2074--ENTRY    2109--ENTRY    2116--ENTRY
      2122--ENTRY    2142--ENTRY
VIP.CTRACK
      1752**DCL      1753--REDEF
VIP.DCBNO
      1756**DCL      2051>>IF       2052>>ASSIGN   2077>>IF       2078>>ASSIGN   2086--IF       2110>>IF
      2125>>IF       2126>>ASSIGN   2134--IF       2146>>IF       2147>>ASSIGN   2319<<ASSIGN   2339>>ASSIGN
VIP.DCTX
      1757**DCL      2053>>ASSIGN   2079>>ASSIGN   2127>>ASSIGN
VIP.DEVID
      1742**DCL      2161<>CALL     2166<>CALL     2176<>CALL     2181<>CALL     2192<>CALL     2198<>CALL
      2207<>CALL     2213<>CALL     2315>>CALLBLT
VIP.DVN
      1782**DCL      2155>>ASSIGN   2172>>ASSIGN   2189>>IF       2204>>IF       2329>>ASSIGN
VIP.DVT$
      1739**DCL      1972--IMP-PTR  2095>>IF
VIP.ELT$
PL6.E3A0      #007=IVO$QUEIO File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:15 Page:203  
      1740**DCL      1916--IMP-PTR  2128>>ASSIGN   2130>>ASSIGN
VIP.FMT$
      1746**DCL      2056>>ASSIGN
VIP.IOCHAN.CHAN
      1781**DCL      2328>>ASSIGN
VIP.IOCHAN.IOM
      1780**DCL      2327>>ASSIGN
VIP.MODEL
      1743**DCL      2153>>DOSELCT
VIP.MPC_DCTX
      1783**DCL      2148>>ASSIGN
VIP.MPC_TYPE
      1784**DCL      2185>>IF
VIP.RANGE.FTRACK
      1790**DCL      1791--REDEF
VIP.RANGE.LTRACK
      1794**DCL      1795--REDEF
VIP.VID$
      1745**DCL      1979--IMP-PTR  2082>>ASSIGN   2091>>ASSIGN   2092>>ASSIGN   2093>>ASSIGN   2100>>ASSIGN
      2101>>ASSIGN

PL6.E3A0      #008=IVO$EVENT File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:16 Page:204  
      928        1        /*T***********************************************************/
      929        2        /*T*                                                         */
      930        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      931        4        /*T*                                                         */
      932        5        /*T***********************************************************/
      933        6        /**/
      934        7        /* FORMATTING END-ACTION ROUTINE */
      935        8        /**/
      936        9        IVO$EVENT: PROC ASYNC ALTRET;
      937       10        /**/
      938       11        /* INCLUDE FILES */
      939       12        /**/
      940       13        %INCLUDE B_SEGIDS_C;
      941      552        %INCLUDE CP_6;
      942      633        %INCLUDE CP_6_SUBS;
      943     1173        %INCLUDE IV$MACROS;
      944     1343        /**/
      945     1344        /* EXTERNAL REFERENCES */
      946     1345        /**/
      947     1346    1   DCL IVV$NEXT ENTRY (2) ALTRET;
      948     1347        /**/
      949     1348        /* DATA STRUCTURES */
      950     1349        /**/
      951     1350        %B$EVNT;
      952     1363        %B$EXCFR(STCLASS="BASED(EXCF$)");
      953     1381        %B$NWIO(STCLASS="BASED(EXCF$)");
      954     1466        %B$TCB(STCLASS="BASED(B$TCB$)");
      955     1469        %SUB_EXC;
      956     1516        %IV$VIP(NAME=VIP,STCLASS="BASED(VIP$)");
      957     1580        /**/
      958     1581        /* CONSTANT DATA */
      959     1582        /**/
      960     1583    1   DCL B$TCB$ PTR SYMREF;
      961     1584        /**/
      962     1585        /* AUTO STACK */
      963     1586        /**/
      964     1587    1   DCL EXCF$ PTR;
PL6.E3A0      #008=IVO$EVENT File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:16 Page:205  
      965     1588    1   DCL VIPPTR SBIN;
      966     1589    1   DCL VIP$ REDEF VIPPTR PTR;
      967     1590        /**/
      968     1591        /* PROCEDURE */
      969     1592        /**/
      970     1593    1           EXCF$=B$TCB.STK$;
      971     1594    1           IF B$EXCFR.ECC~=%ECC_EVENT# THEN ALTRETURN;
      972     1595    1           IF B$EXCFR.EVSC~=%EVSC_IO# THEN ALTRETURN;
      973     1596    1           VIPPTR=B$EXCFR.EVID;
      974     1597    1           CALL IVV$NEXT(VIP,B$NWIO.TYC&~%TYC_EGV) ALTRET(DONE);
      975     1598    1   DONE:
      976     1599    1           RETURN;
      977     1600    1   END IVO$EVENT;
      978     1601        %EOD;

PL6.E3A0      #008=IVO$EVENT File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:16 Page:206  
--  Include file information  --

   IV$MACROS.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IVO$EVENT.

   Procedure IVO$EVENT requires 29 words for executable code.
   Procedure IVO$EVENT requires 10 words of local(AUTO) storage.

PL6.E3A0      #008=IVO$EVENT File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:16 Page:207  

 Object Unit name= IVO$EVENT                                  File name= IVO$ONLINE.:E05TOU
 UTS= JUL 29 '97 23:16:48.28 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Proc  even  none    29     35  IVO$EVENT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes    yes     yes     Async       0  IVO$EVENT

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
 yes     yes           Std       2 IVV$NEXT
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AAUTO
                       nStd      0 X66_AAALT
                       nStd      0 X66_AARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  B$TCB$                                B_VECTNIL
PL6.E3A0      #008=IVO$EVENT File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:16 Page:208  


      928        1        /*T***********************************************************/
      929        2        /*T*                                                         */
      930        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      931        4        /*T*                                                         */
      932        5        /*T***********************************************************/
      933        6        /**/
      934        7        /* FORMATTING END-ACTION ROUTINE */
      935        8        /**/
      936        9        IVO$EVENT: PROC ASYNC ALTRET;

      9  1 000000   000000 700200 xent  IVO$EVENT    TSX0  ! X66_AAUTO
         1 000001   000012 000000                    ZERO    10,0

      937       10        /**/
      938       11        /* INCLUDE FILES */
      939       12        /**/
      940       13        %INCLUDE B_SEGIDS_C;
      941      552        %INCLUDE CP_6;
      942      633        %INCLUDE CP_6_SUBS;
      943     1173        %INCLUDE IV$MACROS;
      944     1343        /**/
      945     1344        /* EXTERNAL REFERENCES */
      946     1345        /**/
      947     1346    1   DCL IVV$NEXT ENTRY (2) ALTRET;
      948     1347        /**/
      949     1348        /* DATA STRUCTURES */
      950     1349        /**/
      951     1350        %B$EVNT;
      952     1363        %B$EXCFR(STCLASS="BASED(EXCF$)");
      953     1381        %B$NWIO(STCLASS="BASED(EXCF$)");
      954     1466        %B$TCB(STCLASS="BASED(B$TCB$)");
      955     1469        %SUB_EXC;
      956     1516        %IV$VIP(NAME=VIP,STCLASS="BASED(VIP$)");
      957     1580        /**/
      958     1581        /* CONSTANT DATA */
      959     1582        /**/
PL6.E3A0      #008=IVO$EVENT File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:16 Page:209  
      960     1583    1   DCL B$TCB$ PTR SYMREF;
      961     1584        /**/
      962     1585        /* AUTO STACK */
      963     1586        /**/
      964     1587    1   DCL EXCF$ PTR;
      965     1588    1   DCL VIPPTR SBIN;
      966     1589    1   DCL VIP$ REDEF VIPPTR PTR;
      967     1590        /**/
      968     1591        /* PROCEDURE */
      969     1592        /**/
      970     1593    1           EXCF$=B$TCB.STK$;

   1593  1 000002   000000 470400 xsym               LDP0    B$TCB$
         1 000003   000001 236100                    LDQ     1,,PR0
         1 000004   200003 756100                    STQ     EXCF$,,AUTO

      971     1594    1           IF B$EXCFR.ECC~=%ECC_EVENT# THEN ALTRETURN;

   1594  1 000005   200003 471500                    LDP1    EXCF$,,AUTO
         1 000006   100000 720100                    LXL0    0,,PR1
         1 000007   000001 100003                    CMPX0   1,DU
         1 000010   000012 600000 1                  TZE     s:1595

   1594  1 000011   000000 702200 xent               TSX2  ! X66_AAALT

      972     1595    1           IF B$EXCFR.EVSC~=%EVSC_IO# THEN ALTRETURN;

   1595  1 000012   100100 721100                    LXL1    64,,PR1
         1 000013   000001 101003                    CMPX1   1,DU
         1 000014   000016 600000 1                  TZE     s:1596

   1595  1 000015   000000 702200 xent               TSX2  ! X66_AAALT

      973     1596    1           VIPPTR=B$EXCFR.EVID;

   1596  1 000016   100101 235100                    LDA     65,,PR1
         1 000017   200004 755100                    STA     VIPPTR,,AUTO
PL6.E3A0      #008=IVO$EVENT File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:16 Page:210  

      974     1597    1           CALL IVV$NEXT(VIP,B$NWIO.TYC&~%TYC_EGV) ALTRET(DONE);

   1597  1 000020   000030 236000 xsym               LDQ     B_VECTNIL+24
         1 000021   000027 676000 xsym               ERQ     B_VECTNIL+23
         1 000022   100104 376100                    ANQ     68,,PR1
         1 000023   200006 756100                    STQ     VIPPTR+2,,AUTO
         1 000024   200006 633500                    EPPR3   VIPPTR+2,,AUTO
         1 000025   200011 453500                    STP3    VIPPTR+5,,AUTO
         1 000026   200004 236100                    LDQ     VIPPTR,,AUTO
         1 000027   200010 756100                    STQ     VIPPTR+4,,AUTO
         1 000030   200010 630500                    EPPR0   VIPPTR+4,,AUTO
         1 000031   000020 631400 xsym               EPPR1   B_VECTNIL+16
         1 000032   000000 701000 xent               TSX1    IVV$NEXT
         1 000033   000034 702000 1                  TSX2    DONE

      975     1598    1   DONE:
      976     1599    1           RETURN;

   1599  1 000034   000000 702200 xent  DONE         TSX2  ! X66_AARET
      977     1600    1   END IVO$EVENT;
      978     1601        %EOD;

PL6.E3A0      #008=IVO$EVENT File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:16 Page:211  
--  Include file information  --

   IV$MACROS.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IVO$EVENT.
PL6.E3A0      #008=IVO$EVENT File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:16 Page:212  

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 EXCF$                      4-0-0/w PTR         r     1 VIP$
     4-0-0/w SBIN        r     1 VIPPTR

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$TCB$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2448)  r     1 B$EXCFR                    0-0-0/w STRC(2880)  r     1 B$NWIO
     0-0-0/w STRC(144)   r     1 B$TCB                      0-0-0/w STRC(3024)  r     1 VIP


   Procedure IVO$EVENT requires 29 words for executable code.
   Procedure IVO$EVENT requires 10 words of local(AUTO) storage.
PL6.E3A0      #008=IVO$EVENT File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:16 Page:213  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #008=IVO$EVENT File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:16 Page:214  
          MINI XREF LISTING

B$EVNT.CODE
      1352**DCL      1352--REDEF    1353--REDEF    1353--REDEF
B$EVNT.ERR.ERR#
      1354**DCL      1354--REDEF
B$EVNT.EVID
      1353**DCL      1353--REDEF    1353--REDEF
B$EXCFR.ASL
      1364**DCL      1364--REDEF
B$EXCFR.ECC
      1364**DCL      1594>>IF
B$EXCFR.ERR.ERR#
      1378**DCL      1378--REDEF
B$EXCFR.EVID
      1377**DCL      1377--REDEF    1378--REDEF    1596>>ASSIGN
B$EXCFR.EVSC
      1376**DCL      1595>>IF
B$EXCFR.IR
      1365**DCL      1365--REDEF
B$EXCFR.PREVSZ
      1364**DCL      1364--REDEF
B$EXCFR.SUBC
      1376**DCL      1376--REDEF    1377--REDEF    1377--REDEF
B$NWIO.CGPARM.MSGIDXT
      1415**DCL      1418--REDEF
B$NWIO.CODE
      1384**DCL      1384--REDEF    1385--REDEF    1385--REDEF
B$NWIO.ERR.ERR#
      1386**DCL      1386--REDEF
B$NWIO.EVID
      1385**DCL      1385--REDEF    1385--REDEF
B$NWIO.TYC
      1391**DCL      1597>>CALL
PL6.E3A0      #008=IVO$EVENT File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:16 Page:215  
B$TCB.STK$
      1467**DCL      1593>>ASSIGN
B$TCB$
      1583**DCL      1467--IMP-PTR  1593>>ASSIGN
DONE
      1599**LABEL    1597--CALLALT
EXCF$
      1587**DCL      1364--IMP-PTR  1384--IMP-PTR  1593<<ASSIGN   1594>>IF       1595>>IF       1596>>ASSIGN
      1597>>CALL
IVV$NEXT
      1346**DCL-ENT  1597--CALL
VIP
      1517**DCL      1597<>CALL
VIP.CTRACK
      1533**DCL      1534--REDEF
VIP.RANGE.FTRACK
      1571**DCL      1572--REDEF
VIP.RANGE.LTRACK
      1575**DCL      1576--REDEF
VIP$
      1589**DCL      1517--IMP-PTR  1597>>CALL
VIPPTR
      1588**DCL      1589--REDEF    1596<<ASSIGN

PL6.E3A0      #009=IVO$OPINT File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:17 Page:216  
      979        1        /*T***********************************************************/
      980        2        /*T*                                                         */
      981        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      982        4        /*T*                                                         */
      983        5        /*T***********************************************************/
      984        6        /**/
      985        7        /* OPERATOR INTERRUPT */
      986        8        /**/
      987        9        IVO$OPINT: PROC ASYNC ALTRET;
      988       10        /**/
      989       11        /* INCLUDE FILES */
      990       12        /**/
      991       13        %INCLUDE B_SEGIDS_C;
      992      552 S      %INCLUDE CP_6_C;
      993      553        /**/
      994      554        /* DATA STRUCTURES */
      995      555        /**/
      996      556        %B$EXCFR;
      997      574        %B$TCB(STCLASS="BASED(B$TCB$)");
      998      577        %SUB_EXC;
      999      624        /**/
     1000      625        /* CONSTANT DATA */
     1001      626        /**/
     1002      627    1   DCL B$TCB$ PTR SYMREF;
     1003      628        /**/
     1004      629        /* STATIC DATA */
     1005      630        /**/
     1006      631    1   DCL IVO_OPINT BIT(1) STATIC SYMDEF INIT('0'B);
     1007      632        /**/
     1008      633        /* OPERATOR INTERRUPT */
     1009      634        /**/
     1010      635    1           IF B$TCB.STK$->B$EXCFR.ECC~=%ECC_INT# THEN ALTRETURN;
     1011      636    1           IVO_OPINT='1'B;
     1012      637    1           RETURN;
     1013      638    1   END IVO$OPINT;
     1014      639        %EOD;

PL6.E3A0      #009=IVO$OPINT File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:17 Page:217  
--  Include file information  --

   B_SEGIDS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IVO$OPINT.

   Procedure IVO$OPINT requires 11 words for executable code.
   Procedure IVO$OPINT requires 4 words of local(AUTO) storage.

PL6.E3A0      #009=IVO$OPINT File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:17 Page:218  

 Object Unit name= IVO$OPINT                                  File name= IVO$ONLINE.:E05TOU
 UTS= JUL 29 '97 23:17:13.92 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Data  even  none     1      1  IVO$OPINT
    1   Proc  even  none    11     13  IVO$OPINT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes    yes     yes     Async       0  IVO$OPINT

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    0      0  IVO_OPINT

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AAUTO
                       nStd      0 X66_AAALT
                       nStd      0 X66_AARET
PL6.E3A0      #009=IVO$OPINT File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:17 Page:219  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     B$TCB$
PL6.E3A0      #009=IVO$OPINT File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:17 Page:220  


      979        1        /*T***********************************************************/
      980        2        /*T*                                                         */
      981        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      982        4        /*T*                                                         */
      983        5        /*T***********************************************************/
      984        6        /**/
      985        7        /* OPERATOR INTERRUPT */
      986        8        /**/
      987        9        IVO$OPINT: PROC ASYNC ALTRET;

      9  1 000000   000000 700200 xent  IVO$OPINT    TSX0  ! X66_AAUTO
         1 000001   000004 000000                    ZERO    4,0

      988       10        /**/
      989       11        /* INCLUDE FILES */
      990       12        /**/
      991       13        %INCLUDE B_SEGIDS_C;
      992      552 S      %INCLUDE CP_6_C;
      993      553        /**/
      994      554        /* DATA STRUCTURES */
      995      555        /**/
      996      556        %B$EXCFR;
      997      574        %B$TCB(STCLASS="BASED(B$TCB$)");
      998      577        %SUB_EXC;
      999      624        /**/
     1000      625        /* CONSTANT DATA */
     1001      626        /**/
     1002      627    1   DCL B$TCB$ PTR SYMREF;
     1003      628        /**/
     1004      629        /* STATIC DATA */
     1005      630        /**/
     1006      631    1   DCL IVO_OPINT BIT(1) STATIC SYMDEF INIT('0'B);
     1007      632        /**/
     1008      633        /* OPERATOR INTERRUPT */
     1009      634        /**/
     1010      635    1           IF B$TCB.STK$->B$EXCFR.ECC~=%ECC_INT# THEN ALTRETURN;
PL6.E3A0      #009=IVO$OPINT File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:17 Page:221  

    635  1 000002   000000 470400 xsym               LDP0    B$TCB$
         1 000003   000001 471500                    LDP1    1,,PR0
         1 000004   100000 720100                    LXL0    0,,PR1
         1 000005   000002 100003                    CMPX0   2,DU
         1 000006   000010 600000 1                  TZE     s:636

    635  1 000007   000000 702200 xent               TSX2  ! X66_AAALT

     1011      636    1           IVO_OPINT='1'B;

    636  1 000010   400000 236003                    LDQ     -131072,DU
         1 000011   000000 756000 0                  STQ     IVO_OPINT

     1012      637    1           RETURN;

    637  1 000012   000000 702200 xent               TSX2  ! X66_AARET
     1013      638    1   END IVO$OPINT;
     1014      639        %EOD;

PL6.E3A0      #009=IVO$OPINT File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:17 Page:222  
--  Include file information  --

   B_SEGIDS_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IVO$OPINT.
PL6.E3A0      #009=IVO$OPINT File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:17 Page:223  

 **** Variables and constants ****

  ****  Section 000  Data  IVO$OPINT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/b BIT         r     1 IVO_OPINT

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$TCB$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2448)  r     1 B$EXCFR                    0-0-0/w STRC(144)   r     1 B$TCB


   Procedure IVO$OPINT requires 11 words for executable code.
   Procedure IVO$OPINT requires 4 words of local(AUTO) storage.
PL6.E3A0      #009=IVO$OPINT File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:17 Page:224  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #009=IVO$OPINT File=IVO$ONLINE.:E05TSI                             TUE 07/29/97 23:17 Page:225  
          MINI XREF LISTING

B$EXCFR.ASL
       557**DCL       557--REDEF
B$EXCFR.ECC
       557**DCL       635>>IF
B$EXCFR.ERR.ERR#
       571**DCL       571--REDEF
B$EXCFR.EVID
       570**DCL       570--REDEF     571--REDEF
B$EXCFR.IR
       558**DCL       558--REDEF
B$EXCFR.PREVSZ
       557**DCL       557--REDEF
B$EXCFR.SUBC
       569**DCL       569--REDEF     570--REDEF     570--REDEF
B$TCB.STK$
       575**DCL       635>>IF
B$TCB$
       627**DCL       575--IMP-PTR   635>>IF
IVO_OPINT
       631**DCL       636<<ASSIGN

PL6.E3A0      #010=IVO$WAIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:17 Page:226  
     1015        1        /*T***********************************************************/
     1016        2        /*T*                                                         */
     1017        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1018        4        /*T*                                                         */
     1019        5        /*T***********************************************************/
     1020        6        /**/
     1021        7        /* WAIT FOR OPERATOR INTERRUPT */
     1022        8        /**/
     1023        9        IVO$WAIT: PROC (DUMMY) ALTRET;
     1024       10    1   DCL DUMMY BIT(1) UNAL;
     1025       11        /**/
     1026       12        /* INCLUDE FILES */
     1027       13        /**/
     1028       14        %INCLUDE CP_6;
     1029       95        /**/
     1030       96        /* EXTERNAL REFERENCE */
     1031       97        /**/
     1032       98    1   DCL IVO_OPINT BIT(1) SYMREF;
     1033       99        /**/
     1034      100        /* STATIC DATA */
     1035      101        /**/
     1036      102        %FPT_WAIT(UNITS=10);
     1037      116        /**/
     1038      117        /* PROCEDURE */
     1039      118        /**/
     1040      119    1           CALL M$WAIT(FPT_WAIT);
     1041      120    2           IF IVO_OPINT THEN DO;
     1042      121    2              IVO_OPINT='0'B;
     1043      122    2              ALTRETURN;
     1044      123    2              END;
     1045      124    1           RETURN;
     1046      125    1   END IVO$WAIT;

PL6.E3A0      #010=IVO$WAIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:17 Page:227  
--  Include file information  --

   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IVO$WAIT.

   Procedure IVO$WAIT requires 10 words for executable code.
   Procedure IVO$WAIT requires 4 words of local(AUTO) storage.

    No errors detected in file IVO$ONLINE.:E05TSI    .

PL6.E3A0      #010=IVO$WAIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:17 Page:228  

 Object Unit name= IVO$WAIT                                   File name= IVO$ONLINE.:E05TOU
 UTS= JUL 29 '97 23:17:24.24 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none     6      6  IVO$WAIT
    2   Proc  even  none    10     12  IVO$WAIT

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes    yes     yes      Std        1  IVO$WAIT

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_1
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  IVO_OPINT
PL6.E3A0      #010=IVO$WAIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:17 Page:229  

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #010=IVO$WAIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:17 Page:230  


     1015        1        /*T***********************************************************/
     1016        2        /*T*                                                         */
     1017        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1018        4        /*T*                                                         */
     1019        5        /*T***********************************************************/
     1020        6        /**/
     1021        7        /* WAIT FOR OPERATOR INTERRUPT */
     1022        8        /**/
     1023        9        IVO$WAIT: PROC (DUMMY) ALTRET;

      9  2 000000   000000 700200 xent  IVO$WAIT     TSX0  ! X66_AUTO_1
         2 000001   000004 000001                    ZERO    4,1

     1024       10    1   DCL DUMMY BIT(1) UNAL;
     1025       11        /**/
     1026       12        /* INCLUDE FILES */
     1027       13        /**/
     1028       14        %INCLUDE CP_6;
     1029       95        /**/
     1030       96        /* EXTERNAL REFERENCE */
     1031       97        /**/
     1032       98    1   DCL IVO_OPINT BIT(1) SYMREF;
     1033       99        /**/
     1034      100        /* STATIC DATA */
     1035      101        /**/
     1036      102        %FPT_WAIT(UNITS=10);
     1037      116        /**/
     1038      117        /* PROCEDURE */
     1039      118        /**/
     1040      119    1           CALL M$WAIT(FPT_WAIT);

    119  2 000002   000000 630400 1                  EPPR0   FPT_WAIT
         2 000003   020006 713400                    CLIMB   8198
         2 000004   400400 401760                    pmme    nvectors=2

     1041      120    2           IF IVO_OPINT THEN DO;
PL6.E3A0      #010=IVO$WAIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:17 Page:231  

    120  2 000005   000000 234000 xsym               SZN     IVO_OPINT
         2 000006   000011 605000 2                  TPL     s:124

     1042      121    2              IVO_OPINT='0'B;

    121  2 000007   000000 450000 xsym               STZ     IVO_OPINT

     1043      122    2              ALTRETURN;

    122  2 000010   000000 702200 xent               TSX2  ! X66_AALT

     1044      123    2              END;
     1045      124    1           RETURN;

    124  2 000011   000000 702200 xent               TSX2  ! X66_ARET
     1046      125    1   END IVO$WAIT;

PL6.E3A0      #010=IVO$WAIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:17 Page:232  
--  Include file information  --

   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure IVO$WAIT.
PL6.E3A0      #010=IVO$WAIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:17 Page:233  

 **** Variables and constants ****

  ****  Section 001  Data  IVO$WAIT

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(216)   r     1 FPT_WAIT

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @DUMMY                    *0-0-0/b BIT         r     1 DUMMY

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/b BIT         r     1 IVO_OPINT


   Procedure IVO$WAIT requires 10 words for executable code.
   Procedure IVO$WAIT requires 4 words of local(AUTO) storage.

    No errors detected in file IVO$ONLINE.:E05TSI    .
PL6.E3A0      #010=IVO$WAIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:17 Page:234  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #010=IVO$WAIT File=IVO$ONLINE.:E05TSI                              TUE 07/29/97 23:17 Page:235  
          MINI XREF LISTING

DUMMY
        10**DCL         9--PROC
FPT_WAIT
       113**DCL       119<>CALL
FPT_WAIT.V
       114**DCL       113--DCLINIT
IVO_OPINT
        98**DCL       120>>IF        121<<ASSIGN
M$WAIT
        81**DCL-ENT   119--CALL
