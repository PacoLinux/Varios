VERSION E05

PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:1    
        1        1        /*M* DAM$MAP - MEMORY ACCESS ROUTINES FOR ANLZ */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DMR */
        8        8        /*D*    NAME:    DAM$MAP
        9        9                CALL:    CALL DAM$MAP(IP$,OP$,SYSID,DOMAYN,V) ALTRET;
       10       10                INPUT:   IP$ - Input pointer.
       11       11                         OP$ - Output pointer.
       12       12                         SYSID - What user do we want to look at?
       13       13                                    0 = Monitor
       14       14                                    Neg. = Minus the user number.
       15       15                                    Pos. = User's SYSID.
       16       16                                    Default is monitor or B$JIT.USER
       17       17                                    depending on the descriptor referenced
       18       18                                    by IP$.
       19       19                         DOMAYN - Which linkage segment.
       20       20                                     Legal values are MONWSR, CPWSR, DBWSR,
       21       21                                     ASLWSR, USERWSR.  (SUBS in B_STRINGS_C)
       22       22                                     Default is MONWSR.
       23       23                         V - If input is from a dumpfile or it is necessary
       24       24                             to issue M$CVMs to perform the mapping function
       25       25                             then it may be necessary to map to only part of
       26       26                             the segment referenced by IP$ because of limit-
       27       27                             ations on the size of the window area.  V is a
       28       28                             vector framing the portion of the segement that
       29       29                             is to be mapped.  If this argument is present
       30       30                             then mapping to IS pages is forced.  Otherwise
       31       31                             M$SAD will be used if possible.
       32       32                DESCRIPTION:
       33       33                   A pointer is returned in OP$ that may be used to access
       34       34                the memory described by the other arguments to DAM$MAP.  If
       35       35                an error occurs the alternate return is taken with the error
       36       36                code stored in the SYMDEFed cell DA_MAPERR.
       37       37                                                                           */
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:2    
       38       38        /**/
       39       39        /**/
       40       40        /*D*    NAME:    DAM$VPAGE
       41       41                CALL:    CALL DAM$VPAGE(VP,WP,SYSID,WSQ,N) ALTRET;
       42       42                INPUT:   VP - First virtual page to be mapped.
       43       43                         WP - First window page.  This is relative to
       44       44                              the beginning of the window area.
       45       45                         SYSID - Which user to map to.
       46       46                                  If SYSID is 0 or omitted the monitor is used.
       47       47                                  If SYSID is positive it is a SYSID.
       48       48                                  If SYSID is negative it is minus the user number.
       49       49                                  If WSQ is not USERWSQ this argument is not
       50       50                                  significant.
       51       51                         WSQ - Which page table to use.   (Subs in B_STRINGS_C)
       52       52                                  Legal values are REALWSQ, MONWSQ, USERWSQ,
       53       53                                  B_CWSQ1 - B_CWSQ16.  If this argument is
       54       54                                  omitted and SYSID is 0 then MONWSQ is used.
       55       55                                  Otherwise USERWSQ is used.
       56       56                         N - Number of pages to map.  If this argument is
       57       57                             omitted then one page is mapped.
       58       58
       59       59                DESCRIPTION:
       60       60                   If a dump file is being used then M$GVP is called to
       61       61                get the window pages requesed and the appropriate pages
       62       62                are read from the dump file into the window pages.  If
       63       63                the running system is being used then M$CVM is called to
       64       64                map the window pages to the appropriate physical pages.
       65       65                In any case DA_WINDOW is updated to reflect the current
       66       66                status of the window area.  If the altreturn is taken the
       67       67                error code is in DA_MAPERR.
       68       68                                                                           */
       69       69        /**/
       70       70        /**/
       71       71        /*D*    NAME:    DAM$CVM
       72       72                CALL:    CALL DAM$CVM(RPN,WP) ALTRET;
       73       73                INPUT:   RPN - Physical page to map to.
       74       74                         WP - Window page number.
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:3    
       75       75
       76       76                DESCRIPTION:
       77       77                   M$CVM is called to map the requested physical page to
       78       78                the specified window page.  If RPN is -1 the presence bit
       79       79                in DA_WINDOW is reset, otherwise it is set unless the
       80       80                M$CVM fails.  If the altreturn is taken the error code is
       81       81                in the altret frame of the TCB.
       82       82                *** For internal use by DAM routines ***
       83       83                                                                           */
       84       84        /**/
       85       85        /**/
       86       86        /*D*    NAME:    DAM$DUMPFILE
       87       87                CALL:    CALL DAM$DUMPFILE(FID) ALTRET;
       88       88                INPUT:   FID - File identifier of dump file.  (TEXTC)
       89       89                DESCRIPTION:
       90       90                   DAM$DUMPFILE initializes mapping data to obtain memory
       91       91                from the specified dump file.  If the altreturn is taken the
       92       92                error code is in DA_MAPERR.
       93       93                                                                           */
       94       94        /**/
       95       95        /**/
       96       96        /*D*    NAME:    DAM$RUNNING
       97       97                CALL:    CALL DAM$RUNNING ALTRET;
       98       98                DESCRIPTION:
       99       99                   DAM$RUNNING initializes mapping data to obtain memory from
      100      100                the running sytem.  If the altreturn is taken the error code
      101      101                is in DA_MAPERR.
      102      102                                                                           */
      103      103        /**/
      104      104        /**/
      105      105        /*D*    NAME:    DAM$INIT
      106      106                CALL:    CALL DAM$INIT ALTRET;
      107      107                DESCRIPTION:
      108      108                   DAM$INIT must be called before using any of the other DAM
      109      109                routines.  DAM$INIT falls through to DAM$RUNNING.  If the
      110      110                altreturn is taken the error code is in DA_MAPERR.
      111      111                                                                           */
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:4    
      112      112        /**/
      113      113        /**/
      114      114        /*D*    NAME:    DAM$FREEM
      115      115                CALL:    CALL DAM$FREEM
      116      116                DESCRIPTION:
      117      117                   DAM$FREEM frees all of the allocatable special descriptor
      118      118                slots and all in use window pages.  The SPCL8 descriptor slot
      119      119                is used for TIGR data and is not freed.  If looking at the
      120      120                running system the SPCL7 descriptor slot is used for the
      121      121                monitor IS and is not freed.  The purpose of this routine is
      122      122                give the programmer some control over when pointers obtained
      123      123                by DAM$MAP become invalid.  Previously obtained pointers
      124      124                become invalid when a call to DAM$MAP requires that either
      125      125                 the next avialable special descriptor slot or the next
      126      126                available window page be reset to 0.
      127      127
      128      128                When mapping users DAM$FREEM should be called at least on
      129      129                each pass through the user tables.
      130      130                                                                           */
      131      131        /**/
      132      132        /**/
      133      133        /*D*    NAME:    DAM$USECPU
      134      134                CALL:    CALL DAM$USECPU(CPU#) ALTRET;
      135      135                INPUT:   CPU# - The processor number of the CPU whose page
      136      136                                table is to be used on subsequent calls to
      137      137                                DAM$VPAGE.  Note, this is the proccessor
      138      138                                number, not the port number.
      139      139                DESCRIPTION:
      140      140                   DAM$USECPU causes MONWSQ mapping to go through the page
      141      141                table of the specified CPU.  If the alternate return is taken
      142      142                the error code is in DA_MAPERR.  If DAM$MAP is called to
      143      143                perform an operation that can be done with an M$SAD then the
      144      144                currently specified CPU has no effect.  You see the CPU you
      145      145                are running on.  Therfore if CPU specific data is required
      146      146                then the V argument to DAM$MAP should be used to force mapping
      147      147                to window pages.
      148      148
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:5    
      149      149                DA_MAP_D is the static data module associated with these
      150      150                routines.
      151      151                                                                           */
      152      152        DAM$MAP: PROC(IP$,OP$,SYSID,DOMAYN,V) ALTRET;
      153      153        /**/
      154      154        /* PARAMETERS */
      155      155        /**/
      156      156    1   DCL IP$ PTR;
      157      157    1   DCL 1 IP REDEF IP$,
      158      158    1         2 CA UBIN(20) UNAL,
      159      159    1         2 BA UBIN(4) UNAL,
      160      160    1         2 SID,
      161      161    1           3 S UBIN(2) UNAL,
      162      162    1           3 D UBIN(10) UNAL;
      163      163    1   DCL OP$ PTR;
      164      164    1   DCL 1 OP REDEF OP$,
      165      165    1         2 CA UBIN(20) UNAL,
      166      166    1         2 BA UBIN(4) UNAL,
      167      167    1         2 SID,
      168      168    1           3 S UBIN(2) UNAL,
      169      169    1           3 D UBIN(10) UNAL;
      170      170    1   DCL DOMAYN SBIN;
      171      171    1   DCL SYSID SBIN;
      172      172    1   DCL V BIT(72) ALIGNED;
      173      173        /**/
      174      174        /* LOCALS FOR PARAMETERS */
      175      175        /**/
      176      176    1   DCL D# SBIN;
      177      177    1   DCL U# SBIN;
      178      178    1   DCL S# SBIN;
      179      179    1   DCL 1 V# ALIGNED,
      180      180    1         2 BOUND UBIN(20) UNAL,
      181      181    1         2 FLAGS BIT(16) UNAL,
      182      182    1         2 P,
      183      183    1           3 CA UBIN(20) UNAL,
      184      184    1           3 BA UBIN(4) UNAL,
      185      185    1           3 SID,
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:6    
      186      186    1             4 S UBIN(2) UNAL,
      187      187    1             4 D UBIN(10) UNAL,
      188      188    1         2 P$ REDEF P PTR;
      189      189        /**/
      190      190        /* AUTO DATA */
      191      191        /**/
      192      192    1   DCL I SBIN;
      193      193    1   DCL CVMFLG BIT(1) ALIGNED;
      194      194    1   DCL 1 DESC ALIGNED,
      195      195    1         2 BOUND UBIN(20) UNAL,
      196      196    1         2 FLAGS BIT(9) UNAL,
      197      197    1         2 WSR UBIN(3) UNAL,
      198      198    1         2 TYPE UBIN(4) UNAL,
      199      199    1         2 BASE UBIN WORD;
      200      200    1   DCL 1 DESC2 REDEF DESC,
      201      201    1         2 BOUND UBIN(20) UNAL,
      202      202    1         2 FLAGS BIT(3) UNAL,
      203      203    1         2 WSQ UBIN(9) UNAL,
      204      204    1         2 TYPE UBIN(4) UNAL,
      205      205    1         2 BASE UBIN WORD;
      206      206    1   DCL WSQ SBIN;
      207      207    1   DCL PAGES SBIN;
      208      208    1   DCL PT$ PTR;
      209      209    1   DCL LS$ PTR;
      210      210    1   DCL FCN SBIN;
      211      211        /**/
      212      212        /* INCLUDE FILES */
      213      213        /**/
      214      214        %INCLUDE DA_MAP_R;
      215      244        %INCLUDE DA_PERR_C;
      216      308        %INCLUDE CP_6;
      217      389        %INCLUDE B_STRINGS_C;
      218      518        %INCLUDE B_LSDATA_C;
      219     3724        %INCLUDE M_INFO_C;
      220     3864        %INCLUDE B_SEGIDS_C;
      221     4403    1   DCL B$JIT$ PTR SYMREF;
      222     4404        %INCLUDE B$JIT;
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:7    
      223     4694        %INCLUDE SS_SCHED_C;
      224     4927        %INCLUDE B$USER;
      225     5143        %B$USERREFS;
      226     5147        %INCLUDE B$MAP;
      227     5246        %INCLUDE JG_GHOSTS_C;
      228     5336        /**/
      229     5337        /* STATIC, CONSTANT, BASED AND OTHER STUFF */
      230     5338        /**/
      231     5339    1   DCL B$TCB$ PTR SYMREF;
      232     5340        %B$TCB;
      233     5343        %B$ALT;
      234     5351        %FPT_SAD;
      235     5366        %FPT_STD;
      236     5381    1   DCL VECINIT BIT(72) CONSTANT INIT('777777777640'O);
      237     5382    1   DCL LS(0:0) BIT(72) ALIGNED BASED;
      238     5383    1   DCL B$IS$ PTR SYMREF;
      239     5384    1   DCL DA_WSRWSQ(0:7) UBIN BYTE UNAL CONSTANT SYMDEF INIT(%MONWSQ,%MONWSQ,0,%CGWSQ,%
              5384            CPWSQ,
      240     5385    1                                                %DBWSQ,%ASLWSQ,%USERWSQ);
      241     5386    1   DCL LSOFFSET(0:7) SBIN CONSTANT INIT(%(%(MLS_BASE%-HJIT_BASE%)/4),
      242     5387    1                                        0,
      243     5388    1                                        0,
      244     5389    1                                        0,
      245     5390    1                                        %(%(CLS_BASE%-HJIT_BASE%)/4),
      246     5391    1                                        %(%(DLS_BASE%-HJIT_BASE%)/4),
      247     5392    1                                        %(%(ALS_BASE%-HJIT_BASE%)/4),
      248     5393    1                                        %(%(ULS_BASE%-HJIT_BASE%)/4));
      249     5394        /**/
      250     5395    1   DCL DAM$VPAGE ENTRY(5) ALTRET;
      251     5396    1   DCL DA_MAP_D ENTRY CONV(5);
      252     5397        /**/
      253     5398        %SUB NEVER="WHILE('0'B)";
      254     5399        %SUB FOREVER="WHILE('1'B)";
      255     5400        %EQU FCN_MAP=0;
      256     5401        %EQU FCN_GETDESC=1;
      257     5402        %EJECT;
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:8    
      258     5403    1           FCN=%FCN_MAP;
      259     5404    1           GOTO COMMON;
      260     5405    1   DAM$GETDESC: ENTRY(IP$,OP$,SYSID,DOMAYN,V) ALTRET;
      261     5406    1           FCN=%FCN_GETDESC;
      262     5407    1   COMMON: ;
      263     5408    1           IF ADDR(DOMAYN)=ADDR(NIL) THEN D#=%MONWSR;
      264     5409    1           ELSE D#=DOMAYN;
      265     5410    1           CVMFLG=DA_DUMPFILE;
      266     5411    2           IF FCN~=%FCN_GETDESC THEN DO;
      267     5412    3              IF ADDR(V)=ADDR(NIL) THEN DO;
      268     5413    3                 V#=VECINIT;
      269     5414    3                 V#.P.SID=IP.SID;
      270     5415    3                 END;
      271     5416    3              ELSE DO;
      272     5417    4                 IF ADDR(V)=ADDR(DA_MONISDATA) AND NOT DA_DUMPFILE THEN DO;
      273     5418    4                    OP$=IP$;
      274     5419    4                    OP.SID=DA_SDASN.SID(%MONIS#);
      275     5420    4                    DA_LASTBOUND=DA_SDASN.DESC.BOUND(%MONIS#);
      276     5421    4                    RETURN;
      277     5422    4                    END;
      278     5423    3                 V#=V;
      279     5424    3                 IF V#.P.SID~=IP.SID OR V#.P.CA>IP.CA OR V#.P.CA+V#.BOUND<IP.CA THEN
      280     5425    3                    CALL SETERR(%E$DA_BAD_VEC) ALTRET(ALT);
      281     5426        /*E*    ERROR:   DAM-E$DA_BAD_VEC
      282     5427                MESSAGE: The pointer part of the V argument to DAM$MAP must
      283     5428                         have the same segid as IP$ and IP$ must lie within
      284     5429                         the area framed by V.
      285     5430                                                                           */
      286     5431    3                 CVMFLG='1'B;
      287     5432    3                 END;
      288     5433    2              END;
      289     5434    1           IF ADDR(SYSID)=ADDR(NIL) THEN
      290     5435    1              IF D#=%MONWSR THEN U#=0;
      291     5436    1              ELSE U#=B$JIT.USER;
      292     5437    2           ELSE DO;
      293     5438    2              IF SYSID<=0 THEN U#=-SYSID;
      294     5439    3              ELSE DO;
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:9    
      295     5440    4                 DO U#=1 TO DA_MUAIS;
      296     5441    4                    IF SYSID=B$USRT$->B$USER.SYSID(U#) THEN GOTO USRFOUND;
      297     5442    4                    END;
      298     5443    3                 CALL SETERR(%E$DA_NO_USER) ALTRET(ALT);
      299     5444    3                 END;
      300     5445    2              END;
      301     5446    1   USRFOUND:;
      302     5447    1           IF U#<=JG_MING# THEN S#=U#;
      303     5448    1           ELSE S#=B$USRT$->B$USER.SYSID(U#);
      304     5449    2           IF U#~=0 THEN DO;
      305     5450    2              IF U#>DA_MUAIS OR B$USRT$->B$USER.US(U#)=%SS_SNULL THEN
      306     5451    2                 CALL SETERR(%E$DA_NO_USER) ALTRET(ALT);
      307     5452        /*E*    ERROR:   DAM-E$DA_NO_USER
      308     5453                MESSAGE: The specified sysid/user no. does not exist.
      309     5454                                                                           */
      310     5455    2              END;
      311     5456    2           DO CASE(IP.SID.S);
      312     5457    2            CASE(0);                       /* PARAMETER STACK */
      313     5458    2              I=DA_WSRWSQ(DA_PSR.WSR);
      314     5459    2              CALL DAM$VPAGE(DA_PSR.BASE/4096,%MSCPG3#,-U#,I) ALTRET(ALT);
      315     5460    2              LS$=PINCRC(B$IS$,DA_MSCPG3*4096+MOD(DA_PSR.BASE,4096));
      316     5461    2              CVMFLG='1'B;
      317     5462    2            CASE(2);                       /* ARGUMENT STACK */
      318     5463    2              I=DA_WSRWSQ(DA_ASR.WSR);
      319     5464    2              CALL DAM$VPAGE(DA_ASR.BASE/4096,%MSCPG3#,-U#,I) ALTRET(ALT);
      320     5465    2              LS$=PINCRC(B$IS$,DA_MSCPG3*4096+MOD(DA_ASR.BASE,4096));
      321     5466    2              CVMFLG='1'B;
      322     5467    2            CASE(3);                       /* LINKAGE SEGMENT */
      323     5468    3              DO CASE(D#);
      324     5469    3               CASE(%MONWSR);
      325     5470    3                 CALL DAM$VPAGE(HJIT_BASE%/4096,%MSCPG3#,,%MONWSQ) ALTRET(ALT);
      326     5471    3                 LS$=PINCRW(B$IS$,DA_MSCPG3*1024);
      327     5472    3               CASE(%CPWSR,%DBWSR,%ASLWSR,%USERWSR);
      328     5473    3                 CALL DAM$VPAGE(HJIT_BASE%/4096,%MSCPG3#,-U#,%USERWSQ) ALTRET(ALT);
      329     5474    3                 LS$=PINCRW(B$IS$,DA_MSCPG3*1024+LSOFFSET(D#));
      330     5475    3               CASE(ELSE);
      331     5476    3                 CALL SETERR(%E$DA_BAD_DOMAIN) ALTRET(ALT);
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:10   
      332     5477        /*E*    ERROR:   DAM-E$DA_BAD_DOMAIN
      333     5478                MESSAGE: DOMAIN must be one of %MONWSR, %CPWSR, %DBWSR, %ASLWSR,
      334     5479                         or %USERWSR.
      335     5480                                                                           */
      336     5481    3               END;
      337     5482    2            CASE(ELSE);
      338     5483    2              CALL SETERR(%E$DA_NOT_LS) ALTRET(ALT);
      339     5484        /*E*    ERROR:   DAM-E$DA_NOT_LS
      340     5485                MESSAGE: Bad input pointer to DAM$MAP.
      341     5486                                                                           */
      342     5487    2            END;
      343     5488        /**/
      344     5489    1           DESC=LS$->LS(IP.SID.D);
      345     5490    2           IF FCN=%FCN_GETDESC THEN DO;
      346     5491    2              V=DESC;
      347     5492    2              OP$=LS$;
      348     5493    2              RETURN;
      349     5494    2              END;
      350     5495    1           DESC.BASE=DESC.BASE+V#.P.CA;
      351     5496    1           DESC.BOUND=DESC.BOUND-V#.P.CA;
      352     5497    1           IF DESC.BOUND>V#.BOUND THEN DESC.BOUND=V#.BOUND;
      353     5498    1           ELSE V#.BOUND=DESC.BOUND;
      354     5499    2           DO CASE(DESC.TYPE);
      355     5500    2            CASE(0);
      356     5501    2              WSQ=DA_WSRWSQ(DESC.WSR);
      357     5502    2            CASE(2);
      358     5503    2              WSQ=DESC2.WSQ;
      359     5504    2            CASE(ELSE);
      360     5505    2              CALL SETERR(%E$DA_BAD_DESC) ALTRET(ALT);
      361     5506        /*E*    ERROR:   DAM-E$DA_BAD_DESC
      362     5507                MESSAGE: The descriptor referenced by IP$ must be of type 0 or 2.
      363     5508                                                                           */
      364     5509    2            END;
      365     5510    1           IF WSQ~=%USERWSQ THEN U#=0;
      366     5511    1           ELSE IF U#~=B$JIT.USER THEN CVMFLG='1'B;
      367     5512    1           IF D#~=%MONWSR THEN CVMFLG='1'B;
      368     5513    1           PAGES=(DESC.BOUND+MOD(DESC.BASE,4096))/4096;
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:11   
      369     5514    2           IF (WSQ~=%MONWSQ OR IP.SID~=%ISSID) AND NOT CVMFLG THEN DO;
      370     5515    2              CALL DAM$VPAGE(0,%MSCPG3#,-U#,WSQ,1) ALTRET(ALT);
      371     5516        /* THE ABOVE CALL CAUSES DAM$VPAGE TO PUT THE PAGE TABLE FOR WSQ
      372     5517           IN MSCPG1 */
      373     5518    2              PT$=PINCRW(B$IS$,DA_MSCPG1*1024);
      374     5519    3              DO I=0 TO PAGES;
      375     5520    3                 IF PT$->B$MAP.CTRL(I+DESC.BASE/4096) & %PGHKEEP THEN CVMFLG='1'B;
      376     5521    3                 END;
      377     5522    2              END;
      378     5523    2           DO I=0 TO 7;
      379     5524    3              IF DA_SDASN.DESC(I)=DESC AND S#=DA_SDASN.SYSID(I) THEN DO;
      380     5525    3                 OP=IP;
      381     5526    3                 OP.SID=DA_SDASN.SID(I);
      382     5527    3                 DA_LASTBOUND=DA_SDASN.DESC.BOUND(I);
      383     5528    3                 OP.CA=IP.CA-V#.P.CA;
      384     5529    3                 RETURN;
      385     5530    3                 END;
      386     5531    2              END;
      387     5532    2           IF CVMFLG THEN DO;
      388     5533    2              IF DA_WINDOWBASE+PAGES>DA_WINDOWMAX THEN
      389     5534    2                 CALL SETERR(%E$DA_SEG_TOO_BIG) ALTRET(ALT);
      390     5535        /*E*    ERROR:   DAM-E$DA_SEG_TOO_BIG
      391     5536                MESSAGE: The segment referenced is larger than the available
      392     5537                         window area.
      393     5538                MESSAGE1: If this is a dump file, it may help to !ORES MEM=300.
      394     5539                MESSAGE2: To map to this segment it is necessary to specify
      395     5540                          a vector framing only a portion of the segment that
      396     5541                          will fit into the available window area.
      397     5542                                                                           */
      398     5543    3              IF DA_NXTWINDOW+DA_WINDOWBASE+PAGES>DA_WINDOWMAX THEN DO;
      399     5544    3                 DA_NXTWINDOW=0;
      400     5545    4                 DO I=0 TO 7;
      401     5546    4                    IF DA_SDASN.CVM(I) THEN DA_SDASN.DESC(I)='0'B;
      402     5547    4                    END;
      403     5548    3                 END;
      404     5549    2              CALL DAM$VPAGE(DESC.BASE/4096,DA_NXTWINDOW,-U#,WSQ,PAGES+1) ALTRET(
              5549                       VPAGEALT);
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:12   
      405     5550    3              DO NEVER;
      406     5551    3   VPAGEALT:     IF DA_MAPERR.CODE~=%E$DA_NOT_DUMPED THEN GOTO ALT;
      407     5552    3                 END;
      408     5553    2              FPT_STD.V.USERSID#=DA_SDASN.SID(DA_NXTSPCL);
      409     5554    2              FPT_STD.AREA_.BOUND=DESC.BOUND;
      410     5555    2              FPT_STD.AREA_.AREA$=PINCRC(B$IS$,(DA_NXTWINDOW+DA_WINDOWBASE)*4096+MOD(
              5555                       DESC.BASE,4096));
      411     5556    2              CALL M$STD(FPT_STD) ALTRET(PMMEALT);
      412     5557    2              DA_SDASN.CVM(DA_NXTSPCL)='1'B;
      413     5558    2              DA_NXTWINDOW=DA_NXTWINDOW+PAGES+1;
      414     5559    2              END;
      415     5560    2           ELSE DO;
      416     5561    2              FPT_SAD.V.USERSID#=DA_SDASN.SID(DA_NXTSPCL);
      417     5562    2              FPT_SAD.V.MONSID#=IP.SID;
      418     5563    2              CALL M$SAD(FPT_SAD) ALTRET(PMMEALT);
      419     5564    2              FPT_STD.V.USERSID#=DA_SDASN.SID(DA_NXTSPCL);
      420     5565    2              V#.P.SID=DA_SDASN.SID(DA_NXTSPCL);
      421     5566    2              FPT_STD.AREA_=V#;
      422     5567    2              CALL M$STD(FPT_STD) ALTRET(PMMEALT);
      423     5568    2              DA_SDASN.CVM(DA_NXTSPCL)='0'B;
      424     5569    2              END;
      425     5570    1           OP=IP;
      426     5571    1           OP.SID=DA_SDASN.SID(DA_NXTSPCL);
      427     5572    1           OP.CA=IP.CA-V#.P.CA;
      428     5573    1           DA_SDASN.DESC(DA_NXTSPCL)=DESC;
      429     5574    1           DA_SDASN.SYSID(DA_NXTSPCL)=S#;
      430     5575    1           DA_LASTBOUND=DA_SDASN.DESC.BOUND(DA_NXTSPCL);
      431     5576    1           DA_NXTSPCL=MOD(DA_NXTSPCL+1,DA_NUMSPCL);
      432     5577    1           RETURN;
      433     5578    1   PMMEALT:;
      434     5579    1           DA_MAPERR=B$TCB$->B$TCB.ALT$->B$ALT.ERR;
      435     5580    1   ALT:    ALTRETURN;
      436     5581        %EJECT;
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:13   
      437     5582    1   SETERR: PROC(CODE) ALTRET;
      438     5583    2   DCL CODE SBIN;
      439     5584        /**/
      440     5585    2           DA_MAPERR='040115000000'O;
      441     5586    2           DA_MAPERR.CODE=CODE;
      442     5587    2           ALTRETURN;
      443     5588    2   END SETERR;
      444     5589    1   END DAM$MAP;
      445     5590        %EOD;

PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:14   
--  Include file information  --

   JG_GHOSTS_C.:E05TOU  is referenced.
   B$MAP.:E05TOU  cannot be made into a system file and is referenced.
   B$USER.:E05TOU  cannot be made into a system file and is referenced.
   SS_SCHED_C.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   B_MLSMAC_C.:E05TOU  is referenced.
   B_ULSMAC_C.:E05TOU  is referenced.
   B_LSDATA_C.:E05TOU  cannot be made into a system file and is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   DA_PERR_C.:E05TOU  is referenced.
   DA_MAP_R.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure DAM$MAP.

   Procedure DAM$MAP requires 649 words for executable code.
   Procedure DAM$MAP requires 32 words of local(AUTO) storage.

PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:15   

 Object Unit name= DAM$MAP                                    File name= DAM$MAP.:E05TOU
 UTS= JUL 29 '97 12:51:23.60 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none    10     12  DAM$MAP
    2  RoData even  UTS     13     15  DAM$MAP
    3   Proc  even  none   649   1211  DAM$MAP
    4  RoData even  none    22     26  DAM$MAP

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     3      0   yes    yes     yes      Std        5  DAM$MAP
     3      4          yes     yes      Std        5  DAM$GETDESC

  ****  Data defs  ****

 Sect OctLoc  Name                           Sect OctLoc  Name
    2      2  DA_WSRWSQ
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:16   

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes          ~proc      0 DA_MAP_D
 yes     yes           Std       5 DAM$VPAGE
                       nStd      0 X66_AUTO_5
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     DA_SDASN                              DA_MUAIS                              DA_WINDOWBASE
     DA_WINDOWMAX                          DA_NXTWINDOW                          DA_DUMPFILE
     DA_LASTBOUND                          DA_MONISDATA                          DA_MSCPG1
     DA_MSCPG3                             DA_MAPERR                             DA_NXTSPCL
     DA_NUMSPCL                            DA_PSR                                DA_ASR
     M$UC                                  B$JIT$                                B$USRT$
     B$TCB$                                B$IS$                                 B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:17   


        1        1        /*M* DAM$MAP - MEMORY ACCESS ROUTINES FOR ANLZ */
        2        2        /*T***********************************************************/
        3        3        /*T*                                                         */
        4        4        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
        5        5        /*T*                                                         */
        6        6        /*T***********************************************************/
        7        7        /*X* DMR */
        8        8        /*D*    NAME:    DAM$MAP
        9        9                CALL:    CALL DAM$MAP(IP$,OP$,SYSID,DOMAYN,V) ALTRET;
       10       10                INPUT:   IP$ - Input pointer.
       11       11                         OP$ - Output pointer.
       12       12                         SYSID - What user do we want to look at?
       13       13                                    0 = Monitor
       14       14                                    Neg. = Minus the user number.
       15       15                                    Pos. = User's SYSID.
       16       16                                    Default is monitor or B$JIT.USER
       17       17                                    depending on the descriptor referenced
       18       18                                    by IP$.
       19       19                         DOMAYN - Which linkage segment.
       20       20                                     Legal values are MONWSR, CPWSR, DBWSR,
       21       21                                     ASLWSR, USERWSR.  (SUBS in B_STRINGS_C)
       22       22                                     Default is MONWSR.
       23       23                         V - If input is from a dumpfile or it is necessary
       24       24                             to issue M$CVMs to perform the mapping function
       25       25                             then it may be necessary to map to only part of
       26       26                             the segment referenced by IP$ because of limit-
       27       27                             ations on the size of the window area.  V is a
       28       28                             vector framing the portion of the segement that
       29       29                             is to be mapped.  If this argument is present
       30       30                             then mapping to IS pages is forced.  Otherwise
       31       31                             M$SAD will be used if possible.
       32       32                DESCRIPTION:
       33       33                   A pointer is returned in OP$ that may be used to access
       34       34                the memory described by the other arguments to DAM$MAP.  If
       35       35                an error occurs the alternate return is taken with the error
       36       36                code stored in the SYMDEFed cell DA_MAPERR.
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:18   
       37       37                                                                           */
       38       38        /**/
       39       39        /**/
       40       40        /*D*    NAME:    DAM$VPAGE
       41       41                CALL:    CALL DAM$VPAGE(VP,WP,SYSID,WSQ,N) ALTRET;
       42       42                INPUT:   VP - First virtual page to be mapped.
       43       43                         WP - First window page.  This is relative to
       44       44                              the beginning of the window area.
       45       45                         SYSID - Which user to map to.
       46       46                                  If SYSID is 0 or omitted the monitor is used.
       47       47                                  If SYSID is positive it is a SYSID.
       48       48                                  If SYSID is negative it is minus the user number.
       49       49                                  If WSQ is not USERWSQ this argument is not
       50       50                                  significant.
       51       51                         WSQ - Which page table to use.   (Subs in B_STRINGS_C)
       52       52                                  Legal values are REALWSQ, MONWSQ, USERWSQ,
       53       53                                  B_CWSQ1 - B_CWSQ16.  If this argument is
       54       54                                  omitted and SYSID is 0 then MONWSQ is used.
       55       55                                  Otherwise USERWSQ is used.
       56       56                         N - Number of pages to map.  If this argument is
       57       57                             omitted then one page is mapped.
       58       58
       59       59                DESCRIPTION:
       60       60                   If a dump file is being used then M$GVP is called to
       61       61                get the window pages requesed and the appropriate pages
       62       62                are read from the dump file into the window pages.  If
       63       63                the running system is being used then M$CVM is called to
       64       64                map the window pages to the appropriate physical pages.
       65       65                In any case DA_WINDOW is updated to reflect the current
       66       66                status of the window area.  If the altreturn is taken the
       67       67                error code is in DA_MAPERR.
       68       68                                                                           */
       69       69        /**/
       70       70        /**/
       71       71        /*D*    NAME:    DAM$CVM
       72       72                CALL:    CALL DAM$CVM(RPN,WP) ALTRET;
       73       73                INPUT:   RPN - Physical page to map to.
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:19   
       74       74                         WP - Window page number.
       75       75
       76       76                DESCRIPTION:
       77       77                   M$CVM is called to map the requested physical page to
       78       78                the specified window page.  If RPN is -1 the presence bit
       79       79                in DA_WINDOW is reset, otherwise it is set unless the
       80       80                M$CVM fails.  If the altreturn is taken the error code is
       81       81                in the altret frame of the TCB.
       82       82                *** For internal use by DAM routines ***
       83       83                                                                           */
       84       84        /**/
       85       85        /**/
       86       86        /*D*    NAME:    DAM$DUMPFILE
       87       87                CALL:    CALL DAM$DUMPFILE(FID) ALTRET;
       88       88                INPUT:   FID - File identifier of dump file.  (TEXTC)
       89       89                DESCRIPTION:
       90       90                   DAM$DUMPFILE initializes mapping data to obtain memory
       91       91                from the specified dump file.  If the altreturn is taken the
       92       92                error code is in DA_MAPERR.
       93       93                                                                           */
       94       94        /**/
       95       95        /**/
       96       96        /*D*    NAME:    DAM$RUNNING
       97       97                CALL:    CALL DAM$RUNNING ALTRET;
       98       98                DESCRIPTION:
       99       99                   DAM$RUNNING initializes mapping data to obtain memory from
      100      100                the running sytem.  If the altreturn is taken the error code
      101      101                is in DA_MAPERR.
      102      102                                                                           */
      103      103        /**/
      104      104        /**/
      105      105        /*D*    NAME:    DAM$INIT
      106      106                CALL:    CALL DAM$INIT ALTRET;
      107      107                DESCRIPTION:
      108      108                   DAM$INIT must be called before using any of the other DAM
      109      109                routines.  DAM$INIT falls through to DAM$RUNNING.  If the
      110      110                altreturn is taken the error code is in DA_MAPERR.
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:20   
      111      111                                                                           */
      112      112        /**/
      113      113        /**/
      114      114        /*D*    NAME:    DAM$FREEM
      115      115                CALL:    CALL DAM$FREEM
      116      116                DESCRIPTION:
      117      117                   DAM$FREEM frees all of the allocatable special descriptor
      118      118                slots and all in use window pages.  The SPCL8 descriptor slot
      119      119                is used for TIGR data and is not freed.  If looking at the
      120      120                running system the SPCL7 descriptor slot is used for the
      121      121                monitor IS and is not freed.  The purpose of this routine is
      122      122                give the programmer some control over when pointers obtained
      123      123                by DAM$MAP become invalid.  Previously obtained pointers
      124      124                become invalid when a call to DAM$MAP requires that either
      125      125                 the next avialable special descriptor slot or the next
      126      126                available window page be reset to 0.
      127      127
      128      128                When mapping users DAM$FREEM should be called at least on
      129      129                each pass through the user tables.
      130      130                                                                           */
      131      131        /**/
      132      132        /**/
      133      133        /*D*    NAME:    DAM$USECPU
      134      134                CALL:    CALL DAM$USECPU(CPU#) ALTRET;
      135      135                INPUT:   CPU# - The processor number of the CPU whose page
      136      136                                table is to be used on subsequent calls to
      137      137                                DAM$VPAGE.  Note, this is the proccessor
      138      138                                number, not the port number.
      139      139                DESCRIPTION:
      140      140                   DAM$USECPU causes MONWSQ mapping to go through the page
      141      141                table of the specified CPU.  If the alternate return is taken
      142      142                the error code is in DA_MAPERR.  If DAM$MAP is called to
      143      143                perform an operation that can be done with an M$SAD then the
      144      144                currently specified CPU has no effect.  You see the CPU you
      145      145                are running on.  Therfore if CPU specific data is required
      146      146                then the V argument to DAM$MAP should be used to force mapping
      147      147                to window pages.
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:21   
      148      148
      149      149                DA_MAP_D is the static data module associated with these
      150      150                routines.
      151      151                                                                           */
      152      152        DAM$MAP: PROC(IP$,OP$,SYSID,DOMAYN,V) ALTRET;

    152  3 000000   000000 700200 xent  DAM$MAP      TSX0  ! X66_AUTO_5
         3 000001   000040 000005                    ZERO    32,5

      153      153        /**/
      154      154        /* PARAMETERS */
      155      155        /**/
      156      156    1   DCL IP$ PTR;
      157      157    1   DCL 1 IP REDEF IP$,
      158      158    1         2 CA UBIN(20) UNAL,
      159      159    1         2 BA UBIN(4) UNAL,
      160      160    1         2 SID,
      161      161    1           3 S UBIN(2) UNAL,
      162      162    1           3 D UBIN(10) UNAL;
      163      163    1   DCL OP$ PTR;
      164      164    1   DCL 1 OP REDEF OP$,
      165      165    1         2 CA UBIN(20) UNAL,
      166      166    1         2 BA UBIN(4) UNAL,
      167      167    1         2 SID,
      168      168    1           3 S UBIN(2) UNAL,
      169      169    1           3 D UBIN(10) UNAL;
      170      170    1   DCL DOMAYN SBIN;
      171      171    1   DCL SYSID SBIN;
      172      172    1   DCL V BIT(72) ALIGNED;
      173      173        /**/
      174      174        /* LOCALS FOR PARAMETERS */
      175      175        /**/
      176      176    1   DCL D# SBIN;
      177      177    1   DCL U# SBIN;
      178      178    1   DCL S# SBIN;
      179      179    1   DCL 1 V# ALIGNED,
      180      180    1         2 BOUND UBIN(20) UNAL,
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:22   
      181      181    1         2 FLAGS BIT(16) UNAL,
      182      182    1         2 P,
      183      183    1           3 CA UBIN(20) UNAL,
      184      184    1           3 BA UBIN(4) UNAL,
      185      185    1           3 SID,
      186      186    1             4 S UBIN(2) UNAL,
      187      187    1             4 D UBIN(10) UNAL,
      188      188    1         2 P$ REDEF P PTR;
      189      189        /**/
      190      190        /* AUTO DATA */
      191      191        /**/
      192      192    1   DCL I SBIN;
      193      193    1   DCL CVMFLG BIT(1) ALIGNED;
      194      194    1   DCL 1 DESC ALIGNED,
      195      195    1         2 BOUND UBIN(20) UNAL,
      196      196    1         2 FLAGS BIT(9) UNAL,
      197      197    1         2 WSR UBIN(3) UNAL,
      198      198    1         2 TYPE UBIN(4) UNAL,
      199      199    1         2 BASE UBIN WORD;
      200      200    1   DCL 1 DESC2 REDEF DESC,
      201      201    1         2 BOUND UBIN(20) UNAL,
      202      202    1         2 FLAGS BIT(3) UNAL,
      203      203    1         2 WSQ UBIN(9) UNAL,
      204      204    1         2 TYPE UBIN(4) UNAL,
      205      205    1         2 BASE UBIN WORD;
      206      206    1   DCL WSQ SBIN;
      207      207    1   DCL PAGES SBIN;
      208      208    1   DCL PT$ PTR;
      209      209    1   DCL LS$ PTR;
      210      210    1   DCL FCN SBIN;
      211      211        /**/
      212      212        /* INCLUDE FILES */
      213      213        /**/
      214      214        %INCLUDE DA_MAP_R;
      215      244        %INCLUDE DA_PERR_C;
      216      308        %INCLUDE CP_6;
      217      389        %INCLUDE B_STRINGS_C;
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:23   
      218      518        %INCLUDE B_LSDATA_C;
      219     3724        %INCLUDE M_INFO_C;
      220     3864        %INCLUDE B_SEGIDS_C;
      221     4403    1   DCL B$JIT$ PTR SYMREF;
      222     4404        %INCLUDE B$JIT;
      223     4694        %INCLUDE SS_SCHED_C;
      224     4927        %INCLUDE B$USER;
      225     5143        %B$USERREFS;
      226     5147        %INCLUDE B$MAP;
      227     5246        %INCLUDE JG_GHOSTS_C;
      228     5336        /**/
      229     5337        /* STATIC, CONSTANT, BASED AND OTHER STUFF */
      230     5338        /**/
      231     5339    1   DCL B$TCB$ PTR SYMREF;
      232     5340        %B$TCB;
      233     5343        %B$ALT;
      234     5351        %FPT_SAD;
      235     5366        %FPT_STD;
      236     5381    1   DCL VECINIT BIT(72) CONSTANT INIT('777777777640'O);
      237     5382    1   DCL LS(0:0) BIT(72) ALIGNED BASED;
      238     5383    1   DCL B$IS$ PTR SYMREF;
      239     5384    1   DCL DA_WSRWSQ(0:7) UBIN BYTE UNAL CONSTANT SYMDEF INIT(%MONWSQ,%MONWSQ,0,%CGWSQ,%
              5384            CPWSQ,
      240     5385    1                                                %DBWSQ,%ASLWSQ,%USERWSQ);
      241     5386    1   DCL LSOFFSET(0:7) SBIN CONSTANT INIT(%(%(MLS_BASE%-HJIT_BASE%)/4),
      242     5387    1                                        0,
      243     5388    1                                        0,
      244     5389    1                                        0,
      245     5390    1                                        %(%(CLS_BASE%-HJIT_BASE%)/4),
      246     5391    1                                        %(%(DLS_BASE%-HJIT_BASE%)/4),
      247     5392    1                                        %(%(ALS_BASE%-HJIT_BASE%)/4),
      248     5393    1                                        %(%(ULS_BASE%-HJIT_BASE%)/4));
      249     5394        /**/
      250     5395    1   DCL DAM$VPAGE ENTRY(5) ALTRET;
      251     5396    1   DCL DA_MAP_D ENTRY CONV(5);
      252     5397        /**/
      253     5398        %SUB NEVER="WHILE('0'B)";
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:24   
      254     5399        %SUB FOREVER="WHILE('1'B)";
      255     5400        %EQU FCN_MAP=0;
      256     5401        %EQU FCN_GETDESC=1;
      257     5402        %EJECT;
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:25   
      258     5403    1           FCN=%FCN_MAP;

   5403  3 000002   200025 450100                    STZ     FCN,,AUTO

      259     5404    1           GOTO COMMON;

   5404  3 000003   000010 710000 3                  TRA     COMMON

      260     5405    1   DAM$GETDESC: ENTRY(IP$,OP$,SYSID,DOMAYN,V) ALTRET;

   5405  3 000004   000000 700200 xent  DAM$GETDESC  TSX0  ! X66_AUTO_5
         3 000005   000040 000005                    ZERO    32,5

      261     5406    1           FCN=%FCN_GETDESC;

   5406  3 000006   000001 235007                    LDA     1,DL
         3 000007   200025 755100                    STA     FCN,,AUTO

   5406  3 000010                       COMMON       null
      262     5407    1   COMMON: ;
      263     5408    1           IF ADDR(DOMAYN)=ADDR(NIL) THEN D#=%MONWSR;

   5408  3 000010   200006 236100                    LDQ     @DOMAYN,,AUTO
         3 000011   000001 116000 xsym               CMPQ    B_VECTNIL+1
         3 000012   000015 601000 3                  TNZ     s:5409

   5408  3 000013   200010 450100                    STZ     D#,,AUTO
         3 000014   000020 710000 3                  TRA     s:5410

      264     5409    1           ELSE D#=DOMAYN;

   5409  3 000015   200006 470500                    LDP0    @DOMAYN,,AUTO
         3 000016   000000 235100                    LDA     0,,PR0
         3 000017   200010 755100                    STA     D#,,AUTO

      265     5410    1           CVMFLG=DA_DUMPFILE;

PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:26   
   5410  3 000020   000000 236000 xsym               LDQ     DA_DUMPFILE
         3 000021   400000 376003                    ANQ     -131072,DU
         3 000022   200016 756100                    STQ     CVMFLG,,AUTO

      266     5411    2           IF FCN~=%FCN_GETDESC THEN DO;

   5411  3 000023   200025 235100                    LDA     FCN,,AUTO
         3 000024   000001 115007                    CMPA    1,DL
         3 000025   000123 600000 3                  TZE     s:5434

      267     5412    3              IF ADDR(V)=ADDR(NIL) THEN DO;

   5412  3 000026   200007 236100                    LDQ     @V,,AUTO
         3 000027   000001 116000 xsym               CMPQ    B_VECTNIL+1
         3 000030   000040 601000 3                  TNZ     s:5417

      268     5413    3                 V#=VECINIT;

   5413  3 000031   000000 237000 2                  LDAQ    VECINIT
         3 000032   200013 755100                    STA     V#,,AUTO
         3 000033   200014 756100                    STQ     V#+1,,AUTO

      269     5414    3                 V#.P.SID=IP.SID;

   5414  3 000034   200003 470500                    LDP0    @IP$,,AUTO
         3 000035   000000 236100                    LDQ     0,,PR0
         3 000036   200014 752103                    STCQ    V#+1,'03'O,AUTO

      270     5415    3                 END;

   5415  3 000037   000123 710000 3                  TRA     s:5434

      271     5416    3              ELSE DO;

      272     5417    4                 IF ADDR(V)=ADDR(DA_MONISDATA) AND NOT DA_DUMPFILE THEN DO;

   5417  3 000040   000000 236000 4                  LDQ     0
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:27   
         3 000041   200007 116100                    CMPQ    @V,,AUTO
         3 000042   000060 601000 3                  TNZ     s:5423
         3 000043   000000 234000 xsym               SZN     DA_DUMPFILE
         3 000044   000060 604000 3                  TMI     s:5423

      273     5418    4                    OP$=IP$;

   5418  3 000045   200003 470500                    LDP0    @IP$,,AUTO
         3 000046   000000 236100                    LDQ     0,,PR0
         3 000047   200004 471500                    LDP1    @OP$,,AUTO
         3 000050   100000 756100                    STQ     0,,PR1

      274     5419    4                    OP.SID=DA_SDASN.SID(%MONIS#);

   5419  3 000051   000024 236000 xsym               LDQ     DA_SDASN+20
         3 000052   000030 772000                    QRL     24
         3 000053   100000 752103                    STCQ    0,'03'O,PR1

      275     5420    4                    DA_LASTBOUND=DA_SDASN.DESC.BOUND(%MONIS#);

   5420  3 000054   000022 236000 xsym               LDQ     DA_SDASN+18
         3 000055   000020 772000                    QRL     16
         3 000056   000000 756000 xsym               STQ     DA_LASTBOUND

      276     5421    4                    RETURN;

   5421  3 000057   000000 702200 xent               TSX2  ! X66_ARET

      277     5422    4                    END;
      278     5423    3                 V#=V;

   5423  3 000060   200007 470500                    LDP0    @V,,AUTO
         3 000061   000100 100500                    MLR     fill='000'O
         3 000062   000000 000010                    ADSC9   0,,PR0                   cn=0,n=8
         3 000063   200013 000010                    ADSC9   V#,,AUTO                 cn=0,n=8

      279     5424    3                 IF V#.P.SID~=IP.SID OR V#.P.CA>IP.CA OR V#.P.CA+V#.BOUND<IP.CA THEN
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:28   

   5424  3 000064   200003 471500                    LDP1    @IP$,,AUTO
         3 000065   200014 236100                    LDQ     V#+1,,AUTO
         3 000066   100000 676100                    ERQ     0,,PR1
         3 000067   007777 376007                    ANQ     4095,DL
         3 000070   000115 601000 3                  TNZ     s:5425
         3 000071   200014 236100                    LDQ     V#+1,,AUTO
         3 000072   000020 772000                    QRL     16
         3 000073   200030 756100                    STQ     @CODE+1,,AUTO
         3 000074   100000 236100                    LDQ     0,,PR1
         3 000075   000020 772000                    QRL     16
         3 000076   200030 116100                    CMPQ    @CODE+1,,AUTO
         3 000077   000115 604000 3                  TMI     s:5425
         3 000100   200013 236100                    LDQ     V#,,AUTO
         3 000101   000020 772000                    QRL     16
         3 000102   200031 756100                    STQ     @CODE+2,,AUTO
         3 000103   200014 236100                    LDQ     V#+1,,AUTO
         3 000104   000020 772000                    QRL     16
         3 000105   200031 036100                    ADLQ    @CODE+2,,AUTO
         3 000106   200032 756100                    STQ     @CODE+3,,AUTO
         3 000107   100000 236100                    LDQ     0,,PR1
         3 000110   000020 772000                    QRL     16
         3 000111   200033 756100                    STQ     @CODE+4,,AUTO
         3 000112   200032 236100                    LDQ     @CODE+3,,AUTO
         3 000113   200033 116100                    CMPQ    @CODE+4,,AUTO
         3 000114   000121 603000 3                  TRC     s:5431

      280     5425    3                    CALL SETERR(%E$DA_BAD_VEC) ALTRET(ALT);

   5425  3 000115   000002 236000 4                  LDQ     2
         3 000116   200027 756100                    STQ     FCN+2,,AUTO
         3 000117   001177 701000 3                  TSX1    SETERR
         3 000120   001176 702000 3                  TSX2    ALT

      281     5426        /*E*    ERROR:   DAM-E$DA_BAD_VEC
      282     5427                MESSAGE: The pointer part of the V argument to DAM$MAP must
      283     5428                         have the same segid as IP$ and IP$ must lie within
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:29   
      284     5429                         the area framed by V.
      285     5430                                                                           */
      286     5431    3                 CVMFLG='1'B;

   5431  3 000121   400000 236003                    LDQ     -131072,DU
         3 000122   200016 756100                    STQ     CVMFLG,,AUTO

      287     5432    3                 END;

      288     5433    2              END;

      289     5434    1           IF ADDR(SYSID)=ADDR(NIL) THEN

   5434  3 000123   200005 236100                    LDQ     @SYSID,,AUTO
         3 000124   000001 116000 xsym               CMPQ    B_VECTNIL+1
         3 000125   000140 601000 3                  TNZ     s:5438

      290     5435    1              IF D#=%MONWSR THEN U#=0;

   5435  3 000126   200010 235100                    LDA     D#,,AUTO
         3 000127   000132 601000 3                  TNZ     s:5436

   5435  3 000130   200011 450100                    STZ     U#,,AUTO
         3 000131   000172 710000 3                  TRA     USRFOUND

      291     5436    1              ELSE U#=B$JIT.USER;

   5436  3 000132   000000 470400 xsym               LDP0    B$JIT$
         3 000133   000000 236100                    LDQ     0,,PR0
         3 000134   000022 772000                    QRL     18
         3 000135   000777 376007                    ANQ     511,DL
         3 000136   200011 756100                    STQ     U#,,AUTO
         3 000137   000172 710000 3                  TRA     USRFOUND

      292     5437    2           ELSE DO;

      293     5438    2              IF SYSID<=0 THEN U#=-SYSID;
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:30   

   5438  3 000140   200005 470500                    LDP0    @SYSID,,AUTO
         3 000141   000000 235100                    LDA     0,,PR0
         3 000142   000147 605400 3                  TPNZ    s:5440

   5438  3 000143   000000 235100                    LDA     0,,PR0
         3 000144   000000 531000                    NEG     0
         3 000145   200011 755100                    STA     U#,,AUTO
         3 000146   000172 710000 3                  TRA     USRFOUND

      294     5439    3              ELSE DO;

      295     5440    4                 DO U#=1 TO DA_MUAIS;

   5440  3 000147   000001 235007                    LDA     1,DL
         3 000150   200011 755100                    STA     U#,,AUTO
         3 000151   000163 710000 3                  TRA     s:5442+1

      296     5441    4                    IF SYSID=B$USRT$->B$USER.SYSID(U#) THEN GOTO USRFOUND;

   5441  3 000152   200005 470500                    LDP0    @SYSID,,AUTO
         3 000153   200011 235100                    LDA     U#,,AUTO
         3 000154   000004 735000                    ALS     4
         3 000155   000000 471400 xsym               LDP1    B$USRT$
         3 000156   100014 236105                    LDQ     12,AL,PR1
         3 000157   777777 376007                    ANQ     -1,DL
         3 000160   000000 116100                    CMPQ    0,,PR0
         3 000161   000172 600000 3                  TZE     USRFOUND

      297     5442    4                    END;

   5442  3 000162   200011 054100                    AOS     U#,,AUTO
         3 000163   200011 236100                    LDQ     U#,,AUTO
         3 000164   000000 116000 xsym               CMPQ    DA_MUAIS
         3 000165   000152 604400 3                  TMOZ    s:5441

      298     5443    3                 CALL SETERR(%E$DA_NO_USER) ALTRET(ALT);
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:31   

   5443  3 000166   000004 236000 4                  LDQ     4
         3 000167   200027 756100                    STQ     FCN+2,,AUTO
         3 000170   001177 701000 3                  TSX1    SETERR
         3 000171   001176 702000 3                  TSX2    ALT

      299     5444    3                 END;

      300     5445    2              END;

   5441  3 000172                       USRFOUND     null
      301     5446    1   USRFOUND:;
      302     5447    1           IF U#<=JG_MING# THEN S#=U#;

   5447  3 000172   200011 235100                    LDA     U#,,AUTO
         3 000173   000017 115007                    CMPA    15,DL
         3 000174   000177 605400 3                  TPNZ    s:5448

   5447  3 000175   200012 755100                    STA     S#,,AUTO
         3 000176   000204 710000 3                  TRA     s:5449

      303     5448    1           ELSE S#=B$USRT$->B$USER.SYSID(U#);

   5448  3 000177   000004 735000                    ALS     4
         3 000200   000000 470400 xsym               LDP0    B$USRT$
         3 000201   000014 236105                    LDQ     12,AL,PR0
         3 000202   777777 376007                    ANQ     -1,DL
         3 000203   200012 756100                    STQ     S#,,AUTO

      304     5449    2           IF U#~=0 THEN DO;

   5449  3 000204   200011 235100                    LDA     U#,,AUTO
         3 000205   000223 600000 3                  TZE     s:5456

      305     5450    2              IF U#>DA_MUAIS OR B$USRT$->B$USER.US(U#)=%SS_SNULL THEN

   5450  3 000206   200011 236100                    LDQ     U#,,AUTO
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:32   
         3 000207   000000 116000 xsym               CMPQ    DA_MUAIS
         3 000210   000217 605400 3                  TPNZ    s:5451
         3 000211   000004 735000                    ALS     4
         3 000212   000000 470400 xsym               LDP0    B$USRT$
         3 000213   000011 236105                    LDQ     9,AL,PR0
         3 000214   770000 376003                    ANQ     -4096,DU
         3 000215   300000 116003                    CMPQ    98304,DU
         3 000216   000223 601000 3                  TNZ     s:5456

      306     5451    2                 CALL SETERR(%E$DA_NO_USER) ALTRET(ALT);

   5451  3 000217   000004 236000 4                  LDQ     4
         3 000220   200027 756100                    STQ     FCN+2,,AUTO
         3 000221   001177 701000 3                  TSX1    SETERR
         3 000222   001176 702000 3                  TSX2    ALT

      307     5452        /*E*    ERROR:   DAM-E$DA_NO_USER
      308     5453                MESSAGE: The specified sysid/user no. does not exist.
      309     5454                                                                           */
      310     5455    2              END;

      311     5456    2           DO CASE(IP.SID.S);

   5456  3 000223   200003 470500                    LDP0    @IP$,,AUTO
         3 000224   000000 236100                    LDQ     0,,PR0
         3 000225   000012 772000                    QRL     10
         3 000226   000003 376007                    ANQ     3,DL
         3 000227   000004 116007                    CMPQ    4,DL
         3 000230   000232 602006 3                  TNC     s:5456+7,QL
         3 000231   000427 710000 3                  TRA     s:5483
         3 000232   000236 710000 3                  TRA     s:5458
         3 000233   000427 710000 3                  TRA     s:5483
         3 000234   000301 710000 3                  TRA     s:5463
         3 000235   000344 710000 3                  TRA     s:5468

      312     5457    2            CASE(0);                       /* PARAMETER STACK */

PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:33   
      313     5458    2              I=DA_WSRWSQ(DA_PSR.WSR);

   5458  3 000236   000000 236000 xsym               LDQ     DA_PSR
         3 000237   000004 772000                    QRL     4
         3 000240   000007 376007                    ANQ     7,DL
         3 000241   000100 101406                    MRL     fill='000'O
         3 000242   000002 000001 2                  ADSC9   DA_WSRWSQ,Q              cn=0,n=1
         3 000243   200015 000004                    ADSC9   I,,AUTO                  cn=0,n=4

      314     5459    2              CALL DAM$VPAGE(DA_PSR.BASE/4096,%MSCPG3#,-U#,I) ALTRET(ALT);

   5459  3 000244   000001 236000 xsym               LDQ     DA_PSR+1
         3 000245   000014 772000                    QRL     12
         3 000246   200030 756100                    STQ     @CODE+1,,AUTO
         3 000247   200011 335100                    LCA     U#,,AUTO
         3 000250   200031 755100                    STA     @CODE+2,,AUTO
         3 000251   200015 631500                    EPPR1   I,,AUTO
         3 000252   200035 451500                    STP1    @CODE+6,,AUTO
         3 000253   200031 633500                    EPPR3   @CODE+2,,AUTO
         3 000254   200034 453500                    STP3    @CODE+5,,AUTO
         3 000255   000005 236000 4                  LDQ     5
         3 000256   200033 756100                    STQ     @CODE+4,,AUTO
         3 000257   200030 634500                    EPPR4   @CODE+1,,AUTO
         3 000260   200032 454500                    STP4    @CODE+3,,AUTO
         3 000261   200032 630500                    EPPR0   @CODE+3,,AUTO
         3 000262   000022 631400 xsym               EPPR1   B_VECTNIL+18
         3 000263   000000 701000 xent               TSX1    DAM$VPAGE
         3 000264   001176 702000 3                  TSX2    ALT

      315     5460    2              LS$=PINCRC(B$IS$,DA_MSCPG3*4096+MOD(DA_PSR.BASE,4096));

   5460  3 000265   000001 236000 xsym               LDQ     DA_PSR+1
         3 000266   007777 376007                    ANQ     4095,DL
         3 000267   200030 756100                    STQ     @CODE+1,,AUTO
         3 000270   000000 236000 xsym               LDQ     DA_MSCPG3
         3 000271   000014 736000                    QLS     12
         3 000272   200030 036100                    ADLQ    @CODE+1,,AUTO
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:34   
         3 000273   000020 736000                    QLS     16
         3 000274   000000 036000 xsym               ADLQ    B$IS$
         3 000275   200024 756100                    STQ     LS$,,AUTO

      316     5461    2              CVMFLG='1'B;

   5461  3 000276   400000 236003                    LDQ     -131072,DU
         3 000277   200016 756100                    STQ     CVMFLG,,AUTO
         3 000300   000433 710000 3                  TRA     s:5489

      317     5462    2            CASE(2);                       /* ARGUMENT STACK */

      318     5463    2              I=DA_WSRWSQ(DA_ASR.WSR);

   5463  3 000301   000000 236000 xsym               LDQ     DA_ASR
         3 000302   000004 772000                    QRL     4
         3 000303   000007 376007                    ANQ     7,DL
         3 000304   000100 101406                    MRL     fill='000'O
         3 000305   000002 000001 2                  ADSC9   DA_WSRWSQ,Q              cn=0,n=1
         3 000306   200015 000004                    ADSC9   I,,AUTO                  cn=0,n=4

      319     5464    2              CALL DAM$VPAGE(DA_ASR.BASE/4096,%MSCPG3#,-U#,I) ALTRET(ALT);

   5464  3 000307   000001 236000 xsym               LDQ     DA_ASR+1
         3 000310   000014 772000                    QRL     12
         3 000311   200030 756100                    STQ     @CODE+1,,AUTO
         3 000312   200011 335100                    LCA     U#,,AUTO
         3 000313   200031 755100                    STA     @CODE+2,,AUTO
         3 000314   200015 631500                    EPPR1   I,,AUTO
         3 000315   200035 451500                    STP1    @CODE+6,,AUTO
         3 000316   200031 633500                    EPPR3   @CODE+2,,AUTO
         3 000317   200034 453500                    STP3    @CODE+5,,AUTO
         3 000320   000005 236000 4                  LDQ     5
         3 000321   200033 756100                    STQ     @CODE+4,,AUTO
         3 000322   200030 634500                    EPPR4   @CODE+1,,AUTO
         3 000323   200032 454500                    STP4    @CODE+3,,AUTO
         3 000324   200032 630500                    EPPR0   @CODE+3,,AUTO
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:35   
         3 000325   000022 631400 xsym               EPPR1   B_VECTNIL+18
         3 000326   000000 701000 xent               TSX1    DAM$VPAGE
         3 000327   001176 702000 3                  TSX2    ALT

      320     5465    2              LS$=PINCRC(B$IS$,DA_MSCPG3*4096+MOD(DA_ASR.BASE,4096));

   5465  3 000330   000001 236000 xsym               LDQ     DA_ASR+1
         3 000331   007777 376007                    ANQ     4095,DL
         3 000332   200030 756100                    STQ     @CODE+1,,AUTO
         3 000333   000000 236000 xsym               LDQ     DA_MSCPG3
         3 000334   000014 736000                    QLS     12
         3 000335   200030 036100                    ADLQ    @CODE+1,,AUTO
         3 000336   000020 736000                    QLS     16
         3 000337   000000 036000 xsym               ADLQ    B$IS$
         3 000340   200024 756100                    STQ     LS$,,AUTO

      321     5466    2              CVMFLG='1'B;

   5466  3 000341   400000 236003                    LDQ     -131072,DU
         3 000342   200016 756100                    STQ     CVMFLG,,AUTO
         3 000343   000433 710000 3                  TRA     s:5489

      322     5467    2            CASE(3);                       /* LINKAGE SEGMENT */

      323     5468    3              DO CASE(D#);

   5468  3 000344   200010 235100                    LDA     D#,,AUTO
         3 000345   000010 115007                    CMPA    8,DL
         3 000346   000350 602005 3                  TNC     s:5468+4,AL
         3 000347   000422 710000 3                  TRA     s:5476
         3 000350   000360 710000 3                  TRA     s:5470
         3 000351   000422 710000 3                  TRA     s:5476
         3 000352   000422 710000 3                  TRA     s:5476
         3 000353   000422 710000 3                  TRA     s:5476
         3 000354   000376 710000 3                  TRA     s:5473
         3 000355   000376 710000 3                  TRA     s:5473
         3 000356   000376 710000 3                  TRA     s:5473
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:36   
         3 000357   000376 710000 3                  TRA     s:5473

      324     5469    3               CASE(%MONWSR);

      325     5470    3                 CALL DAM$VPAGE(HJIT_BASE%/4096,%MSCPG3#,,%MONWSQ) ALTRET(ALT);

   5470  3 000360   000007 236000 4                  LDQ     7
         3 000361   000001 235000 xsym               LDA     B_VECTNIL+1
         3 000362   200032 757100                    STAQ    @CODE+3,,AUTO
         3 000363   000010 237000 4                  LDAQ    8
         3 000364   200030 757100                    STAQ    @CODE+1,,AUTO
         3 000365   200030 630500                    EPPR0   @CODE+1,,AUTO
         3 000366   000022 631400 xsym               EPPR1   B_VECTNIL+18
         3 000367   000000 701000 xent               TSX1    DAM$VPAGE
         3 000370   001176 702000 3                  TSX2    ALT

      326     5471    3                 LS$=PINCRW(B$IS$,DA_MSCPG3*1024);

   5471  3 000371   000000 236000 xsym               LDQ     DA_MSCPG3
         3 000372   000034 736000                    QLS     28
         3 000373   000000 036000 xsym               ADLQ    B$IS$
         3 000374   200024 756100                    STQ     LS$,,AUTO
         3 000375   000433 710000 3                  TRA     s:5489

      327     5472    3               CASE(%CPWSR,%DBWSR,%ASLWSR,%USERWSR);

      328     5473    3                 CALL DAM$VPAGE(HJIT_BASE%/4096,%MSCPG3#,-U#,%USERWSQ) ALTRET(ALT);

   5473  3 000376   200011 335100                    LCA     U#,,AUTO
         3 000377   200030 755100                    STA     @CODE+1,,AUTO
         3 000400   000012 236000 4                  LDQ     10
         3 000401   200035 756100                    STQ     @CODE+6,,AUTO
         3 000402   200030 631500                    EPPR1   @CODE+1,,AUTO
         3 000403   200034 451500                    STP1    @CODE+5,,AUTO
         3 000404   000010 237000 4                  LDAQ    8
         3 000405   200032 757100                    STAQ    @CODE+3,,AUTO
         3 000406   200032 630500                    EPPR0   @CODE+3,,AUTO
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:37   
         3 000407   000022 631400 xsym               EPPR1   B_VECTNIL+18
         3 000410   000000 701000 xent               TSX1    DAM$VPAGE
         3 000411   001176 702000 3                  TSX2    ALT

      329     5474    3                 LS$=PINCRW(B$IS$,DA_MSCPG3*1024+LSOFFSET(D#));

   5474  3 000412   200010 720100                    LXL0    D#,,AUTO
         3 000413   000000 236000 xsym               LDQ     DA_MSCPG3
         3 000414   000012 736000                    QLS     10
         3 000415   000004 036010 2                  ADLQ    LSOFFSET,X0
         3 000416   000022 736000                    QLS     18
         3 000417   000000 036000 xsym               ADLQ    B$IS$
         3 000420   200024 756100                    STQ     LS$,,AUTO
         3 000421   000433 710000 3                  TRA     s:5489

      330     5475    3               CASE(ELSE);

      331     5476    3                 CALL SETERR(%E$DA_BAD_DOMAIN) ALTRET(ALT);

   5476  3 000422   000014 236000 4                  LDQ     12
         3 000423   200027 756100                    STQ     FCN+2,,AUTO
         3 000424   001177 701000 3                  TSX1    SETERR
         3 000425   001176 702000 3                  TSX2    ALT

      332     5477        /*E*    ERROR:   DAM-E$DA_BAD_DOMAIN
      333     5478                MESSAGE: DOMAIN must be one of %MONWSR, %CPWSR, %DBWSR, %ASLWSR,
      334     5479                         or %USERWSR.
      335     5480                                                                           */
      336     5481    3               END;

   5481  3 000426   000433 710000 3                  TRA     s:5489

      337     5482    2            CASE(ELSE);

      338     5483    2              CALL SETERR(%E$DA_NOT_LS) ALTRET(ALT);

   5483  3 000427   000016 236000 4                  LDQ     14
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:38   
         3 000430   200027 756100                    STQ     FCN+2,,AUTO
         3 000431   001177 701000 3                  TSX1    SETERR
         3 000432   001176 702000 3                  TSX2    ALT

      339     5484        /*E*    ERROR:   DAM-E$DA_NOT_LS
      340     5485                MESSAGE: Bad input pointer to DAM$MAP.
      341     5486                                                                           */
      342     5487    2            END;

      343     5488        /**/
      344     5489    1           DESC=LS$->LS(IP.SID.D);

   5489  3 000433   200003 470500                    LDP0    @IP$,,AUTO
         3 000434   000000 236100                    LDQ     0,,PR0
         3 000435   000001 736000                    QLS     1
         3 000436   003776 376007                    ANQ     2046,DL
         3 000437   000002 736000                    QLS     2
         3 000440   200024 471500                    LDP1    LS$,,AUTO
         3 000441   000100 100506                    MLR     fill='000'O
         3 000442   100000 000010                    ADSC9   0,Q,PR1                  cn=0,n=8
         3 000443   200017 000010                    ADSC9   DESC,,AUTO               cn=0,n=8

      345     5490    2           IF FCN=%FCN_GETDESC THEN DO;

   5490  3 000444   200025 235100                    LDA     FCN,,AUTO
         3 000445   000001 115007                    CMPA    1,DL
         3 000446   000457 601000 3                  TNZ     s:5495

      346     5491    2              V=DESC;

   5491  3 000447   200007 473500                    LDP3    @V,,AUTO
         3 000450   000100 100500                    MLR     fill='000'O
         3 000451   200017 000010                    ADSC9   DESC,,AUTO               cn=0,n=8
         3 000452   300000 000010                    ADSC9   0,,PR3                   cn=0,n=8

      347     5492    2              OP$=LS$;

PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:39   
   5492  3 000453   200024 236100                    LDQ     LS$,,AUTO
         3 000454   200004 474500                    LDP4    @OP$,,AUTO
         3 000455   400000 756100                    STQ     0,,PR4

      348     5493    2              RETURN;

   5493  3 000456   000000 702200 xent               TSX2  ! X66_ARET

      349     5494    2              END;
      350     5495    1           DESC.BASE=DESC.BASE+V#.P.CA;

   5495  3 000457   200014 236100                    LDQ     V#+1,,AUTO
         3 000460   000020 772000                    QRL     16
         3 000461   200020 036100                    ADLQ    DESC+1,,AUTO
         3 000462   200020 756100                    STQ     DESC+1,,AUTO

      351     5496    1           DESC.BOUND=DESC.BOUND-V#.P.CA;

   5496  3 000463   200014 236100                    LDQ     V#+1,,AUTO
         3 000464   000020 772000                    QRL     16
         3 000465   200030 756100                    STQ     @CODE+1,,AUTO
         3 000466   200017 236100                    LDQ     DESC,,AUTO
         3 000467   000020 772000                    QRL     16
         3 000470   200030 136100                    SBLQ    @CODE+1,,AUTO
         3 000471   000020 736000                    QLS     16
         3 000472   200017 676100                    ERQ     DESC,,AUTO
         3 000473   000034 376000 xsym               ANQ     B_VECTNIL+28
         3 000474   200017 656100                    ERSQ    DESC,,AUTO

      352     5497    1           IF DESC.BOUND>V#.BOUND THEN DESC.BOUND=V#.BOUND;

   5497  3 000475   200017 236100                    LDQ     DESC,,AUTO
         3 000476   000020 772000                    QRL     16
         3 000477   200030 756100                    STQ     @CODE+1,,AUTO
         3 000500   200013 236100                    LDQ     V#,,AUTO
         3 000501   000020 772000                    QRL     16
         3 000502   200030 116100                    CMPQ    @CODE+1,,AUTO
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:40   
         3 000503   000511 605000 3                  TPL     s:5498

   5497  3 000504   200013 236100                    LDQ     V#,,AUTO
         3 000505   200017 676100                    ERQ     DESC,,AUTO
         3 000506   000034 376000 xsym               ANQ     B_VECTNIL+28
         3 000507   200017 656100                    ERSQ    DESC,,AUTO
         3 000510   000515 710000 3                  TRA     s:5499

      353     5498    1           ELSE V#.BOUND=DESC.BOUND;

   5498  3 000511   200017 236100                    LDQ     DESC,,AUTO
         3 000512   200013 676100                    ERQ     V#,,AUTO
         3 000513   000034 376000 xsym               ANQ     B_VECTNIL+28
         3 000514   200013 656100                    ERSQ    V#,,AUTO

      354     5499    2           DO CASE(DESC.TYPE);

   5499  3 000515   200017 720100                    LXL0    DESC,,AUTO
         3 000516   000017 360003                    ANX0    15,DU
         3 000517   000003 100003                    CMPX0   3,DU
         3 000520   000522 602010 3                  TNC     s:5499+5,X0
         3 000521   000541 710000 3                  TRA     s:5505
         3 000522   000525 710000 3                  TRA     s:5501
         3 000523   000541 710000 3                  TRA     s:5505
         3 000524   000534 710000 3                  TRA     s:5503

      355     5500    2            CASE(0);

      356     5501    2              WSQ=DA_WSRWSQ(DESC.WSR);

   5501  3 000525   200017 236100                    LDQ     DESC,,AUTO
         3 000526   000004 772000                    QRL     4
         3 000527   000007 376007                    ANQ     7,DL
         3 000530   000100 101406                    MRL     fill='000'O
         3 000531   000002 000001 2                  ADSC9   DA_WSRWSQ,Q              cn=0,n=1
         3 000532   200021 000004                    ADSC9   WSQ,,AUTO                cn=0,n=4
         3 000533   000545 710000 3                  TRA     s:5510
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:41   

      357     5502    2            CASE(2);

      358     5503    2              WSQ=DESC2.WSQ;

   5503  3 000534   200017 236100                    LDQ     DESC,,AUTO
         3 000535   000004 772000                    QRL     4
         3 000536   000777 376007                    ANQ     511,DL
         3 000537   200021 756100                    STQ     WSQ,,AUTO
         3 000540   000545 710000 3                  TRA     s:5510

      359     5504    2            CASE(ELSE);

      360     5505    2              CALL SETERR(%E$DA_BAD_DESC) ALTRET(ALT);

   5505  3 000541   000020 236000 4                  LDQ     16
         3 000542   200027 756100                    STQ     FCN+2,,AUTO
         3 000543   001177 701000 3                  TSX1    SETERR
         3 000544   001176 702000 3                  TSX2    ALT

      361     5506        /*E*    ERROR:   DAM-E$DA_BAD_DESC
      362     5507                MESSAGE: The descriptor referenced by IP$ must be of type 0 or 2.
      363     5508                                                                           */
      364     5509    2            END;

      365     5510    1           IF WSQ~=%USERWSQ THEN U#=0;

   5510  3 000545   200021 235100                    LDA     WSQ,,AUTO
         3 000546   000010 115007                    CMPA    8,DL
         3 000547   000552 600000 3                  TZE     s:5511

   5510  3 000550   200011 450100                    STZ     U#,,AUTO
         3 000551   000562 710000 3                  TRA     s:5512

      366     5511    1           ELSE IF U#~=B$JIT.USER THEN CVMFLG='1'B;

   5511  3 000552   000000 470400 xsym               LDP0    B$JIT$
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:42   
         3 000553   000000 236100                    LDQ     0,,PR0
         3 000554   000022 772000                    QRL     18
         3 000555   000777 376007                    ANQ     511,DL
         3 000556   200011 116100                    CMPQ    U#,,AUTO
         3 000557   000562 600000 3                  TZE     s:5512

   5511  3 000560   400000 236003                    LDQ     -131072,DU
         3 000561   200016 756100                    STQ     CVMFLG,,AUTO

      367     5512    1           IF D#~=%MONWSR THEN CVMFLG='1'B;

   5512  3 000562   200010 236100                    LDQ     D#,,AUTO
         3 000563   000566 600000 3                  TZE     s:5513

   5512  3 000564   400000 236003                    LDQ     -131072,DU
         3 000565   200016 756100                    STQ     CVMFLG,,AUTO

      368     5513    1           PAGES=(DESC.BOUND+MOD(DESC.BASE,4096))/4096;

   5513  3 000566   200020 236100                    LDQ     DESC+1,,AUTO
         3 000567   007777 376007                    ANQ     4095,DL
         3 000570   200030 756100                    STQ     @CODE+1,,AUTO
         3 000571   200017 236100                    LDQ     DESC,,AUTO
         3 000572   000020 772000                    QRL     16
         3 000573   200031 756100                    STQ     @CODE+2,,AUTO
         3 000574   200030 236100                    LDQ     @CODE+1,,AUTO
         3 000575   200031 036100                    ADLQ    @CODE+2,,AUTO
         3 000576   000014 772000                    QRL     12
         3 000577   200022 756100                    STQ     PAGES,,AUTO

      369     5514    2           IF (WSQ~=%MONWSQ OR IP.SID~=%ISSID) AND NOT CVMFLG THEN DO;

   5514  3 000600   000001 115007                    CMPA    1,DL
         3 000601   000607 601000 3                  TNZ     s:5514+7
         3 000602   200003 470500                    LDP0    @IP$,,AUTO
         3 000603   000000 236100                    LDQ     0,,PR0
         3 000604   007777 376007                    ANQ     4095,DL
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:43   
         3 000605   006000 116007                    CMPQ    3072,DL
         3 000606   000655 600000 3                  TZE     s:5523
         3 000607   200016 234100                    SZN     CVMFLG,,AUTO
         3 000610   000655 604000 3                  TMI     s:5523

      370     5515    2              CALL DAM$VPAGE(0,%MSCPG3#,-U#,WSQ,1) ALTRET(ALT);

   5515  3 000611   200011 336100                    LCQ     U#,,AUTO
         3 000612   200030 756100                    STQ     @CODE+1,,AUTO
         3 000613   000007 236000 4                  LDQ     7
         3 000614   200035 756100                    STQ     @CODE+6,,AUTO
         3 000615   200021 630500                    EPPR0   WSQ,,AUTO
         3 000616   200034 450500                    STP0    @CODE+5,,AUTO
         3 000617   200030 631500                    EPPR1   @CODE+1,,AUTO
         3 000620   200033 451500                    STP1    @CODE+4,,AUTO
         3 000621   000005 236000 4                  LDQ     5
         3 000622   200032 756100                    STQ     @CODE+3,,AUTO
         3 000623   000021 236000 4                  LDQ     17
         3 000624   200031 756100                    STQ     @CODE+2,,AUTO
         3 000625   200031 630500                    EPPR0   @CODE+2,,AUTO
         3 000626   000023 631400 xsym               EPPR1   B_VECTNIL+19
         3 000627   000000 701000 xent               TSX1    DAM$VPAGE
         3 000630   001176 702000 3                  TSX2    ALT

      371     5516        /* THE ABOVE CALL CAUSES DAM$VPAGE TO PUT THE PAGE TABLE FOR WSQ
      372     5517           IN MSCPG1 */
      373     5518    2              PT$=PINCRW(B$IS$,DA_MSCPG1*1024);

   5518  3 000631   000000 236000 xsym               LDQ     DA_MSCPG1
         3 000632   000034 736000                    QLS     28
         3 000633   000000 036000 xsym               ADLQ    B$IS$
         3 000634   200023 756100                    STQ     PT$,,AUTO

      374     5519    3              DO I=0 TO PAGES;

   5519  3 000635   200015 450100                    STZ     I,,AUTO
         3 000636   000652 710000 3                  TRA     s:5521+1
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:44   

      375     5520    3                 IF PT$->B$MAP.CTRL(I+DESC.BASE/4096) & %PGHKEEP THEN CVMFLG='1'B;

   5520  3 000637   200020 236100                    LDQ     DESC+1,,AUTO
         3 000640   000014 772000                    QRL     12
         3 000641   200015 036100                    ADLQ    I,,AUTO
         3 000642   200023 470500                    LDP0    PT$,,AUTO
         3 000643   000000 236106                    LDQ     0,QL,PR0
         3 000644   000036 736000                    QLS     30
         3 000645   100000 376003                    ANQ     32768,DU
         3 000646   000651 600000 3                  TZE     s:5521

   5520  3 000647   400000 236003                    LDQ     -131072,DU
         3 000650   200016 756100                    STQ     CVMFLG,,AUTO

      376     5521    3                 END;

   5521  3 000651   200015 054100                    AOS     I,,AUTO
         3 000652   200015 236100                    LDQ     I,,AUTO
         3 000653   200022 116100                    CMPQ    PAGES,,AUTO
         3 000654   000637 604400 3                  TMOZ    s:5520

      377     5522    2              END;

      378     5523    2           DO I=0 TO 7;

   5523  3 000655   200015 450100                    STZ     I,,AUTO

      379     5524    3              IF DA_SDASN.DESC(I)=DESC AND S#=DA_SDASN.SYSID(I) THEN DO;

   5524  3 000656   200015 236100                    LDQ     I,,AUTO
         3 000657   000014 402007                    MPY     12,DL
         3 000660   000100 106406                    CMPC    fill='000'O
         3 000661   000000 000010 xsym               ADSC9   DA_SDASN,Q               cn=0,n=8
         3 000662   200017 000010                    ADSC9   DESC,,AUTO               cn=0,n=8
         3 000663   000723 601000 3                  TNZ     s:5531
         3 000664   200015 236100                    LDQ     I,,AUTO
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:45   
         3 000665   000003 402007                    MPY     3,DL
         3 000666   000002 236006 xsym               LDQ     DA_SDASN+2,QL
         3 000667   777777 376007                    ANQ     -1,DL
         3 000670   200012 116100                    CMPQ    S#,,AUTO
         3 000671   000723 601000 3                  TNZ     s:5531

      380     5525    3                 OP=IP;

   5525  3 000672   200003 470500                    LDP0    @IP$,,AUTO
         3 000673   000000 236100                    LDQ     0,,PR0
         3 000674   200004 471500                    LDP1    @OP$,,AUTO
         3 000675   100000 756100                    STQ     0,,PR1

      381     5526    3                 OP.SID=DA_SDASN.SID(I);

   5526  3 000676   200015 236100                    LDQ     I,,AUTO
         3 000677   000003 402007                    MPY     3,DL
         3 000700   000002 236006 xsym               LDQ     DA_SDASN+2,QL
         3 000701   000030 772000                    QRL     24
         3 000702   100000 752103                    STCQ    0,'03'O,PR1

      382     5527    3                 DA_LASTBOUND=DA_SDASN.DESC.BOUND(I);

   5527  3 000703   200015 236100                    LDQ     I,,AUTO
         3 000704   000003 402007                    MPY     3,DL
         3 000705   000000 236006 xsym               LDQ     DA_SDASN,QL
         3 000706   000020 772000                    QRL     16
         3 000707   000000 756000 xsym               STQ     DA_LASTBOUND

      383     5528    3                 OP.CA=IP.CA-V#.P.CA;

   5528  3 000710   200014 236100                    LDQ     V#+1,,AUTO
         3 000711   000020 772000                    QRL     16
         3 000712   200030 756100                    STQ     @CODE+1,,AUTO
         3 000713   000000 236100                    LDQ     0,,PR0
         3 000714   000020 772000                    QRL     16
         3 000715   200030 136100                    SBLQ    @CODE+1,,AUTO
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:46   
         3 000716   000020 736000                    QLS     16
         3 000717   100000 676100                    ERQ     0,,PR1
         3 000720   000034 376000 xsym               ANQ     B_VECTNIL+28
         3 000721   100000 656100                    ERSQ    0,,PR1

      384     5529    3                 RETURN;

   5529  3 000722   000000 702200 xent               TSX2  ! X66_ARET

      385     5530    3                 END;
      386     5531    2              END;

   5531  3 000723   200015 054100                    AOS     I,,AUTO
         3 000724   200015 235100                    LDA     I,,AUTO
         3 000725   000007 115007                    CMPA    7,DL
         3 000726   000656 604400 3                  TMOZ    s:5524

      387     5532    2           IF CVMFLG THEN DO;

   5532  3 000727   200016 234100                    SZN     CVMFLG,,AUTO
         3 000730   001063 605000 3                  TPL     s:5561

      388     5533    2              IF DA_WINDOWBASE+PAGES>DA_WINDOWMAX THEN

   5533  3 000731   000000 236000 xsym               LDQ     DA_WINDOWBASE
         3 000732   200022 036100                    ADLQ    PAGES,,AUTO
         3 000733   000000 116000 xsym               CMPQ    DA_WINDOWMAX
         3 000734   000741 604400 3                  TMOZ    s:5543

      389     5534    2                 CALL SETERR(%E$DA_SEG_TOO_BIG) ALTRET(ALT);

   5534  3 000735   000023 236000 4                  LDQ     19
         3 000736   200027 756100                    STQ     FCN+2,,AUTO
         3 000737   001177 701000 3                  TSX1    SETERR
         3 000740   001176 702000 3                  TSX2    ALT

      390     5535        /*E*    ERROR:   DAM-E$DA_SEG_TOO_BIG
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:47   
      391     5536                MESSAGE: The segment referenced is larger than the available
      392     5537                         window area.
      393     5538                MESSAGE1: If this is a dump file, it may help to !ORES MEM=300.
      394     5539                MESSAGE2: To map to this segment it is necessary to specify
      395     5540                          a vector framing only a portion of the segment that
      396     5541                          will fit into the available window area.
      397     5542                                                                           */
      398     5543    3              IF DA_NXTWINDOW+DA_WINDOWBASE+PAGES>DA_WINDOWMAX THEN DO;

   5543  3 000741   000000 236000 xsym               LDQ     DA_NXTWINDOW
         3 000742   000000 036000 xsym               ADLQ    DA_WINDOWBASE
         3 000743   200022 036100                    ADLQ    PAGES,,AUTO
         3 000744   000000 116000 xsym               CMPQ    DA_WINDOWMAX
         3 000745   000765 604400 3                  TMOZ    s:5549

      399     5544    3                 DA_NXTWINDOW=0;

   5544  3 000746   000000 450000 xsym               STZ     DA_NXTWINDOW

      400     5545    4                 DO I=0 TO 7;

   5545  3 000747   200015 450100                    STZ     I,,AUTO

      401     5546    4                    IF DA_SDASN.CVM(I) THEN DA_SDASN.DESC(I)='0'B;

   5546  3 000750   200015 236100                    LDQ     I,,AUTO
         3 000751   000003 402007                    MPY     3,DL
         3 000752   000002 236006 xsym               LDQ     DA_SDASN+2,QL
         3 000753   000040 316003                    CANQ    32,DU
         3 000754   000761 600000 3                  TZE     s:5547

   5546  3 000755   200015 236100                    LDQ     I,,AUTO
         3 000756   000003 402007                    MPY     3,DL
         3 000757   000000 450006 xsym               STZ     DA_SDASN,QL
         3 000760   000001 450006 xsym               STZ     DA_SDASN+1,QL

      402     5547    4                    END;
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:48   

   5547  3 000761   200015 054100                    AOS     I,,AUTO
         3 000762   200015 235100                    LDA     I,,AUTO
         3 000763   000007 115007                    CMPA    7,DL
         3 000764   000750 604400 3                  TMOZ    s:5546

      403     5548    3                 END;

      404     5549    2              CALL DAM$VPAGE(DESC.BASE/4096,DA_NXTWINDOW,-U#,WSQ,PAGES+1) ALTRET(
              5549                       VPAGEALT);

   5549  3 000765   200020 236100                    LDQ     DESC+1,,AUTO
         3 000766   000014 772000                    QRL     12
         3 000767   200030 756100                    STQ     @CODE+1,,AUTO
         3 000770   200011 335100                    LCA     U#,,AUTO
         3 000771   200031 755100                    STA     @CODE+2,,AUTO
         3 000772   200022 235100                    LDA     PAGES,,AUTO
         3 000773   000001 035007                    ADLA    1,DL
         3 000774   200032 755100                    STA     @CODE+3,,AUTO
         3 000775   200032 630500                    EPPR0   @CODE+3,,AUTO
         3 000776   200037 450500                    STP0    @CODE+8,,AUTO
         3 000777   200021 631500                    EPPR1   WSQ,,AUTO
         3 001000   200036 451500                    STP1    @CODE+7,,AUTO
         3 001001   200031 633500                    EPPR3   @CODE+2,,AUTO
         3 001002   200035 453500                    STP3    @CODE+6,,AUTO
         3 001003   000024 236000 4                  LDQ     20
         3 001004   200034 756100                    STQ     @CODE+5,,AUTO
         3 001005   200030 634500                    EPPR4   @CODE+1,,AUTO
         3 001006   200033 454500                    STP4    @CODE+4,,AUTO
         3 001007   200033 630500                    EPPR0   @CODE+4,,AUTO
         3 001010   000023 631400 xsym               EPPR1   B_VECTNIL+19
         3 001011   000000 701000 xent               TSX1    DAM$VPAGE
         3 001012   001014 702000 3                  TSX2    VPAGEALT

      405     5550    3              DO NEVER;

   5550  3 001013   001020 710000 3                  TRA     s:5553
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:49   

      406     5551    3   VPAGEALT:     IF DA_MAPERR.CODE~=%E$DA_NOT_DUMPED THEN GOTO ALT;

   5551  3 001014   000000 236000 xsym  VPAGEALT     LDQ     DA_MAPERR
         3 001015   377770 376007                    ANQ     131064,DL
         3 001016   001460 116007                    CMPQ    816,DL
         3 001017   001176 601000 3                  TNZ     ALT

      407     5552    3                 END;

      408     5553    2              FPT_STD.V.USERSID#=DA_SDASN.SID(DA_NXTSPCL);

   5553  3 001020   000000 236000 xsym               LDQ     DA_NXTSPCL
         3 001021   000003 402007                    MPY     3,DL
         3 001022   000002 236006 xsym               LDQ     DA_SDASN+2,QL
         3 001023   000030 772000                    QRL     24
         3 001024   000010 752003 1                  STCQ    FPT_STD+4,'03'O

      409     5554    2              FPT_STD.AREA_.BOUND=DESC.BOUND;

   5554  3 001025   200017 236100                    LDQ     DESC,,AUTO
         3 001026   000006 676000 1                  ERQ     FPT_STD+2
         3 001027   000034 376000 xsym               ANQ     B_VECTNIL+28
         3 001030   000006 656000 1                  ERSQ    FPT_STD+2

      410     5555    2              FPT_STD.AREA_.AREA$=PINCRC(B$IS$,(DA_NXTWINDOW+DA_WINDOWBASE)*4096+MOD(
              5555                       DESC.BASE,4096));

   5555  3 001031   000000 236000 xsym               LDQ     DA_NXTWINDOW
         3 001032   000000 036000 xsym               ADLQ    DA_WINDOWBASE
         3 001033   200030 756100                    STQ     @CODE+1,,AUTO
         3 001034   200020 236100                    LDQ     DESC+1,,AUTO
         3 001035   007777 376007                    ANQ     4095,DL
         3 001036   200031 756100                    STQ     @CODE+2,,AUTO
         3 001037   200030 236100                    LDQ     @CODE+1,,AUTO
         3 001040   000014 736000                    QLS     12
         3 001041   200031 036100                    ADLQ    @CODE+2,,AUTO
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:50   
         3 001042   000020 736000                    QLS     16
         3 001043   000000 036000 xsym               ADLQ    B$IS$
         3 001044   000007 756000 1                  STQ     FPT_STD+3

      411     5556    2              CALL M$STD(FPT_STD) ALTRET(PMMEALT);

   5556  3 001045   000004 630400 1                  EPPR0   FPT_STD
         3 001046   430016 713400                    CLIMB   alt,+12302
         3 001047   400400 401760                    pmme    nvectors=2
         3 001050   001172 702000 3                  TSX2    PMMEALT

      412     5557    2              DA_SDASN.CVM(DA_NXTSPCL)='1'B;

   5557  3 001051   000000 236000 xsym               LDQ     DA_NXTSPCL
         3 001052   000003 402007                    MPY     3,DL
         3 001053   000000 620006                    EAX0    0,QL
         3 001054   000040 236003                    LDQ     32,DU
         3 001055   000002 256010 xsym               ORSQ    DA_SDASN+2,X0

      413     5558    2              DA_NXTWINDOW=DA_NXTWINDOW+PAGES+1;

   5558  3 001056   000000 236000 xsym               LDQ     DA_NXTWINDOW
         3 001057   200022 036100                    ADLQ    PAGES,,AUTO
         3 001060   000001 036007                    ADLQ    1,DL
         3 001061   000000 756000 xsym               STQ     DA_NXTWINDOW

      414     5559    2              END;

   5559  3 001062   001125 710000 3                  TRA     s:5570

      415     5560    2           ELSE DO;

      416     5561    2              FPT_SAD.V.USERSID#=DA_SDASN.SID(DA_NXTSPCL);

   5561  3 001063   000000 236000 xsym               LDQ     DA_NXTSPCL
         3 001064   000003 402007                    MPY     3,DL
         3 001065   000002 236006 xsym               LDQ     DA_SDASN+2,QL
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:51   
         3 001066   000006 772000                    QRL     6
         3 001067   000002 752030 1                  STCQ    FPT_SAD+2,'30'O

      417     5562    2              FPT_SAD.V.MONSID#=IP.SID;

   5562  3 001070   200003 470500                    LDP0    @IP$,,AUTO
         3 001071   000000 236100                    LDQ     0,,PR0
         3 001072   000002 752003 1                  STCQ    FPT_SAD+2,'03'O

      418     5563    2              CALL M$SAD(FPT_SAD) ALTRET(PMMEALT);

   5563  3 001073   000000 630400 1                  EPPR0   FPT_SAD
         3 001074   430015 713400                    CLIMB   alt,+12301
         3 001075   400000 401760                    pmme    nvectors=1
         3 001076   001172 702000 3                  TSX2    PMMEALT

      419     5564    2              FPT_STD.V.USERSID#=DA_SDASN.SID(DA_NXTSPCL);

   5564  3 001077   000000 236000 xsym               LDQ     DA_NXTSPCL
         3 001100   000003 402007                    MPY     3,DL
         3 001101   000002 236006 xsym               LDQ     DA_SDASN+2,QL
         3 001102   000030 772000                    QRL     24
         3 001103   000010 752003 1                  STCQ    FPT_STD+4,'03'O

      420     5565    2              V#.P.SID=DA_SDASN.SID(DA_NXTSPCL);

   5565  3 001104   000000 236000 xsym               LDQ     DA_NXTSPCL
         3 001105   000003 402007                    MPY     3,DL
         3 001106   000002 236006 xsym               LDQ     DA_SDASN+2,QL
         3 001107   000030 772000                    QRL     24
         3 001110   200014 752103                    STCQ    V#+1,'03'O,AUTO

      421     5566    2              FPT_STD.AREA_=V#;

   5566  3 001111   000000 100500                    MLR     fill='000'O
         3 001112   200013 000010                    ADSC9   V#,,AUTO                 cn=0,n=8
         3 001113   000006 000010 1                  ADSC9   FPT_STD+2                cn=0,n=8
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:52   

      422     5567    2              CALL M$STD(FPT_STD) ALTRET(PMMEALT);

   5567  3 001114   000004 630400 1                  EPPR0   FPT_STD
         3 001115   430016 713400                    CLIMB   alt,+12302
         3 001116   400400 401760                    pmme    nvectors=2
         3 001117   001172 702000 3                  TSX2    PMMEALT

      423     5568    2              DA_SDASN.CVM(DA_NXTSPCL)='0'B;

   5568  3 001120   000000 236000 xsym               LDQ     DA_NXTSPCL
         3 001121   000003 402007                    MPY     3,DL
         3 001122   000000 620006                    EAX0    0,QL
         3 001123   000025 236000 4                  LDQ     21
         3 001124   000002 356010 xsym               ANSQ    DA_SDASN+2,X0

      424     5569    2              END;

      425     5570    1           OP=IP;

   5570  3 001125   200003 470500                    LDP0    @IP$,,AUTO
         3 001126   000000 236100                    LDQ     0,,PR0
         3 001127   200004 471500                    LDP1    @OP$,,AUTO
         3 001130   100000 756100                    STQ     0,,PR1

      426     5571    1           OP.SID=DA_SDASN.SID(DA_NXTSPCL);

   5571  3 001131   000000 236000 xsym               LDQ     DA_NXTSPCL
         3 001132   000003 402007                    MPY     3,DL
         3 001133   000002 236006 xsym               LDQ     DA_SDASN+2,QL
         3 001134   000030 772000                    QRL     24
         3 001135   100000 752103                    STCQ    0,'03'O,PR1

      427     5572    1           OP.CA=IP.CA-V#.P.CA;

   5572  3 001136   200014 236100                    LDQ     V#+1,,AUTO
         3 001137   000020 772000                    QRL     16
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:53   
         3 001140   200030 756100                    STQ     @CODE+1,,AUTO
         3 001141   000000 236100                    LDQ     0,,PR0
         3 001142   000020 772000                    QRL     16
         3 001143   200030 136100                    SBLQ    @CODE+1,,AUTO
         3 001144   000020 736000                    QLS     16
         3 001145   100000 676100                    ERQ     0,,PR1
         3 001146   000034 376000 xsym               ANQ     B_VECTNIL+28
         3 001147   100000 656100                    ERSQ    0,,PR1

      428     5573    1           DA_SDASN.DESC(DA_NXTSPCL)=DESC;

   5573  3 001150   000000 236000 xsym               LDQ     DA_NXTSPCL
         3 001151   000003 402007                    MPY     3,DL
         3 001152   000002 736000                    QLS     2
         3 001153   000006 100500                    MLR     fill='000'O
         3 001154   200017 000010                    ADSC9   DESC,,AUTO               cn=0,n=8
         3 001155   000000 000010 xsym               ADSC9   DA_SDASN,Q               cn=0,n=8

      429     5574    1           DA_SDASN.SYSID(DA_NXTSPCL)=S#;

   5574  3 001156   000000 236000 xsym               LDQ     DA_NXTSPCL
         3 001157   000003 402007                    MPY     3,DL
         3 001160   200012 720100                    LXL0    S#,,AUTO
         3 001161   000002 440006 xsym               SXL0    DA_SDASN+2,QL

      430     5575    1           DA_LASTBOUND=DA_SDASN.DESC.BOUND(DA_NXTSPCL);

   5575  3 001162   000000 236006 xsym               LDQ     DA_SDASN,QL
         3 001163   000020 772000                    QRL     16
         3 001164   000000 756000 xsym               STQ     DA_LASTBOUND

      431     5576    1           DA_NXTSPCL=MOD(DA_NXTSPCL+1,DA_NUMSPCL);

   5576  3 001165   000000 236000 xsym               LDQ     DA_NXTSPCL
         3 001166   000001 036007                    ADLQ    1,DL
         3 001167   000000 506000 xsym               DIV     DA_NUMSPCL
         3 001170   000000 755000 xsym               STA     DA_NXTSPCL
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:54   

      432     5577    1           RETURN;

   5577  3 001171   000000 702200 xent               TSX2  ! X66_ARET

   5576  3 001172                       PMMEALT      null
      433     5578    1   PMMEALT:;
      434     5579    1           DA_MAPERR=B$TCB$->B$TCB.ALT$->B$ALT.ERR;

   5579  3 001172   000000 470400 xsym               LDP0    B$TCB$
         3 001173   000000 471500                    LDP1    0,,PR0
         3 001174   100102 236100                    LDQ     66,,PR1
         3 001175   000000 756000 xsym               STQ     DA_MAPERR

      435     5580    1   ALT:    ALTRETURN;

   5580  3 001176   000000 702200 xent  ALT          TSX2  ! X66_AALT

      436     5581        %EJECT;
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:55   
      437     5582    1   SETERR: PROC(CODE) ALTRET;

   5582  3 001177   200026 741300       SETERR       STX1  ! FCN+1,,AUTO

      438     5583    2   DCL CODE SBIN;
      439     5584        /**/
      440     5585    2           DA_MAPERR='040115000000'O;

   5585  3 001200   000014 236000 2                  LDQ     LSOFFSET+8
         3 001201   000000 756000 xsym               STQ     DA_MAPERR

      441     5586    2           DA_MAPERR.CODE=CODE;

   5586  3 001202   200027 470500                    LDP0    @CODE,,AUTO
         3 001203   000000 236100                    LDQ     0,,PR0
         3 001204   000003 736000                    QLS     3
         3 001205   000000 676000 xsym               ERQ     DA_MAPERR
         3 001206   377770 376007                    ANQ     131064,DL
         3 001207   000000 656000 xsym               ERSQ    DA_MAPERR

      442     5587    2           ALTRETURN;

   5587  3 001210   000000 702211                    TSX2  ! 0,X1
      443     5588    2   END SETERR;
      444     5589    1   END DAM$MAP;
      445     5590        %EOD;

PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:56   
--  Include file information  --

   JG_GHOSTS_C.:E05TOU  is referenced.
   B$MAP.:E05TOU  cannot be made into a system file and is referenced.
   B$USER.:E05TOU  cannot be made into a system file and is referenced.
   SS_SCHED_C.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   B_MLSMAC_C.:E05TOU  is referenced.
   B_ULSMAC_C.:E05TOU  is referenced.
   B_LSDATA_C.:E05TOU  cannot be made into a system file and is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   DA_PERR_C.:E05TOU  is referenced.
   DA_MAP_R.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure DAM$MAP.
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:57   

 **** Variables and constants ****

  ****  Section 001  Data  DAM$MAP

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(144)   r     1 FPT_SAD                    4-0-0/d STRC(216)   r     1 FPT_STD

  ****  Section 002 RoData DAM$MAP

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     2-0-0/b UBIN(9)     r     1 DA_WSRWSQ(0:7)
     4-0-0/w SBIN        r     1 LSOFFSET(0:7)
     0-0-0/b BIT (72)    r     1 VECINIT

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    27-0-0/w PTR         r     1 @CODE                      6-0-0/w PTR         r     1 @DOMAYN
     3-0-0/w PTR         r     1 @IP$                       4-0-0/w PTR         r     1 @OP$
     5-0-0/w PTR         r     1 @SYSID                     7-0-0/w PTR         r     1 @V
    *0-0-0/w SBIN        r     1 CODE                      16-0-0/w BIT         r     1 CVMFLG
    10-0-0/w SBIN        r     1 D#                        17-0-0/w STRC(72)    r     1 DESC
    17-0-0/w STRC(72)    r     1 DESC2                     *0-0-0/w SBIN        r     1 DOMAYN
    25-0-0/w SBIN        r     1 FCN                       15-0-0/w SBIN        r     1 I
    *0-0-0/w STRC        r     1 IP                        *0-0-0/w PTR         r     1 IP$
    24-0-0/w PTR         r     1 LS$                       *0-0-0/w STRC        r     1 OP
    *0-0-0/w PTR         r     1 OP$                       22-0-0/w SBIN        r     1 PAGES
    23-0-0/w PTR         r     1 PT$                       12-0-0/w SBIN        r     1 S#
    *0-0-0/w SBIN        r     1 SYSID                     11-0-0/w SBIN        r     1 U#
    *0-0-0/w BIT (72)    r     1 V                         13-0-0/w STRC(72)    r     1 V#
    21-0-0/w SBIN        r     1 WSQ
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:58   

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$IS$                      0-0-0/w PTR         r     1 B$JIT$
     0-0-0/w PTR         r     1 B$TCB$                     0-0-0/w PTR         r     1 B$USRT$
     0-0-0/w STRC(72)    r     1 DA_ASR                     0-0-0/w BIT         r     1 DA_DUMPFILE
     0-0-0/w SBIN        r     1 DA_LASTBOUND               0-0-0/w STRC        r     1 DA_MAPERR
     0-0-0/b BIT (72)    r     1 DA_MONISDATA               0-0-0/w SBIN        r     1 DA_MSCPG1
     0-0-0/w SBIN        r     1 DA_MSCPG3                  0-0-0/w SBIN        r     1 DA_MUAIS
     0-0-0/w SBIN        r     1 DA_NUMSPCL                 0-0-0/w SBIN        r     1 DA_NXTSPCL
     0-0-0/w SBIN        r     1 DA_NXTWINDOW               0-0-0/w STRC(72)    r     1 DA_PSR
     0-0-0/w STRC(108)   r     1 DA_SDASN(0:7)
     0-0-0/w SBIN        r     1 DA_WINDOWBASE              0-0-0/w SBIN        r     1 DA_WINDOWMAX

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2448)  r     1 B$ALT                      0-0-0/d STRC(8856)  r     1 B$JIT
     0-0-0/w STRC        r     1 B$MAP(0:1023)              0-0-0/w STRC(144)   r     1 B$TCB
     0-0-0/w STRC(576)   r     1 B$USER(0:0)                0-0-0/w BIT (72)    r     1 LS(0:0)


   Procedure DAM$MAP requires 649 words for executable code.
   Procedure DAM$MAP requires 32 words of local(AUTO) storage.
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:59   
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:60   
          MINI XREF LISTING

ALT
      5580**LABEL    5425--CALLALT  5443--CALLALT  5451--CALLALT  5459--CALLALT  5464--CALLALT  5470--CALLALT
      5473--CALLALT  5476--CALLALT  5483--CALLALT  5505--CALLALT  5515--CALLALT  5534--CALLALT  5551--GOTO
B$ALT.CODE
      5345**DCL      5345--REDEF    5346--REDEF    5346--REDEF
B$ALT.ERR
      5346**DCL      5579>>ASSIGN
B$ALT.ERR.ERR#
      5347**DCL      5347--REDEF
B$ALT.EVID
      5346**DCL      5346--REDEF    5346--REDEF
B$DO.ECCINFO
      5078**DCL      5079--REDEF
B$IS$
      5383**DCL      5460>>ASSIGN   5465>>ASSIGN   5471>>ASSIGN   5474>>ASSIGN   5518>>ASSIGN   5555>>ASSIGN
B$JIT.CPFLAGS1.SLEAZE
      4512**DCL      4512--REDEF
B$JIT.ERR.MID
      4419**DCL      4419--REDEF
B$JIT.JRESPEAK
      4580**DCL      4581--REDEF
B$JIT.ORIGINATOR_PORT.FROM_CR
      4689**DCL      4689--REDEF    4690--REDEF
B$JIT.PNR
      4593**DCL      4593--REDEF
B$JIT.TSLINE
      4687**DCL      4688--REDEF
B$JIT.USER
      4418**DCL      5436>>ASSIGN   5511>>IF
B$JIT$
      4403**DCL      4413--IMP-PTR  5436>>ASSIGN   5511>>IF
B$MAP.CTRL
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:61   
      5193**DCL      5520>>IF
B$MAP.SCTRL
      5190**DCL      5191--REDEF
B$TCB.ALT$
      5341**DCL      5579>>ASSIGN
B$TCB$
      5339**DCL      5579>>ASSIGN
B$U.MISC
      5057**DCL      5058--REDEF
B$USER.MISC
      5133**DCL      5134--REDEF
B$USER.SYSID
      5128**DCL      5441>>IF       5448>>ASSIGN
B$USER.US
      5120**DCL      5450>>IF
B$USRT$
      5145**DCL      5441>>IF       5448>>ASSIGN   5450>>IF
CODE IN PROCEDURE SETERR
      5583**DCL      5582--PROC     5586>>ASSIGN
COMMON
      5406**LABEL    5404--GOTO
CVMFLG
       193**DCL      5410<<ASSIGN   5431<<ASSIGN   5461<<ASSIGN   5466<<ASSIGN   5511<<ASSIGN   5512<<ASSIGN
      5514>>IF       5520<<ASSIGN   5532>>IF
D#
       176**DCL      5408<<ASSIGN   5409<<ASSIGN   5435>>IF       5468>>DOCASE   5474>>ASSIGN   5512>>IF
DAM$VPAGE
      5395**DCL-ENT  5459--CALL     5464--CALL     5470--CALL     5473--CALL     5515--CALL     5549--CALL
DA_ASR.BASE
       243**DCL      5464>>CALL     5465>>ASSIGN
DA_ASR.WSR
       243**DCL      5463>>ASSIGN
DA_DUMPFILE
       229**DCL      5410>>ASSIGN   5417>>IF
DA_LASTBOUND
       230**DCL      5420<<ASSIGN   5527<<ASSIGN   5575<<ASSIGN
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:62   
DA_MAPERR
       238**DCL      5579<<ASSIGN   5585<<ASSIGN
DA_MAPERR.CODE
       238**DCL      5551>>IF       5586<<ASSIGN
DA_MAPSEG.P
       239**DCL       240--REDEF
DA_MONISDATA
       232**DCL      5417--IF
DA_MSCPG1
       232**DCL      5518>>ASSIGN
DA_MSCPG3
       236**DCL      5460>>ASSIGN   5465>>ASSIGN   5471>>ASSIGN   5474>>ASSIGN
DA_MUAIS
       228**DCL      5440>>DOINDEX  5450>>IF
DA_NUMSPCL
       238**DCL      5576>>ASSIGN
DA_NXTSPCL
       238**DCL      5553>>ASSIGN   5557>>ASSIGN   5561>>ASSIGN   5564>>ASSIGN   5565>>ASSIGN   5568>>ASSIGN
      5571>>ASSIGN   5573>>ASSIGN   5574>>ASSIGN   5575>>ASSIGN   5576<<ASSIGN   5576>>ASSIGN
DA_NXTWINDOW
       229**DCL      5543>>IF       5544<<ASSIGN   5549<>CALL     5555>>ASSIGN   5558<<ASSIGN   5558>>ASSIGN
DA_PSR.BASE
       242**DCL      5459>>CALL     5460>>ASSIGN
DA_PSR.WSR
       242**DCL      5458>>ASSIGN
DA_SDASN.CVM
       225**DCL      5546>>IF       5557<<ASSIGN   5568<<ASSIGN
DA_SDASN.DESC
       224**DCL      5524>>IF       5546<<ASSIGN   5573<<ASSIGN
DA_SDASN.DESC.BOUND
       224**DCL      5420>>ASSIGN   5527>>ASSIGN   5575>>ASSIGN
DA_SDASN.DESC.TYPE0
       224**DCL       224--REDEF
DA_SDASN.SID
       225**DCL      5419>>ASSIGN   5526>>ASSIGN   5553>>ASSIGN   5561>>ASSIGN   5564>>ASSIGN   5565>>ASSIGN
      5571>>ASSIGN
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:63   
DA_SDASN.SYSID
       225**DCL      5524>>IF       5574<<ASSIGN
DA_TIGRSEG.P
       240**DCL       241--REDEF
DA_WINDOWBASE
       228**DCL      5533>>IF       5543>>IF       5555>>ASSIGN
DA_WINDOWMAX
       228**DCL      5533>>IF       5543>>IF
DA_WSRWSQ
      5384**DCL      5458>>ASSIGN   5463>>ASSIGN   5501>>ASSIGN
DESC
       194**DCL       200--REDEF    5489<<ASSIGN   5491>>ASSIGN   5524>>IF       5573>>ASSIGN
DESC.BASE
       199**DCL      5495<<ASSIGN   5495>>ASSIGN   5513>>ASSIGN   5520>>IF       5549>>CALL     5555>>ASSIGN
DESC.BOUND
       195**DCL      5496<<ASSIGN   5496>>ASSIGN   5497>>IF       5497<<ASSIGN   5498>>ASSIGN   5513>>ASSIGN
      5554>>ASSIGN
DESC.TYPE
       198**DCL      5499>>DOCASE
DESC.WSR
       197**DCL      5501>>ASSIGN
DESC2.WSQ
       203**DCL      5503>>ASSIGN
DOMAYN
       170**DCL       152--PROC     5405--ENTRY    5408--IF       5409>>ASSIGN
FCN
       210**DCL      5403<<ASSIGN   5406<<ASSIGN   5411>>IF       5490>>IF
FPT_SAD
      5362**DCL      5563<>CALL
FPT_SAD.V
      5362**DCL      5362--DCLINIT
FPT_SAD.V.MONSID#
      5363**DCL      5562<<ASSIGN
FPT_SAD.V.USERSID#
      5362**DCL      5561<<ASSIGN
FPT_STD
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:64   
      5377**DCL      5556<>CALL     5567<>CALL
FPT_STD.AREA_
      5377**DCL      5566<<ASSIGN
FPT_STD.AREA_.AREA$
      5378**DCL      5555<<ASSIGN
FPT_STD.AREA_.BOUND
      5377**DCL      5554<<ASSIGN
FPT_STD.V
      5378**DCL      5377--DCLINIT
FPT_STD.V.USERSID#
      5379**DCL      5553<<ASSIGN   5564<<ASSIGN
I
       192**DCL      5458<<ASSIGN   5459<>CALL     5463<<ASSIGN   5464<>CALL     5519<<DOINDEX  5520>>IF
      5523<<DOINDEX  5524>>IF       5524>>IF       5526>>ASSIGN   5527>>ASSIGN   5545<<DOINDEX  5546>>IF
      5546>>ASSIGN
IP
       157**DCL      5525>>ASSIGN   5570>>ASSIGN
IP.CA
       158**DCL      5424>>IF       5424>>IF       5528>>ASSIGN   5572>>ASSIGN
IP.SID
       160**DCL      5414>>ASSIGN   5424>>IF       5514>>IF       5562>>ASSIGN
IP.SID.D
       162**DCL      5489>>ASSIGN
IP.SID.S
       161**DCL      5456>>DOCASE
IP$
       156**DCL       152--PROC      157--REDEF    5405--ENTRY    5418>>ASSIGN
LS
      5382**DCL      5489>>ASSIGN
LS$
       209**DCL      5460<<ASSIGN   5465<<ASSIGN   5471<<ASSIGN   5474<<ASSIGN   5489>>ASSIGN   5492>>ASSIGN
LSOFFSET
      5386**DCL      5474>>ASSIGN
M$SAD
       356**DCL-ENT  5563--CALL
M$STD
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:65   
       357**DCL-ENT  5556--CALL     5567--CALL
OP
       164**DCL      5525<<ASSIGN   5570<<ASSIGN
OP.CA
       165**DCL      5528<<ASSIGN   5572<<ASSIGN
OP.SID
       167**DCL      5419<<ASSIGN   5526<<ASSIGN   5571<<ASSIGN
OP$
       163**DCL       152--PROC      164--REDEF    5405--ENTRY    5418<<ASSIGN   5492<<ASSIGN
PAGES
       207**DCL      5513<<ASSIGN   5519>>DOINDEX  5533>>IF       5543>>IF       5549>>CALL     5558>>ASSIGN
PMMEALT
      5576**LABEL    5556--CALLALT  5563--CALLALT  5567--CALLALT
PT$
       208**DCL      5518<<ASSIGN   5520>>IF
S#
       178**DCL      5447<<ASSIGN   5448<<ASSIGN   5524>>IF       5574>>ASSIGN
SETERR
      5582**PROC     5425--CALL     5443--CALL     5451--CALL     5476--CALL     5483--CALL     5505--CALL
      5534--CALL
SYSID
       171**DCL       152--PROC     5405--ENTRY    5434--IF       5438>>IF       5438>>ASSIGN   5441>>IF
U#
       177**DCL      5435<<ASSIGN   5436<<ASSIGN   5438<<ASSIGN   5440<<DOINDEX  5441>>IF       5447>>IF
      5447>>ASSIGN   5448>>ASSIGN   5449>>IF       5450>>IF       5450>>IF       5459<>CALL     5464<>CALL
      5473<>CALL     5510<<ASSIGN   5511>>IF       5515<>CALL     5549<>CALL
USRFOUND
      5441**LABEL    5441--GOTO
V
       172**DCL       152--PROC     5405--ENTRY    5412--IF       5417--IF       5423>>ASSIGN   5491<<ASSIGN
V#
       179**DCL      5413<<ASSIGN   5423<<ASSIGN   5566>>ASSIGN
V#.BOUND
       180**DCL      5424>>IF       5497>>IF       5497>>ASSIGN   5498<<ASSIGN
V#.P
       182**DCL       188--REDEF
PL6.E3A0      #001=DAM$MAP File=DAM$MAP.:E05TSI                                  TUE 07/29/97 12:51 Page:66   
V#.P.CA
       183**DCL      5424>>IF       5424>>IF       5495>>ASSIGN   5496>>ASSIGN   5528>>ASSIGN   5572>>ASSIGN
V#.P.SID
       185**DCL      5414<<ASSIGN   5424>>IF       5565<<ASSIGN
VECINIT
      5381**DCL      5413>>ASSIGN
VPAGEALT
      5551**LABEL    5549--CALLALT
WSQ
       206**DCL      5501<<ASSIGN   5503<<ASSIGN   5510>>IF       5514>>IF       5515<>CALL     5549<>CALL

PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:67   
      446        1        /*T***********************************************************/
      447        2        /*T*                                                         */
      448        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      449        4        /*T*                                                         */
      450        5        /*T***********************************************************/
      451        6        DAM$VPAGE: PROC(VP,WP,SYSID,WSQ,N) ALTRET;
      452        7        /**/
      453        8    1   DCL VP SBIN;
      454        9    1   DCL WP SBIN;
      455       10    1   DCL SYSID SBIN;
      456       11    1   DCL WSQ SBIN;
      457       12    1   DCL N SBIN;
      458       13        /**/
      459       14        /* LOCALS FOR PARAMETERS */
      460       15        /**/
      461       16    1   DCL VP# SBIN;
      462       17    1   DCL WP# SBIN;
      463       18    1   DCL U# SBIN;
      464       19    1   DCL W# SBIN;
      465       20    1   DCL N# SBIN;
      466       21        /**/
      467       22        /* AUTO DATA */
      468       23        /**/
      469       24    1   DCL 1 ERRCD ALIGNED,
      470       25    1         2 FCG BIT(18) UNAL,
      471       26    1         2 MON BIT(1) UNAL,
      472       27    1         2 CODE UBIN(14) UNAL,
      473       28    1         2 SEV UBIN(3) UNAL;
      474       29    1   DCL I SBIN;
      475       30    1   DCL PTP SBIN;
      476       31    1   DCL PTSZ SBIN;
      477       32    1   DCL RPN SBIN;
      478       33    1   DCL PT$ PTR;
      479       34    1   DCL NPGS SBIN;
      480       35        /**/
      481       36        /* INCLUDE FILES */
      482       37        /**/
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:68   
      483       38        %INCLUDE DA_MAP_R;
      484       68        %INCLUDE CP_6;
      485      149        %INCLUDE B$USER;
      486      365        %B$USERREFS;
      487      369        %INCLUDE B$MAP;
      488      468        %INCLUDE IR_DATA_M;
      489      632        %INCLUDE NI$TABLES;
      490      848        %RV_DFSUBS;
      491      875        %RV_BUFF (NAME=RVBUF,STCLASS="BASED(DA_RVBUF$)");
      492      911        %RV_USRDIR (NAME=USERDIR,STCLASS="BASED(DA_USERDIR$)");
      493      915        %INCLUDE DA_PERR_C;
      494      979        %INCLUDE M_INFO_C;
      495     1119        %INCLUDE B_LSDATA_C;
      496     4325        %INCLUDE B_STRINGS_C;
      497     4454        %INCLUDE SS_SCHED_C;
      498     4687        /**/
      499     4688        /* STATIC DATA */
      500     4689        /**/
      501     4690        %RV_DFKEY (NAME=DFKEY,STCLASS=STATIC);
      502     4708    1   DCL M$DUMPFILE DCB;
      503     4709        %FPT_READ (FPTN=FPT_RDDUMP,KEY=DFKEY,KEYS=YES,DCB=M$DUMPFILE);
      504     4748    1   DCL ZERO SBIN CONSTANT INIT(0);
      505     4749        %FPT_CVM (PHYSICAL=NO);
      506     4765        %FPT_GVP;
      507     4779        %FPT_FVP;
      508     4793    1   DCL B$IS$ PTR SYMREF;
      509     4794
      510     4795    1   DCL DAM$PHYS_TO_REAL ENTRY(2);
      511     4796        /**/
      512     4797        /* BASED STRUCTURES */
      513     4798        /**/
      514     4799    1   DCL PAGE(0:0) CHAR(4096) BASED(B$IS$);
      515     4800    1   DCL 1 S$WSPTD(0:0) ALIGNED BASED(DA_WSPTD$),
      516     4801    1         2 BLKNO UBIN(18) UNAL,
      517     4802    1         2 Q BIT(2),
      518     4803    1         2 P BIT(1),
      519     4804    1         2 T BIT(2),
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:69   
      520     4805    1         2 * BIT(1),
      521     4806    1         2 NBLKS UBIN(12) UNAL;
      522     4807    1   DCL B$TCB$ PTR SYMREF;
      523     4808        %B$TCB;
      524     4811        %B$ALT;
      525     4819        %SUB NEVER="WHILE('0'B)";
      526     4820        %SUB FOREVER="WHILE('1'B)";
      527     4821        %EJECT;
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:70   
      528     4822    1           ERRCD='0'B;
      529     4823    1           IF ADDR(SYSID)=ADDR(NIL) THEN U#=0;
      530     4824    1           ELSE IF SYSID<=0 THEN U#=-SYSID;
      531     4825    2              ELSE DO;
      532     4826    3                 DO U#=1 TO DA_MUAIS;
      533     4827    3                    IF SYSID=B$USRT$->B$USER.SYSID(U#) THEN GOTO USRFOUND;
      534     4828    3                    END;
      535     4829    2                 CALL SETERR(%E$DA_NO_USER) ALTRET(ALT);
      536     4830    2                 END;
      537     4831    1   USRFOUND: ;
      538     4832    1           IF U#~=0 THEN
      539     4833    1              IF U#>DA_MUAIS OR B$USRT$->B$USER.US(U#)=%SS_SNULL THEN
      540     4834    1                 CALL SETERR(%E$DA_NO_USER) ALTRET(ALT);
      541     4835    1           IF ADDR(WSQ)=ADDR(NIL) THEN
      542     4836    1              IF U#=0 THEN W#=%MONWSQ;
      543     4837    1              ELSE W#=%USERWSQ;
      544     4838    1           ELSE W#=WSQ;
      545     4839    1           IF W#~=%USERWSQ THEN U#=0;
      546     4840    1           VP#=VP;
      547     4841    1           WP#=WP+DA_WINDOWBASE;
      548     4842    1           IF ADDR(N)=ADDR(NIL) THEN N#=0;
      549     4843    1           ELSE N#=N-1;
      550     4844    1           IF WP#+N#>DA_WINDOWMAX THEN
      551     4845    1              CALL SETERR(%E$DA_WINDOWMAX) ALTRET(ALT);
      552     4846        /*E*    ERROR:   DAM-E$DA_WINDOWMAX
      553     4847                MESSAGE: The requested window extends beyond the end of the
      554     4848                         available window area.
      555     4849                                                                           */
      556     4850        %EJECT;
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:71   
      557     4851    2           IF DA_DUMPFILE THEN DO;
      558     4852    2              DFKEY='007'O;
      559     4853    2              DFKEY.K.NODEIDX=DA_NODEIDX;
      560     4854    3              DO I=0 TO N#;
      561     4855    4                 IF NOT DA_WINDOW.PRESENCE(I+WP#) THEN DO;
      562     4856    4                    FPT_GVP.V.PNO#=I+WP#;
      563     4857    5                    DO INHIBIT;
      564     4858    5                       DA_WINDOW(I+WP#)='400000777000'O;
      565     4859    6                       CALL M$GVP(FPT_GVP) WHENALTRETURN DO;
      566     4860    6                          DA_WINDOW.PRESENCE(I+WP#)='0'B;
      567     4861    6                          GOTO PMMEALT;
      568     4862    6                          END;
      569     4863    5                       END;
      570     4864    4                    END;
      571     4865    3                 END;
      572     4866    2              NPGS=0;
      573     4867    3   WSQCASE:   DO CASE(W#);
      574     4868    3               CASE(%REALWSQ);
      575     4869    3                 DFKEY.K.TYP=%R_LRMEM#;
      576     4870    3                 DFKEY.K.STYP=0;
      577     4871    3                 DFKEY.K.USR#=0;
      578     4872    3               CASE(%MONWSQ);
      579     4873    4                 IF VP#>=%(REAL_BASE%/4096) AND VP#<%(%(REAL_BASE%+REAL_BOUND%+1)/4096)
              4873                          THEN DO;
      580     4874    4                    VP#=VP#-%(REAL_BASE%/4096);
      581     4875    4                    W#=%REALWSQ;
      582     4876    4                    GOTO WSQCASE;
      583     4877    4                    END;
      584     4878    3                 DFKEY.K.TYP=%R_MWSQ#;
      585     4879    3                 IF DA_CPU#=RVBUF.S_PNO THEN DFKEY.K.STYP=%R_MCPU#;
      586     4880    3                 ELSE DFKEY.K.STYP=%R_SCPU#;
      587     4881    3                 DFKEY.K.USR#=DA_CPU#;
      588     4882    3               CASE(%USERWSQ);
      589     4883    4                 IF VP#=0 AND USERDIR.USER.DA(U#)=0 THEN DO;
      590     4884    4                    DFKEY.K.TYP=%R_DINFO#;
      591     4885    4                    DFKEY.K.STYP=%R_AJITS#;
      592     4886    4                    DFKEY.K.USR#=U#;
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:72   
      593     4887    4                    DFKEY.K.VP#=0;
      594     4888    4                    I=0;
      595     4889    4                    FPT_RDDUMP.BUF_.BUF$=PINCRW(B$IS$,WP#*1024+512);
      596     4890    4                    FPT_RDDUMP.BUF_.BOUND=512;
      597     4891    4                    CALL M$READ(FPT_RDDUMP) ALTRET(NO_DUMP_PAGE);
      598     4892    4                    VP#=VP#+1;
      599     4893    4                    N#=N#-1;
      600     4894    4                    NPGS=NPGS+1;
      601     4895    4                    DA_WINDOW.VP(WP#)=0;
      602     4896    4                    DA_WINDOW.WSQ(WP#)=%USERWSQ;
      603     4897    4                    DA_WINDOW.USR(WP#)=U#;
      604     4898    4                    END;
      605     4899    3                 DFKEY.K.TYP=%R_UWSQ#;
      606     4900    3                 DFKEY.K.STYP=USERDIR.USER.TYP(U#);
      607     4901    3                 DFKEY.K.USR#=U#;
      608     4902    3               CASE(%CGWSQ,%B_CWSQ1,%B_CWSQ2,%B_CWSQ3,%B_CWSQ4,
      609     4903    3                   %B_CWSQ5,%B_CWSQ6,%B_CWSQ7,%B_CWSQ8,
      610     4904    3                   %B_CWSQ9,%B_CWSQ10,%B_CWSQ11,%B_CWSQ12,
      611     4905    3                   %B_CWSQ13,%B_CWSQ14,%B_CWSQ15,%B_CWSQ16);
      612     4906    3                 IF W#=%CGWSQ THEN DFKEY.K.TYP=%R_CGPGS#;
      613     4907    3                 ELSE DFKEY.K.TYP=%R_CWSQPGS#;
      614     4908    3                 DFKEY.K.STYP=W#;
      615     4909    4                 IF VP#<0 THEN DO;         /* GET THE PAGE TABLE                 */
      616     4910    4                    DFKEY.K.USR#=0;
      617     4911    4                    VP#=0;
      618     4912    4                    END;
      619     4913    3                 ELSE DFKEY.K.USR#=1;
      620     4914    3               CASE(ELSE);
      621     4915    3                 CALL SETERR(%E$DA_BAD_WSQ) ALTRET(ALT);
      622     4916        /*E*    ERROR:   DAM-E$DA_BAD_WSQ
      623     4917                MESSAGE: Invalid working space quarter number.
      624     4918                MESSAGE1: Valid WSQs are %REALWSQ, %MONWSQ, %USERWSQ or any
      625     4919                          communications WSQ.
      626     4920                                                                           */
      627     4921    3               END;
      628     4922    3              DO I=0 TO N#;
      629     4923    3                 IF NOT (DA_WINDOW.VP(WP#+I)=VP#+I AND
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:73   
      630     4924    3                   DA_WINDOW.WSQ(WP#+I)=W# AND
      631     4925    4                   DA_WINDOW.USR(WP#+I)=U#) THEN DO;
      632     4926    4                    DFKEY.K.VP#=VP#+I;
      633     4927    4                    FPT_RDDUMP.BUF_=VECTOR(PAGE(WP#+I));
      634     4928    4                    CALL M$READ(FPT_RDDUMP) ALTRET(NO_DUMP_PAGE);
      635     4929    4                    DA_WINDOW.VP(WP#+I)=VP#+I;
      636     4930    4                    DA_WINDOW.WSQ(WP#+I)=W#;
      637     4931    4                    DA_WINDOW.USR(WP#+I)=U#;
      638     4932    4                    END;
      639     4933    3                 NPGS=NPGS+1;
      640     4934    4                 DO NEVER;
      641     4935    4   NO_DUMP_PAGE:    ;
      642     4936                                                /* CALL SETERR(%E$DA_NOT_DUMPED); */
      643     4937        /*E*    ERROR:   DAM-E$DA_NOT_DUMPED
      644     4938                MESSAGE: One or more of the requested pages is not in the
      645     4939                         dump file.
      646     4940                                                                           */
      647     4941    4                    FPT_FVP.V.PNO#=WP#+I;
      648     4942    4                    DA_WINDOW(WP#+I)='000000777000'O;
      649     4943    4                    CALL M$FVP(FPT_FVP) ALTRET(L1);
      650     4944    4   L1:              ;
      651     4945    4                    END;
      652     4946    3                 END;
      653     4947    2              END;                         /* IF DA_DUMPFILE                     */
      654     4948        %EJECT;
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:74   
      655     4949    2           ELSE DO;                        /* NOT USING DUMP FILE                */
      656     4950    2              NPGS=0;
      657     4951    2              PTSZ = 1;
      658     4952    3              IF W#~=0 OR DA_CPU=%DPS90 OR DA_CPU=%DPS90XA THEN DO;
      659     4953    3                 IF U#=0 THEN
      660     4954    4                    IF W#=%MONWSQ THEN DO;
      661     4955    4                       PTP=DA_MONPTP;
      662     4956    4                       PTSZ = S$WSPTD.NBLKS(%MONWSQ)/16;
      663     4957    4                       END;
      664     4958    4                    ELSE DO;
      665     4959    4                       PTP=S$WSPTD.BLKNO(W#);
      666     4960    4                       PTSZ = S$WSPTD.NBLKS(W#)/16;
      667     4961    4                       END;
      668     4962    3                 ELSE PTP=B$USRT$->B$USER.PT(U#);
      669     4963    3                 RPN = MOD(PTP*64,1024);
      670     4964    3                 IF DA_CPU~=%DPS90XA AND DA_CPU~=%DPS8000 THEN PTP=PTP*64/1024;ELSE RPN
              4964                          =0;
      671     4965    3                 IF W#=%CGWSQ THEN PTSZ = 10; /* MAP IN TEN PAGES */
      672     4966    4                 DO I=0 TO PTSZ-1;
      673     4967    4                    CALL CVM(DA_MSCPG1+I,(PTP)+I) ALTRET(PMMEALT);
      674     4968    4                    END;
      675     4969    3                 PT$=PINCRW(B$IS$,DA_MSCPG1*1024+RPN);
      676     4970    3                 END;
      677     4971    3              DO I=0 TO N#;
      678     4972    3                 IF NOT (DA_WINDOW.VP(WP#+I)=VP#+I AND
      679     4973    3                   DA_WINDOW.WSQ(WP#+I)=W# AND
      680     4974    4                   DA_WINDOW.USR(WP#+I)=U#) THEN DO;
      681     4975    5                    IF W#=0 AND DA_CPU~=%DPS90 AND DA_CPU~=%DPS90XA THEN DO;
      682     4976    5                       RPN = VP# + I;
      683     4977    5                       END;
      684     4978    5                    ELSE DO;
      685     4979    5                       IF PT$->B$MAP.CTRL(VP#+I) & %PGINMEM THEN
      686     4980    6                       DO;
      687     4981    6                          RPN=PT$->B$MAP.RPN(VP#+I);
      688     4982    6                          END;
      689     4983    5                       ELSE RPN=-1;
      690     4984    5                       END;
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:75   
      691     4985    4                    CALL CVM(WP#+I,RPN);
      692     4986    4                    DA_WINDOW.VP(WP#+I)=VP#+I;
      693     4987    4                    DA_WINDOW.WSQ(WP#+I)=W#;
      694     4988    4                    DA_WINDOW.USR(WP#+I)=U#;
      695     4989    4                    END;
      696     4990    3                 ELSE NPGS=NPGS+1;
      697     4991    3                 END;
      698     4992    2              END;                         /* IF DA_DUMPFILE ELSE                */
      699     4993    1           IF NPGS=0 THEN CALL SETERR(%E$DA_NO_PAGES);
      700     4994        /*E*    ERROR:   DAM-E$DA_NO_PAGES
      701     4995                MESSAGE: None of the requested pages were successfully mapped
      702     4996                MESSAGE1: If looking at a dumfile, none of the requested pages
      703     4997                          were dumped.  If looking at the running system, M$CVM
      704     4998                          altreturned for every page reqested or there were no
      705     4999                          allocated virtual pages.
      706     5000                                                                           */
      707     5001        %EJECT;
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:76   
      708     5002    2           DO NEVER;
      709     5003    2   PMMEALT:   ERRCD=B$TCB$->B$TCB.ALT$->B$ALT.ERR;
      710     5004    2              END;
      711     5005    1   ALT:    IF ERRCD='0'B THEN RETURN;
      712     5006    2           ELSE DO;
      713     5007    2              DA_MAPERR=ERRCD;
      714     5008    2              ALTRETURN;
      715     5009    2              END;
      716     5010        %EJECT;
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:77   
      717     5011    1   DAM$CVM: ENTRY(VP,WP) ALTRET;
      718     5012    1           CALL CVM(WP+DA_WINDOWBASE,VP) ALTRET(CVMALT);
      719     5013    1           RETURN;
      720     5014    1   CVMALT: ALTRETURN;
      721     5015        /**/
      722     5016        /**/
      723     5017        /**/
      724     5018    1   CVM:    PROC(WNDW,PHYS) ALTRET;
      725     5019    2   DCL WNDW SBIN;
      726     5020    2   DCL PHYS SBIN;
      727     5021    2   DCL REAL SBIN;
      728     5022    2   DCL DAM$PHYS_TO_REAL ENTRY(2);
      729     5023    2           IF (DA_CPU = %DPS90XA OR DA_CPU = %DPS90) AND PHYS>=0 THEN
      730     5024    2              CALL DAM$PHYS_TO_REAL (REAL,PHYS);
      731     5025    2           ELSE
      732     5026    2              REAL=PHYS;
      733     5027    3           IF DA_WINDOW.PRESENCE(WNDW) OR PHYS>=0 THEN DO;
      734     5028    3              FPT_CVM.V.PPNO#=REAL;
      735     5029    3              FPT_CVM.V.VPNO#=WNDW;
      736     5030    3              CALL M$CVM(FPT_CVM) ALTRET(ALT);
      737     5031    3              END;
      738     5032    2           IF PHYS<0 THEN DA_WINDOW.PRESENCE(WNDW)='0'B;
      739     5033    3           ELSE DO;
      740     5034    3              DA_WINDOW.PRESENCE(WNDW)='1'B;
      741     5035    3              NPGS=NPGS+1;
      742     5036    3              END;
      743     5037    2           RETURN;
      744     5038    2   ALT:    ALTRETURN;
      745     5039    2   END CVM;
      746     5040        %EJECT;
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:78   
      747     5041    1   SETERR: PROC(CODE) ALTRET;
      748     5042    2   DCL CODE SBIN;
      749     5043    2           ERRCD='040115000000'O;
      750     5044    2           ERRCD.CODE=CODE;
      751     5045    2           ALTRETURN;
      752     5046    2   END SETERR;
      753     5047    1   END DAM$VPAGE;
      754     5048        %EOD;

PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:79   
--  Include file information  --

   SS_SCHED_C.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   B_MLSMAC_C.:E05TOU  is referenced.
   B_ULSMAC_C.:E05TOU  is referenced.
   B_LSDATA_C.:E05TOU  cannot be made into a system file and is referenced.
   M_INFO_C.:E05TOU  is referenced.
   DA_PERR_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   IR_DATA_M.:E05TOU  is referenced.
   B$MAP.:E05TOU  cannot be made into a system file and is referenced.
   B$USER.:E05TOU  cannot be made into a system file and is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   DA_MAP_R.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure DAM$VPAGE.

   Procedure DAM$VPAGE requires 629 words for executable code.
   Procedure DAM$VPAGE requires 30 words of local(AUTO) storage.

PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:80   

 Object Unit name= DAM$VPAGE                                  File name= DAM$MAP.:E05TOU
 UTS= JUL 29 '97 12:51:48.68 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none    30     36  DAM$VPAGE
    2   DCB   even  none     0      0  M$DUMPFILE
    3  RoData even  UTS      4      4  DAM$VPAGE
    4   Proc  even  none   629   1165  DAM$VPAGE
    5  RoData even  none    11     13  DAM$VPAGE

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     4      0   yes    yes     yes      Std        5  DAM$VPAGE
     4   1050          yes     yes      Std        2  DAM$CVM

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       2 DAM$PHYS_TO_REAL
                       nStd      0 X66_AUTO_5
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_ARET
                       nStd      0 X66_AALT
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:81   

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     DA_WINDOW                             DA_MUAIS                              DA_CPU
     DA_WINDOWBASE                         DA_WINDOWMAX                          DA_DUMPFILE
     DA_CPU#                               DA_NODEIDX                            DA_MONPTP
     DA_RVBUF$                             DA_WSPTD$                             DA_USERDIR$
     DA_MSCPG1                             DA_MAPERR                             M$UC
     B$USRT$                               M$DUMPFILE                            B$IS$
     B$TCB$                                B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:82   


      446        1        /*T***********************************************************/
      447        2        /*T*                                                         */
      448        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      449        4        /*T*                                                         */
      450        5        /*T***********************************************************/
      451        6        DAM$VPAGE: PROC(VP,WP,SYSID,WSQ,N) ALTRET;

      6  4 000000   000000 700200 xent  DAM$VPAGE    TSX0  ! X66_AUTO_5
         4 000001   000036 000005                    ZERO    30,5

      452        7        /**/
      453        8    1   DCL VP SBIN;
      454        9    1   DCL WP SBIN;
      455       10    1   DCL SYSID SBIN;
      456       11    1   DCL WSQ SBIN;
      457       12    1   DCL N SBIN;
      458       13        /**/
      459       14        /* LOCALS FOR PARAMETERS */
      460       15        /**/
      461       16    1   DCL VP# SBIN;
      462       17    1   DCL WP# SBIN;
      463       18    1   DCL U# SBIN;
      464       19    1   DCL W# SBIN;
      465       20    1   DCL N# SBIN;
      466       21        /**/
      467       22        /* AUTO DATA */
      468       23        /**/
      469       24    1   DCL 1 ERRCD ALIGNED,
      470       25    1         2 FCG BIT(18) UNAL,
      471       26    1         2 MON BIT(1) UNAL,
      472       27    1         2 CODE UBIN(14) UNAL,
      473       28    1         2 SEV UBIN(3) UNAL;
      474       29    1   DCL I SBIN;
      475       30    1   DCL PTP SBIN;
      476       31    1   DCL PTSZ SBIN;
      477       32    1   DCL RPN SBIN;
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:83   
      478       33    1   DCL PT$ PTR;
      479       34    1   DCL NPGS SBIN;
      480       35        /**/
      481       36        /* INCLUDE FILES */
      482       37        /**/
      483       38        %INCLUDE DA_MAP_R;
      484       68        %INCLUDE CP_6;
      485      149        %INCLUDE B$USER;
      486      365        %B$USERREFS;
      487      369        %INCLUDE B$MAP;
      488      468        %INCLUDE IR_DATA_M;
      489      632        %INCLUDE NI$TABLES;
      490      848        %RV_DFSUBS;
      491      875        %RV_BUFF (NAME=RVBUF,STCLASS="BASED(DA_RVBUF$)");
      492      911        %RV_USRDIR (NAME=USERDIR,STCLASS="BASED(DA_USERDIR$)");
      493      915        %INCLUDE DA_PERR_C;
      494      979        %INCLUDE M_INFO_C;
      495     1119        %INCLUDE B_LSDATA_C;
      496     4325        %INCLUDE B_STRINGS_C;
      497     4454        %INCLUDE SS_SCHED_C;
      498     4687        /**/
      499     4688        /* STATIC DATA */
      500     4689        /**/
      501     4690        %RV_DFKEY (NAME=DFKEY,STCLASS=STATIC);
      502     4708    1   DCL M$DUMPFILE DCB;
      503     4709        %FPT_READ (FPTN=FPT_RDDUMP,KEY=DFKEY,KEYS=YES,DCB=M$DUMPFILE);
      504     4748    1   DCL ZERO SBIN CONSTANT INIT(0);
      505     4749        %FPT_CVM (PHYSICAL=NO);
      506     4765        %FPT_GVP;
      507     4779        %FPT_FVP;
      508     4793    1   DCL B$IS$ PTR SYMREF;
      509     4794
      510     4795    1   DCL DAM$PHYS_TO_REAL ENTRY(2);
      511     4796        /**/
      512     4797        /* BASED STRUCTURES */
      513     4798        /**/
      514     4799    1   DCL PAGE(0:0) CHAR(4096) BASED(B$IS$);
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:84   
      515     4800    1   DCL 1 S$WSPTD(0:0) ALIGNED BASED(DA_WSPTD$),
      516     4801    1         2 BLKNO UBIN(18) UNAL,
      517     4802    1         2 Q BIT(2),
      518     4803    1         2 P BIT(1),
      519     4804    1         2 T BIT(2),
      520     4805    1         2 * BIT(1),
      521     4806    1         2 NBLKS UBIN(12) UNAL;
      522     4807    1   DCL B$TCB$ PTR SYMREF;
      523     4808        %B$TCB;
      524     4811        %B$ALT;
      525     4819        %SUB NEVER="WHILE('0'B)";
      526     4820        %SUB FOREVER="WHILE('1'B)";
      527     4821        %EJECT;
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:85   
      528     4822    1           ERRCD='0'B;

   4822  4 000002   200015 450100                    STZ     ERRCD,,AUTO

      529     4823    1           IF ADDR(SYSID)=ADDR(NIL) THEN U#=0;

   4823  4 000003   200005 236100                    LDQ     @SYSID,,AUTO
         4 000004   000001 116000 xsym               CMPQ    B_VECTNIL+1
         4 000005   000010 601000 4                  TNZ     s:4824

   4823  4 000006   200012 450100                    STZ     U#,,AUTO
         4 000007   000042 710000 4                  TRA     USRFOUND

      530     4824    1           ELSE IF SYSID<=0 THEN U#=-SYSID;

   4824  4 000010   200005 470500                    LDP0    @SYSID,,AUTO
         4 000011   000000 235100                    LDA     0,,PR0
         4 000012   000017 605400 4                  TPNZ    s:4826

   4824  4 000013   000000 235100                    LDA     0,,PR0
         4 000014   000000 531000                    NEG     0
         4 000015   200012 755100                    STA     U#,,AUTO
         4 000016   000042 710000 4                  TRA     USRFOUND

      531     4825    2              ELSE DO;

      532     4826    3                 DO U#=1 TO DA_MUAIS;

   4826  4 000017   000001 235007                    LDA     1,DL
         4 000020   200012 755100                    STA     U#,,AUTO
         4 000021   000033 710000 4                  TRA     s:4828+1

      533     4827    3                    IF SYSID=B$USRT$->B$USER.SYSID(U#) THEN GOTO USRFOUND;

   4827  4 000022   200005 470500                    LDP0    @SYSID,,AUTO
         4 000023   200012 235100                    LDA     U#,,AUTO
         4 000024   000004 735000                    ALS     4
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:86   
         4 000025   000000 471400 xsym               LDP1    B$USRT$
         4 000026   100014 236105                    LDQ     12,AL,PR1
         4 000027   777777 376007                    ANQ     -1,DL
         4 000030   000000 116100                    CMPQ    0,,PR0
         4 000031   000042 600000 4                  TZE     USRFOUND

      534     4828    3                    END;

   4828  4 000032   200012 054100                    AOS     U#,,AUTO
         4 000033   200012 236100                    LDQ     U#,,AUTO
         4 000034   000000 116000 xsym               CMPQ    DA_MUAIS
         4 000035   000022 604400 4                  TMOZ    s:4827

      535     4829    2                 CALL SETERR(%E$DA_NO_USER) ALTRET(ALT);

   4829  4 000036   000001 236000 5                  LDQ     1
         4 000037   200025 756100                    STQ     NPGS+2,,AUTO
         4 000040   001153 701000 4                  TSX1    SETERR
         4 000041   001042 702000 4                  TSX2    ALT

      536     4830    2                 END;

   4828  4 000042                       USRFOUND     null
      537     4831    1   USRFOUND: ;
      538     4832    1           IF U#~=0 THEN

   4832  4 000042   200012 235100                    LDA     U#,,AUTO
         4 000043   000061 600000 4                  TZE     s:4835

      539     4833    1              IF U#>DA_MUAIS OR B$USRT$->B$USER.US(U#)=%SS_SNULL THEN

   4833  4 000044   200012 236100                    LDQ     U#,,AUTO
         4 000045   000000 116000 xsym               CMPQ    DA_MUAIS
         4 000046   000055 605400 4                  TPNZ    s:4834
         4 000047   000004 735000                    ALS     4
         4 000050   000000 470400 xsym               LDP0    B$USRT$
         4 000051   000011 236105                    LDQ     9,AL,PR0
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:87   
         4 000052   770000 376003                    ANQ     -4096,DU
         4 000053   300000 116003                    CMPQ    98304,DU
         4 000054   000061 601000 4                  TNZ     s:4835

      540     4834    1                 CALL SETERR(%E$DA_NO_USER) ALTRET(ALT);

   4834  4 000055   000001 236000 5                  LDQ     1
         4 000056   200025 756100                    STQ     NPGS+2,,AUTO
         4 000057   001153 701000 4                  TSX1    SETERR
         4 000060   001042 702000 4                  TSX2    ALT

      541     4835    1           IF ADDR(WSQ)=ADDR(NIL) THEN

   4835  4 000061   200006 236100                    LDQ     @WSQ,,AUTO
         4 000062   000001 116000 xsym               CMPQ    B_VECTNIL+1
         4 000063   000074 601000 4                  TNZ     s:4838

      542     4836    1              IF U#=0 THEN W#=%MONWSQ;

   4836  4 000064   200012 235100                    LDA     U#,,AUTO
         4 000065   000071 601000 4                  TNZ     s:4837

   4836  4 000066   000001 235007                    LDA     1,DL
         4 000067   200013 755100                    STA     W#,,AUTO
         4 000070   000077 710000 4                  TRA     s:4839

      543     4837    1              ELSE W#=%USERWSQ;

   4837  4 000071   000010 235007                    LDA     8,DL
         4 000072   200013 755100                    STA     W#,,AUTO
         4 000073   000077 710000 4                  TRA     s:4839

      544     4838    1           ELSE W#=WSQ;

   4838  4 000074   200006 470500                    LDP0    @WSQ,,AUTO
         4 000075   000000 235100                    LDA     0,,PR0
         4 000076   200013 755100                    STA     W#,,AUTO
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:88   

      545     4839    1           IF W#~=%USERWSQ THEN U#=0;

   4839  4 000077   000010 115007                    CMPA    8,DL
         4 000100   000102 600000 4                  TZE     s:4840

   4839  4 000101   200012 450100                    STZ     U#,,AUTO

      546     4840    1           VP#=VP;

   4840  4 000102   200003 470500                    LDP0    @VP,,AUTO
         4 000103   000000 235100                    LDA     0,,PR0
         4 000104   200010 755100                    STA     VP#,,AUTO

      547     4841    1           WP#=WP+DA_WINDOWBASE;

   4841  4 000105   200004 471500                    LDP1    @WP,,AUTO
         4 000106   100000 236100                    LDQ     0,,PR1
         4 000107   000000 036000 xsym               ADLQ    DA_WINDOWBASE
         4 000110   200011 756100                    STQ     WP#,,AUTO

      548     4842    1           IF ADDR(N)=ADDR(NIL) THEN N#=0;

   4842  4 000111   200007 236100                    LDQ     @N,,AUTO
         4 000112   000001 116000 xsym               CMPQ    B_VECTNIL+1
         4 000113   000116 601000 4                  TNZ     s:4843

   4842  4 000114   200014 450100                    STZ     N#,,AUTO
         4 000115   000122 710000 4                  TRA     s:4844

      549     4843    1           ELSE N#=N-1;

   4843  4 000116   200007 473500                    LDP3    @N,,AUTO
         4 000117   300000 235100                    LDA     0,,PR3
         4 000120   000001 135007                    SBLA    1,DL
         4 000121   200014 755100                    STA     N#,,AUTO

PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:89   
      550     4844    1           IF WP#+N#>DA_WINDOWMAX THEN

   4844  4 000122   200011 236100                    LDQ     WP#,,AUTO
         4 000123   200014 036100                    ADLQ    N#,,AUTO
         4 000124   000000 116000 xsym               CMPQ    DA_WINDOWMAX
         4 000125   000132 604400 4                  TMOZ    s:4851

      551     4845    1              CALL SETERR(%E$DA_WINDOWMAX) ALTRET(ALT);

   4845  4 000126   000003 236000 5                  LDQ     3
         4 000127   200025 756100                    STQ     NPGS+2,,AUTO
         4 000130   001153 701000 4                  TSX1    SETERR
         4 000131   001042 702000 4                  TSX2    ALT

      552     4846        /*E*    ERROR:   DAM-E$DA_WINDOWMAX
      553     4847                MESSAGE: The requested window extends beyond the end of the
      554     4848                         available window area.
      555     4849                                                                           */
      556     4850        %EJECT;
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:90   
      557     4851    2           IF DA_DUMPFILE THEN DO;

   4851  4 000132   000000 234000 xsym               SZN     DA_DUMPFILE
         4 000133   000547 605000 4                  TPL     s:4950

      558     4852    2              DFKEY='007'O;

   4852  4 000134   007000 235003                    LDA     3584,DU
         4 000135   000000 236003                    LDQ     0,DU
         4 000136   000000 757000 1                  STAQ    DFKEY

      559     4853    2              DFKEY.K.NODEIDX=DA_NODEIDX;

   4853  4 000137   000000 236000 xsym               LDQ     DA_NODEIDX
         4 000140   000022 736000                    QLS     18
         4 000141   000000 552020 1                  STBQ    DFKEY,'20'O

      560     4854    3              DO I=0 TO N#;

   4854  4 000142   200016 450100                    STZ     I,,AUTO
         4 000143   000176 710000 4                  TRA     s:4865+1

      561     4855    4                 IF NOT DA_WINDOW.PRESENCE(I+WP#) THEN DO;

   4855  4 000144   200016 236100                    LDQ     I,,AUTO
         4 000145   200011 036100                    ADLQ    WP#,,AUTO
         4 000146   000000 234006 xsym               SZN     DA_WINDOW,QL
         4 000147   000175 604000 4                  TMI     s:4865

      562     4856    4                    FPT_GVP.V.PNO#=I+WP#;

   4856  4 000150   200016 236100                    LDQ     I,,AUTO
         4 000151   200011 036100                    ADLQ    WP#,,AUTO
         4 000152   000000 620006                    EAX0    0,QL
         4 000153   000030 440000 1                  SXL0    FPT_GVP+2

      563     4857    5                    DO INHIBIT;
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:91   

      564     4858    5                       DA_WINDOW(I+WP#)='400000777000'O;

   4858  4 000154   200016 236300                    LDQ   ! I,,AUTO
         4 000155   200011 036300                    ADLQ  ! WP#,,AUTO
         4 000156   200030 756300                    STQ   ! REAL+1,,AUTO
         4 000157   000001 236200 3                  LDQ   ! 1
         4 000160   200030 721300                    LXL1  ! REAL+1,,AUTO
         4 000161   000000 756211 xsym               STQ   ! DA_WINDOW,X1

      565     4859    6                       CALL M$GVP(FPT_GVP) WHENALTRETURN DO;

   4859  4 000162   000026 630600 1                  EPPR0 ! FPT_GVP
         4 000163   430005 713600                    CLIMB ! alt,+12293
         4 000164   400000 401760                    pmme    nvectors=1
         4 000165   000167 702200 4                  TSX2  ! s:4860
         4 000166   000175 710200 4                  TRA   ! s:4865

      566     4860    6                          DA_WINDOW.PRESENCE(I+WP#)='0'B;

   4860  4 000167   200016 236300                    LDQ   ! I,,AUTO
         4 000170   200011 036300                    ADLQ  ! WP#,,AUTO
         4 000171   000000 620206                    EAX0  ! 0,QL
         4 000172   000031 236200 xsym               LDQ   ! B_VECTNIL+25
         4 000173   000000 356210 xsym               ANSQ  ! DA_WINDOW,X0

      567     4861    6                          GOTO PMMEALT;

   4861  4 000174   001036 710200 4                  TRA   ! PMMEALT

      568     4862    6                          END;
      569     4863    5                       END;

      570     4864    4                    END;

      571     4865    3                 END;

PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:92   
   4865  4 000175   200016 054100                    AOS     I,,AUTO
         4 000176   200016 236100                    LDQ     I,,AUTO
         4 000177   200014 116100                    CMPQ    N#,,AUTO
         4 000200   000144 604400 4                  TMOZ    s:4855

      572     4866    2              NPGS=0;

   4866  4 000201   200023 450100                    STZ     NPGS,,AUTO

      573     4867    3   WSQCASE:   DO CASE(W#);

   4867  4 000202   200013 235100       WSQCASE      LDA     W#,,AUTO
         4 000203   000035 115007                    CMPA    29,DL
         4 000204   000206 602005 4                  TNC     WSQCASE+4,AL
         4 000205   000415 710000 4                  TRA     s:4915
         4 000206   000243 710000 4                  TRA     s:4869
         4 000207   000251 710000 4                  TRA     s:4873
         4 000210   000415 710000 4                  TRA     s:4915
         4 000211   000415 710000 4                  TRA     s:4915
         4 000212   000415 710000 4                  TRA     s:4915
         4 000213   000415 710000 4                  TRA     s:4915
         4 000214   000415 710000 4                  TRA     s:4915
         4 000215   000415 710000 4                  TRA     s:4915
         4 000216   000302 710000 4                  TRA     s:4883
         4 000217   000415 710000 4                  TRA     s:4915
         4 000220   000415 710000 4                  TRA     s:4915
         4 000221   000415 710000 4                  TRA     s:4915
         4 000222   000373 710000 4                  TRA     s:4906
         4 000223   000373 710000 4                  TRA     s:4906
         4 000224   000373 710000 4                  TRA     s:4906
         4 000225   000373 710000 4                  TRA     s:4906
         4 000226   000373 710000 4                  TRA     s:4906
         4 000227   000373 710000 4                  TRA     s:4906
         4 000230   000373 710000 4                  TRA     s:4906
         4 000231   000373 710000 4                  TRA     s:4906
         4 000232   000373 710000 4                  TRA     s:4906
         4 000233   000373 710000 4                  TRA     s:4906
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:93   
         4 000234   000373 710000 4                  TRA     s:4906
         4 000235   000373 710000 4                  TRA     s:4906
         4 000236   000373 710000 4                  TRA     s:4906
         4 000237   000373 710000 4                  TRA     s:4906
         4 000240   000373 710000 4                  TRA     s:4906
         4 000241   000373 710000 4                  TRA     s:4906
         4 000242   000373 710000 4                  TRA     s:4906

      574     4868    3               CASE(%REALWSQ);

      575     4869    3                 DFKEY.K.TYP=%R_LRMEM#;

   4869  4 000243   001000 236007                    LDQ     512,DL
         4 000244   000000 552010 1                  STBQ    DFKEY,'10'O

      576     4870    3                 DFKEY.K.STYP=0;

   4870  4 000245   000000 236003                    LDQ     0,DU
         4 000246   000000 552004 1                  STBQ    DFKEY,'04'O

      577     4871    3                 DFKEY.K.USR#=0;

   4871  4 000247   000001 552040 1                  STBQ    DFKEY+1,'40'O
         4 000250   000421 710000 4                  TRA     s:4922

      578     4872    3               CASE(%MONWSQ);

      579     4873    4                IF VP#>=%(REAL_BASE%/4096) AND VP#<%(%(REAL_BASE%+REAL_BOUND%+1)/4096)
              4873                          THEN DO;

   4873  4 000251   200010 236100                    LDQ     VP#,,AUTO
         4 000252   000500 116007                    CMPQ    320,DL
         4 000253   000262 604000 4                  TMI     s:4878
         4 000254   000510 116007                    CMPQ    328,DL
         4 000255   000262 605000 4                  TPL     s:4878

      580     4874    4                    VP#=VP#-%(REAL_BASE%/4096);
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:94   

   4874  4 000256   000500 336007                    LCQ     320,DL
         4 000257   200010 056100                    ASQ     VP#,,AUTO

      581     4875    4                    W#=%REALWSQ;

   4875  4 000260   200013 450100                    STZ     W#,,AUTO

      582     4876    4                    GOTO WSQCASE;

   4876  4 000261   000202 710000 4                  TRA     WSQCASE

      583     4877    4                    END;
      584     4878    3                 DFKEY.K.TYP=%R_MWSQ#;

   4878  4 000262   002000 236007                    LDQ     1024,DL
         4 000263   000000 552010 1                  STBQ    DFKEY,'10'O

      585     4879    3                 IF DA_CPU#=RVBUF.S_PNO THEN DFKEY.K.STYP=%R_MCPU#;

   4879  4 000264   000000 470400 xsym               LDP0    DA_RVBUF$
         4 000265   000000 236000 xsym               LDQ     DA_CPU#
         4 000266   000274 604000 4                  TMI     s:4880
         4 000267   000142 116100                    CMPQ    98,,PR0
         4 000270   000274 601000 4                  TNZ     s:4880

   4879  4 000271   000000 236003                    LDQ     0,DU
         4 000272   000000 552004 1                  STBQ    DFKEY,'04'O
         4 000273   000276 710000 4                  TRA     s:4881

      586     4880    3                 ELSE DFKEY.K.STYP=%R_SCPU#;

   4880  4 000274   000001 236007                    LDQ     1,DL
         4 000275   000000 552004 1                  STBQ    DFKEY,'04'O

      587     4881    3                 DFKEY.K.USR#=DA_CPU#;

PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:95   
   4881  4 000276   000000 236000 xsym               LDQ     DA_CPU#
         4 000277   000033 736000                    QLS     27
         4 000300   000001 552040 1                  STBQ    DFKEY+1,'40'O
         4 000301   000421 710000 4                  TRA     s:4922

      588     4882    3               CASE(%USERWSQ);

      589     4883    4                 IF VP#=0 AND USERDIR.USER.DA(U#)=0 THEN DO;

   4883  4 000302   200010 236100                    LDQ     VP#,,AUTO
         4 000303   000357 601000 4                  TNZ     s:4899
         4 000304   200012 235100                    LDA     U#,,AUTO
         4 000305   000001 735000                    ALS     1
         4 000306   000000 470400 xsym               LDP0    DA_USERDIR$
         4 000307   000000 235105                    LDA     0,AL,PR0
         4 000310   000357 601000 4                  TNZ     s:4899

      590     4884    4                    DFKEY.K.TYP=%R_DINFO#;

   4884  4 000311   000000 236003                    LDQ     0,DU
         4 000312   000000 552010 1                  STBQ    DFKEY,'10'O

      591     4885    4                    DFKEY.K.STYP=%R_AJITS#;

   4885  4 000313   000002 236007                    LDQ     2,DL
         4 000314   000000 552004 1                  STBQ    DFKEY,'04'O

      592     4886    4                    DFKEY.K.USR#=U#;

   4886  4 000315   200012 236100                    LDQ     U#,,AUTO
         4 000316   000033 736000                    QLS     27
         4 000317   000001 552040 1                  STBQ    DFKEY+1,'40'O

      593     4887    4                    DFKEY.K.VP#=0;

   4887  4 000320   000000 236003                    LDQ     0,DU
         4 000321   000001 552034 1                  STBQ    DFKEY+1,'34'O
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:96   

      594     4888    4                    I=0;

   4888  4 000322   200016 450100                    STZ     I,,AUTO

      595     4889    4                    FPT_RDDUMP.BUF_.BUF$=PINCRW(B$IS$,WP#*1024+512);

   4889  4 000323   200011 236100                    LDQ     WP#,,AUTO
         4 000324   000034 736000                    QLS     28
         4 000325   001000 036003                    ADLQ    512,DU
         4 000326   000000 036000 xsym               ADLQ    B$IS$
         4 000327   000007 756000 1                  STQ     FPT_RDDUMP+5

      596     4890    4                    FPT_RDDUMP.BUF_.BOUND=512;

   4890  4 000330   000006 236000 1                  LDQ     FPT_RDDUMP+4
         4 000331   177777 376007                    ANQ     65535,DL
         4 000332   000200 276003                    ORQ     128,DU
         4 000333   000006 756000 1                  STQ     FPT_RDDUMP+4

      597     4891    4                    CALL M$READ(FPT_RDDUMP) ALTRET(NO_DUMP_PAGE);

   4891  4 000334   000002 630400 1                  EPPR0   FPT_RDDUMP
         4 000335   440000 713400                    CLIMB   alt,read
         4 000336   401400 401760                    pmme    nvectors=4
         4 000337   000524 702000 4                  TSX2    NO_DUMP_PAGE

      598     4892    4                    VP#=VP#+1;

   4892  4 000340   200010 054100                    AOS     VP#,,AUTO

      599     4893    4                    N#=N#-1;

   4893  4 000341   000001 336007                    LCQ     1,DL
         4 000342   200014 056100                    ASQ     N#,,AUTO

      600     4894    4                    NPGS=NPGS+1;
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:97   

   4894  4 000343   200023 054100                    AOS     NPGS,,AUTO

      601     4895    4                    DA_WINDOW.VP(WP#)=0;

   4895  4 000344   200011 720100                    LXL0    WP#,,AUTO
         4 000345   000004 236000 5                  LDQ     4
         4 000346   000000 356010 xsym               ANSQ    DA_WINDOW,X0

      602     4896    4                    DA_WINDOW.WSQ(WP#)=%USERWSQ;

   4896  4 000347   000000 236010 xsym               LDQ     DA_WINDOW,X0
         4 000350   000005 376000 5                  ANQ     5
         4 000351   010000 276007                    ORQ     4096,DL
         4 000352   000000 756010 xsym               STQ     DA_WINDOW,X0

      603     4897    4                    DA_WINDOW.USR(WP#)=U#;

   4897  4 000353   200012 236100                    LDQ     U#,,AUTO
         4 000354   000000 676010 xsym               ERQ     DA_WINDOW,X0
         4 000355   000777 376007                    ANQ     511,DL
         4 000356   000000 656010 xsym               ERSQ    DA_WINDOW,X0

      604     4898    4                    END;

      605     4899    3                 DFKEY.K.TYP=%R_UWSQ#;

   4899  4 000357   004000 236007                    LDQ     2048,DL
         4 000360   000000 552010 1                  STBQ    DFKEY,'10'O

      606     4900    3                 DFKEY.K.STYP=USERDIR.USER.TYP(U#);

   4900  4 000361   200012 235100                    LDA     U#,,AUTO
         4 000362   000001 735000                    ALS     1
         4 000363   000000 470400 xsym               LDP0    DA_USERDIR$
         4 000364   000001 236105                    LDQ     1,AL,PR0
         4 000365   000022 772000                    QRL     18
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:98   
         4 000366   000000 552004 1                  STBQ    DFKEY,'04'O

      607     4901    3                 DFKEY.K.USR#=U#;

   4901  4 000367   200012 236100                    LDQ     U#,,AUTO
         4 000370   000033 736000                    QLS     27
         4 000371   000001 552040 1                  STBQ    DFKEY+1,'40'O
         4 000372   000421 710000 4                  TRA     s:4922

      608     4902    3               CASE(%CGWSQ,%B_CWSQ1,%B_CWSQ2,%B_CWSQ3,%B_CWSQ4,

      609     4903    3                   %B_CWSQ5,%B_CWSQ6,%B_CWSQ7,%B_CWSQ8,
      610     4904    3                   %B_CWSQ9,%B_CWSQ10,%B_CWSQ11,%B_CWSQ12,
      611     4905    3                   %B_CWSQ13,%B_CWSQ14,%B_CWSQ15,%B_CWSQ16);
      612     4906    3                 IF W#=%CGWSQ THEN DFKEY.K.TYP=%R_CGPGS#;

   4906  4 000373   000014 115007                    CMPA    12,DL
         4 000374   000400 601000 4                  TNZ     s:4907

   4906  4 000375   005000 236007                    LDQ     2560,DL
         4 000376   000000 552010 1                  STBQ    DFKEY,'10'O
         4 000377   000402 710000 4                  TRA     s:4908

      613     4907    3                 ELSE DFKEY.K.TYP=%R_CWSQPGS#;

   4907  4 000400   003000 236007                    LDQ     1536,DL
         4 000401   000000 552010 1                  STBQ    DFKEY,'10'O

      614     4908    3                 DFKEY.K.STYP=W#;

   4908  4 000402   200013 236100                    LDQ     W#,,AUTO
         4 000403   000000 552004 1                  STBQ    DFKEY,'04'O

      615     4909    4                 IF VP#<0 THEN DO;         /* GET THE PAGE TABLE                 */

   4909  4 000404   200010 235100                    LDA     VP#,,AUTO
         4 000405   000412 605000 4                  TPL     s:4913
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:99   

      616     4910    4                    DFKEY.K.USR#=0;

   4910  4 000406   000000 236003                    LDQ     0,DU
         4 000407   000001 552040 1                  STBQ    DFKEY+1,'40'O

      617     4911    4                    VP#=0;

   4911  4 000410   200010 450100                    STZ     VP#,,AUTO

      618     4912    4                    END;

   4912  4 000411   000421 710000 4                  TRA     s:4922

      619     4913    3                 ELSE DFKEY.K.USR#=1;

   4913  4 000412   001000 236003                    LDQ     512,DU
         4 000413   000001 552040 1                  STBQ    DFKEY+1,'40'O
         4 000414   000421 710000 4                  TRA     s:4922

      620     4914    3               CASE(ELSE);

      621     4915    3                 CALL SETERR(%E$DA_BAD_WSQ) ALTRET(ALT);

   4915  4 000415   000007 236000 5                  LDQ     7
         4 000416   200025 756100                    STQ     NPGS+2,,AUTO
         4 000417   001153 701000 4                  TSX1    SETERR
         4 000420   001042 702000 4                  TSX2    ALT

      622     4916        /*E*    ERROR:   DAM-E$DA_BAD_WSQ
      623     4917                MESSAGE: Invalid working space quarter number.
      624     4918                MESSAGE1: Valid WSQs are %REALWSQ, %MONWSQ, %USERWSQ or any
      625     4919                          communications WSQ.
      626     4920                                                                           */
      627     4921    3               END;

      628     4922    3              DO I=0 TO N#;
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:100  

   4922  4 000421   200016 450100                    STZ     I,,AUTO
         4 000422   000543 710000 4                  TRA     L1+1

      629     4923    3                 IF NOT (DA_WINDOW.VP(WP#+I)=VP#+I AND

   4923  4 000423   200011 236100                    LDQ     WP#,,AUTO
         4 000424   200016 036100                    ADLQ    I,,AUTO
         4 000425   200030 756100                    STQ     REAL+1,,AUTO
         4 000426   200010 236100                    LDQ     VP#,,AUTO
         4 000427   200016 036100                    ADLQ    I,,AUTO
         4 000430   200031 756100                    STQ     REAL+2,,AUTO
         4 000431   200030 720100                    LXL0    REAL+1,,AUTO
         4 000432   000000 236010 xsym               LDQ     DA_WINDOW,X0
         4 000433   000022 772000                    QRL     18
         4 000434   377777 376007                    ANQ     131071,DL
         4 000435   200031 116100                    CMPQ    REAL+2,,AUTO
         4 000436   000454 601000 4                  TNZ     s:4926
         4 000437   200011 236100                    LDQ     WP#,,AUTO
         4 000440   200016 036100                    ADLQ    I,,AUTO
         4 000441   000000 236006 xsym               LDQ     DA_WINDOW,QL
         4 000442   000011 772000                    QRL     9
         4 000443   000777 376007                    ANQ     511,DL
         4 000444   200013 116100                    CMPQ    W#,,AUTO
         4 000445   000454 601000 4                  TNZ     s:4926
         4 000446   200011 236100                    LDQ     WP#,,AUTO
         4 000447   200016 036100                    ADLQ    I,,AUTO
         4 000450   000000 236006 xsym               LDQ     DA_WINDOW,QL
         4 000451   000777 376007                    ANQ     511,DL
         4 000452   200012 116100                    CMPQ    U#,,AUTO
         4 000453   000522 600000 4                  TZE     s:4933

      630     4924    3                   DA_WINDOW.WSQ(WP#+I)=W# AND
      631     4925    4                   DA_WINDOW.USR(WP#+I)=U#) THEN DO;

      632     4926    4                    DFKEY.K.VP#=VP#+I;

PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:101  
   4926  4 000454   200010 236100                    LDQ     VP#,,AUTO
         4 000455   200016 036100                    ADLQ    I,,AUTO
         4 000456   000001 552034 1                  STBQ    DFKEY+1,'34'O

      633     4927    4                    FPT_RDDUMP.BUF_=VECTOR(PAGE(WP#+I));

   4927  4 000457   200011 236100                    LDQ     WP#,,AUTO
         4 000460   200016 036100                    ADLQ    I,,AUTO
         4 000461   000010 235000 5                  LDA     8
         4 000462   000034 736000                    QLS     28
         4 000463   000000 036000 xsym               ADLQ    B$IS$
         4 000464   000006 757000 1                  STAQ    FPT_RDDUMP+4

      634     4928    4                    CALL M$READ(FPT_RDDUMP) ALTRET(NO_DUMP_PAGE);

   4928  4 000465   000002 630400 1                  EPPR0   FPT_RDDUMP
         4 000466   440000 713400                    CLIMB   alt,read
         4 000467   401400 401760                    pmme    nvectors=4
         4 000470   000524 702000 4                  TSX2    NO_DUMP_PAGE

      635     4929    4                    DA_WINDOW.VP(WP#+I)=VP#+I;

   4929  4 000471   200011 236100                    LDQ     WP#,,AUTO
         4 000472   200016 036100                    ADLQ    I,,AUTO
         4 000473   200030 756100                    STQ     REAL+1,,AUTO
         4 000474   200010 236100                    LDQ     VP#,,AUTO
         4 000475   200016 036100                    ADLQ    I,,AUTO
         4 000476   200030 720100                    LXL0    REAL+1,,AUTO
         4 000477   000022 736000                    QLS     18
         4 000500   000000 676010 xsym               ERQ     DA_WINDOW,X0
         4 000501   377777 376003                    ANQ     131071,DU
         4 000502   000000 656010 xsym               ERSQ    DA_WINDOW,X0

      636     4930    4                    DA_WINDOW.WSQ(WP#+I)=W#;

   4930  4 000503   200011 236100                    LDQ     WP#,,AUTO
         4 000504   200016 036100                    ADLQ    I,,AUTO
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:102  
         4 000505   000000 620006                    EAX0    0,QL
         4 000506   200013 236100                    LDQ     W#,,AUTO
         4 000507   000011 736000                    QLS     9
         4 000510   000000 676010 xsym               ERQ     DA_WINDOW,X0
         4 000511   777000 376007                    ANQ     -512,DL
         4 000512   000000 656010 xsym               ERSQ    DA_WINDOW,X0

      637     4931    4                    DA_WINDOW.USR(WP#+I)=U#;

   4931  4 000513   200011 236100                    LDQ     WP#,,AUTO
         4 000514   200016 036100                    ADLQ    I,,AUTO
         4 000515   000000 620006                    EAX0    0,QL
         4 000516   200012 236100                    LDQ     U#,,AUTO
         4 000517   000000 676010 xsym               ERQ     DA_WINDOW,X0
         4 000520   000777 376007                    ANQ     511,DL
         4 000521   000000 656010 xsym               ERSQ    DA_WINDOW,X0

      638     4932    4                    END;

      639     4933    3                 NPGS=NPGS+1;

   4933  4 000522   200023 054100                    AOS     NPGS,,AUTO

      640     4934    4                 DO NEVER;

   4934  4 000523   000542 710000 4                  TRA     L1

   4929  4 000524                       NO_DUMP_PAGE null
      641     4935    4   NO_DUMP_PAGE:    ;
      642     4936                                                /* CALL SETERR(%E$DA_NOT_DUMPED); */
      643     4937        /*E*    ERROR:   DAM-E$DA_NOT_DUMPED
      644     4938                MESSAGE: One or more of the requested pages is not in the
      645     4939                         dump file.
      646     4940                                                                           */
      647     4941    4                    FPT_FVP.V.PNO#=WP#+I;

   4941  4 000524   200011 236100                    LDQ     WP#,,AUTO
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:103  
         4 000525   200016 036100                    ADLQ    I,,AUTO
         4 000526   000000 620006                    EAX0    0,QL
         4 000527   000034 440000 1                  SXL0    FPT_FVP+2

      648     4942    4                    DA_WINDOW(WP#+I)='000000777000'O;

   4942  4 000530   200011 236100                    LDQ     WP#,,AUTO
         4 000531   200016 036100                    ADLQ    I,,AUTO
         4 000532   200030 756100                    STQ     REAL+1,,AUTO
         4 000533   000002 236000 3                  LDQ     2
         4 000534   200030 721100                    LXL1    REAL+1,,AUTO
         4 000535   000000 756011 xsym               STQ     DA_WINDOW,X1

      649     4943    4                    CALL M$FVP(FPT_FVP) ALTRET(L1);

   4943  4 000536   000032 630400 1                  EPPR0   FPT_FVP
         4 000537   430006 713400                    CLIMB   alt,+12294
         4 000540   400000 401760                    pmme    nvectors=1
         4 000541   000542 702000 4                  TSX2    L1

   4942  4 000542                       L1           null
      650     4944    4   L1:              ;
      651     4945    4                    END;

      652     4946    3                 END;

   4946  4 000542   200016 054100                    AOS     I,,AUTO
         4 000543   200016 236100                    LDQ     I,,AUTO
         4 000544   200014 116100                    CMPQ    N#,,AUTO
         4 000545   000423 604400 4                  TMOZ    s:4923

      653     4947    2              END;                         /* IF DA_DUMPFILE                     */

   4947  4 000546   001027 710000 4                  TRA     s:4993

      654     4948        %EJECT;
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:104  
      655     4949    2           ELSE DO;                        /* NOT USING DUMP FILE                */

      656     4950    2              NPGS=0;

   4950  4 000547   200023 450100                    STZ     NPGS,,AUTO

      657     4951    2              PTSZ = 1;

   4951  4 000550   000001 235007                    LDA     1,DL
         4 000551   200020 755100                    STA     PTSZ,,AUTO

      658     4952    3              IF W#~=0 OR DA_CPU=%DPS90 OR DA_CPU=%DPS90XA THEN DO;

   4952  4 000552   200013 236100                    LDQ     W#,,AUTO
         4 000553   000561 601000 4                  TNZ     s:4953
         4 000554   000000 235000 xsym               LDA     DA_CPU
         4 000555   000004 115007                    CMPA    4,DL
         4 000556   000561 600000 4                  TZE     s:4953
         4 000557   000005 115007                    CMPA    5,DL
         4 000560   000672 601000 4                  TNZ     s:4971

      659     4953    3                 IF U#=0 THEN

   4953  4 000561   200012 235100                    LDA     U#,,AUTO
         4 000562   000607 601000 4                  TNZ     s:4962

      660     4954    4                    IF W#=%MONWSQ THEN DO;

   4954  4 000563   000001 116007                    CMPQ    1,DL
         4 000564   000575 601000 4                  TNZ     s:4959

      661     4955    4                       PTP=DA_MONPTP;

   4955  4 000565   000000 235000 xsym               LDA     DA_MONPTP
         4 000566   200017 755100                    STA     PTP,,AUTO

      662     4956    4                       PTSZ = S$WSPTD.NBLKS(%MONWSQ)/16;
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:105  

   4956  4 000567   000000 470400 xsym               LDP0    DA_WSPTD$
         4 000570   000001 236100                    LDQ     1,,PR0
         4 000571   007777 376007                    ANQ     4095,DL
         4 000572   000004 772000                    QRL     4
         4 000573   200020 756100                    STQ     PTSZ,,AUTO

      663     4957    4                       END;

   4957  4 000574   000614 710000 4                  TRA     s:4963

      664     4958    4                    ELSE DO;

      665     4959    4                       PTP=S$WSPTD.BLKNO(W#);

   4959  4 000575   000000 470400 xsym               LDP0    DA_WSPTD$
         4 000576   000000 236106                    LDQ     0,QL,PR0
         4 000577   000022 772000                    QRL     18
         4 000600   200017 756100                    STQ     PTP,,AUTO

      666     4960    4                       PTSZ = S$WSPTD.NBLKS(W#)/16;

   4960  4 000601   200013 720100                    LXL0    W#,,AUTO
         4 000602   000000 236110                    LDQ     0,X0,PR0
         4 000603   007777 376007                    ANQ     4095,DL
         4 000604   000004 772000                    QRL     4
         4 000605   200020 756100                    STQ     PTSZ,,AUTO

      667     4961    4                       END;

   4961  4 000606   000614 710000 4                  TRA     s:4963

      668     4962    3                 ELSE PTP=B$USRT$->B$USER.PT(U#);

   4962  4 000607   000004 735000                    ALS     4
         4 000610   000000 470400 xsym               LDP0    B$USRT$
         4 000611   000014 236105                    LDQ     12,AL,PR0
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:106  
         4 000612   000022 772000                    QRL     18
         4 000613   200017 756100                    STQ     PTP,,AUTO

      669     4963    3                 RPN = MOD(PTP*64,1024);

   4963  4 000614   200017 236100                    LDQ     PTP,,AUTO
         4 000615   000006 736000                    QLS     6
         4 000616   002000 506007                    DIV     1024,DL
         4 000617   200021 755100                    STA     RPN,,AUTO

      670     4964    3                IF DA_CPU~=%DPS90XA AND DA_CPU~=%DPS8000 THEN PTP=PTP*64/1024;ELSE RPN
              4964                          =0;

   4964  4 000620   000000 236000 xsym               LDQ     DA_CPU
         4 000621   000005 116007                    CMPQ    5,DL
         4 000622   000632 600000 4                  TZE     s:4964+10
         4 000623   000006 116007                    CMPQ    6,DL
         4 000624   000632 600000 4                  TZE     s:4964+10

   4964  4 000625   200017 236100                    LDQ     PTP,,AUTO
         4 000626   000006 736000                    QLS     6
         4 000627   002000 506007                    DIV     1024,DL
         4 000630   200017 756100                    STQ     PTP,,AUTO
         4 000631   000633 710000 4                  TRA     s:4965

   4964  4 000632   200021 450100                    STZ     RPN,,AUTO

      671     4965    3                 IF W#=%CGWSQ THEN PTSZ = 10; /* MAP IN TEN PAGES */

   4965  4 000633   200013 235100                    LDA     W#,,AUTO
         4 000634   000014 115007                    CMPA    12,DL
         4 000635   000640 601000 4                  TNZ     s:4966

   4965  4 000636   000012 236007                    LDQ     10,DL
         4 000637   200020 756100                    STQ     PTSZ,,AUTO

      672     4966    4                 DO I=0 TO PTSZ-1;
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:107  

   4966  4 000640   200016 450100                    STZ     I,,AUTO
         4 000641   000661 710000 4                  TRA     s:4968+1

      673     4967    4                    CALL CVM(DA_MSCPG1+I,(PTP)+I) ALTRET(PMMEALT);

   4967  4 000642   000000 236000 xsym               LDQ     DA_MSCPG1
         4 000643   200016 036100                    ADLQ    I,,AUTO
         4 000644   200030 756100                    STQ     REAL+1,,AUTO
         4 000645   200017 236100                    LDQ     PTP,,AUTO
         4 000646   200016 036100                    ADLQ    I,,AUTO
         4 000647   200030 235100                    LDA     REAL+1,,AUTO
         4 000650   200032 755100                    STA     REAL+3,,AUTO
         4 000651   200033 756100                    STQ     REAL+4,,AUTO
         4 000652   200033 630500                    EPPR0   REAL+4,,AUTO
         4 000653   200026 450500                    STP0    @CODE+1,,AUTO
         4 000654   200032 631500                    EPPR1   REAL+3,,AUTO
         4 000655   200025 451500                    STP1    NPGS+2,,AUTO
         4 000656   001066 701000 4                  TSX1    CVM
         4 000657   001036 702000 4                  TSX2    PMMEALT

      674     4968    4                    END;

   4968  4 000660   200016 054100                    AOS     I,,AUTO
         4 000661   200016 236100                    LDQ     I,,AUTO
         4 000662   200020 116100                    CMPQ    PTSZ,,AUTO
         4 000663   000642 604000 4                  TMI     s:4967

      675     4969    3                 PT$=PINCRW(B$IS$,DA_MSCPG1*1024+RPN);

   4969  4 000664   000000 236000 xsym               LDQ     DA_MSCPG1
         4 000665   000012 736000                    QLS     10
         4 000666   200021 036100                    ADLQ    RPN,,AUTO
         4 000667   000022 736000                    QLS     18
         4 000670   000000 036000 xsym               ADLQ    B$IS$
         4 000671   200022 756100                    STQ     PT$,,AUTO

PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:108  
      676     4970    3                 END;

      677     4971    3              DO I=0 TO N#;

   4971  4 000672   200016 450100                    STZ     I,,AUTO
         4 000673   001024 710000 4                  TRA     s:4991+1

      678     4972    3                 IF NOT (DA_WINDOW.VP(WP#+I)=VP#+I AND

   4972  4 000674   200011 236100                    LDQ     WP#,,AUTO
         4 000675   200016 036100                    ADLQ    I,,AUTO
         4 000676   200030 756100                    STQ     REAL+1,,AUTO
         4 000677   200010 236100                    LDQ     VP#,,AUTO
         4 000700   200016 036100                    ADLQ    I,,AUTO
         4 000701   200031 756100                    STQ     REAL+2,,AUTO
         4 000702   200030 720100                    LXL0    REAL+1,,AUTO
         4 000703   000000 236010 xsym               LDQ     DA_WINDOW,X0
         4 000704   000022 772000                    QRL     18
         4 000705   377777 376007                    ANQ     131071,DL
         4 000706   200031 116100                    CMPQ    REAL+2,,AUTO
         4 000707   000725 601000 4                  TNZ     s:4975
         4 000710   200011 236100                    LDQ     WP#,,AUTO
         4 000711   200016 036100                    ADLQ    I,,AUTO
         4 000712   000000 236006 xsym               LDQ     DA_WINDOW,QL
         4 000713   000011 772000                    QRL     9
         4 000714   000777 376007                    ANQ     511,DL
         4 000715   200013 116100                    CMPQ    W#,,AUTO
         4 000716   000725 601000 4                  TNZ     s:4975
         4 000717   200011 236100                    LDQ     WP#,,AUTO
         4 000720   200016 036100                    ADLQ    I,,AUTO
         4 000721   000000 236006 xsym               LDQ     DA_WINDOW,QL
         4 000722   000777 376007                    ANQ     511,DL
         4 000723   200012 116100                    CMPQ    U#,,AUTO
         4 000724   001022 600000 4                  TZE     s:4990

      679     4973    3                   DA_WINDOW.WSQ(WP#+I)=W# AND
      680     4974    4                   DA_WINDOW.USR(WP#+I)=U#) THEN DO;
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:109  

      681     4975    5                    IF W#=0 AND DA_CPU~=%DPS90 AND DA_CPU~=%DPS90XA THEN DO;

   4975  4 000725   200013 235100                    LDA     W#,,AUTO
         4 000726   000740 601000 4                  TNZ     s:4979
         4 000727   000000 236000 xsym               LDQ     DA_CPU
         4 000730   000004 116007                    CMPQ    4,DL
         4 000731   000740 600000 4                  TZE     s:4979
         4 000732   000005 116007                    CMPQ    5,DL
         4 000733   000740 600000 4                  TZE     s:4979

      682     4976    5                       RPN = VP# + I;

   4976  4 000734   200010 236100                    LDQ     VP#,,AUTO
         4 000735   200016 036100                    ADLQ    I,,AUTO
         4 000736   200021 756100                    STQ     RPN,,AUTO

      683     4977    5                       END;

   4977  4 000737   000757 710000 4                  TRA     s:4985

      684     4978    5                    ELSE DO;

      685     4979    5                       IF PT$->B$MAP.CTRL(VP#+I) & %PGINMEM THEN

   4979  4 000740   200010 236100                    LDQ     VP#,,AUTO
         4 000741   200016 036100                    ADLQ    I,,AUTO
         4 000742   200022 470500                    LDP0    PT$,,AUTO
         4 000743   000000 236106                    LDQ     0,QL,PR0
         4 000744   000036 736000                    QLS     30
         4 000745   400000 376003                    ANQ     -131072,DU
         4 000746   000755 600000 4                  TZE     s:4983

      686     4980    6                       DO;

      687     4981    6                          RPN=PT$->B$MAP.RPN(VP#+I);

PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:110  
   4981  4 000747   200010 236100                    LDQ     VP#,,AUTO
         4 000750   200016 036100                    ADLQ    I,,AUTO
         4 000751   000000 236106                    LDQ     0,QL,PR0
         4 000752   000022 772000                    QRL     18
         4 000753   200021 756100                    STQ     RPN,,AUTO

      688     4982    6                          END;

   4982  4 000754   000757 710000 4                  TRA     s:4985

      689     4983    5                       ELSE RPN=-1;

   4983  4 000755   000001 336007                    LCQ     1,DL
         4 000756   200021 756100                    STQ     RPN,,AUTO

      690     4984    5                       END;

      691     4985    4                    CALL CVM(WP#+I,RPN);

   4985  4 000757   200011 236100                    LDQ     WP#,,AUTO
         4 000760   200016 036100                    ADLQ    I,,AUTO
         4 000761   200034 756100                    STQ     REAL+5,,AUTO
         4 000762   200021 630500                    EPPR0   RPN,,AUTO
         4 000763   200026 450500                    STP0    @CODE+1,,AUTO
         4 000764   200034 631500                    EPPR1   REAL+5,,AUTO
         4 000765   200025 451500                    STP1    NPGS+2,,AUTO
         4 000766   001066 701000 4                  TSX1    CVM
         4 000767   000000 011000                    NOP     0

      692     4986    4                    DA_WINDOW.VP(WP#+I)=VP#+I;

   4986  4 000770   200011 236100                    LDQ     WP#,,AUTO
         4 000771   200016 036100                    ADLQ    I,,AUTO
         4 000772   200030 756100                    STQ     REAL+1,,AUTO
         4 000773   200010 236100                    LDQ     VP#,,AUTO
         4 000774   200016 036100                    ADLQ    I,,AUTO
         4 000775   200030 720100                    LXL0    REAL+1,,AUTO
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:111  
         4 000776   000022 736000                    QLS     18
         4 000777   000000 676010 xsym               ERQ     DA_WINDOW,X0
         4 001000   377777 376003                    ANQ     131071,DU
         4 001001   000000 656010 xsym               ERSQ    DA_WINDOW,X0

      693     4987    4                    DA_WINDOW.WSQ(WP#+I)=W#;

   4987  4 001002   200011 236100                    LDQ     WP#,,AUTO
         4 001003   200016 036100                    ADLQ    I,,AUTO
         4 001004   000000 620006                    EAX0    0,QL
         4 001005   200013 236100                    LDQ     W#,,AUTO
         4 001006   000011 736000                    QLS     9
         4 001007   000000 676010 xsym               ERQ     DA_WINDOW,X0
         4 001010   777000 376007                    ANQ     -512,DL
         4 001011   000000 656010 xsym               ERSQ    DA_WINDOW,X0

      694     4988    4                    DA_WINDOW.USR(WP#+I)=U#;

   4988  4 001012   200011 236100                    LDQ     WP#,,AUTO
         4 001013   200016 036100                    ADLQ    I,,AUTO
         4 001014   000000 620006                    EAX0    0,QL
         4 001015   200012 236100                    LDQ     U#,,AUTO
         4 001016   000000 676010 xsym               ERQ     DA_WINDOW,X0
         4 001017   000777 376007                    ANQ     511,DL
         4 001020   000000 656010 xsym               ERSQ    DA_WINDOW,X0

      695     4989    4                    END;

   4989  4 001021   001023 710000 4                  TRA     s:4991

      696     4990    3                 ELSE NPGS=NPGS+1;

   4990  4 001022   200023 054100                    AOS     NPGS,,AUTO

      697     4991    3                 END;

   4991  4 001023   200016 054100                    AOS     I,,AUTO
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:112  
         4 001024   200016 236100                    LDQ     I,,AUTO
         4 001025   200014 116100                    CMPQ    N#,,AUTO
         4 001026   000674 604400 4                  TMOZ    s:4972

      698     4992    2              END;                         /* IF DA_DUMPFILE ELSE                */

      699     4993    1           IF NPGS=0 THEN CALL SETERR(%E$DA_NO_PAGES);

   4993  4 001027   200023 235100                    LDA     NPGS,,AUTO
         4 001030   001035 601000 4                  TNZ     s:5002

   4993  4 001031   000012 236000 5                  LDQ     10
         4 001032   200025 756100                    STQ     NPGS+2,,AUTO
         4 001033   001153 701000 4                  TSX1    SETERR
         4 001034   000000 011000                    NOP     0

      700     4994        /*E*    ERROR:   DAM-E$DA_NO_PAGES
      701     4995                MESSAGE: None of the requested pages were successfully mapped
      702     4996                MESSAGE1: If looking at a dumfile, none of the requested pages
      703     4997                          were dumped.  If looking at the running system, M$CVM
      704     4998                          altreturned for every page reqested or there were no
      705     4999                          allocated virtual pages.
      706     5000                                                                           */
      707     5001        %EJECT;
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:113  
      708     5002    2           DO NEVER;

   5002  4 001035   001042 710000 4                  TRA     ALT

      709     5003    2   PMMEALT:   ERRCD=B$TCB$->B$TCB.ALT$->B$ALT.ERR;

   5003  4 001036   000000 470400 xsym  PMMEALT      LDP0    B$TCB$
         4 001037   000000 471500                    LDP1    0,,PR0
         4 001040   100102 236100                    LDQ     66,,PR1
         4 001041   200015 756100                    STQ     ERRCD,,AUTO

      710     5004    2              END;

      711     5005    1   ALT:    IF ERRCD='0'B THEN RETURN;

   5005  4 001042   200015 235100       ALT          LDA     ERRCD,,AUTO
         4 001043   001045 601000 4                  TNZ     s:5007

   5005  4 001044   000000 702200 xent               TSX2  ! X66_ARET

      712     5006    2           ELSE DO;

      713     5007    2              DA_MAPERR=ERRCD;

   5007  4 001045   200015 236100                    LDQ     ERRCD,,AUTO
         4 001046   000000 756000 xsym               STQ     DA_MAPERR

      714     5008    2              ALTRETURN;

   5008  4 001047   000000 702200 xent               TSX2  ! X66_AALT

      715     5009    2              END;
      716     5010        %EJECT;
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:114  
      717     5011    1   DAM$CVM: ENTRY(VP,WP) ALTRET;

   5011  4 001050   000000 700200 xent  DAM$CVM      TSX0  ! X66_AUTO_5
         4 001051   000036 000005                    ZERO    30,5

      718     5012    1           CALL CVM(WP+DA_WINDOWBASE,VP) ALTRET(CVMALT);

   5012  4 001052   200004 470500                    LDP0    @WP,,AUTO
         4 001053   000000 236100                    LDQ     0,,PR0
         4 001054   000000 036000 xsym               ADLQ    DA_WINDOWBASE
         4 001055   200035 756100                    STQ     REAL+6,,AUTO
         4 001056   200003 236100                    LDQ     @VP,,AUTO
         4 001057   200026 756100                    STQ     @CODE+1,,AUTO
         4 001060   200035 631500                    EPPR1   REAL+6,,AUTO
         4 001061   200025 451500                    STP1    NPGS+2,,AUTO
         4 001062   001066 701000 4                  TSX1    CVM
         4 001063   001065 702000 4                  TSX2    CVMALT

      719     5013    1           RETURN;

   5013  4 001064   000000 702200 xent               TSX2  ! X66_ARET

      720     5014    1   CVMALT: ALTRETURN;

   5014  4 001065   000000 702200 xent  CVMALT       TSX2  ! X66_AALT

      721     5015        /**/
      722     5016        /**/
      723     5017        /**/
      724     5018    1   CVM:    PROC(WNDW,PHYS) ALTRET;

   5018  4 001066   200024 741300       CVM          STX1  ! NPGS+1,,AUTO

      725     5019    2   DCL WNDW SBIN;
      726     5020    2   DCL PHYS SBIN;
      727     5021    2   DCL REAL SBIN;
      728     5022    2   DCL DAM$PHYS_TO_REAL ENTRY(2);
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:115  
      729     5023    2           IF (DA_CPU = %DPS90XA OR DA_CPU = %DPS90) AND PHYS>=0 THEN

   5023  4 001067   000000 235000 xsym               LDA     DA_CPU
         4 001070   000005 115007                    CMPA    5,DL
         4 001071   001074 600000 4                  TZE     s:5023+5
         4 001072   000004 115007                    CMPA    4,DL
         4 001073   001110 601000 4                  TNZ     s:5026
         4 001074   200026 470500                    LDP0    @PHYS,,AUTO
         4 001075   000000 235100                    LDA     0,,PR0
         4 001076   001110 604000 4                  TMI     s:5026

      730     5024    2              CALL DAM$PHYS_TO_REAL (REAL,PHYS);

   5024  4 001077   200026 236100                    LDQ     @PHYS,,AUTO
         4 001100   200031 756100                    STQ     REAL+2,,AUTO
         4 001101   200027 631500                    EPPR1   REAL,,AUTO
         4 001102   200030 451500                    STP1    REAL+1,,AUTO
         4 001103   200030 630500                    EPPR0   REAL+1,,AUTO
         4 001104   000020 631400 xsym               EPPR1   B_VECTNIL+16
         4 001105   000000 701000 xent               TSX1    DAM$PHYS_TO_REAL
         4 001106   000000 011000                    NOP     0
         4 001107   001113 710000 4                  TRA     s:5027

      731     5025    2           ELSE
      732     5026    2              REAL=PHYS;

   5026  4 001110   200026 470500                    LDP0    @PHYS,,AUTO
         4 001111   000000 235100                    LDA     0,,PR0
         4 001112   200027 755100                    STA     REAL,,AUTO

      733     5027    3           IF DA_WINDOW.PRESENCE(WNDW) OR PHYS>=0 THEN DO;

   5027  4 001113   200025 470500                    LDP0    @WNDW,,AUTO
         4 001114   000000 720100                    LXL0    0,,PR0
         4 001115   000000 234010 xsym               SZN     DA_WINDOW,X0
         4 001116   001122 604000 4                  TMI     s:5028
         4 001117   200026 471500                    LDP1    @PHYS,,AUTO
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:116  
         4 001120   100000 235100                    LDA     0,,PR1
         4 001121   001132 604000 4                  TMI     s:5032

      734     5028    3              FPT_CVM.V.PPNO#=REAL;

   5028  4 001122   200027 235100                    LDA     REAL,,AUTO
         4 001123   000023 755000 1                  STA     FPT_CVM+3

      735     5029    3              FPT_CVM.V.VPNO#=WNDW;

   5029  4 001124   000000 720100                    LXL0    0,,PR0
         4 001125   000024 440000 1                  SXL0    FPT_CVM+4

      736     5030    3              CALL M$CVM(FPT_CVM) ALTRET(ALT);

   5030  4 001126   000020 630400 1                  EPPR0   FPT_CVM
         4 001127   430011 713400                    CLIMB   alt,+12297
         4 001130   400000 401760                    pmme    nvectors=1
         4 001131   001151 702000 4                  TSX2    ALT

      737     5031    3              END;

      738     5032    2           IF PHYS<0 THEN DA_WINDOW.PRESENCE(WNDW)='0'B;

   5032  4 001132   200026 470500                    LDP0    @PHYS,,AUTO
         4 001133   000000 235100                    LDA     0,,PR0
         4 001134   001142 605000 4                  TPL     s:5034

   5032  4 001135   200025 471500                    LDP1    @WNDW,,AUTO
         4 001136   100000 720100                    LXL0    0,,PR1
         4 001137   000031 236000 xsym               LDQ     B_VECTNIL+25
         4 001140   000000 356010 xsym               ANSQ    DA_WINDOW,X0
         4 001141   001147 710000 4                  TRA     s:5037

      739     5033    3           ELSE DO;

      740     5034    3              DA_WINDOW.PRESENCE(WNDW)='1'B;
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:117  

   5034  4 001142   200025 471500                    LDP1    @WNDW,,AUTO
         4 001143   100000 720100                    LXL0    0,,PR1
         4 001144   400000 236003                    LDQ     -131072,DU
         4 001145   000000 256010 xsym               ORSQ    DA_WINDOW,X0

      741     5035    3              NPGS=NPGS+1;

   5035  4 001146   200023 054100                    AOS     NPGS,,AUTO

      742     5036    3              END;

      743     5037    2           RETURN;

   5037  4 001147   200024 221300                    LDX1  ! NPGS+1,,AUTO
         4 001150   000001 702211                    TSX2  ! 1,X1

      744     5038    2   ALT:    ALTRETURN;

   5038  4 001151   200024 221300       ALT          LDX1  ! NPGS+1,,AUTO
         4 001152   000000 702211                    TSX2  ! 0,X1

      745     5039    2   END CVM;
      746     5040        %EJECT;
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:118  
      747     5041    1   SETERR: PROC(CODE) ALTRET;

   5041  4 001153   200024 741300       SETERR       STX1  ! NPGS+1,,AUTO

      748     5042    2   DCL CODE SBIN;
      749     5043    2           ERRCD='040115000000'O;

   5043  4 001154   000003 236000 3                  LDQ     3
         4 001155   200015 756100                    STQ     ERRCD,,AUTO

      750     5044    2           ERRCD.CODE=CODE;

   5044  4 001156   200025 470500                    LDP0    @CODE,,AUTO
         4 001157   000000 236100                    LDQ     0,,PR0
         4 001160   000003 736000                    QLS     3
         4 001161   200015 676100                    ERQ     ERRCD,,AUTO
         4 001162   377770 376007                    ANQ     131064,DL
         4 001163   200015 656100                    ERSQ    ERRCD,,AUTO

      751     5045    2           ALTRETURN;

   5045  4 001164   000000 702211                    TSX2  ! 0,X1
      752     5046    2   END SETERR;
      753     5047    1   END DAM$VPAGE;
      754     5048        %EOD;

PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:119  
--  Include file information  --

   SS_SCHED_C.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   B_MLSMAC_C.:E05TOU  is referenced.
   B_ULSMAC_C.:E05TOU  is referenced.
   B_LSDATA_C.:E05TOU  cannot be made into a system file and is referenced.
   M_INFO_C.:E05TOU  is referenced.
   DA_PERR_C.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   IR_DATA_M.:E05TOU  is referenced.
   B$MAP.:E05TOU  cannot be made into a system file and is referenced.
   B$USER.:E05TOU  cannot be made into a system file and is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   DA_MAP_R.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure DAM$VPAGE.
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:120  

 **** Variables and constants ****

  ****  Section 001  Data  DAM$VPAGE

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/d STRC(72)    r     1 DFKEY                     20-0-0/d STRC(216)   r     1 FPT_CVM
    32-0-0/d STRC(144)   r     1 FPT_FVP                   26-0-0/d STRC(144)   r     1 FPT_GVP
     2-0-0/d STRC(504)   r     1 FPT_RDDUMP

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    25-0-0/w PTR         r     1 @CODE                      7-0-0/w PTR         r     1 @N
    26-0-0/w PTR         r     1 @PHYS                      5-0-0/w PTR         r     1 @SYSID
     3-0-0/w PTR         r     1 @VP                       25-0-0/w PTR         r     1 @WNDW
     4-0-0/w PTR         r     1 @WP                        6-0-0/w PTR         r     1 @WSQ
    *0-0-0/w SBIN        r     1 CODE                      15-0-0/w STRC        r     1 ERRCD
    16-0-0/w SBIN        r     1 I                         *0-0-0/w SBIN        r     1 N
    14-0-0/w SBIN        r     1 N#                        23-0-0/w SBIN        r     1 NPGS
    *0-0-0/w SBIN        r     1 PHYS                      22-0-0/w PTR         r     1 PT$
    17-0-0/w SBIN        r     1 PTP                       20-0-0/w SBIN        r     1 PTSZ
    27-0-0/w SBIN        r     1 REAL                      21-0-0/w SBIN        r     1 RPN
    *0-0-0/w SBIN        r     1 SYSID                     12-0-0/w SBIN        r     1 U#
    *0-0-0/w SBIN        r     1 VP                        10-0-0/w SBIN        r     1 VP#
    13-0-0/w SBIN        r     1 W#                        *0-0-0/w SBIN        r     1 WNDW
    *0-0-0/w SBIN        r     1 WP                        11-0-0/w SBIN        r     1 WP#
    *0-0-0/w SBIN        r     1 WSQ

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:121  
     0-0-0/w PTR         r     1 B$IS$                      0-0-0/w PTR         r     1 B$TCB$
     0-0-0/w PTR         r     1 B$USRT$                    0-0-0/w SBIN        r     1 DA_CPU
     0-0-0/w SBIN        r     1 DA_CPU#                    0-0-0/w BIT         r     1 DA_DUMPFILE
     0-0-0/w STRC        r     1 DA_MAPERR                  0-0-0/w SBIN        r     1 DA_MONPTP
     0-0-0/w SBIN        r     1 DA_MSCPG1                  0-0-0/w SBIN        r     1 DA_MUAIS
     0-0-0/w SBIN        r     1 DA_NODEIDX                 0-0-0/w PTR         r     1 DA_RVBUF$
     0-0-0/w PTR         r     1 DA_USERDIR$
     0-0-0/b STRC        r     1 DA_WINDOW(0:255)
     0-0-0/w SBIN        r     1 DA_WINDOWBASE              0-0-0/w SBIN        r     1 DA_WINDOWMAX
     0-0-0/w PTR         r     1 DA_WSPTD$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2448)  r     1 B$ALT                      0-0-0/w STRC        r     1 B$MAP(0:1023)
     0-0-0/w STRC(144)   r     1 B$TCB                      0-0-0/w STRC(576)   r     1 B$USER(0:0)
     0-0-0N  NULL        r     1 M$DUMPFILE                 0-0-0/c CHAR(4096)  r     1 PAGE(0:0)
     0-0-0/d STRC(36864) r     1 RVBUF
     0-0-0/w STRC        r     1 S$WSPTD(0:0)
     0-0-0/d STRC(36864) r     1 USERDIR


   Procedure DAM$VPAGE requires 629 words for executable code.
   Procedure DAM$VPAGE requires 30 words of local(AUTO) storage.
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:122  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:123  
          MINI XREF LISTING

ALT
      5005**LABEL    4829--CALLALT  4834--CALLALT  4845--CALLALT  4915--CALLALT
ALT IN PROCEDURE CVM
      5038**LABEL    5030--CALLALT
B$ALT.CODE
      4813**DCL      4813--REDEF    4814--REDEF    4814--REDEF
B$ALT.ERR
      4814**DCL      5003>>ASSIGN
B$ALT.ERR.ERR#
      4815**DCL      4815--REDEF
B$ALT.EVID
      4814**DCL      4814--REDEF    4814--REDEF
B$DO.ECCINFO
       300**DCL       301--REDEF
B$IS$
      4793**DCL      4799--IMP-PTR  4889>>ASSIGN   4927>>ASSIGN   4969>>ASSIGN
B$MAP.CTRL
       415**DCL      4979>>IF
B$MAP.RPN
       411**DCL      4981>>ASSIGN
B$MAP.SCTRL
       412**DCL       413--REDEF
B$TCB.ALT$
      4809**DCL      5003>>ASSIGN
B$TCB$
      4807**DCL      5003>>ASSIGN
B$U.MISC
       279**DCL       280--REDEF
B$USER.MISC
       355**DCL       356--REDEF
B$USER.PT
       349**DCL      4962>>ASSIGN
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:124  
B$USER.SYSID
       350**DCL      4827>>IF
B$USER.US
       342**DCL      4833>>IF
B$USRT$
       367**DCL      4827>>IF       4833>>IF       4962>>ASSIGN
CODE IN PROCEDURE SETERR
      5042**DCL      5041--PROC     5044>>ASSIGN
CVM
      5018**PROC     4967--CALL     4985--CALL     5012--CALL
CVMALT
      5014**LABEL    5012--CALLALT
DAM$PHYS_TO_REAL IN PROCEDURE CVM
      5022**DCL-ENT  5024--CALL
DA_CPU
        52**DCL      4952>>IF       4952>>IF       4964>>IF       4964>>IF       4975>>IF       4975>>IF
      5023>>IF       5023>>IF
DA_CPU#
        54**DCL      4879>>IF       4881>>ASSIGN
DA_DUMPFILE
        53**DCL      4851>>IF
DA_MAPERR
        62**DCL      5007<<ASSIGN
DA_MAPSEG.P
        63**DCL        64--REDEF
DA_MONPTP
        55**DCL      4955>>ASSIGN
DA_MSCPG1
        56**DCL      4967>>CALL     4969>>ASSIGN
DA_MUAIS
        52**DCL      4826>>DOINDEX  4833>>IF
DA_NODEIDX
        54**DCL      4853>>ASSIGN
DA_RVBUF$
        55**DCL       876--IMP-PTR  4879>>IF
DA_SDASN.DESC.TYPE0
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:125  
        48**DCL        48--REDEF
DA_TIGRSEG.P
        64**DCL        65--REDEF
DA_USERDIR$
        56**DCL       912--IMP-PTR  4883>>IF       4900>>ASSIGN
DA_WINDOW
        47**DCL      4858<<ASSIGN   4942<<ASSIGN
DA_WINDOW.PRESENCE
        47**DCL      4855>>IF       4860<<ASSIGN   5027>>IF       5032<<ASSIGN   5034<<ASSIGN
DA_WINDOW.USR
        47**DCL      4897<<ASSIGN   4923>>IF       4931<<ASSIGN   4972>>IF       4988<<ASSIGN
DA_WINDOW.VP
        47**DCL      4895<<ASSIGN   4923>>IF       4929<<ASSIGN   4972>>IF       4986<<ASSIGN
DA_WINDOW.WSQ
        47**DCL      4896<<ASSIGN   4923>>IF       4930<<ASSIGN   4972>>IF       4987<<ASSIGN
DA_WINDOWBASE
        52**DCL      4841>>ASSIGN   5012>>CALL
DA_WINDOWMAX
        52**DCL      4844>>IF
DA_WSPTD$
        55**DCL      4800--IMP-PTR  4956>>ASSIGN   4959>>ASSIGN   4960>>ASSIGN
DFKEY
      4701**DCL      4726--DCLINIT  4727--DCLINIT  4852<<ASSIGN
DFKEY.K.NODEIDX
      4705**DCL      4853<<ASSIGN
DFKEY.K.STYP
      4705**DCL      4870<<ASSIGN   4879<<ASSIGN   4880<<ASSIGN   4885<<ASSIGN   4900<<ASSIGN   4908<<ASSIGN
DFKEY.K.TYP
      4705**DCL      4869<<ASSIGN   4878<<ASSIGN   4884<<ASSIGN   4899<<ASSIGN   4906<<ASSIGN   4907<<ASSIGN
DFKEY.K.USR#
      4705**DCL      4871<<ASSIGN   4881<<ASSIGN   4886<<ASSIGN   4901<<ASSIGN   4910<<ASSIGN   4913<<ASSIGN
DFKEY.K.VP#
      4706**DCL      4887<<ASSIGN   4926<<ASSIGN
ERRCD
        24**DCL      4822<<ASSIGN   5003<<ASSIGN   5005>>IF       5007>>ASSIGN   5043<<ASSIGN
ERRCD.CODE
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:126  
        27**DCL      5044<<ASSIGN
FPT_CVM
      4760**DCL      5030<>CALL
FPT_CVM.V
      4760**DCL      4760--DCLINIT
FPT_CVM.V.PPNO#
      4761**DCL      5028<<ASSIGN
FPT_CVM.V.VPNO#
      4762**DCL      5029<<ASSIGN
FPT_FVP
      4790**DCL      4943<>CALL
FPT_FVP.V
      4790**DCL      4790--DCLINIT
FPT_FVP.V.PNO#
      4791**DCL      4941<<ASSIGN
FPT_GVP
      4776**DCL      4859<>CALL
FPT_GVP.V
      4776**DCL      4776--DCLINIT
FPT_GVP.V.PNO#
      4777**DCL      4856<<ASSIGN
FPT_RDDUMP
      4726**DCL      4891<>CALL     4928<>CALL
FPT_RDDUMP.BUF_
      4728**DCL      4927<<ASSIGN
FPT_RDDUMP.BUF_.BOUND
      4728**DCL      4890<<ASSIGN
FPT_RDDUMP.BUF_.BUF$
      4729**DCL      4889<<ASSIGN
FPT_RDDUMP.STATION_
      4729**DCL      4730--REDEF
FPT_RDDUMP.V
      4730**DCL      4726--DCLINIT
FPT_RDDUMP.V.DVBYTE.REREAD#
      4741**DCL      4741--REDEF
FPT_RDDUMP.V.INDX#
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:127  
      4739**DCL      4739--REDEF
I
        29**DCL      4854<<DOINDEX  4855>>IF       4856>>ASSIGN   4858>>ASSIGN   4860>>ASSIGN   4888<<ASSIGN
      4922<<DOINDEX  4923>>IF       4923>>IF       4923>>IF       4923>>IF       4926>>ASSIGN   4927>>ASSIGN
      4929>>ASSIGN   4929>>ASSIGN   4930>>ASSIGN   4931>>ASSIGN   4941>>ASSIGN   4942>>ASSIGN   4966<<DOINDEX
      4967>>CALL     4967>>CALL     4971<<DOINDEX  4972>>IF       4972>>IF       4972>>IF       4972>>IF
      4976>>ASSIGN   4979>>IF       4981>>ASSIGN   4985>>CALL     4986>>ASSIGN   4986>>ASSIGN   4987>>ASSIGN
      4988>>ASSIGN
L1
      4942**LABEL    4943--CALLALT
M$CVM
       115**DCL-ENT  5030--CALL
M$FVP
       114**DCL-ENT  4943--CALL
M$GVP
       113**DCL-ENT  4859--CALL
M$READ
        78**DCL-ENT  4891--CALL     4928--CALL
N
        12**DCL         6--PROC     4842--IF       4843>>ASSIGN
N#
        20**DCL      4842<<ASSIGN   4843<<ASSIGN   4844>>IF       4854>>DOINDEX  4893<<ASSIGN   4893>>ASSIGN
      4922>>DOINDEX  4971>>DOINDEX
NO_DUMP_PAGE
      4929**LABEL    4891--CALLALT  4928--CALLALT
NPGS
        34**DCL      4866<<ASSIGN   4894<<ASSIGN   4894>>ASSIGN   4933<<ASSIGN   4933>>ASSIGN   4950<<ASSIGN
      4990<<ASSIGN   4990>>ASSIGN   4993>>IF       5035<<ASSIGN   5035>>ASSIGN
PAGE
      4799**DCL      4927--ASSIGN
PHYS IN PROCEDURE CVM
      5020**DCL      5018--PROC     5023>>IF       5024<>CALL     5026>>ASSIGN   5027>>IF       5032>>IF
PMMEALT
      5003**LABEL    4861--GOTO     4967--CALLALT
PT$
        33**DCL      4969<<ASSIGN   4979>>IF       4981>>ASSIGN
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:128  
PTP
        30**DCL      4955<<ASSIGN   4959<<ASSIGN   4962<<ASSIGN   4963>>ASSIGN   4964<<ASSIGN   4964>>ASSIGN
      4967>>CALL
PTSZ
        31**DCL      4951<<ASSIGN   4956<<ASSIGN   4960<<ASSIGN   4965<<ASSIGN   4966>>DOINDEX
REAL IN PROCEDURE CVM
      5021**DCL      5024<>CALL     5026<<ASSIGN   5028>>ASSIGN
RPN
        32**DCL      4963<<ASSIGN   4964<<ASSIGN   4969>>ASSIGN   4976<<ASSIGN   4981<<ASSIGN   4983<<ASSIGN
      4985<>CALL
RVBUF.S_PNO
       887**DCL      4879>>IF
S$WSPTD.BLKNO
      4801**DCL      4959>>ASSIGN
S$WSPTD.NBLKS
      4806**DCL      4956>>ASSIGN   4960>>ASSIGN
SETERR
      5041**PROC     4829--CALL     4834--CALL     4845--CALL     4915--CALL     4993--CALL
SYSID
        10**DCL         6--PROC     4823--IF       4824>>IF       4824>>ASSIGN   4827>>IF
U#
        18**DCL      4823<<ASSIGN   4824<<ASSIGN   4826<<DOINDEX  4827>>IF       4832>>IF       4833>>IF
      4833>>IF       4836>>IF       4839<<ASSIGN   4883>>IF       4886>>ASSIGN   4897>>ASSIGN   4900>>ASSIGN
      4901>>ASSIGN   4923>>IF       4931>>ASSIGN   4953>>IF       4962>>ASSIGN   4972>>IF       4988>>ASSIGN
USERDIR.USER.DA
       912**DCL      4883>>IF
USERDIR.USER.TYP
       913**DCL      4900>>ASSIGN
USRFOUND
      4828**LABEL    4827--GOTO
VP
         8**DCL         6--PROC     4840>>ASSIGN   5011--ENTRY    5012<>CALL
VP#
        16**DCL      4840<<ASSIGN   4873>>IF       4873>>IF       4874<<ASSIGN   4874>>ASSIGN   4883>>IF
      4892<<ASSIGN   4892>>ASSIGN   4909>>IF       4911<<ASSIGN   4923>>IF       4926>>ASSIGN   4929>>ASSIGN
      4972>>IF       4976>>ASSIGN   4979>>IF       4981>>ASSIGN   4986>>ASSIGN
PL6.E3A0      #002=DAM$VPAGE File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:51 Page:129  
W#
        19**DCL      4836<<ASSIGN   4837<<ASSIGN   4838<<ASSIGN   4839>>IF       4867>>DOCASE   4875<<ASSIGN
      4906>>IF       4908>>ASSIGN   4923>>IF       4930>>ASSIGN   4952>>IF       4954>>IF       4959>>ASSIGN
      4960>>ASSIGN   4965>>IF       4972>>IF       4975>>IF       4987>>ASSIGN
WNDW IN PROCEDURE CVM
      5019**DCL      5018--PROC     5027>>IF       5029>>ASSIGN   5032>>ASSIGN   5034>>ASSIGN
WP
         9**DCL         6--PROC     4841>>ASSIGN   5011--ENTRY    5012>>CALL
WP#
        17**DCL      4841<<ASSIGN   4844>>IF       4855>>IF       4856>>ASSIGN   4858>>ASSIGN   4860>>ASSIGN
      4889>>ASSIGN   4895>>ASSIGN   4896>>ASSIGN   4897>>ASSIGN   4923>>IF       4923>>IF       4923>>IF
      4927>>ASSIGN   4929>>ASSIGN   4930>>ASSIGN   4931>>ASSIGN   4941>>ASSIGN   4942>>ASSIGN   4972>>IF
      4972>>IF       4972>>IF       4985>>CALL     4986>>ASSIGN   4987>>ASSIGN   4988>>ASSIGN
WSQ
        11**DCL         6--PROC     4835--IF       4838>>ASSIGN
WSQCASE
      4867**LABEL    4876--GOTO

PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:130  
      755        1        /*T***********************************************************/
      756        2        /*T*                                                         */
      757        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      758        4        /*T*                                                         */
      759        5        /*T***********************************************************/
      760        6        DAM$DUMPFILE: PROC(FID) ALTRET;
      761        7        /**/
      762        8        /* PARAMETERS */
      763        9        /**/
      764       10    1   DCL 1 FID,
      765       11    1         2 L UBIN BYTE UNAL,
      766       12    1         2 C CHAR(FID.L);
      767       13        /**/
      768       14        /* EXTERNAL PROCEDURES */
      769       15        /**/
      770       16    1   DCL DAM$VPAGE ENTRY(5) ALTRET;
      771       17    1   DCL DAM$USECPU ENTRY(1) ALTRET;
      772       18    1   DCL DAA$ERRMSG ENTRY(1) OPTIONAL;
      773       19    1   DCL DA_MAP_D ENTRY CONV(5);
      774       20        /* AUTO DATA */
      775       21        /**/
      776       22    1   DCL I SBIN;
      777       23    1   DCL J SBIN;
      778       24    1   DCL DS$ PTR;
      779       25    1   DCL LS$ PTR;
      780       26    1   DCL TIGRPGS SBIN;
      781       27    1   DCL SEGSIZE SBIN;
      782       28    1   DCL WINDOWMAX SBIN;
      783       29        /**/
      784       30        /* INCLUDE FILES */
      785       31        /**/
      786       32        %INCLUDE DA_MAP_R;
      787       62        %INCLUDE DA_ANLZ_R;
      788       75        %INCLUDE DA_PERR_C;
      789      139        %INCLUDE DA_TEXTC_C;
      790      170        %INCLUDE CP_6;
      791      251        %INCLUDE M_INFO_C;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:131  
      792      391        %INCLUDE B_LSDATA_C;
      793     3597        %INCLUDE B_STRINGS_C;
      794     3726        %INCLUDE B_SEGIDS_C;
      795     4265        %INCLUDE B_ERRORS_C;
      796     5392        %INCLUDE NI$TABLES;
      797     5608        %INCLUDE CP_6_SUBS;
      798     6148        %INCLUDE IR_DATA_M;
      799     6312        %RV_DFSUBS;
      800     6339        %INCLUDE B$USER;
      801     6555        %B$USERREFS;
      802     6559        %INCLUDE B$JIT;
      803     6849        %INCLUDE B$SS;
      804     7028        /**/
      805     7029        /* STATIC AND BASED DATA */
      806     7030        /**/
      807     7031    1   DCL M$DUMPFILE DCB;
      808     7032        %FPT_OPEN (DCB=M$DUMPFILE,
      809     7033                   FUN=IN,
      810     7034                   NAME=VLP_NAME,
      811     7035                   ACCT=VLP_ACCT,
      812     7036                   SN=VLP_SN,
      813     7037                   PASS=VLP_PASS,
      814     7038                   WSN=VLP_WSN);
      815     7147        %VLP_NAME;
      816     7174        %VLP_ACCT;
      817     7187        %VLP_SN;
      818     7200        %VLP_ACCT (FPTN=VLP_PASS);
      819     7213        %VLP_ACCT (FPTN=VLP_WSN);
      820     7226        %FPT_CLOSE (DCB=M$DUMPFILE,DISP=SAVE);
      821     7268        %FPT_FID (ACCT=VLP_ACCT,
      822     7269                  ASN="FPT_OPEN.V.ASN#",
      823     7270                  NAME=VLP_NAME,
      824     7271                  PASS=VLP_PASS,
      825     7272                  RES="FPT_OPEN.V.RES#",
      826     7273                  SN=VLP_SN,
      827     7274                  WSN=VLP_WSN);
      828     7297        %F$DCB;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:132  
      829     7354        %B$TCB;
      830     7357        %B$ALT;
      831     7365        %FPT_CVM (PPNO=-1);
      832     7381    1   DCL B$IS$ PTR SYMREF;
      833     7382    1   DCL DESC(0:0) BIT(72) ALIGNED BASED;
      834     7383        %RV_DFKEY (NAME=DFKEY,STCLASS=STATIC);
      835     7401        %FPT_READ (DCB=M$DUMPFILE,
      836     7402                   KEY=DFKEY,
      837     7403                   KEYS=YES);
      838     7442        %FPT_GDS (FPTN=FPT_GDS_MAP,RESULTS=DA_MAPSEG);
      839     7458        %FPT_GDS (FPTN=FPT_GDS_TIGR,RESULTS=DA_TIGRSEG);
      840     7474        %FPT_FVP;
      841     7488        %FPT_STD;
      842     7503        %FPT_SAD;
      843     7518        %FPT_WAIT (FPTN=WAIT4DUMP, UNITS=30);
      844     7532        %FPT_MONINFO (MONINFO=MNINFO,
      845     7533                      SITEINFO=VLR_SITEINFO,
      846     7534                      MONPTRS=MNPTRS);
      847     7549        %VLR_MONINFO (FPTN=MNINFO);
      848     7567        %VLR_MONPTRS (FPTN=MNPTRS);
      849     7582        %VLR_SITEINFO;
      850     7601        %FPT_GDDL (RESULTS=VLR_GDDL);
      851     7614        %VLP_GDDL (FPTN=VLR_GDDL);
      852     7628        %RV_NODEDIR (FPTN=NODEDIR,N=10,STCLASS="BASED(DA_NODEDIR$)");
      853     7645    1   DCL HOSTNODE UBIN STATIC;
      854     7646        %RV_BUFF (NAME=RVBUFF,STCLASS="BASED(DA_RVBUF$)");
      855     7682    1   DCL 1 P BASED ALIGNED,
      856     7683    1         2 PA UBIN(8) UNAL,
      857     7684    1         2 WA UBIN(10) UNAL,
      858     7685    1         2 CA UBIN(2) UNAL,
      859     7686    1         2 BA UBIN(4) UNAL,
      860     7687    1         2 SID,
      861     7688    1           3 S UBIN(2) UNAL,
      862     7689    1           3 D UBIN(10) UNAL;
      863     7690    1   DCL PAGE CHAR(4096) BASED;
      864     7691    1   DCL B$JIT$ PTR SYMREF;
      865     7692    1   DCL B$TCB$ PTR SYMREF;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:133  
      866     7693    1   DCL 1 S$WSPTD(0:0) ALIGNED BASED(DA_WSPTD$),
      867     7694    1         2 BLKNO UBIN(18) UNAL,
      868     7695    1         2 * BIT(2),
      869     7696    1         2 P BIT(1),
      870     7697    1         2 T BIT(1),
      871     7698    1         2 * BIT(6),
      872     7699    1         2 NBLKS UBIN(8) UNAL;
      873     7700        %SUB FOREVER="WHILE('1'B)";
      874     7701        %SUB NEVER="WHILE('0'B)";
      875     7702        %EQU MINPGS=20;          /* SAVE AT LEAST THIS MANY PAGES FOR DYNAMIC DATA */
      876     7703        %EJECT;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:134  
      877     7704        %EJECT;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:135  
      878     7705    2           IF ADDR(FID)~=ADDR(NIL) THEN DO;
      879     7706    3              IF FID.L=0 OR FID.L=511 OR FID.L=510 THEN DO;
      880     7707    3                 FPT_OPEN.NAME_=VECTOR(NIL);
      881     7708    3                 FPT_OPEN.ACCT_=VECTOR(NIL);
      882     7709    3                 FPT_OPEN.SN_=VECTOR(NIL);
      883     7710    3                 FPT_OPEN.V.OPER.NXTF#='1'B;
      884     7711    3                 FPT_OPEN.V.OPER.THISF#='0'B;
      885     7712    3                 IF FID.L=511 THEN
      886     7713    3                    FPT_OPEN.V.SRCHCOND.REV#='1'B;
      887     7714    3                 ELSE
      888     7715    3                    IF FID.L=0 THEN
      889     7716    3                       FPT_OPEN.V.SRCHCOND.REV#='0'B;
      890     7717    4                    ELSE DO;
      891     7718    4                       FPT_OPEN.V.OPER.NXTF# = '0'B;
      892     7719    4                       FPT_OPEN.V.OPER.THISF# = '1'B;
      893     7720    4                       END;
      894     7721    3                 END;
      895     7722    3              ELSE DO;
      896     7723    3                 FPT_OPEN.NAME_=VECTOR(VLP_NAME);
      897     7724    3                 FPT_OPEN.ACCT_=VECTOR(VLP_ACCT);
      898     7725    3                 FPT_OPEN.SN_=VECTOR(VLP_SN);
      899     7726    3                 FPT_OPEN.V.OPER.NXTF#='0'B;
      900     7727    3                 FPT_OPEN.V.OPER.THISF#='1'B;
      901     7728    3                 FPT_OPEN.V.SRCHCOND.REV#='0'B;
      902     7729    3                 FPT_FID.TEXTFID_=VECTOR(FID.C);
      903     7730    3                 CALL M$FID(FPT_FID) ALTRET(PMMEALT);
      904     7731    3                 END;
      905     7732    2              END;
      906     7733    1           IF FPT_OPEN.V.ASN#~=%TAPE# AND FPT_OPEN.V.ASN#~=%FILE# THEN
      907     7734    1              CALL SETERR(%E$DA_BAD_DUMP_FID) ALTRET(ALT);
      908     7735        /*E*    ERROR:   DAM-E$DA_BAD_DUMP_FID
      909     7736                MESSAGE: Dump files must be keyed files residing on either disk
      910     7737                         or labeled tape.
      911     7738                                                                           */
      912     7739    1           DA_INITIALIZED='0'B;
      913     7740    1           IF DCBADDR(DCBNUM(M$DUMPFILE))->F$DCB.FCD# THEN
      914     7741    1              CALL M$CLOSE(FPT_CLOSE) ALTRET(PMMEALT);
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:136  
      915     7742    2   OPEN2:  CALL M$OPEN(FPT_OPEN) WHENALTRETURN DO;
      916     7743    3              IF B$TCB$->B$TCB.ALT$->B$ALT.ERR.ERR# = %E$FILEBUSY THEN DO;
      917     7744    3                 REMEMBER RENVALT IN DA_TRTN;
      918     7745    3                 CALL M$SENV;
      919     7746    3                 CALL SETERR (%E$DA_DUMPBUSY);
      920     7747        /*E* ERROR: DAM-E$DA_DUMPBUSY
      921     7748          MESSAGE: Dump file busy, waiting...
      922     7749        */
      923     7750    3                 IF ENTADDR(DAA$ERRMSG) ~= ENTADDR(NIL) THEN
      924     7751    3                    CALL DAA$ERRMSG;
      925     7752    3                 CALL M$WAIT (WAIT4DUMP);
      926     7753    3                 CALL M$RENV;
      927     7754    3                 CALL M$RETRY;
      928     7755    3   RENVALT:      CALL M$RENV;
      929     7756    3                 ALTRETURN;
      930     7757    3                 END;
      931     7758    2              IF B$TCB$->B$TCB.ALT$->B$ALT.ERR.ERR# ~= %E$NOFILE OR NOT DA_SYSTAC2 THEN
              7758                       GOTO PMMEALT;
      932     7759    3              IF SUBSTR(VLP_ACCT.ACCT#,7,1)='2' THEN DO;
      933     7760    3                 SUBSTR(VLP_ACCT.ACCT#,7,1)=' ';
      934     7761    3                 DA_SYSTAC2 = '0'B;
      935     7762    2                 END; ELSE SUBSTR(VLP_ACCT.ACCT#,7,1)='2';
      936     7763    2              GOTO OPEN2;
      937     7764    2              END;
      938     7765    2           DO I=0 TO 7;
      939     7766    2              DA_SDASN.DESC(I)='0'B;
      940     7767    2              DA_SDASN.CVM(I)='0'B;
      941     7768    2              DA_SDASN.SYSID(I)=0;
      942     7769    2              END;
      943     7770    2           DO I=DA_MSCPG1 TO 255;
      944     7771    3              IF DA_WINDOW(I)~='000000777000'O THEN DO;
      945     7772    4                 IF DA_DUMPFILE THEN DO;
      946     7773    4                    FPT_FVP.V.PNO#=I;
      947     7774    4                    CALL M$FVP(FPT_FVP) ALTRET(BADCVM);
      948     7775    4                    END;
      949     7776    4                 ELSE DO;
      950     7777    4                    FPT_CVM.V.VPNO#=I;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:137  
      951     7778    4                    CALL M$CVM(FPT_CVM) ALTRET(BADCVM);
      952     7779    4                    END;
      953     7780    3   BADCVM:       DA_WINDOW(I)='000000777000'O;
      954     7781    3                 END;
      955     7782    2              END;
      956     7783    1           DA_DUMPFILE='1'B;
      957     7784    2           IF DA_MAPSEG.BOUND<%(3*1024*4-1) THEN DO;
      958     7785    2              FPT_GDS_MAP.V.SEGSIZE#=(%(3*1024*4)-DA_MAPSEG.BOUND)/4;
      959     7786    2              CALL M$GDS(FPT_GDS_MAP) ALTRET(PMMEALT);
      960     7787    2              END;
      961     7788    1           DS$=DA_MAPSEG.P$;
      962     7789    1           DFKEY='007'O;
      963     7790    1           FPT_READ.BUF_=VECTOR(DS$->NODEDIR);
      964     7791    2           CALL M$READ(FPT_READ) WHENALTRETURN DO;
      965     7792    2              CALL SETERR(%E$DA_NOT_DUMPFILE);
      966     7793        /*E*       ERROR:   DAM-E$DA_NOT_DUMPFILE
      967     7794                   MESSAGE: %UF is not a dump file.  It has no node directory.
      968     7795        */
      969     7796    2              ALTRETURN;
      970     7797    2              END;
      971     7798    1           DA_NODEDIR$=DS$;
      972     7799    1           DS$=PINCRW(DS$,SIZEW(NODEDIR));
      973     7800    2   FINDHOST: DO;
      974     7801    3              DO I=1 TO NODEDIR.N;
      975     7802    4                 IF NODEDIR.NODE.NODENAME(I)='HOST' THEN DO;
      976     7803    4                    DA_NODEIDX=I;
      977     7804    4                    HOSTNODE=I;
      978     7805    4                    EXIT FINDHOST;
      979     7806    4                    END;
      980     7807    3                 END;
      981     7808    2              END;
      982     7809    2           DO WHILE(SUBSTR(NODEDIR.NODE.NODENAME(DA_NODEIDX),0,4)~='HOST'
      983     7810    2             AND DA_NODEIDX<=NODEDIR.N);
      984     7811    2              DA_NODEIDX=DA_NODEIDX+1;
      985     7812    2              END;
      986     7813    1           DFKEY.K.NODEIDX=DA_NODEIDX;
      987     7814    1           DFKEY.K.TYP=%R_DINFO#;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:138  
      988     7815    1           DFKEY.K.STYP=%R_BUFF#;
      989     7816    1           DFKEY.K.USR#=0;
      990     7817    1           DFKEY.K.VP#=0;
      991     7818    1           FPT_READ.BUF_=VECTOR(DS$->PAGE);
      992     7819    1           CALL M$READ(FPT_READ) ALTRET(PMMEALT);
      993     7820    1           DA_RVBUF$=DS$;
      994     7821    1           DS$=PINCRW(DS$,1024);
      995     7822    1           DFKEY.K.STYP=%R_USRD#;
      996     7823    1           FPT_READ.BUF_=VECTOR(DS$->PAGE);
      997     7824    1           CALL M$READ(FPT_READ) ALTRET(UDERR);
      998     7825    1           DA_USERDIR$=DS$;
      999     7826    1           DA_MUAIS=RVBUFF.B_MUAIS;
     1000     7827    2           DO NEVER;
     1001     7828    2   UDERR:     DA_USERDIR$=ADDR(NIL);
     1002     7829    2              DA_MUAIS=0;
     1003     7830    2              CALL SETERR(%E$DA_NO_USERDIR);
     1004     7831        /*E*    ERROR: DAM-E$DA_NO_USERDIR
     1005     7832                MESSAGE: No user directory in this dump file
     1006     7833                                                                           */
     1007     7834    2              END;
     1008     7835    1           CALL DAM$USECPU(RVBUFF.S_PNO);
     1009     7836    1           CALL DAM$VPAGE(%(HJIT_BASE%/4096),0,0,%MONWSQ) ALTRET(ALT);
     1010     7837    1           LS$=PINCRW(B$IS$,DA_WINDOWBASE*1024);
     1011     7838    1           DA_SDASN.DESC(%TIGR#)=LS$->DESC(%(%BITBIN(%TIGRSID)-%BITBIN(%ISSID)));
     1012     7839    1           DA_SDASN.SYSID(%TIGR#)=0;
     1013     7840    1           TIGRPGS=(DA_SDASN.DESC.BOUND(%TIGR#)/4096)+1;
     1014     7841    1           SEGSIZE=TIGRPGS*4096;
     1015     7842    2           IF SEGSIZE-1>DA_TIGRSEG.BOUND THEN DO;
     1016     7843    2              FPT_GDS_TIGR.V.SEGSIZE#=(SEGSIZE-DA_TIGRSEG.BOUND)/4;
     1017     7844    2              CALL M$GDS(FPT_GDS_TIGR) ALTRET(PMMEALT);
     1018     7845    2              END;
     1019     7846    1           FPT_READ.BUF_=VECTOR(DA_TIGRSEG.P$->PAGE);
     1020     7847    1           DFKEY.K.TYP=%R_MWSQ#;
     1021     7848    1           DFKEY.K.STYP=%R_MCPU#;
     1022     7849    1           DFKEY.K.USR#=DA_CPU#;
     1023     7850    1           DFKEY.K.VP#=DA_SDASN.DESC.BASE(%TIGR#)/4096;
     1024     7851    1           J=0;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:139  
     1025     7852    2           DO I=0 TO TIGRPGS-1;
     1026     7853    2              CALL M$READ(FPT_READ) ALTRET(NXTTIGR);
     1027     7854    2              J=J+1;
     1028     7855    2   NXTTIGR:   FPT_READ.BUF_.BUF$=PINCRW(FPT_READ.BUF_.BUF$,1024);
     1029     7856    2              DFKEY.K.VP#=DFKEY.K.VP#+1;
     1030     7857    2              END;
     1031     7858    1           DA_SDASN.SID(%TIGR#)=DA_TIGRSEG.P.SID;
     1032     7859    2           IF J=0 THEN DO;
     1033     7860    2              FPT_GDS_TIGR.V.SEGSIZE#=%(256*1024-1);
     1034     7861    2              CALL M$FDS(FPT_GDS_TIGR);
     1035     7862    2              DA_TIGRSEG='0'B;
     1036     7863    2              B$USRT$=ADDR(NIL);
     1037     7864    2              DA_MUAIS=0;
     1038     7865    2              S$CU$=ADDR(NIL);
     1039     7866    2              DA_MAPERR=B$TCB$->B$TCB.ALT$->B$ALT.ERR;
     1040     7867    2              END;
     1041     7868    2           ELSE DO;
     1042     7869    2              FPT_GDS_TIGR.V.SEGSIZE#=(DA_TIGRSEG.BOUND+1-J*4096)/4;
     1043     7870    2              CALL M$FDS(FPT_GDS_TIGR) ALTRET(PMMEALT);
     1044     7871    2              B$USRT$=RVBUFF.B$USRT$;
     1045     7872    2              ADDR(B$USRT$)->P.SID=DA_SDASN.SID(%TIGR#);
     1046     7873    2              S$CU$=ADDR(B$USRT$->B$USER(RVBUFF.CUN));
     1047     7874    2              END;
     1048     7875    1           CALL M$GDDL(FPT_GDDL);
     1049     7876    1           DA_WINDOWMAX=DA_WINDOWBASE+VLR_GDDL.AVAIL_PGS#-%MINPGS;
     1050     7877    1           WINDOWMAX=B$JIT.DDUL-B$JIT.DLL;
     1051     7878    2           IF DA_WINDOWMAX - 32 < DA_WINDOWBASE THEN DO;
     1052     7879    2              CALL SETERR(%E$DA_NEED_MORE_MEM) ALTRET(ALT);
     1053     7880    2              END;
     1054     7881        /*E*    ERROR:   DAM-E$DA_NEED_MORE_MEM
     1055     7882                MESSAGE: Insufficient memory available to look at dump file.
     1056     7883               MESSAGE1: You must increase your resource memory to look at a dump file.
     1057     7884        */
     1058     7885    1           ELSE IF DA_WINDOWMAX>WINDOWMAX THEN DA_WINDOWMAX=WINDOWMAX;
     1059     7886    1           DA_NXTWINDOW=0;
     1060     7887    1           DA_NXTSPCL=0;
     1061     7888    1           DA_NUMSPCL=7;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:140  
     1062     7889    1           DA_WSPTD$=ADDR(NIL);
     1063     7890    1           ADDR(DA_TIGR$)->P=BINBIT(BITBIN(DA_SDASN.SID(%TIGR#)),36);
     1064     7891    1           DA_PSR=ADDR(RVBUFF.SSFRAME)->B$SS.PSR;
     1065     7892    1           DA_ASR=ADDR(RVBUFF.SSFRAME)->B$SS.ASR;
     1066     7893    1           DA_CURCG.CG$=RVBUFF.CURCG.CG$;
     1067     7894    1           DA_INITIALIZED='1'B;
     1068     7895    1           RETURN;
     1069     7896        %EJECT;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:141  
     1070     7897    1   DAM$INIT: ENTRY ALTRET;
     1071     7898    2           DO I=0 TO 255;
     1072     7899    2              DA_WINDOW(I)='000000777000'O;
     1073     7900    2              END;
     1074     7901    1           DA_WINDOWBASE=B$JIT.DDLL+B$JIT.PCDD-B$JIT.DLL-%MSCPG1#;
     1075     7902    1           DA_MSCPG1=DA_WINDOWBASE+%MSCPG1#;
     1076     7903    1           DA_MSCPG2=DA_WINDOWBASE+%MSCPG2#;
     1077     7904    1           DA_MSCPG3=DA_WINDOWBASE+%MSCPG3#;
     1078     7905    1           DA_MAPERR='0'B;
     1079     7906        %EJECT;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:142  
     1080     7907    1   DAM$RUNNING: ENTRY ALTRET;
     1081     7908    1           IF DA_INITIALIZED AND NOT DA_DUMPFILE THEN RETURN;
     1082     7909    1           DA_INITIALIZED='0'B;
     1083     7910    1           IF DCBADDR(DCBNUM(M$DUMPFILE))->F$DCB.FCD# THEN
     1084     7911    2              CALL M$CLOSE(FPT_CLOSE) WHENALTRETURN DO; END;
     1085     7912    2           DO I=0 TO 7;
     1086     7913    2              DA_SDASN.DESC(I)='0'B;
     1087     7914    2              DA_SDASN.CVM(I)='0'B;
     1088     7915    2              DA_SDASN.SYSID(I)=0;
     1089     7916    2              END;
     1090     7917    2           IF DA_MAPSEG~='0'B THEN DO;
     1091     7918    2              FPT_GDS_MAP.V.SEGSIZE#=(DA_MAPSEG.BOUND+1)/4;
     1092     7919    2              CALL M$FDS(FPT_GDS_MAP) ALTRET(PMMEALT);
     1093     7920    2              DA_MAPSEG='0'B;
     1094     7921    2              END;
     1095     7922    2           IF DA_TIGRSEG~='0'B THEN DO;
     1096     7923    2              FPT_GDS_TIGR.V.SEGSIZE#=(DA_TIGRSEG.BOUND+1)/4;
     1097     7924    2              CALL M$FDS(FPT_GDS_TIGR) ALTRET(PMMEALT);
     1098     7925    2              DA_TIGRSEG='0'B;
     1099     7926    2              END;
     1100     7927    1           CALL M$MONINFO(FPT_MONINFO) ALTRET(PMMEALT);
     1101     7928    1           DA_MUAIS=MNINFO.MUAIS#;
     1102     7929    1           DA_CPU = VLR_SITEINFO.CPU_TYPE#;
     1103     7930    1           B$USRT$=MNPTRS.B$USRT$;
     1104     7931    1           ADDR(B$USRT$)->P.SID=%SPCL8SID;
     1105     7932    1           S$CU$=ADDR(B$USRT$->B$USER(B$JIT.USER));
     1106     7933    1           DA_WINDOWMAX=B$JIT.DDUL-B$JIT.DLL;
     1107     7934    2           IF DA_DUMPFILE THEN DO I=DA_MSCPG1 TO 255;
     1108     7935    3              IF DA_WINDOW(I)~='000000777000'O THEN DO;
     1109     7936    3                 FPT_FVP.V.PNO#=I;
     1110     7937    3                 CALL M$FVP(FPT_FVP) ALTRET(NXTPG);
     1111     7938    3   NXTPG:        DA_WINDOW(I)='000000777000'O;
     1112     7939    3                 END;
     1113     7940    2              END;
     1114     7941    1           DA_DUMPFILE='0'B;
     1115     7942    1           DA_NXTWINDOW=0;
     1116     7943    1           DA_NXTSPCL=0;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:143  
     1117     7944    1           DA_RVBUF$=ADDR(NIL);
     1118     7945    1           DA_USERDIR$=ADDR(NIL);
     1119     7946    1           DA_NUMSPCL=6;
     1120     7947    1           IF DA_CPU=%DPS90 OR DA_CPU=%DPS90XA THEN DA_NUMSPCL=5;
     1121     7948    1           FPT_SAD.V.USERSID#=DA_SDASN.SID(%MONIS#);
     1122     7949    1           FPT_SAD.V.MONSID#=%ISSID;
     1123     7950    1           CALL M$SAD(FPT_SAD) ALTRET(PMMEALT);
     1124     7951    1           DA_SDASN.SID(%TIGR#)=%SPCL8SID;
     1125     7952    1           FPT_SAD.V.USERSID#=DA_SDASN.SID(%TIGR#);
     1126     7953    1           FPT_SAD.V.MONSID#=%TIGRSID;
     1127     7954    1           CALL M$SAD(FPT_SAD) ALTRET(PMMEALT);
     1128     7955    1           ADDR(DA_WSPTD$)->P=BINBIT(BITBIN(DA_SDASN.SID(%MONIS#)),36);
     1129     7956    1           DA_MONPTP=S$WSPTD.BLKNO(%MONWSQ);
     1130     7957    1           CALL DAM$USECPU(0) ALTRET(ALT);
     1131     7958    1           CALL DAM$VPAGE(%(HJIT_BASE%/4096),0,0,%MONWSQ) ALTRET(ALT);
     1132     7959    1           LS$=PINCRW(B$IS$,DA_WINDOWBASE*1024);
     1133     7960    1           DA_SDASN.DESC(%MONIS#)=LS$->DESC(0);
     1134     7961    1           DA_SDASN.SYSID(%MONIS#)=0;
     1135     7962    1           DA_SDASN.DESC(%TIGR#)=LS$->DESC(%(%BITBIN(%TIGRSID)-%BITBIN(%ISSID)));
     1136     7963    1           DA_SDASN.SYSID(%TIGR#)=0;
     1137     7964    1           ADDR(DA_TIGR$)->P=BINBIT(BITBIN(DA_SDASN.SID(%TIGR#)),36);
     1138     7965                                  /* INITIALIZE ASR AND PSR TO SOMETHING
     1139     7966                                     ENTIRELY UNREASONABLE                 */
     1140     7967    1           DA_PSR=B$TCB$->B$TCB.ALT$->B$SS.ASR;
     1141     7968    1           DA_ASR=B$TCB$->B$TCB.ALT$->B$SS.ASR;
     1142     7969    1           DA_CURCG.CG$=ADDR(NIL);
     1143     7970    1           DA_INITIALIZED='1'B;
     1144     7971    1           RETURN;
     1145     7972    1   PMMEALT: ;
     1146     7973    1           DA_MAPERR=B$TCB$->B$TCB.ALT$->B$ALT.ERR;
     1147     7974    1   ALT:    ALTRETURN;
     1148     7975        /**/
     1149     7976        %EJECT;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:144  
     1150     7977        /**/
     1151     7978    1   DAM$SELECT: ENTRY(FID) ALTRET;
     1152     7979        /**/
     1153     7980    1           DA_NODEIDX=HOSTNODE;
     1154     7981    1           RETURN;
     1155     7982        /**/
     1156     7983        /**/
     1157     7984        /**/
     1158     7985        %EJECT;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:145  
     1159     7986    1   SETERR: PROC(CODE) ALTRET;
     1160     7987    2   DCL CODE SBIN;
     1161     7988    2           DA_MAPERR='040115000000'O;
     1162     7989    2           DA_MAPERR.CODE=CODE;
     1163     7990    2           ALTRETURN;
     1164     7991    2   END SETERR;
     1165     7992    1   END DAM$DUMPFILE;
     1166     7993        %EOD;

PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:146  
--  Include file information  --

   B$SS.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   B$USER.:E05TOU  cannot be made into a system file and is referenced.
   IR_DATA_M.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   B_MLSMAC_C.:E05TOU  is referenced.
   B_ULSMAC_C.:E05TOU  is referenced.
   B_LSDATA_C.:E05TOU  cannot be made into a system file and is referenced.
   M_INFO_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   DA_TEXTC_C.:E05TOU  is referenced.
   DA_PERR_C.:E05TOU  is referenced.
   DA_ANLZ_R.:E05TOU  cannot be made into a system file and is referenced.
   DA_MAP_R.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure DAM$DUMPFILE.

   Procedure DAM$DUMPFILE requires 733 words for executable code.
   Procedure DAM$DUMPFILE requires 18 words of local(AUTO) storage.

PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:147  

 Object Unit name= DAM$DUMPFILE                               File name= DAM$MAP.:E05TOU
 UTS= JUL 29 '97 12:52:15.72 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   DCB   even  none     0      0  M$DUMPFILE
    2   Data  even  none   295    447  DAM$DUMPFILE
    3  RoData even  UTS      3      3  DAM$DUMPFILE
    4   Proc  even  none   733   1335  DAM$DUMPFILE
    5  RoData even  none    31     37  DAM$DUMPFILE

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     4      0   yes    yes     yes      Std        1  DAM$DUMPFILE
     4    742          yes     yes      Std        0  DAM$INIT
     4   1005          yes     yes      Std        0  DAM$RUNNING
     4   1316          yes     yes      Std        1  DAM$SELECT
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:148  

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes          ~proc      0 DA_MAP_D
 yes     yes           Std       5 DAM$VPAGE
         yes    yes    Std       1 DAA$ERRMSG
 yes     yes           Std       1 DAM$USECPU
                       nStd      0 X66_AUTO_1
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     DA_WINDOW                             DA_SDASN                              DA_MUAIS
     DA_CPU                                DA_WINDOWBASE                         DA_WINDOWMAX
     DA_NXTWINDOW                          DA_DUMPFILE                           DA_SYSTAC2
     DA_INITIALIZED                        DA_CPU#                               DA_NODEIDX
     DA_MONPTP                             DA_NODEDIR$                           DA_RVBUF$
     DA_WSPTD$                             DA_TIGR$                              DA_USERDIR$
     DA_MSCPG1                             DA_MSCPG2                             DA_MSCPG3
     DA_MAPERR                             DA_NXTSPCL                            DA_NUMSPCL
     DA_MAPSEG                             DA_TIGRSEG                            DA_PSR
     DA_ASR                                DA_CURCG                              DA_TRTN
     M$UC                                  S$CU$                                 B$USRT$
     M$DUMPFILE                            B$IS$                                 B$JIT$
     B$TCB$                                B_VECTNIL
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:149  

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID                                 NULLSID                               ROSID
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:150  


      755        1        /*T***********************************************************/
      756        2        /*T*                                                         */
      757        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
      758        4        /*T*                                                         */
      759        5        /*T***********************************************************/
      760        6        DAM$DUMPFILE: PROC(FID) ALTRET;

      6  4 000000   000000 700200 xent  DAM$DUMPFILE TSX0  ! X66_AUTO_1
         4 000001   000022 000001                    ZERO    18,1

      761        7        /**/
      762        8        /* PARAMETERS */
      763        9        /**/
      764       10    1   DCL 1 FID,
      765       11    1         2 L UBIN BYTE UNAL,
      766       12    1         2 C CHAR(FID.L);
      767       13        /**/
      768       14        /* EXTERNAL PROCEDURES */
      769       15        /**/
      770       16    1   DCL DAM$VPAGE ENTRY(5) ALTRET;
      771       17    1   DCL DAM$USECPU ENTRY(1) ALTRET;
      772       18    1   DCL DAA$ERRMSG ENTRY(1) OPTIONAL;
      773       19    1   DCL DA_MAP_D ENTRY CONV(5);
      774       20        /* AUTO DATA */
      775       21        /**/
      776       22    1   DCL I SBIN;
      777       23    1   DCL J SBIN;
      778       24    1   DCL DS$ PTR;
      779       25    1   DCL LS$ PTR;
      780       26    1   DCL TIGRPGS SBIN;
      781       27    1   DCL SEGSIZE SBIN;
      782       28    1   DCL WINDOWMAX SBIN;
      783       29        /**/
      784       30        /* INCLUDE FILES */
      785       31        /**/
      786       32        %INCLUDE DA_MAP_R;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:151  
      787       62        %INCLUDE DA_ANLZ_R;
      788       75        %INCLUDE DA_PERR_C;
      789      139        %INCLUDE DA_TEXTC_C;
      790      170        %INCLUDE CP_6;
      791      251        %INCLUDE M_INFO_C;
      792      391        %INCLUDE B_LSDATA_C;
      793     3597        %INCLUDE B_STRINGS_C;
      794     3726        %INCLUDE B_SEGIDS_C;
      795     4265        %INCLUDE B_ERRORS_C;
      796     5392        %INCLUDE NI$TABLES;
      797     5608        %INCLUDE CP_6_SUBS;
      798     6148        %INCLUDE IR_DATA_M;
      799     6312        %RV_DFSUBS;
      800     6339        %INCLUDE B$USER;
      801     6555        %B$USERREFS;
      802     6559        %INCLUDE B$JIT;
      803     6849        %INCLUDE B$SS;
      804     7028        /**/
      805     7029        /* STATIC AND BASED DATA */
      806     7030        /**/
      807     7031    1   DCL M$DUMPFILE DCB;
      808     7032        %FPT_OPEN (DCB=M$DUMPFILE,
      809     7033                   FUN=IN,
      810     7034                   NAME=VLP_NAME,
      811     7035                   ACCT=VLP_ACCT,
      812     7036                   SN=VLP_SN,
      813     7037                   PASS=VLP_PASS,
      814     7038                   WSN=VLP_WSN);
      815     7147        %VLP_NAME;
      816     7174        %VLP_ACCT;
      817     7187        %VLP_SN;
      818     7200        %VLP_ACCT (FPTN=VLP_PASS);
      819     7213        %VLP_ACCT (FPTN=VLP_WSN);
      820     7226        %FPT_CLOSE (DCB=M$DUMPFILE,DISP=SAVE);
      821     7268        %FPT_FID (ACCT=VLP_ACCT,
      822     7269                  ASN="FPT_OPEN.V.ASN#",
      823     7270                  NAME=VLP_NAME,
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:152  
      824     7271                  PASS=VLP_PASS,
      825     7272                  RES="FPT_OPEN.V.RES#",
      826     7273                  SN=VLP_SN,
      827     7274                  WSN=VLP_WSN);
      828     7297        %F$DCB;
      829     7354        %B$TCB;
      830     7357        %B$ALT;
      831     7365        %FPT_CVM (PPNO=-1);
      832     7381    1   DCL B$IS$ PTR SYMREF;
      833     7382    1   DCL DESC(0:0) BIT(72) ALIGNED BASED;
      834     7383        %RV_DFKEY (NAME=DFKEY,STCLASS=STATIC);
      835     7401        %FPT_READ (DCB=M$DUMPFILE,
      836     7402                   KEY=DFKEY,
      837     7403                   KEYS=YES);
      838     7442        %FPT_GDS (FPTN=FPT_GDS_MAP,RESULTS=DA_MAPSEG);
      839     7458        %FPT_GDS (FPTN=FPT_GDS_TIGR,RESULTS=DA_TIGRSEG);
      840     7474        %FPT_FVP;
      841     7488        %FPT_STD;
      842     7503        %FPT_SAD;
      843     7518        %FPT_WAIT (FPTN=WAIT4DUMP, UNITS=30);
      844     7532        %FPT_MONINFO (MONINFO=MNINFO,
      845     7533                      SITEINFO=VLR_SITEINFO,
      846     7534                      MONPTRS=MNPTRS);
      847     7549        %VLR_MONINFO (FPTN=MNINFO);
      848     7567        %VLR_MONPTRS (FPTN=MNPTRS);
      849     7582        %VLR_SITEINFO;
      850     7601        %FPT_GDDL (RESULTS=VLR_GDDL);
      851     7614        %VLP_GDDL (FPTN=VLR_GDDL);
      852     7628        %RV_NODEDIR (FPTN=NODEDIR,N=10,STCLASS="BASED(DA_NODEDIR$)");
      853     7645    1   DCL HOSTNODE UBIN STATIC;
      854     7646        %RV_BUFF (NAME=RVBUFF,STCLASS="BASED(DA_RVBUF$)");
      855     7682    1   DCL 1 P BASED ALIGNED,
      856     7683    1         2 PA UBIN(8) UNAL,
      857     7684    1         2 WA UBIN(10) UNAL,
      858     7685    1         2 CA UBIN(2) UNAL,
      859     7686    1         2 BA UBIN(4) UNAL,
      860     7687    1         2 SID,
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:153  
      861     7688    1           3 S UBIN(2) UNAL,
      862     7689    1           3 D UBIN(10) UNAL;
      863     7690    1   DCL PAGE CHAR(4096) BASED;
      864     7691    1   DCL B$JIT$ PTR SYMREF;
      865     7692    1   DCL B$TCB$ PTR SYMREF;
      866     7693    1   DCL 1 S$WSPTD(0:0) ALIGNED BASED(DA_WSPTD$),
      867     7694    1         2 BLKNO UBIN(18) UNAL,
      868     7695    1         2 * BIT(2),
      869     7696    1         2 P BIT(1),
      870     7697    1         2 T BIT(1),
      871     7698    1         2 * BIT(6),
      872     7699    1         2 NBLKS UBIN(8) UNAL;
      873     7700        %SUB FOREVER="WHILE('1'B)";
      874     7701        %SUB NEVER="WHILE('0'B)";
      875     7702        %EQU MINPGS=20;          /* SAVE AT LEAST THIS MANY PAGES FOR DYNAMIC DATA */
      876     7703        %EJECT;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:154  
      877     7704        %EJECT;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:155  
      878     7705    2           IF ADDR(FID)~=ADDR(NIL) THEN DO;

   7705  4 000002   200003 236100                    LDQ     @FID,,AUTO
         4 000003   000001 116000 xsym               CMPQ    B_VECTNIL+1
         4 000004   000123 600000 4                  TZE     s:7733

      879     7706    3              IF FID.L=0 OR FID.L=511 OR FID.L=510 THEN DO;

   7706  4 000005   200003 470500                    LDP0    @FID,,AUTO
         4 000006   000100 101500                    MRL     fill='000'O
         4 000007   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
         4 000010   200016 000004                    ADSC9   @CODE+1,,AUTO            cn=0,n=4
         4 000011   200016 236100                    LDQ     @CODE+1,,AUTO
         4 000012   000000 116003                    CMPQ    0,DU
         4 000013   000030 600000 4                  TZE     s:7707
         4 000014   000100 101500                    MRL     fill='000'O
         4 000015   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
         4 000016   200017 000004                    ADSC9   @CODE+2,,AUTO            cn=0,n=4
         4 000017   200017 236100                    LDQ     @CODE+2,,AUTO
         4 000020   000777 116007                    CMPQ    511,DL
         4 000021   000030 600000 4                  TZE     s:7707
         4 000022   000100 101500                    MRL     fill='000'O
         4 000023   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
         4 000024   200020 000004                    ADSC9   @CODE+3,,AUTO            cn=0,n=4
         4 000025   200020 236100                    LDQ     @CODE+3,,AUTO
         4 000026   000776 116007                    CMPQ    510,DL
         4 000027   000071 601000 4                  TNZ     s:7723

      880     7707    3                 FPT_OPEN.NAME_=VECTOR(NIL);

   7707  4 000030   000000 237000 5                  LDAQ    0
         4 000031   000006 757000 2                  STAQ    FPT_OPEN+6

      881     7708    3                 FPT_OPEN.ACCT_=VECTOR(NIL);

   7708  4 000032   000000 237000 5                  LDAQ    0
         4 000033   000024 757000 2                  STAQ    FPT_OPEN+20
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:156  

      882     7709    3                 FPT_OPEN.SN_=VECTOR(NIL);

   7709  4 000034   000000 237000 5                  LDAQ    0
         4 000035   000002 757000 2                  STAQ    FPT_OPEN+2

      883     7710    3                 FPT_OPEN.V.OPER.NXTF#='1'B;

   7710  4 000036   004000 236007                    LDQ     2048,DL
         4 000037   000044 256000 2                  ORSQ    FPT_OPEN+36

      884     7711    3                 FPT_OPEN.V.OPER.THISF#='0'B;

   7711  4 000040   000002 236000 5                  LDQ     2
         4 000041   000044 356000 2                  ANSQ    FPT_OPEN+36

      885     7712    3                 IF FID.L=511 THEN

   7712  4 000042   000100 101500                    MRL     fill='000'O
         4 000043   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
         4 000044   200016 000004                    ADSC9   @CODE+1,,AUTO            cn=0,n=4
         4 000045   200016 236100                    LDQ     @CODE+1,,AUTO
         4 000046   000777 116007                    CMPQ    511,DL
         4 000047   000053 601000 4                  TNZ     s:7715

      886     7713    3                    FPT_OPEN.V.SRCHCOND.REV#='1'B;

   7713  4 000050   000001 236003                    LDQ     1,DU
         4 000051   000045 256000 2                  ORSQ    FPT_OPEN+37
         4 000052   000123 710000 4                  TRA     s:7733

      887     7714    3                 ELSE
      888     7715    3                    IF FID.L=0 THEN

   7715  4 000053   000100 101500                    MRL     fill='000'O
         4 000054   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
         4 000055   200016 000004                    ADSC9   @CODE+1,,AUTO            cn=0,n=4
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:157  
         4 000056   200016 236100                    LDQ     @CODE+1,,AUTO
         4 000057   000000 116003                    CMPQ    0,DU
         4 000060   000064 601000 4                  TNZ     s:7718

      889     7716    3                       FPT_OPEN.V.SRCHCOND.REV#='0'B;

   7716  4 000061   000003 236000 5                  LDQ     3
         4 000062   000045 356000 2                  ANSQ    FPT_OPEN+37
         4 000063   000123 710000 4                  TRA     s:7733

      890     7717    4                    ELSE DO;

      891     7718    4                       FPT_OPEN.V.OPER.NXTF# = '0'B;

   7718  4 000064   000004 236000 5                  LDQ     4
         4 000065   000044 356000 2                  ANSQ    FPT_OPEN+36

      892     7719    4                       FPT_OPEN.V.OPER.THISF# = '1'B;

   7719  4 000066   002000 236007                    LDQ     1024,DL
         4 000067   000044 256000 2                  ORSQ    FPT_OPEN+36

      893     7720    4                       END;

      894     7721    3                 END;

   7721  4 000070   000123 710000 4                  TRA     s:7733

      895     7722    3              ELSE DO;

      896     7723    3                 FPT_OPEN.NAME_=VECTOR(VLP_NAME);

   7723  4 000071   000006 237000 5                  LDAQ    6
         4 000072   000006 757000 2                  STAQ    FPT_OPEN+6

      897     7724    3                 FPT_OPEN.ACCT_=VECTOR(VLP_ACCT);

PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:158  
   7724  4 000073   000010 237000 5                  LDAQ    8
         4 000074   000024 757000 2                  STAQ    FPT_OPEN+20

      898     7725    3                 FPT_OPEN.SN_=VECTOR(VLP_SN);

   7725  4 000075   000012 237000 5                  LDAQ    10
         4 000076   000002 757000 2                  STAQ    FPT_OPEN+2

      899     7726    3                 FPT_OPEN.V.OPER.NXTF#='0'B;

   7726  4 000077   000004 236000 5                  LDQ     4
         4 000100   000044 356000 2                  ANSQ    FPT_OPEN+36

      900     7727    3                 FPT_OPEN.V.OPER.THISF#='1'B;

   7727  4 000101   002000 236007                    LDQ     1024,DL
         4 000102   000044 256000 2                  ORSQ    FPT_OPEN+36

      901     7728    3                 FPT_OPEN.V.SRCHCOND.REV#='0'B;

   7728  4 000103   000003 236000 5                  LDQ     3
         4 000104   000045 356000 2                  ANSQ    FPT_OPEN+37

      902     7729    3                 FPT_FID.TEXTFID_=VECTOR(FID.C);

   7729  4 000105   000100 101500                    MRL     fill='000'O
         4 000106   000000 000001                    ADSC9   0,,PR0                   cn=0,n=1
         4 000107   200016 000002                    ADSC9   @CODE+1,,AUTO            cn=0,n=2
         4 000110   200016 220100                    LDX0    @CODE+1,,AUTO
         4 000111   000000 635010                    EAA     0,X0
         4 000112   000002 771000                    ARL     2
         4 000113   000140 135007                    SBLA    96,DL
         4 000114   200003 236100                    LDQ     @FID,,AUTO
         4 000115   200000 036007                    ADLQ    65536,DL
         4 000116   000154 757000 2                  STAQ    FPT_FID+2

      903     7730    3                 CALL M$FID(FPT_FID) ALTRET(PMMEALT);
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:159  

   7730  4 000117   000152 630400 2                  EPPR0   FPT_FID
         4 000120   420001 713400                    CLIMB   alt,+8193
         4 000121   404400 401760                    pmme    nvectors=10
         4 000122   001311 702000 4                  TSX2    PMMEALT

      904     7731    3                 END;

      905     7732    2              END;

      906     7733    1           IF FPT_OPEN.V.ASN#~=%TAPE# AND FPT_OPEN.V.ASN#~=%FILE# THEN

   7733  4 000123   000045 236000 2                  LDQ     FPT_OPEN+37
         4 000124   000777 376007                    ANQ     511,DL
         4 000125   000002 116007                    CMPQ    2,DL
         4 000126   000135 600000 4                  TZE     s:7739
         4 000127   000001 116007                    CMPQ    1,DL
         4 000130   000135 600000 4                  TZE     s:7739

      907     7734    1              CALL SETERR(%E$DA_BAD_DUMP_FID) ALTRET(ALT);

   7734  4 000131   000014 236000 5                  LDQ     12
         4 000132   200015 756100                    STQ     WINDOWMAX+3,,AUTO
         4 000133   001323 701000 4                  TSX1    SETERR
         4 000134   001315 702000 4                  TSX2    ALT

      908     7735        /*E*    ERROR:   DAM-E$DA_BAD_DUMP_FID
      909     7736                MESSAGE: Dump files must be keyed files residing on either disk
      910     7737                         or labeled tape.
      911     7738                                                                           */
      912     7739    1           DA_INITIALIZED='0'B;

   7739  4 000135   000000 450000 xsym               STZ     DA_INITIALIZED

      913     7740    1           IF DCBADDR(DCBNUM(M$DUMPFILE))->F$DCB.FCD# THEN

   7740  4 000136   000000 236007 xsym               LDQ     M$DUMPFILE,DL
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:160  
         4 000137   000015 470400 5                  LDP0    13
         4 000140   000000 471500                    LDP1    0,,PR0
         4 000141   100000 473506                    LDP3    0,QL,PR1
         4 000142   300031 236100                    LDQ     25,,PR3
         4 000143   020000 316007                    CANQ    8192,DL
         4 000144   000151 600000 4                  TZE     OPEN2

      914     7741    1              CALL M$CLOSE(FPT_CLOSE) ALTRET(PMMEALT);

   7741  4 000145   000114 630400 2                  EPPR0   FPT_CLOSE
         4 000146   450001 713400                    CLIMB   alt,close
         4 000147   406000 401760                    pmme    nvectors=13
         4 000150   001311 702000 4                  TSX2    PMMEALT

      915     7742    2   OPEN2:  CALL M$OPEN(FPT_OPEN) WHENALTRETURN DO;

   7742  4 000151   000000 630400 2     OPEN2        EPPR0   FPT_OPEN
         4 000152   450000 713400                    CLIMB   alt,open
         4 000153   410400 401760                    pmme    nvectors=18
         4 000154   000156 702000 4                  TSX2    s:7743
         4 000155   000234 710000 4                  TRA     s:7765

      916     7743    3              IF B$TCB$->B$TCB.ALT$->B$ALT.ERR.ERR# = %E$FILEBUSY THEN DO;

   7743  4 000156   000000 470400 xsym               LDP0    B$TCB$
         4 000157   000000 471500                    LDP1    0,,PR0
         4 000160   100102 236100                    LDQ     66,,PR1
         4 000161   377770 376007                    ANQ     131064,DL
         4 000162   001550 116007                    CMPQ    872,DL
         4 000163   000215 601000 4                  TNZ     s:7758

      917     7744    3                 REMEMBER RENVALT IN DA_TRTN;

   7744  4 000164   000212 635000 4                  EAA     RENVALT
         4 000165   000000 452400 xsym               STP2    DA_TRTN
         4 000166   000001 755000 xsym               STA     DA_TRTN+1

PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:161  
      918     7745    3                 CALL M$SENV;

   7745  4 000167   010011 713400                    CLIMB   4105
         4 000170   000000 401760                    pmme    nvectors=0

      919     7746    3                 CALL SETERR (%E$DA_DUMPBUSY);

   7746  4 000171   000017 236000 5                  LDQ     15
         4 000172   200015 756100                    STQ     WINDOWMAX+3,,AUTO
         4 000173   001323 701000 4                  TSX1    SETERR
         4 000174   000000 011000                    NOP     0

      920     7747        /*E* ERROR: DAM-E$DA_DUMPBUSY
      921     7748          MESSAGE: Dump file busy, waiting...
      922     7749        */
      923     7750    3                 IF ENTADDR(DAA$ERRMSG) ~= ENTADDR(NIL) THEN

   7750  4 000175   000000 636000 xent               EAQ     DAA$ERRMSG
         4 000176   000002 116000 xsym               CMPQ    B_VECTNIL+2
         4 000177   000203 600000 4                  TZE     s:7752

      924     7751    3                    CALL DAA$ERRMSG;

   7751  4 000200   000002 631400 xsym               EPPR1   B_VECTNIL+2
         4 000201   000000 701000 xent               TSX1    DAA$ERRMSG
         4 000202   000000 011000                    NOP     0

      925     7752    3                 CALL M$WAIT (WAIT4DUMP);

   7752  4 000203   000262 630400 2                  EPPR0   WAIT4DUMP
         4 000204   020006 713400                    CLIMB   8198
         4 000205   400400 401760                    pmme    nvectors=2

      926     7753    3                 CALL M$RENV;

   7753  4 000206   010016 713400                    CLIMB   4110
         4 000207   000000 401760                    pmme    nvectors=0
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:162  

      927     7754    3                 CALL M$RETRY;

   7754  4 000210   010010 713400                    CLIMB   4104
         4 000211   000000 401760                    pmme    nvectors=0

      928     7755    3   RENVALT:      CALL M$RENV;

   7755  4 000212   010016 713400       RENVALT      CLIMB   4110
         4 000213   000000 401760                    pmme    nvectors=0

      929     7756    3                 ALTRETURN;

   7756  4 000214   000000 702200 xent               TSX2  ! X66_AALT

      930     7757    3                 END;
      931     7758    2             IF B$TCB$->B$TCB.ALT$->B$ALT.ERR.ERR# ~= %E$NOFILE OR NOT DA_SYSTAC2 THEN
              7758                       GOTO PMMEALT;

   7758  4 000215   001610 116007                    CMPQ    904,DL
         4 000216   001311 601000 4                  TNZ     PMMEALT
         4 000217   000000 234000 xsym               SZN     DA_SYSTAC2
         4 000220   001311 605000 4                  TPL     PMMEALT

      932     7759    3              IF SUBSTR(VLP_ACCT.ACCT#,7,1)='2' THEN DO;

   7759  4 000221   000103 236000 2                  LDQ     VLP_ACCT+1
         4 000222   000777 376007                    ANQ     511,DL
         4 000223   000062 116007                    CMPQ    50,DL
         4 000224   000231 601000 4                  TNZ     s:7762+1

      933     7760    3                 SUBSTR(VLP_ACCT.ACCT#,7,1)=' ';

   7760  4 000225   000040 236007                    LDQ     32,DL
         4 000226   000103 552004 2                  STBQ    VLP_ACCT+1,'04'O

      934     7761    3                 DA_SYSTAC2 = '0'B;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:163  

   7761  4 000227   000000 450000 xsym               STZ     DA_SYSTAC2

      935     7762    2                 END; ELSE SUBSTR(VLP_ACCT.ACCT#,7,1)='2';

   7762  4 000230   000233 710000 4                  TRA     s:7763

   7762  4 000231   000062 236007                    LDQ     50,DL
         4 000232   000103 552004 2                  STBQ    VLP_ACCT+1,'04'O

      936     7763    2              GOTO OPEN2;

   7763  4 000233   000151 710000 4                  TRA     OPEN2

      937     7764    2              END;
      938     7765    2           DO I=0 TO 7;

   7765  4 000234   200004 450100                    STZ     I,,AUTO

      939     7766    2              DA_SDASN.DESC(I)='0'B;

   7766  4 000235   200004 236100                    LDQ     I,,AUTO
         4 000236   000003 402007                    MPY     3,DL
         4 000237   000000 450006 xsym               STZ     DA_SDASN,QL
         4 000240   000001 450006 xsym               STZ     DA_SDASN+1,QL

      940     7767    2              DA_SDASN.CVM(I)='0'B;

   7767  4 000241   000000 620006                    EAX0    0,QL
         4 000242   000020 236000 5                  LDQ     16
         4 000243   000002 356010 xsym               ANSQ    DA_SDASN+2,X0

      941     7768    2              DA_SDASN.SYSID(I)=0;

   7768  4 000244   000000 221003                    LDX1    0,DU
         4 000245   000002 441010 xsym               SXL1    DA_SDASN+2,X0

PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:164  
      942     7769    2              END;

   7769  4 000246   200004 054100                    AOS     I,,AUTO
         4 000247   200004 235100                    LDA     I,,AUTO
         4 000250   000007 115007                    CMPA    7,DL
         4 000251   000235 604400 4                  TMOZ    s:7766

      943     7770    2           DO I=DA_MSCPG1 TO 255;

   7770  4 000252   000000 235000 xsym               LDA     DA_MSCPG1
         4 000253   200004 755100                    STA     I,,AUTO
         4 000254   000302 710000 4                  TRA     s:7782+1

      944     7771    3              IF DA_WINDOW(I)~='000000777000'O THEN DO;

   7771  4 000255   200004 720100                    LXL0    I,,AUTO
         4 000256   000000 236010 xsym               LDQ     DA_WINDOW,X0
         4 000257   000000 116000 3                  CMPQ    0
         4 000260   000301 600000 4                  TZE     s:7782

      945     7772    4                 IF DA_DUMPFILE THEN DO;

   7772  4 000261   000000 234000 xsym               SZN     DA_DUMPFILE
         4 000262   000271 605000 4                  TPL     s:7777

      946     7773    4                    FPT_FVP.V.PNO#=I;

   7773  4 000263   000246 440000 2                  SXL0    FPT_FVP+2

      947     7774    4                    CALL M$FVP(FPT_FVP) ALTRET(BADCVM);

   7774  4 000264   000244 630400 2                  EPPR0   FPT_FVP
         4 000265   430006 713400                    CLIMB   alt,+12294
         4 000266   400000 401760                    pmme    nvectors=1
         4 000267   000276 702000 4                  TSX2    BADCVM

      948     7775    4                    END;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:165  

   7775  4 000270   000276 710000 4                  TRA     BADCVM

      949     7776    4                 ELSE DO;

      950     7777    4                    FPT_CVM.V.VPNO#=I;

   7777  4 000271   000206 440000 2                  SXL0    FPT_CVM+4

      951     7778    4                    CALL M$CVM(FPT_CVM) ALTRET(BADCVM);

   7778  4 000272   000202 630400 2                  EPPR0   FPT_CVM
         4 000273   430011 713400                    CLIMB   alt,+12297
         4 000274   400000 401760                    pmme    nvectors=1
         4 000275   000276 702000 4                  TSX2    BADCVM

      952     7779    4                    END;

      953     7780    3   BADCVM:       DA_WINDOW(I)='000000777000'O;

   7780  4 000276   000000 236000 3     BADCVM       LDQ     0
         4 000277   200004 720100                    LXL0    I,,AUTO
         4 000300   000000 756010 xsym               STQ     DA_WINDOW,X0

      954     7781    3                 END;

      955     7782    2              END;

   7782  4 000301   200004 054100                    AOS     I,,AUTO
         4 000302   200004 235100                    LDA     I,,AUTO
         4 000303   000377 115007                    CMPA    255,DL
         4 000304   000255 604400 4                  TMOZ    s:7771

      956     7783    1           DA_DUMPFILE='1'B;

   7783  4 000305   400000 236003                    LDQ     -131072,DU
         4 000306   000000 756000 xsym               STQ     DA_DUMPFILE
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:166  

      957     7784    2           IF DA_MAPSEG.BOUND<%(3*1024*4-1) THEN DO;

   7784  4 000307   000000 236000 xsym               LDQ     DA_MAPSEG
         4 000310   000034 376000 xsym               ANQ     B_VECTNIL+28
         4 000311   000021 116000 5                  CMPQ    17
         4 000312   000326 603000 4                  TRC     s:7788

      958     7785    2              FPT_GDS_MAP.V.SEGSIZE#=(%(3*1024*4)-DA_MAPSEG.BOUND)/4;

   7785  4 000313   000000 236000 xsym               LDQ     DA_MAPSEG
         4 000314   000020 772000                    QRL     16
         4 000315   000027 676000 xsym               ERQ     B_VECTNIL+23
         4 000316   030001 036007                    ADLQ    12289,DL
         4 000317   000004 506007                    DIV     4,DL
         4 000320   000000 620006                    EAX0    0,QL
         4 000321   000234 440000 2                  SXL0    FPT_GDS_MAP+4

      959     7786    2              CALL M$GDS(FPT_GDS_MAP) ALTRET(PMMEALT);

   7786  4 000322   000230 630400 2                  EPPR0   FPT_GDS_MAP
         4 000323   430001 713400                    CLIMB   alt,gds
         4 000324   400400 401760                    pmme    nvectors=2
         4 000325   001311 702000 4                  TSX2    PMMEALT

      960     7787    2              END;

      961     7788    1           DS$=DA_MAPSEG.P$;

   7788  4 000326   000001 236000 xsym               LDQ     DA_MAPSEG+1
         4 000327   200006 756100                    STQ     DS$,,AUTO

      962     7789    1           DFKEY='007'O;

   7789  4 000330   007000 235003                    LDA     3584,DU
         4 000331   000000 236003                    LDQ     0,DU
         4 000332   000210 757000 2                  STAQ    DFKEY
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:167  

      963     7790    1           FPT_READ.BUF_=VECTOR(DS$->NODEDIR);

   7790  4 000333   000022 235000 5                  LDA     18
         4 000334   200006 236100                    LDQ     DS$,,AUTO
         4 000335   000216 757000 2                  STAQ    FPT_READ+4

      964     7791    2           CALL M$READ(FPT_READ) WHENALTRETURN DO;

   7791  4 000336   000212 630400 2                  EPPR0   FPT_READ
         4 000337   440000 713400                    CLIMB   alt,read
         4 000340   401400 401760                    pmme    nvectors=4
         4 000341   000343 702000 4                  TSX2    s:7792
         4 000342   000350 710000 4                  TRA     s:7798

      965     7792    2              CALL SETERR(%E$DA_NOT_DUMPFILE);

   7792  4 000343   000024 236000 5                  LDQ     20
         4 000344   200015 756100                    STQ     WINDOWMAX+3,,AUTO
         4 000345   001323 701000 4                  TSX1    SETERR
         4 000346   000000 011000                    NOP     0

      966     7793        /*E*       ERROR:   DAM-E$DA_NOT_DUMPFILE
      967     7794                   MESSAGE: %UF is not a dump file.  It has no node directory.
      968     7795        */
      969     7796    2              ALTRETURN;

   7796  4 000347   000000 702200 xent               TSX2  ! X66_AALT

      970     7797    2              END;
      971     7798    1           DA_NODEDIR$=DS$;

   7798  4 000350   200006 236100                    LDQ     DS$,,AUTO
         4 000351   000000 756000 xsym               STQ     DA_NODEDIR$

      972     7799    1           DS$=PINCRW(DS$,SIZEW(NODEDIR));

PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:168  
   7799  4 000352   000042 036003                    ADLQ    34,DU
         4 000353   200006 756100                    STQ     DS$,,AUTO

      973     7800    2   FINDHOST: DO;

   7800  4 000354                       FINDHOST     null
      974     7801    3              DO I=1 TO NODEDIR.N;

   7801  4 000354   000001 235007                    LDA     1,DL
         4 000355   200004 755100                    STA     I,,AUTO
         4 000356   000373 710000 4                  TRA     s:7807+1

      975     7802    4                 IF NODEDIR.NODE.NODENAME(I)='HOST' THEN DO;

   7802  4 000357   200004 236100                    LDQ     I,,AUTO
         4 000360   000014 402007                    MPY     12,DL
         4 000361   000000 470400 xsym               LDP0    DA_NODEDIR$
         4 000362   040000 106506                    CMPC    fill='040'O
         4 000363   000001 000010                    ADSC9   1,Q,PR0                  cn=0,n=8
         4 000364   000001 000004 3                  ADSC9   1                        cn=0,n=4
         4 000365   000372 601000 4                  TNZ     s:7807

      976     7803    4                    DA_NODEIDX=I;

   7803  4 000366   200004 235100                    LDA     I,,AUTO
         4 000367   000000 755000 xsym               STA     DA_NODEIDX

      977     7804    4                    HOSTNODE=I;

   7804  4 000370   000446 755000 2                  STA     HOSTNODE

      978     7805    4                    EXIT FINDHOST;

   7805  4 000371   000400 710000 4                  TRA     s:7809

      979     7806    4                    END;
      980     7807    3                 END;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:169  

   7807  4 000372   200004 054100                    AOS     I,,AUTO
         4 000373   000000 470400 xsym               LDP0    DA_NODEDIR$
         4 000374   000000 236100                    LDQ     0,,PR0
         4 000375   000357 604000 4                  TMI     s:7802
         4 000376   200004 116100                    CMPQ    I,,AUTO
         4 000377   000357 605000 4                  TPL     s:7802

      981     7808    2              END;

      982     7809    2           DO WHILE(SUBSTR(NODEDIR.NODE.NODENAME(DA_NODEIDX),0,4)~='HOST'

   7809  4 000400   000402 710000 4                  TRA     s:7812

      983     7810    2             AND DA_NODEIDX<=NODEDIR.N);
      984     7811    2              DA_NODEIDX=DA_NODEIDX+1;

   7811  4 000401   000000 054000 xsym               AOS     DA_NODEIDX

      985     7812    2              END;

   7812  4 000402   000000 236000 xsym               LDQ     DA_NODEIDX
         4 000403   000003 402007                    MPY     3,DL
         4 000404   000000 470400 xsym               LDP0    DA_NODEDIR$
         4 000405   000001 236106                    LDQ     1,QL,PR0
         4 000406   000001 116000 3                  CMPQ    1
         4 000407   000414 600000 4                  TZE     s:7813
         4 000410   000000 236100                    LDQ     0,,PR0
         4 000411   000401 604000 4                  TMI     s:7811
         4 000412   000000 116000 xsym               CMPQ    DA_NODEIDX
         4 000413   000401 605000 4                  TPL     s:7811

      986     7813    1           DFKEY.K.NODEIDX=DA_NODEIDX;

   7813  4 000414   000000 236000 xsym               LDQ     DA_NODEIDX
         4 000415   000022 736000                    QLS     18
         4 000416   000210 552020 2                  STBQ    DFKEY,'20'O
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:170  

      987     7814    1           DFKEY.K.TYP=%R_DINFO#;

   7814  4 000417   000000 236003                    LDQ     0,DU
         4 000420   000210 552010 2                  STBQ    DFKEY,'10'O

      988     7815    1           DFKEY.K.STYP=%R_BUFF#;

   7815  4 000421   000210 552004 2                  STBQ    DFKEY,'04'O

      989     7816    1           DFKEY.K.USR#=0;

   7816  4 000422   000211 552040 2                  STBQ    DFKEY+1,'40'O

      990     7817    1           DFKEY.K.VP#=0;

   7817  4 000423   000211 552034 2                  STBQ    DFKEY+1,'34'O

      991     7818    1           FPT_READ.BUF_=VECTOR(DS$->PAGE);

   7818  4 000424   000025 235000 5                  LDA     21
         4 000425   200006 236100                    LDQ     DS$,,AUTO
         4 000426   000216 757000 2                  STAQ    FPT_READ+4

      992     7819    1           CALL M$READ(FPT_READ) ALTRET(PMMEALT);

   7819  4 000427   000212 630400 2                  EPPR0   FPT_READ
         4 000430   440000 713400                    CLIMB   alt,read
         4 000431   401400 401760                    pmme    nvectors=4
         4 000432   001311 702000 4                  TSX2    PMMEALT

      993     7820    1           DA_RVBUF$=DS$;

   7820  4 000433   200006 236100                    LDQ     DS$,,AUTO
         4 000434   000000 756000 xsym               STQ     DA_RVBUF$

      994     7821    1           DS$=PINCRW(DS$,1024);
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:171  

   7821  4 000435   002000 036003                    ADLQ    1024,DU
         4 000436   200006 756100                    STQ     DS$,,AUTO

      995     7822    1           DFKEY.K.STYP=%R_USRD#;

   7822  4 000437   000001 236007                    LDQ     1,DL
         4 000440   000210 552004 2                  STBQ    DFKEY,'04'O

      996     7823    1           FPT_READ.BUF_=VECTOR(DS$->PAGE);

   7823  4 000441   000025 235000 5                  LDA     21
         4 000442   200006 236100                    LDQ     DS$,,AUTO
         4 000443   000216 757000 2                  STAQ    FPT_READ+4

      997     7824    1           CALL M$READ(FPT_READ) ALTRET(UDERR);

   7824  4 000444   000212 630400 2                  EPPR0   FPT_READ
         4 000445   440000 713400                    CLIMB   alt,read
         4 000446   401400 401760                    pmme    nvectors=4
         4 000447   000456 702000 4                  TSX2    UDERR

      998     7825    1           DA_USERDIR$=DS$;

   7825  4 000450   200006 236100                    LDQ     DS$,,AUTO
         4 000451   000000 756000 xsym               STQ     DA_USERDIR$

      999     7826    1           DA_MUAIS=RVBUFF.B_MUAIS;

   7826  4 000452   000000 470400 xsym               LDP0    DA_RVBUF$
         4 000453   000161 235100                    LDA     113,,PR0
         4 000454   000000 755000 xsym               STA     DA_MUAIS

     1000     7827    2           DO NEVER;

   7827  4 000455   000465 710000 4                  TRA     s:7835

PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:172  
     1001     7828    2   UDERR:     DA_USERDIR$=ADDR(NIL);

   7828  4 000456   000001 236000 xsym  UDERR        LDQ     B_VECTNIL+1
         4 000457   000000 756000 xsym               STQ     DA_USERDIR$

     1002     7829    2              DA_MUAIS=0;

   7829  4 000460   000000 450000 xsym               STZ     DA_MUAIS

     1003     7830    2              CALL SETERR(%E$DA_NO_USERDIR);

   7830  4 000461   000027 236000 5                  LDQ     23
         4 000462   200015 756100                    STQ     WINDOWMAX+3,,AUTO
         4 000463   001323 701000 4                  TSX1    SETERR
         4 000464   000000 011000                    NOP     0

     1004     7831        /*E*    ERROR: DAM-E$DA_NO_USERDIR
     1005     7832                MESSAGE: No user directory in this dump file
     1006     7833                                                                           */
     1007     7834    2              END;

     1008     7835    1           CALL DAM$USECPU(RVBUFF.S_PNO);

   7835  4 000465   000000 236000 xsym               LDQ     DA_RVBUF$
         4 000466   000142 036003                    ADLQ    98,DU
         4 000467   200016 756100                    STQ     @CODE+1,,AUTO
         4 000470   200016 630500                    EPPR0   @CODE+1,,AUTO
         4 000471   000017 631400 xsym               EPPR1   B_VECTNIL+15
         4 000472   000000 701000 xent               TSX1    DAM$USECPU
         4 000473   000000 011000                    NOP     0

     1009     7836    1           CALL DAM$VPAGE(%(HJIT_BASE%/4096),0,0,%MONWSQ) ALTRET(ALT);

   7836  4 000474   000031 630400 5                  EPPR0   25
         4 000475   000022 631400 xsym               EPPR1   B_VECTNIL+18
         4 000476   000000 701000 xent               TSX1    DAM$VPAGE
         4 000477   001315 702000 4                  TSX2    ALT
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:173  

     1010     7837    1           LS$=PINCRW(B$IS$,DA_WINDOWBASE*1024);

   7837  4 000500   000000 236000 xsym               LDQ     DA_WINDOWBASE
         4 000501   000034 736000                    QLS     28
         4 000502   000000 036000 xsym               ADLQ    B$IS$
         4 000503   200007 756100                    STQ     LS$,,AUTO

     1011     7838    1           DA_SDASN.DESC(%TIGR#)=LS$->DESC(%(%BITBIN(%TIGRSID)-%BITBIN(%ISSID)));

   7838  4 000504   200007 470500                    LDP0    LS$,,AUTO
         4 000505   000000 100500                    MLR     fill='000'O
         4 000506   000246 000010                    ADSC9   166,,PR0                 cn=0,n=8
         4 000507   000025 000010 xsym               ADSC9   DA_SDASN+21              cn=0,n=8

     1012     7839    1           DA_SDASN.SYSID(%TIGR#)=0;

   7839  4 000510   000000 220003                    LDX0    0,DU
         4 000511   000027 440000 xsym               SXL0    DA_SDASN+23

     1013     7840    1           TIGRPGS=(DA_SDASN.DESC.BOUND(%TIGR#)/4096)+1;

   7840  4 000512   000025 236000 xsym               LDQ     DA_SDASN+21
         4 000513   000020 772000                    QRL     16
         4 000514   000014 772000                    QRL     12
         4 000515   000001 036007                    ADLQ    1,DL
         4 000516   200010 756100                    STQ     TIGRPGS,,AUTO

     1014     7841    1           SEGSIZE=TIGRPGS*4096;

   7841  4 000517   200010 235100                    LDA     TIGRPGS,,AUTO
         4 000520   000014 735000                    ALS     12
         4 000521   200011 755100                    STA     SEGSIZE,,AUTO

     1015     7842    2           IF SEGSIZE-1>DA_TIGRSEG.BOUND THEN DO;

   7842  4 000522   000001 135007                    SBLA    1,DL
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:174  
         4 000523   200016 755100                    STA     @CODE+1,,AUTO
         4 000524   000000 236000 xsym               LDQ     DA_TIGRSEG
         4 000525   000020 772000                    QRL     16
         4 000526   200016 116100                    CMPQ    @CODE+1,,AUTO
         4 000527   000542 605000 4                  TPL     s:7846

     1016     7843    2              FPT_GDS_TIGR.V.SEGSIZE#=(SEGSIZE-DA_TIGRSEG.BOUND)/4;

   7843  4 000530   200016 756100                    STQ     @CODE+1,,AUTO
         4 000531   200011 236100                    LDQ     SEGSIZE,,AUTO
         4 000532   200016 136100                    SBLQ    @CODE+1,,AUTO
         4 000533   000004 506007                    DIV     4,DL
         4 000534   000000 621006                    EAX1    0,QL
         4 000535   000242 441000 2                  SXL1    FPT_GDS_TIGR+4

     1017     7844    2              CALL M$GDS(FPT_GDS_TIGR) ALTRET(PMMEALT);

   7844  4 000536   000236 630400 2                  EPPR0   FPT_GDS_TIGR
         4 000537   430001 713400                    CLIMB   alt,gds
         4 000540   400400 401760                    pmme    nvectors=2
         4 000541   001311 702000 4                  TSX2    PMMEALT

     1018     7845    2              END;

     1019     7846    1           FPT_READ.BUF_=VECTOR(DA_TIGRSEG.P$->PAGE);

   7846  4 000542   000025 235000 5                  LDA     21
         4 000543   000001 236000 xsym               LDQ     DA_TIGRSEG+1
         4 000544   000216 757000 2                  STAQ    FPT_READ+4

     1020     7847    1           DFKEY.K.TYP=%R_MWSQ#;

   7847  4 000545   002000 236007                    LDQ     1024,DL
         4 000546   000210 552010 2                  STBQ    DFKEY,'10'O

     1021     7848    1           DFKEY.K.STYP=%R_MCPU#;

PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:175  
   7848  4 000547   000000 236003                    LDQ     0,DU
         4 000550   000210 552004 2                  STBQ    DFKEY,'04'O

     1022     7849    1           DFKEY.K.USR#=DA_CPU#;

   7849  4 000551   000000 236000 xsym               LDQ     DA_CPU#
         4 000552   000033 736000                    QLS     27
         4 000553   000211 552040 2                  STBQ    DFKEY+1,'40'O

     1023     7850    1           DFKEY.K.VP#=DA_SDASN.DESC.BASE(%TIGR#)/4096;

   7850  4 000554   000026 236000 xsym               LDQ     DA_SDASN+22
         4 000555   000014 772000                    QRL     12
         4 000556   000211 552034 2                  STBQ    DFKEY+1,'34'O

     1024     7851    1           J=0;

   7851  4 000557   200005 450100                    STZ     J,,AUTO

     1025     7852    2           DO I=0 TO TIGRPGS-1;

   7852  4 000560   200004 450100                    STZ     I,,AUTO
         4 000561   000576 710000 4                  TRA     s:7857+1

     1026     7853    2              CALL M$READ(FPT_READ) ALTRET(NXTTIGR);

   7853  4 000562   000212 630400 2                  EPPR0   FPT_READ
         4 000563   440000 713400                    CLIMB   alt,read
         4 000564   401400 401760                    pmme    nvectors=4
         4 000565   000567 702000 4                  TSX2    NXTTIGR

     1027     7854    2              J=J+1;

   7854  4 000566   200005 054100                    AOS     J,,AUTO

     1028     7855    2   NXTTIGR:   FPT_READ.BUF_.BUF$=PINCRW(FPT_READ.BUF_.BUF$,1024);

PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:176  
   7855  4 000567   000217 236000 2     NXTTIGR      LDQ     FPT_READ+5
         4 000570   002000 036003                    ADLQ    1024,DU
         4 000571   000217 756000 2                  STQ     FPT_READ+5

     1029     7856    2              DFKEY.K.VP#=DFKEY.K.VP#+1;

   7856  4 000572   000211 236000 2                  LDQ     DFKEY+1
         4 000573   000001 036007                    ADLQ    1,DL
         4 000574   000211 552034 2                  STBQ    DFKEY+1,'34'O

     1030     7857    2              END;

   7857  4 000575   200004 054100                    AOS     I,,AUTO
         4 000576   200004 236100                    LDQ     I,,AUTO
         4 000577   200010 116100                    CMPQ    TIGRPGS,,AUTO
         4 000600   000562 604000 4                  TMI     s:7853

     1031     7858    1           DA_SDASN.SID(%TIGR#)=DA_TIGRSEG.P.SID;

   7858  4 000601   000001 236000 xsym               LDQ     DA_TIGRSEG+1
         4 000602   000030 736000                    QLS     24
         4 000603   000027 752060 xsym               STCQ    DA_SDASN+23,'60'O

     1032     7859    2           IF J=0 THEN DO;

   7859  4 000604   200005 235100                    LDA     J,,AUTO
         4 000605   000626 601000 4                  TNZ     s:7869

     1033     7860    2              FPT_GDS_TIGR.V.SEGSIZE#=%(256*1024-1);

   7860  4 000606   777777 220003                    LDX0    -1,DU
         4 000607   000242 440000 2                  SXL0    FPT_GDS_TIGR+4

     1034     7861    2              CALL M$FDS(FPT_GDS_TIGR);

   7861  4 000610   000236 630400 2                  EPPR0   FPT_GDS_TIGR
         4 000611   030002 713400                    CLIMB   fds
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:177  
         4 000612   400400 401760                    pmme    nvectors=2

     1035     7862    2              DA_TIGRSEG='0'B;

   7862  4 000613   000000 450000 xsym               STZ     DA_TIGRSEG
         4 000614   000001 450000 xsym               STZ     DA_TIGRSEG+1

     1036     7863    2              B$USRT$=ADDR(NIL);

   7863  4 000615   000001 236000 xsym               LDQ     B_VECTNIL+1
         4 000616   000000 756000 xsym               STQ     B$USRT$

     1037     7864    2              DA_MUAIS=0;

   7864  4 000617   000000 450000 xsym               STZ     DA_MUAIS

     1038     7865    2              S$CU$=ADDR(NIL);

   7865  4 000620   000000 756000 xsym               STQ     S$CU$

     1039     7866    2              DA_MAPERR=B$TCB$->B$TCB.ALT$->B$ALT.ERR;

   7866  4 000621   000000 470400 xsym               LDP0    B$TCB$
         4 000622   000000 471500                    LDP1    0,,PR0
         4 000623   100102 236100                    LDQ     66,,PR1
         4 000624   000000 756000 xsym               STQ     DA_MAPERR

     1040     7867    2              END;

   7867  4 000625   000660 710000 4                  TRA     s:7875

     1041     7868    2           ELSE DO;

     1042     7869    2              FPT_GDS_TIGR.V.SEGSIZE#=(DA_TIGRSEG.BOUND+1-J*4096)/4;

   7869  4 000626   000000 236000 xsym               LDQ     DA_TIGRSEG
         4 000627   000020 772000                    QRL     16
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:178  
         4 000630   200016 756100                    STQ     @CODE+1,,AUTO
         4 000631   200005 336100                    LCQ     J,,AUTO
         4 000632   000014 736000                    QLS     12
         4 000633   200016 036100                    ADLQ    @CODE+1,,AUTO
         4 000634   000001 036007                    ADLQ    1,DL
         4 000635   000004 506007                    DIV     4,DL
         4 000636   000000 620006                    EAX0    0,QL
         4 000637   000242 440000 2                  SXL0    FPT_GDS_TIGR+4

     1043     7870    2              CALL M$FDS(FPT_GDS_TIGR) ALTRET(PMMEALT);

   7870  4 000640   000236 630400 2                  EPPR0   FPT_GDS_TIGR
         4 000641   430002 713400                    CLIMB   alt,fds
         4 000642   400400 401760                    pmme    nvectors=2
         4 000643   001311 702000 4                  TSX2    PMMEALT

     1044     7871    2              B$USRT$=RVBUFF.B$USRT$;

   7871  4 000644   000000 470400 xsym               LDP0    DA_RVBUF$
         4 000645   000154 236100                    LDQ     108,,PR0
         4 000646   000000 756000 xsym               STQ     B$USRT$

     1045     7872    2              ADDR(B$USRT$)->P.SID=DA_SDASN.SID(%TIGR#);

   7872  4 000647   000027 236000 xsym               LDQ     DA_SDASN+23
         4 000650   000030 772000                    QRL     24
         4 000651   000000 752003 xsym               STCQ    B$USRT$,'03'O

     1046     7873    2              S$CU$=ADDR(B$USRT$->B$USER(RVBUFF.CUN));

   7873  4 000652   000140 235100                    LDA     96,,PR0
         4 000653   000004 735000                    ALS     4
         4 000654   000044 733000                    LRS     36
         4 000655   000022 736000                    QLS     18
         4 000656   000000 036000 xsym               ADLQ    B$USRT$
         4 000657   000000 756000 xsym               STQ     S$CU$

PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:179  
     1047     7874    2              END;

     1048     7875    1           CALL M$GDDL(FPT_GDDL);

   7875  4 000660   000440 630400 2                  EPPR0   FPT_GDDL
         4 000661   030014 713400                    CLIMB   12300
         4 000662   400000 401760                    pmme    nvectors=1

     1049     7876    1           DA_WINDOWMAX=DA_WINDOWBASE+VLR_GDDL.AVAIL_PGS#-%MINPGS;

   7876  4 000663   000000 236000 xsym               LDQ     DA_WINDOWBASE
         4 000664   000444 036000 2                  ADLQ    VLR_GDDL+2
         4 000665   000024 136007                    SBLQ    20,DL
         4 000666   000000 756000 xsym               STQ     DA_WINDOWMAX

     1050     7877    1           WINDOWMAX=B$JIT.DDUL-B$JIT.DLL;

   7877  4 000667   000000 470400 xsym               LDP0    B$JIT$
         4 000670   000177 236100                    LDQ     127,,PR0
         4 000671   000022 772000                    QRL     18
         4 000672   200016 756100                    STQ     @CODE+1,,AUTO
         4 000673   000200 236100                    LDQ     128,,PR0
         4 000674   777777 376007                    ANQ     -1,DL
         4 000675   200016 136100                    SBLQ    @CODE+1,,AUTO
         4 000676   200012 756100                    STQ     WINDOWMAX,,AUTO

     1051     7878    2           IF DA_WINDOWMAX - 32 < DA_WINDOWBASE THEN DO;

   7878  4 000677   000000 236000 xsym               LDQ     DA_WINDOWMAX
         4 000700   000040 136007                    SBLQ    32,DL
         4 000701   000000 116000 xsym               CMPQ    DA_WINDOWBASE
         4 000702   000710 605000 4                  TPL     s:7885

     1052     7879    2              CALL SETERR(%E$DA_NEED_MORE_MEM) ALTRET(ALT);

   7879  4 000703   000036 236000 5                  LDQ     30
         4 000704   200015 756100                    STQ     WINDOWMAX+3,,AUTO
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:180  
         4 000705   001323 701000 4                  TSX1    SETERR
         4 000706   001315 702000 4                  TSX2    ALT

     1053     7880    2              END;

   7880  4 000707   000715 710000 4                  TRA     s:7886

     1054     7881        /*E*    ERROR:   DAM-E$DA_NEED_MORE_MEM
     1055     7882                MESSAGE: Insufficient memory available to look at dump file.
     1056     7883               MESSAGE1: You must increase your resource memory to look at a dump file.
     1057     7884        */
     1058     7885    1           ELSE IF DA_WINDOWMAX>WINDOWMAX THEN DA_WINDOWMAX=WINDOWMAX;

   7885  4 000710   000000 236000 xsym               LDQ     DA_WINDOWMAX
         4 000711   200012 116100                    CMPQ    WINDOWMAX,,AUTO
         4 000712   000715 604400 4                  TMOZ    s:7886

   7885  4 000713   200012 235100                    LDA     WINDOWMAX,,AUTO
         4 000714   000000 755000 xsym               STA     DA_WINDOWMAX

     1059     7886    1           DA_NXTWINDOW=0;

   7886  4 000715   000000 450000 xsym               STZ     DA_NXTWINDOW

     1060     7887    1           DA_NXTSPCL=0;

   7887  4 000716   000000 450000 xsym               STZ     DA_NXTSPCL

     1061     7888    1           DA_NUMSPCL=7;

   7888  4 000717   000007 235007                    LDA     7,DL
         4 000720   000000 755000 xsym               STA     DA_NUMSPCL

     1062     7889    1           DA_WSPTD$=ADDR(NIL);

   7889  4 000721   000001 236000 xsym               LDQ     B_VECTNIL+1
         4 000722   000000 756000 xsym               STQ     DA_WSPTD$
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:181  

     1063     7890    1           ADDR(DA_TIGR$)->P=BINBIT(BITBIN(DA_SDASN.SID(%TIGR#)),36);

   7890  4 000723   000027 236000 xsym               LDQ     DA_SDASN+23
         4 000724   000030 772000                    QRL     24
         4 000725   000000 756000 xsym               STQ     DA_TIGR$

     1064     7891    1           DA_PSR=ADDR(RVBUFF.SSFRAME)->B$SS.PSR;

   7891  4 000726   000000 470400 xsym               LDP0    DA_RVBUF$
         4 000727   000056 237100                    LDAQ    46,,PR0
         4 000730   000000 755000 xsym               STA     DA_PSR
         4 000731   000001 756000 xsym               STQ     DA_PSR+1

     1065     7892    1           DA_ASR=ADDR(RVBUFF.SSFRAME)->B$SS.ASR;

   7892  4 000732   000052 237100                    LDAQ    42,,PR0
         4 000733   000000 755000 xsym               STA     DA_ASR
         4 000734   000001 756000 xsym               STQ     DA_ASR+1

     1066     7893    1           DA_CURCG.CG$=RVBUFF.CURCG.CG$;

   7893  4 000735   000472 236100                    LDQ     314,,PR0
         4 000736   000000 756000 xsym               STQ     DA_CURCG

     1067     7894    1           DA_INITIALIZED='1'B;

   7894  4 000737   400000 236003                    LDQ     -131072,DU
         4 000740   000000 756000 xsym               STQ     DA_INITIALIZED

     1068     7895    1           RETURN;

   7895  4 000741   000000 702200 xent               TSX2  ! X66_ARET

     1069     7896        %EJECT;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:182  
     1070     7897    1   DAM$INIT: ENTRY ALTRET;

   7897  4 000742   000000 700200 xent  DAM$INIT     TSX0  ! X66_AUTO_1
         4 000743   000022 000001                    ZERO    18,1

     1071     7898    2           DO I=0 TO 255;

   7898  4 000744   200004 450100                    STZ     I,,AUTO

     1072     7899    2              DA_WINDOW(I)='000000777000'O;

   7899  4 000745   000000 236000 3                  LDQ     0
         4 000746   200004 720100                    LXL0    I,,AUTO
         4 000747   000000 756010 xsym               STQ     DA_WINDOW,X0

     1073     7900    2              END;

   7900  4 000750   200004 054100                    AOS     I,,AUTO
         4 000751   200004 235100                    LDA     I,,AUTO
         4 000752   000377 115007                    CMPA    255,DL
         4 000753   000745 604400 4                  TMOZ    s:7899

     1074     7901    1           DA_WINDOWBASE=B$JIT.DDLL+B$JIT.PCDD-B$JIT.DLL-%MSCPG1#;

   7901  4 000754   000000 470400 xsym               LDP0    B$JIT$
         4 000755   000203 236100                    LDQ     131,,PR0
         4 000756   777777 376007                    ANQ     -1,DL
         4 000757   200016 756100                    STQ     @CODE+1,,AUTO
         4 000760   000200 236100                    LDQ     128,,PR0
         4 000761   000022 772000                    QRL     18
         4 000762   200016 036100                    ADLQ    @CODE+1,,AUTO
         4 000763   200017 756100                    STQ     @CODE+2,,AUTO
         4 000764   000177 236100                    LDQ     127,,PR0
         4 000765   000022 772000                    QRL     18
         4 000766   200020 756100                    STQ     @CODE+3,,AUTO
         4 000767   200017 236100                    LDQ     @CODE+2,,AUTO
         4 000770   200020 136100                    SBLQ    @CODE+3,,AUTO
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:183  
         4 000771   000014 036007                    ADLQ    12,DL
         4 000772   000000 756000 xsym               STQ     DA_WINDOWBASE

     1075     7902    1           DA_MSCPG1=DA_WINDOWBASE+%MSCPG1#;

   7902  4 000773   000014 136007                    SBLQ    12,DL
         4 000774   000000 756000 xsym               STQ     DA_MSCPG1

     1076     7903    1           DA_MSCPG2=DA_WINDOWBASE+%MSCPG2#;

   7903  4 000775   000000 235000 xsym               LDA     DA_WINDOWBASE
         4 000776   000002 135007                    SBLA    2,DL
         4 000777   000000 755000 xsym               STA     DA_MSCPG2

     1077     7904    1           DA_MSCPG3=DA_WINDOWBASE+%MSCPG3#;

   7904  4 001000   000000 235000 xsym               LDA     DA_WINDOWBASE
         4 001001   000001 135007                    SBLA    1,DL
         4 001002   000000 755000 xsym               STA     DA_MSCPG3

     1078     7905    1           DA_MAPERR='0'B;

   7905  4 001003   000000 450000 xsym               STZ     DA_MAPERR
         4 001004   001007 710000 4                  TRA     s:7908

     1079     7906        %EJECT;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:184  
     1080     7907    1   DAM$RUNNING: ENTRY ALTRET;

   7907  4 001005   000000 700200 xent  DAM$RUNNING  TSX0  ! X66_AUTO_1
         4 001006   000022 000001                    ZERO    18,1

     1081     7908    1           IF DA_INITIALIZED AND NOT DA_DUMPFILE THEN RETURN;

   7908  4 001007   000000 234000 xsym               SZN     DA_INITIALIZED
         4 001010   001014 605000 4                  TPL     s:7909
         4 001011   000000 234000 xsym               SZN     DA_DUMPFILE
         4 001012   001014 604000 4                  TMI     s:7909

   7908  4 001013   000000 702200 xent               TSX2  ! X66_ARET

     1082     7909    1           DA_INITIALIZED='0'B;

   7909  4 001014   000000 450000 xsym               STZ     DA_INITIALIZED

     1083     7910    1           IF DCBADDR(DCBNUM(M$DUMPFILE))->F$DCB.FCD# THEN

   7910  4 001015   000000 236007 xsym               LDQ     M$DUMPFILE,DL
         4 001016   000015 470400 5                  LDP0    13
         4 001017   000000 471500                    LDP1    0,,PR0
         4 001020   100000 473506                    LDP3    0,QL,PR1
         4 001021   300031 236100                    LDQ     25,,PR3
         4 001022   020000 316007                    CANQ    8192,DL
         4 001023   001031 600000 4                  TZE     s:7912

     1084     7911    2              CALL M$CLOSE(FPT_CLOSE) WHENALTRETURN DO; END;

   7911  4 001024   000114 630400 2                  EPPR0   FPT_CLOSE
         4 001025   450001 713400                    CLIMB   alt,close
         4 001026   406000 401760                    pmme    nvectors=13
         4 001027   001031 702000 4                  TSX2    s:7912
         4 001030   001031 710000 4                  TRA     s:7912

     1085     7912    2           DO I=0 TO 7;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:185  

   7912  4 001031   200004 450100                    STZ     I,,AUTO

     1086     7913    2              DA_SDASN.DESC(I)='0'B;

   7913  4 001032   200004 236100                    LDQ     I,,AUTO
         4 001033   000003 402007                    MPY     3,DL
         4 001034   000000 450006 xsym               STZ     DA_SDASN,QL
         4 001035   000001 450006 xsym               STZ     DA_SDASN+1,QL

     1087     7914    2              DA_SDASN.CVM(I)='0'B;

   7914  4 001036   000000 620006                    EAX0    0,QL
         4 001037   000020 236000 5                  LDQ     16
         4 001040   000002 356010 xsym               ANSQ    DA_SDASN+2,X0

     1088     7915    2              DA_SDASN.SYSID(I)=0;

   7915  4 001041   000000 221003                    LDX1    0,DU
         4 001042   000002 441010 xsym               SXL1    DA_SDASN+2,X0

     1089     7916    2              END;

   7916  4 001043   200004 054100                    AOS     I,,AUTO
         4 001044   200004 235100                    LDA     I,,AUTO
         4 001045   000007 115007                    CMPA    7,DL
         4 001046   001032 604400 4                  TMOZ    s:7913

     1090     7917    2           IF DA_MAPSEG~='0'B THEN DO;

   7917  4 001047   000000 106400                    CMPC    fill='000'O
         4 001050   000000 000010 xsym               ADSC9   DA_MAPSEG                cn=0,n=8
         4 001051   000002 000002 xsym               ADSC9   B_VECTNIL+2              cn=0,n=2
         4 001052   001067 600000 4                  TZE     s:7922

     1091     7918    2              FPT_GDS_MAP.V.SEGSIZE#=(DA_MAPSEG.BOUND+1)/4;

PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:186  
   7918  4 001053   000000 236000 xsym               LDQ     DA_MAPSEG
         4 001054   000020 772000                    QRL     16
         4 001055   000001 036007                    ADLQ    1,DL
         4 001056   000002 772000                    QRL     2
         4 001057   000000 620006                    EAX0    0,QL
         4 001060   000234 440000 2                  SXL0    FPT_GDS_MAP+4

     1092     7919    2              CALL M$FDS(FPT_GDS_MAP) ALTRET(PMMEALT);

   7919  4 001061   000230 630400 2                  EPPR0   FPT_GDS_MAP
         4 001062   430002 713400                    CLIMB   alt,fds
         4 001063   400400 401760                    pmme    nvectors=2
         4 001064   001311 702000 4                  TSX2    PMMEALT

     1093     7920    2              DA_MAPSEG='0'B;

   7920  4 001065   000000 450000 xsym               STZ     DA_MAPSEG
         4 001066   000001 450000 xsym               STZ     DA_MAPSEG+1

     1094     7921    2              END;

     1095     7922    2           IF DA_TIGRSEG~='0'B THEN DO;

   7922  4 001067   000000 106400                    CMPC    fill='000'O
         4 001070   000000 000010 xsym               ADSC9   DA_TIGRSEG               cn=0,n=8
         4 001071   000002 000002 xsym               ADSC9   B_VECTNIL+2              cn=0,n=2
         4 001072   001107 600000 4                  TZE     s:7927

     1096     7923    2              FPT_GDS_TIGR.V.SEGSIZE#=(DA_TIGRSEG.BOUND+1)/4;

   7923  4 001073   000000 236000 xsym               LDQ     DA_TIGRSEG
         4 001074   000020 772000                    QRL     16
         4 001075   000001 036007                    ADLQ    1,DL
         4 001076   000002 772000                    QRL     2
         4 001077   000000 620006                    EAX0    0,QL
         4 001100   000242 440000 2                  SXL0    FPT_GDS_TIGR+4

PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:187  
     1097     7924    2              CALL M$FDS(FPT_GDS_TIGR) ALTRET(PMMEALT);

   7924  4 001101   000236 630400 2                  EPPR0   FPT_GDS_TIGR
         4 001102   430002 713400                    CLIMB   alt,fds
         4 001103   400400 401760                    pmme    nvectors=2
         4 001104   001311 702000 4                  TSX2    PMMEALT

     1098     7925    2              DA_TIGRSEG='0'B;

   7925  4 001105   000000 450000 xsym               STZ     DA_TIGRSEG
         4 001106   000001 450000 xsym               STZ     DA_TIGRSEG+1

     1099     7926    2              END;

     1100     7927    1           CALL M$MONINFO(FPT_MONINFO) ALTRET(PMMEALT);

   7927  4 001107   000270 630400 2                  EPPR0   FPT_MONINFO
         4 001110   420023 713400                    CLIMB   alt,+8211
         4 001111   402400 401760                    pmme    nvectors=6
         4 001112   001311 702000 4                  TSX2    PMMEALT

     1101     7928    1           DA_MUAIS=MNINFO.MUAIS#;

   7928  4 001113   000313 235000 2                  LDA     MNINFO+7
         4 001114   000000 755000 xsym               STA     DA_MUAIS

     1102     7929    1           DA_CPU = VLR_SITEINFO.CPU_TYPE#;

   7929  4 001115   000431 236000 2                  LDQ     VLR_SITEINFO+55
         4 001116   000011 772000                    QRL     9
         4 001117   000777 376007                    ANQ     511,DL
         4 001120   000000 756000 xsym               STQ     DA_CPU

     1103     7930    1           B$USRT$=MNPTRS.B$USRT$;

   7930  4 001121   000327 236000 2                  LDQ     MNPTRS+3
         4 001122   000000 756000 xsym               STQ     B$USRT$
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:188  

     1104     7931    1           ADDR(B$USRT$)->P.SID=%SPCL8SID;

   7931  4 001123   006031 236007                    LDQ     3097,DL
         4 001124   000000 752003 xsym               STCQ    B$USRT$,'03'O

     1105     7932    1           S$CU$=ADDR(B$USRT$->B$USER(B$JIT.USER));

   7932  4 001125   000000 470400 xsym               LDP0    B$JIT$
         4 001126   000000 236100                    LDQ     0,,PR0
         4 001127   000016 772000                    QRL     14
         4 001130   017760 376007                    ANQ     8176,DL
         4 001131   000022 736000                    QLS     18
         4 001132   000000 036000 xsym               ADLQ    B$USRT$
         4 001133   000000 756000 xsym               STQ     S$CU$

     1106     7933    1           DA_WINDOWMAX=B$JIT.DDUL-B$JIT.DLL;

   7933  4 001134   000177 236100                    LDQ     127,,PR0
         4 001135   000022 772000                    QRL     18
         4 001136   200016 756100                    STQ     @CODE+1,,AUTO
         4 001137   000200 236100                    LDQ     128,,PR0
         4 001140   777777 376007                    ANQ     -1,DL
         4 001141   200016 136100                    SBLQ    @CODE+1,,AUTO
         4 001142   000000 756000 xsym               STQ     DA_WINDOWMAX

     1107     7934    2           IF DA_DUMPFILE THEN DO I=DA_MSCPG1 TO 255;

   7934  4 001143   000000 234000 xsym               SZN     DA_DUMPFILE
         4 001144   001170 605000 4                  TPL     s:7941

   7934  4 001145   000000 235000 xsym               LDA     DA_MSCPG1
         4 001146   200004 755100                    STA     I,,AUTO
         4 001147   001165 710000 4                  TRA     s:7940+1

     1108     7935    3              IF DA_WINDOW(I)~='000000777000'O THEN DO;

PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:189  
   7935  4 001150   200004 720100                    LXL0    I,,AUTO
         4 001151   000000 236010 xsym               LDQ     DA_WINDOW,X0
         4 001152   000000 116000 3                  CMPQ    0
         4 001153   001164 600000 4                  TZE     s:7940

     1109     7936    3                 FPT_FVP.V.PNO#=I;

   7936  4 001154   000246 440000 2                  SXL0    FPT_FVP+2

     1110     7937    3                 CALL M$FVP(FPT_FVP) ALTRET(NXTPG);

   7937  4 001155   000244 630400 2                  EPPR0   FPT_FVP
         4 001156   430006 713400                    CLIMB   alt,+12294
         4 001157   400000 401760                    pmme    nvectors=1
         4 001160   001161 702000 4                  TSX2    NXTPG

     1111     7938    3   NXTPG:        DA_WINDOW(I)='000000777000'O;

   7938  4 001161   000000 236000 3     NXTPG        LDQ     0
         4 001162   200004 720100                    LXL0    I,,AUTO
         4 001163   000000 756010 xsym               STQ     DA_WINDOW,X0

     1112     7939    3                 END;

     1113     7940    2              END;

   7940  4 001164   200004 054100                    AOS     I,,AUTO
         4 001165   200004 235100                    LDA     I,,AUTO
         4 001166   000377 115007                    CMPA    255,DL
         4 001167   001150 604400 4                  TMOZ    s:7935

     1114     7941    1           DA_DUMPFILE='0'B;

   7941  4 001170   000000 450000 xsym               STZ     DA_DUMPFILE

     1115     7942    1           DA_NXTWINDOW=0;

PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:190  
   7942  4 001171   000000 450000 xsym               STZ     DA_NXTWINDOW

     1116     7943    1           DA_NXTSPCL=0;

   7943  4 001172   000000 450000 xsym               STZ     DA_NXTSPCL

     1117     7944    1           DA_RVBUF$=ADDR(NIL);

   7944  4 001173   000001 236000 xsym               LDQ     B_VECTNIL+1
         4 001174   000000 756000 xsym               STQ     DA_RVBUF$

     1118     7945    1           DA_USERDIR$=ADDR(NIL);

   7945  4 001175   000000 756000 xsym               STQ     DA_USERDIR$

     1119     7946    1           DA_NUMSPCL=6;

   7946  4 001176   000006 235007                    LDA     6,DL
         4 001177   000000 755000 xsym               STA     DA_NUMSPCL

     1120     7947    1           IF DA_CPU=%DPS90 OR DA_CPU=%DPS90XA THEN DA_NUMSPCL=5;

   7947  4 001200   000000 235000 xsym               LDA     DA_CPU
         4 001201   000004 115007                    CMPA    4,DL
         4 001202   001205 600000 4                  TZE     s:7947+5
         4 001203   000005 115007                    CMPA    5,DL
         4 001204   001207 601000 4                  TNZ     s:7948

   7947  4 001205   000005 235007                    LDA     5,DL
         4 001206   000000 755000 xsym               STA     DA_NUMSPCL

     1121     7948    1           FPT_SAD.V.USERSID#=DA_SDASN.SID(%MONIS#);

   7948  4 001207   000024 236000 xsym               LDQ     DA_SDASN+20
         4 001210   000006 772000                    QRL     6
         4 001211   000260 752030 2                  STCQ    FPT_SAD+2,'30'O

PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:191  
     1122     7949    1           FPT_SAD.V.MONSID#=%ISSID;

   7949  4 001212   006000 236007                    LDQ     3072,DL
         4 001213   000260 752003 2                  STCQ    FPT_SAD+2,'03'O

     1123     7950    1           CALL M$SAD(FPT_SAD) ALTRET(PMMEALT);

   7950  4 001214   000256 630400 2                  EPPR0   FPT_SAD
         4 001215   430015 713400                    CLIMB   alt,+12301
         4 001216   400000 401760                    pmme    nvectors=1
         4 001217   001311 702000 4                  TSX2    PMMEALT

     1124     7951    1           DA_SDASN.SID(%TIGR#)=%SPCL8SID;

   7951  4 001220   603100 236003                    LDQ     -63936,DU
         4 001221   000027 752060 xsym               STCQ    DA_SDASN+23,'60'O

     1125     7952    1           FPT_SAD.V.USERSID#=DA_SDASN.SID(%TIGR#);

   7952  4 001222   000027 236000 xsym               LDQ     DA_SDASN+23
         4 001223   000006 772000                    QRL     6
         4 001224   000260 752030 2                  STCQ    FPT_SAD+2,'30'O

     1126     7953    1           FPT_SAD.V.MONSID#=%TIGRSID;

   7953  4 001225   006123 236007                    LDQ     3155,DL
         4 001226   000260 752003 2                  STCQ    FPT_SAD+2,'03'O

     1127     7954    1           CALL M$SAD(FPT_SAD) ALTRET(PMMEALT);

   7954  4 001227   000256 630400 2                  EPPR0   FPT_SAD
         4 001230   430015 713400                    CLIMB   alt,+12301
         4 001231   400000 401760                    pmme    nvectors=1
         4 001232   001311 702000 4                  TSX2    PMMEALT

     1128     7955    1           ADDR(DA_WSPTD$)->P=BINBIT(BITBIN(DA_SDASN.SID(%MONIS#)),36);

PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:192  
   7955  4 001233   000024 236000 xsym               LDQ     DA_SDASN+20
         4 001234   000030 772000                    QRL     24
         4 001235   000000 756000 xsym               STQ     DA_WSPTD$

     1129     7956    1           DA_MONPTP=S$WSPTD.BLKNO(%MONWSQ);

   7956  4 001236   000000 470400 xsym               LDP0    DA_WSPTD$
         4 001237   000001 236100                    LDQ     1,,PR0
         4 001240   000022 772000                    QRL     18
         4 001241   000000 756000 xsym               STQ     DA_MONPTP

     1130     7957    1           CALL DAM$USECPU(0) ALTRET(ALT);

   7957  4 001242   000032 630400 5                  EPPR0   26
         4 001243   000017 631400 xsym               EPPR1   B_VECTNIL+15
         4 001244   000000 701000 xent               TSX1    DAM$USECPU
         4 001245   001315 702000 4                  TSX2    ALT

     1131     7958    1           CALL DAM$VPAGE(%(HJIT_BASE%/4096),0,0,%MONWSQ) ALTRET(ALT);

   7958  4 001246   000031 630400 5                  EPPR0   25
         4 001247   000022 631400 xsym               EPPR1   B_VECTNIL+18
         4 001250   000000 701000 xent               TSX1    DAM$VPAGE
         4 001251   001315 702000 4                  TSX2    ALT

     1132     7959    1           LS$=PINCRW(B$IS$,DA_WINDOWBASE*1024);

   7959  4 001252   000000 236000 xsym               LDQ     DA_WINDOWBASE
         4 001253   000034 736000                    QLS     28
         4 001254   000000 036000 xsym               ADLQ    B$IS$
         4 001255   200007 756100                    STQ     LS$,,AUTO

     1133     7960    1           DA_SDASN.DESC(%MONIS#)=LS$->DESC(0);

   7960  4 001256   200007 470500                    LDP0    LS$,,AUTO
         4 001257   000000 100500                    MLR     fill='000'O
         4 001260   000000 000010                    ADSC9   0,,PR0                   cn=0,n=8
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:193  
         4 001261   000022 000010 xsym               ADSC9   DA_SDASN+18              cn=0,n=8

     1134     7961    1           DA_SDASN.SYSID(%MONIS#)=0;

   7961  4 001262   000000 220003                    LDX0    0,DU
         4 001263   000024 440000 xsym               SXL0    DA_SDASN+20

     1135     7962    1           DA_SDASN.DESC(%TIGR#)=LS$->DESC(%(%BITBIN(%TIGRSID)-%BITBIN(%ISSID)));

   7962  4 001264   000000 100500                    MLR     fill='000'O
         4 001265   000246 000010                    ADSC9   166,,PR0                 cn=0,n=8
         4 001266   000025 000010 xsym               ADSC9   DA_SDASN+21              cn=0,n=8

     1136     7963    1           DA_SDASN.SYSID(%TIGR#)=0;

   7963  4 001267   000027 440000 xsym               SXL0    DA_SDASN+23

     1137     7964    1           ADDR(DA_TIGR$)->P=BINBIT(BITBIN(DA_SDASN.SID(%TIGR#)),36);

   7964  4 001270   000027 236000 xsym               LDQ     DA_SDASN+23
         4 001271   000030 772000                    QRL     24
         4 001272   000000 756000 xsym               STQ     DA_TIGR$

     1138     7965                                  /* INITIALIZE ASR AND PSR TO SOMETHING
     1139     7966                                     ENTIRELY UNREASONABLE                 */
     1140     7967    1           DA_PSR=B$TCB$->B$TCB.ALT$->B$SS.ASR;

   7967  4 001273   000000 471400 xsym               LDP1    B$TCB$
         4 001274   100000 473500                    LDP3    0,,PR1
         4 001275   300012 237100                    LDAQ    10,,PR3
         4 001276   000000 755000 xsym               STA     DA_PSR
         4 001277   000001 756000 xsym               STQ     DA_PSR+1

     1141     7968    1           DA_ASR=B$TCB$->B$TCB.ALT$->B$SS.ASR;

   7968  4 001300   100000 473500                    LDP3    0,,PR1
         4 001301   300012 237100                    LDAQ    10,,PR3
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:194  
         4 001302   000000 755000 xsym               STA     DA_ASR
         4 001303   000001 756000 xsym               STQ     DA_ASR+1

     1142     7969    1           DA_CURCG.CG$=ADDR(NIL);

   7969  4 001304   000001 236000 xsym               LDQ     B_VECTNIL+1
         4 001305   000000 756000 xsym               STQ     DA_CURCG

     1143     7970    1           DA_INITIALIZED='1'B;

   7970  4 001306   400000 236003                    LDQ     -131072,DU
         4 001307   000000 756000 xsym               STQ     DA_INITIALIZED

     1144     7971    1           RETURN;

   7971  4 001310   000000 702200 xent               TSX2  ! X66_ARET

   7970  4 001311                       PMMEALT      null
     1145     7972    1   PMMEALT: ;
     1146     7973    1           DA_MAPERR=B$TCB$->B$TCB.ALT$->B$ALT.ERR;

   7973  4 001311   000000 470400 xsym               LDP0    B$TCB$
         4 001312   000000 471500                    LDP1    0,,PR0
         4 001313   100102 236100                    LDQ     66,,PR1
         4 001314   000000 756000 xsym               STQ     DA_MAPERR

     1147     7974    1   ALT:    ALTRETURN;

   7974  4 001315   000000 702200 xent  ALT          TSX2  ! X66_AALT

     1148     7975        /**/
     1149     7976        %EJECT;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:195  
     1150     7977        /**/
     1151     7978    1   DAM$SELECT: ENTRY(FID) ALTRET;

   7978  4 001316   000000 700200 xent  DAM$SELECT   TSX0  ! X66_AUTO_1
         4 001317   000022 000001                    ZERO    18,1

     1152     7979        /**/
     1153     7980    1           DA_NODEIDX=HOSTNODE;

   7980  4 001320   000446 235000 2                  LDA     HOSTNODE
         4 001321   000000 755000 xsym               STA     DA_NODEIDX

     1154     7981    1           RETURN;

   7981  4 001322   000000 702200 xent               TSX2  ! X66_ARET

     1155     7982        /**/
     1156     7983        /**/
     1157     7984        /**/
     1158     7985        %EJECT;
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:196  
     1159     7986    1   SETERR: PROC(CODE) ALTRET;

   7986  4 001323   200014 741300       SETERR       STX1  ! WINDOWMAX+2,,AUTO

     1160     7987    2   DCL CODE SBIN;
     1161     7988    2           DA_MAPERR='040115000000'O;

   7988  4 001324   000002 236000 3                  LDQ     2
         4 001325   000000 756000 xsym               STQ     DA_MAPERR

     1162     7989    2           DA_MAPERR.CODE=CODE;

   7989  4 001326   200015 470500                    LDP0    @CODE,,AUTO
         4 001327   000000 236100                    LDQ     0,,PR0
         4 001330   000003 736000                    QLS     3
         4 001331   000000 676000 xsym               ERQ     DA_MAPERR
         4 001332   377770 376007                    ANQ     131064,DL
         4 001333   000000 656000 xsym               ERSQ    DA_MAPERR

     1163     7990    2           ALTRETURN;

   7990  4 001334   000000 702211                    TSX2  ! 0,X1
     1164     7991    2   END SETERR;
     1165     7992    1   END DAM$DUMPFILE;
     1166     7993        %EOD;

PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:197  
--  Include file information  --

   B$SS.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   B$USER.:E05TOU  cannot be made into a system file and is referenced.
   IR_DATA_M.:E05TOU  is referenced.
   CP_6_SUBS.:E05TOU  is referenced.
   NI$TABLES.:E05TOU  is referenced.
   B_ERRORS_C.:E05TOU  is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   B_MLSMAC_C.:E05TOU  is referenced.
   B_ULSMAC_C.:E05TOU  is referenced.
   B_LSDATA_C.:E05TOU  cannot be made into a system file and is referenced.
   M_INFO_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   DA_TEXTC_C.:E05TOU  is referenced.
   DA_PERR_C.:E05TOU  is referenced.
   DA_ANLZ_R.:E05TOU  cannot be made into a system file and is referenced.
   DA_MAP_R.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure DAM$DUMPFILE.
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:198  

 **** Variables and constants ****

  ****  Section 002  Data  DAM$DUMPFILE

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

   210-0-0/d STRC(72)    r     1 DFKEY                    114-0-0/d STRC(1080)  r     1 FPT_CLOSE
   202-0-0/d STRC(216)   r     1 FPT_CVM                  152-0-0/d STRC(864)   r     1 FPT_FID
   244-0-0/d STRC(144)   r     1 FPT_FVP                  440-0-0/d STRC(72)    r     1 FPT_GDDL
   230-0-0/d STRC(216)   r     1 FPT_GDS_MAP              236-0-0/d STRC(216)   r     1 FPT_GDS_TIGR
   270-0-0/d STRC(432)   r     1 FPT_MONINFO                0-0-0/d STRC(2088)  r     1 FPT_OPEN
   212-0-0/d STRC(504)   r     1 FPT_READ                 256-0-0/d STRC(144)   r     1 FPT_SAD
   250-0-0/d STRC(216)   r     1 FPT_STD                  446-0-0/w UBIN        r     1 HOSTNODE
   304-0-0/d STRC(540)   r     1 MNINFO                   324-0-0/d STRC(468)   r     1 MNPTRS
   102-0-0/c STRC(72)    r     1 VLP_ACCT                  72-0-0/c STRC(288)   r     1 VLP_NAME
   110-0-0/c STRC(72)    r     1 VLP_PASS                 104-0-0/d STRC(90)    r     1 VLP_SN
   112-0-0/c STRC(72)    r     1 VLP_WSN                  442-0-0/d STRC(108)   r     1 VLR_GDDL
   342-0-0/d STRC(2232)  r     1 VLR_SITEINFO             262-0-0/d STRC(216)   r     1 WAIT4DUMP

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    15-0-0/w PTR         r     1 @CODE                      3-0-0/w PTR         r     1 @FID
    *0-0-0/w SBIN        r     1 CODE                       6-0-0/w PTR         r     1 DS$
    *0-0-0/c ASTR(9)     r     1 FID                        4-0-0/w SBIN        r     1 I
     5-0-0/w SBIN        r     1 J                          7-0-0/w PTR         r     1 LS$
    11-0-0/w SBIN        r     1 SEGSIZE                   10-0-0/w SBIN        r     1 TIGRPGS
    12-0-0/w SBIN        r     1 WINDOWMAX

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:199  
     0-0-0/w PTR         r     1 B$IS$                      0-0-0/w PTR         r     1 B$JIT$
     0-0-0/w PTR         r     1 B$TCB$                     0-0-0/w PTR         r     1 B$USRT$
     0-0-0/w STRC(72)    r     1 DA_ASR                     0-0-0/w SBIN        r     1 DA_CPU
     0-0-0/w SBIN        r     1 DA_CPU#                    0-0-0/w STRC        r     1 DA_CURCG
     0-0-0/w BIT         r     1 DA_DUMPFILE                0-0-0/w BIT         r     1 DA_INITIALIZED
     0-0-0/w STRC        r     1 DA_MAPERR                  0-0-0/w STRC(72)    r     1 DA_MAPSEG
     0-0-0/w SBIN        r     1 DA_MONPTP                  0-0-0/w SBIN        r     1 DA_MSCPG1
     0-0-0/w SBIN        r     1 DA_MSCPG2                  0-0-0/w SBIN        r     1 DA_MSCPG3
     0-0-0/w SBIN        r     1 DA_MUAIS                   0-0-0/w PTR         r     1 DA_NODEDIR$
     0-0-0/w SBIN        r     1 DA_NODEIDX                 0-0-0/w SBIN        r     1 DA_NUMSPCL
     0-0-0/w SBIN        r     1 DA_NXTSPCL                 0-0-0/w SBIN        r     1 DA_NXTWINDOW
     0-0-0/w STRC(72)    r     1 DA_PSR                     0-0-0/w PTR         r     1 DA_RVBUF$
     0-0-0/w STRC(108)   r     1 DA_SDASN(0:7)
     0-0-0/w BIT         r     1 DA_SYSTAC2                 0-0-0/w PTR         r     1 DA_TIGR$
     0-0-0/w STRC(72)    r     1 DA_TIGRSEG                 0-0-0/d REMB        r     1 DA_TRTN
     0-0-0/w PTR         r     1 DA_USERDIR$
     0-0-0/b STRC        r     1 DA_WINDOW(0:255)
     0-0-0/w SBIN        r     1 DA_WINDOWBASE              0-0-0/w SBIN        r     1 DA_WINDOWMAX
     0-0-0/w PTR         r     1 DA_WSPTD$                  0-0-0/w PTR         r     1 S$CU$

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC(2448)  r     1 B$ALT                      0-0-0/d STRC(8856)  r     1 B$JIT
     0-0-0/d STRC(2304)  r     1 B$SS                       0-0-0/w STRC(144)   r     1 B$TCB
     0-0-0/w STRC(576)   r     1 B$USER(0:0)                0-0-0/w BIT (72)    r     1 DESC(0:0)
     0-0-0/d ASTR(3528)  r     1 F$DCB                      0-0-0N  NULL        r     1 M$DUMPFILE
     0-0-0/w STRC(1224)  r     1 NODEDIR                    0-0-0/w STRC        r     1 P
     0-0-0/c CHAR(4096)  r     1 PAGE                       0-0-0/d STRC(36864) r     1 RVBUFF
     0-0-0/w STRC        r     1 S$WSPTD(0:0)


   Procedure DAM$DUMPFILE requires 733 words for executable code.
   Procedure DAM$DUMPFILE requires 18 words of local(AUTO) storage.
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:200  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:201  
          MINI XREF LISTING

ALT
      7974**LABEL    7734--CALLALT  7836--CALLALT  7879--CALLALT  7957--CALLALT  7958--CALLALT
B$ALT.CODE
      7359**DCL      7359--REDEF    7360--REDEF    7360--REDEF
B$ALT.ERR
      7360**DCL      7866>>ASSIGN   7973>>ASSIGN
B$ALT.ERR.ERR#
      7361**DCL      7361--REDEF    7743>>IF       7758>>IF
B$ALT.EVID
      7360**DCL      7360--REDEF    7360--REDEF
B$DO.ECCINFO
      6490**DCL      6491--REDEF
B$IS$
      7381**DCL      7837>>ASSIGN   7959>>ASSIGN
B$JIT.CPFLAGS1.SLEAZE
      6667**DCL      6667--REDEF
B$JIT.DDLL
      6731**DCL      7901>>ASSIGN
B$JIT.DDUL
      6731**DCL      7877>>ASSIGN   7933>>ASSIGN
B$JIT.DLL
      6731**DCL      7877>>ASSIGN   7901>>ASSIGN   7933>>ASSIGN
B$JIT.ERR.MID
      6574**DCL      6574--REDEF
B$JIT.JRESPEAK
      6735**DCL      6736--REDEF
B$JIT.ORIGINATOR_PORT.FROM_CR
      6844**DCL      6844--REDEF    6845--REDEF
B$JIT.PCDD
      6733**DCL      7901>>ASSIGN
B$JIT.PNR
      6748**DCL      6748--REDEF
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:202  
B$JIT.TSLINE
      6842**DCL      6843--REDEF
B$JIT.USER
      6573**DCL      7932>>ASSIGN
B$JIT$
      7691**DCL      6568--IMP-PTR  7877>>ASSIGN   7877>>ASSIGN   7901>>ASSIGN   7901>>ASSIGN   7901>>ASSIGN
      7932>>ASSIGN   7933>>ASSIGN   7933>>ASSIGN
B$SS.ASR
      6909**DCL      7892>>ASSIGN   7967>>ASSIGN   7968>>ASSIGN
B$SS.PSR
      6921**DCL      7891>>ASSIGN
B$SS.RVA
      6901**DCL      6902--REDEF
B$TCB.ALT$
      7355**DCL      7743>>IF       7758>>IF       7866>>ASSIGN   7967>>ASSIGN   7968>>ASSIGN   7973>>ASSIGN
B$TCB$
      7692**DCL      7743>>IF       7758>>IF       7866>>ASSIGN   7967>>ASSIGN   7968>>ASSIGN   7973>>ASSIGN
B$U.MISC
      6469**DCL      6470--REDEF
B$USER
      6514**DCL      7873--ASSIGN   7932--ASSIGN
B$USER.MISC
      6545**DCL      6546--REDEF
B$USRT$
      6557**DCL      7863<<ASSIGN   7871<<ASSIGN   7872--ASSIGN   7873>>ASSIGN   7930<<ASSIGN   7931--ASSIGN
      7932>>ASSIGN
BADCVM
      7780**LABEL    7774--CALLALT  7778--CALLALT
CODE IN PROCEDURE SETERR
      7987**DCL      7986--PROC     7989>>ASSIGN
DAA$ERRMSG
        18**DCL-ENT  7750--IF       7751--CALL
DAM$USECPU
        17**DCL-ENT  7835--CALL     7957--CALL
DAM$VPAGE
        16**DCL-ENT  7836--CALL     7958--CALL
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:203  
DA_ASR
        60**DCL      7892<<ASSIGN   7968<<ASSIGN
DA_CPU
        46**DCL      7929<<ASSIGN   7947>>IF       7947>>IF
DA_CPU#
        48**DCL      7849>>ASSIGN
DA_CURCG.CG$
        61**DCL      7893<<ASSIGN   7969<<ASSIGN
DA_DUMPFILE
        47**DCL      7772>>IF       7783<<ASSIGN   7908>>IF       7934>>IF       7941<<ASSIGN
DA_INITIALIZED
        47**DCL      7739<<ASSIGN   7894<<ASSIGN   7908>>IF       7909<<ASSIGN   7970<<ASSIGN
DA_MAPERR
        56**DCL      7866<<ASSIGN   7905<<ASSIGN   7973<<ASSIGN   7988<<ASSIGN
DA_MAPERR.CODE
        56**DCL      7989<<ASSIGN
DA_MAPSEG
        57**DCL      7453--DCLINIT  7917>>IF       7920<<ASSIGN
DA_MAPSEG.BOUND
        57**DCL      7784>>IF       7785>>ASSIGN   7918>>ASSIGN
DA_MAPSEG.P
        57**DCL        58--REDEF
DA_MAPSEG.P$
        58**DCL      7788>>ASSIGN
DA_MONPTP
        49**DCL      7956<<ASSIGN
DA_MSCPG1
        50**DCL      7770>>DOINDEX  7902<<ASSIGN   7934>>DOINDEX
DA_MSCPG2
        52**DCL      7903<<ASSIGN
DA_MSCPG3
        54**DCL      7904<<ASSIGN
DA_MUAIS
        46**DCL      7826<<ASSIGN   7829<<ASSIGN   7864<<ASSIGN   7928<<ASSIGN
DA_NODEDIR$
        49**DCL      7641--IMP-PTR  7798<<ASSIGN   7801>>DOINDEX  7802>>IF       7809>>DOWHILE  7809>>DOWHILE
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:204  
DA_NODEIDX
        48**DCL      7803<<ASSIGN   7809>>DOWHILE  7809>>DOWHILE  7811<<ASSIGN   7811>>ASSIGN   7813>>ASSIGN
      7980<<ASSIGN
DA_NUMSPCL
        56**DCL      7888<<ASSIGN   7946<<ASSIGN   7947<<ASSIGN
DA_NXTSPCL
        56**DCL      7887<<ASSIGN   7943<<ASSIGN
DA_NXTWINDOW
        47**DCL      7886<<ASSIGN   7942<<ASSIGN
DA_PSR
        59**DCL      7891<<ASSIGN   7967<<ASSIGN
DA_RVBUF$
        49**DCL      7647--IMP-PTR  7820<<ASSIGN   7826>>ASSIGN   7835>>CALL     7871>>ASSIGN   7873>>ASSIGN
      7891>>ASSIGN   7892>>ASSIGN   7893>>ASSIGN   7944<<ASSIGN
DA_SDASN.CVM
        43**DCL      7767<<ASSIGN   7914<<ASSIGN
DA_SDASN.DESC
        42**DCL      7766<<ASSIGN   7838<<ASSIGN   7913<<ASSIGN   7960<<ASSIGN   7962<<ASSIGN
DA_SDASN.DESC.BASE
        43**DCL      7850>>ASSIGN
DA_SDASN.DESC.BOUND
        42**DCL      7840>>ASSIGN
DA_SDASN.DESC.TYPE0
        42**DCL        42--REDEF
DA_SDASN.SID
        43**DCL      7858<<ASSIGN   7872>>ASSIGN   7890>>ASSIGN   7948>>ASSIGN   7951<<ASSIGN   7952>>ASSIGN
      7955>>ASSIGN   7964>>ASSIGN
DA_SDASN.SYSID
        43**DCL      7768<<ASSIGN   7839<<ASSIGN   7915<<ASSIGN   7961<<ASSIGN   7963<<ASSIGN
DA_SYSTAC2
        47**DCL      7758>>IF       7761<<ASSIGN
DA_TIGR$
        49**DCL      7890--ASSIGN   7964--ASSIGN
DA_TIGRSEG
        58**DCL      7469--DCLINIT  7862<<ASSIGN   7922>>IF       7925<<ASSIGN
DA_TIGRSEG.BOUND
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:205  
        58**DCL      7842>>IF       7843>>ASSIGN   7869>>ASSIGN   7923>>ASSIGN
DA_TIGRSEG.P
        58**DCL        59--REDEF
DA_TIGRSEG.P.SID
        59**DCL      7858>>ASSIGN
DA_TIGRSEG.P$
        59**DCL      7846>>ASSIGN
DA_TRTN
        61**DCL      7744<<REMEMBR
DA_USERDIR$
        50**DCL      7825<<ASSIGN   7828<<ASSIGN   7945<<ASSIGN
DA_WINDOW
        41**DCL      7771>>IF       7780<<ASSIGN   7899<<ASSIGN   7935>>IF       7938<<ASSIGN
DA_WINDOWBASE
        46**DCL      7837>>ASSIGN   7876>>ASSIGN   7878>>IF       7901<<ASSIGN   7902>>ASSIGN   7903>>ASSIGN
      7904>>ASSIGN   7959>>ASSIGN
DA_WINDOWMAX
        46**DCL      7876<<ASSIGN   7878>>IF       7885>>IF       7885<<ASSIGN   7933<<ASSIGN
DA_WSPTD$
        49**DCL      7693--IMP-PTR  7889<<ASSIGN   7955--ASSIGN   7956>>ASSIGN
DESC
      7382**DCL      7838>>ASSIGN   7960>>ASSIGN   7962>>ASSIGN
DFKEY
      7394**DCL      7420--DCLINIT  7421--DCLINIT  7789<<ASSIGN
DFKEY.K.NODEIDX
      7398**DCL      7813<<ASSIGN
DFKEY.K.STYP
      7398**DCL      7815<<ASSIGN   7822<<ASSIGN   7848<<ASSIGN
DFKEY.K.TYP
      7398**DCL      7814<<ASSIGN   7847<<ASSIGN
DFKEY.K.USR#
      7398**DCL      7816<<ASSIGN   7849<<ASSIGN
DFKEY.K.VP#
      7399**DCL      7817<<ASSIGN   7850<<ASSIGN   7856<<ASSIGN   7856>>ASSIGN
DS$
        24**DCL      7788<<ASSIGN   7790>>ASSIGN   7798>>ASSIGN   7799<<ASSIGN   7799>>ASSIGN   7818>>ASSIGN
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:206  
      7820>>ASSIGN   7821<<ASSIGN   7821>>ASSIGN   7823>>ASSIGN   7825>>ASSIGN
F$DCB.ACTPOS
      7330**DCL      7330--REDEF
F$DCB.ARS#
      7304**DCL      7304--REDEF
F$DCB.ATTR
      7323**DCL      7324--REDEF
F$DCB.BORROW
      7338**DCL      7338--REDEF    7338--REDEF    7338--REDEF
F$DCB.DCBNAME.L
      7352**DCL      7352--IMP-SIZ
F$DCB.EOMCHAR#
      7308**DCL      7308--REDEF
F$DCB.FCD#
      7317**DCL      7740>>IF       7910>>IF
F$DCB.FLDID
      7333**DCL      7333--REDEF
F$DCB.FORM$
      7327**DCL      7327--REDEF
F$DCB.FSECT
      7343**DCL      7343--REDEF
F$DCB.FSN#
      7320**DCL      7320--REDEF    7320--REDEF    7321--REDEF
F$DCB.HEADER$
      7326**DCL      7326--REDEF
F$DCB.IXTNSIZE#
      7324**DCL      7324--REDEF
F$DCB.LASTSTA$
      7313**DCL      7313--REDEF
F$DCB.LVL
      7339**DCL      7339--REDEF
F$DCB.NAME#.C
      7314**DCL      7314--REDEF
F$DCB.NOEOF
      7336**DCL      7336--REDEF
F$DCB.NRECS#
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:207  
      7325**DCL      7325--REDEF
F$DCB.NRECX
      7344**DCL      7344--REDEF
F$DCB.OHDR
      7336**DCL      7336--REDEF
F$DCB.ORG#
      7319**DCL      7319--REDEF
F$DCB.PRECNO
      7342**DCL      7342--REDEF
F$DCB.RCSZ
      7348**DCL      7348--REDEF
F$DCB.RES#
      7315**DCL      7315--REDEF
F$DCB.SETX
      7327**DCL      7327--REDEF
F$DCB.TAB$
      7327**DCL      7327--REDEF
F$DCB.TDA
      7341**DCL      7342--REDEF
F$DCB.WSN#
      7315**DCL      7315--REDEF
FID
        10**DCL         6--PROC     7705--IF       7978--ENTRY
FID.C
        12**DCL      7729--ASSIGN
FID.L
        11**DCL        12--IMP-SIZ  7706>>IF       7706>>IF       7706>>IF       7712>>IF       7715>>IF
      7729>>ASSIGN
FINDHOST
      7800**LABEL    7805--EXIT
FPT_CLOSE
      7249**DCL      7741<>CALL     7911<>CALL
FPT_CLOSE.SN_
      7249**DCL      7249--REDEF
FPT_CLOSE.UTL_
      7250**DCL      7250--REDEF
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:208  
FPT_CLOSE.V
      7254**DCL      7249--DCLINIT
FPT_CLOSE.V.EXPIRE#
      7264**DCL      7264--REDEF
FPT_CLOSE.V.TYPE#
      7262**DCL      7262--REDEF
FPT_CLOSE.V.XTNSIZE#
      7259**DCL      7259--REDEF    7261--REDEF
FPT_CVM
      7376**DCL      7778<>CALL
FPT_CVM.V
      7376**DCL      7376--DCLINIT
FPT_CVM.V.VPNO#
      7378**DCL      7777<<ASSIGN
FPT_FID
      7285**DCL      7730<>CALL
FPT_FID.TEXTFID_
      7285**DCL      7729<<ASSIGN
FPT_FID.V
      7289**DCL      7285--DCLINIT
FPT_FVP
      7485**DCL      7774<>CALL     7937<>CALL
FPT_FVP.V
      7485**DCL      7485--DCLINIT
FPT_FVP.V.PNO#
      7486**DCL      7773<<ASSIGN   7936<<ASSIGN
FPT_GDDL
      7612**DCL      7875<>CALL
FPT_GDS_MAP
      7453**DCL      7786<>CALL     7919<>CALL
FPT_GDS_MAP.V
      7453**DCL      7453--DCLINIT
FPT_GDS_MAP.V.SEGSIZE#
      7456**DCL      7785<<ASSIGN   7918<<ASSIGN
FPT_GDS_TIGR
      7469**DCL      7844<>CALL     7861<>CALL     7870<>CALL     7924<>CALL
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:209  
FPT_GDS_TIGR.V
      7469**DCL      7469--DCLINIT
FPT_GDS_TIGR.V.SEGSIZE#
      7472**DCL      7843<<ASSIGN   7860<<ASSIGN   7869<<ASSIGN   7923<<ASSIGN
FPT_MONINFO
      7545**DCL      7927<>CALL
FPT_OPEN
      7103**DCL      7742<>CALL
FPT_OPEN.ACCT_
      7107**DCL      7708<<ASSIGN   7724<<ASSIGN
FPT_OPEN.ACSVEH_
      7105**DCL      7106--REDEF
FPT_OPEN.ALTKEYS_
      7111**DCL      7112--REDEF    7112--REDEF
FPT_OPEN.HDR_
      7110**DCL      7111--REDEF
FPT_OPEN.NAME_
      7104**DCL      7707<<ASSIGN   7723<<ASSIGN
FPT_OPEN.SN_
      7103**DCL      7709<<ASSIGN   7725<<ASSIGN
FPT_OPEN.TAB_
      7109**DCL      7110--REDEF
FPT_OPEN.UHL_
      7103**DCL      7104--REDEF    7104--REDEF
FPT_OPEN.V
      7112**DCL      7103--DCLINIT
FPT_OPEN.V.ASN#
      7122**DCL      7288--DCLINIT  7733>>IF       7733>>IF
FPT_OPEN.V.FSN#
      7143**DCL      7143--REDEF    7143--REDEF
FPT_OPEN.V.OPER.NXTF#
      7115**DCL      7710<<ASSIGN   7718<<ASSIGN   7726<<ASSIGN
FPT_OPEN.V.OPER.THISF#
      7115**DCL      7711<<ASSIGN   7719<<ASSIGN   7727<<ASSIGN
FPT_OPEN.V.RES#
      7127**DCL      7288--DCLINIT
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:210  
FPT_OPEN.V.SRCHCOND.REV#
      7121**DCL      7713<<ASSIGN   7716<<ASSIGN   7728<<ASSIGN
FPT_OPEN.WSN_
      7109**DCL      7109--REDEF
FPT_READ
      7420**DCL      7791<>CALL     7819<>CALL     7824<>CALL     7853<>CALL
FPT_READ.BUF_
      7422**DCL      7790<<ASSIGN   7818<<ASSIGN   7823<<ASSIGN   7846<<ASSIGN
FPT_READ.BUF_.BUF$
      7423**DCL      7855<<ASSIGN   7855>>ASSIGN
FPT_READ.STATION_
      7423**DCL      7424--REDEF
FPT_READ.V
      7424**DCL      7420--DCLINIT
FPT_READ.V.DVBYTE.REREAD#
      7435**DCL      7435--REDEF
FPT_READ.V.INDX#
      7433**DCL      7433--REDEF
FPT_SAD
      7514**DCL      7950<>CALL     7954<>CALL
FPT_SAD.V
      7514**DCL      7514--DCLINIT
FPT_SAD.V.MONSID#
      7515**DCL      7949<<ASSIGN   7953<<ASSIGN
FPT_SAD.V.USERSID#
      7514**DCL      7948<<ASSIGN   7952<<ASSIGN
FPT_STD.V
      7500**DCL      7499--DCLINIT
HOSTNODE
      7645**DCL      7804<<ASSIGN   7980>>ASSIGN
I
        22**DCL      7765<<DOINDEX  7766>>ASSIGN   7767>>ASSIGN   7768>>ASSIGN   7770<<DOINDEX  7771>>IF
      7773>>ASSIGN   7777>>ASSIGN   7780>>ASSIGN   7801<<DOINDEX  7802>>IF       7803>>ASSIGN   7804>>ASSIGN
      7852<<DOINDEX  7898<<DOINDEX  7899>>ASSIGN   7912<<DOINDEX  7913>>ASSIGN   7914>>ASSIGN   7915>>ASSIGN
      7934<<DOINDEX  7935>>IF       7936>>ASSIGN   7938>>ASSIGN
J
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:211  
        23**DCL      7851<<ASSIGN   7854<<ASSIGN   7854>>ASSIGN   7859>>IF       7869>>ASSIGN
LS$
        25**DCL      7837<<ASSIGN   7838>>ASSIGN   7959<<ASSIGN   7960>>ASSIGN   7962>>ASSIGN
M$CLOSE
       179**DCL-ENT  7741--CALL     7911--CALL
M$CVM
       217**DCL-ENT  7778--CALL
M$DUMPFILE
      7031**DCL      7740--IF       7910--IF
M$FDS
       214**DCL-ENT  7861--CALL     7870--CALL     7919--CALL     7924--CALL
M$FID
       242**DCL-ENT  7730--CALL
M$FVP
       216**DCL-ENT  7774--CALL     7937--CALL
M$GDDL
       216**DCL-ENT  7875--CALL
M$GDS
       214**DCL-ENT  7786--CALL     7844--CALL
M$MONINFO
       247**DCL-ENT  7927--CALL
M$OPEN
       179**DCL-ENT  7742--CALL
M$READ
       180**DCL-ENT  7791--CALL     7819--CALL     7824--CALL     7853--CALL
M$RENV
       235**DCL-ENT  7753--CALL     7755--CALL
M$RETRY
       236**DCL-ENT  7754--CALL
M$SAD
       218**DCL-ENT  7950--CALL     7954--CALL
M$SENV
       235**DCL-ENT  7745--CALL
M$WAIT
       237**DCL-ENT  7752--CALL
MNINFO
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:212  
      7560**DCL      7545--DCLINIT
MNINFO.MUAIS#
      7562**DCL      7928>>ASSIGN
MNPTRS
      7578**DCL      7546--DCLINIT
MNPTRS.B$USRT$
      7579**DCL      7930>>ASSIGN
NODEDIR
      7641**DCL      7790--ASSIGN   7799--ASSIGN
NODEDIR.N
      7641**DCL      7801>>DOINDEX  7809>>DOWHILE
NODEDIR.NODE.NODENAME
      7641**DCL      7802>>IF       7809>>DOWHILE
NXTPG
      7938**LABEL    7937--CALLALT
NXTTIGR
      7855**LABEL    7853--CALLALT
OPEN2
      7742**LABEL    7763--GOTO
P
      7682**DCL      7890<<ASSIGN   7955<<ASSIGN   7964<<ASSIGN
P.SID
      7687**DCL      7872<<ASSIGN   7931<<ASSIGN
PAGE
      7690**DCL      7818--ASSIGN   7823--ASSIGN   7846--ASSIGN
PMMEALT
      7970**LABEL    7730--CALLALT  7741--CALLALT  7758--GOTO     7786--CALLALT  7819--CALLALT  7844--CALLALT
      7870--CALLALT  7919--CALLALT  7924--CALLALT  7927--CALLALT  7950--CALLALT  7954--CALLALT
RENVALT
      7755**LABEL    7744--REMEMBR
RVBUFF.B$USRT$
      7658**DCL      7871>>ASSIGN
RVBUFF.B_MUAIS
      7659**DCL      7826>>ASSIGN
RVBUFF.CUN
      7657**DCL      7873>>ASSIGN
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:213  
RVBUFF.CURCG.CG$
      7670**DCL      7893>>ASSIGN
RVBUFF.SSFRAME
      7657**DCL      7891--ASSIGN   7892--ASSIGN
RVBUFF.S_PNO
      7658**DCL      7835<>CALL
S$CU$
      6556**DCL      7865<<ASSIGN   7873<<ASSIGN   7932<<ASSIGN
S$WSPTD.BLKNO
      7694**DCL      7956>>ASSIGN
SEGSIZE
        27**DCL      7841<<ASSIGN   7842>>IF       7843>>ASSIGN
SETERR
      7986**PROC     7734--CALL     7746--CALL     7792--CALL     7830--CALL     7879--CALL
TIGRPGS
        26**DCL      7840<<ASSIGN   7841>>ASSIGN   7852>>DOINDEX
UDERR
      7828**LABEL    7824--CALLALT
VLP_ACCT
      7185**DCL      7108--DCLINIT  7286--DCLINIT  7724--ASSIGN
VLP_ACCT.ACCT#
      7185**DCL      7759>>IF       7760<<ASSIGN   7762<<ASSIGN
VLP_NAME
      7172**DCL      7104--DCLINIT  7286--DCLINIT  7723--ASSIGN
VLP_PASS
      7211**DCL      7105--DCLINIT  7287--DCLINIT
VLP_SN
      7198**DCL      7103--DCLINIT  7287--DCLINIT  7725--ASSIGN
VLP_WSN
      7224**DCL      7109--DCLINIT  7287--DCLINIT
VLR_GDDL
      7625**DCL      7612--DCLINIT
VLR_GDDL.AVAIL_PGS#
      7626**DCL      7876>>ASSIGN
VLR_SITEINFO
      7593**DCL      7545--DCLINIT
PL6.E3A0      #003=DAM$DUMPFILE File=DAM$MAP.:E05TSI                             TUE 07/29/97 12:52 Page:214  
VLR_SITEINFO.CPU_TYPE#
      7597**DCL      7929>>ASSIGN
WAIT4DUMP
      7529**DCL      7752<>CALL
WAIT4DUMP.V
      7530**DCL      7529--DCLINIT
WINDOWMAX
        28**DCL      7877<<ASSIGN   7885>>IF       7885>>ASSIGN

PL6.E3A0      #004=DAM$FREEM File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:53 Page:215  
     1167        1        /*T***********************************************************/
     1168        2        /*T*                                                         */
     1169        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1170        4        /*T*                                                         */
     1171        5        /*T***********************************************************/
     1172        6        DAM$FREEM: PROC;
     1173        7        %INCLUDE DA_MAP_R;
     1174       37    1   DCL I SBIN;
     1175       38        /**/
     1176       39    2           DO I=0 TO DA_NUMSPCL-1;
     1177       40    2              DA_SDASN.DESC(I)='0'B;
     1178       41    2              DA_SDASN.SYSID(I)=0;
     1179       42    2              END;
     1180       43    2           DO I=DA_MSCPG1 TO 255;
     1181       44    2              DA_WINDOW.WSQ(I)=511;
     1182       45    2              END;
     1183       46    1           DA_NXTSPCL=0;
     1184       47    1           DA_NXTWINDOW=0;
     1185       48    1           RETURN;
     1186       49    1   END DAM$FREEM;
     1187       50        %EOD;

PL6.E3A0      #004=DAM$FREEM File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:53 Page:216  
--  Include file information  --

   DA_MAP_R.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure DAM$FREEM.

   Procedure DAM$FREEM requires 27 words for executable code.
   Procedure DAM$FREEM requires 4 words of local(AUTO) storage.

PL6.E3A0      #004=DAM$FREEM File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:53 Page:217  

 Object Unit name= DAM$FREEM                                  File name= DAM$MAP.:E05TOU
 UTS= JUL 29 '97 12:53:02.72 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   Proc  even  none    27     33  DAM$FREEM

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     0      0   yes            yes      Std        0  DAM$FREEM

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_0
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     DA_WINDOW                             DA_SDASN                              DA_NXTWINDOW
     DA_MSCPG1                             DA_NXTSPCL                            DA_NUMSPCL
PL6.E3A0      #004=DAM$FREEM File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:53 Page:218  


     1167        1        /*T***********************************************************/
     1168        2        /*T*                                                         */
     1169        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1170        4        /*T*                                                         */
     1171        5        /*T***********************************************************/
     1172        6        DAM$FREEM: PROC;

      6  0 000000   000000 700200 xent  DAM$FREEM    TSX0  ! X66_AUTO_0
         0 000001   000004 000000                    ZERO    4,0

     1173        7        %INCLUDE DA_MAP_R;
     1174       37    1   DCL I SBIN;
     1175       38        /**/
     1176       39    2           DO I=0 TO DA_NUMSPCL-1;

     39  0 000002   200003 450100                    STZ     I,,AUTO
         0 000003   000013 710000 0                  TRA     s:42+1

     1177       40    2              DA_SDASN.DESC(I)='0'B;

     40  0 000004   200003 236100                    LDQ     I,,AUTO
         0 000005   000003 402007                    MPY     3,DL
         0 000006   000000 450006 xsym               STZ     DA_SDASN,QL
         0 000007   000001 450006 xsym               STZ     DA_SDASN+1,QL

     1178       41    2              DA_SDASN.SYSID(I)=0;

     41  0 000010   000000 220003                    LDX0    0,DU
         0 000011   000002 440006 xsym               SXL0    DA_SDASN+2,QL

     1179       42    2              END;

     42  0 000012   200003 054100                    AOS     I,,AUTO
         0 000013   200003 236100                    LDQ     I,,AUTO
         0 000014   000000 116000 xsym               CMPQ    DA_NUMSPCL
         0 000015   000004 604000 0                  TMI     s:40
PL6.E3A0      #004=DAM$FREEM File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:53 Page:219  

     1180       43    2           DO I=DA_MSCPG1 TO 255;

     43  0 000016   000000 235000 xsym               LDA     DA_MSCPG1
         0 000017   200003 755100                    STA     I,,AUTO
         0 000020   000025 710000 0                  TRA     s:45+1

     1181       44    2              DA_WINDOW.WSQ(I)=511;

     44  0 000021   200003 720100                    LXL0    I,,AUTO
         0 000022   777000 236007                    LDQ     -512,DL
         0 000023   000000 256010 xsym               ORSQ    DA_WINDOW,X0

     1182       45    2              END;

     45  0 000024   200003 054100                    AOS     I,,AUTO
         0 000025   200003 235100                    LDA     I,,AUTO
         0 000026   000377 115007                    CMPA    255,DL
         0 000027   000021 604400 0                  TMOZ    s:44

     1183       46    1           DA_NXTSPCL=0;

     46  0 000030   000000 450000 xsym               STZ     DA_NXTSPCL

     1184       47    1           DA_NXTWINDOW=0;

     47  0 000031   000000 450000 xsym               STZ     DA_NXTWINDOW

     1185       48    1           RETURN;

     48  0 000032   000000 702200 xent               TSX2  ! X66_ARET
     1186       49    1   END DAM$FREEM;
     1187       50        %EOD;

PL6.E3A0      #004=DAM$FREEM File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:53 Page:220  
--  Include file information  --

   DA_MAP_R.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is never referenced.
   CP_6_C.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure DAM$FREEM.
PL6.E3A0      #004=DAM$FREEM File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:53 Page:221  

 **** Variables and constants ****

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w SBIN        r     1 I

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r     1 DA_MSCPG1                  0-0-0/w SBIN        r     1 DA_NUMSPCL
     0-0-0/w SBIN        r     1 DA_NXTSPCL                 0-0-0/w SBIN        r     1 DA_NXTWINDOW
     0-0-0/w STRC(108)   r     1 DA_SDASN(0:7)
     0-0-0/b STRC        r     1 DA_WINDOW(0:255)


   Procedure DAM$FREEM requires 27 words for executable code.
   Procedure DAM$FREEM requires 4 words of local(AUTO) storage.
PL6.E3A0      #004=DAM$FREEM File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:53 Page:222  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #004=DAM$FREEM File=DAM$MAP.:E05TSI                                TUE 07/29/97 12:53 Page:223  
          MINI XREF LISTING

DA_MAPSEG.P
        32**DCL        33--REDEF
DA_MSCPG1
        25**DCL        43>>DOINDEX
DA_NUMSPCL
        31**DCL        39>>DOINDEX
DA_NXTSPCL
        31**DCL        46<<ASSIGN
DA_NXTWINDOW
        22**DCL        47<<ASSIGN
DA_SDASN.DESC
        17**DCL        40<<ASSIGN
DA_SDASN.DESC.TYPE0
        17**DCL        17--REDEF
DA_SDASN.SYSID
        18**DCL        41<<ASSIGN
DA_TIGRSEG.P
        33**DCL        34--REDEF
DA_WINDOW.WSQ
        16**DCL        44<<ASSIGN
I
        37**DCL        39<<DOINDEX    40>>ASSIGN     41>>ASSIGN     43<<DOINDEX    44>>ASSIGN

PL6.E3A0      #005=DAM$USECPU File=DAM$MAP.:E05TSI                               TUE 07/29/97 12:53 Page:224  
     1188        1        /*T***********************************************************/
     1189        2        /*T*                                                         */
     1190        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1191        4        /*T*                                                         */
     1192        5        /*T***********************************************************/
     1193        6        DAM$USECPU: PROC(CPU#) ALTRET;
     1194        7    1   DCL CPU# SBIN;
     1195        8        /**/
     1196        9    1   DCL DAM$FREEM ENTRY;
     1197       10    1   DCL DAM$VPAGE ENTRY(5) ALTRET;
     1198       11    1   DCL DAS$SETNODE ENTRY ALTRET OPTIONAL;
     1199       12        /**/
     1200       13        %INCLUDE DA_PERR_C;
     1201       77        %INCLUDE B$MAP;
     1202      176    1   DCL PT$ PTR;
     1203      177        %INCLUDE M_INFO_C;
     1204      317        %INCLUDE B_STRINGS_C;
     1205      446        %INCLUDE B_LSDATA_C;
     1206     3652    1   DCL B$JIT$ PTR SYMREF;
     1207     3653        %INCLUDE B$JIT;
     1208     3943    1   DCL B$IS$ PTR SYMREF;
     1209     3944    1   DCL PT(0:5) SBIN CONSTANT INIT(%(MASTERPT_BASE%/4096),
     1210     3945    1                                  %(SLV1PT_BASE%/4096),
     1211     3946    1                                  %(SLV2PT_BASE%/4096),
     1212     3947    1                                  %(SLV3PT_BASE%/4096),
     1213     3948    1                                  %(SLV4PT_BASE%/4096),
     1214     3949    1                                  %(SLV5PT_BASE%/4096));
     1215     3950        %INCLUDE DA_MAP_R;
     1216     3980        %EJECT;
PL6.E3A0      #005=DAM$USECPU File=DAM$MAP.:E05TSI                               TUE 07/29/97 12:53 Page:225  
     1217     3981    1           IF CPU#>5 THEN GOTO BADCPU;
     1218     3982    1           CALL DAM$FREEM;
     1219     3983    2           IF NOT DA_DUMPFILE THEN DO;
     1220     3984    2              CALL DAM$VPAGE(0,0,0,%MONWSQ,1) ALTRET(VPAGEALT);
     1221     3985    2              PT$=PINCRW(B$IS$,DA_WINDOWBASE*1024);
     1222     3986    2              IF PT$->B$MAP.RPN(PT(CPU#))~=1 THEN
     1223     3987    2                 IF DA_CPU = %DPS90XA OR DA_CPU = %DPS8000 THEN
     1224     3988    2                    DA_MONPTP=PT$->B$MAP.RPN(PT(CPU#));
     1225     3989    2                 ELSE
     1226     3990    2                    DA_MONPTP=PT$->B$MAP.RPN(PT(CPU#))*16;
     1227     3991    3              ELSE DO;
     1228     3992    3   BADCPU:       DA_MAPERR='040115000000'O;
     1229     3993    3                 DA_MAPERR.CODE=%E$DA_NO_CPU;
     1230     3994        /*E*    ERROR:   DAM-E$DA_NO_CPU
     1231     3995                MESSAGE: The specified CPU is not configured in this system.
     1232     3996                                                                           */
     1233     3997    3   VPAGEALT:     ALTRETURN;
     1234     3998    3                 END;
     1235     3999    2              END;
     1236     4000    1           DA_CPU#=CPU#;
     1237     4001    1           IF ENTADDR(DAS$SETNODE)~=ENTADDR(NIL)
     1238     4002    1           THEN CALL DAS$SETNODE;
     1239     4003    1           RETURN;
     1240     4004    1   END DAM$USECPU;
     1241     4005        %EOD;

PL6.E3A0      #005=DAM$USECPU File=DAM$MAP.:E05TSI                               TUE 07/29/97 12:53 Page:226  
--  Include file information  --

   DA_MAP_R.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   B_MLSMAC_C.:E05TOU  is referenced.
   B_ULSMAC_C.:E05TOU  is referenced.
   B_LSDATA_C.:E05TOU  cannot be made into a system file and is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   B$MAP.:E05TOU  cannot be made into a system file and is referenced.
   DA_PERR_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure DAM$USECPU.

   Procedure DAM$USECPU requires 60 words for executable code.
   Procedure DAM$USECPU requires 6 words of local(AUTO) storage.

PL6.E3A0      #005=DAM$USECPU File=DAM$MAP.:E05TSI                               TUE 07/29/97 12:53 Page:227  

 Object Unit name= DAM$USECPU                                 File name= DAM$MAP.:E05TOU
 UTS= JUL 29 '97 12:53:04.92 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0  RoData even  UTS      7      7  DAM$USECPU
    1   Proc  even  none    60     74  DAM$USECPU
    2  RoData even  none     7      7  DAM$USECPU

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     1      0   yes    yes     yes      Std        1  DAM$USECPU

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
         yes           Std       0 DAM$FREEM
 yes     yes           Std       5 DAM$VPAGE
 yes     yes    yes    Std       0 DAS$SETNODE
                       nStd      0 X66_AUTO_1
                       Std       0 B_CONSPOOL_D
                       nStd      0 X66_AALT
                       nStd      0 X66_ARET
PL6.E3A0      #005=DAM$USECPU File=DAM$MAP.:E05TSI                               TUE 07/29/97 12:53 Page:228  

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     B$JIT$                                B$IS$                                 DA_CPU
     DA_WINDOWBASE                         DA_DUMPFILE                           DA_CPU#
     DA_MONPTP                             DA_MAPERR                             B_VECTNIL

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #005=DAM$USECPU File=DAM$MAP.:E05TSI                               TUE 07/29/97 12:53 Page:229  


     1188        1        /*T***********************************************************/
     1189        2        /*T*                                                         */
     1190        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1191        4        /*T*                                                         */
     1192        5        /*T***********************************************************/
     1193        6        DAM$USECPU: PROC(CPU#) ALTRET;

      6  1 000000   000000 700200 xent  DAM$USECPU   TSX0  ! X66_AUTO_1
         1 000001   000006 000001                    ZERO    6,1

     1194        7    1   DCL CPU# SBIN;
     1195        8        /**/
     1196        9    1   DCL DAM$FREEM ENTRY;
     1197       10    1   DCL DAM$VPAGE ENTRY(5) ALTRET;
     1198       11    1   DCL DAS$SETNODE ENTRY ALTRET OPTIONAL;
     1199       12        /**/
     1200       13        %INCLUDE DA_PERR_C;
     1201       77        %INCLUDE B$MAP;
     1202      176    1   DCL PT$ PTR;
     1203      177        %INCLUDE M_INFO_C;
     1204      317        %INCLUDE B_STRINGS_C;
     1205      446        %INCLUDE B_LSDATA_C;
     1206     3652    1   DCL B$JIT$ PTR SYMREF;
     1207     3653        %INCLUDE B$JIT;
     1208     3943    1   DCL B$IS$ PTR SYMREF;
     1209     3944    1   DCL PT(0:5) SBIN CONSTANT INIT(%(MASTERPT_BASE%/4096),
     1210     3945    1                                  %(SLV1PT_BASE%/4096),
     1211     3946    1                                  %(SLV2PT_BASE%/4096),
     1212     3947    1                                  %(SLV3PT_BASE%/4096),
     1213     3948    1                                  %(SLV4PT_BASE%/4096),
     1214     3949    1                                  %(SLV5PT_BASE%/4096));
     1215     3950        %INCLUDE DA_MAP_R;
     1216     3980        %EJECT;
PL6.E3A0      #005=DAM$USECPU File=DAM$MAP.:E05TSI                               TUE 07/29/97 12:53 Page:230  
     1217     3981    1           IF CPU#>5 THEN GOTO BADCPU;

   3981  1 000002   200003 470500                    LDP0    @CPU#,,AUTO
         1 000003   000000 235100                    LDA     0,,PR0
         1 000004   000005 115007                    CMPA    5,DL
         1 000005   000054 605400 1                  TPNZ    BADCPU

     1218     3982    1           CALL DAM$FREEM;

   3982  1 000006   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 000007   000000 701000 xent               TSX1    DAM$FREEM
         1 000010   000000 011000                    NOP     0

     1219     3983    2           IF NOT DA_DUMPFILE THEN DO;

   3983  1 000011   000000 234000 xsym               SZN     DA_DUMPFILE
         1 000012   000062 604000 1                  TMI     s:4000

     1220     3984    2              CALL DAM$VPAGE(0,0,0,%MONWSQ,1) ALTRET(VPAGEALT);

   3984  1 000013   000000 630400 2                  EPPR0   0
         1 000014   000023 631400 xsym               EPPR1   B_VECTNIL+19
         1 000015   000000 701000 xent               TSX1    DAM$VPAGE
         1 000016   000061 702000 1                  TSX2    VPAGEALT

     1221     3985    2              PT$=PINCRW(B$IS$,DA_WINDOWBASE*1024);

   3985  1 000017   000000 236000 xsym               LDQ     DA_WINDOWBASE
         1 000020   000034 736000                    QLS     28
         1 000021   000000 036000 xsym               ADLQ    B$IS$
         1 000022   200004 756100                    STQ     PT$,,AUTO

     1222     3986    2              IF PT$->B$MAP.RPN(PT(CPU#))~=1 THEN

   3986  1 000023   200003 470500                    LDP0    @CPU#,,AUTO
         1 000024   000000 720100                    LXL0    0,,PR0
         1 000025   000000 721010 0                  LXL1    PT,X0
PL6.E3A0      #005=DAM$USECPU File=DAM$MAP.:E05TSI                               TUE 07/29/97 12:53 Page:231  
         1 000026   200004 471500                    LDP1    PT$,,AUTO
         1 000027   100000 220111                    LDX0    0,X1,PR1
         1 000030   000001 100003                    CMPX0   1,DU
         1 000031   000054 600000 1                  TZE     BADCPU

     1223     3987    2                 IF DA_CPU = %DPS90XA OR DA_CPU = %DPS8000 THEN

   3987  1 000032   000000 235000 xsym               LDA     DA_CPU
         1 000033   000005 115007                    CMPA    5,DL
         1 000034   000037 600000 1                  TZE     s:3988
         1 000035   000006 115007                    CMPA    6,DL
         1 000036   000045 601000 1                  TNZ     s:3990

     1224     3988    2                    DA_MONPTP=PT$->B$MAP.RPN(PT(CPU#));

   3988  1 000037   000000 720100                    LXL0    0,,PR0
         1 000040   000000 721010 0                  LXL1    PT,X0
         1 000041   100000 236111                    LDQ     0,X1,PR1
         1 000042   000022 772000                    QRL     18
         1 000043   000000 756000 xsym               STQ     DA_MONPTP
         1 000044   000062 710000 1                  TRA     s:4000

     1225     3989    2                 ELSE
     1226     3990    2                    DA_MONPTP=PT$->B$MAP.RPN(PT(CPU#))*16;

   3990  1 000045   000000 720100                    LXL0    0,,PR0
         1 000046   000000 721010 0                  LXL1    PT,X0
         1 000047   100000 236111                    LDQ     0,X1,PR1
         1 000050   000016 772000                    QRL     14
         1 000051   000005 376000 2                  ANQ     5
         1 000052   000000 756000 xsym               STQ     DA_MONPTP
         1 000053   000062 710000 1                  TRA     s:4000

     1227     3991    3              ELSE DO;

     1228     3992    3   BADCPU:       DA_MAPERR='040115000000'O;

PL6.E3A0      #005=DAM$USECPU File=DAM$MAP.:E05TSI                               TUE 07/29/97 12:53 Page:232  
   3992  1 000054   000006 236000 0     BADCPU       LDQ     PT+6
         1 000055   000000 756000 xsym               STQ     DA_MAPERR

     1229     3993    3                 DA_MAPERR.CODE=%E$DA_NO_CPU;

   3993  1 000056   000006 376000 2                  ANQ     6
         1 000057   002020 276007                    ORQ     1040,DL
         1 000060   000000 756000 xsym               STQ     DA_MAPERR

     1230     3994        /*E*    ERROR:   DAM-E$DA_NO_CPU
     1231     3995                MESSAGE: The specified CPU is not configured in this system.
     1232     3996                                                                           */
     1233     3997    3   VPAGEALT:     ALTRETURN;

   3997  1 000061   000000 702200 xent  VPAGEALT     TSX2  ! X66_AALT

     1234     3998    3                 END;
     1235     3999    2              END;
     1236     4000    1           DA_CPU#=CPU#;

   4000  1 000062   200003 470500                    LDP0    @CPU#,,AUTO
         1 000063   000000 235100                    LDA     0,,PR0
         1 000064   000000 755000 xsym               STA     DA_CPU#

     1237     4001    1           IF ENTADDR(DAS$SETNODE)~=ENTADDR(NIL)

   4001  1 000065   000000 636000 xent               EAQ     DAS$SETNODE
         1 000066   000002 116000 xsym               CMPQ    B_VECTNIL+2
         1 000067   000073 600000 1                  TZE     s:4003

     1238     4002    1           THEN CALL DAS$SETNODE;

   4002  1 000070   000002 631400 xsym               EPPR1   B_VECTNIL+2
         1 000071   000000 701000 xent               TSX1    DAS$SETNODE
         1 000072   000000 011000                    NOP     0

     1239     4003    1           RETURN;
PL6.E3A0      #005=DAM$USECPU File=DAM$MAP.:E05TSI                               TUE 07/29/97 12:53 Page:233  

   4003  1 000073   000000 702200 xent               TSX2  ! X66_ARET
     1240     4004    1   END DAM$USECPU;
     1241     4005        %EOD;

PL6.E3A0      #005=DAM$USECPU File=DAM$MAP.:E05TSI                               TUE 07/29/97 12:53 Page:234  
--  Include file information  --

   DA_MAP_R.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   B_MLSMAC_C.:E05TOU  is referenced.
   B_ULSMAC_C.:E05TOU  is referenced.
   B_LSDATA_C.:E05TOU  cannot be made into a system file and is referenced.
   B_STRINGS_C.:E05TOU  is referenced.
   M_INFO_C.:E05TOU  is referenced.
   B$MAP.:E05TOU  cannot be made into a system file and is referenced.
   DA_PERR_C.:E05TOU  is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is never referenced.
      No diagnostics issued in procedure DAM$USECPU.
PL6.E3A0      #005=DAM$USECPU File=DAM$MAP.:E05TSI                               TUE 07/29/97 12:53 Page:235  

 **** Variables and constants ****

  ****  Section 000 RoData DAM$USECPU

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w SBIN        r     1 PT(0:5)

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     3-0-0/w PTR         r     1 @CPU#                     *0-0-0/w SBIN        r     1 CPU#
     4-0-0/w PTR         r     1 PT$

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$IS$                      0-0-0/w PTR         r     1 B$JIT$
     0-0-0/w SBIN        r     1 DA_CPU                     0-0-0/w SBIN        r     1 DA_CPU#
     0-0-0/w BIT         r     1 DA_DUMPFILE                0-0-0/w STRC        r     1 DA_MAPERR
     0-0-0/w SBIN        r     1 DA_MONPTP                  0-0-0/w SBIN        r     1 DA_WINDOWBASE

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w STRC        r     1 B$MAP(0:1023)


   Procedure DAM$USECPU requires 60 words for executable code.
PL6.E3A0      #005=DAM$USECPU File=DAM$MAP.:E05TSI                               TUE 07/29/97 12:53 Page:236  
   Procedure DAM$USECPU requires 6 words of local(AUTO) storage.
PL6.E3A0      #005=DAM$USECPU File=DAM$MAP.:E05TSI                               TUE 07/29/97 12:53 Page:237  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #005=DAM$USECPU File=DAM$MAP.:E05TSI                               TUE 07/29/97 12:53 Page:238  
          MINI XREF LISTING

B$IS$
      3943**DCL      3985>>ASSIGN
B$JIT.CPFLAGS1.SLEAZE
      3761**DCL      3761--REDEF
B$JIT.ERR.MID
      3668**DCL      3668--REDEF
B$JIT.JRESPEAK
      3829**DCL      3830--REDEF
B$JIT.ORIGINATOR_PORT.FROM_CR
      3938**DCL      3938--REDEF    3939--REDEF
B$JIT.PNR
      3842**DCL      3842--REDEF
B$JIT.TSLINE
      3936**DCL      3937--REDEF
B$JIT$
      3652**DCL      3662--IMP-PTR
B$MAP.RPN
       119**DCL      3986>>IF       3988>>ASSIGN   3990>>ASSIGN
B$MAP.SCTRL
       120**DCL       121--REDEF
BADCPU
      3992**LABEL    3981--GOTO
CPU#
         7**DCL         6--PROC     3981>>IF       3986>>IF       3988>>ASSIGN   3990>>ASSIGN   4000>>ASSIGN
DAM$FREEM
         9**DCL-ENT  3982--CALL
DAM$VPAGE
        10**DCL-ENT  3984--CALL
DAS$SETNODE
        11**DCL-ENT  4001--IF       4002--CALL
DA_CPU
      3964**DCL      3987>>IF       3987>>IF
PL6.E3A0      #005=DAM$USECPU File=DAM$MAP.:E05TSI                               TUE 07/29/97 12:53 Page:239  
DA_CPU#
      3966**DCL      4000<<ASSIGN
DA_DUMPFILE
      3965**DCL      3983>>IF
DA_MAPERR
      3974**DCL      3992<<ASSIGN
DA_MAPERR.CODE
      3974**DCL      3993<<ASSIGN
DA_MAPSEG.P
      3975**DCL      3976--REDEF
DA_MONPTP
      3967**DCL      3988<<ASSIGN   3990<<ASSIGN
DA_SDASN.DESC.TYPE0
      3960**DCL      3960--REDEF
DA_TIGRSEG.P
      3976**DCL      3977--REDEF
DA_WINDOWBASE
      3964**DCL      3985>>ASSIGN
PT
      3944**DCL      3986>>IF       3988>>ASSIGN   3990>>ASSIGN
PT$
       176**DCL      3985<<ASSIGN   3986>>IF       3988>>ASSIGN   3990>>ASSIGN
VPAGEALT
      3997**LABEL    3984--CALLALT

PL6.E3A0      #006=DAM$REAL_TO_PHYS File=DAM$MAP.:E05TSI                         TUE 07/29/97 12:53 Page:240  
     1242        1        /*T***********************************************************/
     1243        2        /*T*                                                         */
     1244        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1245        4        /*T*                                                         */
     1246        5        /*T***********************************************************/
     1247        6        DAM$REAL_TO_PHYS: PROC(REAL,PHYS);
     1248        7    1   DCL REAL UBIN;
     1249        8    1   DCL PHYS UBIN;
     1250        9
     1251       10    1   DCL B$HWORD UBIN HALF BASED HALIGNED;
     1252       11    1   DCL DESCR DSCR;
     1253       12    1   DCL P$ PTR;
     1254       13
     1255       14        %INCLUDE CP_6;
     1256       95        %INCLUDE B_SEGIDS_C;
     1257      634        %INCLUDE B$JIT;
     1258      924        %INCLUDE M_INFO_C;
     1259     1064        %INCLUDE DA_MAP_R;
     1260     1094
     1261     1095    1   DCL B$IS$ PTR SYMREF READONLY;
     1262     1096    1   DCL B$SPCL6$ PTR SYMREF READONLY;
     1263     1097    1   DCL B$JIT$ PTR SYMREF READONLY;
     1264     1098
     1265     1099        %FPT_SAD(FPTN=FPT_SAD_WSQ0PT,MONSID=%WSQ0PTSID,USERSID=%SPCL6SID);
     1266     1114        %FPT_SAD(FPTN=FPT_SAD_IPHYMAP,MONSID=%IPHYMAPSID,USERSID=%SPCL6SID);
     1267     1129        %FPT_CVM (PHYSICAL=NO);
     1268     1145
     1269     1146    1           CALL M$SAD(FPT_SAD_WSQ0PT);
     1270     1147    1           DESCR=PTRDSCR(B$SPCL6$);
     1271     1148    1           FPT_CVM.V.PPNO# = DBASE(DESCR)/4096+REAL/1024;
     1272     1149    1           FPT_CVM.V.VPNO# = DA_MSCPG2;
     1273     1150    1           CALL M$CVM(FPT_CVM);
     1274     1151    1           P$=PINCRW(B$IS$,DA_MSCPG2*1024+MOD(REAL,1024));
     1275     1152    1           PHYS=P$->B$HWORD;
     1276     1153    1           FPT_CVM.V.PPNO# = -1;
     1277     1154    1           CALL M$CVM(FPT_CVM);
     1278     1155    1           RETURN;
PL6.E3A0      #006=DAM$REAL_TO_PHYS File=DAM$MAP.:E05TSI                         TUE 07/29/97 12:53 Page:241  
     1279     1156
     1280     1157    1   DAM$PHYS_TO_REAL: ENTRY(REAL,PHYS);
     1281     1158
     1282     1159    1           CALL M$SAD(FPT_SAD_IPHYMAP);
     1283     1160    1           DESCR=PTRDSCR(B$SPCL6$);
     1284     1161    1           FPT_CVM.V.PPNO# = DBASE(DESCR)/4096+PHYS/2048;
     1285     1162    1           FPT_CVM.V.VPNO# = DA_MSCPG2;
     1286     1163    1           CALL M$CVM(FPT_CVM);
     1287     1164    1           P$=PINCRC(B$IS$,DA_MSCPG2*4096+MOD(PHYS,2048)*2);
     1288     1165    1           REAL=P$->B$HWORD;
     1289     1166    1           FPT_CVM.V.PPNO# = -1;
     1290     1167    1           CALL M$CVM(FPT_CVM);
     1291     1168    1   END DAM$REAL_TO_PHYS;

PL6.E3A0      #006=DAM$REAL_TO_PHYS File=DAM$MAP.:E05TSI                         TUE 07/29/97 12:53 Page:242  
--  Include file information  --

   DA_MAP_R.:E05TOU  cannot be made into a system file and is referenced.
   M_INFO_C.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure DAM$REAL_TO_PHYS.

   Procedure DAM$REAL_TO_PHYS requires 82 words for executable code.
   Procedure DAM$REAL_TO_PHYS requires 12 words of local(AUTO) storage.

    No errors detected in file DAM$MAP.:E05TSI    .

PL6.E3A0      #006=DAM$REAL_TO_PHYS File=DAM$MAP.:E05TSI                         TUE 07/29/97 12:53 Page:243  

 Object Unit name= DAM$REAL_TO_PHYS                           File name= DAM$MAP.:E05TOU
 UTS= JUL 29 '97 12:53:20.76 TUE                              Compiler= PL-6/E31         Sev=      00
 SharedLib= :SHARED_SYSTEM                                    Alt SharedLib=


    ****  Control sections  ****

 Sect   Type Bound  Init  Size OctSiz  Section name(segment info)
    0   DCB   even  none     0      0  M$UC
    1   Data  even  none    14     16  DAM$REAL_TO_PHYS
    2   Proc  even  none    82    122  DAM$REAL_TO_PHYS

    ****  Entry defs  ****

                              Check   Calling
                             calling  sequence
  Sect OctLoc Primary Altret sequence   type   Parms  Name
     2      0   yes            yes      Std        2  DAM$REAL_TO_PHYS
     2     51                  yes      Std        2  DAM$PHYS_TO_REAL

  ****  Entry refs  ****

         Check        Calling
        calling       sequence
Altret sequence SRef   type   Args  Name
                       nStd      0 X66_AUTO_2
                       nStd      0 X66_ARET

  ****  Data refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     M$UC                                  DA_MSCPG2                        r    B$IS$
r    B$SPCL6$                         r    B$JIT$
PL6.E3A0      #006=DAM$REAL_TO_PHYS File=DAM$MAP.:E05TSI                         TUE 07/29/97 12:53 Page:244  

  ****  Segment refs  ****

  Flags:  r = read only, s = secondary
Flgs Name                             Flgs Name                             Flgs Name
     ISSID
PL6.E3A0      #006=DAM$REAL_TO_PHYS File=DAM$MAP.:E05TSI                         TUE 07/29/97 12:53 Page:245  


     1242        1        /*T***********************************************************/
     1243        2        /*T*                                                         */
     1244        3        /*T* Copyright (c) Bull HN Information Systems Inc., 1997    */
     1245        4        /*T*                                                         */
     1246        5        /*T***********************************************************/
     1247        6        DAM$REAL_TO_PHYS: PROC(REAL,PHYS);

      6  2 000000   000000 700200 xent  DAM$REAL_TO* TSX0  ! X66_AUTO_2
         2 000001   000014 000002                    ZERO    12,2

     1248        7    1   DCL REAL UBIN;
     1249        8    1   DCL PHYS UBIN;
     1250        9
     1251       10    1   DCL B$HWORD UBIN HALF BASED HALIGNED;
     1252       11    1   DCL DESCR DSCR;
     1253       12    1   DCL P$ PTR;
     1254       13
     1255       14        %INCLUDE CP_6;
     1256       95        %INCLUDE B_SEGIDS_C;
     1257      634        %INCLUDE B$JIT;
     1258      924        %INCLUDE M_INFO_C;
     1259     1064        %INCLUDE DA_MAP_R;
     1260     1094
     1261     1095    1   DCL B$IS$ PTR SYMREF READONLY;
     1262     1096    1   DCL B$SPCL6$ PTR SYMREF READONLY;
     1263     1097    1   DCL B$JIT$ PTR SYMREF READONLY;
     1264     1098
     1265     1099        %FPT_SAD(FPTN=FPT_SAD_WSQ0PT,MONSID=%WSQ0PTSID,USERSID=%SPCL6SID);
     1266     1114        %FPT_SAD(FPTN=FPT_SAD_IPHYMAP,MONSID=%IPHYMAPSID,USERSID=%SPCL6SID);
     1267     1129        %FPT_CVM (PHYSICAL=NO);
     1268     1145
     1269     1146    1           CALL M$SAD(FPT_SAD_WSQ0PT);

   1146  2 000002   000000 630400 1                  EPPR0   FPT_SAD_WSQ0PT
         2 000003   030015 713400                    CLIMB   12301
         2 000004   400000 401760                    pmme    nvectors=1
PL6.E3A0      #006=DAM$REAL_TO_PHYS File=DAM$MAP.:E05TSI                         TUE 07/29/97 12:53 Page:246  

     1270     1147    1           DESCR=PTRDSCR(B$SPCL6$);

   1147  2 000005   000000 470400 xsym               LDP0    B$SPCL6$
         2 000006   200006 050500                    STD0    DESCR,,AUTO

     1271     1148    1           FPT_CVM.V.PPNO# = DBASE(DESCR)/4096+REAL/1024;

   1148  2 000007   200007 236100                    LDQ     DESCR+1,,AUTO
         2 000010   000014 772000                    QRL     12
         2 000011   200003 470500                    LDP0    @REAL,,AUTO
         2 000012   200012 756100                    STQ     P$+2,,AUTO
         2 000013   000000 236100                    LDQ     0,,PR0
         2 000014   000012 772000                    QRL     10
         2 000015   200012 036100                    ADLQ    P$+2,,AUTO
         2 000016   000013 756000 1                  STQ     FPT_CVM+3

     1272     1149    1           FPT_CVM.V.VPNO# = DA_MSCPG2;

   1149  2 000017   000000 720000 xsym               LXL0    DA_MSCPG2
         2 000020   000014 440000 1                  SXL0    FPT_CVM+4

     1273     1150    1           CALL M$CVM(FPT_CVM);

   1150  2 000021   000010 630400 1                  EPPR0   FPT_CVM
         2 000022   030011 713400                    CLIMB   12297
         2 000023   400000 401760                    pmme    nvectors=1

     1274     1151    1           P$=PINCRW(B$IS$,DA_MSCPG2*1024+MOD(REAL,1024));

   1151  2 000024   200003 470500                    LDP0    @REAL,,AUTO
         2 000025   000000 236100                    LDQ     0,,PR0
         2 000026   001777 376007                    ANQ     1023,DL
         2 000027   200012 756100                    STQ     P$+2,,AUTO
         2 000030   000000 236000 xsym               LDQ     DA_MSCPG2
         2 000031   000012 736000                    QLS     10
         2 000032   200012 036100                    ADLQ    P$+2,,AUTO
PL6.E3A0      #006=DAM$REAL_TO_PHYS File=DAM$MAP.:E05TSI                         TUE 07/29/97 12:53 Page:247  
         2 000033   000022 736000                    QLS     18
         2 000034   000000 036000 xsym               ADLQ    B$IS$
         2 000035   200010 756100                    STQ     P$,,AUTO

     1275     1152    1           PHYS=P$->B$HWORD;

   1152  2 000036   200010 471500                    LDP1    P$,,AUTO
         2 000037   200004 473500                    LDP3    @PHYS,,AUTO
         2 000040   000100 101500                    MRL     fill='000'O
         2 000041   100000 000002                    ADSC9   0,,PR1                   cn=0,n=2
         2 000042   300000 000004                    ADSC9   0,,PR3                   cn=0,n=4

     1276     1153    1           FPT_CVM.V.PPNO# = -1;

   1153  2 000043   000001 335007                    LCA     1,DL
         2 000044   000013 755000 1                  STA     FPT_CVM+3

     1277     1154    1           CALL M$CVM(FPT_CVM);

   1154  2 000045   000010 630400 1                  EPPR0   FPT_CVM
         2 000046   030011 713400                    CLIMB   12297
         2 000047   400000 401760                    pmme    nvectors=1

     1278     1155    1           RETURN;

   1155  2 000050   000000 702200 xent               TSX2  ! X66_ARET

     1279     1156
     1280     1157    1   DAM$PHYS_TO_REAL: ENTRY(REAL,PHYS);

   1157  2 000051   000000 700200 xent  DAM$PHYS_TO* TSX0  ! X66_AUTO_2
         2 000052   000014 000002                    ZERO    12,2

     1281     1158
     1282     1159    1           CALL M$SAD(FPT_SAD_IPHYMAP);

   1159  2 000053   000004 630400 1                  EPPR0   FPT_SAD_IPHYMAP
PL6.E3A0      #006=DAM$REAL_TO_PHYS File=DAM$MAP.:E05TSI                         TUE 07/29/97 12:53 Page:248  
         2 000054   030015 713400                    CLIMB   12301
         2 000055   400000 401760                    pmme    nvectors=1

     1283     1160    1           DESCR=PTRDSCR(B$SPCL6$);

   1160  2 000056   000000 470400 xsym               LDP0    B$SPCL6$
         2 000057   200006 050500                    STD0    DESCR,,AUTO

     1284     1161    1           FPT_CVM.V.PPNO# = DBASE(DESCR)/4096+PHYS/2048;

   1161  2 000060   200007 236100                    LDQ     DESCR+1,,AUTO
         2 000061   000014 772000                    QRL     12
         2 000062   200004 470500                    LDP0    @PHYS,,AUTO
         2 000063   200012 756100                    STQ     P$+2,,AUTO
         2 000064   000000 236100                    LDQ     0,,PR0
         2 000065   000013 772000                    QRL     11
         2 000066   200012 036100                    ADLQ    P$+2,,AUTO
         2 000067   000013 756000 1                  STQ     FPT_CVM+3

     1285     1162    1           FPT_CVM.V.VPNO# = DA_MSCPG2;

   1162  2 000070   000000 720000 xsym               LXL0    DA_MSCPG2
         2 000071   000014 440000 1                  SXL0    FPT_CVM+4

     1286     1163    1           CALL M$CVM(FPT_CVM);

   1163  2 000072   000010 630400 1                  EPPR0   FPT_CVM
         2 000073   030011 713400                    CLIMB   12297
         2 000074   400000 401760                    pmme    nvectors=1

     1287     1164    1           P$=PINCRC(B$IS$,DA_MSCPG2*4096+MOD(PHYS,2048)*2);

   1164  2 000075   200004 470500                    LDP0    @PHYS,,AUTO
         2 000076   000000 236100                    LDQ     0,,PR0
         2 000077   003777 376007                    ANQ     2047,DL
         2 000100   200012 756100                    STQ     P$+2,,AUTO
         2 000101   000000 236000 xsym               LDQ     DA_MSCPG2
PL6.E3A0      #006=DAM$REAL_TO_PHYS File=DAM$MAP.:E05TSI                         TUE 07/29/97 12:53 Page:249  
         2 000102   000013 736000                    QLS     11
         2 000103   200012 036100                    ADLQ    P$+2,,AUTO
         2 000104   000021 736000                    QLS     17
         2 000105   000000 036000 xsym               ADLQ    B$IS$
         2 000106   200010 756100                    STQ     P$,,AUTO

     1288     1165    1           REAL=P$->B$HWORD;

   1165  2 000107   200010 471500                    LDP1    P$,,AUTO
         2 000110   200003 473500                    LDP3    @REAL,,AUTO
         2 000111   000100 101500                    MRL     fill='000'O
         2 000112   100000 000002                    ADSC9   0,,PR1                   cn=0,n=2
         2 000113   300000 000004                    ADSC9   0,,PR3                   cn=0,n=4

     1289     1166    1           FPT_CVM.V.PPNO# = -1;

   1166  2 000114   000001 335007                    LCA     1,DL
         2 000115   000013 755000 1                  STA     FPT_CVM+3

     1290     1167    1           CALL M$CVM(FPT_CVM);

   1167  2 000116   000010 630400 1                  EPPR0   FPT_CVM
         2 000117   030011 713400                    CLIMB   12297
         2 000120   400000 401760                    pmme    nvectors=1

     1291     1168    1   END DAM$REAL_TO_PHYS;

   1168  2 000121   000000 702200 xent               TSX2  ! X66_ARET

PL6.E3A0      #006=DAM$REAL_TO_PHYS File=DAM$MAP.:E05TSI                         TUE 07/29/97 12:53 Page:250  
--  Include file information  --

   DA_MAP_R.:E05TOU  cannot be made into a system file and is referenced.
   M_INFO_C.:E05TOU  is referenced.
   B$JIT.:E05TOU  cannot be made into a system file and is referenced.
   B_SEGIDS_C.:E05TOU  is referenced.
   CP_6.:E05TOU  cannot be made into a system file and is referenced.
   B$JIT_C.:E05TOU  was found in the system file and is referenced.
   CP_6_C.:E05TOU  was found in the system file and is referenced.
      No diagnostics issued in procedure DAM$REAL_TO_PHYS.
PL6.E3A0      #006=DAM$REAL_TO_PHYS File=DAM$MAP.:E05TSI                         TUE 07/29/97 12:53 Page:251  

 **** Variables and constants ****

  ****  Section 001  Data  DAM$REAL_TO_PHYS

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

    10-0-0/d STRC(216)   r     1 FPT_CVM                    4-0-0/d STRC(144)   r     1 FPT_SAD_IPHYMAP
     0-0-0/d STRC(144)   r     1 FPT_SAD_WSQ0PT

  ****  Auto variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     4-0-0/w PTR         r     1 @PHYS                      3-0-0/w PTR         r     1 @REAL
     6-0-0/d DSCR        r     1 DESCR                     10-0-0/w PTR         r     1 P$
    *0-0-0/w UBIN        r     1 PHYS                      *0-0-0/w UBIN        r     1 REAL

  ****  SYMREF variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/w PTR         r     1 B$IS$                      0-0-0/w PTR         r     1 B$JIT$
     0-0-0/w PTR         r     1 B$SPCL6$                   0-0-0/w SBIN        r     1 DA_MSCPG2

  ****  BASED and DCB variables  ****

  ****  Scalars and arrays  ****
OctLoc.c.b A Datatyp(siz) R M Lvl/name                 OctLoc.c.b A Datatyp(siz) R M Lvl/name

     0-0-0/h UBIN(18)    r     1 B$HWORD


   Procedure DAM$REAL_TO_PHYS requires 82 words for executable code.
PL6.E3A0      #006=DAM$REAL_TO_PHYS File=DAM$MAP.:E05TSI                         TUE 07/29/97 12:53 Page:252  
   Procedure DAM$REAL_TO_PHYS requires 12 words of local(AUTO) storage.

    No errors detected in file DAM$MAP.:E05TSI    .
PL6.E3A0      #006=DAM$REAL_TO_PHYS File=DAM$MAP.:E05TSI                         TUE 07/29/97 12:53 Page:253  
          *** CROSS REFERENCE LISTING ***
**     DENOTES     IDENTIFIER DEFINITION
<<                 IDENTIFIER'S VALUE SET
>>                 IDENTIFIER'S VALUE USED
<>                 IDENTIFIER SET AND/OR USED
--                 IDENTIFIER REFERENCED
PL6.E3A0      #006=DAM$REAL_TO_PHYS File=DAM$MAP.:E05TSI                         TUE 07/29/97 12:53 Page:254  
          MINI XREF LISTING

B$HWORD
        10**DCL      1152>>ASSIGN   1165>>ASSIGN
B$IS$
      1095**DCL      1151>>ASSIGN   1164>>ASSIGN
B$JIT.CPFLAGS1.SLEAZE
       742**DCL       742--REDEF
B$JIT.ERR.MID
       649**DCL       649--REDEF
B$JIT.JRESPEAK
       810**DCL       811--REDEF
B$JIT.ORIGINATOR_PORT.FROM_CR
       919**DCL       919--REDEF     920--REDEF
B$JIT.PNR
       823**DCL       823--REDEF
B$JIT.TSLINE
       917**DCL       918--REDEF
B$JIT$
      1097**DCL       643--IMP-PTR
B$SPCL6$
      1096**DCL      1147>>ASSIGN   1160>>ASSIGN
DA_MAPSEG.P
      1089**DCL      1090--REDEF
DA_MSCPG2
      1084**DCL      1149>>ASSIGN   1151>>ASSIGN   1162>>ASSIGN   1164>>ASSIGN
DA_SDASN.DESC.TYPE0
      1074**DCL      1074--REDEF
DA_TIGRSEG.P
      1090**DCL      1091--REDEF
DESCR
        11**DCL      1147<<ASSIGN   1148>>ASSIGN   1160<<ASSIGN   1161>>ASSIGN
FPT_CVM
      1140**DCL      1150<>CALL     1154<>CALL     1163<>CALL     1167<>CALL
PL6.E3A0      #006=DAM$REAL_TO_PHYS File=DAM$MAP.:E05TSI                         TUE 07/29/97 12:53 Page:255  
FPT_CVM.V
      1140**DCL      1140--DCLINIT
FPT_CVM.V.PPNO#
      1141**DCL      1148<<ASSIGN   1153<<ASSIGN   1161<<ASSIGN   1166<<ASSIGN
FPT_CVM.V.VPNO#
      1142**DCL      1149<<ASSIGN   1162<<ASSIGN
FPT_SAD_IPHYMAP
      1125**DCL      1159<>CALL
FPT_SAD_IPHYMAP.V
      1125**DCL      1125--DCLINIT
FPT_SAD_WSQ0PT
      1110**DCL      1146<>CALL
FPT_SAD_WSQ0PT.V
      1110**DCL      1110--DCLINIT
M$CVM
        61**DCL-ENT  1150--CALL     1154--CALL     1163--CALL     1167--CALL
M$SAD
        62**DCL-ENT  1146--CALL     1159--CALL
P$
        12**DCL      1151<<ASSIGN   1152>>ASSIGN   1164<<ASSIGN   1165>>ASSIGN
PHYS
         8**DCL         6--PROC     1152<<ASSIGN   1157--ENTRY    1161>>ASSIGN   1164>>ASSIGN
REAL
         7**DCL         6--PROC     1148>>ASSIGN   1151>>ASSIGN   1157--ENTRY    1165<<ASSIGN
