\documentclass[10pt, a4paper]{article}
\usepackage{graphicx, epsfig}
\reversemarginpar
\title{shannontmt.pas}
\begin{document}
\maketitle

\tableofcontents
\section{shannon}
\begin{tabbing}
***\=***\=***\=***\=***\=***\=***\=***\=***\=***\=***\=***\=***\=\kill
\\
\parbox{14cm}{\textsf{\textbf{program}  \textit{Shannon} ;}}\\
\+\parbox{14cm}{\textsf{\textbf{var} }}\\
\parbox{14cm}{\textsf{Let \textit{P} $\in$ ARRAY [char] OF real;}}\\
\parbox{14cm}{\textsf{Let \textit{valid} $\in$ boolean;}}\\
\<\textsf{\textbf{function}  \textit{H} \textit{(} \textit{PROTECTED}  \textbf{var}  \textit{P} :\textbf{array} [\textit{char} ] \textbf{of}  \textit{real} ):\textit{real} ;} (see Section \ref{sec:./shannontmtH} )\\
\<\textsf{\textbf{procedure}  \textit{ReadAndValidate} \textit{(} \textbf{var}  \textit{P} :\textbf{array} [\textit{char} ] \textbf{of}  \textit{real} );} (see Section \ref{sec:./shannontmtReadAndValidate} )\\
\-\<\+\parbox{14cm}{\textsf{\textbf{begin} }}\\
\parbox{14cm}{\textsf{\textit{ReadAndValidate} (\textit{P})}; }\\
\parbox{14cm}{\textsf {\textbf {if } \textsf{\textit{valid}} \textbf{ then } \textsf{\textbf{WRITE}(\textit{H} (\textit{P}))}; }}\\
\<\-\parbox{14cm}{\textsf{\textbf{end} .}}\\
\end{tabbing}
\section{function H}\label{sec:./shannontmtH}

\begin{tabbing}
***\=***\=***\=***\=***\=***\=***\=***\=***\=***\=***\=***\=***\=\kill
\parbox{14cm}{\textsf {\textbf {function } \textsf{ \textit{H} \textit{(} \textit{PROTECTED}  } \textbf{ var } \textsf{\textit{P} : \textit{ARRAY}$_{\textit{char}}$} \textbf{ of } \textsf{ \textit{real} ):\textit{real} ;}}}\\
\+\textsf{\textbf{function}  \textit{Log2} \textit{(}  \textit{x} : \textit{real} ): \textit{real} ;} (see Section \ref{sec:./shannontmt/HLog2} )\\
\-\<\+\parbox{14cm}{\textsf{\textbf{begin} }}\\
\parbox{14cm}{\textsf{\textit{H}$\leftarrow$  $\sum$  ( -  \textit{P} $\times$ \textit{Log2} (\textit{P}) ) }; }\\
\<\-\parbox{14cm}{\textsf{\textbf{end}  ;}}\\
\end{tabbing}
\section{procedure ReadAndValidate}\label{sec:./shannontmtReadAndValidate}

\begin{tabbing}
***\=***\=***\=***\=***\=***\=***\=***\=***\=***\=***\=***\=***\=\kill
\parbox{14cm}{\textsf {\textbf {procedure } \textsf{ \textit{ReadAndValidate} \textit{(} } \textbf{ var } \textsf{\textit{P} : \textit{ARRAY}$_{\textit{char}}$} \textbf{ of } \textsf{ \textit{real} );}}}\\
\+\parbox{14cm}{\textsf{\textbf{const} }}\\
\parbox{14cm}{\textsf{\textit{tolerance}  = 0.005;}}\\
\<\parbox{14cm}{\textsf{\textbf{var} }}\\
\parbox{14cm}{\textsf{Let \textit{low}, \textit{high}, \textit{sum} $\in$ real;}}\\
\-\<\+\parbox{14cm}{\textsf{\textbf{begin} }}\\
\parbox{14cm}{\textsf{\textbf{read} \textit{(} \textit{P} );}}\\
\parbox{14cm}{\textsf{\textit{low}$\leftarrow$ \textbf{ $\backslash min $ } \textit{P} }; }\\
\parbox{14cm}{\textsf{\textit{high}$\leftarrow$ \textbf{ $\backslash max$ } \textit{P} }; }\\
\parbox{14cm}{\textsf{\textit{sum}$\leftarrow$  $\sum$  \textit{P} }; }\\
\parbox{14cm}{\textsf{\textit{valid}$\leftarrow$ (\textit{low} $>$ 0) $\wedge$ (\textit{high} $\leq$ 1) $\wedge$ (\textit{sum} $<$ 1 + \textit{tolerance}) $\wedge$ (\textit{sum} $>$ 1 - \textit{tolerance})}; }\\
\parbox{14cm}{\textsf {\textbf {if } \textsf{\textbf{NOT} \textit{valid} } \textbf{ then } \textsf{\textbf{WRITE}(\textit{\textrm{\textup { `data invalid' } }})}; }}\\
\<\parbox{3.5cm}{\scriptsize{renormalise}}\'\>\parbox{14cm}{\textsf{\textit{P}$\leftarrow$ $\frac{\textit{P}}{\textit{sum}}$}; }\\
\<\-\parbox{14cm}{\textsf{\textbf{end}   ;}}\\
\end{tabbing}
\section{function Log2}\label{sec:./shannontmt/HLog2}

\begin{tabbing}
***\=***\=***\=***\=***\=***\=***\=***\=***\=***\=***\=***\=***\=\kill
\parbox{14cm}{\textsf {\textbf {function } \textsf{\textit{Log2} (\textit{x} : \textit{real}) : \textit{real}}; }}\\
\+\parbox{14cm}{\textsf{\textbf{const} }}\\
\parbox{14cm}{\textsf{\textit{Log2e}  = 1.442695;}}\\
\-\<\+\parbox{14cm}{\textsf{\textbf{begin} }}\\
\parbox{14cm}{\textsf{\textit{Log2}$\leftarrow$ $\ln$(\textit{x}) $\times$ \textit{log2e}}; }\\
\<\-\parbox{14cm}{\textsf{\textbf{end} ;}}\\
\end{tabbing}
\end{document}
